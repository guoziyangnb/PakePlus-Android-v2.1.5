import{F as x}from"./FormSection-dfhb-kCF.js";import{B as y}from"./BackNavBar-B1Wem3l3.js";import{_ as z,g as l,s as v,m as s}from"./index-BsLNy1A6.js";import{y as _,i as f,j as C,J as M,f as H,l as r,g as o,M as L,m as u,h as g,B as k,o as P,I as B}from"./vendor-CLLCb1yY.js";const N={class:"backup-page"},T={class:"backup-container"},I={class:"backup-actions"},V={__name:"Backup",setup($){const t=_({localBackup:!1,cloudBackup:!0}),n=f(!1),p=f(!1),m=C(()=>[{icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",label:"本地存储",field:"localBackup",switchable:!0,switchValue:t.localBackup},{icon:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3z",label:"云端存储",field:"cloudBackup",switchable:!0,switchValue:t.cloudBackup}]),b=(e,a,c)=>{t[e]=a,console.log(`${c.label} ${a?"已开启":"已关闭"}`);const i=l("backupSettings",{});i[e]=a,v("backupSettings",i),a?s.success(`${c.label}已开启`):s.success(`${c.label}已关闭`),e==="localBackup"&&!a&&s.warning("关闭本地存储新数据将不再存储在本地！",3e3),e==="cloudBackup"&&!a&&s.warning("关闭云端存储本地数据会越来越大导致卡顿！",3e3)},h=async()=>{if(!t.localBackup){s.warning("请先开启本地存储！");return}n.value=!0;try{await new Promise(d=>setTimeout(d,1e3)),s.warning("Sorry, 备份功能其实还在开发中,后续会上线哦");return}catch(e){s.error("备份失败："+e.message)}finally{n.value=!1}},w=async()=>{if(!t.localBackup){s.warning("恢复数据仅支持本地存储，请先开启");return}await new Promise(e=>setTimeout(e,1e3)),s.warning("Sorry, 恢复数据功能其实还在开发中,后续会上线哦")},S=()=>{const e=l("backupSettings",{});e.localBackup!==void 0&&(t.localBackup=e.localBackup),e.cloudBackup!==void 0&&(t.cloudBackup=e.cloudBackup)};return M(()=>{S()}),(e,a)=>(P(),H("div",N,[r(y,{title:"数据存储"}),o("div",T,[a[4]||(a[4]=L('<div class="backup-info" data-v-ef6916e1><div class="info-icon" data-v-ef6916e1><svg viewBox="0 0 24 24" data-v-ef6916e1><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" data-v-ef6916e1></path></svg></div><p class="info-text" data-v-ef6916e1> 开启备份功能后，您的记账数据将自动保存到指定的存储位置，确保数据安全<br data-v-ef6916e1><span style="color:red;" data-v-ef6916e1><strong data-v-ef6916e1>*</strong> 推荐数据保存在<strong data-v-ef6916e1>云端</strong>，而不是本地，对手机占用空间小。如果担忧数据安全以及隐私，可以打开本地存储</span></p></div><p class="info-text" style="color:red;" data-v-ef6916e1></p>',2)),r(x,{title:"备份设置",items:m.value,onSwitchChange:b},null,8,["items"]),o("div",I,[r(g(k),{type:"primary",block:"",loading:n.value,disabled:p.value,"loading-text":"备份中...",onClick:h},{icon:u(()=>[...a[0]||(a[0]=[o("svg",{viewBox:"0 0 24 24",class:"btn-icon"},[o("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"})],-1)])]),default:u(()=>[a[1]||(a[1]=B(" 立即备份 ",-1))]),_:1},8,["loading","disabled"]),r(g(k),{type:"default",block:"",loading:p.value,disabled:n.value,"loading-text":"恢复中...",onClick:w},{icon:u(()=>[...a[2]||(a[2]=[o("svg",{viewBox:"0 0 24 24",class:"btn-icon"},[o("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"})],-1)])]),default:u(()=>[a[3]||(a[3]=B(" 恢复数据 ",-1))]),_:1},8,["loading","disabled"])])])]))}},E=z(V,[["__scopeId","data-v-ef6916e1"]]);export{E as default};
