/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function makeMap(a){const r=Object.create(null);for(const n of a.split(","))r[n]=1;return n=>n in r}const EMPTY_OBJ$1={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=a=>a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&(a.charCodeAt(2)>122||a.charCodeAt(2)<97),isModelListener=a=>a.startsWith("onUpdate:"),extend$2=Object.assign,remove$1=(a,r)=>{const n=a.indexOf(r);n>-1&&a.splice(n,1)},hasOwnProperty$2=Object.prototype.hasOwnProperty,hasOwn$1=(a,r)=>hasOwnProperty$2.call(a,r),isArray$3=Array.isArray,isMap=a=>toTypeString(a)==="[object Map]",isSet=a=>toTypeString(a)==="[object Set]",isDate=a=>toTypeString(a)==="[object Date]",isFunction$2=a=>typeof a=="function",isString$1=a=>typeof a=="string",isSymbol=a=>typeof a=="symbol",isObject$5=a=>a!==null&&typeof a=="object",isPromise$1=a=>(isObject$5(a)||isFunction$2(a))&&isFunction$2(a.then)&&isFunction$2(a.catch),objectToString=Object.prototype.toString,toTypeString=a=>objectToString.call(a),toRawType=a=>toTypeString(a).slice(8,-1),isPlainObject$3=a=>toTypeString(a)==="[object Object]",isIntegerKey=a=>isString$1(a)&&a!=="NaN"&&a[0]!=="-"&&""+parseInt(a,10)===a,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=a=>{const r=Object.create(null);return n=>r[n]||(r[n]=a(n))},camelizeRE$1=/-\w/g,camelize$1=cacheStringFunction(a=>a.replace(camelizeRE$1,r=>r.slice(1).toUpperCase())),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(a=>a.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(a=>a.charAt(0).toUpperCase()+a.slice(1)),toHandlerKey=cacheStringFunction(a=>a?`on${capitalize(a)}`:""),hasChanged=(a,r)=>!Object.is(a,r),invokeArrayFns=(a,...r)=>{for(let n=0;n<a.length;n++)a[n](...r)},def=(a,r,n,o=!1)=>{Object.defineProperty(a,r,{configurable:!0,enumerable:!1,writable:o,value:n})},looseToNumber=a=>{const r=parseFloat(a);return isNaN(r)?a:r},toNumber$1=a=>{const r=isString$1(a)?Number(a):NaN;return isNaN(r)?a:r};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle$1(a){if(isArray$3(a)){const r={};for(let n=0;n<a.length;n++){const o=a[n],s=isString$1(o)?parseStringStyle(o):normalizeStyle$1(o);if(s)for(const l in s)r[l]=s[l]}return r}else if(isString$1(a)||isObject$5(a))return a}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(a){const r={};return a.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const o=n.split(propertyDelimiterRE);o.length>1&&(r[o[0].trim()]=o[1].trim())}}),r}function normalizeClass(a){let r="";if(isString$1(a))r=a;else if(isArray$3(a))for(let n=0;n<a.length;n++){const o=normalizeClass(a[n]);o&&(r+=o+" ")}else if(isObject$5(a))for(const n in a)a[n]&&(r+=n+" ");return r.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(a){return!!a||a===""}function looseCompareArrays(a,r){if(a.length!==r.length)return!1;let n=!0;for(let o=0;n&&o<a.length;o++)n=looseEqual(a[o],r[o]);return n}function looseEqual(a,r){if(a===r)return!0;let n=isDate(a),o=isDate(r);if(n||o)return n&&o?a.getTime()===r.getTime():!1;if(n=isSymbol(a),o=isSymbol(r),n||o)return a===r;if(n=isArray$3(a),o=isArray$3(r),n||o)return n&&o?looseCompareArrays(a,r):!1;if(n=isObject$5(a),o=isObject$5(r),n||o){if(!n||!o)return!1;const s=Object.keys(a).length,l=Object.keys(r).length;if(s!==l)return!1;for(const u in a){const c=a.hasOwnProperty(u),f=r.hasOwnProperty(u);if(c&&!f||!c&&f||!looseEqual(a[u],r[u]))return!1}}return String(a)===String(r)}function looseIndexOf(a,r){return a.findIndex(n=>looseEqual(n,r))}const isRef$1=a=>!!(a&&a.__v_isRef===!0),toDisplayString=a=>isString$1(a)?a:a==null?"":isArray$3(a)||isObject$5(a)&&(a.toString===objectToString||!isFunction$2(a.toString))?isRef$1(a)?toDisplayString(a.value):JSON.stringify(a,replacer,2):String(a),replacer=(a,r)=>isRef$1(r)?replacer(a,r.value):isMap(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((n,[o,s],l)=>(n[stringifySymbol(o,l)+" =>"]=s,n),{})}:isSet(r)?{[`Set(${r.size})`]:[...r.values()].map(n=>stringifySymbol(n))}:isSymbol(r)?stringifySymbol(r):isObject$5(r)&&!isArray$3(r)&&!isPlainObject$3(r)?String(r):r,stringifySymbol=(a,r="")=>{var n;return isSymbol(a)?`Symbol(${(n=a.description)!=null?n:r})`:a};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(r=!1){this.detached=r,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!r&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let r,n;if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].pause();for(r=0,n=this.effects.length;r<n;r++)this.effects[r].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let r,n;if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].resume();for(r=0,n=this.effects.length;r<n;r++)this.effects[r].resume()}}run(r){if(this._active){const n=activeEffectScope;try{return activeEffectScope=this,r()}finally{activeEffectScope=n}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(r){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!r){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function effectScope(a){return new EffectScope(a)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(a,r=!1){activeEffectScope&&activeEffectScope.cleanups.push(a)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(r){this.fn=r,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const r=activeSub,n=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=r,shouldTrack=n,this.flags&=-3}}stop(){if(this.flags&1){for(let r=this.deps;r;r=r.nextDep)removeSub(r);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(a,r=!1){if(a.flags|=8,r){a.next=batchedComputed,batchedComputed=a;return}a.next=batchedSub,batchedSub=a}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let r=batchedComputed;for(batchedComputed=void 0;r;){const n=r.next;r.next=void 0,r.flags&=-9,r=n}}let a;for(;batchedSub;){let r=batchedSub;for(batchedSub=void 0;r;){const n=r.next;if(r.next=void 0,r.flags&=-9,r.flags&1)try{r.trigger()}catch(o){a||(a=o)}r=n}}if(a)throw a}function prepareDeps(a){for(let r=a.deps;r;r=r.nextDep)r.version=-1,r.prevActiveLink=r.dep.activeLink,r.dep.activeLink=r}function cleanupDeps(a){let r,n=a.depsTail,o=n;for(;o;){const s=o.prevDep;o.version===-1?(o===n&&(n=s),removeSub(o),removeDep(o)):r=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=s}a.deps=r,a.depsTail=n}function isDirty(a){for(let r=a.deps;r;r=r.nextDep)if(r.dep.version!==r.version||r.dep.computed&&(refreshComputed(r.dep.computed)||r.dep.version!==r.version))return!0;return!!a._dirty}function refreshComputed(a){if(a.flags&4&&!(a.flags&16)||(a.flags&=-17,a.globalVersion===globalVersion)||(a.globalVersion=globalVersion,!a.isSSR&&a.flags&128&&(!a.deps&&!a._dirty||!isDirty(a))))return;a.flags|=2;const r=a.dep,n=activeSub,o=shouldTrack;activeSub=a,shouldTrack=!0;try{prepareDeps(a);const s=a.fn(a._value);(r.version===0||hasChanged(s,a._value))&&(a.flags|=128,a._value=s,r.version++)}catch(s){throw r.version++,s}finally{activeSub=n,shouldTrack=o,cleanupDeps(a),a.flags&=-3}}function removeSub(a,r=!1){const{dep:n,prevSub:o,nextSub:s}=a;if(o&&(o.nextSub=s,a.prevSub=void 0),s&&(s.prevSub=o,a.nextSub=void 0),n.subs===a&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let l=n.computed.deps;l;l=l.nextDep)removeSub(l,!0)}!r&&!--n.sc&&n.map&&n.map.delete(n.key)}function removeDep(a){const{prevDep:r,nextDep:n}=a;r&&(r.nextDep=n,a.prevDep=void 0),n&&(n.prevDep=r,a.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const a=trackStack.pop();shouldTrack=a===void 0?!0:a}function cleanupEffect(a){const{cleanup:r}=a;if(a.cleanup=void 0,r){const n=activeSub;activeSub=void 0;try{r()}finally{activeSub=n}}}let globalVersion=0;class Link{constructor(r,n){this.sub=r,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(r){this.computed=r,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(r){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==activeSub)n=this.activeLink=new Link(activeSub,this),activeSub.deps?(n.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=n,activeSub.depsTail=n):activeSub.deps=activeSub.depsTail=n,addSub(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=activeSub.depsTail,n.nextDep=void 0,activeSub.depsTail.nextDep=n,activeSub.depsTail=n,activeSub.deps===n&&(activeSub.deps=o)}return n}trigger(r){this.version++,globalVersion++,this.notify(r)}notify(r){startBatch();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{endBatch()}}}function addSub(a){if(a.dep.sc++,a.sub.flags&4){const r=a.dep.computed;if(r&&!a.dep.subs){r.flags|=20;for(let o=r.deps;o;o=o.nextDep)addSub(o)}const n=a.dep.subs;n!==a&&(a.prevSub=n,n&&(n.nextSub=a)),a.dep.subs=a}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(a,r,n){if(shouldTrack&&activeSub){let o=targetMap.get(a);o||targetMap.set(a,o=new Map);let s=o.get(n);s||(o.set(n,s=new Dep),s.map=o,s.key=n),s.track()}}function trigger$2(a,r,n,o,s,l){const u=targetMap.get(a);if(!u){globalVersion++;return}const c=f=>{f&&f.trigger()};if(startBatch(),r==="clear")u.forEach(c);else{const f=isArray$3(a),d=f&&isIntegerKey(n);if(f&&n==="length"){const v=Number(o);u.forEach((g,y)=>{(y==="length"||y===ARRAY_ITERATE_KEY||!isSymbol(y)&&y>=v)&&c(g)})}else switch((n!==void 0||u.has(void 0))&&c(u.get(n)),d&&c(u.get(ARRAY_ITERATE_KEY)),r){case"add":f?d&&c(u.get("length")):(c(u.get(ITERATE_KEY)),isMap(a)&&c(u.get(MAP_KEY_ITERATE_KEY)));break;case"delete":f||(c(u.get(ITERATE_KEY)),isMap(a)&&c(u.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(a)&&c(u.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(a,r){const n=targetMap.get(a);return n&&n.get(r)}function reactiveReadArray(a){const r=toRaw(a);return r===a?r:(track(r,"iterate",ARRAY_ITERATE_KEY),isShallow(a)?r:r.map(toReactive))}function shallowReadArray(a){return track(a=toRaw(a),"iterate",ARRAY_ITERATE_KEY),a}function toWrapped(a,r){return isReadonly(a)?isReactive(a)?toReadonly(toReactive(r)):toReadonly(r):toReactive(r)}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator$1(this,Symbol.iterator,a=>toWrapped(this,a))},concat(...a){return reactiveReadArray(this).concat(...a.map(r=>isArray$3(r)?reactiveReadArray(r):r))},entries(){return iterator$1(this,"entries",a=>(a[1]=toWrapped(this,a[1]),a))},every(a,r){return apply(this,"every",a,r,void 0,arguments)},filter(a,r){return apply(this,"filter",a,r,n=>n.map(o=>toWrapped(this,o)),arguments)},find(a,r){return apply(this,"find",a,r,n=>toWrapped(this,n),arguments)},findIndex(a,r){return apply(this,"findIndex",a,r,void 0,arguments)},findLast(a,r){return apply(this,"findLast",a,r,n=>toWrapped(this,n),arguments)},findLastIndex(a,r){return apply(this,"findLastIndex",a,r,void 0,arguments)},forEach(a,r){return apply(this,"forEach",a,r,void 0,arguments)},includes(...a){return searchProxy(this,"includes",a)},indexOf(...a){return searchProxy(this,"indexOf",a)},join(a){return reactiveReadArray(this).join(a)},lastIndexOf(...a){return searchProxy(this,"lastIndexOf",a)},map(a,r){return apply(this,"map",a,r,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...a){return noTracking(this,"push",a)},reduce(a,...r){return reduce$1(this,"reduce",a,r)},reduceRight(a,...r){return reduce$1(this,"reduceRight",a,r)},shift(){return noTracking(this,"shift")},some(a,r){return apply(this,"some",a,r,void 0,arguments)},splice(...a){return noTracking(this,"splice",a)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(a){return reactiveReadArray(this).toSorted(a)},toSpliced(...a){return reactiveReadArray(this).toSpliced(...a)},unshift(...a){return noTracking(this,"unshift",a)},values(){return iterator$1(this,"values",a=>toWrapped(this,a))}};function iterator$1(a,r,n){const o=shallowReadArray(a),s=o[r]();return o!==a&&!isShallow(a)&&(s._next=s.next,s.next=()=>{const l=s._next();return l.done||(l.value=n(l.value)),l}),s}const arrayProto$1=Array.prototype;function apply(a,r,n,o,s,l){const u=shallowReadArray(a),c=u!==a&&!isShallow(a),f=u[r];if(f!==arrayProto$1[r]){const g=f.apply(a,l);return c?toReactive(g):g}let d=n;u!==a&&(c?d=function(g,y){return n.call(this,toWrapped(a,g),y,a)}:n.length>2&&(d=function(g,y){return n.call(this,g,y,a)}));const v=f.call(u,d,o);return c&&s?s(v):v}function reduce$1(a,r,n,o){const s=shallowReadArray(a);let l=n;return s!==a&&(isShallow(a)?n.length>3&&(l=function(u,c,f){return n.call(this,u,c,f,a)}):l=function(u,c,f){return n.call(this,u,toWrapped(a,c),f,a)}),s[r](l,...o)}function searchProxy(a,r,n){const o=toRaw(a);track(o,"iterate",ARRAY_ITERATE_KEY);const s=o[r](...n);return(s===-1||s===!1)&&isProxy(n[0])?(n[0]=toRaw(n[0]),o[r](...n)):s}function noTracking(a,r,n=[]){pauseTracking(),startBatch();const o=toRaw(a)[r].apply(a,n);return endBatch(),resetTracking(),o}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(a=>a!=="arguments"&&a!=="caller").map(a=>Symbol[a]).filter(isSymbol));function hasOwnProperty$1(a){isSymbol(a)||(a=String(a));const r=toRaw(this);return track(r,"has",a),r.hasOwnProperty(a)}class BaseReactiveHandler{constructor(r=!1,n=!1){this._isReadonly=r,this._isShallow=n}get(r,n,o){if(n==="__v_skip")return r.__v_skip;const s=this._isReadonly,l=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return l;if(n==="__v_raw")return o===(s?l?shallowReadonlyMap:readonlyMap:l?shallowReactiveMap:reactiveMap).get(r)||Object.getPrototypeOf(r)===Object.getPrototypeOf(o)?r:void 0;const u=isArray$3(r);if(!s){let f;if(u&&(f=arrayInstrumentations[n]))return f;if(n==="hasOwnProperty")return hasOwnProperty$1}const c=Reflect.get(r,n,isRef(r)?r:o);if((isSymbol(n)?builtInSymbols.has(n):isNonTrackableKeys(n))||(s||track(r,"get",n),l))return c;if(isRef(c)){const f=u&&isIntegerKey(n)?c:c.value;return s&&isObject$5(f)?readonly(f):f}return isObject$5(c)?s?readonly(c):reactive(c):c}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(r=!1){super(!1,r)}set(r,n,o,s){let l=r[n];const u=isArray$3(r)&&isIntegerKey(n);if(!this._isShallow){const d=isReadonly(l);if(!isShallow(o)&&!isReadonly(o)&&(l=toRaw(l),o=toRaw(o)),!u&&isRef(l)&&!isRef(o))return d||(l.value=o),!0}const c=u?Number(n)<r.length:hasOwn$1(r,n),f=Reflect.set(r,n,o,isRef(r)?r:s);return r===toRaw(s)&&(c?hasChanged(o,l)&&trigger$2(r,"set",n,o):trigger$2(r,"add",n,o)),f}deleteProperty(r,n){const o=hasOwn$1(r,n);r[n];const s=Reflect.deleteProperty(r,n);return s&&o&&trigger$2(r,"delete",n,void 0),s}has(r,n){const o=Reflect.has(r,n);return(!isSymbol(n)||!builtInSymbols.has(n))&&track(r,"has",n),o}ownKeys(r){return track(r,"iterate",isArray$3(r)?"length":ITERATE_KEY),Reflect.ownKeys(r)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(r=!1){super(!0,r)}set(r,n){return!0}deleteProperty(r,n){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=a=>a,getProto=a=>Reflect.getPrototypeOf(a);function createIterableMethod(a,r,n){return function(...o){const s=this.__v_raw,l=toRaw(s),u=isMap(l),c=a==="entries"||a===Symbol.iterator&&u,f=a==="keys"&&u,d=s[a](...o),v=n?toShallow:r?toReadonly:toReactive;return!r&&track(l,"iterate",f?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:g,done:y}=d.next();return y?{value:g,done:y}:{value:c?[v(g[0]),v(g[1])]:v(g),done:y}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(a){return function(...r){return a==="delete"?!1:a==="clear"?void 0:this}}function createInstrumentations(a,r){const n={get(s){const l=this.__v_raw,u=toRaw(l),c=toRaw(s);a||(hasChanged(s,c)&&track(u,"get",s),track(u,"get",c));const{has:f}=getProto(u),d=r?toShallow:a?toReadonly:toReactive;if(f.call(u,s))return d(l.get(s));if(f.call(u,c))return d(l.get(c));l!==u&&l.get(s)},get size(){const s=this.__v_raw;return!a&&track(toRaw(s),"iterate",ITERATE_KEY),s.size},has(s){const l=this.__v_raw,u=toRaw(l),c=toRaw(s);return a||(hasChanged(s,c)&&track(u,"has",s),track(u,"has",c)),s===c?l.has(s):l.has(s)||l.has(c)},forEach(s,l){const u=this,c=u.__v_raw,f=toRaw(c),d=r?toShallow:a?toReadonly:toReactive;return!a&&track(f,"iterate",ITERATE_KEY),c.forEach((v,g)=>s.call(l,d(v),d(g),u))}};return extend$2(n,a?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(s){!r&&!isShallow(s)&&!isReadonly(s)&&(s=toRaw(s));const l=toRaw(this);return getProto(l).has.call(l,s)||(l.add(s),trigger$2(l,"add",s,s)),this},set(s,l){!r&&!isShallow(l)&&!isReadonly(l)&&(l=toRaw(l));const u=toRaw(this),{has:c,get:f}=getProto(u);let d=c.call(u,s);d||(s=toRaw(s),d=c.call(u,s));const v=f.call(u,s);return u.set(s,l),d?hasChanged(l,v)&&trigger$2(u,"set",s,l):trigger$2(u,"add",s,l),this},delete(s){const l=toRaw(this),{has:u,get:c}=getProto(l);let f=u.call(l,s);f||(s=toRaw(s),f=u.call(l,s)),c&&c.call(l,s);const d=l.delete(s);return f&&trigger$2(l,"delete",s,void 0),d},clear(){const s=toRaw(this),l=s.size!==0,u=s.clear();return l&&trigger$2(s,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=createIterableMethod(s,a,r)}),n}function createInstrumentationGetter(a,r){const n=createInstrumentations(a,r);return(o,s,l)=>s==="__v_isReactive"?!a:s==="__v_isReadonly"?a:s==="__v_raw"?o:Reflect.get(hasOwn$1(n,s)&&s in o?n:o,s,l)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(a){switch(a){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(a){return a.__v_skip||!Object.isExtensible(a)?0:targetTypeMap(toRawType(a))}function reactive(a){return isReadonly(a)?a:createReactiveObject(a,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(a){return createReactiveObject(a,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(a){return createReactiveObject(a,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(a){return createReactiveObject(a,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(a,r,n,o,s){if(!isObject$5(a)||a.__v_raw&&!(r&&a.__v_isReactive))return a;const l=getTargetType(a);if(l===0)return a;const u=s.get(a);if(u)return u;const c=new Proxy(a,l===2?o:n);return s.set(a,c),c}function isReactive(a){return isReadonly(a)?isReactive(a.__v_raw):!!(a&&a.__v_isReactive)}function isReadonly(a){return!!(a&&a.__v_isReadonly)}function isShallow(a){return!!(a&&a.__v_isShallow)}function isProxy(a){return a?!!a.__v_raw:!1}function toRaw(a){const r=a&&a.__v_raw;return r?toRaw(r):a}function markRaw(a){return!hasOwn$1(a,"__v_skip")&&Object.isExtensible(a)&&def(a,"__v_skip",!0),a}const toReactive=a=>isObject$5(a)?reactive(a):a,toReadonly=a=>isObject$5(a)?readonly(a):a;function isRef(a){return a?a.__v_isRef===!0:!1}function ref(a){return createRef(a,!1)}function shallowRef(a){return createRef(a,!0)}function createRef(a,r){return isRef(a)?a:new RefImpl(a,r)}class RefImpl{constructor(r,n){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?r:toRaw(r),this._value=n?r:toReactive(r),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(r){const n=this._rawValue,o=this.__v_isShallow||isShallow(r)||isReadonly(r);r=o?r:toRaw(r),hasChanged(r,n)&&(this._rawValue=r,this._value=o?r:toReactive(r),this.dep.trigger())}}function unref(a){return isRef(a)?a.value:a}const shallowUnwrapHandlers={get:(a,r,n)=>r==="__v_raw"?a:unref(Reflect.get(a,r,n)),set:(a,r,n,o)=>{const s=a[r];return isRef(s)&&!isRef(n)?(s.value=n,!0):Reflect.set(a,r,n,o)}};function proxyRefs(a){return isReactive(a)?a:new Proxy(a,shallowUnwrapHandlers)}function toRefs(a){const r=isArray$3(a)?new Array(a.length):{};for(const n in a)r[n]=propertyToRef(a,n);return r}class ObjectRefImpl{constructor(r,n,o){this._object=r,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0,this._raw=toRaw(r);let s=!0,l=r;if(!isArray$3(r)||!isIntegerKey(String(n)))do s=!isProxy(l)||isShallow(l);while(s&&(l=l.__v_raw));this._shallow=s}get value(){let r=this._object[this._key];return this._shallow&&(r=unref(r)),this._value=r===void 0?this._defaultValue:r}set value(r){if(this._shallow&&isRef(this._raw[this._key])){const n=this._object[this._key];if(isRef(n)){n.value=r;return}}this._object[this._key]=r}get dep(){return getDepFromReactive(this._raw,this._key)}}function propertyToRef(a,r,n){return new ObjectRefImpl(a,r,n)}class ComputedRefImpl{constructor(r,n,o){this.fn=r,this.setter=n,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const r=this.dep.track();return refreshComputed(this),r&&(r.version=this.dep.version),this._value}set value(r){this.setter&&this.setter(r)}}function computed$1(a,r,n=!1){let o,s;return isFunction$2(a)?o=a:(o=a.get,s=a.set),new ComputedRefImpl(o,s,n)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(a,r=!1,n=activeWatcher){if(n){let o=cleanupMap.get(n);o||cleanupMap.set(n,o=[]),o.push(a)}}function watch$1(a,r,n=EMPTY_OBJ$1){const{immediate:o,deep:s,once:l,scheduler:u,augmentJob:c,call:f}=n,d=C=>s?C:isShallow(C)||s===!1||s===0?traverse(C,1):traverse(C);let v,g,y,_,S=!1,b=!1;if(isRef(a)?(g=()=>a.value,S=isShallow(a)):isReactive(a)?(g=()=>d(a),S=!0):isArray$3(a)?(b=!0,S=a.some(C=>isReactive(C)||isShallow(C)),g=()=>a.map(C=>{if(isRef(C))return C.value;if(isReactive(C))return d(C);if(isFunction$2(C))return f?f(C,2):C()})):isFunction$2(a)?r?g=f?()=>f(a,2):a:g=()=>{if(y){pauseTracking();try{y()}finally{resetTracking()}}const C=activeWatcher;activeWatcher=v;try{return f?f(a,3,[_]):a(_)}finally{activeWatcher=C}}:g=NOOP,r&&s){const C=g,E=s===!0?1/0:s;g=()=>traverse(C(),E)}const x=getCurrentScope(),T=()=>{v.stop(),x&&x.active&&remove$1(x.effects,v)};if(l&&r){const C=r;r=(...E)=>{C(...E),T()}}let A=b?new Array(a.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const w=C=>{if(!(!(v.flags&1)||!v.dirty&&!C))if(r){const E=v.run();if(s||S||(b?E.some((P,I)=>hasChanged(P,A[I])):hasChanged(E,A))){y&&y();const P=activeWatcher;activeWatcher=v;try{const I=[E,A===INITIAL_WATCHER_VALUE?void 0:b&&A[0]===INITIAL_WATCHER_VALUE?[]:A,_];A=E,f?f(r,3,I):r(...I)}finally{activeWatcher=P}}}else v.run()};return c&&c(w),v=new ReactiveEffect(g),v.scheduler=u?()=>u(w,!1):w,_=C=>onWatcherCleanup(C,!1,v),y=v.onStop=()=>{const C=cleanupMap.get(v);if(C){if(f)f(C,4);else for(const E of C)E();cleanupMap.delete(v)}},r?o?w(!0):A=v.run():u?u(w.bind(null,!0),!0):v.run(),T.pause=v.pause.bind(v),T.resume=v.resume.bind(v),T.stop=T,T}function traverse(a,r=1/0,n){if(r<=0||!isObject$5(a)||a.__v_skip||(n=n||new Map,(n.get(a)||0)>=r))return a;if(n.set(a,r),r--,isRef(a))traverse(a.value,r,n);else if(isArray$3(a))for(let o=0;o<a.length;o++)traverse(a[o],r,n);else if(isSet(a)||isMap(a))a.forEach(o=>{traverse(o,r,n)});else if(isPlainObject$3(a)){for(const o in a)traverse(a[o],r,n);for(const o of Object.getOwnPropertySymbols(a))Object.prototype.propertyIsEnumerable.call(a,o)&&traverse(a[o],r,n)}return a}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(a,...r){if(isWarning)return;isWarning=!0,pauseTracking();const n=stack.length?stack[stack.length-1].component:null,o=n&&n.appContext.config.warnHandler,s=getComponentTrace();if(o)callWithErrorHandling(o,n,11,[a+r.map(l=>{var u,c;return(c=(u=l.toString)==null?void 0:u.call(l))!=null?c:JSON.stringify(l)}).join(""),n&&n.proxy,s.map(({vnode:l})=>`at <${formatComponentName(n,l.type)}>`).join(`
`),s]);else{const l=[`[Vue warn]: ${a}`,...r];s.length&&l.push(`
`,...formatTrace(s)),console.warn(...l)}resetTracking(),isWarning=!1}function getComponentTrace(){let a=stack[stack.length-1];if(!a)return[];const r=[];for(;a;){const n=r[0];n&&n.vnode===a?n.recurseCount++:r.push({vnode:a,recurseCount:0});const o=a.component&&a.component.parent;a=o&&o.vnode}return r}function formatTrace(a){const r=[];return a.forEach((n,o)=>{r.push(...o===0?[]:[`
`],...formatTraceEntry(n))}),r}function formatTraceEntry({vnode:a,recurseCount:r}){const n=r>0?`... (${r} recursive calls)`:"",o=a.component?a.component.parent==null:!1,s=` at <${formatComponentName(a.component,a.type,o)}`,l=">"+n;return a.props?[s,...formatProps(a.props),l]:[s+l]}function formatProps(a){const r=[],n=Object.keys(a);return n.slice(0,3).forEach(o=>{r.push(...formatProp(o,a[o]))}),n.length>3&&r.push(" ..."),r}function formatProp(a,r,n){return isString$1(r)?(r=JSON.stringify(r),n?r:[`${a}=${r}`]):typeof r=="number"||typeof r=="boolean"||r==null?n?r:[`${a}=${r}`]:isRef(r)?(r=formatProp(a,toRaw(r.value),!0),n?r:[`${a}=Ref<`,r,">"]):isFunction$2(r)?[`${a}=fn${r.name?`<${r.name}>`:""}`]:(r=toRaw(r),n?r:[`${a}=`,r])}function callWithErrorHandling(a,r,n,o){try{return o?a(...o):a()}catch(s){handleError$3(s,r,n)}}function callWithAsyncErrorHandling(a,r,n,o){if(isFunction$2(a)){const s=callWithErrorHandling(a,r,n,o);return s&&isPromise$1(s)&&s.catch(l=>{handleError$3(l,r,n)}),s}if(isArray$3(a)){const s=[];for(let l=0;l<a.length;l++)s.push(callWithAsyncErrorHandling(a[l],r,n,o));return s}}function handleError$3(a,r,n,o=!0){const s=r?r.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:u}=r&&r.appContext.config||EMPTY_OBJ$1;if(r){let c=r.parent;const f=r.proxy,d=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const v=c.ec;if(v){for(let g=0;g<v.length;g++)if(v[g](a,f,d)===!1)return}c=c.parent}if(l){pauseTracking(),callWithErrorHandling(l,null,10,[a,f,d]),resetTracking();return}}logError$1(a,n,s,o,u)}function logError$1(a,r,n,o=!0,s=!1){if(s)throw a;console.error(a)}const queue$1=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(a){const r=currentFlushPromise||resolvedPromise;return a?r.then(this?a.bind(this):a):r}function findInsertionIndex$1(a){let r=flushIndex+1,n=queue$1.length;for(;r<n;){const o=r+n>>>1,s=queue$1[o],l=getId$1(s);l<a||l===a&&s.flags&2?r=o+1:n=o}return r}function queueJob(a){if(!(a.flags&1)){const r=getId$1(a),n=queue$1[queue$1.length-1];!n||!(a.flags&2)&&r>=getId$1(n)?queue$1.push(a):queue$1.splice(findInsertionIndex$1(r),0,a),a.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(a){isArray$3(a)?pendingPostFlushCbs.push(...a):activePostFlushCbs&&a.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,a):a.flags&1||(pendingPostFlushCbs.push(a),a.flags|=1),queueFlush()}function flushPreFlushCbs(a,r,n=flushIndex+1){for(;n<queue$1.length;n++){const o=queue$1[n];if(o&&o.flags&2){if(a&&o.id!==a.uid)continue;queue$1.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function flushPostFlushCbs(a){if(pendingPostFlushCbs.length){const r=[...new Set(pendingPostFlushCbs)].sort((n,o)=>getId$1(n)-getId$1(o));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...r);return}for(activePostFlushCbs=r,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const n=activePostFlushCbs[postFlushIndex];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId$1=a=>a.id==null?a.flags&2?-1:1/0:a.id;function flushJobs(a){try{for(flushIndex=0;flushIndex<queue$1.length;flushIndex++){const r=queue$1[flushIndex];r&&!(r.flags&8)&&(r.flags&4&&(r.flags&=-2),callWithErrorHandling(r,r.i,r.i?15:14),r.flags&4||(r.flags&=-2))}}finally{for(;flushIndex<queue$1.length;flushIndex++){const r=queue$1[flushIndex];r&&(r.flags&=-2)}flushIndex=-1,queue$1.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue$1.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(a){const r=currentRenderingInstance;return currentRenderingInstance=a,currentScopeId=a&&a.type.__scopeId||null,r}function withCtx(a,r=currentRenderingInstance,n){if(!r||a._n)return a;const o=(...s)=>{o._d&&setBlockTracking(-1);const l=setCurrentRenderingInstance(r);let u;try{u=a(...s)}finally{setCurrentRenderingInstance(l),o._d&&setBlockTracking(1)}return u};return o._n=!0,o._c=!0,o._d=!0,o}function withDirectives(a,r){if(currentRenderingInstance===null)return a;const n=getComponentPublicInstance(currentRenderingInstance),o=a.dirs||(a.dirs=[]);for(let s=0;s<r.length;s++){let[l,u,c,f=EMPTY_OBJ$1]=r[s];l&&(isFunction$2(l)&&(l={mounted:l,updated:l}),l.deep&&traverse(u),o.push({dir:l,instance:n,value:u,oldValue:void 0,arg:c,modifiers:f}))}return a}function invokeDirectiveHook(a,r,n,o){const s=a.dirs,l=r&&r.dirs;for(let u=0;u<s.length;u++){const c=s[u];l&&(c.oldValue=l[u].value);let f=c.dir[o];f&&(pauseTracking(),callWithAsyncErrorHandling(f,n,8,[a.el,c,a,r]),resetTracking())}}function provide(a,r){if(currentInstance){let n=currentInstance.provides;const o=currentInstance.parent&&currentInstance.parent.provides;o===n&&(n=currentInstance.provides=Object.create(o)),n[a]=r}}function inject(a,r,n=!1){const o=getCurrentInstance();if(o||currentApp){let s=currentApp?currentApp._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(s&&a in s)return s[a];if(arguments.length>1)return n&&isFunction$2(r)?r.call(o&&o.proxy):r}}function hasInjectionContext(){return!!(getCurrentInstance()||currentApp)}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(a,r){return doWatch(a,null,r)}function watch(a,r,n){return doWatch(a,r,n)}function doWatch(a,r,n=EMPTY_OBJ$1){const{immediate:o,deep:s,flush:l,once:u}=n,c=extend$2({},n),f=r&&o||!r&&l!=="post";let d;if(isInSSRComponentSetup){if(l==="sync"){const _=useSSRContext();d=_.__watcherHandles||(_.__watcherHandles=[])}else if(!f){const _=()=>{};return _.stop=NOOP,_.resume=NOOP,_.pause=NOOP,_}}const v=currentInstance;c.call=(_,S,b)=>callWithAsyncErrorHandling(_,v,S,b);let g=!1;l==="post"?c.scheduler=_=>{queuePostRenderEffect(_,v&&v.suspense)}:l!=="sync"&&(g=!0,c.scheduler=(_,S)=>{S?_():queueJob(_)}),c.augmentJob=_=>{r&&(_.flags|=4),g&&(_.flags|=2,v&&(_.id=v.uid,_.i=v))};const y=watch$1(a,r,c);return isInSSRComponentSetup&&(d?d.push(y):f&&y()),y}function instanceWatch(a,r,n){const o=this.proxy,s=isString$1(a)?a.includes(".")?createPathGetter(o,a):()=>o[a]:a.bind(o,o);let l;isFunction$2(r)?l=r:(l=r.handler,n=r);const u=setCurrentInstance(this),c=doWatch(s,l.bind(o),n);return u(),c}function createPathGetter(a,r){const n=r.split(".");return()=>{let o=a;for(let s=0;s<n.length&&o;s++)o=o[n[s]];return o}}const TeleportEndKey=Symbol("_vte"),isTeleport=a=>a.__isTeleport,isTeleportDisabled=a=>a&&(a.disabled||a.disabled===""),isTeleportDeferred=a=>a&&(a.defer||a.defer===""),isTargetSVG=a=>typeof SVGElement<"u"&&a instanceof SVGElement,isTargetMathML=a=>typeof MathMLElement=="function"&&a instanceof MathMLElement,resolveTarget=(a,r)=>{const n=a&&a.to;return isString$1(n)?r?r(n):null:n},TeleportImpl={name:"Teleport",__isTeleport:!0,process(a,r,n,o,s,l,u,c,f,d){const{mc:v,pc:g,pbc:y,o:{insert:_,querySelector:S,createText:b,createComment:x}}=d,T=isTeleportDisabled(r.props);let{shapeFlag:A,children:w,dynamicChildren:C}=r;if(a==null){const E=r.el=b(""),P=r.anchor=b("");_(E,n,o),_(P,n,o);const I=(R,O)=>{A&16&&v(w,R,O,s,l,u,c,f)},M=()=>{const R=r.target=resolveTarget(r.props,S),O=prepareAnchor(R,r,b,_);R&&(u!=="svg"&&isTargetSVG(R)?u="svg":u!=="mathml"&&isTargetMathML(R)&&(u="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(R),T||(I(R,O),updateCssVars(r,!1)))};T&&(I(n,P),updateCssVars(r,!0)),isTeleportDeferred(r.props)?(r.el.__isMounted=!1,queuePostRenderEffect(()=>{M(),delete r.el.__isMounted},l)):M()}else{if(isTeleportDeferred(r.props)&&a.el.__isMounted===!1){queuePostRenderEffect(()=>{TeleportImpl.process(a,r,n,o,s,l,u,c,f,d)},l);return}r.el=a.el,r.targetStart=a.targetStart;const E=r.anchor=a.anchor,P=r.target=a.target,I=r.targetAnchor=a.targetAnchor,M=isTeleportDisabled(a.props),R=M?n:P,O=M?E:I;if(u==="svg"||isTargetSVG(P)?u="svg":(u==="mathml"||isTargetMathML(P))&&(u="mathml"),C?(y(a.dynamicChildren,C,R,s,l,u,c),traverseStaticChildren(a,r,!0)):f||g(a,r,R,O,s,l,u,c,!1),T)M?r.props&&a.props&&r.props.to!==a.props.to&&(r.props.to=a.props.to):moveTeleport(r,n,E,d,1);else if((r.props&&r.props.to)!==(a.props&&a.props.to)){const $=r.target=resolveTarget(r.props,S);$&&moveTeleport(r,$,null,d,0)}else M&&moveTeleport(r,P,I,d,1);updateCssVars(r,T)}},remove(a,r,n,{um:o,o:{remove:s}},l){const{shapeFlag:u,children:c,anchor:f,targetStart:d,targetAnchor:v,target:g,props:y}=a;if(g&&(s(d),s(v)),l&&s(f),u&16){const _=l||!isTeleportDisabled(y);for(let S=0;S<c.length;S++){const b=c[S];o(b,r,n,_,!!b.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(a,r,n,{o:{insert:o},m:s},l=2){l===0&&o(a.targetAnchor,r,n);const{el:u,anchor:c,shapeFlag:f,children:d,props:v}=a,g=l===2;if(g&&o(u,r,n),(!g||isTeleportDisabled(v))&&f&16)for(let y=0;y<d.length;y++)s(d[y],r,n,2);g&&o(c,r,n)}function hydrateTeleport(a,r,n,o,s,l,{o:{nextSibling:u,parentNode:c,querySelector:f,insert:d,createText:v}},g){function y(b,x,T,A){x.anchor=g(u(b),x,c(b),n,o,s,l),x.targetStart=T,x.targetAnchor=A}const _=r.target=resolveTarget(r.props,f),S=isTeleportDisabled(r.props);if(_){const b=_._lpa||_.firstChild;if(r.shapeFlag&16)if(S)y(a,r,b,b&&u(b));else{r.anchor=u(a);let x=b;for(;x;){if(x&&x.nodeType===8){if(x.data==="teleport start anchor")r.targetStart=x;else if(x.data==="teleport anchor"){r.targetAnchor=x,_._lpa=r.targetAnchor&&u(r.targetAnchor);break}}x=u(x)}r.targetAnchor||prepareAnchor(_,r,v,d),g(b&&u(b),r,_,n,o,s,l)}updateCssVars(r,S)}else S&&r.shapeFlag&16&&y(a,r,a,u(a));return r.anchor&&u(r.anchor)}const Teleport=TeleportImpl;function updateCssVars(a,r){const n=a.ctx;if(n&&n.ut){let o,s;for(r?(o=a.el,s=a.anchor):(o=a.targetStart,s=a.targetAnchor);o&&o!==s;)o.nodeType===1&&o.setAttribute("data-v-owner",n.uid),o=o.nextSibling;n.ut()}}function prepareAnchor(a,r,n,o){const s=r.targetStart=n(""),l=r.targetAnchor=n("");return s[TeleportEndKey]=l,a&&(o(s,a),o(l,a)),l}const leaveCbKey=Symbol("_leaveCb"),enterCbKey=Symbol("_enterCb");function useTransitionState(){const a={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{a.isMounted=!0}),onBeforeUnmount(()=>{a.isUnmounting=!0}),a}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=a=>{const r=a.subTree;return r.component?recursiveGetSubtree(r.component):r},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(a,{slots:r}){const n=getCurrentInstance(),o=useTransitionState();return()=>{const s=r.default&&getTransitionRawChildren(r.default(),!0);if(!s||!s.length)return;const l=findNonCommentChild(s),u=toRaw(a),{mode:c}=u;if(o.isLeaving)return emptyPlaceholder(l);const f=getInnerChild$1(l);if(!f)return emptyPlaceholder(l);let d=resolveTransitionHooks(f,u,o,n,g=>d=g);f.type!==Comment&&setTransitionHooks(f,d);let v=n.subTree&&getInnerChild$1(n.subTree);if(v&&v.type!==Comment&&!isSameVNodeType(v,f)&&recursiveGetSubtree(n).type!==Comment){let g=resolveTransitionHooks(v,u,o,n);if(setTransitionHooks(v,g),c==="out-in"&&f.type!==Comment)return o.isLeaving=!0,g.afterLeave=()=>{o.isLeaving=!1,n.job.flags&8||n.update(),delete g.afterLeave,v=void 0},emptyPlaceholder(l);c==="in-out"&&f.type!==Comment?g.delayLeave=(y,_,S)=>{const b=getLeavingNodesForType(o,v);b[String(v.key)]=v,y[leaveCbKey]=()=>{_(),y[leaveCbKey]=void 0,delete d.delayedLeave,v=void 0},d.delayedLeave=()=>{S(),delete d.delayedLeave,v=void 0}}:v=void 0}else v&&(v=void 0);return l}}};function findNonCommentChild(a){let r=a[0];if(a.length>1){for(const n of a)if(n.type!==Comment){r=n;break}}return r}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(a,r){const{leavingVNodes:n}=a;let o=n.get(r.type);return o||(o=Object.create(null),n.set(r.type,o)),o}function resolveTransitionHooks(a,r,n,o,s){const{appear:l,mode:u,persisted:c=!1,onBeforeEnter:f,onEnter:d,onAfterEnter:v,onEnterCancelled:g,onBeforeLeave:y,onLeave:_,onAfterLeave:S,onLeaveCancelled:b,onBeforeAppear:x,onAppear:T,onAfterAppear:A,onAppearCancelled:w}=r,C=String(a.key),E=getLeavingNodesForType(n,a),P=(R,O)=>{R&&callWithAsyncErrorHandling(R,o,9,O)},I=(R,O)=>{const $=O[1];P(R,O),isArray$3(R)?R.every(B=>B.length<=1)&&$():R.length<=1&&$()},M={mode:u,persisted:c,beforeEnter(R){let O=f;if(!n.isMounted)if(l)O=x||f;else return;R[leaveCbKey]&&R[leaveCbKey](!0);const $=E[C];$&&isSameVNodeType(a,$)&&$.el[leaveCbKey]&&$.el[leaveCbKey](),P(O,[R])},enter(R){let O=d,$=v,B=g;if(!n.isMounted)if(l)O=T||d,$=A||v,B=w||g;else return;let F=!1;const z=R[enterCbKey]=G=>{F||(F=!0,G?P(B,[R]):P($,[R]),M.delayedLeave&&M.delayedLeave(),R[enterCbKey]=void 0)};O?I(O,[R,z]):z()},leave(R,O){const $=String(a.key);if(R[enterCbKey]&&R[enterCbKey](!0),n.isUnmounting)return O();P(y,[R]);let B=!1;const F=R[leaveCbKey]=z=>{B||(B=!0,O(),z?P(b,[R]):P(S,[R]),R[leaveCbKey]=void 0,E[$]===a&&delete E[$])};E[$]=a,_?I(_,[R,F]):F()},clone(R){const O=resolveTransitionHooks(R,r,n,o,s);return s&&s(O),O}};return M}function emptyPlaceholder(a){if(isKeepAlive(a))return a=cloneVNode(a),a.children=null,a}function getInnerChild$1(a){if(!isKeepAlive(a))return isTeleport(a.type)&&a.children?findNonCommentChild(a.children):a;if(a.component)return a.component.subTree;const{shapeFlag:r,children:n}=a;if(n){if(r&16)return n[0];if(r&32&&isFunction$2(n.default))return n.default()}}function setTransitionHooks(a,r){a.shapeFlag&6&&a.component?(a.transition=r,setTransitionHooks(a.component.subTree,r)):a.shapeFlag&128?(a.ssContent.transition=r.clone(a.ssContent),a.ssFallback.transition=r.clone(a.ssFallback)):a.transition=r}function getTransitionRawChildren(a,r=!1,n){let o=[],s=0;for(let l=0;l<a.length;l++){let u=a[l];const c=n==null?u.key:String(n)+String(u.key!=null?u.key:l);u.type===Fragment?(u.patchFlag&128&&s++,o=o.concat(getTransitionRawChildren(u.children,r,c))):(r||u.type!==Comment)&&o.push(c!=null?cloneVNode(u,{key:c}):u)}if(s>1)for(let l=0;l<o.length;l++)o[l].patchFlag=-2;return o}function defineComponent(a,r){return isFunction$2(a)?extend$2({name:a.name},r,{setup:a}):a}function markAsyncBoundary(a){a.ids=[a.ids[0]+a.ids[2]+++"-",0,0]}const pendingSetRefMap=new WeakMap;function setRef(a,r,n,o,s=!1){if(isArray$3(a)){a.forEach((S,b)=>setRef(S,r&&(isArray$3(r)?r[b]:r),n,o,s));return}if(isAsyncWrapper(o)&&!s){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&setRef(a,r,n,o.component.subTree);return}const l=o.shapeFlag&4?getComponentPublicInstance(o.component):o.el,u=s?null:l,{i:c,r:f}=a,d=r&&r.r,v=c.refs===EMPTY_OBJ$1?c.refs={}:c.refs,g=c.setupState,y=toRaw(g),_=g===EMPTY_OBJ$1?NO:S=>hasOwn$1(y,S);if(d!=null&&d!==f){if(invalidatePendingSetRef(r),isString$1(d))v[d]=null,_(d)&&(g[d]=null);else if(isRef(d)){d.value=null;const S=r;S.k&&(v[S.k]=null)}}if(isFunction$2(f))callWithErrorHandling(f,c,12,[u,v]);else{const S=isString$1(f),b=isRef(f);if(S||b){const x=()=>{if(a.f){const T=S?_(f)?g[f]:v[f]:f.value;if(s)isArray$3(T)&&remove$1(T,l);else if(isArray$3(T))T.includes(l)||T.push(l);else if(S)v[f]=[l],_(f)&&(g[f]=v[f]);else{const A=[l];f.value=A,a.k&&(v[a.k]=A)}}else S?(v[f]=u,_(f)&&(g[f]=u)):b&&(f.value=u,a.k&&(v[a.k]=u))};if(u){const T=()=>{x(),pendingSetRefMap.delete(a)};T.id=-1,pendingSetRefMap.set(a,T),queuePostRenderEffect(T,n)}else invalidatePendingSetRef(a),x()}}}function invalidatePendingSetRef(a){const r=pendingSetRefMap.get(a);r&&(r.flags|=8,pendingSetRefMap.delete(a))}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=a=>!!a.type.__asyncLoader,isKeepAlive=a=>a.type.__isKeepAlive;function onActivated(a,r){registerKeepAliveHook(a,"a",r)}function onDeactivated(a,r){registerKeepAliveHook(a,"da",r)}function registerKeepAliveHook(a,r,n=currentInstance){const o=a.__wdc||(a.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return a()});if(injectHook(r,o,n),n){let s=n.parent;for(;s&&s.parent;)isKeepAlive(s.parent.vnode)&&injectToKeepAliveRoot(o,r,n,s),s=s.parent}}function injectToKeepAliveRoot(a,r,n,o){const s=injectHook(r,a,o,!0);onUnmounted(()=>{remove$1(o[r],s)},n)}function injectHook(a,r,n=currentInstance,o=!1){if(n){const s=n[a]||(n[a]=[]),l=r.__weh||(r.__weh=(...u)=>{pauseTracking();const c=setCurrentInstance(n),f=callWithAsyncErrorHandling(r,n,a,u);return c(),resetTracking(),f});return o?s.unshift(l):s.push(l),l}}const createHook=a=>(r,n=currentInstance)=>{(!isInSSRComponentSetup||a==="sp")&&injectHook(a,(...o)=>r(...o),n)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(a,r=currentInstance){injectHook("ec",a,r)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(a,r){return resolveAsset(COMPONENTS,a,!0,r)||a}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDirective(a){return resolveAsset(DIRECTIVES,a)}function resolveAsset(a,r,n=!0,o=!1){const s=currentRenderingInstance||currentInstance;if(s){const l=s.type;if(a===COMPONENTS){const c=getComponentName(l,!1);if(c&&(c===r||c===camelize$1(r)||c===capitalize(camelize$1(r))))return l}const u=resolve(s[a]||l[a],r)||resolve(s.appContext[a],r);return!u&&o?l:u}}function resolve(a,r){return a&&(a[r]||a[camelize$1(r)]||a[capitalize(camelize$1(r))])}function renderList(a,r,n,o){let s;const l=n,u=isArray$3(a);if(u||isString$1(a)){const c=u&&isReactive(a);let f=!1,d=!1;c&&(f=!isShallow(a),d=isReadonly(a),a=shallowReadArray(a)),s=new Array(a.length);for(let v=0,g=a.length;v<g;v++)s[v]=r(f?d?toReadonly(toReactive(a[v])):toReactive(a[v]):a[v],v,void 0,l)}else if(typeof a=="number"){s=new Array(a);for(let c=0;c<a;c++)s[c]=r(c+1,c,void 0,l)}else if(isObject$5(a))if(a[Symbol.iterator])s=Array.from(a,(c,f)=>r(c,f,void 0,l));else{const c=Object.keys(a);s=new Array(c.length);for(let f=0,d=c.length;f<d;f++){const v=c[f];s[f]=r(a[v],v,f,l)}}else s=[];return s}const getPublicInstance=a=>a?isStatefulComponent(a)?getComponentPublicInstance(a):getPublicInstance(a.parent):null,publicPropertiesMap=extend$2(Object.create(null),{$:a=>a,$el:a=>a.vnode.el,$data:a=>a.data,$props:a=>a.props,$attrs:a=>a.attrs,$slots:a=>a.slots,$refs:a=>a.refs,$parent:a=>getPublicInstance(a.parent),$root:a=>getPublicInstance(a.root),$host:a=>a.ce,$emit:a=>a.emit,$options:a=>resolveMergedOptions(a),$forceUpdate:a=>a.f||(a.f=()=>{queueJob(a.update)}),$nextTick:a=>a.n||(a.n=nextTick.bind(a.proxy)),$watch:a=>instanceWatch.bind(a)}),hasSetupBinding=(a,r)=>a!==EMPTY_OBJ$1&&!a.__isScriptSetup&&hasOwn$1(a,r),PublicInstanceProxyHandlers={get({_:a},r){if(r==="__v_skip")return!0;const{ctx:n,setupState:o,data:s,props:l,accessCache:u,type:c,appContext:f}=a;if(r[0]!=="$"){const y=u[r];if(y!==void 0)switch(y){case 1:return o[r];case 2:return s[r];case 4:return n[r];case 3:return l[r]}else{if(hasSetupBinding(o,r))return u[r]=1,o[r];if(s!==EMPTY_OBJ$1&&hasOwn$1(s,r))return u[r]=2,s[r];if(hasOwn$1(l,r))return u[r]=3,l[r];if(n!==EMPTY_OBJ$1&&hasOwn$1(n,r))return u[r]=4,n[r];shouldCacheAccess&&(u[r]=0)}}const d=publicPropertiesMap[r];let v,g;if(d)return r==="$attrs"&&track(a.attrs,"get",""),d(a);if((v=c.__cssModules)&&(v=v[r]))return v;if(n!==EMPTY_OBJ$1&&hasOwn$1(n,r))return u[r]=4,n[r];if(g=f.config.globalProperties,hasOwn$1(g,r))return g[r]},set({_:a},r,n){const{data:o,setupState:s,ctx:l}=a;return hasSetupBinding(s,r)?(s[r]=n,!0):o!==EMPTY_OBJ$1&&hasOwn$1(o,r)?(o[r]=n,!0):hasOwn$1(a.props,r)||r[0]==="$"&&r.slice(1)in a?!1:(l[r]=n,!0)},has({_:{data:a,setupState:r,accessCache:n,ctx:o,appContext:s,props:l,type:u}},c){let f;return!!(n[c]||a!==EMPTY_OBJ$1&&c[0]!=="$"&&hasOwn$1(a,c)||hasSetupBinding(r,c)||hasOwn$1(l,c)||hasOwn$1(o,c)||hasOwn$1(publicPropertiesMap,c)||hasOwn$1(s.config.globalProperties,c)||(f=u.__cssModules)&&f[c])},defineProperty(a,r,n){return n.get!=null?a._.accessCache[r]=0:hasOwn$1(n,"value")&&this.set(a,r,n.value,null),Reflect.defineProperty(a,r,n)}};function normalizePropsOrEmits(a){return isArray$3(a)?a.reduce((r,n)=>(r[n]=null,r),{}):a}let shouldCacheAccess=!0;function applyOptions(a){const r=resolveMergedOptions(a),n=a.proxy,o=a.ctx;shouldCacheAccess=!1,r.beforeCreate&&callHook$1(r.beforeCreate,a,"bc");const{data:s,computed:l,methods:u,watch:c,provide:f,inject:d,created:v,beforeMount:g,mounted:y,beforeUpdate:_,updated:S,activated:b,deactivated:x,beforeDestroy:T,beforeUnmount:A,destroyed:w,unmounted:C,render:E,renderTracked:P,renderTriggered:I,errorCaptured:M,serverPrefetch:R,expose:O,inheritAttrs:$,components:B,directives:F,filters:z}=r;if(d&&resolveInjections(d,o,null),u)for(const V in u){const L=u[V];isFunction$2(L)&&(o[V]=L.bind(n))}if(s){const V=s.call(n,n);isObject$5(V)&&(a.data=reactive(V))}if(shouldCacheAccess=!0,l)for(const V in l){const L=l[V],N=isFunction$2(L)?L.bind(n,n):isFunction$2(L.get)?L.get.bind(n,n):NOOP,U=!isFunction$2(L)&&isFunction$2(L.set)?L.set.bind(n):NOOP,H=computed({get:N,set:U});Object.defineProperty(o,V,{enumerable:!0,configurable:!0,get:()=>H.value,set:q=>H.value=q})}if(c)for(const V in c)createWatcher(c[V],o,n,V);if(f){const V=isFunction$2(f)?f.call(n):f;Reflect.ownKeys(V).forEach(L=>{provide(L,V[L])})}v&&callHook$1(v,a,"c");function D(V,L){isArray$3(L)?L.forEach(N=>V(N.bind(n))):L&&V(L.bind(n))}if(D(onBeforeMount,g),D(onMounted,y),D(onBeforeUpdate,_),D(onUpdated,S),D(onActivated,b),D(onDeactivated,x),D(onErrorCaptured,M),D(onRenderTracked,P),D(onRenderTriggered,I),D(onBeforeUnmount,A),D(onUnmounted,C),D(onServerPrefetch,R),isArray$3(O))if(O.length){const V=a.exposed||(a.exposed={});O.forEach(L=>{Object.defineProperty(V,L,{get:()=>n[L],set:N=>n[L]=N,enumerable:!0})})}else a.exposed||(a.exposed={});E&&a.render===NOOP&&(a.render=E),$!=null&&(a.inheritAttrs=$),B&&(a.components=B),F&&(a.directives=F),R&&markAsyncBoundary(a)}function resolveInjections(a,r,n=NOOP){isArray$3(a)&&(a=normalizeInject(a));for(const o in a){const s=a[o];let l;isObject$5(s)?"default"in s?l=inject(s.from||o,s.default,!0):l=inject(s.from||o):l=inject(s),isRef(l)?Object.defineProperty(r,o,{enumerable:!0,configurable:!0,get:()=>l.value,set:u=>l.value=u}):r[o]=l}}function callHook$1(a,r,n){callWithAsyncErrorHandling(isArray$3(a)?a.map(o=>o.bind(r.proxy)):a.bind(r.proxy),r,n)}function createWatcher(a,r,n,o){let s=o.includes(".")?createPathGetter(n,o):()=>n[o];if(isString$1(a)){const l=r[a];isFunction$2(l)&&watch(s,l)}else if(isFunction$2(a))watch(s,a.bind(n));else if(isObject$5(a))if(isArray$3(a))a.forEach(l=>createWatcher(l,r,n,o));else{const l=isFunction$2(a.handler)?a.handler.bind(n):r[a.handler];isFunction$2(l)&&watch(s,l,a)}}function resolveMergedOptions(a){const r=a.type,{mixins:n,extends:o}=r,{mixins:s,optionsCache:l,config:{optionMergeStrategies:u}}=a.appContext,c=l.get(r);let f;return c?f=c:!s.length&&!n&&!o?f=r:(f={},s.length&&s.forEach(d=>mergeOptions$1(f,d,u,!0)),mergeOptions$1(f,r,u)),isObject$5(r)&&l.set(r,f),f}function mergeOptions$1(a,r,n,o=!1){const{mixins:s,extends:l}=r;l&&mergeOptions$1(a,l,n,!0),s&&s.forEach(u=>mergeOptions$1(a,u,n,!0));for(const u in r)if(!(o&&u==="expose")){const c=internalOptionMergeStrats[u]||n&&n[u];a[u]=c?c(a[u],r[u]):r[u]}return a}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(a,r){return r?a?function(){return extend$2(isFunction$2(a)?a.call(this,this):a,isFunction$2(r)?r.call(this,this):r)}:r:a}function mergeInject(a,r){return mergeObjectOptions(normalizeInject(a),normalizeInject(r))}function normalizeInject(a){if(isArray$3(a)){const r={};for(let n=0;n<a.length;n++)r[a[n]]=a[n];return r}return a}function mergeAsArray(a,r){return a?[...new Set([].concat(a,r))]:r}function mergeObjectOptions(a,r){return a?extend$2(Object.create(null),a,r):r}function mergeEmitsOrPropsOptions(a,r){return a?isArray$3(a)&&isArray$3(r)?[...new Set([...a,...r])]:extend$2(Object.create(null),normalizePropsOrEmits(a),normalizePropsOrEmits(r??{})):r}function mergeWatchOptions(a,r){if(!a)return r;if(!r)return a;const n=extend$2(Object.create(null),a);for(const o in r)n[o]=mergeAsArray(a[o],r[o]);return n}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(a,r){return function(o,s=null){isFunction$2(o)||(o=extend$2({},o)),s!=null&&!isObject$5(s)&&(s=null);const l=createAppContext(),u=new WeakSet,c=[];let f=!1;const d=l.app={_uid:uid$1++,_component:o,_props:s,_container:null,_context:l,_instance:null,version:version$4,get config(){return l.config},set config(v){},use(v,...g){return u.has(v)||(v&&isFunction$2(v.install)?(u.add(v),v.install(d,...g)):isFunction$2(v)&&(u.add(v),v(d,...g))),d},mixin(v){return l.mixins.includes(v)||l.mixins.push(v),d},component(v,g){return g?(l.components[v]=g,d):l.components[v]},directive(v,g){return g?(l.directives[v]=g,d):l.directives[v]},mount(v,g,y){if(!f){const _=d._ceVNode||createVNode$1(o,s);return _.appContext=l,y===!0?y="svg":y===!1&&(y=void 0),a(_,v,y),f=!0,d._container=v,v.__vue_app__=d,getComponentPublicInstance(_.component)}},onUnmount(v){c.push(v)},unmount(){f&&(callWithAsyncErrorHandling(c,d._instance,16),a(null,d._container),delete d._container.__vue_app__)},provide(v,g){return l.provides[v]=g,d},runWithContext(v){const g=currentApp;currentApp=d;try{return v()}finally{currentApp=g}}};return d}}let currentApp=null;const getModelModifiers=(a,r)=>r==="modelValue"||r==="model-value"?a.modelModifiers:a[`${r}Modifiers`]||a[`${camelize$1(r)}Modifiers`]||a[`${hyphenate(r)}Modifiers`];function emit(a,r,...n){if(a.isUnmounted)return;const o=a.vnode.props||EMPTY_OBJ$1;let s=n;const l=r.startsWith("update:"),u=l&&getModelModifiers(o,r.slice(7));u&&(u.trim&&(s=n.map(v=>isString$1(v)?v.trim():v)),u.number&&(s=n.map(looseToNumber)));let c,f=o[c=toHandlerKey(r)]||o[c=toHandlerKey(camelize$1(r))];!f&&l&&(f=o[c=toHandlerKey(hyphenate(r))]),f&&callWithAsyncErrorHandling(f,a,6,s);const d=o[c+"Once"];if(d){if(!a.emitted)a.emitted={};else if(a.emitted[c])return;a.emitted[c]=!0,callWithAsyncErrorHandling(d,a,6,s)}}const mixinEmitsCache=new WeakMap;function normalizeEmitsOptions(a,r,n=!1){const o=n?mixinEmitsCache:r.emitsCache,s=o.get(a);if(s!==void 0)return s;const l=a.emits;let u={},c=!1;if(!isFunction$2(a)){const f=d=>{const v=normalizeEmitsOptions(d,r,!0);v&&(c=!0,extend$2(u,v))};!n&&r.mixins.length&&r.mixins.forEach(f),a.extends&&f(a.extends),a.mixins&&a.mixins.forEach(f)}return!l&&!c?(isObject$5(a)&&o.set(a,null),null):(isArray$3(l)?l.forEach(f=>u[f]=null):extend$2(u,l),isObject$5(a)&&o.set(a,u),u)}function isEmitListener(a,r){return!a||!isOn(r)?!1:(r=r.slice(2).replace(/Once$/,""),hasOwn$1(a,r[0].toLowerCase()+r.slice(1))||hasOwn$1(a,hyphenate(r))||hasOwn$1(a,r))}function markAttrsAccessed(){}function renderComponentRoot(a){const{type:r,vnode:n,proxy:o,withProxy:s,propsOptions:[l],slots:u,attrs:c,emit:f,render:d,renderCache:v,props:g,data:y,setupState:_,ctx:S,inheritAttrs:b}=a,x=setCurrentRenderingInstance(a);let T,A;try{if(n.shapeFlag&4){const C=s||o,E=C;T=normalizeVNode(d.call(E,C,v,g,_,y,S)),A=c}else{const C=r;T=normalizeVNode(C.length>1?C(g,{attrs:c,slots:u,emit:f}):C(g,null)),A=r.props?c:getFunctionalFallthrough(c)}}catch(C){blockStack.length=0,handleError$3(C,a,1),T=createVNode$1(Comment)}let w=T;if(A&&b!==!1){const C=Object.keys(A),{shapeFlag:E}=w;C.length&&E&7&&(l&&C.some(isModelListener)&&(A=filterModelListeners(A,l)),w=cloneVNode(w,A,!1,!0))}return n.dirs&&(w=cloneVNode(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&setTransitionHooks(w,n.transition),T=w,setCurrentRenderingInstance(x),T}const getFunctionalFallthrough=a=>{let r;for(const n in a)(n==="class"||n==="style"||isOn(n))&&((r||(r={}))[n]=a[n]);return r},filterModelListeners=(a,r)=>{const n={};for(const o in a)(!isModelListener(o)||!(o.slice(9)in r))&&(n[o]=a[o]);return n};function shouldUpdateComponent(a,r,n){const{props:o,children:s,component:l}=a,{props:u,children:c,patchFlag:f}=r,d=l.emitsOptions;if(r.dirs||r.transition)return!0;if(n&&f>=0){if(f&1024)return!0;if(f&16)return o?hasPropsChanged(o,u,d):!!u;if(f&8){const v=r.dynamicProps;for(let g=0;g<v.length;g++){const y=v[g];if(u[y]!==o[y]&&!isEmitListener(d,y))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:o===u?!1:o?u?hasPropsChanged(o,u,d):!0:!!u;return!1}function hasPropsChanged(a,r,n){const o=Object.keys(r);if(o.length!==Object.keys(a).length)return!0;for(let s=0;s<o.length;s++){const l=o[s];if(r[l]!==a[l]&&!isEmitListener(n,l))return!0}return!1}function updateHOCHostEl({vnode:a,parent:r},n){for(;r;){const o=r.subTree;if(o.suspense&&o.suspense.activeBranch===a&&(o.el=a.el),o===a)(a=r.vnode).el=n,r=r.parent;else break}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=a=>Object.getPrototypeOf(a)===internalObjectProto;function initProps$1(a,r,n,o=!1){const s={},l=createInternalObject();a.propsDefaults=Object.create(null),setFullProps(a,r,s,l);for(const u in a.propsOptions[0])u in s||(s[u]=void 0);n?a.props=o?s:shallowReactive(s):a.type.props?a.props=s:a.props=l,a.attrs=l}function updateProps$2(a,r,n,o){const{props:s,attrs:l,vnode:{patchFlag:u}}=a,c=toRaw(s),[f]=a.propsOptions;let d=!1;if((o||u>0)&&!(u&16)){if(u&8){const v=a.vnode.dynamicProps;for(let g=0;g<v.length;g++){let y=v[g];if(isEmitListener(a.emitsOptions,y))continue;const _=r[y];if(f)if(hasOwn$1(l,y))_!==l[y]&&(l[y]=_,d=!0);else{const S=camelize$1(y);s[S]=resolvePropValue(f,c,S,_,a,!1)}else _!==l[y]&&(l[y]=_,d=!0)}}}else{setFullProps(a,r,s,l)&&(d=!0);let v;for(const g in c)(!r||!hasOwn$1(r,g)&&((v=hyphenate(g))===g||!hasOwn$1(r,v)))&&(f?n&&(n[g]!==void 0||n[v]!==void 0)&&(s[g]=resolvePropValue(f,c,g,void 0,a,!0)):delete s[g]);if(l!==c)for(const g in l)(!r||!hasOwn$1(r,g))&&(delete l[g],d=!0)}d&&trigger$2(a.attrs,"set","")}function setFullProps(a,r,n,o){const[s,l]=a.propsOptions;let u=!1,c;if(r)for(let f in r){if(isReservedProp(f))continue;const d=r[f];let v;s&&hasOwn$1(s,v=camelize$1(f))?!l||!l.includes(v)?n[v]=d:(c||(c={}))[v]=d:isEmitListener(a.emitsOptions,f)||(!(f in o)||d!==o[f])&&(o[f]=d,u=!0)}if(l){const f=toRaw(n),d=c||EMPTY_OBJ$1;for(let v=0;v<l.length;v++){const g=l[v];n[g]=resolvePropValue(s,f,g,d[g],a,!hasOwn$1(d,g))}}return u}function resolvePropValue(a,r,n,o,s,l){const u=a[n];if(u!=null){const c=hasOwn$1(u,"default");if(c&&o===void 0){const f=u.default;if(u.type!==Function&&!u.skipFactory&&isFunction$2(f)){const{propsDefaults:d}=s;if(n in d)o=d[n];else{const v=setCurrentInstance(s);o=d[n]=f.call(null,r),v()}}else o=f;s.ce&&s.ce._setProp(n,o)}u[0]&&(l&&!c?o=!1:u[1]&&(o===""||o===hyphenate(n))&&(o=!0))}return o}const mixinPropsCache=new WeakMap;function normalizePropsOptions(a,r,n=!1){const o=n?mixinPropsCache:r.propsCache,s=o.get(a);if(s)return s;const l=a.props,u={},c=[];let f=!1;if(!isFunction$2(a)){const v=g=>{f=!0;const[y,_]=normalizePropsOptions(g,r,!0);extend$2(u,y),_&&c.push(..._)};!n&&r.mixins.length&&r.mixins.forEach(v),a.extends&&v(a.extends),a.mixins&&a.mixins.forEach(v)}if(!l&&!f)return isObject$5(a)&&o.set(a,EMPTY_ARR),EMPTY_ARR;if(isArray$3(l))for(let v=0;v<l.length;v++){const g=camelize$1(l[v]);validatePropName(g)&&(u[g]=EMPTY_OBJ$1)}else if(l)for(const v in l){const g=camelize$1(v);if(validatePropName(g)){const y=l[v],_=u[g]=isArray$3(y)||isFunction$2(y)?{type:y}:extend$2({},y),S=_.type;let b=!1,x=!0;if(isArray$3(S))for(let T=0;T<S.length;++T){const A=S[T],w=isFunction$2(A)&&A.name;if(w==="Boolean"){b=!0;break}else w==="String"&&(x=!1)}else b=isFunction$2(S)&&S.name==="Boolean";_[0]=b,_[1]=x,(b||hasOwn$1(_,"default"))&&c.push(g)}}const d=[u,c];return isObject$5(a)&&o.set(a,d),d}function validatePropName(a){return a[0]!=="$"&&!isReservedProp(a)}const isInternalKey=a=>a==="_"||a==="_ctx"||a==="$stable",normalizeSlotValue=a=>isArray$3(a)?a.map(normalizeVNode):[normalizeVNode(a)],normalizeSlot$1=(a,r,n)=>{if(r._n)return r;const o=withCtx((...s)=>normalizeSlotValue(r(...s)),n);return o._c=!1,o},normalizeObjectSlots=(a,r,n)=>{const o=a._ctx;for(const s in a){if(isInternalKey(s))continue;const l=a[s];if(isFunction$2(l))r[s]=normalizeSlot$1(s,l,o);else if(l!=null){const u=normalizeSlotValue(l);r[s]=()=>u}}},normalizeVNodeSlots=(a,r)=>{const n=normalizeSlotValue(r);a.slots.default=()=>n},assignSlots=(a,r,n)=>{for(const o in r)(n||!isInternalKey(o))&&(a[o]=r[o])},initSlots=(a,r,n)=>{const o=a.slots=createInternalObject();if(a.vnode.shapeFlag&32){const s=r._;s?(assignSlots(o,r,n),n&&def(o,"_",s,!0)):normalizeObjectSlots(r,o)}else r&&normalizeVNodeSlots(a,r)},updateSlots=(a,r,n)=>{const{vnode:o,slots:s}=a;let l=!0,u=EMPTY_OBJ$1;if(o.shapeFlag&32){const c=r._;c?n&&c===1?l=!1:assignSlots(s,r,n):(l=!r.$stable,normalizeObjectSlots(r,s)),u=r}else r&&(normalizeVNodeSlots(a,r),u={default:1});if(l)for(const c in s)!isInternalKey(c)&&u[c]==null&&delete s[c]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(a){return baseCreateRenderer(a)}function baseCreateRenderer(a,r){const n=getGlobalThis();n.__VUE__=!0;const{insert:o,remove:s,patchProp:l,createElement:u,createText:c,createComment:f,setText:d,setElementText:v,parentNode:g,nextSibling:y,setScopeId:_=NOOP,insertStaticContent:S}=a,b=(W,Y,j,Q=null,re=null,ae=null,le=void 0,se=null,ce=!!Y.dynamicChildren)=>{if(W===Y)return;W&&!isSameVNodeType(W,Y)&&(Q=K(W),q(W,re,ae,!0),W=null),Y.patchFlag===-2&&(ce=!1,Y.dynamicChildren=null);const{type:oe,ref:de,shapeFlag:he}=Y;switch(oe){case Text:x(W,Y,j,Q);break;case Comment:T(W,Y,j,Q);break;case Static:W==null&&A(Y,j,Q,le);break;case Fragment:B(W,Y,j,Q,re,ae,le,se,ce);break;default:he&1?E(W,Y,j,Q,re,ae,le,se,ce):he&6?F(W,Y,j,Q,re,ae,le,se,ce):(he&64||he&128)&&oe.process(W,Y,j,Q,re,ae,le,se,ce,ie)}de!=null&&re?setRef(de,W&&W.ref,ae,Y||W,!Y):de==null&&W&&W.ref!=null&&setRef(W.ref,null,ae,W,!0)},x=(W,Y,j,Q)=>{if(W==null)o(Y.el=c(Y.children),j,Q);else{const re=Y.el=W.el;Y.children!==W.children&&d(re,Y.children)}},T=(W,Y,j,Q)=>{W==null?o(Y.el=f(Y.children||""),j,Q):Y.el=W.el},A=(W,Y,j,Q)=>{[W.el,W.anchor]=S(W.children,Y,j,Q,W.el,W.anchor)},w=({el:W,anchor:Y},j,Q)=>{let re;for(;W&&W!==Y;)re=y(W),o(W,j,Q),W=re;o(Y,j,Q)},C=({el:W,anchor:Y})=>{let j;for(;W&&W!==Y;)j=y(W),s(W),W=j;s(Y)},E=(W,Y,j,Q,re,ae,le,se,ce)=>{if(Y.type==="svg"?le="svg":Y.type==="math"&&(le="mathml"),W==null)P(Y,j,Q,re,ae,le,se,ce);else{const oe=W.el&&W.el._isVueCE?W.el:null;try{oe&&oe._beginPatch(),R(W,Y,re,ae,le,se,ce)}finally{oe&&oe._endPatch()}}},P=(W,Y,j,Q,re,ae,le,se)=>{let ce,oe;const{props:de,shapeFlag:he,transition:fe,dirs:pe}=W;if(ce=W.el=u(W.type,ae,de&&de.is,de),he&8?v(ce,W.children):he&16&&M(W.children,ce,null,Q,re,resolveChildrenNamespace(W,ae),le,se),pe&&invokeDirectiveHook(W,null,Q,"created"),I(ce,W,W.scopeId,le,Q),de){for(const ge in de)ge!=="value"&&!isReservedProp(ge)&&l(ce,ge,null,de[ge],ae,Q);"value"in de&&l(ce,"value",null,de.value,ae),(oe=de.onVnodeBeforeMount)&&invokeVNodeHook(oe,Q,W)}pe&&invokeDirectiveHook(W,null,Q,"beforeMount");const ve=needTransition(re,fe);ve&&fe.beforeEnter(ce),o(ce,Y,j),((oe=de&&de.onVnodeMounted)||ve||pe)&&queuePostRenderEffect(()=>{oe&&invokeVNodeHook(oe,Q,W),ve&&fe.enter(ce),pe&&invokeDirectiveHook(W,null,Q,"mounted")},re)},I=(W,Y,j,Q,re)=>{if(j&&_(W,j),Q)for(let ae=0;ae<Q.length;ae++)_(W,Q[ae]);if(re){let ae=re.subTree;if(Y===ae||isSuspense(ae.type)&&(ae.ssContent===Y||ae.ssFallback===Y)){const le=re.vnode;I(W,le,le.scopeId,le.slotScopeIds,re.parent)}}},M=(W,Y,j,Q,re,ae,le,se,ce=0)=>{for(let oe=ce;oe<W.length;oe++){const de=W[oe]=se?cloneIfMounted(W[oe]):normalizeVNode(W[oe]);b(null,de,Y,j,Q,re,ae,le,se)}},R=(W,Y,j,Q,re,ae,le)=>{const se=Y.el=W.el;let{patchFlag:ce,dynamicChildren:oe,dirs:de}=Y;ce|=W.patchFlag&16;const he=W.props||EMPTY_OBJ$1,fe=Y.props||EMPTY_OBJ$1;let pe;if(j&&toggleRecurse(j,!1),(pe=fe.onVnodeBeforeUpdate)&&invokeVNodeHook(pe,j,Y,W),de&&invokeDirectiveHook(Y,W,j,"beforeUpdate"),j&&toggleRecurse(j,!0),(he.innerHTML&&fe.innerHTML==null||he.textContent&&fe.textContent==null)&&v(se,""),oe?O(W.dynamicChildren,oe,se,j,Q,resolveChildrenNamespace(Y,re),ae):le||L(W,Y,se,null,j,Q,resolveChildrenNamespace(Y,re),ae,!1),ce>0){if(ce&16)$(se,he,fe,j,re);else if(ce&2&&he.class!==fe.class&&l(se,"class",null,fe.class,re),ce&4&&l(se,"style",he.style,fe.style,re),ce&8){const ve=Y.dynamicProps;for(let ge=0;ge<ve.length;ge++){const me=ve[ge],ye=he[me],_e=fe[me];(_e!==ye||me==="value")&&l(se,me,ye,_e,re,j)}}ce&1&&W.children!==Y.children&&v(se,Y.children)}else!le&&oe==null&&$(se,he,fe,j,re);((pe=fe.onVnodeUpdated)||de)&&queuePostRenderEffect(()=>{pe&&invokeVNodeHook(pe,j,Y,W),de&&invokeDirectiveHook(Y,W,j,"updated")},Q)},O=(W,Y,j,Q,re,ae,le)=>{for(let se=0;se<Y.length;se++){const ce=W[se],oe=Y[se],de=ce.el&&(ce.type===Fragment||!isSameVNodeType(ce,oe)||ce.shapeFlag&198)?g(ce.el):j;b(ce,oe,de,null,Q,re,ae,le,!0)}},$=(W,Y,j,Q,re)=>{if(Y!==j){if(Y!==EMPTY_OBJ$1)for(const ae in Y)!isReservedProp(ae)&&!(ae in j)&&l(W,ae,Y[ae],null,re,Q);for(const ae in j){if(isReservedProp(ae))continue;const le=j[ae],se=Y[ae];le!==se&&ae!=="value"&&l(W,ae,se,le,re,Q)}"value"in j&&l(W,"value",Y.value,j.value,re)}},B=(W,Y,j,Q,re,ae,le,se,ce)=>{const oe=Y.el=W?W.el:c(""),de=Y.anchor=W?W.anchor:c("");let{patchFlag:he,dynamicChildren:fe,slotScopeIds:pe}=Y;pe&&(se=se?se.concat(pe):pe),W==null?(o(oe,j,Q),o(de,j,Q),M(Y.children||[],j,de,re,ae,le,se,ce)):he>0&&he&64&&fe&&W.dynamicChildren&&W.dynamicChildren.length===fe.length?(O(W.dynamicChildren,fe,j,re,ae,le,se),(Y.key!=null||re&&Y===re.subTree)&&traverseStaticChildren(W,Y,!0)):L(W,Y,j,de,re,ae,le,se,ce)},F=(W,Y,j,Q,re,ae,le,se,ce)=>{Y.slotScopeIds=se,W==null?Y.shapeFlag&512?re.ctx.activate(Y,j,Q,le,ce):z(Y,j,Q,re,ae,le,ce):G(W,Y,ce)},z=(W,Y,j,Q,re,ae,le)=>{const se=W.component=createComponentInstance(W,Q,re);if(isKeepAlive(W)&&(se.ctx.renderer=ie),setupComponent(se,!1,le),se.asyncDep){if(re&&re.registerDep(se,D,le),!W.el){const ce=se.subTree=createVNode$1(Comment);T(null,ce,Y,j),W.placeholder=ce.el}}else D(se,W,Y,j,re,ae,le)},G=(W,Y,j)=>{const Q=Y.component=W.component;if(shouldUpdateComponent(W,Y,j))if(Q.asyncDep&&!Q.asyncResolved){V(Q,Y,j);return}else Q.next=Y,Q.update();else Y.el=W.el,Q.vnode=Y},D=(W,Y,j,Q,re,ae,le)=>{const se=()=>{if(W.isMounted){let{next:he,bu:fe,u:pe,parent:ve,vnode:ge}=W;{const Te=locateNonHydratedAsyncRoot(W);if(Te){he&&(he.el=ge.el,V(W,he,le)),Te.asyncDep.then(()=>{W.isUnmounted||se()});return}}let me=he,ye;toggleRecurse(W,!1),he?(he.el=ge.el,V(W,he,le)):he=ge,fe&&invokeArrayFns(fe),(ye=he.props&&he.props.onVnodeBeforeUpdate)&&invokeVNodeHook(ye,ve,he,ge),toggleRecurse(W,!0);const _e=renderComponentRoot(W),be=W.subTree;W.subTree=_e,b(be,_e,g(be.el),K(be),W,re,ae),he.el=_e.el,me===null&&updateHOCHostEl(W,_e.el),pe&&queuePostRenderEffect(pe,re),(ye=he.props&&he.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(ye,ve,he,ge),re)}else{let he;const{el:fe,props:pe}=Y,{bm:ve,m:ge,parent:me,root:ye,type:_e}=W,be=isAsyncWrapper(Y);toggleRecurse(W,!1),ve&&invokeArrayFns(ve),!be&&(he=pe&&pe.onVnodeBeforeMount)&&invokeVNodeHook(he,me,Y),toggleRecurse(W,!0);{ye.ce&&ye.ce._def.shadowRoot!==!1&&ye.ce._injectChildStyle(_e);const Te=W.subTree=renderComponentRoot(W);b(null,Te,j,Q,W,re,ae),Y.el=Te.el}if(ge&&queuePostRenderEffect(ge,re),!be&&(he=pe&&pe.onVnodeMounted)){const Te=Y;queuePostRenderEffect(()=>invokeVNodeHook(he,me,Te),re)}(Y.shapeFlag&256||me&&isAsyncWrapper(me.vnode)&&me.vnode.shapeFlag&256)&&W.a&&queuePostRenderEffect(W.a,re),W.isMounted=!0,Y=j=Q=null}};W.scope.on();const ce=W.effect=new ReactiveEffect(se);W.scope.off();const oe=W.update=ce.run.bind(ce),de=W.job=ce.runIfDirty.bind(ce);de.i=W,de.id=W.uid,ce.scheduler=()=>queueJob(de),toggleRecurse(W,!0),oe()},V=(W,Y,j)=>{Y.component=W;const Q=W.vnode.props;W.vnode=Y,W.next=null,updateProps$2(W,Y.props,Q,j),updateSlots(W,Y.children,j),pauseTracking(),flushPreFlushCbs(W),resetTracking()},L=(W,Y,j,Q,re,ae,le,se,ce=!1)=>{const oe=W&&W.children,de=W?W.shapeFlag:0,he=Y.children,{patchFlag:fe,shapeFlag:pe}=Y;if(fe>0){if(fe&128){U(oe,he,j,Q,re,ae,le,se,ce);return}else if(fe&256){N(oe,he,j,Q,re,ae,le,se,ce);return}}pe&8?(de&16&&ue(oe,re,ae),he!==oe&&v(j,he)):de&16?pe&16?U(oe,he,j,Q,re,ae,le,se,ce):ue(oe,re,ae,!0):(de&8&&v(j,""),pe&16&&M(he,j,Q,re,ae,le,se,ce))},N=(W,Y,j,Q,re,ae,le,se,ce)=>{W=W||EMPTY_ARR,Y=Y||EMPTY_ARR;const oe=W.length,de=Y.length,he=Math.min(oe,de);let fe;for(fe=0;fe<he;fe++){const pe=Y[fe]=ce?cloneIfMounted(Y[fe]):normalizeVNode(Y[fe]);b(W[fe],pe,j,null,re,ae,le,se,ce)}oe>de?ue(W,re,ae,!0,!1,he):M(Y,j,Q,re,ae,le,se,ce,he)},U=(W,Y,j,Q,re,ae,le,se,ce)=>{let oe=0;const de=Y.length;let he=W.length-1,fe=de-1;for(;oe<=he&&oe<=fe;){const pe=W[oe],ve=Y[oe]=ce?cloneIfMounted(Y[oe]):normalizeVNode(Y[oe]);if(isSameVNodeType(pe,ve))b(pe,ve,j,null,re,ae,le,se,ce);else break;oe++}for(;oe<=he&&oe<=fe;){const pe=W[he],ve=Y[fe]=ce?cloneIfMounted(Y[fe]):normalizeVNode(Y[fe]);if(isSameVNodeType(pe,ve))b(pe,ve,j,null,re,ae,le,se,ce);else break;he--,fe--}if(oe>he){if(oe<=fe){const pe=fe+1,ve=pe<de?Y[pe].el:Q;for(;oe<=fe;)b(null,Y[oe]=ce?cloneIfMounted(Y[oe]):normalizeVNode(Y[oe]),j,ve,re,ae,le,se,ce),oe++}}else if(oe>fe)for(;oe<=he;)q(W[oe],re,ae,!0),oe++;else{const pe=oe,ve=oe,ge=new Map;for(oe=ve;oe<=fe;oe++){const Se=Y[oe]=ce?cloneIfMounted(Y[oe]):normalizeVNode(Y[oe]);Se.key!=null&&ge.set(Se.key,oe)}let me,ye=0;const _e=fe-ve+1;let be=!1,Te=0;const Ae=new Array(_e);for(oe=0;oe<_e;oe++)Ae[oe]=0;for(oe=pe;oe<=he;oe++){const Se=W[oe];if(ye>=_e){q(Se,re,ae,!0);continue}let xe;if(Se.key!=null)xe=ge.get(Se.key);else for(me=ve;me<=fe;me++)if(Ae[me-ve]===0&&isSameVNodeType(Se,Y[me])){xe=me;break}xe===void 0?q(Se,re,ae,!0):(Ae[xe-ve]=oe+1,xe>=Te?Te=xe:be=!0,b(Se,Y[xe],j,null,re,ae,le,se,ce),ye++)}const we=be?getSequence(Ae):EMPTY_ARR;for(me=we.length-1,oe=_e-1;oe>=0;oe--){const Se=ve+oe,xe=Y[Se],Ce=Y[Se+1],Ee=Se+1<de?Ce.el||resolveAsyncComponentPlaceholder(Ce):Q;Ae[oe]===0?b(null,xe,j,Ee,re,ae,le,se,ce):be&&(me<0||oe!==we[me]?H(xe,j,Ee,2):me--)}}},H=(W,Y,j,Q,re=null)=>{const{el:ae,type:le,transition:se,children:ce,shapeFlag:oe}=W;if(oe&6){H(W.component.subTree,Y,j,Q);return}if(oe&128){W.suspense.move(Y,j,Q);return}if(oe&64){le.move(W,Y,j,ie);return}if(le===Fragment){o(ae,Y,j);for(let he=0;he<ce.length;he++)H(ce[he],Y,j,Q);o(W.anchor,Y,j);return}if(le===Static){w(W,Y,j);return}if(Q!==2&&oe&1&&se)if(Q===0)se.beforeEnter(ae),o(ae,Y,j),queuePostRenderEffect(()=>se.enter(ae),re);else{const{leave:he,delayLeave:fe,afterLeave:pe}=se,ve=()=>{W.ctx.isUnmounted?s(ae):o(ae,Y,j)},ge=()=>{ae._isLeaving&&ae[leaveCbKey](!0),he(ae,()=>{ve(),pe&&pe()})};fe?fe(ae,ve,ge):ge()}else o(ae,Y,j)},q=(W,Y,j,Q=!1,re=!1)=>{const{type:ae,props:le,ref:se,children:ce,dynamicChildren:oe,shapeFlag:de,patchFlag:he,dirs:fe,cacheIndex:pe}=W;if(he===-2&&(re=!1),se!=null&&(pauseTracking(),setRef(se,null,j,W,!0),resetTracking()),pe!=null&&(Y.renderCache[pe]=void 0),de&256){Y.ctx.deactivate(W);return}const ve=de&1&&fe,ge=!isAsyncWrapper(W);let me;if(ge&&(me=le&&le.onVnodeBeforeUnmount)&&invokeVNodeHook(me,Y,W),de&6)ne(W.component,j,Q);else{if(de&128){W.suspense.unmount(j,Q);return}ve&&invokeDirectiveHook(W,null,Y,"beforeUnmount"),de&64?W.type.remove(W,Y,j,ie,Q):oe&&!oe.hasOnce&&(ae!==Fragment||he>0&&he&64)?ue(oe,Y,j,!1,!0):(ae===Fragment&&he&384||!re&&de&16)&&ue(ce,Y,j),Q&&Z(W)}(ge&&(me=le&&le.onVnodeUnmounted)||ve)&&queuePostRenderEffect(()=>{me&&invokeVNodeHook(me,Y,W),ve&&invokeDirectiveHook(W,null,Y,"unmounted")},j)},Z=W=>{const{type:Y,el:j,anchor:Q,transition:re}=W;if(Y===Fragment){ee(j,Q);return}if(Y===Static){C(W);return}const ae=()=>{s(j),re&&!re.persisted&&re.afterLeave&&re.afterLeave()};if(W.shapeFlag&1&&re&&!re.persisted){const{leave:le,delayLeave:se}=re,ce=()=>le(j,ae);se?se(W.el,ae,ce):ce()}else ae()},ee=(W,Y)=>{let j;for(;W!==Y;)j=y(W),s(W),W=j;s(Y)},ne=(W,Y,j)=>{const{bum:Q,scope:re,job:ae,subTree:le,um:se,m:ce,a:oe}=W;invalidateMount(ce),invalidateMount(oe),Q&&invokeArrayFns(Q),re.stop(),ae&&(ae.flags|=8,q(le,W,Y,j)),se&&queuePostRenderEffect(se,Y),queuePostRenderEffect(()=>{W.isUnmounted=!0},Y)},ue=(W,Y,j,Q=!1,re=!1,ae=0)=>{for(let le=ae;le<W.length;le++)q(W[le],Y,j,Q,re)},K=W=>{if(W.shapeFlag&6)return K(W.component.subTree);if(W.shapeFlag&128)return W.suspense.next();const Y=y(W.anchor||W.el),j=Y&&Y[TeleportEndKey];return j?y(j):Y};let J=!1;const X=(W,Y,j)=>{let Q;W==null?Y._vnode&&(q(Y._vnode,null,null,!0),Q=Y._vnode.component):b(Y._vnode||null,W,Y,null,null,null,j),Y._vnode=W,J||(J=!0,flushPreFlushCbs(Q),flushPostFlushCbs(),J=!1)},ie={p:b,um:q,m:H,r:Z,mt:z,mc:M,pc:L,pbc:O,n:K,o:a};return{render:X,hydrate:void 0,createApp:createAppAPI(X)}}function resolveChildrenNamespace({type:a,props:r},n){return n==="svg"&&a==="foreignObject"||n==="mathml"&&a==="annotation-xml"&&r&&r.encoding&&r.encoding.includes("html")?void 0:n}function toggleRecurse({effect:a,job:r},n){n?(a.flags|=32,r.flags|=4):(a.flags&=-33,r.flags&=-5)}function needTransition(a,r){return(!a||a&&!a.pendingBranch)&&r&&!r.persisted}function traverseStaticChildren(a,r,n=!1){const o=a.children,s=r.children;if(isArray$3(o)&&isArray$3(s))for(let l=0;l<o.length;l++){const u=o[l];let c=s[l];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[l]=cloneIfMounted(s[l]),c.el=u.el),!n&&c.patchFlag!==-2&&traverseStaticChildren(u,c)),c.type===Text&&(c.patchFlag!==-1?c.el=u.el:c.__elIndex=l+(a.type===Fragment?1:0)),c.type===Comment&&!c.el&&(c.el=u.el)}}function getSequence(a){const r=a.slice(),n=[0];let o,s,l,u,c;const f=a.length;for(o=0;o<f;o++){const d=a[o];if(d!==0){if(s=n[n.length-1],a[s]<d){r[o]=s,n.push(o);continue}for(l=0,u=n.length-1;l<u;)c=l+u>>1,a[n[c]]<d?l=c+1:u=c;d<a[n[l]]&&(l>0&&(r[o]=n[l-1]),n[l]=o)}}for(l=n.length,u=n[l-1];l-- >0;)n[l]=u,u=r[u];return n}function locateNonHydratedAsyncRoot(a){const r=a.subTree.component;if(r)return r.asyncDep&&!r.asyncResolved?r:locateNonHydratedAsyncRoot(r)}function invalidateMount(a){if(a)for(let r=0;r<a.length;r++)a[r].flags|=8}function resolveAsyncComponentPlaceholder(a){if(a.placeholder)return a.placeholder;const r=a.component;return r?resolveAsyncComponentPlaceholder(r.subTree):null}const isSuspense=a=>a.__isSuspense;function queueEffectWithSuspense(a,r){r&&r.pendingBranch?isArray$3(a)?r.effects.push(...a):r.effects.push(a):queuePostFlushCb(a)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(a=!1){blockStack.push(currentBlock=a?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(a,r=!1){isBlockTreeEnabled+=a,a<0&&currentBlock&&r&&(currentBlock.hasOnce=!0)}function setupBlock(a){return a.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(a),a}function createElementBlock(a,r,n,o,s,l){return setupBlock(createBaseVNode(a,r,n,o,s,l,!0))}function createBlock(a,r,n,o,s){return setupBlock(createVNode$1(a,r,n,o,s,!0))}function isVNode(a){return a?a.__v_isVNode===!0:!1}function isSameVNodeType(a,r){return a.type===r.type&&a.key===r.key}const normalizeKey=({key:a})=>a??null,normalizeRef=({ref:a,ref_key:r,ref_for:n})=>(typeof a=="number"&&(a=""+a),a!=null?isString$1(a)||isRef(a)||isFunction$2(a)?{i:currentRenderingInstance,r:a,k:r,f:!!n}:a:null);function createBaseVNode(a,r=null,n=null,o=0,s=null,l=a===Fragment?0:1,u=!1,c=!1){const f={__v_isVNode:!0,__v_skip:!0,type:a,props:r,key:r&&normalizeKey(r),ref:r&&normalizeRef(r),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:o,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return c?(normalizeChildren(f,n),l&128&&a.normalize(f)):n&&(f.shapeFlag|=isString$1(n)?8:16),isBlockTreeEnabled>0&&!u&&currentBlock&&(f.patchFlag>0||l&6)&&f.patchFlag!==32&&currentBlock.push(f),f}const createVNode$1=_createVNode;function _createVNode(a,r=null,n=null,o=0,s=null,l=!1){if((!a||a===NULL_DYNAMIC_COMPONENT)&&(a=Comment),isVNode(a)){const c=cloneVNode(a,r,!0);return n&&normalizeChildren(c,n),isBlockTreeEnabled>0&&!l&&currentBlock&&(c.shapeFlag&6?currentBlock[currentBlock.indexOf(a)]=c:currentBlock.push(c)),c.patchFlag=-2,c}if(isClassComponent(a)&&(a=a.__vccOpts),r){r=guardReactiveProps(r);let{class:c,style:f}=r;c&&!isString$1(c)&&(r.class=normalizeClass(c)),isObject$5(f)&&(isProxy(f)&&!isArray$3(f)&&(f=extend$2({},f)),r.style=normalizeStyle$1(f))}const u=isString$1(a)?1:isSuspense(a)?128:isTeleport(a)?64:isObject$5(a)?4:isFunction$2(a)?2:0;return createBaseVNode(a,r,n,o,s,u,l,!0)}function guardReactiveProps(a){return a?isProxy(a)||isInternalObject(a)?extend$2({},a):a:null}function cloneVNode(a,r,n=!1,o=!1){const{props:s,ref:l,patchFlag:u,children:c,transition:f}=a,d=r?mergeProps(s||{},r):s,v={__v_isVNode:!0,__v_skip:!0,type:a.type,props:d,key:d&&normalizeKey(d),ref:r&&r.ref?n&&l?isArray$3(l)?l.concat(normalizeRef(r)):[l,normalizeRef(r)]:normalizeRef(r):l,scopeId:a.scopeId,slotScopeIds:a.slotScopeIds,children:c,target:a.target,targetStart:a.targetStart,targetAnchor:a.targetAnchor,staticCount:a.staticCount,shapeFlag:a.shapeFlag,patchFlag:r&&a.type!==Fragment?u===-1?16:u|16:u,dynamicProps:a.dynamicProps,dynamicChildren:a.dynamicChildren,appContext:a.appContext,dirs:a.dirs,transition:f,component:a.component,suspense:a.suspense,ssContent:a.ssContent&&cloneVNode(a.ssContent),ssFallback:a.ssFallback&&cloneVNode(a.ssFallback),placeholder:a.placeholder,el:a.el,anchor:a.anchor,ctx:a.ctx,ce:a.ce};return f&&o&&setTransitionHooks(v,f.clone(v)),v}function createTextVNode(a=" ",r=0){return createVNode$1(Text,null,a,r)}function createStaticVNode(a,r){const n=createVNode$1(Static,null,a);return n.staticCount=r,n}function createCommentVNode(a="",r=!1){return r?(openBlock(),createBlock(Comment,null,a)):createVNode$1(Comment,null,a)}function normalizeVNode(a){return a==null||typeof a=="boolean"?createVNode$1(Comment):isArray$3(a)?createVNode$1(Fragment,null,a.slice()):isVNode(a)?cloneIfMounted(a):createVNode$1(Text,null,String(a))}function cloneIfMounted(a){return a.el===null&&a.patchFlag!==-1||a.memo?a:cloneVNode(a)}function normalizeChildren(a,r){let n=0;const{shapeFlag:o}=a;if(r==null)r=null;else if(isArray$3(r))n=16;else if(typeof r=="object")if(o&65){const s=r.default;s&&(s._c&&(s._d=!1),normalizeChildren(a,s()),s._c&&(s._d=!0));return}else{n=32;const s=r._;!s&&!isInternalObject(r)?r._ctx=currentRenderingInstance:s===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?r._=1:(r._=2,a.patchFlag|=1024))}else isFunction$2(r)?(r={default:r,_ctx:currentRenderingInstance},n=32):(r=String(r),o&64?(n=16,r=[createTextVNode(r)]):n=8);a.children=r,a.shapeFlag|=n}function mergeProps(...a){const r={};for(let n=0;n<a.length;n++){const o=a[n];for(const s in o)if(s==="class")r.class!==o.class&&(r.class=normalizeClass([r.class,o.class]));else if(s==="style")r.style=normalizeStyle$1([r.style,o.style]);else if(isOn(s)){const l=r[s],u=o[s];u&&l!==u&&!(isArray$3(l)&&l.includes(u))&&(r[s]=l?[].concat(l,u):u)}else s!==""&&(r[s]=o[s])}return r}function invokeVNodeHook(a,r,n,o=null){callWithAsyncErrorHandling(a,r,7,[n,o])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(a,r,n){const o=a.type,s=(r?r.appContext:a.appContext)||emptyAppContext,l={uid:uid++,vnode:a,type:o,parent:r,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(s.provides),ids:r?r.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(o,s),emitsOptions:normalizeEmitsOptions(o,s),emit:null,emitted:null,propsDefaults:EMPTY_OBJ$1,inheritAttrs:o.inheritAttrs,ctx:EMPTY_OBJ$1,data:EMPTY_OBJ$1,props:EMPTY_OBJ$1,attrs:EMPTY_OBJ$1,slots:EMPTY_OBJ$1,refs:EMPTY_OBJ$1,setupState:EMPTY_OBJ$1,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=r?r.root:l,l.emit=emit.bind(null,l),a.ce&&a.ce(l),l}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const a=getGlobalThis(),r=(n,o)=>{let s;return(s=a[n])||(s=a[n]=[]),s.push(o),l=>{s.length>1?s.forEach(u=>u(l)):s[0](l)}};internalSetCurrentInstance=r("__VUE_INSTANCE_SETTERS__",n=>currentInstance=n),setInSSRSetupState=r("__VUE_SSR_SETTERS__",n=>isInSSRComponentSetup=n)}const setCurrentInstance=a=>{const r=currentInstance;return internalSetCurrentInstance(a),a.scope.on(),()=>{a.scope.off(),internalSetCurrentInstance(r)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(a){return a.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(a,r=!1,n=!1){r&&setInSSRSetupState(r);const{props:o,children:s}=a.vnode,l=isStatefulComponent(a);initProps$1(a,o,l,r),initSlots(a,s,n||r);const u=l?setupStatefulComponent(a,r):void 0;return r&&setInSSRSetupState(!1),u}function setupStatefulComponent(a,r){const n=a.type;a.accessCache=Object.create(null),a.proxy=new Proxy(a.ctx,PublicInstanceProxyHandlers);const{setup:o}=n;if(o){pauseTracking();const s=a.setupContext=o.length>1?createSetupContext(a):null,l=setCurrentInstance(a),u=callWithErrorHandling(o,a,0,[a.props,s]),c=isPromise$1(u);if(resetTracking(),l(),(c||a.sp)&&!isAsyncWrapper(a)&&markAsyncBoundary(a),c){if(u.then(unsetCurrentInstance,unsetCurrentInstance),r)return u.then(f=>{handleSetupResult(a,f)}).catch(f=>{handleError$3(f,a,0)});a.asyncDep=u}else handleSetupResult(a,u)}else finishComponentSetup(a)}function handleSetupResult(a,r,n){isFunction$2(r)?a.type.__ssrInlineRender?a.ssrRender=r:a.render=r:isObject$5(r)&&(a.setupState=proxyRefs(r)),finishComponentSetup(a)}function finishComponentSetup(a,r,n){const o=a.type;a.render||(a.render=o.render||NOOP);{const s=setCurrentInstance(a);pauseTracking();try{applyOptions(a)}finally{resetTracking(),s()}}}const attrsProxyHandlers={get(a,r){return track(a,"get",""),a[r]}};function createSetupContext(a){const r=n=>{a.exposed=n||{}};return{attrs:new Proxy(a.attrs,attrsProxyHandlers),slots:a.slots,emit:a.emit,expose:r}}function getComponentPublicInstance(a){return a.exposed?a.exposeProxy||(a.exposeProxy=new Proxy(proxyRefs(markRaw(a.exposed)),{get(r,n){if(n in r)return r[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](a)},has(r,n){return n in r||n in publicPropertiesMap}})):a.proxy}const classifyRE=/(?:^|[-_])\w/g,classify=a=>a.replace(classifyRE,r=>r.toUpperCase()).replace(/[-_]/g,"");function getComponentName(a,r=!0){return isFunction$2(a)?a.displayName||a.name:a.name||r&&a.__name}function formatComponentName(a,r,n=!1){let o=getComponentName(r);if(!o&&r.__file){const s=r.__file.match(/([^/\\]+)\.\w+$/);s&&(o=s[1])}if(!o&&a){const s=l=>{for(const u in l)if(l[u]===r)return u};o=s(a.components)||a.parent&&s(a.parent.type.components)||s(a.appContext.components)}return o?classify(o):n?"App":"Anonymous"}function isClassComponent(a){return isFunction$2(a)&&"__vccOpts"in a}const computed=(a,r)=>computed$1(a,r,isInSSRComponentSetup);function h(a,r,n){try{setBlockTracking(-1);const o=arguments.length;return o===2?isObject$5(r)&&!isArray$3(r)?isVNode(r)?createVNode$1(a,null,[r]):createVNode$1(a,r):createVNode$1(a,null,r):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&isVNode(n)&&(n=[n]),createVNode$1(a,r,n))}finally{setBlockTracking(1)}}const version$4="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:a=>a})}catch{}const unsafeToTrustedHTML=policy?a=>policy.createHTML(a):a=>a,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(a,r,n)=>{r.insertBefore(a,n||null)},remove:a=>{const r=a.parentNode;r&&r.removeChild(a)},createElement:(a,r,n,o)=>{const s=r==="svg"?doc.createElementNS(svgNS,a):r==="mathml"?doc.createElementNS(mathmlNS,a):n?doc.createElement(a,{is:n}):doc.createElement(a);return a==="select"&&o&&o.multiple!=null&&s.setAttribute("multiple",o.multiple),s},createText:a=>doc.createTextNode(a),createComment:a=>doc.createComment(a),setText:(a,r)=>{a.nodeValue=r},setElementText:(a,r)=>{a.textContent=r},parentNode:a=>a.parentNode,nextSibling:a=>a.nextSibling,querySelector:a=>doc.querySelector(a),setScopeId(a,r){a.setAttribute(r,"")},insertStaticContent(a,r,n,o,s,l){const u=n?n.previousSibling:r.lastChild;if(s&&(s===l||s.nextSibling))for(;r.insertBefore(s.cloneNode(!0),n),!(s===l||!(s=s.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(o==="svg"?`<svg>${a}</svg>`:o==="mathml"?`<math>${a}</math>`:a);const c=templateContainer.content;if(o==="svg"||o==="mathml"){const f=c.firstChild;for(;f.firstChild;)c.appendChild(f.firstChild);c.removeChild(f)}r.insertBefore(c,n)}return[u?u.nextSibling:r.firstChild,n?n.previousSibling:r.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$2({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=a=>(a.displayName="Transition",a.props=TransitionPropsValidators,a),Transition=decorate$1((a,{slots:r})=>h(BaseTransition,resolveTransitionProps(a),r)),callHook=(a,r=[])=>{isArray$3(a)?a.forEach(n=>n(...r)):a&&a(...r)},hasExplicitCallback=a=>a?isArray$3(a)?a.some(r=>r.length>1):a.length>1:!1;function resolveTransitionProps(a){const r={};for(const B in a)B in DOMTransitionPropsValidators||(r[B]=a[B]);if(a.css===!1)return r;const{name:n="v",type:o,duration:s,enterFromClass:l=`${n}-enter-from`,enterActiveClass:u=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:f=l,appearActiveClass:d=u,appearToClass:v=c,leaveFromClass:g=`${n}-leave-from`,leaveActiveClass:y=`${n}-leave-active`,leaveToClass:_=`${n}-leave-to`}=a,S=normalizeDuration(s),b=S&&S[0],x=S&&S[1],{onBeforeEnter:T,onEnter:A,onEnterCancelled:w,onLeave:C,onLeaveCancelled:E,onBeforeAppear:P=T,onAppear:I=A,onAppearCancelled:M=w}=r,R=(B,F,z,G)=>{B._enterCancelled=G,removeTransitionClass(B,F?v:c),removeTransitionClass(B,F?d:u),z&&z()},O=(B,F)=>{B._isLeaving=!1,removeTransitionClass(B,g),removeTransitionClass(B,_),removeTransitionClass(B,y),F&&F()},$=B=>(F,z)=>{const G=B?I:A,D=()=>R(F,B,z);callHook(G,[F,D]),nextFrame(()=>{removeTransitionClass(F,B?f:l),addTransitionClass(F,B?v:c),hasExplicitCallback(G)||whenTransitionEnds(F,o,b,D)})};return extend$2(r,{onBeforeEnter(B){callHook(T,[B]),addTransitionClass(B,l),addTransitionClass(B,u)},onBeforeAppear(B){callHook(P,[B]),addTransitionClass(B,f),addTransitionClass(B,d)},onEnter:$(!1),onAppear:$(!0),onLeave(B,F){B._isLeaving=!0;const z=()=>O(B,F);addTransitionClass(B,g),B._enterCancelled?(addTransitionClass(B,y),forceReflow(B)):(forceReflow(B),addTransitionClass(B,y)),nextFrame(()=>{B._isLeaving&&(removeTransitionClass(B,g),addTransitionClass(B,_),hasExplicitCallback(C)||whenTransitionEnds(B,o,x,z))}),callHook(C,[B,z])},onEnterCancelled(B){R(B,!1,void 0,!0),callHook(w,[B])},onAppearCancelled(B){R(B,!0,void 0,!0),callHook(M,[B])},onLeaveCancelled(B){O(B),callHook(E,[B])}})}function normalizeDuration(a){if(a==null)return null;if(isObject$5(a))return[NumberOf(a.enter),NumberOf(a.leave)];{const r=NumberOf(a);return[r,r]}}function NumberOf(a){return toNumber$1(a)}function addTransitionClass(a,r){r.split(/\s+/).forEach(n=>n&&a.classList.add(n)),(a[vtcKey]||(a[vtcKey]=new Set)).add(r)}function removeTransitionClass(a,r){r.split(/\s+/).forEach(o=>o&&a.classList.remove(o));const n=a[vtcKey];n&&(n.delete(r),n.size||(a[vtcKey]=void 0))}function nextFrame(a){requestAnimationFrame(()=>{requestAnimationFrame(a)})}let endId=0;function whenTransitionEnds(a,r,n,o){const s=a._endId=++endId,l=()=>{s===a._endId&&o()};if(n!=null)return setTimeout(l,n);const{type:u,timeout:c,propCount:f}=getTransitionInfo(a,r);if(!u)return o();const d=u+"end";let v=0;const g=()=>{a.removeEventListener(d,y),l()},y=_=>{_.target===a&&++v>=f&&g()};setTimeout(()=>{v<f&&g()},c+1),a.addEventListener(d,y)}function getTransitionInfo(a,r){const n=window.getComputedStyle(a),o=S=>(n[S]||"").split(", "),s=o(`${TRANSITION}Delay`),l=o(`${TRANSITION}Duration`),u=getTimeout(s,l),c=o(`${ANIMATION}Delay`),f=o(`${ANIMATION}Duration`),d=getTimeout(c,f);let v=null,g=0,y=0;r===TRANSITION?u>0&&(v=TRANSITION,g=u,y=l.length):r===ANIMATION?d>0&&(v=ANIMATION,g=d,y=f.length):(g=Math.max(u,d),v=g>0?u>d?TRANSITION:ANIMATION:null,y=v?v===TRANSITION?l.length:f.length:0);const _=v===TRANSITION&&/\b(?:transform|all)(?:,|$)/.test(o(`${TRANSITION}Property`).toString());return{type:v,timeout:g,propCount:y,hasTransform:_}}function getTimeout(a,r){for(;a.length<r.length;)a=a.concat(a);return Math.max(...r.map((n,o)=>toMs(n)+toMs(a[o])))}function toMs(a){return a==="auto"?0:Number(a.slice(0,-1).replace(",","."))*1e3}function forceReflow(a){return(a?a.ownerDocument:document).body.offsetHeight}function patchClass(a,r,n){const o=a[vtcKey];o&&(r=(r?[r,...o]:[...o]).join(" ")),r==null?a.removeAttribute("class"):n?a.setAttribute("class",r):a.className=r}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={name:"show",beforeMount(a,{value:r},{transition:n}){a[vShowOriginalDisplay]=a.style.display==="none"?"":a.style.display,n&&r?n.beforeEnter(a):setDisplay(a,r)},mounted(a,{value:r},{transition:n}){n&&r&&n.enter(a)},updated(a,{value:r,oldValue:n},{transition:o}){!r!=!n&&(o?r?(o.beforeEnter(a),setDisplay(a,!0),o.enter(a)):o.leave(a,()=>{setDisplay(a,!1)}):setDisplay(a,r))},beforeUnmount(a,{value:r}){setDisplay(a,r)}};function setDisplay(a,r){a.style.display=r?a[vShowOriginalDisplay]:"none",a[vShowHidden]=!r}const CSS_VAR_TEXT=Symbol(""),displayRE=/(?:^|;)\s*display\s*:/;function patchStyle(a,r,n){const o=a.style,s=isString$1(n);let l=!1;if(n&&!s){if(r)if(isString$1(r))for(const u of r.split(";")){const c=u.slice(0,u.indexOf(":")).trim();n[c]==null&&setStyle(o,c,"")}else for(const u in r)n[u]==null&&setStyle(o,u,"");for(const u in n)u==="display"&&(l=!0),setStyle(o,u,n[u])}else if(s){if(r!==n){const u=o[CSS_VAR_TEXT];u&&(n+=";"+u),o.cssText=n,l=displayRE.test(n)}}else r&&a.removeAttribute("style");vShowOriginalDisplay in a&&(a[vShowOriginalDisplay]=l?o.display:"",a[vShowHidden]&&(o.display="none"))}const importantRE=/\s*!important$/;function setStyle(a,r,n){if(isArray$3(n))n.forEach(o=>setStyle(a,r,o));else if(n==null&&(n=""),r.startsWith("--"))a.setProperty(r,n);else{const o=autoPrefix(a,r);importantRE.test(n)?a.setProperty(hyphenate(o),n.replace(importantRE,""),"important"):a[o]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(a,r){const n=prefixCache[r];if(n)return n;let o=camelize$1(r);if(o!=="filter"&&o in a)return prefixCache[r]=o;o=capitalize(o);for(let s=0;s<prefixes.length;s++){const l=prefixes[s]+o;if(l in a)return prefixCache[r]=l}return r}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(a,r,n,o,s,l=isSpecialBooleanAttr(r)){o&&r.startsWith("xlink:")?n==null?a.removeAttributeNS(xlinkNS,r.slice(6,r.length)):a.setAttributeNS(xlinkNS,r,n):n==null||l&&!includeBooleanAttr(n)?a.removeAttribute(r):a.setAttribute(r,l?"":isSymbol(n)?String(n):n)}function patchDOMProp(a,r,n,o,s){if(r==="innerHTML"||r==="textContent"){n!=null&&(a[r]=r==="innerHTML"?unsafeToTrustedHTML(n):n);return}const l=a.tagName;if(r==="value"&&l!=="PROGRESS"&&!l.includes("-")){const c=l==="OPTION"?a.getAttribute("value")||"":a.value,f=n==null?a.type==="checkbox"?"on":"":String(n);(c!==f||!("_value"in a))&&(a.value=f),n==null&&a.removeAttribute(r),a._value=n;return}let u=!1;if(n===""||n==null){const c=typeof a[r];c==="boolean"?n=includeBooleanAttr(n):n==null&&c==="string"?(n="",u=!0):c==="number"&&(n=0,u=!0)}try{a[r]=n}catch{}u&&a.removeAttribute(s||r)}function addEventListener$1(a,r,n,o){a.addEventListener(r,n,o)}function removeEventListener$1(a,r,n,o){a.removeEventListener(r,n,o)}const veiKey=Symbol("_vei");function patchEvent(a,r,n,o,s=null){const l=a[veiKey]||(a[veiKey]={}),u=l[r];if(o&&u)u.value=o;else{const[c,f]=parseName(r);if(o){const d=l[r]=createInvoker(o,s);addEventListener$1(a,c,d,f)}else u&&(removeEventListener$1(a,c,u,f),l[r]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(a){let r;if(optionsModifierRE.test(a)){r={};let o;for(;o=a.match(optionsModifierRE);)a=a.slice(0,a.length-o[0].length),r[o[0].toLowerCase()]=!0}return[a[2]===":"?a.slice(3):hyphenate(a.slice(2)),r]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(a,r){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(o,n.value),r,5,[o])};return n.value=a,n.attached=getNow(),n}function patchStopImmediatePropagation(a,r){if(isArray$3(r)){const n=a.stopImmediatePropagation;return a.stopImmediatePropagation=()=>{n.call(a),a._stopped=!0},r.map(o=>s=>!s._stopped&&o&&o(s))}else return r}const isNativeOn=a=>a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&a.charCodeAt(2)>96&&a.charCodeAt(2)<123,patchProp=(a,r,n,o,s,l)=>{const u=s==="svg";r==="class"?patchClass(a,o,u):r==="style"?patchStyle(a,n,o):isOn(r)?isModelListener(r)||patchEvent(a,r,n,o,l):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):shouldSetAsProp(a,r,o,u))?(patchDOMProp(a,r,o),!a.tagName.includes("-")&&(r==="value"||r==="checked"||r==="selected")&&patchAttr(a,r,o,u,l,r!=="value")):a._isVueCE&&(/[A-Z]/.test(r)||!isString$1(o))?patchDOMProp(a,camelize$1(r),o,l,r):(r==="true-value"?a._trueValue=o:r==="false-value"&&(a._falseValue=o),patchAttr(a,r,o,u))};function shouldSetAsProp(a,r,n,o){if(o)return!!(r==="innerHTML"||r==="textContent"||r in a&&isNativeOn(r)&&isFunction$2(n));if(r==="spellcheck"||r==="draggable"||r==="translate"||r==="autocorrect"||r==="sandbox"&&a.tagName==="IFRAME"||r==="form"||r==="list"&&a.tagName==="INPUT"||r==="type"&&a.tagName==="TEXTAREA")return!1;if(r==="width"||r==="height"){const s=a.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return isNativeOn(r)&&isString$1(n)?!1:r in a}const getModelAssigner=a=>{const r=a.props["onUpdate:modelValue"]||!1;return isArray$3(r)?n=>invokeArrayFns(r,n):r};function onCompositionStart(a){a.target.composing=!0}function onCompositionEnd(a){const r=a.target;r.composing&&(r.composing=!1,r.dispatchEvent(new Event("input")))}const assignKey$1=Symbol("_assign");function castValue(a,r,n){return r&&(a=a.trim()),n&&(a=looseToNumber(a)),a}const vModelText={created(a,{modifiers:{lazy:r,trim:n,number:o}},s){a[assignKey$1]=getModelAssigner(s);const l=o||s.props&&s.props.type==="number";addEventListener$1(a,r?"change":"input",u=>{u.target.composing||a[assignKey$1](castValue(a.value,n,l))}),(n||l)&&addEventListener$1(a,"change",()=>{a.value=castValue(a.value,n,l)}),r||(addEventListener$1(a,"compositionstart",onCompositionStart),addEventListener$1(a,"compositionend",onCompositionEnd),addEventListener$1(a,"change",onCompositionEnd))},mounted(a,{value:r}){a.value=r??""},beforeUpdate(a,{value:r,oldValue:n,modifiers:{lazy:o,trim:s,number:l}},u){if(a[assignKey$1]=getModelAssigner(u),a.composing)return;const c=(l||a.type==="number")&&!/^0\d/.test(a.value)?looseToNumber(a.value):a.value,f=r??"";c!==f&&(document.activeElement===a&&a.type!=="range"&&(o&&r===n||s&&a.value.trim()===f)||(a.value=f))}},vModelCheckbox={deep:!0,created(a,r,n){a[assignKey$1]=getModelAssigner(n),addEventListener$1(a,"change",()=>{const o=a._modelValue,s=getValue(a),l=a.checked,u=a[assignKey$1];if(isArray$3(o)){const c=looseIndexOf(o,s),f=c!==-1;if(l&&!f)u(o.concat(s));else if(!l&&f){const d=[...o];d.splice(c,1),u(d)}}else if(isSet(o)){const c=new Set(o);l?c.add(s):c.delete(s),u(c)}else u(getCheckboxValue(a,l))})},mounted:setChecked,beforeUpdate(a,r,n){a[assignKey$1]=getModelAssigner(n),setChecked(a,r,n)}};function setChecked(a,{value:r,oldValue:n},o){a._modelValue=r;let s;if(isArray$3(r))s=looseIndexOf(r,o.props.value)>-1;else if(isSet(r))s=r.has(o.props.value);else{if(r===n)return;s=looseEqual(r,getCheckboxValue(a,!0))}a.checked!==s&&(a.checked=s)}const vModelRadio={created(a,{value:r},n){a.checked=looseEqual(r,n.props.value),a[assignKey$1]=getModelAssigner(n),addEventListener$1(a,"change",()=>{a[assignKey$1](getValue(a))})},beforeUpdate(a,{value:r,oldValue:n},o){a[assignKey$1]=getModelAssigner(o),r!==n&&(a.checked=looseEqual(r,o.props.value))}},vModelSelect={deep:!0,created(a,{value:r,modifiers:{number:n}},o){const s=isSet(r);addEventListener$1(a,"change",()=>{const l=Array.prototype.filter.call(a.options,u=>u.selected).map(u=>n?looseToNumber(getValue(u)):getValue(u));a[assignKey$1](a.multiple?s?new Set(l):l:l[0]),a._assigning=!0,nextTick(()=>{a._assigning=!1})}),a[assignKey$1]=getModelAssigner(o)},mounted(a,{value:r}){setSelected(a,r)},beforeUpdate(a,r,n){a[assignKey$1]=getModelAssigner(n)},updated(a,{value:r}){a._assigning||setSelected(a,r)}};function setSelected(a,r){const n=a.multiple,o=isArray$3(r);if(!(n&&!o&&!isSet(r))){for(let s=0,l=a.options.length;s<l;s++){const u=a.options[s],c=getValue(u);if(n)if(o){const f=typeof c;f==="string"||f==="number"?u.selected=r.some(d=>String(d)===String(c)):u.selected=looseIndexOf(r,c)>-1}else u.selected=r.has(c);else if(looseEqual(getValue(u),r)){a.selectedIndex!==s&&(a.selectedIndex=s);return}}!n&&a.selectedIndex!==-1&&(a.selectedIndex=-1)}}function getValue(a){return"_value"in a?a._value:a.value}function getCheckboxValue(a,r){const n=r?"_trueValue":"_falseValue";return n in a?a[n]:r}const vModelDynamic={created(a,r,n){callModelHook(a,r,n,null,"created")},mounted(a,r,n){callModelHook(a,r,n,null,"mounted")},beforeUpdate(a,r,n,o){callModelHook(a,r,n,o,"beforeUpdate")},updated(a,r,n,o){callModelHook(a,r,n,o,"updated")}};function resolveDynamicModel(a,r){switch(a){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(r){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(a,r,n,o,s){const u=resolveDynamicModel(a.tagName,n.props&&n.props.type)[s];u&&u(a,r,n,o)}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:a=>a.stopPropagation(),prevent:a=>a.preventDefault(),self:a=>a.target!==a.currentTarget,ctrl:a=>!a.ctrlKey,shift:a=>!a.shiftKey,alt:a=>!a.altKey,meta:a=>!a.metaKey,left:a=>"button"in a&&a.button!==0,middle:a=>"button"in a&&a.button!==1,right:a=>"button"in a&&a.button!==2,exact:(a,r)=>systemModifiers.some(n=>a[`${n}Key`]&&!r.includes(n))},withModifiers=(a,r)=>{const n=a._withMods||(a._withMods={}),o=r.join(".");return n[o]||(n[o]=(s,...l)=>{for(let u=0;u<r.length;u++){const c=modifierGuards[r[u]];if(c&&c(s,r))return}return a(s,...l)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(a,r)=>{const n=a._withKeys||(a._withKeys={}),o=r.join(".");return n[o]||(n[o]=s=>{if(!("key"in s))return;const l=hyphenate(s.key);if(r.some(u=>u===l||keyNames[u]===l))return a(s)})},rendererOptions=extend$2({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...a)=>{const r=ensureRenderer().createApp(...a),{mount:n}=r;return r.mount=o=>{const s=normalizeContainer(o);if(!s)return;const l=r._component;!isFunction$2(l)&&!l.render&&!l.template&&(l.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const u=n(s,!1,resolveRootNamespace(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),u},r};function resolveRootNamespace(a){if(a instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&a instanceof MathMLElement)return"mathml"}function normalizeContainer(a){return isString$1(a)?document.querySelector(a):a}/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=a=>activePinia=a,piniaSymbol=Symbol();function isPlainObject$2(a){return a&&typeof a=="object"&&Object.prototype.toString.call(a)==="[object Object]"&&typeof a.toJSON!="function"}var MutationType;(function(a){a.direct="direct",a.patchObject="patch object",a.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const a=effectScope(!0),r=a.run(()=>ref({}));let n=[],o=[];const s=markRaw({install(l){setActivePinia(s),s._a=l,l.provide(piniaSymbol,s),l.config.globalProperties.$pinia=s,o.forEach(u=>n.push(u)),o=[]},use(l){return this._a?n.push(l):o.push(l),this},_p:n,_a:null,_e:a,_s:new Map,state:r});return s}const noop$5=()=>{};function addSubscription(a,r,n,o=noop$5){a.add(r);const s=()=>{a.delete(r)&&o()};return!n&&getCurrentScope()&&onScopeDispose(s),s}function triggerSubscriptions(a,...r){a.forEach(n=>{n(...r)})}const fallbackRunWithContext=a=>a(),ACTION_MARKER=Symbol(),ACTION_NAME=Symbol();function mergeReactiveObjects(a,r){a instanceof Map&&r instanceof Map?r.forEach((n,o)=>a.set(o,n)):a instanceof Set&&r instanceof Set&&r.forEach(a.add,a);for(const n in r){if(!r.hasOwnProperty(n))continue;const o=r[n],s=a[n];isPlainObject$2(s)&&isPlainObject$2(o)&&a.hasOwnProperty(n)&&!isRef(o)&&!isReactive(o)?a[n]=mergeReactiveObjects(s,o):a[n]=o}return a}const skipHydrateSymbol=Symbol();function shouldHydrate(a){return!isPlainObject$2(a)||!Object.prototype.hasOwnProperty.call(a,skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(a){return!!(isRef(a)&&a.effect)}function createOptionsStore(a,r,n,o){const{state:s,actions:l,getters:u}=r,c=n.state.value[a];let f;function d(){c||(n.state.value[a]=s?s():{});const v=toRefs(n.state.value[a]);return assign$1(v,l,Object.keys(u||{}).reduce((g,y)=>(g[y]=markRaw(computed(()=>{setActivePinia(n);const _=n._s.get(a);return u[y].call(_,_)})),g),{}))}return f=createSetupStore(a,d,r,n,o,!0),f}function createSetupStore(a,r,n={},o,s,l){let u;const c=assign$1({actions:{}},n),f={deep:!0};let d,v,g=new Set,y=new Set,_;const S=o.state.value[a];!l&&!S&&(o.state.value[a]={}),ref({});let b;function x(M){let R;d=v=!1,typeof M=="function"?(M(o.state.value[a]),R={type:MutationType.patchFunction,storeId:a,events:_}):(mergeReactiveObjects(o.state.value[a],M),R={type:MutationType.patchObject,payload:M,storeId:a,events:_});const O=b=Symbol();nextTick().then(()=>{b===O&&(d=!0)}),v=!0,triggerSubscriptions(g,R,o.state.value[a])}const T=l?function(){const{state:R}=n,O=R?R():{};this.$patch($=>{assign$1($,O)})}:noop$5;function A(){u.stop(),g.clear(),y.clear(),o._s.delete(a)}const w=(M,R="")=>{if(ACTION_MARKER in M)return M[ACTION_NAME]=R,M;const O=function(){setActivePinia(o);const $=Array.from(arguments),B=new Set,F=new Set;function z(V){B.add(V)}function G(V){F.add(V)}triggerSubscriptions(y,{args:$,name:O[ACTION_NAME],store:E,after:z,onError:G});let D;try{D=M.apply(this&&this.$id===a?this:E,$)}catch(V){throw triggerSubscriptions(F,V),V}return D instanceof Promise?D.then(V=>(triggerSubscriptions(B,V),V)).catch(V=>(triggerSubscriptions(F,V),Promise.reject(V))):(triggerSubscriptions(B,D),D)};return O[ACTION_MARKER]=!0,O[ACTION_NAME]=R,O},C={_p:o,$id:a,$onAction:addSubscription.bind(null,y),$patch:x,$reset:T,$subscribe(M,R={}){const O=addSubscription(g,M,R.detached,()=>$()),$=u.run(()=>watch(()=>o.state.value[a],B=>{(R.flush==="sync"?v:d)&&M({storeId:a,type:MutationType.direct,events:_},B)},assign$1({},f,R)));return O},$dispose:A},E=reactive(C);o._s.set(a,E);const I=(o._a&&o._a.runWithContext||fallbackRunWithContext)(()=>o._e.run(()=>(u=effectScope()).run(()=>r({action:w}))));for(const M in I){const R=I[M];if(isRef(R)&&!isComputed(R)||isReactive(R))l||(S&&shouldHydrate(R)&&(isRef(R)?R.value=S[M]:mergeReactiveObjects(R,S[M])),o.state.value[a][M]=R);else if(typeof R=="function"){const O=w(R,M);I[M]=O,c.actions[M]=R}}return assign$1(E,I),assign$1(toRaw(E),I),Object.defineProperty(E,"$state",{get:()=>o.state.value[a],set:M=>{x(R=>{assign$1(R,M)})}}),o._p.forEach(M=>{assign$1(E,u.run(()=>M({store:E,app:o._a,pinia:o,options:c})))}),S&&l&&n.hydrate&&n.hydrate(E.$state,S),d=!0,v=!0,E}/*! #__NO_SIDE_EFFECTS__ */function defineStore(a,r,n){let o;const s=typeof r=="function";o=s?n:r;function l(u,c){const f=hasInjectionContext();return u=u||(f?inject(piniaSymbol,null):null),u&&setActivePinia(u),u=activePinia,u._s.has(a)||(s?createSetupStore(a,r,o,u):createOptionsStore(a,o,u)),u._s.get(a)}return l.$id=a,l}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const isBrowser$1=typeof document<"u";function isRouteComponent(a){return typeof a=="object"||"displayName"in a||"props"in a||"__vccOpts"in a}function isESModule(a){return a.__esModule||a[Symbol.toStringTag]==="Module"||a.default&&isRouteComponent(a.default)}const assign=Object.assign;function applyToParams(a,r){const n={};for(const o in r){const s=r[o];n[o]=isArray$2(s)?s.map(a):a(s)}return n}const noop$4=()=>{},isArray$2=Array.isArray;function mergeOptions(a,r){const n={};for(const o in a)n[o]=o in r?r[o]:a[o];return n}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(a){return a==null?"":encodeURI(""+a).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(a){return commonEncode(a).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(a){return commonEncode(a).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(a){return encodeQueryValue(a).replace(EQUAL_RE,"%3D")}function encodePath(a){return commonEncode(a).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(a){return encodePath(a).replace(SLASH_RE,"%2F")}function decode$1(a){if(a==null)return null;try{return decodeURIComponent(""+a)}catch{}return""+a}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=a=>a.replace(TRAILING_SLASH_RE,"");function parseURL(a,r,n="/"){let o,s={},l="",u="";const c=r.indexOf("#");let f=r.indexOf("?");return f=c>=0&&f>c?-1:f,f>=0&&(o=r.slice(0,f),l=r.slice(f,c>0?c:r.length),s=a(l.slice(1))),c>=0&&(o=o||r.slice(0,c),u=r.slice(c,r.length)),o=resolveRelativePath(o??r,n),{fullPath:o+l+u,path:o,query:s,hash:decode$1(u)}}function stringifyURL(a,r){const n=r.query?a(r.query):"";return r.path+(n&&"?")+n+(r.hash||"")}function stripBase(a,r){return!r||!a.toLowerCase().startsWith(r.toLowerCase())?a:a.slice(r.length)||"/"}function isSameRouteLocation(a,r,n){const o=r.matched.length-1,s=n.matched.length-1;return o>-1&&o===s&&isSameRouteRecord(r.matched[o],n.matched[s])&&isSameRouteLocationParams(r.params,n.params)&&a(r.query)===a(n.query)&&r.hash===n.hash}function isSameRouteRecord(a,r){return(a.aliasOf||a)===(r.aliasOf||r)}function isSameRouteLocationParams(a,r){if(Object.keys(a).length!==Object.keys(r).length)return!1;for(var n in a)if(!isSameRouteLocationParamsValue(a[n],r[n]))return!1;return!0}function isSameRouteLocationParamsValue(a,r){return isArray$2(a)?isEquivalentArray(a,r):isArray$2(r)?isEquivalentArray(r,a):(a==null?void 0:a.valueOf())===(r==null?void 0:r.valueOf())}function isEquivalentArray(a,r){return isArray$2(r)?a.length===r.length&&a.every((n,o)=>n===r[o]):a.length===1&&a[0]===r}function resolveRelativePath(a,r){if(a.startsWith("/"))return a;if(!a)return r;const n=r.split("/"),o=a.split("/"),s=o[o.length-1];(s===".."||s===".")&&o.push("");let l=n.length-1,u,c;for(u=0;u<o.length;u++)if(c=o[u],c!==".")if(c==="..")l>1&&l--;else break;return n.slice(0,l).join("/")+"/"+o.slice(u).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let NavigationType=function(a){return a.pop="pop",a.push="push",a}({}),NavigationDirection=function(a){return a.back="back",a.forward="forward",a.unknown="",a}({});function normalizeBase(a){if(!a)if(isBrowser$1){const r=document.querySelector("base");a=r&&r.getAttribute("href")||"/",a=a.replace(/^\w+:\/\/[^\/]+/,"")}else a="/";return a[0]!=="/"&&a[0]!=="#"&&(a="/"+a),removeTrailingSlash(a)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(a,r){return a.replace(BEFORE_HASH_RE,"#")+r}function getElementPosition(a,r){const n=document.documentElement.getBoundingClientRect(),o=a.getBoundingClientRect();return{behavior:r.behavior,left:o.left-n.left-(r.left||0),top:o.top-n.top-(r.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(a){let r;if("el"in a){const n=a.el,o=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;r=getElementPosition(s,a)}else r=a;"scrollBehavior"in document.documentElement.style?window.scrollTo(r):window.scrollTo(r.left!=null?r.left:window.scrollX,r.top!=null?r.top:window.scrollY)}function getScrollKey(a,r){return(history.state?history.state.position-r:-1)+a}const scrollPositions=new Map;function saveScrollPosition(a,r){scrollPositions.set(a,r)}function getSavedScrollPosition(a){const r=scrollPositions.get(a);return scrollPositions.delete(a),r}function isRouteLocation(a){return typeof a=="string"||a&&typeof a=="object"}function isRouteName(a){return typeof a=="string"||typeof a=="symbol"}let ErrorTypes=function(a){return a[a.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",a[a.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",a[a.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",a[a.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",a[a.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",a}({});const NavigationFailureSymbol=Symbol("");ErrorTypes.MATCHER_NOT_FOUND+"",ErrorTypes.NAVIGATION_GUARD_REDIRECT+"",ErrorTypes.NAVIGATION_ABORTED+"",ErrorTypes.NAVIGATION_CANCELLED+"",ErrorTypes.NAVIGATION_DUPLICATED+"";function createRouterError(a,r){return assign(new Error,{type:a,[NavigationFailureSymbol]:!0},r)}function isNavigationFailure(a,r){return a instanceof Error&&NavigationFailureSymbol in a&&(r==null||!!(a.type&r))}const propertiesToLog=["params","query","hash"];function stringifyRoute(a){if(typeof a=="string")return a;if(a.path!=null)return a.path;const r={};for(const n of propertiesToLog)n in a&&(r[n]=a[n]);return JSON.stringify(r,null,2)}function parseQuery(a){const r={};if(a===""||a==="?")return r;const n=(a[0]==="?"?a.slice(1):a).split("&");for(let o=0;o<n.length;++o){const s=n[o].replace(PLUS_RE," "),l=s.indexOf("="),u=decode$1(l<0?s:s.slice(0,l)),c=l<0?null:decode$1(s.slice(l+1));if(u in r){let f=r[u];isArray$2(f)||(f=r[u]=[f]),f.push(c)}else r[u]=c}return r}function stringifyQuery(a){let r="";for(let n in a){const o=a[n];if(n=encodeQueryKey(n),o==null){o!==void 0&&(r+=(r.length?"&":"")+n);continue}(isArray$2(o)?o.map(s=>s&&encodeQueryValue(s)):[o&&encodeQueryValue(o)]).forEach(s=>{s!==void 0&&(r+=(r.length?"&":"")+n,s!=null&&(r+="="+s))})}return r}function normalizeQuery(a){const r={};for(const n in a){const o=a[n];o!==void 0&&(r[n]=isArray$2(o)?o.map(s=>s==null?null:""+s):o==null?o:""+o)}return r}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let a=[];function r(o){return a.push(o),()=>{const s=a.indexOf(o);s>-1&&a.splice(s,1)}}function n(){a=[]}return{add:r,list:()=>a.slice(),reset:n}}function guardToPromiseFn(a,r,n,o,s,l=u=>u()){const u=o&&(o.enterCallbacks[s]=o.enterCallbacks[s]||[]);return()=>new Promise((c,f)=>{const d=y=>{y===!1?f(createRouterError(ErrorTypes.NAVIGATION_ABORTED,{from:n,to:r})):y instanceof Error?f(y):isRouteLocation(y)?f(createRouterError(ErrorTypes.NAVIGATION_GUARD_REDIRECT,{from:r,to:y})):(u&&o.enterCallbacks[s]===u&&typeof y=="function"&&u.push(y),c())},v=l(()=>a.call(o&&o.instances[s],r,n,d));let g=Promise.resolve(v);a.length<3&&(g=g.then(d)),g.catch(y=>f(y))})}function extractComponentsGuards(a,r,n,o,s=l=>l()){const l=[];for(const u of a)for(const c in u.components){let f=u.components[c];if(!(r!=="beforeRouteEnter"&&!u.instances[c]))if(isRouteComponent(f)){const d=(f.__vccOpts||f)[r];d&&l.push(guardToPromiseFn(d,n,o,u,c,s))}else{let d=f();l.push(()=>d.then(v=>{if(!v)throw new Error(`Couldn't resolve component "${c}" at "${u.path}"`);const g=isESModule(v)?v.default:v;u.mods[c]=v,u.components[c]=g;const y=(g.__vccOpts||g)[r];return y&&guardToPromiseFn(y,n,o,u,c,s)()}))}}return l}function extractChangingRecords(a,r){const n=[],o=[],s=[],l=Math.max(r.matched.length,a.matched.length);for(let u=0;u<l;u++){const c=r.matched[u];c&&(a.matched.find(d=>isSameRouteRecord(d,c))?o.push(c):n.push(c));const f=a.matched[u];f&&(r.matched.find(d=>isSameRouteRecord(d,f))||s.push(f))}return[n,o,s]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(a,r){const{pathname:n,search:o,hash:s}=r,l=a.indexOf("#");if(l>-1){let u=s.includes(a.slice(l))?a.slice(l).length:1,c=s.slice(u);return c[0]!=="/"&&(c="/"+c),stripBase(c,"")}return stripBase(n,a)+o+s}function useHistoryListeners(a,r,n,o){let s=[],l=[],u=null;const c=({state:y})=>{const _=createCurrentLocation(a,location),S=n.value,b=r.value;let x=0;if(y){if(n.value=_,r.value=y,u&&u===S){u=null;return}x=b?y.position-b.position:0}else o(_);s.forEach(T=>{T(n.value,S,{delta:x,type:NavigationType.pop,direction:x?x>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function f(){u=n.value}function d(y){s.push(y);const _=()=>{const S=s.indexOf(y);S>-1&&s.splice(S,1)};return l.push(_),_}function v(){if(document.visibilityState==="hidden"){const{history:y}=window;if(!y.state)return;y.replaceState(assign({},y.state,{scroll:computeScrollPosition()}),"")}}function g(){for(const y of l)y();l=[],window.removeEventListener("popstate",c),window.removeEventListener("pagehide",v),document.removeEventListener("visibilitychange",v)}return window.addEventListener("popstate",c),window.addEventListener("pagehide",v),document.addEventListener("visibilitychange",v),{pauseListeners:f,listen:d,destroy:g}}function buildState(a,r,n,o=!1,s=!1){return{back:a,current:r,forward:n,replaced:o,position:window.history.length,scroll:s?computeScrollPosition():null}}function useHistoryStateNavigation(a){const{history:r,location:n}=window,o={value:createCurrentLocation(a,n)},s={value:r.state};s.value||l(o.value,{back:null,current:o.value,forward:null,position:r.length-1,replaced:!0,scroll:null},!0);function l(f,d,v){const g=a.indexOf("#"),y=g>-1?(n.host&&document.querySelector("base")?a:a.slice(g))+f:createBaseLocation()+a+f;try{r[v?"replaceState":"pushState"](d,"",y),s.value=d}catch(_){console.error(_),n[v?"replace":"assign"](y)}}function u(f,d){l(f,assign({},r.state,buildState(s.value.back,f,s.value.forward,!0),d,{position:s.value.position}),!0),o.value=f}function c(f,d){const v=assign({},s.value,r.state,{forward:f,scroll:computeScrollPosition()});l(v.current,v,!0),l(f,assign({},buildState(o.value,f,null),{position:v.position+1},d),!1),o.value=f}return{location:o,state:s,push:c,replace:u}}function createWebHistory(a){a=normalizeBase(a);const r=useHistoryStateNavigation(a),n=useHistoryListeners(a,r.state,r.location,r.replace);function o(l,u=!0){u||n.pauseListeners(),history.go(l)}const s=assign({location:"",base:a,go:o,createHref:createHref.bind(null,a)},r,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>r.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>r.state.value}),s}function createWebHashHistory(a){return a=location.host?a||location.pathname+location.search:"",a.includes("#")||(a+="#"),createWebHistory(a)}let TokenType=function(a){return a[a.Static=0]="Static",a[a.Param=1]="Param",a[a.Group=2]="Group",a}({});var TokenizerState=function(a){return a[a.Static=0]="Static",a[a.Param=1]="Param",a[a.ParamRegExp=2]="ParamRegExp",a[a.ParamRegExpEnd=3]="ParamRegExpEnd",a[a.EscapeNext=4]="EscapeNext",a}(TokenizerState||{});const ROOT_TOKEN={type:TokenType.Static,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(a){if(!a)return[[]];if(a==="/")return[[ROOT_TOKEN]];if(!a.startsWith("/"))throw new Error(`Invalid path "${a}"`);function r(_){throw new Error(`ERR (${n})/"${d}": ${_}`)}let n=TokenizerState.Static,o=n;const s=[];let l;function u(){l&&s.push(l),l=[]}let c=0,f,d="",v="";function g(){d&&(n===TokenizerState.Static?l.push({type:TokenType.Static,value:d}):n===TokenizerState.Param||n===TokenizerState.ParamRegExp||n===TokenizerState.ParamRegExpEnd?(l.length>1&&(f==="*"||f==="+")&&r(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),l.push({type:TokenType.Param,value:d,regexp:v,repeatable:f==="*"||f==="+",optional:f==="*"||f==="?"})):r("Invalid state to consume buffer"),d="")}function y(){d+=f}for(;c<a.length;){if(f=a[c++],f==="\\"&&n!==TokenizerState.ParamRegExp){o=n,n=TokenizerState.EscapeNext;continue}switch(n){case TokenizerState.Static:f==="/"?(d&&g(),u()):f===":"?(g(),n=TokenizerState.Param):y();break;case TokenizerState.EscapeNext:y(),n=o;break;case TokenizerState.Param:f==="("?n=TokenizerState.ParamRegExp:VALID_PARAM_RE.test(f)?y():(g(),n=TokenizerState.Static,f!=="*"&&f!=="?"&&f!=="+"&&c--);break;case TokenizerState.ParamRegExp:f===")"?v[v.length-1]=="\\"?v=v.slice(0,-1)+f:n=TokenizerState.ParamRegExpEnd:v+=f;break;case TokenizerState.ParamRegExpEnd:g(),n=TokenizerState.Static,f!=="*"&&f!=="?"&&f!=="+"&&c--,v="";break;default:r("Unknown state");break}}return n===TokenizerState.ParamRegExp&&r(`Unfinished custom RegExp for param "${d}"`),g(),u(),s}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0};var PathScore=function(a){return a[a._multiplier=10]="_multiplier",a[a.Root=90]="Root",a[a.Segment=40]="Segment",a[a.SubSegment=30]="SubSegment",a[a.Static=40]="Static",a[a.Dynamic=20]="Dynamic",a[a.BonusCustomRegExp=10]="BonusCustomRegExp",a[a.BonusWildcard=-50]="BonusWildcard",a[a.BonusRepeatable=-20]="BonusRepeatable",a[a.BonusOptional=-8]="BonusOptional",a[a.BonusStrict=.7000000000000001]="BonusStrict",a[a.BonusCaseSensitive=.25]="BonusCaseSensitive",a}(PathScore||{});const REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(a,r){const n=assign({},BASE_PATH_PARSER_OPTIONS,r),o=[];let s=n.start?"^":"";const l=[];for(const d of a){const v=d.length?[]:[PathScore.Root];n.strict&&!d.length&&(s+="/");for(let g=0;g<d.length;g++){const y=d[g];let _=PathScore.Segment+(n.sensitive?PathScore.BonusCaseSensitive:0);if(y.type===TokenType.Static)g||(s+="/"),s+=y.value.replace(REGEX_CHARS_RE,"\\$&"),_+=PathScore.Static;else if(y.type===TokenType.Param){const{value:S,repeatable:b,optional:x,regexp:T}=y;l.push({name:S,repeatable:b,optional:x});const A=T||BASE_PARAM_PATTERN;if(A!==BASE_PARAM_PATTERN){_+=PathScore.BonusCustomRegExp;try{`${A}`}catch(C){throw new Error(`Invalid custom RegExp for param "${S}" (${A}): `+C.message)}}let w=b?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;g||(w=x&&d.length<2?`(?:/${w})`:"/"+w),x&&(w+="?"),s+=w,_+=PathScore.Dynamic,x&&(_+=PathScore.BonusOptional),b&&(_+=PathScore.BonusRepeatable),A===".*"&&(_+=PathScore.BonusWildcard)}v.push(_)}o.push(v)}if(n.strict&&n.end){const d=o.length-1;o[d][o[d].length-1]+=PathScore.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const u=new RegExp(s,n.sensitive?"":"i");function c(d){const v=d.match(u),g={};if(!v)return null;for(let y=1;y<v.length;y++){const _=v[y]||"",S=l[y-1];g[S.name]=_&&S.repeatable?_.split("/"):_}return g}function f(d){let v="",g=!1;for(const y of a){(!g||!v.endsWith("/"))&&(v+="/"),g=!1;for(const _ of y)if(_.type===TokenType.Static)v+=_.value;else if(_.type===TokenType.Param){const{value:S,repeatable:b,optional:x}=_,T=S in d?d[S]:"";if(isArray$2(T)&&!b)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const A=isArray$2(T)?T.join("/"):T;if(!A)if(x)y.length<2&&(v.endsWith("/")?v=v.slice(0,-1):g=!0);else throw new Error(`Missing required param "${S}"`);v+=A}}return v||"/"}return{re:u,score:o,keys:l,parse:c,stringify:f}}function compareScoreArray(a,r){let n=0;for(;n<a.length&&n<r.length;){const o=r[n]-a[n];if(o)return o;n++}return a.length<r.length?a.length===1&&a[0]===PathScore.Static+PathScore.Segment?-1:1:a.length>r.length?r.length===1&&r[0]===PathScore.Static+PathScore.Segment?1:-1:0}function comparePathParserScore(a,r){let n=0;const o=a.score,s=r.score;for(;n<o.length&&n<s.length;){const l=compareScoreArray(o[n],s[n]);if(l)return l;n++}if(Math.abs(s.length-o.length)===1){if(isLastScoreNegative(o))return 1;if(isLastScoreNegative(s))return-1}return s.length-o.length}function isLastScoreNegative(a){const r=a[a.length-1];return a.length>0&&r[r.length-1]<0}const PATH_PARSER_OPTIONS_DEFAULTS={strict:!1,end:!0,sensitive:!1};function createRouteRecordMatcher(a,r,n){const o=tokensToParser(tokenizePath(a.path),n),s=assign(o,{record:a,parent:r,children:[],alias:[]});return r&&!s.record.aliasOf==!r.record.aliasOf&&r.children.push(s),s}function createRouterMatcher(a,r){const n=[],o=new Map;r=mergeOptions(PATH_PARSER_OPTIONS_DEFAULTS,r);function s(g){return o.get(g)}function l(g,y,_){const S=!_,b=normalizeRouteRecord(g);b.aliasOf=_&&_.record;const x=mergeOptions(r,g),T=[b];if("alias"in g){const C=typeof g.alias=="string"?[g.alias]:g.alias;for(const E of C)T.push(normalizeRouteRecord(assign({},b,{components:_?_.record.components:b.components,path:E,aliasOf:_?_.record:b})))}let A,w;for(const C of T){const{path:E}=C;if(y&&E[0]!=="/"){const P=y.record.path,I=P[P.length-1]==="/"?"":"/";C.path=y.record.path+(E&&I+E)}if(A=createRouteRecordMatcher(C,y,x),_?_.alias.push(A):(w=w||A,w!==A&&w.alias.push(A),S&&g.name&&!isAliasRecord(A)&&u(g.name)),isMatchable(A)&&f(A),b.children){const P=b.children;for(let I=0;I<P.length;I++)l(P[I],A,_&&_.children[I])}_=_||A}return w?()=>{u(w)}:noop$4}function u(g){if(isRouteName(g)){const y=o.get(g);y&&(o.delete(g),n.splice(n.indexOf(y),1),y.children.forEach(u),y.alias.forEach(u))}else{const y=n.indexOf(g);y>-1&&(n.splice(y,1),g.record.name&&o.delete(g.record.name),g.children.forEach(u),g.alias.forEach(u))}}function c(){return n}function f(g){const y=findInsertionIndex(g,n);n.splice(y,0,g),g.record.name&&!isAliasRecord(g)&&o.set(g.record.name,g)}function d(g,y){let _,S={},b,x;if("name"in g&&g.name){if(_=o.get(g.name),!_)throw createRouterError(ErrorTypes.MATCHER_NOT_FOUND,{location:g});x=_.record.name,S=assign(pickParams(y.params,_.keys.filter(w=>!w.optional).concat(_.parent?_.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),g.params&&pickParams(g.params,_.keys.map(w=>w.name))),b=_.stringify(S)}else if(g.path!=null)b=g.path,_=n.find(w=>w.re.test(b)),_&&(S=_.parse(b),x=_.record.name);else{if(_=y.name?o.get(y.name):n.find(w=>w.re.test(y.path)),!_)throw createRouterError(ErrorTypes.MATCHER_NOT_FOUND,{location:g,currentLocation:y});x=_.record.name,S=assign({},y.params,g.params),b=_.stringify(S)}const T=[];let A=_;for(;A;)T.unshift(A.record),A=A.parent;return{name:x,path:b,params:S,matched:T,meta:mergeMetaFields(T)}}a.forEach(g=>l(g));function v(){n.length=0,o.clear()}return{addRoute:l,resolve:d,removeRoute:u,clearRoutes:v,getRoutes:c,getRecordMatcher:s}}function pickParams(a,r){const n={};for(const o of r)o in a&&(n[o]=a[o]);return n}function normalizeRouteRecord(a){const r={path:a.path,redirect:a.redirect,name:a.name,meta:a.meta||{},aliasOf:a.aliasOf,beforeEnter:a.beforeEnter,props:normalizeRecordProps(a),children:a.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in a?a.components||null:a.component&&{default:a.component}};return Object.defineProperty(r,"mods",{value:{}}),r}function normalizeRecordProps(a){const r={},n=a.props||!1;if("component"in a)r.default=n;else for(const o in a.components)r[o]=typeof n=="object"?n[o]:n;return r}function isAliasRecord(a){for(;a;){if(a.record.aliasOf)return!0;a=a.parent}return!1}function mergeMetaFields(a){return a.reduce((r,n)=>assign(r,n.meta),{})}function findInsertionIndex(a,r){let n=0,o=r.length;for(;n!==o;){const l=n+o>>1;comparePathParserScore(a,r[l])<0?o=l:n=l+1}const s=getInsertionAncestor(a);return s&&(o=r.lastIndexOf(s,o-1)),o}function getInsertionAncestor(a){let r=a;for(;r=r.parent;)if(isMatchable(r)&&comparePathParserScore(a,r)===0)return r}function isMatchable({record:a}){return!!(a.name||a.components&&Object.keys(a.components).length||a.redirect)}function useLink(a){const r=inject(routerKey),n=inject(routeLocationKey),o=computed(()=>{const f=unref(a.to);return r.resolve(f)}),s=computed(()=>{const{matched:f}=o.value,{length:d}=f,v=f[d-1],g=n.matched;if(!v||!g.length)return-1;const y=g.findIndex(isSameRouteRecord.bind(null,v));if(y>-1)return y;const _=getOriginalPath(f[d-2]);return d>1&&getOriginalPath(v)===_&&g[g.length-1].path!==_?g.findIndex(isSameRouteRecord.bind(null,f[d-2])):y}),l=computed(()=>s.value>-1&&includesParams(n.params,o.value.params)),u=computed(()=>s.value>-1&&s.value===n.matched.length-1&&isSameRouteLocationParams(n.params,o.value.params));function c(f={}){if(guardEvent(f)){const d=r[unref(a.replace)?"replace":"push"](unref(a.to)).catch(noop$4);return a.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:o,href:computed(()=>o.value.href),isActive:l,isExactActive:u,navigate:c}}function preferSingleVNode(a){return a.length===1?a[0]:a}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink,setup(a,{slots:r}){const n=reactive(useLink(a)),{options:o}=inject(routerKey),s=computed(()=>({[getLinkClass(a.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(a.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const l=r.default&&preferSingleVNode(r.default(n));return a.custom?l:h("a",{"aria-current":n.isExactActive?a.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},l)}}}),RouterLink=RouterLinkImpl;function guardEvent(a){if(!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)&&!a.defaultPrevented&&!(a.button!==void 0&&a.button!==0)){if(a.currentTarget&&a.currentTarget.getAttribute){const r=a.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(r))return}return a.preventDefault&&a.preventDefault(),!0}}function includesParams(a,r){for(const n in r){const o=r[n],s=a[n];if(typeof o=="string"){if(o!==s)return!1}else if(!isArray$2(s)||s.length!==o.length||o.some((l,u)=>l.valueOf()!==s[u].valueOf()))return!1}return!0}function getOriginalPath(a){return a?a.aliasOf?a.aliasOf.path:a.path:""}const getLinkClass=(a,r,n)=>a??r??n,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(a,{attrs:r,slots:n}){const o=inject(routerViewLocationKey),s=computed(()=>a.route||o.value),l=inject(viewDepthKey,0),u=computed(()=>{let d=unref(l);const{matched:v}=s.value;let g;for(;(g=v[d])&&!g.components;)d++;return d}),c=computed(()=>s.value.matched[u.value]);provide(viewDepthKey,computed(()=>u.value+1)),provide(matchedRouteKey,c),provide(routerViewLocationKey,s);const f=ref();return watch(()=>[f.value,c.value,a.name],([d,v,g],[y,_,S])=>{v&&(v.instances[g]=d,_&&_!==v&&d&&d===y&&(v.leaveGuards.size||(v.leaveGuards=_.leaveGuards),v.updateGuards.size||(v.updateGuards=_.updateGuards))),d&&v&&(!_||!isSameRouteRecord(v,_)||!y)&&(v.enterCallbacks[g]||[]).forEach(b=>b(d))},{flush:"post"}),()=>{const d=s.value,v=a.name,g=c.value,y=g&&g.components[v];if(!y)return normalizeSlot(n.default,{Component:y,route:d});const _=g.props[v],S=_?_===!0?d.params:typeof _=="function"?_(d):_:null,x=h(y,assign({},S,r,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(g.instances[v]=null)},ref:f}));return normalizeSlot(n.default,{Component:x,route:d})||x}}});function normalizeSlot(a,r){if(!a)return null;const n=a(r);return n.length===1?n[0]:n}const RouterView=RouterViewImpl;function createRouter(a){const r=createRouterMatcher(a.routes,a),n=a.parseQuery||parseQuery,o=a.stringifyQuery||stringifyQuery,s=a.history,l=useCallbacks(),u=useCallbacks(),c=useCallbacks(),f=shallowRef(START_LOCATION_NORMALIZED);let d=START_LOCATION_NORMALIZED;isBrowser$1&&a.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const v=applyToParams.bind(null,K=>""+K),g=applyToParams.bind(null,encodeParam),y=applyToParams.bind(null,decode$1);function _(K,J){let X,ie;return isRouteName(K)?(X=r.getRecordMatcher(K),ie=J):ie=K,r.addRoute(ie,X)}function S(K){const J=r.getRecordMatcher(K);J&&r.removeRoute(J)}function b(){return r.getRoutes().map(K=>K.record)}function x(K){return!!r.getRecordMatcher(K)}function T(K,J){if(J=assign({},J||f.value),typeof K=="string"){const j=parseURL(n,K,J.path),Q=r.resolve({path:j.path},J),re=s.createHref(j.fullPath);return assign(j,Q,{params:y(Q.params),hash:decode$1(j.hash),redirectedFrom:void 0,href:re})}let X;if(K.path!=null)X=assign({},K,{path:parseURL(n,K.path,J.path).path});else{const j=assign({},K.params);for(const Q in j)j[Q]==null&&delete j[Q];X=assign({},K,{params:g(j)}),J.params=g(J.params)}const ie=r.resolve(X,J),te=K.hash||"";ie.params=v(y(ie.params));const W=stringifyURL(o,assign({},K,{hash:encodeHash(te),path:ie.path})),Y=s.createHref(W);return assign({fullPath:W,hash:te,query:o===stringifyQuery?normalizeQuery(K.query):K.query||{}},ie,{redirectedFrom:void 0,href:Y})}function A(K){return typeof K=="string"?parseURL(n,K,f.value.path):assign({},K)}function w(K,J){if(d!==K)return createRouterError(ErrorTypes.NAVIGATION_CANCELLED,{from:J,to:K})}function C(K){return I(K)}function E(K){return C(assign(A(K),{replace:!0}))}function P(K,J){const X=K.matched[K.matched.length-1];if(X&&X.redirect){const{redirect:ie}=X;let te=typeof ie=="function"?ie(K,J):ie;return typeof te=="string"&&(te=te.includes("?")||te.includes("#")?te=A(te):{path:te},te.params={}),assign({query:K.query,hash:K.hash,params:te.path!=null?{}:K.params},te)}}function I(K,J){const X=d=T(K),ie=f.value,te=K.state,W=K.force,Y=K.replace===!0,j=P(X,ie);if(j)return I(assign(A(j),{state:typeof j=="object"?assign({},te,j.state):te,force:W,replace:Y}),J||X);const Q=X;Q.redirectedFrom=J;let re;return!W&&isSameRouteLocation(o,ie,X)&&(re=createRouterError(ErrorTypes.NAVIGATION_DUPLICATED,{to:Q,from:ie}),H(ie,ie,!0,!1)),(re?Promise.resolve(re):O(Q,ie)).catch(ae=>isNavigationFailure(ae)?isNavigationFailure(ae,ErrorTypes.NAVIGATION_GUARD_REDIRECT)?ae:U(ae):L(ae,Q,ie)).then(ae=>{if(ae){if(isNavigationFailure(ae,ErrorTypes.NAVIGATION_GUARD_REDIRECT))return I(assign({replace:Y},A(ae.to),{state:typeof ae.to=="object"?assign({},te,ae.to.state):te,force:W}),J||Q)}else ae=B(Q,ie,!0,Y,te);return $(Q,ie,ae),ae})}function M(K,J){const X=w(K,J);return X?Promise.reject(X):Promise.resolve()}function R(K){const J=ee.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(K):K()}function O(K,J){let X;const[ie,te,W]=extractChangingRecords(K,J);X=extractComponentsGuards(ie.reverse(),"beforeRouteLeave",K,J);for(const j of ie)j.leaveGuards.forEach(Q=>{X.push(guardToPromiseFn(Q,K,J))});const Y=M.bind(null,K,J);return X.push(Y),ue(X).then(()=>{X=[];for(const j of l.list())X.push(guardToPromiseFn(j,K,J));return X.push(Y),ue(X)}).then(()=>{X=extractComponentsGuards(te,"beforeRouteUpdate",K,J);for(const j of te)j.updateGuards.forEach(Q=>{X.push(guardToPromiseFn(Q,K,J))});return X.push(Y),ue(X)}).then(()=>{X=[];for(const j of W)if(j.beforeEnter)if(isArray$2(j.beforeEnter))for(const Q of j.beforeEnter)X.push(guardToPromiseFn(Q,K,J));else X.push(guardToPromiseFn(j.beforeEnter,K,J));return X.push(Y),ue(X)}).then(()=>(K.matched.forEach(j=>j.enterCallbacks={}),X=extractComponentsGuards(W,"beforeRouteEnter",K,J,R),X.push(Y),ue(X))).then(()=>{X=[];for(const j of u.list())X.push(guardToPromiseFn(j,K,J));return X.push(Y),ue(X)}).catch(j=>isNavigationFailure(j,ErrorTypes.NAVIGATION_CANCELLED)?j:Promise.reject(j))}function $(K,J,X){c.list().forEach(ie=>R(()=>ie(K,J,X)))}function B(K,J,X,ie,te){const W=w(K,J);if(W)return W;const Y=J===START_LOCATION_NORMALIZED,j=isBrowser$1?history.state:{};X&&(ie||Y?s.replace(K.fullPath,assign({scroll:Y&&j&&j.scroll},te)):s.push(K.fullPath,te)),f.value=K,H(K,J,X,Y),U()}let F;function z(){F||(F=s.listen((K,J,X)=>{if(!ne.listening)return;const ie=T(K),te=P(ie,ne.currentRoute.value);if(te){I(assign(te,{replace:!0,force:!0}),ie).catch(noop$4);return}d=ie;const W=f.value;isBrowser$1&&saveScrollPosition(getScrollKey(W.fullPath,X.delta),computeScrollPosition()),O(ie,W).catch(Y=>isNavigationFailure(Y,ErrorTypes.NAVIGATION_ABORTED|ErrorTypes.NAVIGATION_CANCELLED)?Y:isNavigationFailure(Y,ErrorTypes.NAVIGATION_GUARD_REDIRECT)?(I(assign(A(Y.to),{force:!0}),ie).then(j=>{isNavigationFailure(j,ErrorTypes.NAVIGATION_ABORTED|ErrorTypes.NAVIGATION_DUPLICATED)&&!X.delta&&X.type===NavigationType.pop&&s.go(-1,!1)}).catch(noop$4),Promise.reject()):(X.delta&&s.go(-X.delta,!1),L(Y,ie,W))).then(Y=>{Y=Y||B(ie,W,!1),Y&&(X.delta&&!isNavigationFailure(Y,ErrorTypes.NAVIGATION_CANCELLED)?s.go(-X.delta,!1):X.type===NavigationType.pop&&isNavigationFailure(Y,ErrorTypes.NAVIGATION_ABORTED|ErrorTypes.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),$(ie,W,Y)}).catch(noop$4)}))}let G=useCallbacks(),D=useCallbacks(),V;function L(K,J,X){U(K);const ie=D.list();return ie.length?ie.forEach(te=>te(K,J,X)):console.error(K),Promise.reject(K)}function N(){return V&&f.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((K,J)=>{G.add([K,J])})}function U(K){return V||(V=!K,z(),G.list().forEach(([J,X])=>K?X(K):J()),G.reset()),K}function H(K,J,X,ie){const{scrollBehavior:te}=a;if(!isBrowser$1||!te)return Promise.resolve();const W=!X&&getSavedScrollPosition(getScrollKey(K.fullPath,0))||(ie||!X)&&history.state&&history.state.scroll||null;return nextTick().then(()=>te(K,J,W)).then(Y=>Y&&scrollToPosition(Y)).catch(Y=>L(Y,K,J))}const q=K=>s.go(K);let Z;const ee=new Set,ne={currentRoute:f,listening:!0,addRoute:_,removeRoute:S,clearRoutes:r.clearRoutes,hasRoute:x,getRoutes:b,resolve:T,options:a,push:C,replace:E,go:q,back:()=>q(-1),forward:()=>q(1),beforeEach:l.add,beforeResolve:u.add,afterEach:c.add,onError:D.add,isReady:N,install(K){K.component("RouterLink",RouterLink),K.component("RouterView",RouterView),K.config.globalProperties.$router=ne,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(f)}),isBrowser$1&&!Z&&f.value===START_LOCATION_NORMALIZED&&(Z=!0,C(s.location).catch(ie=>{}));const J={};for(const ie in START_LOCATION_NORMALIZED)Object.defineProperty(J,ie,{get:()=>f.value[ie],enumerable:!0});K.provide(routerKey,ne),K.provide(routeLocationKey,shallowReactive(J)),K.provide(routerViewLocationKey,f);const X=K.unmount;ee.add(K),K.unmount=function(){ee.delete(K),ee.size<1&&(d=START_LOCATION_NORMALIZED,F&&F(),F=null,f.value=START_LOCATION_NORMALIZED,Z=!1,V=!1),X()}}};function ue(K){return K.reduce((J,X)=>J.then(()=>R(X)),Promise.resolve())}return ne}function useRouter(){return inject(routerKey)}function useRoute$1(a){return inject(routeLocationKey)}function __awaiter(a,r,n,o){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function c(v){try{d(o.next(v))}catch(g){u(g)}}function f(v){try{d(o.throw(v))}catch(g){u(g)}}function d(v){v.done?l(v.value):s(v.value).then(c,f)}d((o=o.apply(a,r||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;const resolveFetch$3=a=>a?(...r)=>a(...r):(...r)=>fetch(...r);class FunctionsError extends Error{constructor(r,n="FunctionsError",o){super(r),this.name=n,this.context=o}}class FunctionsFetchError extends FunctionsError{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class FunctionsRelayError extends FunctionsError{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class FunctionsHttpError extends FunctionsError{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var FunctionRegion;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));class FunctionsClient{constructor(r,{headers:n={},customFetch:o,region:s=FunctionRegion.Any}={}){this.url=r,this.headers=n,this.region=s,this.fetch=resolveFetch$3(o)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return __awaiter(this,arguments,void 0,function*(n,o={}){var s;let l,u;try{const{headers:c,method:f,body:d,signal:v,timeout:g}=o;let y={},{region:_}=o;_||(_=this.region);const S=new URL(`${this.url}/${n}`);_&&_!=="any"&&(y["x-region"]=_,S.searchParams.set("forceFunctionRegion",_));let b;d&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",b=d):typeof d=="string"?(y["Content-Type"]="text/plain",b=d):typeof FormData<"u"&&d instanceof FormData?b=d:(y["Content-Type"]="application/json",b=JSON.stringify(d)):b=d;let x=v;g&&(u=new AbortController,l=setTimeout(()=>u.abort(),g),v?(x=u.signal,v.addEventListener("abort",()=>u.abort())):x=u.signal);const T=yield this.fetch(S.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),c),body:b,signal:x}).catch(E=>{throw new FunctionsFetchError(E)}),A=T.headers.get("x-relay-error");if(A&&A==="true")throw new FunctionsRelayError(T);if(!T.ok)throw new FunctionsHttpError(T);let w=((s=T.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),C;return w==="application/json"?C=yield T.json():w==="application/octet-stream"||w==="application/pdf"?C=yield T.blob():w==="text/event-stream"?C=T:w==="multipart/form-data"?C=yield T.formData():C=yield T.text(),{data:C,error:null,response:T}}catch(c){return{data:null,error:c,response:c instanceof FunctionsHttpError||c instanceof FunctionsRelayError?c.context:void 0}}finally{l&&clearTimeout(l)}})}}var PostgrestError=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}},PostgrestBuilder=class{constructor(a){var r,n;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(r=a.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=a.signal,this.isMaybeSingle=(n=a.isMaybeSingle)!==null&&n!==void 0?n:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,r){return this.headers=new Headers(this.headers),this.headers.set(a,r),this}then(a,r){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let s=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let u=null,c=null,f=null,d=l.status,v=l.statusText;if(l.ok){var g,y;if(n.method!=="HEAD"){var _;const T=await l.text();T===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((_=n.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?c=T:c=JSON.parse(T))}const b=(g=n.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),x=(y=l.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");b&&x&&x.length>1&&(f=parseInt(x[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,f=null,d=406,v="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var S;const b=await l.text();try{u=JSON.parse(b),Array.isArray(u)&&l.status===404&&(c=[],u=null,d=200,v="OK")}catch{l.status===404&&b===""?(d=204,v="No Content"):u={message:b}}if(u&&n.isMaybeSingle&&(!(u==null||(S=u.details)===null||S===void 0)&&S.includes("0 rows"))&&(u=null,d=200,v="OK"),u&&n.shouldThrowOnError)throw new PostgrestError(u)}return{error:u,data:c,count:f,status:d,statusText:v}});return this.shouldThrowOnError||(s=s.catch(l=>{var u;let c="";const f=l==null?void 0:l.cause;if(f){var d,v,g,y;const S=(d=f==null?void 0:f.message)!==null&&d!==void 0?d:"",b=(v=f==null?void 0:f.code)!==null&&v!==void 0?v:"";c=`${(g=l==null?void 0:l.name)!==null&&g!==void 0?g:"FetchError"}: ${l==null?void 0:l.message}`,c+=`

Caused by: ${(y=f==null?void 0:f.name)!==null&&y!==void 0?y:"Error"}: ${S}`,b&&(c+=` (${b})`),f!=null&&f.stack&&(c+=`
${f.stack}`)}else{var _;c=(_=l==null?void 0:l.stack)!==null&&_!==void 0?_:""}return{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:c,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(a,r)}returns(){return this}overrideTypes(){return this}},PostgrestTransformBuilder=class extends PostgrestBuilder{select(a){let r=!1;const n=(a??"*").split("").map(o=>/\s/.test(o)&&!r?"":(o==='"'&&(r=!r),o)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:r=!0,nullsFirst:n,foreignTable:o,referencedTable:s=o}={}){const l=s?`${s}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${a}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:r,referencedTable:n=r}={}){const o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${a}`),this}range(a,r,{foreignTable:n,referencedTable:o=n}={}){const s=typeof o>"u"?"offset":`${o}.offset`,l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${a}`),this.url.searchParams.set(l,`${r-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:r=!1,settings:n=!1,buffers:o=!1,wal:s=!1,format:l="text"}={}){var u;const c=[a?"analyze":null,r?"verbose":null,n?"settings":null,o?"buffers":null,s?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${f}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};const PostgrestReservedCharsRegexp=new RegExp("[,()]");var PostgrestFilterBuilder=class extends PostgrestTransformBuilder{eq(a,r){return this.url.searchParams.append(a,`eq.${r}`),this}neq(a,r){return this.url.searchParams.append(a,`neq.${r}`),this}gt(a,r){return this.url.searchParams.append(a,`gt.${r}`),this}gte(a,r){return this.url.searchParams.append(a,`gte.${r}`),this}lt(a,r){return this.url.searchParams.append(a,`lt.${r}`),this}lte(a,r){return this.url.searchParams.append(a,`lte.${r}`),this}like(a,r){return this.url.searchParams.append(a,`like.${r}`),this}likeAllOf(a,r){return this.url.searchParams.append(a,`like(all).{${r.join(",")}}`),this}likeAnyOf(a,r){return this.url.searchParams.append(a,`like(any).{${r.join(",")}}`),this}ilike(a,r){return this.url.searchParams.append(a,`ilike.${r}`),this}ilikeAllOf(a,r){return this.url.searchParams.append(a,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(a,r){return this.url.searchParams.append(a,`ilike(any).{${r.join(",")}}`),this}regexMatch(a,r){return this.url.searchParams.append(a,`match.${r}`),this}regexIMatch(a,r){return this.url.searchParams.append(a,`imatch.${r}`),this}is(a,r){return this.url.searchParams.append(a,`is.${r}`),this}isDistinct(a,r){return this.url.searchParams.append(a,`isdistinct.${r}`),this}in(a,r){const n=Array.from(new Set(r)).map(o=>typeof o=="string"&&PostgrestReservedCharsRegexp.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(a,`in.(${n})`),this}notIn(a,r){const n=Array.from(new Set(r)).map(o=>typeof o=="string"&&PostgrestReservedCharsRegexp.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(a,`not.in.(${n})`),this}contains(a,r){return typeof r=="string"?this.url.searchParams.append(a,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(a,`cs.{${r.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(r)}`),this}containedBy(a,r){return typeof r=="string"?this.url.searchParams.append(a,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(a,`cd.{${r.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(r)}`),this}rangeGt(a,r){return this.url.searchParams.append(a,`sr.${r}`),this}rangeGte(a,r){return this.url.searchParams.append(a,`nxl.${r}`),this}rangeLt(a,r){return this.url.searchParams.append(a,`sl.${r}`),this}rangeLte(a,r){return this.url.searchParams.append(a,`nxr.${r}`),this}rangeAdjacent(a,r){return this.url.searchParams.append(a,`adj.${r}`),this}overlaps(a,r){return typeof r=="string"?this.url.searchParams.append(a,`ov.${r}`):this.url.searchParams.append(a,`ov.{${r.join(",")}}`),this}textSearch(a,r,{config:n,type:o}={}){let s="";o==="plain"?s="pl":o==="phrase"?s="ph":o==="websearch"&&(s="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(a,`${s}fts${l}.${r}`),this}match(a){return Object.entries(a).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(a,r,n){return this.url.searchParams.append(a,`not.${r}.${n}`),this}or(a,{foreignTable:r,referencedTable:n=r}={}){const o=n?`${n}.or`:"or";return this.url.searchParams.append(o,`(${a})`),this}filter(a,r,n){return this.url.searchParams.append(a,`${r}.${n}`),this}},PostgrestQueryBuilder=class{constructor(a,{headers:r={},schema:n,fetch:o}){this.url=a,this.headers=new Headers(r),this.schema=n,this.fetch=o}select(a,r){const{head:n=!1,count:o}=r??{},s=n?"HEAD":"GET";let l=!1;const u=(a??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),o&&this.headers.append("Prefer",`count=${o}`),new PostgrestFilterBuilder({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:r,defaultToNull:n=!0}={}){var o;const s="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const l=a.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new PostgrestFilterBuilder({method:s,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(a,{onConflict:r,ignoreDuplicates:n=!1,count:o,defaultToNull:s=!0}={}){var l;const u="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),o&&this.headers.append("Prefer",`count=${o}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const c=a.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(c.length>0){const f=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",f.join(","))}}return new PostgrestFilterBuilder({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(a,{count:r}={}){var n;const o="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new PostgrestFilterBuilder({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:a}={}){var r;const n="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new PostgrestFilterBuilder({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}},PostgrestClient=class Pe{constructor(r,{headers:n={},schema:o,fetch:s}={}){this.url=r,this.headers=new Headers(n),this.schemaName=o,this.fetch=s}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new PostgrestQueryBuilder(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new Pe(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,n={},{head:o=!1,get:s=!1,count:l}={}){var u;let c;const f=new URL(`${this.url}/rpc/${r}`);let d;o||s?(c=o?"HEAD":"GET",Object.entries(n).filter(([g,y])=>y!==void 0).map(([g,y])=>[g,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([g,y])=>{f.searchParams.append(g,y)})):(c="POST",d=n);const v=new Headers(this.headers);return l&&v.set("Prefer",`count=${l}`),new PostgrestFilterBuilder({method:c,url:f,headers:v,schema:this.schemaName,body:d,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};class WebSocketFactory{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const o=n.node,s=parseInt(o.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let n=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(n+=`

Suggested solution: ${r.workaround}`),new Error(n)}static createWebSocket(r,n){const o=this.getWebSocketConstructor();return new o(r,n)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const version$3="2.89.0",DEFAULT_VERSION=`realtime-js/${version$3}`,VSN_1_0_0="1.0.0",VSN_2_0_0="2.0.0",DEFAULT_VSN=VSN_1_0_0,DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3,MAX_PUSH_BUFFER_SIZE=100;var SOCKET_STATES;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(a){a.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,n){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(r));let o=[r.join_ref,r.ref,r.topic,r.event,r.payload];return n(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(r){var n;return this._isArrayBuffer((n=r.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var n,o;const s=(o=(n=r.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(r){var n,o;const s=(o=(n=r.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:{},u=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(r,n,o){var s,l;const u=r.topic,c=(s=r.ref)!==null&&s!==void 0?s:"",f=(l=r.join_ref)!==null&&l!==void 0?l:"",d=r.payload.event,v=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},g=Object.keys(v).length===0?"":JSON.stringify(v);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`metadata length ${g.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+c.length+u.length+d.length+g.length,_=new ArrayBuffer(this.HEADER_LENGTH+y);let S=new DataView(_),b=0;S.setUint8(b++,this.KINDS.userBroadcastPush),S.setUint8(b++,f.length),S.setUint8(b++,c.length),S.setUint8(b++,u.length),S.setUint8(b++,d.length),S.setUint8(b++,g.length),S.setUint8(b++,n),Array.from(f,T=>S.setUint8(b++,T.charCodeAt(0))),Array.from(c,T=>S.setUint8(b++,T.charCodeAt(0))),Array.from(u,T=>S.setUint8(b++,T.charCodeAt(0))),Array.from(d,T=>S.setUint8(b++,T.charCodeAt(0))),Array.from(g,T=>S.setUint8(b++,T.charCodeAt(0)));var x=new Uint8Array(_.byteLength+o.byteLength);return x.set(new Uint8Array(_),0),x.set(new Uint8Array(o),_.byteLength),x.buffer}decode(r,n){if(this._isArrayBuffer(r)){let o=this._binaryDecode(r);return n(o)}if(typeof r=="string"){const o=JSON.parse(r),[s,l,u,c,f]=o;return n({join_ref:s,ref:l,topic:u,event:c,payload:f})}return n({})}_binaryDecode(r){const n=new DataView(r),o=n.getUint8(0),s=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,n,s)}}_decodeUserBroadcast(r,n,o){const s=n.getUint8(1),l=n.getUint8(2),u=n.getUint8(3),c=n.getUint8(4);let f=this.HEADER_LENGTH+4;const d=o.decode(r.slice(f,f+s));f=f+s;const v=o.decode(r.slice(f,f+l));f=f+l;const g=o.decode(r.slice(f,f+u));f=f+u;const y=r.slice(f,r.byteLength),_=c===this.JSON_ENCODING?JSON.parse(o.decode(y)):y,S={type:this.BROADCAST_EVENT,event:v,payload:_};return u>0&&(S.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(r){var n;return r instanceof ArrayBuffer||((n=r==null?void 0:r.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(r,n){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([o])=>n.includes(o)))}}class Timer{constructor(r,n){this.callback=r,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(a,r,n={})=>{var o;const s=(o=n.skipTypes)!==null&&o!==void 0?o:[];return r?Object.keys(r).reduce((l,u)=>(l[u]=convertColumn(u,a,r,s),l),{}):{}},convertColumn=(a,r,n,o)=>{const s=r.find(c=>c.name===a),l=s==null?void 0:s.type,u=n[a];return l&&!o.includes(l)?convertCell(l,u):noop$3(u)},convertCell=(a,r)=>{if(a.charAt(0)==="_"){const n=a.slice(1,a.length);return toArray$2(r,n)}switch(a){case PostgresTypes.bool:return toBoolean(r);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(r);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(r);case PostgresTypes.timestamp:return toTimestampString(r);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$3(r);default:return noop$3(r)}},noop$3=a=>a,toBoolean=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},toNumber=a=>{if(typeof a=="string"){const r=parseFloat(a);if(!Number.isNaN(r))return r}return a},toJson=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch{return a}return a},toArray$2=(a,r)=>{if(typeof a!="string")return a;const n=a.length-1,o=a[n];if(a[0]==="{"&&o==="}"){let l;const u=a.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(c=>convertCell(r,c))}return a},toTimestampString=a=>typeof a=="string"?a.replace(" ","T"):a,httpEndpointURL=a=>{const r=new URL(a);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class Push{constructor(r,n,o={},s=DEFAULT_TIMEOUT){this.channel=r,this.event=n,this.payload=o,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,n){var o;return this._hasReceived(r)&&n((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:r,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:n}){this.recHooks.filter(o=>o.status===r).forEach(o=>o.callback(n))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(r,n){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},s=>{const{onJoin:l,onLeave:u,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,s,l,u),this.pendingDiffs.forEach(f=>{this.state=RealtimePresence.syncDiff(this.state,f,l,u)}),this.pendingDiffs=[],c()}),this.channel._on(o.diff,{},s=>{const{onJoin:l,onLeave:u,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=RealtimePresence.syncDiff(this.state,s,l,u),c())}),this.onJoin((s,l,u)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:l,newPresences:u})}),this.onLeave((s,l,u)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,n,o,s){const l=this.cloneDeep(r),u=this.transformState(n),c={},f={};return this.map(l,(d,v)=>{u[d]||(f[d]=v)}),this.map(u,(d,v)=>{const g=l[d];if(g){const y=v.map(x=>x.presence_ref),_=g.map(x=>x.presence_ref),S=v.filter(x=>_.indexOf(x.presence_ref)<0),b=g.filter(x=>y.indexOf(x.presence_ref)<0);S.length>0&&(c[d]=S),b.length>0&&(f[d]=b)}else c[d]=v}),this.syncDiff(l,{joins:c,leaves:f},o,s)}static syncDiff(r,n,o,s){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return o||(o=()=>{}),s||(s=()=>{}),this.map(l,(c,f)=>{var d;const v=(d=r[c])!==null&&d!==void 0?d:[];if(r[c]=this.cloneDeep(f),v.length>0){const g=r[c].map(_=>_.presence_ref),y=v.filter(_=>g.indexOf(_.presence_ref)<0);r[c].unshift(...y)}o(c,v,f)}),this.map(u,(c,f)=>{let d=r[c];if(!d)return;const v=f.map(g=>g.presence_ref);d=d.filter(g=>v.indexOf(g.presence_ref)<0),r[c]=d,s(c,d,f),d.length===0&&delete r[c]}),r}static map(r,n){return Object.getOwnPropertyNames(r).map(o=>n(o,r[o]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((n,o)=>{const s=r[o];return"metas"in s?n[o]=s.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[o]=s,n},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(r,n={config:{}},o){var s,l;if(this.topic=r,this.params=n,this.socket=o,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(u,c)=>{this._trigger(this._replyEventName(c),u)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,n=this.timeout){var o,s,l;if(this.socket.isConnected()||this.socket.connect(),this.state==CHANNEL_STATES.closed){const{config:{broadcast:u,presence:c,private:f}}=this.params,d=(s=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(_=>_.filter))!==null&&s!==void 0?s:[],v=!!this.bindings[REALTIME_LISTEN_TYPES.PRESENCE]&&this.bindings[REALTIME_LISTEN_TYPES.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,g={},y={broadcast:u,presence:Object.assign(Object.assign({},c),{enabled:v}),postgres_changes:d,private:f};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(_=>r==null?void 0:r(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,_)),this._onClose(()=>r==null?void 0:r(REALTIME_SUBSCRIBE_STATES.CLOSED)),this.updateJoinPayload(Object.assign({config:y},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:_})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),_===void 0){r==null||r(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,x=(S=b==null?void 0:b.length)!==null&&S!==void 0?S:0,T=[];for(let A=0;A<x;A++){const w=b[A],{filter:{event:C,schema:E,table:P,filter:I}}=w,M=_&&_[A];if(M&&M.event===C&&RealtimeChannel.isFilterValueEqual(M.schema,E)&&RealtimeChannel.isFilterValueEqual(M.table,P)&&RealtimeChannel.isFilterValueEqual(M.filter,I))T.push(Object.assign(Object.assign({},w),{id:M.id}));else{this.unsubscribe(),this.state=CHANNEL_STATES.errored,r==null||r(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,r&&r(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",_=>{this.state=CHANNEL_STATES.errored,r==null||r(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{r==null||r(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,n={}){return await this.send({type:"presence",event:"track",payload:r},n.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,n,o){return this.state===CHANNEL_STATES.joined&&r===REALTIME_LISTEN_TYPES.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,n,o)}async httpSend(r,n,o={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:n,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(s=o.timeout)!==null&&s!==void 0?s:this.timeout);if(c.status===202)return{success:!0};let f=c.statusText;try{const d=await c.json();f=d.error||d.message||f}catch{}return Promise.reject(new Error(f))}async send(r,n={}){var o,s;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=r,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,c,f;const d=this._push(r.type,r,n.timeout||this.timeout);r.type==="broadcast"&&!(!((f=(c=(u=this.params)===null||u===void 0?void 0:u.config)===null||c===void 0?void 0:c.broadcast)===null||f===void 0)&&f.ack)&&l("ok"),d.receive("ok",()=>l("ok")),d.receive("error",()=>l("error")),d.receive("timeout",()=>l("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=CHANNEL_STATES.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(s=>{o=new Push(this,CHANNEL_EVENTS.leave,{},r),o.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=CHANNEL_STATES.closed,this.bindings={}}async _fetchWithTimeout(r,n,o){const s=new AbortController,l=setTimeout(()=>s.abort(),o),u=await this.socket.fetch(r,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(l),u}_push(r,n,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Push(this,r,n,o);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>MAX_PUSH_BUFFER_SIZE){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(r,n,o){return n}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,n,o){var s,l;const u=r.toLocaleLowerCase(),{close:c,error:f,leave:d,join:v}=CHANNEL_EVENTS;if(o&&[c,f,d,v].indexOf(u)>=0&&o!==this._joinRef())return;let y=this._onMessage(u,n,o);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(_=>{var S,b,x;return((S=_.filter)===null||S===void 0?void 0:S.event)==="*"||((x=(b=_.filter)===null||b===void 0?void 0:b.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===u}).map(_=>_.callback(y,o)):(l=this.bindings[u])===null||l===void 0||l.filter(_=>{var S,b,x,T,A,w;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in _){const C=_.id,E=(S=_.filter)===null||S===void 0?void 0:S.event;return C&&((b=n.ids)===null||b===void 0?void 0:b.includes(C))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const C=(A=(T=_==null?void 0:_.filter)===null||T===void 0?void 0:T.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return C==="*"||C===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===u}).map(_=>{if(typeof y=="object"&&"ids"in y){const S=y.data,{schema:b,table:x,commit_timestamp:T,type:A,errors:w}=S;y=Object.assign(Object.assign({},{schema:b,table:x,commit_timestamp:T,eventType:A,new:{},old:{},errors:w}),this._getPayloadRecords(S))}_.callback(y,o)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,n,o){const s=r.toLocaleLowerCase(),l={type:s,filter:n,callback:o};return this.bindings[s]?this.bindings[s].push(l):this.bindings[s]=[l],this}_off(r,n){const o=r.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(s=>{var l;return!(((l=s.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===o&&RealtimeChannel.isEqual(s.filter,n))})),this}static isEqual(r,n){if(Object.keys(r).length!==Object.keys(n).length)return!1;for(const o in r)if(r[o]!==n[o])return!1;return!0}static isFilterValueEqual(r,n){return(r??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(CHANNEL_EVENTS.close,{},r)}_onError(r){this._on(CHANNEL_EVENTS.error,{},n=>r(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const n={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(n.new=convertChangeData(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(n.old=convertChangeData(r.columns,r.old_record)),n}}const noop$2=()=>{},CONNECTION_TIMEOUTS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},RECONNECT_INTERVALS=[1e3,2e3,5e3,1e4],DEFAULT_RECONNECT_FALLBACK=1e4,WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(r,n){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=DEFAULT_TIMEOUT,this.transport=null,this.heartbeatIntervalMs=CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=noop$2,this.ref=0,this.reconnectTimer=null,this.vsn=DEFAULT_VSN,this.logger=noop$2,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...l)=>s(...l):(...l)=>fetch(...l),!(!((o=n==null?void 0:n.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${r}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(r),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=WebSocketFactory.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const n=r.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const n=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const r=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,n,o){this.logger(r,n,o)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,n={config:{}}){const o=`realtime:${r}`,s=this.getChannels().find(l=>l.topic===o);if(s)return s;{const l=new RealtimeChannel(`realtime:${r}`,n,this);return this.channels.push(l),l}}push(r){const{topic:n,event:o,payload:s,ref:l}=r,u=()=>{this.encode(r,c=>{var f;(f=this.conn)===null||f===void 0||f.send(c)})};this.log("push",`${n} ${o} (${l})`,s),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(WS_CLOSE_NORMAL,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},CONNECTION_TIMEOUTS.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let n=this.channels.find(o=>o.topic===r&&(o._isJoined()||o._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${r}"`),n.unsubscribe())}_remove(r){this.channels=this.channels.filter(n=>n.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:s,payload:l,ref:u}=n,c=u?`(${u})`:"",f=l.status||"";this.log("receive",`${f} ${o} ${s} ${c}`.trim(),l),this.channels.filter(d=>d._isMember(o)).forEach(d=>d._trigger(s,l,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(r){var n;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===SOCKET_STATES.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===SOCKET_STATES.open||this.conn.readyState===SOCKET_STATES.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var n;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(CHANNEL_EVENTS.error))}_appendParams(r,n){if(Object.keys(n).length===0)return r;const o=r.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${r}${o}${s}`}_workerObjectUrl(r){let n;if(r)n=r;else{const o=new Blob([WORKER_SCRIPT],{type:"application/javascript"});n=URL.createObjectURL(o)}return n}_setConnectionState(r,n=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(r=null){let n,o=!1;if(r)n=r,o=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const l={access_token:n,version:DEFAULT_VERSION};n&&s.updateJoinPayload(l),s.joinedOnce&&s._isJoined()&&s._push(CHANNEL_EVENTS.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${r}`,n)})}_triggerStateCallbacks(r,n){try{this.stateChangeCallbacks[r].forEach(o=>{try{o(n)}catch(s){this.log("error",`error in ${r} callback`,s)}})}catch(o){this.log("error",`error triggering ${r} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Timer(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},CONNECTION_TIMEOUTS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var n,o,s,l,u,c,f,d,v,g,y,_;switch(this.transport=(n=r==null?void 0:r.transport)!==null&&n!==void 0?n:null,this.timeout=(o=r==null?void 0:r.timeout)!==null&&o!==void 0?o:DEFAULT_TIMEOUT,this.heartbeatIntervalMs=(s=r==null?void 0:r.heartbeatIntervalMs)!==null&&s!==void 0?s:CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.worker=(l=r==null?void 0:r.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=r==null?void 0:r.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(c=r==null?void 0:r.heartbeatCallback)!==null&&c!==void 0?c:noop$2,this.vsn=(f=r==null?void 0:r.vsn)!==null&&f!==void 0?f:DEFAULT_VSN,r!=null&&r.params&&(this.params=r.params),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=r==null?void 0:r.reconnectAfterMs)!==null&&d!==void 0?d:S=>RECONNECT_INTERVALS[S-1]||DEFAULT_RECONNECT_FALLBACK,this.vsn){case VSN_1_0_0:this.encode=(v=r==null?void 0:r.encode)!==null&&v!==void 0?v:(S,b)=>b(JSON.stringify(S)),this.decode=(g=r==null?void 0:r.decode)!==null&&g!==void 0?g:(S,b)=>b(JSON.parse(S));break;case VSN_2_0_0:this.encode=(y=r==null?void 0:r.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(_=r==null?void 0:r.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r==null?void 0:r.workerUrl}}}var IcebergError=class extends Error{constructor(a,r){var n;super(a),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&((n=r.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function buildUrl(a,r,n){const o=new URL(r,a);if(n)for(const[s,l]of Object.entries(n))l!==void 0&&o.searchParams.set(s,l);return o.toString()}async function buildAuthHeaders(a){return!a||a.type==="none"?{}:a.type==="bearer"?{Authorization:`Bearer ${a.token}`}:a.type==="header"?{[a.name]:a.value}:a.type==="custom"?await a.getHeaders():{}}function createFetchClient(a){const r=a.fetchImpl??globalThis.fetch;return{async request({method:n,path:o,query:s,body:l,headers:u}){const c=buildUrl(a.baseUrl,o,s),f=await buildAuthHeaders(a.auth),d=await r(c,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...f,...u},body:l?JSON.stringify(l):void 0}),v=await d.text(),g=(d.headers.get("content-type")||"").includes("application/json"),y=g&&v?JSON.parse(v):v;if(!d.ok){const _=g?y:void 0,S=_==null?void 0:_.error;throw new IcebergError((S==null?void 0:S.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:S==null?void 0:S.type,icebergCode:S==null?void 0:S.code,details:_})}return{status:d.status,headers:d.headers,data:y}}}}function namespaceToPath(a){return a.join("")}var NamespaceOperations=class{constructor(a,r=""){this.client=a,this.prefix=r}async listNamespaces(a){const r=a?{parent:namespaceToPath(a.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(a,r){const n={namespace:a.namespace,properties:r==null?void 0:r.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${namespaceToPath(a.namespace)}`})}async loadNamespaceMetadata(a){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${namespaceToPath(a.namespace)}`})).data.properties}}async namespaceExists(a){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${namespaceToPath(a.namespace)}`}),!0}catch(r){if(r instanceof IcebergError&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(a,r){try{return await this.createNamespace(a,r)}catch(n){if(n instanceof IcebergError&&n.status===409)return;throw n}}};function namespaceToPath2(a){return a.join("")}var TableOperations=class{constructor(a,r="",n){this.client=a,this.prefix=r,this.accessDelegation=n}async listTables(a){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${namespaceToPath2(a.namespace)}/tables`})).data.identifiers}async createTable(a,r){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${namespaceToPath2(a.namespace)}/tables`,body:r,headers:n})).data.metadata}async updateTable(a,r){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${namespaceToPath2(a.namespace)}/tables/${a.name}`,body:r});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(a,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${namespaceToPath2(a.namespace)}/tables/${a.name}`,query:{purgeRequested:String((r==null?void 0:r.purge)??!1)}})}async loadTable(a){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${namespaceToPath2(a.namespace)}/tables/${a.name}`,headers:r})).data.metadata}async tableExists(a){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${namespaceToPath2(a.namespace)}/tables/${a.name}`,headers:r}),!0}catch(n){if(n instanceof IcebergError&&n.status===404)return!1;throw n}}async createTableIfNotExists(a,r){try{return await this.createTable(a,r)}catch(n){if(n instanceof IcebergError&&n.status===409)return await this.loadTable({namespace:a.namespace,name:r.name});throw n}}},IcebergRestCatalog=class{constructor(a){var o;let r="v1";a.catalogName&&(r+=`/${a.catalogName}`);const n=a.baseUrl.endsWith("/")?a.baseUrl:`${a.baseUrl}/`;this.client=createFetchClient({baseUrl:n,auth:a.auth,fetchImpl:a.fetch}),this.accessDelegation=(o=a.accessDelegation)==null?void 0:o.join(","),this.namespaceOps=new NamespaceOperations(this.client,r),this.tableOps=new TableOperations(this.client,r,this.accessDelegation)}async listNamespaces(a){return this.namespaceOps.listNamespaces(a)}async createNamespace(a,r){return this.namespaceOps.createNamespace(a,r)}async dropNamespace(a){await this.namespaceOps.dropNamespace(a)}async loadNamespaceMetadata(a){return this.namespaceOps.loadNamespaceMetadata(a)}async listTables(a){return this.tableOps.listTables(a)}async createTable(a,r){return this.tableOps.createTable(a,r)}async updateTable(a,r){return this.tableOps.updateTable(a,r)}async dropTable(a,r){await this.tableOps.dropTable(a,r)}async loadTable(a){return this.tableOps.loadTable(a)}async namespaceExists(a){return this.namespaceOps.namespaceExists(a)}async tableExists(a){return this.tableOps.tableExists(a)}async createNamespaceIfNotExists(a,r){return this.namespaceOps.createNamespaceIfNotExists(a,r)}async createTableIfNotExists(a,r){return this.tableOps.createTableIfNotExists(a,r)}},StorageError=class extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}};function isStorageError(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}var StorageApiError=class extends StorageError{constructor(a,r,n){super(a),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},StorageUnknownError=class extends StorageError{constructor(a,r){super(a),this.name="StorageUnknownError",this.originalError=r}};const resolveFetch$1$1=a=>a?(...r)=>a(...r):(...r)=>fetch(...r),resolveResponse$1=()=>Response,recursiveToCamel=a=>{if(Array.isArray(a))return a.map(n=>recursiveToCamel(n));if(typeof a=="function"||a!==Object(a))return a;const r={};return Object.entries(a).forEach(([n,o])=>{const s=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));r[s]=recursiveToCamel(o)}),r},isPlainObject$1=a=>{if(typeof a!="object"||a===null)return!1;const r=Object.getPrototypeOf(a);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},isValidBucketName=a=>!a||typeof a!="string"||a.length===0||a.length>100||a.trim()!==a||a.includes("/")||a.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(a);function _typeof$1(a){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_typeof$1(a)}function toPrimitive$1(a,r){if(_typeof$1(a)!="object"||!a)return a;var n=a[Symbol.toPrimitive];if(n!==void 0){var o=n.call(a,r);if(_typeof$1(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function toPropertyKey$1(a){var r=toPrimitive$1(a,"string");return _typeof$1(r)=="symbol"?r:r+""}function _defineProperty$2(a,r,n){return(r=toPropertyKey$1(r))in a?Object.defineProperty(a,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[r]=n,a}function ownKeys$2(a,r){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);r&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),n.push.apply(n,o)}return n}function _objectSpread2$2(a){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ownKeys$2(Object(n),!0).forEach(function(o){_defineProperty$2(a,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(n,o))})}return a}const _getErrorMessage$1=a=>{var r;return a.msg||a.message||a.error_description||(typeof a.error=="string"?a.error:(r=a.error)===null||r===void 0?void 0:r.message)||JSON.stringify(a)},handleError$1=async(a,r,n)=>{a instanceof await resolveResponse$1()&&!(n!=null&&n.noResolveJson)?a.json().then(o=>{const s=a.status||500,l=(o==null?void 0:o.statusCode)||s+"";r(new StorageApiError(_getErrorMessage$1(o),s,l))}).catch(o=>{r(new StorageUnknownError(_getErrorMessage$1(o),o))}):r(new StorageUnknownError(_getErrorMessage$1(a),a))},_getRequestParams$1=(a,r,n,o)=>{const s={method:a,headers:(r==null?void 0:r.headers)||{}};return a==="GET"||!o?s:(isPlainObject$1(o)?(s.headers=_objectSpread2$2({"Content-Type":"application/json"},r==null?void 0:r.headers),s.body=JSON.stringify(o)):s.body=o,r!=null&&r.duplex&&(s.duplex=r.duplex),_objectSpread2$2(_objectSpread2$2({},s),n))};async function _handleRequest$1(a,r,n,o,s,l){return new Promise((u,c)=>{a(n,_getRequestParams$1(r,o,s,l)).then(f=>{if(!f.ok)throw f;return o!=null&&o.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>handleError$1(f,c,o))})}async function get$2(a,r,n,o){return _handleRequest$1(a,"GET",r,n,o)}async function post$1(a,r,n,o,s){return _handleRequest$1(a,"POST",r,o,s,n)}async function put(a,r,n,o,s){return _handleRequest$1(a,"PUT",r,o,s,n)}async function head(a,r,n,o){return _handleRequest$1(a,"HEAD",r,_objectSpread2$2(_objectSpread2$2({},n),{},{noResolveJson:!0}),o)}async function remove(a,r,n,o,s){return _handleRequest$1(a,"DELETE",r,o,s,n)}var StreamDownloadBuilder=class{constructor(a,r){this.downloadFn=a,this.shouldThrowOnError=r}then(a,r){return this.execute().then(a,r)}async execute(){var a=this;try{return{data:(await a.downloadFn()).body,error:null}}catch(r){if(a.shouldThrowOnError)throw r;if(isStorageError(r))return{data:null,error:r};throw r}}};let _Symbol$toStringTag;_Symbol$toStringTag=Symbol.toStringTag;var BlobDownloadBuilder=class{constructor(a,r){this.downloadFn=a,this.shouldThrowOnError=r,this[_Symbol$toStringTag]="BlobDownloadBuilder",this.promise=null}asStream(){return new StreamDownloadBuilder(this.downloadFn,this.shouldThrowOnError)}then(a,r){return this.getPromise().then(a,r)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var a=this;try{return{data:await(await a.downloadFn()).blob(),error:null}}catch(r){if(a.shouldThrowOnError)throw r;if(isStorageError(r))return{data:null,error:r};throw r}}};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var StorageFileApi=class{constructor(a,r={},n,o){this.shouldThrowOnError=!1,this.url=a,this.headers=r,this.bucketId=n,this.fetch=resolveFetch$1$1(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(a,r,n,o){var s=this;try{let l;const u=_objectSpread2$2(_objectSpread2$2({},DEFAULT_FILE_OPTIONS),o);let c=_objectSpread2$2(_objectSpread2$2({},s.headers),a==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),f&&l.append("metadata",s.encodeMetadata(f)),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),f&&!l.has("metadata")&&l.append("metadata",s.encodeMetadata(f))):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType,f&&(c["x-metadata"]=s.toBase64(s.encodeMetadata(f))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),o!=null&&o.headers&&(c=_objectSpread2$2(_objectSpread2$2({},c),o.headers));const d=s._removeEmptyFolders(r),v=s._getFinalPath(d),g=await(a=="PUT"?put:post$1)(s.fetch,`${s.url}/object/${v}`,l,_objectSpread2$2({headers:c},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:d,id:g.Id,fullPath:g.Key},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(isStorageError(l))return{data:null,error:l};throw l}}async upload(a,r,n){return this.uploadOrUpdate("POST",a,r,n)}async uploadToSignedUrl(a,r,n,o){var s=this;const l=s._removeEmptyFolders(a),u=s._getFinalPath(l),c=new URL(s.url+`/object/upload/sign/${u}`);c.searchParams.set("token",r);try{let f;const d=_objectSpread2$2({upsert:DEFAULT_FILE_OPTIONS.upsert},o),v=_objectSpread2$2(_objectSpread2$2({},s.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&n instanceof Blob?(f=new FormData,f.append("cacheControl",d.cacheControl),f.append("",n)):typeof FormData<"u"&&n instanceof FormData?(f=n,f.append("cacheControl",d.cacheControl)):(f=n,v["cache-control"]=`max-age=${d.cacheControl}`,v["content-type"]=d.contentType),{data:{path:l,fullPath:(await put(s.fetch,c.toString(),f,{headers:v})).Key},error:null}}catch(f){if(s.shouldThrowOnError)throw f;if(isStorageError(f))return{data:null,error:f};throw f}}async createSignedUploadUrl(a,r){var n=this;try{let o=n._getFinalPath(a);const s=_objectSpread2$2({},n.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const l=await post$1(n.fetch,`${n.url}/object/upload/sign/${o}`,{},{headers:s}),u=new URL(n.url+l.url),c=u.searchParams.get("token");if(!c)throw new StorageError("No token returned by API");return{data:{signedUrl:u.toString(),path:a,token:c},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}}async update(a,r,n){return this.uploadOrUpdate("PUT",a,r,n)}async move(a,r,n){var o=this;try{return{data:await post$1(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:a,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:o.headers}),error:null}}catch(s){if(o.shouldThrowOnError)throw s;if(isStorageError(s))return{data:null,error:s};throw s}}async copy(a,r,n){var o=this;try{return{data:{path:(await post$1(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:a,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:o.headers})).Key},error:null}}catch(s){if(o.shouldThrowOnError)throw s;if(isStorageError(s))return{data:null,error:s};throw s}}async createSignedUrl(a,r,n){var o=this;try{let s=o._getFinalPath(a),l=await post$1(o.fetch,`${o.url}/object/sign/${s}`,_objectSpread2$2({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:o.headers});const u=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return l={signedUrl:encodeURI(`${o.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(s){if(o.shouldThrowOnError)throw s;if(isStorageError(s))return{data:null,error:s};throw s}}async createSignedUrls(a,r,n){var o=this;try{const s=await post$1(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:r,paths:a},{headers:o.headers}),l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(u=>_objectSpread2$2(_objectSpread2$2({},u),{},{signedUrl:u.signedURL?encodeURI(`${o.url}${u.signedURL}${l}`):null})),error:null}}catch(s){if(o.shouldThrowOnError)throw s;if(isStorageError(s))return{data:null,error:s};throw s}}download(a,r){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),s=o?`?${o}`:"",l=this._getFinalPath(a),u=()=>get$2(this.fetch,`${this.url}/${n}/${l}${s}`,{headers:this.headers,noResolveJson:!0});return new BlobDownloadBuilder(u,this.shouldThrowOnError)}async info(a){var r=this;const n=r._getFinalPath(a);try{return{data:recursiveToCamel(await get$2(r.fetch,`${r.url}/object/info/${n}`,{headers:r.headers})),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}}async exists(a){var r=this;const n=r._getFinalPath(a);try{return await head(r.fetch,`${r.url}/object/${n}`,{headers:r.headers}),{data:!0,error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(isStorageError(o)&&o instanceof StorageUnknownError){const s=o.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:o}}throw o}}getPublicUrl(a,r){const n=this._getFinalPath(a),o=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&o.push(s);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});u!==""&&o.push(u);let c=o.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${c}`)}}}async remove(a){var r=this;try{return{data:await remove(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:a},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageError(n))return{data:null,error:n};throw n}}async list(a,r,n){var o=this;try{const s=_objectSpread2$2(_objectSpread2$2(_objectSpread2$2({},DEFAULT_SEARCH_OPTIONS),r),{},{prefix:a||""});return{data:await post$1(o.fetch,`${o.url}/object/list/${o.bucketId}`,s,{headers:o.headers},n),error:null}}catch(s){if(o.shouldThrowOnError)throw s;if(isStorageError(s))return{data:null,error:s};throw s}}async listV2(a,r){var n=this;try{const o=_objectSpread2$2({},a);return{data:await post$1(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,o,{headers:n.headers},r),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const r=[];return a.width&&r.push(`width=${a.width}`),a.height&&r.push(`height=${a.height}`),a.resize&&r.push(`resize=${a.resize}`),a.format&&r.push(`format=${a.format}`),a.quality&&r.push(`quality=${a.quality}`),r.join("&")}};const version$2="2.89.0",DEFAULT_HEADERS$1$1={"X-Client-Info":`storage-js/${version$2}`};var StorageBucketApi=class{constructor(a,r={},n,o){this.shouldThrowOnError=!1;const s=new URL(a);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=_objectSpread2$2(_objectSpread2$2({},DEFAULT_HEADERS$1$1),r),this.fetch=resolveFetch$1$1(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(a){var r=this;try{const n=r.listBucketOptionsToQueryString(a);return{data:await get$2(r.fetch,`${r.url}/bucket${n}`,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageError(n))return{data:null,error:n};throw n}}async getBucket(a){var r=this;try{return{data:await get$2(r.fetch,`${r.url}/bucket/${a}`,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageError(n))return{data:null,error:n};throw n}}async createBucket(a,r={public:!1}){var n=this;try{return{data:await post$1(n.fetch,`${n.url}/bucket`,{id:a,name:a,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}}async updateBucket(a,r){var n=this;try{return{data:await put(n.fetch,`${n.url}/bucket/${a}`,{id:a,name:a,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}}async emptyBucket(a){var r=this;try{return{data:await post$1(r.fetch,`${r.url}/bucket/${a}/empty`,{},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageError(n))return{data:null,error:n};throw n}}async deleteBucket(a){var r=this;try{return{data:await remove(r.fetch,`${r.url}/bucket/${a}`,{},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageError(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(a){const r={};return a&&("limit"in a&&(r.limit=String(a.limit)),"offset"in a&&(r.offset=String(a.offset)),a.search&&(r.search=a.search),a.sortColumn&&(r.sortColumn=a.sortColumn),a.sortOrder&&(r.sortOrder=a.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},StorageAnalyticsClient=class{constructor(a,r={},n){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=_objectSpread2$2(_objectSpread2$2({},DEFAULT_HEADERS$1$1),r),this.fetch=resolveFetch$1$1(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){var r=this;try{return{data:await post$1(r.fetch,`${r.url}/bucket`,{name:a},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageError(n))return{data:null,error:n};throw n}}async listBuckets(a){var r=this;try{const n=new URLSearchParams;(a==null?void 0:a.limit)!==void 0&&n.set("limit",a.limit.toString()),(a==null?void 0:a.offset)!==void 0&&n.set("offset",a.offset.toString()),a!=null&&a.sortColumn&&n.set("sortColumn",a.sortColumn),a!=null&&a.sortOrder&&n.set("sortOrder",a.sortOrder),a!=null&&a.search&&n.set("search",a.search);const o=n.toString(),s=o?`${r.url}/bucket?${o}`:`${r.url}/bucket`;return{data:await get$2(r.fetch,s,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageError(n))return{data:null,error:n};throw n}}async deleteBucket(a){var r=this;try{return{data:await remove(r.fetch,`${r.url}/bucket/${a}`,{},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageError(n))return{data:null,error:n};throw n}}from(a){var r=this;if(!isValidBucketName(a))throw new StorageError("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new IcebergRestCatalog({baseUrl:this.url,catalogName:a,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(n,{get(s,l){const u=s[l];return typeof u!="function"?u:async(...c)=>{try{return{data:await u.apply(s,c),error:null}}catch(f){if(o)throw f;return{data:null,error:f}}}}})}};const DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`,"Content-Type":"application/json"};var StorageVectorsError=class extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function isStorageVectorsError(a){return typeof a=="object"&&a!==null&&"__isStorageVectorsError"in a}var StorageVectorsApiError=class extends StorageVectorsError{constructor(a,r,n){super(a),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},StorageVectorsUnknownError=class extends StorageVectorsError{constructor(a,r){super(a),this.name="StorageVectorsUnknownError",this.originalError=r}};const resolveFetch$2=a=>a?(...r)=>a(...r):(...r)=>fetch(...r),isPlainObject=a=>{if(typeof a!="object"||a===null)return!1;const r=Object.getPrototypeOf(a);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},_getErrorMessage$2=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),handleError$2=async(a,r,n)=>{if(a&&typeof a=="object"&&"status"in a&&"ok"in a&&typeof a.status=="number"&&!(n!=null&&n.noResolveJson)){const o=a.status||500,s=a;if(typeof s.json=="function")s.json().then(l=>{const u=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||o+"";r(new StorageVectorsApiError(_getErrorMessage$2(l),o,u))}).catch(()=>{const l=o+"";r(new StorageVectorsApiError(s.statusText||`HTTP ${o} error`,o,l))});else{const l=o+"";r(new StorageVectorsApiError(s.statusText||`HTTP ${o} error`,o,l))}}else r(new StorageVectorsUnknownError(_getErrorMessage$2(a),a))},_getRequestParams$2=(a,r,n,o)=>{const s={method:a,headers:(r==null?void 0:r.headers)||{}};return o?(isPlainObject(o)?(s.headers=_objectSpread2$2({"Content-Type":"application/json"},r==null?void 0:r.headers),s.body=JSON.stringify(o)):s.body=o,_objectSpread2$2(_objectSpread2$2({},s),n)):s};async function _handleRequest$2(a,r,n,o,s,l){return new Promise((u,c)=>{a(n,_getRequestParams$2(r,o,s,l)).then(f=>{if(!f.ok)throw f;if(o!=null&&o.noResolveJson)return f;const d=f.headers.get("content-type");return!d||!d.includes("application/json")?{}:f.json()}).then(f=>u(f)).catch(f=>handleError$2(f,c,o))})}async function post(a,r,n,o,s){return _handleRequest$2(a,"POST",r,o,s,n)}var VectorIndexApi=class{constructor(a,r={},n){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=_objectSpread2$2(_objectSpread2$2({},DEFAULT_HEADERS$2),r),this.fetch=resolveFetch$2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(a){var r=this;try{return{data:await post(r.fetch,`${r.url}/CreateIndex`,a,{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageVectorsError(n))return{data:null,error:n};throw n}}async getIndex(a,r){var n=this;try{return{data:await post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:a,indexName:r},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(isStorageVectorsError(o))return{data:null,error:o};throw o}}async listIndexes(a){var r=this;try{return{data:await post(r.fetch,`${r.url}/ListIndexes`,a,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageVectorsError(n))return{data:null,error:n};throw n}}async deleteIndex(a,r){var n=this;try{return{data:await post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:a,indexName:r},{headers:n.headers})||{},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(isStorageVectorsError(o))return{data:null,error:o};throw o}}},VectorDataApi=class{constructor(a,r={},n){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=_objectSpread2$2(_objectSpread2$2({},DEFAULT_HEADERS$2),r),this.fetch=resolveFetch$2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(a){var r=this;try{if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await post(r.fetch,`${r.url}/PutVectors`,a,{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageVectorsError(n))return{data:null,error:n};throw n}}async getVectors(a){var r=this;try{return{data:await post(r.fetch,`${r.url}/GetVectors`,a,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageVectorsError(n))return{data:null,error:n};throw n}}async listVectors(a){var r=this;try{if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:await post(r.fetch,`${r.url}/ListVectors`,a,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageVectorsError(n))return{data:null,error:n};throw n}}async queryVectors(a){var r=this;try{return{data:await post(r.fetch,`${r.url}/QueryVectors`,a,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageVectorsError(n))return{data:null,error:n};throw n}}async deleteVectors(a){var r=this;try{if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await post(r.fetch,`${r.url}/DeleteVectors`,a,{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageVectorsError(n))return{data:null,error:n};throw n}}},VectorBucketApi=class{constructor(a,r={},n){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=_objectSpread2$2(_objectSpread2$2({},DEFAULT_HEADERS$2),r),this.fetch=resolveFetch$2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){var r=this;try{return{data:await post(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageVectorsError(n))return{data:null,error:n};throw n}}async getBucket(a){var r=this;try{return{data:await post(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:a},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageVectorsError(n))return{data:null,error:n};throw n}}async listBuckets(a={}){var r=this;try{return{data:await post(r.fetch,`${r.url}/ListVectorBuckets`,a,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageVectorsError(n))return{data:null,error:n};throw n}}async deleteBucket(a){var r=this;try{return{data:await post(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(isStorageVectorsError(n))return{data:null,error:n};throw n}}},StorageVectorsClient=class extends VectorBucketApi{constructor(a,r={}){super(a,r.headers||{},r.fetch)}from(a){return new VectorBucketScope(this.url,this.headers,a,this.fetch)}async createBucket(a){var r=()=>super.createBucket,n=this;return r().call(n,a)}async getBucket(a){var r=()=>super.getBucket,n=this;return r().call(n,a)}async listBuckets(a={}){var r=()=>super.listBuckets,n=this;return r().call(n,a)}async deleteBucket(a){var r=()=>super.deleteBucket,n=this;return r().call(n,a)}},VectorBucketScope=class extends VectorIndexApi{constructor(a,r,n,o){super(a,r,o),this.vectorBucketName=n}async createIndex(a){var r=()=>super.createIndex,n=this;return r().call(n,_objectSpread2$2(_objectSpread2$2({},a),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(a={}){var r=()=>super.listIndexes,n=this;return r().call(n,_objectSpread2$2(_objectSpread2$2({},a),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(a){var r=()=>super.getIndex,n=this;return r().call(n,n.vectorBucketName,a)}async deleteIndex(a){var r=()=>super.deleteIndex,n=this;return r().call(n,n.vectorBucketName,a)}index(a){return new VectorIndexScope(this.url,this.headers,this.vectorBucketName,a,this.fetch)}},VectorIndexScope=class extends VectorDataApi{constructor(a,r,n,o,s){super(a,r,s),this.vectorBucketName=n,this.indexName=o}async putVectors(a){var r=()=>super.putVectors,n=this;return r().call(n,_objectSpread2$2(_objectSpread2$2({},a),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(a){var r=()=>super.getVectors,n=this;return r().call(n,_objectSpread2$2(_objectSpread2$2({},a),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(a={}){var r=()=>super.listVectors,n=this;return r().call(n,_objectSpread2$2(_objectSpread2$2({},a),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(a){var r=()=>super.queryVectors,n=this;return r().call(n,_objectSpread2$2(_objectSpread2$2({},a),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(a){var r=()=>super.deleteVectors,n=this;return r().call(n,_objectSpread2$2(_objectSpread2$2({},a),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},StorageClient=class extends StorageBucketApi{constructor(a,r={},n,o){super(a,r,n,o)}from(a){return new StorageFileApi(this.url,this.headers,a,this.fetch)}get vectors(){return new StorageVectorsClient(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new StorageAnalyticsClient(this.url+"/iceberg",this.headers,this.fetch)}};function __rest(a,r){var n={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&r.indexOf(o)<0&&(n[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(a);s<o.length;s++)r.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(a,o[s])&&(n[o[s]]=a[o[s]]);return n}typeof SuppressedError=="function"&&SuppressedError;const version$1="2.89.0",AUTO_REFRESH_TICK_DURATION_MS=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3,EXPIRY_MARGIN_MS=AUTO_REFRESH_TICK_THRESHOLD*AUTO_REFRESH_TICK_DURATION_MS,GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS$1={"X-Client-Info":`gotrue-js/${version$1}`},API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BASE64URL_REGEX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JWKS_TTL=10*60*1e3;class AuthError extends Error{constructor(r,n,o){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=o}}function isAuthError(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class AuthApiError extends AuthError{constructor(r,n,o){super(r,n,o),this.name="AuthApiError",this.status=n,this.code=o}}function isAuthApiError(a){return isAuthError(a)&&a.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(r,n){super(r),this.name="AuthUnknownError",this.originalError=n}}class CustomAuthError extends AuthError{constructor(r,n,o,s){super(r,o,s),this.name=n,this.status=o}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(a){return isAuthError(a)&&a.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(r,n=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(a){return isAuthError(a)&&a.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(r,n=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthPKCECodeVerifierMissingError extends CustomAuthError{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class AuthRetryableFetchError extends CustomAuthError{constructor(r,n){super(r,"AuthRetryableFetchError",n,void 0)}}function isAuthRetryableFetchError(a){return isAuthError(a)&&a.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(r,n,o){super(r,"AuthWeakPasswordError",n,"weak_password"),this.reasons=o}}class AuthInvalidJwtError extends CustomAuthError{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const TO_BASE64URL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),IGNORE_BASE64URL=` 	
\r=`.split(""),FROM_BASE64URL=(()=>{const a=new Array(128);for(let r=0;r<a.length;r+=1)a[r]=-1;for(let r=0;r<IGNORE_BASE64URL.length;r+=1)a[IGNORE_BASE64URL[r].charCodeAt(0)]=-2;for(let r=0;r<TO_BASE64URL.length;r+=1)a[TO_BASE64URL[r].charCodeAt(0)]=r;return a})();function byteToBase64URL(a,r,n){if(a!==null)for(r.queue=r.queue<<8|a,r.queuedBits+=8;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;n(TO_BASE64URL[o]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;n(TO_BASE64URL[o]),r.queuedBits-=6}}function byteFromBase64URL(a,r,n){const o=FROM_BASE64URL[a];if(o>-1)for(r.queue=r.queue<<6|o,r.queuedBits+=6;r.queuedBits>=8;)n(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function stringFromBase64URL(a){const r=[],n=u=>{r.push(String.fromCodePoint(u))},o={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},l=u=>{stringFromUTF8(u,o,n)};for(let u=0;u<a.length;u+=1)byteFromBase64URL(a.charCodeAt(u),s,l);return r.join("")}function codepointToUTF8(a,r){if(a<=127){r(a);return}else if(a<=2047){r(192|a>>6),r(128|a&63);return}else if(a<=65535){r(224|a>>12),r(128|a>>6&63),r(128|a&63);return}else if(a<=1114111){r(240|a>>18),r(128|a>>12&63),r(128|a>>6&63),r(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function stringToUTF8(a,r){for(let n=0;n<a.length;n+=1){let o=a.charCodeAt(n);if(o>55295&&o<=56319){const s=(o-55296)*1024&65535;o=(a.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}codepointToUTF8(o,r)}}function stringFromUTF8(a,r,n){if(r.utf8seq===0){if(a<=127){n(a);return}for(let o=1;o<6;o+=1)if(!(a>>7-o&1)){r.utf8seq=o;break}if(r.utf8seq===2)r.codepoint=a&31;else if(r.utf8seq===3)r.codepoint=a&15;else if(r.utf8seq===4)r.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|a&63,r.utf8seq-=1,r.utf8seq===0&&n(r.codepoint)}}function base64UrlToUint8Array(a){const r=[],n={queue:0,queuedBits:0},o=s=>{r.push(s)};for(let s=0;s<a.length;s+=1)byteFromBase64URL(a.charCodeAt(s),n,o);return new Uint8Array(r)}function stringToUint8Array(a){const r=[];return stringToUTF8(a,n=>r.push(n)),new Uint8Array(r)}function bytesToBase64URL(a){const r=[],n={queue:0,queuedBits:0},o=s=>{r.push(s)};return a.forEach(s=>byteToBase64URL(s,n,o)),byteToBase64URL(null,n,o),r.join("")}function expiresAt(a){return Math.round(Date.now()/1e3)+a}function generateCallbackId(){return Symbol("auth-callback")}const isBrowser=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(a){const r={},n=new URL(a);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,l)=>{r[l]=s})}catch{}return n.searchParams.forEach((o,s)=>{r[s]=o}),r}const resolveFetch$1=a=>a?(...r)=>a(...r):(...r)=>fetch(...r),looksLikeFetchResponse=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",setItemAsync=async(a,r,n)=>{await a.setItem(r,JSON.stringify(n))},getItemAsync=async(a,r)=>{const n=await a.getItem(r);if(!n)return null;try{return JSON.parse(n)}catch{return n}},removeItemAsync=async(a,r)=>{await a.removeItem(r)};class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((r,n)=>{this.resolve=r,this.reject=n})}}Deferred.promiseConstructor=Promise;function decodeJWT(a){const r=a.split(".");if(r.length!==3)throw new AuthInvalidJwtError("Invalid JWT structure");for(let o=0;o<r.length;o++)if(!BASE64URL_REGEX.test(r[o]))throw new AuthInvalidJwtError("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(r[0])),payload:JSON.parse(stringFromBase64URL(r[1])),signature:base64UrlToUint8Array(r[2]),raw:{header:r[0],payload:r[1]}}}async function sleep(a){return await new Promise(r=>{setTimeout(()=>r(null),a)})}function retryable(a,r){return new Promise((o,s)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await a(l);if(!r(l,null,u)){o(u);return}}catch(u){if(!r(l,u)){s(u);return}}})()})}function dec2hex(a){return("0"+a.toString(16)).substr(-2)}function generatePKCEVerifier(){const r=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=n.length;let s="";for(let l=0;l<56;l++)s+=n.charAt(Math.floor(Math.random()*o));return s}return crypto.getRandomValues(r),Array.from(r,dec2hex).join("")}async function sha256(a){const n=new TextEncoder().encode(a),o=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(o);return Array.from(s).map(l=>String.fromCharCode(l)).join("")}async function generatePKCEChallenge(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const n=await sha256(a);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function getCodeChallengeAndMethod(a,r,n=!1){const o=generatePKCEVerifier();let s=o;n&&(s+="/PASSWORD_RECOVERY"),await setItemAsync(a,`${r}-code-verifier`,s);const l=await generatePKCEChallenge(o);return[l,o===l?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(a){const r=a.headers.get(API_VERSION_HEADER_NAME);if(!r||!r.match(API_VERSION_REGEX))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function validateExp(a){if(!a)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(a<=r)throw new Error("JWT has expired")}function getAlgorithm(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UUID_REGEX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function validateUUID(a){if(!UUID_REGEX.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function userNotAvailableProxy(){const a={};return new Proxy(a,{get:(r,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function insecureUserWarningProxy(a,r){return new Proxy(a,{get:(n,o,s)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const l=o.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,o,s)}return!r.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(n,o,s)}})}function deepClone(a){return JSON.parse(JSON.stringify(a))}const _getErrorMessage=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),NETWORK_ERROR_CODES=[502,503,504];async function handleError(a){var r;if(!looksLikeFetchResponse(a))throw new AuthRetryableFetchError(_getErrorMessage(a),0);if(NETWORK_ERROR_CODES.includes(a.status))throw new AuthRetryableFetchError(_getErrorMessage(a),a.status);let n;try{n=await a.json()}catch(l){throw new AuthUnknownError(_getErrorMessage(l),l)}let o;const s=parseResponseAPIVersion(a);if(s&&s.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?o=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(o=n.error_code),o){if(o==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(n),a.status,((r=n.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(o==="session_not_found")throw new AuthSessionMissingError}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(n),a.status,n.weak_password.reasons);throw new AuthApiError(_getErrorMessage(n),a.status||500,o)}const _getRequestParams=(a,r,n,o)=>{const s={method:a,headers:(r==null?void 0:r.headers)||{}};return a==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r==null?void 0:r.headers),s.body=JSON.stringify(o),Object.assign(Object.assign({},s),n))};async function _request(a,r,n,o){var s;const l=Object.assign({},o==null?void 0:o.headers);l[API_VERSION_HEADER_NAME]||(l[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),o!=null&&o.jwt&&(l.Authorization=`Bearer ${o.jwt}`);const u=(s=o==null?void 0:o.query)!==null&&s!==void 0?s:{};o!=null&&o.redirectTo&&(u.redirect_to=o.redirectTo);const c=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await _handleRequest(a,r,n+c,{headers:l,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(f):{data:Object.assign({},f),error:null}}async function _handleRequest(a,r,n,o,s,l){const u=_getRequestParams(r,o,s,l);let c;try{c=await a(n,Object.assign({},u))}catch(f){throw console.error(f),new AuthRetryableFetchError(_getErrorMessage(f),0)}if(c.ok||await handleError(c),o!=null&&o.noResolveJson)return c;try{return await c.json()}catch(f){await handleError(f)}}function _sessionResponse(a){var r;let n=null;hasSession(a)&&(n=Object.assign({},a),a.expires_at||(n.expires_at=expiresAt(a.expires_in)));const o=(r=a.user)!==null&&r!==void 0?r:a;return{data:{session:n,user:o},error:null}}function _sessionResponsePassword(a){const r=_sessionResponse(a);return!r.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0)&&(r.data.weak_password=a.weak_password),r}function _userResponse(a){var r;return{data:{user:(r=a.user)!==null&&r!==void 0?r:a},error:null}}function _ssoResponse(a){return{data:a,error:null}}function _generateLinkResponse(a){const{action_link:r,email_otp:n,hashed_token:o,redirect_to:s,verification_type:l}=a,u=__rest(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:r,email_otp:n,hashed_token:o,redirect_to:s,verification_type:l},f=Object.assign({},u);return{data:{properties:c,user:f},error:null}}function _noResolveJsonResponse(a){return a}function hasSession(a){return a.access_token&&a.refresh_token&&a.expires_in}const SIGN_OUT_SCOPES=["global","local","others"];class GoTrueAdminApi{constructor({url:r="",headers:n={},fetch:o}){this.url=r,this.headers=n,this.fetch=resolveFetch$1(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,n=SIGN_OUT_SCOPES[0]){if(SIGN_OUT_SCOPES.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${SIGN_OUT_SCOPES.join(", ")}`);try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}}async inviteUserByEmail(r,n={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:_userResponse})}catch(o){if(isAuthError(o))return{data:{user:null},error:o};throw o}}async generateLink(r){try{const{options:n}=r,o=__rest(r,["options"]),s=Object.assign(Object.assign({},o),n);return"newEmail"in o&&(s.new_email=o==null?void 0:o.newEmail,delete s.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:_generateLinkResponse,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(isAuthError(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(r){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:_userResponse})}catch(n){if(isAuthError(n))return{data:{user:null},error:n};throw n}}async listUsers(r){var n,o,s,l,u,c,f;try{const d={nextPage:null,lastPage:0,total:0},v=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=r==null?void 0:r.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(l=(s=r==null?void 0:r.perPage)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:""},xform:_noResolveJsonResponse});if(v.error)throw v.error;const g=await v.json(),y=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,_=(f=(c=v.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&f!==void 0?f:[];return _.length>0&&(_.forEach(S=>{const b=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(S.split(";")[1].split("=")[1]);d[`${x}Page`]=b}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},g),d),error:null}}catch(d){if(isAuthError(d))return{data:{users:[]},error:d};throw d}}async getUserById(r){validateUUID(r);try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:_userResponse})}catch(n){if(isAuthError(n))return{data:{user:null},error:n};throw n}}async updateUserById(r,n){validateUUID(r);try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:n,headers:this.headers,xform:_userResponse})}catch(o){if(isAuthError(o))return{data:{user:null},error:o};throw o}}async deleteUser(r,n=!1){validateUUID(r);try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:n},xform:_userResponse})}catch(o){if(isAuthError(o))return{data:{user:null},error:o};throw o}}async _listFactors(r){validateUUID(r.userId);try{const{data:n,error:o}=await _request(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:o}}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _deleteFactor(r){validateUUID(r.userId),validateUUID(r.id);try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _listOAuthClients(r){var n,o,s,l,u,c,f;try{const d={nextPage:null,lastPage:0,total:0},v=await _request(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=r==null?void 0:r.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(l=(s=r==null?void 0:r.perPage)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:""},xform:_noResolveJsonResponse});if(v.error)throw v.error;const g=await v.json(),y=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,_=(f=(c=v.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&f!==void 0?f:[];return _.length>0&&(_.forEach(S=>{const b=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(S.split(";")[1].split("=")[1]);d[`${x}Page`]=b}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},g),d),error:null}}catch(d){if(isAuthError(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(r){try{return await _request(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _getOAuthClient(r){try{return await _request(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _updateOAuthClient(r,n){try{return await _request(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:n,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(r){try{return await _request(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(r){try{return await _request(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}}function memoryLocalStorageAdapter(a={}){return{getItem:r=>a[r]||null,setItem:(r,n)=>{a[r]=n},removeItem:r=>{delete a[r]}}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(a,r,n){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,r);const o=new globalThis.AbortController;return r>0&&setTimeout(()=>{o.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async s=>{if(s){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,s.name);try{return await n()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,s.name)}}else{if(r===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(internals.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function getAddress(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw new Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}function fromHex(a){return parseInt(a,16)}function toHex(a){const r=new TextEncoder().encode(a);return"0x"+Array.from(r,o=>o.toString(16).padStart(2,"0")).join("")}function createSiweMessage(a){var r;const{chainId:n,domain:o,expirationTime:s,issuedAt:l=new Date,nonce:u,notBefore:c,requestId:f,resources:d,scheme:v,uri:g,version:y}=a;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((r=a.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`)}const _=getAddress(a.address),S=v?`${v}://${o}`:o,b=a.statement?`${a.statement}
`:"",x=`${S} wants you to sign in with your Ethereum account:
${_}

${b}`;let T=`URI: ${g}
Version: ${y}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(s&&(T+=`
Expiration Time: ${s.toISOString()}`),c&&(T+=`
Not Before: ${c.toISOString()}`),f&&(T+=`
Request ID: ${f}`),d){let A=`
Resources:`;for(const w of d){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);A+=`
- ${w}`}T+=A}return`${x}
${T}`}class WebAuthnError extends Error{constructor({message:r,code:n,cause:o,name:s}){var l;super(r,{cause:o}),this.__isWebAuthnError=!0,this.name=(l=s??(o instanceof Error?o.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class WebAuthnUnknownError extends WebAuthnError{constructor(r,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:r}),this.name="WebAuthnUnknownError",this.originalError=n}}function identifyRegistrationError({error:a,options:r}){var n,o,s;const{publicKey:l}=r;if(!l)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(r.signal instanceof AbortSignal)return new WebAuthnError({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if(a.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new WebAuthnError({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});if(r.mediation==="conditional"&&((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new WebAuthnError({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});if(((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new WebAuthnError({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else{if(a.name==="InvalidStateError")return new WebAuthnError({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});if(a.name==="NotAllowedError")return new WebAuthnError({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="NotSupportedError")return l.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new WebAuthnError({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}):new WebAuthnError({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});if(a.name==="SecurityError"){const u=window.location.hostname;if(isValidDomain(u)){if(l.rp.id!==u)return new WebAuthnError({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new WebAuthnError({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new WebAuthnError({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if(a.name==="UnknownError")return new WebAuthnError({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new WebAuthnError({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}function identifyAuthenticationError({error:a,options:r}){const{publicKey:n}=r;if(!n)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(r.signal instanceof AbortSignal)return new WebAuthnError({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else{if(a.name==="NotAllowedError")return new WebAuthnError({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="SecurityError"){const o=window.location.hostname;if(isValidDomain(o)){if(n.rpId!==o)return new WebAuthnError({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new WebAuthnError({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="UnknownError")return new WebAuthnError({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new WebAuthnError({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}class WebAuthnAbortService{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const webAuthnAbortService=new WebAuthnAbortService;function deserializeCredentialCreationOptions(a){if(!a)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(a);const{challenge:r,user:n,excludeCredentials:o}=a,s=__rest(a,["challenge","user","excludeCredentials"]),l=base64UrlToUint8Array(r).buffer,u=Object.assign(Object.assign({},n),{id:base64UrlToUint8Array(n.id).buffer}),c=Object.assign(Object.assign({},s),{challenge:l,user:u});if(o&&o.length>0){c.excludeCredentials=new Array(o.length);for(let f=0;f<o.length;f++){const d=o[f];c.excludeCredentials[f]=Object.assign(Object.assign({},d),{id:base64UrlToUint8Array(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return c}function deserializeCredentialRequestOptions(a){if(!a)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(a);const{challenge:r,allowCredentials:n}=a,o=__rest(a,["challenge","allowCredentials"]),s=base64UrlToUint8Array(r).buffer,l=Object.assign(Object.assign({},o),{challenge:s});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const c=n[u];l.allowCredentials[u]=Object.assign(Object.assign({},c),{id:base64UrlToUint8Array(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return l}function serializeCredentialCreationResponse(a){var r;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const n=a;return{id:a.id,rawId:a.id,response:{attestationObject:bytesToBase64URL(new Uint8Array(a.response.attestationObject)),clientDataJSON:bytesToBase64URL(new Uint8Array(a.response.clientDataJSON))},type:"public-key",clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function serializeCredentialRequestResponse(a){var r;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const n=a,o=a.getClientExtensionResults(),s=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:bytesToBase64URL(new Uint8Array(s.authenticatorData)),clientDataJSON:bytesToBase64URL(new Uint8Array(s.clientDataJSON)),signature:bytesToBase64URL(new Uint8Array(s.signature)),userHandle:s.userHandle?bytesToBase64URL(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function isValidDomain(a){return a==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}function browserSupportsWebAuthn(){var a,r;return!!(isBrowser()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((a=navigator==null?void 0:navigator.credentials)===null||a===void 0?void 0:a.create)=="function"&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.get)=="function")}async function createCredential(a){try{const r=await navigator.credentials.create(a);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new WebAuthnUnknownError("Browser returned unexpected credential type",r)}:{data:null,error:new WebAuthnUnknownError("Empty credential response",r)}}catch(r){return{data:null,error:identifyRegistrationError({error:r,options:a})}}}async function getCredential(a){try{const r=await navigator.credentials.get(a);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new WebAuthnUnknownError("Browser returned unexpected credential type",r)}:{data:null,error:new WebAuthnUnknownError("Empty credential response",r)}}catch(r){return{data:null,error:identifyAuthenticationError({error:r,options:a})}}}const DEFAULT_CREATION_OPTIONS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},DEFAULT_REQUEST_OPTIONS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function deepMerge(...a){const r=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),o={};for(const s of a)if(s)for(const l in s){const u=s[l];if(u!==void 0)if(Array.isArray(u))o[l]=u;else if(n(u))o[l]=u;else if(r(u)){const c=o[l];r(c)?o[l]=deepMerge(c,u):o[l]=deepMerge(u)}else o[l]=u}return o}function mergeCredentialCreationOptions(a,r){return deepMerge(DEFAULT_CREATION_OPTIONS,a,r||{})}function mergeCredentialRequestOptions(a,r){return deepMerge(DEFAULT_REQUEST_OPTIONS,a,r||{})}class WebAuthnApi{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:n,friendlyName:o,signal:s},l){try{const{data:u,error:c}=await this.client.mfa.challenge({factorId:r,webauthn:n});if(!u)return{data:null,error:c};const f=s??webAuthnAbortService.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:d}=u.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${o}`),d.displayName||(d.displayName=d.name)}switch(u.webauthn.type){case"create":{const d=mergeCredentialCreationOptions(u.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:v,error:g}=await createCredential({publicKey:d,signal:f});return v?{data:{factorId:r,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:g}}case"request":{const d=mergeCredentialRequestOptions(u.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:v,error:g}=await getCredential(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:d,signal:f}));return v?{data:{factorId:r,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:g}}}}catch(u){return isAuthError(u)?{data:null,error:u}:{data:null,error:new AuthUnknownError("Unexpected error in challenge",u)}}}async _verify({challengeId:r,factorId:n,webauthn:o}){return this.client.mfa.verify({factorId:n,challengeId:r,webauthn:o})}async _authenticate({factorId:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},l){if(!n)return{data:null,error:new AuthError("rpId is required for WebAuthn authentication")};try{if(!browserSupportsWebAuthn())return{data:null,error:new AuthUnknownError("Browser does not support WebAuthn",null)};const{data:u,error:c}=await this.challenge({factorId:r,webauthn:{rpId:n,rpOrigins:o},signal:s},{request:l});if(!u)return{data:null,error:c};const{webauthn:f}=u;return this._verify({factorId:r,challengeId:u.challengeId,webauthn:{type:f.type,rpId:n,rpOrigins:o,credential_response:f.credential_response}})}catch(u){return isAuthError(u)?{data:null,error:u}:{data:null,error:new AuthUnknownError("Unexpected error in authenticate",u)}}}async _register({friendlyName:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},l){if(!n)return{data:null,error:new AuthError("rpId is required for WebAuthn registration")};try{if(!browserSupportsWebAuthn())return{data:null,error:new AuthUnknownError("Browser does not support WebAuthn",null)};const{data:u,error:c}=await this._enroll({friendlyName:r});if(!u)return await this.client.mfa.listFactors().then(v=>{var g;return(g=v.data)===null||g===void 0?void 0:g.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===r&&y.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:c};const{data:f,error:d}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:o},signal:s},{create:l});return f?this._verify({factorId:u.id,challengeId:f.challengeId,webauthn:{rpId:n,rpOrigins:o,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:d}}catch(u){return isAuthError(u)?{data:null,error:u}:{data:null,error:new AuthUnknownError("Unexpected error in register",u)}}}}polyfillGlobalThis();const DEFAULT_OPTIONS$1={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS$1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function lockNoOp(a,r,n){return await n()}const GLOBAL_JWKS={};class GoTrueClient{get jwks(){var r,n;return(n=(r=GLOBAL_JWKS[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(r){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,n;return(n=(r=GLOBAL_JWKS[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{cachedAt:r})}constructor(r){var n,o,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},DEFAULT_OPTIONS$1),r);if(this.storageKey=l.storageKey,this.instanceID=(n=GoTrueClient.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,GoTrueClient.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&isBrowser()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new GoTrueAdminApi({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=resolveFetch$1(l.fetch),this.lock=l.lock||lockNoOp,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:this.persistSession&&isBrowser()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new WebAuthnApi(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:supportsLocalStorage()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${version$1}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let n={},o="none";if(isBrowser()&&(n=parseParametersFromURL(window.location.href),this._isImplicitGrantCallback(n)?o="implicit":await this._isPKCECallback(n)&&(o="pkce")),isBrowser()&&this.detectSessionInUrl&&o!=="none"){const{data:s,error:l}=await this._getSessionFromURL(n,o);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),isAuthImplicitGrantRedirectError(l)){const f=(r=l.details)===null||r===void 0?void 0:r.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",u,"redirect type",c),await this._saveSession(u),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return isAuthError(n)?this._returnResult({error:n}):this._returnResult({error:new AuthUnknownError("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var n,o,s;try{const l=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(n=r==null?void 0:r.options)===null||n===void 0?void 0:n.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(s=r==null?void 0:r.options)===null||s===void 0?void 0:s.captchaToken}},xform:_sessionResponse}),{data:u,error:c}=l;if(c||!u)return this._returnResult({data:{user:null,session:null},error:c});const f=u.session,d=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:d,session:f},error:null})}catch(l){if(isAuthError(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(r){var n,o,s;try{let l;if("email"in r){const{email:v,password:g,options:y}=r;let _=null,S=null;this.flowType==="pkce"&&([_,S]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),l=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:v,password:g,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:_,code_challenge_method:S},xform:_sessionResponse})}else if("phone"in r){const{phone:v,password:g,options:y}=r;l=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:g,data:(o=y==null?void 0:y.data)!==null&&o!==void 0?o:{},channel:(s=y==null?void 0:y.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:u,error:c}=l;if(c||!u)return await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const f=u.session,d=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:d,session:f},error:null})}catch(l){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(r){try{let n;if("email"in r){const{email:l,password:u,options:c}=r;n=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in r){const{phone:l,password:u,options:c}=r;n=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:o,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!o||!o.session||!o.user){const l=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:l})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:s})}catch(n){if(isAuthError(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(r){var n,o,s,l;return await this._handleProviderSignIn(r.provider,{redirectTo:(n=r.options)===null||n===void 0?void 0:n.redirectTo,scopes:(o=r.options)===null||o===void 0?void 0:o.scopes,queryParams:(s=r.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(l=r.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:n}=r;switch(n){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(r){var n,o,s,l,u,c,f,d,v,g,y;let _,S;if("message"in r)_=r.message,S=r.signature;else{const{chain:b,wallet:x,statement:T,options:A}=r;let w;if(isBrowser())if(typeof x=="object")w=x;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")w=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=x}const C=new URL((n=A==null?void 0:A.url)!==null&&n!==void 0?n:window.location.href),E=await w.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=getAddress(E[0]);let I=(o=A==null?void 0:A.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!I){const R=await w.request({method:"eth_chainId"});I=fromHex(R)}const M={domain:C.host,address:P,statement:T,uri:C.href,version:"1",chainId:I,nonce:(s=A==null?void 0:A.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(u=(l=A==null?void 0:A.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(c=A==null?void 0:A.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(f=A==null?void 0:A.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(d=A==null?void 0:A.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(v=A==null?void 0:A.signInWithEthereum)===null||v===void 0?void 0:v.resources};_=createSiweMessage(M),S=await w.request({method:"personal_sign",params:[toHex(_),P]})}try{const{data:b,error:x}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:S},!((g=r.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=r.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:_sessionResponse});if(x)throw x;if(!b||!b.session||!b.user){const T=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:T})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:x})}catch(b){if(isAuthError(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(r){var n,o,s,l,u,c,f,d,v,g,y,_;let S,b;if("message"in r)S=r.message,b=r.signature;else{const{chain:x,wallet:T,statement:A,options:w}=r;let C;if(isBrowser())if(typeof T=="object")C=T;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))C=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=T}const E=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const P=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),A?{statement:A}:null));let I;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")I=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)I=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)S=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),b=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${E.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(o=w==null?void 0:w.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((f=w==null?void 0:w.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((g=(v=w==null?void 0:w.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||g===void 0)&&g.length?["Resources",...w.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const P=await C.signMessage(new TextEncoder().encode(S),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=P}}try{const{data:x,error:T}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:bytesToBase64URL(b)},!((y=r.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(_=r.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:_sessionResponse});if(T)throw T;if(!x||!x.session||!x.user){const A=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:A})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:T})}catch(x){if(isAuthError(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(r){const n=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[o,s]=(n??"").split("/");try{if(!o&&this.flowType==="pkce")throw new AuthPKCECodeVerifierMissingError;const{data:l,error:u}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:o},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const c=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:s??null}),error:u})}catch(l){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(r){try{const{options:n,provider:o,token:s,access_token:l,nonce:u}=r,c=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:s,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:_sessionResponse}),{data:f,error:d}=c;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!f||!f.session||!f.user){const v=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:v})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:d})}catch(n){if(isAuthError(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(r){var n,o,s,l,u;try{if("email"in r){const{email:c,options:f}=r;let d=null,v=null;this.flowType==="pkce"&&([d,v]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:g}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},create_user:(o=f==null?void 0:f.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:d,code_challenge_method:v},redirectTo:f==null?void 0:f.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in r){const{phone:c,options:f}=r,{data:d,error:v}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},create_user:(l=f==null?void 0:f.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(u=f==null?void 0:f.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:v})}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(c){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(r){var n,o;try{let s,l;"options"in r&&(s=(n=r.options)===null||n===void 0?void 0:n.redirectTo,l=(o=r.options)===null||o===void 0?void 0:o.captchaToken);const{data:u,error:c}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:l}}),redirectTo:s,xform:_sessionResponse});if(c)throw c;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,d=u.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:d,session:f},error:null})}catch(s){if(isAuthError(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(r){var n,o,s,l,u;try{let c=null,f=null;this.flowType==="pkce"&&([c,f]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const d=await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(o=(n=r.options)===null||n===void 0?void 0:n.redirectTo)!==null&&o!==void 0?o:void 0}),!((s=r==null?void 0:r.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:f}),headers:this.headers,xform:_ssoResponse});return!((l=d.data)===null||l===void 0)&&l.url&&isBrowser()&&!(!((u=r.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(c){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;if(o)throw o;if(!n)throw new AuthSessionMissingError;const{error:s}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(r){if(isAuthError(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const n=`${this.url}/resend`;if("email"in r){const{email:o,type:s,options:l}=r,{error:u}=await _request(this.fetch,"POST",n,{headers:this.headers,body:{email:o,type:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in r){const{phone:o,type:s,options:l}=r,{data:u,error:c}=await _request(this.fetch,"POST",n,{headers:this.headers,body:{phone:o,type:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(n){if(isAuthError(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(r,n){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await o,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=n();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await r(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const n=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?r=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const o=r.expires_at?r.expires_at*1e3-Date.now()<EXPIRY_MARGIN_MS:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(this.userStorage){const u=await getItemAsync(this.userStorage,this.storageKey+"-user");u!=null&&u.user?r.user=u.user:r.user=userNotAvailableProxy()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};r.user=insecureUserWarningProxy(r.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:s,error:l}=await this._callRefreshToken(r.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(r){try{return r?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:_userResponse}):await this._useSession(async n=>{var o,s,l;const{data:u,error:c}=n;if(c)throw c;return!(!((o=u.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(s=u.session)===null||s===void 0?void 0:s.access_token)!==null&&l!==void 0?l:void 0,xform:_userResponse})})}catch(n){if(isAuthError(n))return isAuthSessionMissingError(n)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(r,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,n))}async _updateUser(r,n={}){try{return await this._useSession(async o=>{const{data:s,error:l}=o;if(l)throw l;if(!s.session)throw new AuthSessionMissingError;const u=s.session;let c=null,f=null;this.flowType==="pkce"&&r.email!=null&&([c,f]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:d,error:v}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:c,code_challenge_method:f}),jwt:u.access_token,xform:_userResponse});if(v)throw v;return u.user=d.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(o){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new AuthSessionMissingError;const n=Date.now()/1e3;let o=n,s=!0,l=null;const{payload:u}=decodeJWT(r.access_token);if(u.exp&&(o=u.exp,s=o<=n),s){const{data:c,error:f}=await this._callRefreshToken(r.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!c)return{data:{user:null,session:null},error:null};l=c}else{const{data:c,error:f}=await this._getUser(r.access_token);if(f)throw f;l={access_token:r.access_token,refresh_token:r.refresh_token,user:c.user,token_type:"bearer",expires_in:o-n,expires_at:o},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(isAuthError(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async n=>{var o;if(!r){const{data:u,error:c}=n;if(c)throw c;r=(o=u.session)!==null&&o!==void 0?o:void 0}if(!(r!=null&&r.refresh_token))throw new AuthSessionMissingError;const{data:s,error:l}=await this._callRefreshToken(r.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(isAuthError(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(r,n){try{if(!isBrowser())throw new AuthImplicitGrantRedirectError("No browser detected.");if(r.error||r.error_description||r.error_code)throw new AuthImplicitGrantRedirectError(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:A,error:w}=await this._exchangeCodeForSession(r.code);if(w)throw w;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:s,access_token:l,refresh_token:u,expires_in:c,expires_at:f,token_type:d}=r;if(!l||!c||!u||!d)throw new AuthImplicitGrantRedirectError("No session defined in URL");const v=Math.round(Date.now()/1e3),g=parseInt(c);let y=v+g;f&&(y=parseInt(f));const _=y-v;_*1e3<=AUTO_REFRESH_TICK_DURATION_MS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${g}s`);const S=y-g;v-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,y,v):v-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,y,v);const{data:b,error:x}=await this._getUser(l);if(x)throw x;const T={provider_token:o,provider_refresh_token:s,access_token:l,expires_in:g,expires_at:y,refresh_token:u,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:r.type},error:null})}catch(o){if(isAuthError(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const n=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&n)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async n=>{var o;const{data:s,error:l}=n;if(l)return this._returnResult({error:l});const u=(o=s.session)===null||o===void 0?void 0:o.access_token;if(u){const{error:c}=await this.admin.signOut(u,r);if(c&&!(isAuthApiError(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return r!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const n=generateCallbackId(),o={id:n,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:o}}}async _emitInitialSession(r){return await this._useSession(async n=>{var o,s;try{const{data:{session:l},error:u}=n;if(u)throw u;await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",r,"session",l)}catch(l){await((s=this.stateChangeEmitters.get(r))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",l),console.error(l)}})}async resetPasswordForEmail(r,n={}){let o=null,s=null;this.flowType==="pkce"&&([o,s]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:o,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var r;try{const{data:n,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(r=n.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(n){if(isAuthError(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var n;try{const{data:o,error:s}=await this._useSession(async l=>{var u,c,f,d,v;const{data:g,error:y}=l;if(y)throw y;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(u=r.options)===null||u===void 0?void 0:u.redirectTo,scopes:(c=r.options)===null||c===void 0?void 0:c.scopes,queryParams:(f=r.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",_,{headers:this.headers,jwt:(v=(d=g.session)===null||d===void 0?void 0:d.access_token)!==null&&v!==void 0?v:void 0})});if(s)throw s;return isBrowser()&&!(!((n=r.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:r.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(isAuthError(o))return this._returnResult({data:{provider:r.provider,url:null},error:o});throw o}}async linkIdentityIdToken(r){return await this._useSession(async n=>{var o;try{const{error:s,data:{session:l}}=n;if(s)throw s;const{options:u,provider:c,token:f,access_token:d,nonce:v}=r,g=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=l==null?void 0:l.access_token)!==null&&o!==void 0?o:void 0,body:{provider:c,id_token:f,access_token:d,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:_sessionResponse}),{data:y,error:_}=g;return _?this._returnResult({data:{user:null,session:null},error:_}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new AuthInvalidTokenResponseError}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:_}))}catch(s){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(r){try{return await this._useSession(async n=>{var o,s;const{data:l,error:u}=n;if(u)throw u;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(s=(o=l.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(isAuthError(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(r){const n=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(n,"begin");try{const o=Date.now();return await retryable(async s=>(s>0&&await sleep(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:_sessionResponse})),(s,l)=>{const u=200*Math.pow(2,s);return l&&isAuthRetryableFetchError(l)&&Date.now()+u-o<AUTO_REFRESH_TICK_DURATION_MS})}catch(o){if(this._debug(n,"error",o),isAuthError(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(n,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,n){const o=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",n,"url",o),isBrowser()&&!n.skipBrowserRedirect&&window.location.assign(o),{data:{provider:r,url:o},error:null}}async _recoverAndRefresh(){var r,n;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const s=await getItemAsync(this.storage,this.storageKey);if(s&&this.userStorage){let u=await getItemAsync(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:s.user},await setItemAsync(this.userStorage,this.storageKey+"-user",u)),s.user=(r=u==null?void 0:u.user)!==null&&r!==void 0?r:userNotAvailableProxy()}else if(s&&!s.user&&!s.user){const u=await getItemAsync(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(s.user=u.user,await removeItemAsync(this.storage,this.storageKey+"-user"),await setItemAsync(this.storage,this.storageKey,s)):s.user=userNotAvailableProxy()}if(this._debug(o,"session from storage",s),!this._isValidSession(s)){this._debug(o,"session is not valid"),s!==null&&await this._removeSession();return}const l=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<EXPIRY_MARGIN_MS;if(this._debug(o,`session has${l?"":" not"} expired with margin of ${EXPIRY_MARGIN_MS}s`),l){if(this.autoRefreshToken&&s.refresh_token){const{error:u}=await this._callRefreshToken(s.refresh_token);u&&(console.error(u),isAuthRetryableFetchError(u)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:c}=await this._getUser(s.access_token);!c&&(u!=null&&u.user)?(s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(o,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(o,"error",s),console.error(s);return}finally{this._debug(o,"end")}}async _callRefreshToken(r){var n,o;if(!r)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Deferred;const{data:l,error:u}=await this._refreshAccessToken(r);if(u)throw u;if(!l.session)throw new AuthSessionMissingError;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const c={data:l.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(l){if(this._debug(s,"error",l),isAuthError(l)){const u={data:null,error:l};return isAuthRetryableFetchError(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(l),l}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(r,n,o=!0){const s=`#_notifyAllSubscribers(${r})`;this._debug(s,"begin",n,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:r,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(r,n)}catch(f){l.push(f)}});if(await Promise.all(u),l.length>0){for(let c=0;c<l.length;c+=1)console.error(l[c]);throw l[0]}}finally{this._debug(s,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},r),o=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&n.user&&await setItemAsync(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const l=deepClone(s);await setItemAsync(this.storage,this.storageKey,l)}else{const s=deepClone(n);await setItemAsync(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await removeItemAsync(this.storage,this.storageKey),await removeItemAsync(this.storage,this.storageKey+"-code-verifier"),await removeItemAsync(this.storage,this.storageKey+"-user"),this.userStorage&&await removeItemAsync(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&isBrowser()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",r)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION_MS);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async n=>{const{data:{session:o}}=n;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((o.expires_at*1e3-r)/AUTO_REFRESH_TICK_DURATION_MS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION_MS}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),s<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(o.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const n=`#_onVisibilityChanged(${r})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,n,o){const s=[`provider=${encodeURIComponent(n)}`];if(o!=null&&o.redirectTo&&s.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&s.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[l,u]=await getCodeChallengeAndMethod(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});s.push(c.toString())}if(o!=null&&o.queryParams){const l=new URLSearchParams(o.queryParams);s.push(l.toString())}return o!=null&&o.skipBrowserRedirect&&s.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${r}?${s.join("&")}`}async _unenroll(r){try{return await this._useSession(async n=>{var o;const{data:s,error:l}=n;return l?this._returnResult({data:null,error:l}):await _request(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(o=s==null?void 0:s.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if(isAuthError(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(r){try{return await this._useSession(async n=>{var o,s;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const c=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:f,error:d}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});return d?this._returnResult({data:null,error:d}):(r.factorType==="totp"&&f.type==="totp"&&(!((s=f==null?void 0:f.totp)===null||s===void 0)&&s.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(n){if(isAuthError(n))return this._returnResult({data:null,error:n});throw n}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:s,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?serializeCredentialCreationResponse(r.webauthn.credential_response):serializeCredentialRequestResponse(r.webauthn.credential_response)})}:{code:r.code}),{data:c,error:f}=await _request(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:u,headers:this.headers,jwt:(o=s==null?void 0:s.session)===null||o===void 0?void 0:o.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:f}))})}catch(n){if(isAuthError(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:s,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=await _request(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(o=s==null?void 0:s.session)===null||o===void 0?void 0:o.access_token});if(u.error)return u;const{data:c}=u;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:deserializeCredentialCreationOptions(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:deserializeCredentialRequestOptions(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(isAuthError(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(r){const{data:n,error:o}=await this._challenge({factorId:r.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:r.factorId,challengeId:n.id,code:r.code})}async _listFactors(){var r;const{data:{user:n},error:o}=await this.getUser();if(o)return{data:null,error:o};const s={all:[],phone:[],totp:[],webauthn:[]};for(const l of(r=n==null?void 0:n.factors)!==null&&r!==void 0?r:[])s.all.push(l),l.status==="verified"&&s[l.factor_type].push(l);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var r,n;const{data:{session:o},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=decodeJWT(o.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((n=(r=o.user.factors)===null||r===void 0?void 0:r.filter(v=>v.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async n=>{const{data:{session:o},error:s}=n;return s?this._returnResult({data:null,error:s}):o?await _request(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:o.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(n){if(isAuthError(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(r,n){try{return await this._useSession(async o=>{const{data:{session:s},error:l}=o;if(l)return this._returnResult({data:null,error:l});if(!s)return this._returnResult({data:null,error:new AuthSessionMissingError});const u=await _request(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return u.data&&u.data.redirect_url&&isBrowser()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(o){if(isAuthError(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(r,n){try{return await this._useSession(async o=>{const{data:{session:s},error:l}=o;if(l)return this._returnResult({data:null,error:l});if(!s)return this._returnResult({data:null,error:new AuthSessionMissingError});const u=await _request(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return u.data&&u.data.redirect_url&&isBrowser()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(o){if(isAuthError(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;return o?this._returnResult({data:null,error:o}):n?await _request(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(r){if(isAuthError(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async n=>{const{data:{session:o},error:s}=n;return s?this._returnResult({data:null,error:s}):o?(await _request(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(n){if(isAuthError(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(r,n={keys:[]}){let o=n.keys.find(c=>c.kid===r);if(o)return o;const s=Date.now();if(o=this.jwks.keys.find(c=>c.kid===r),o&&this.jwks_cached_at+JWKS_TTL>s)return o;const{data:l,error:u}=await _request(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=s,o=l.keys.find(c=>c.kid===r),!o)?null:o}async getClaims(r,n={}){try{let o=r;if(!o){const{data:_,error:S}=await this.getSession();if(S||!_.session)return this._returnResult({data:null,error:S});o=_.session.access_token}const{header:s,payload:l,signature:u,raw:{header:c,payload:f}}=decodeJWT(o);n!=null&&n.allowExpired||validateExp(l.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:_}=await this.getUser(o);if(_)throw _;return{data:{claims:l,header:s,signature:u},error:null}}const v=getAlgorithm(s.alg),g=await crypto.subtle.importKey("jwk",d,v,!0,["verify"]);if(!await crypto.subtle.verify(v,g,u,stringToUint8Array(`${c}.${f}`)))throw new AuthInvalidJwtError("Invalid JWT signature");return{data:{claims:l,header:s,signature:u},error:null}}catch(o){if(isAuthError(o))return this._returnResult({data:null,error:o});throw o}}}GoTrueClient.nextInstanceID={};const AuthClient=GoTrueClient,version="2.89.0";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${JS_ENV}/${version}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};function _typeof(a){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_typeof(a)}function toPrimitive(a,r){if(_typeof(a)!="object"||!a)return a;var n=a[Symbol.toPrimitive];if(n!==void 0){var o=n.call(a,r);if(_typeof(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function toPropertyKey(a){var r=toPrimitive(a,"string");return _typeof(r)=="symbol"?r:r+""}function _defineProperty$1(a,r,n){return(r=toPropertyKey(r))in a?Object.defineProperty(a,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[r]=n,a}function ownKeys$1(a,r){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);r&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),n.push.apply(n,o)}return n}function _objectSpread2$1(a){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ownKeys$1(Object(n),!0).forEach(function(o){_defineProperty$1(a,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(n,o))})}return a}const resolveFetch=a=>a?(...r)=>a(...r):(...r)=>fetch(...r),resolveHeadersConstructor=()=>Headers,fetchWithAuth=(a,r,n)=>{const o=resolveFetch(n),s=resolveHeadersConstructor();return async(l,u)=>{var c;const f=(c=await r())!==null&&c!==void 0?c:a;let d=new s(u==null?void 0:u.headers);return d.has("apikey")||d.set("apikey",a),d.has("Authorization")||d.set("Authorization",`Bearer ${f}`),o(l,_objectSpread2$1(_objectSpread2$1({},u),{},{headers:d}))}};function ensureTrailingSlash(a){return a.endsWith("/")?a:a+"/"}function applySettingDefaults(a,r){var n,o;const{db:s,auth:l,realtime:u,global:c}=a,{db:f,auth:d,realtime:v,global:g}=r,y={db:_objectSpread2$1(_objectSpread2$1({},f),s),auth:_objectSpread2$1(_objectSpread2$1({},d),l),realtime:_objectSpread2$1(_objectSpread2$1({},v),u),storage:{},global:_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},g),c),{},{headers:_objectSpread2$1(_objectSpread2$1({},(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{}),(o=c==null?void 0:c.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return a.accessToken?y.accessToken=a.accessToken:delete y.accessToken,y}function validateSupabaseUrl(a){const r=a==null?void 0:a.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ensureTrailingSlash(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var SupabaseAuthClient=class extends AuthClient{constructor(a){super(a)}},SupabaseClient=class{constructor(a,r,n){var o,s;this.supabaseUrl=a,this.supabaseKey=r;const l=validateSupabaseUrl(a);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:_objectSpread2$1(_objectSpread2$1({},DEFAULT_AUTH_OPTIONS),{},{storageKey:u}),global:DEFAULT_GLOBAL_OPTIONS},f=applySettingDefaults(n??{},c);if(this.storageKey=(o=f.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(s=f.global.headers)!==null&&s!==void 0?s:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(v,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=f.auth)!==null&&d!==void 0?d:{},this.headers,f.global.fetch)}this.fetch=fetchWithAuth(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(_objectSpread2$1({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new PostgrestClient(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new StorageClient(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,r,n)}channel(a,r={config:{}}){return this.realtime.channel(a,r)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a=this,r,n;if(a.accessToken)return await a.accessToken();const{data:o}=await a.auth.getSession();return(r=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:a.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:r,detectSessionInUrl:n,storage:o,userStorage:s,storageKey:l,flowType:u,lock:c,debug:f,throwOnError:d},v,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl.href,headers:_objectSpread2$1(_objectSpread2$1({},y),v),storageKey:l,autoRefreshToken:a,persistSession:r,detectSessionInUrl:n,storage:o,userStorage:s,flowType:u,lock:c,debug:f,throwOnError:d,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new RealtimeClient(this.realtimeUrl.href,_objectSpread2$1(_objectSpread2$1({},a),{},{params:_objectSpread2$1(_objectSpread2$1({},{apikey:this.supabaseKey}),a==null?void 0:a.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,r)=>{this._handleTokenChanged(a,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(a,r,n){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const createClient=(a,r,n)=>new SupabaseClient(a,r,n);function shouldShowDeprecationWarning(){if(typeof window<"u"||typeof process>"u")return!1;const a=process.version;if(a==null)return!1;const r=a.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}shouldShowDeprecationWarning()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function noop$1(){}const extend$1=Object.assign,inBrowser$1=typeof window<"u",isObject$4=a=>a!==null&&typeof a=="object",isDef$1=a=>a!=null,isFunction$1=a=>typeof a=="function",isPromise=a=>isObject$4(a)&&isFunction$1(a.then)&&isFunction$1(a.catch),isNumeric$1=a=>typeof a=="number"||/^\d+(\.\d+)?$/.test(a),isIOS$1=()=>inBrowser$1?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function get$1(a,r){const n=r.split(".");let o=a;return n.forEach(s=>{var l;o=isObject$4(o)&&(l=o[s])!=null?l:""}),o}function pick(a,r,n){return r.reduce((o,s)=>((!n||a[s]!==void 0)&&(o[s]=a[s]),o),{})}const toArray$1=a=>Array.isArray(a)?a:[a],unknownProp=null,numericProp=[Number,String],truthProp={type:Boolean,default:!0},makeRequiredProp=a=>({type:a,required:!0}),makeArrayProp=()=>({type:Array,default:()=>[]}),makeNumberProp=a=>({type:Number,default:a}),makeNumericProp=a=>({type:numericProp,default:a}),makeStringProp=a=>({type:String,default:a});var inBrowser=typeof window<"u";function raf(a){return inBrowser?requestAnimationFrame(a):-1}function doubleRaf(a){raf(()=>raf(a))}var isWindow=a=>a===window,makeDOMRect=(a,r)=>({top:0,left:0,right:a,bottom:r,width:a,height:r}),useRect=a=>{const r=unref(a);if(isWindow(r)){const n=r.innerWidth,o=r.innerHeight;return makeDOMRect(n,o)}return r!=null&&r.getBoundingClientRect?r.getBoundingClientRect():makeDOMRect(0,0)};function useParent(a){const r=inject(a,null);if(r){const n=getCurrentInstance(),{link:o,unlink:s,internalChildren:l}=r;o(n),onUnmounted(()=>s(n));const u=computed(()=>l.indexOf(n));return{parent:r,index:u}}return{parent:null,index:ref(-1)}}function flattenVNodes(a){const r=[],n=o=>{Array.isArray(o)&&o.forEach(s=>{var l;isVNode(s)&&(r.push(s),(l=s.component)!=null&&l.subTree&&(r.push(s.component.subTree),n(s.component.subTree.children)),s.children&&n(s.children))})};return n(a),r}var findVNodeIndex=(a,r)=>{const n=a.indexOf(r);return n===-1?a.findIndex(o=>r.key!==void 0&&r.key!==null&&o.type===r.type&&o.key===r.key):n};function sortChildren(a,r,n){const o=flattenVNodes(a.subTree.children);n.sort((l,u)=>findVNodeIndex(o,l.vnode)-findVNodeIndex(o,u.vnode));const s=n.map(l=>l.proxy);r.sort((l,u)=>{const c=s.indexOf(l),f=s.indexOf(u);return c-f})}function useChildren(a){const r=reactive([]),n=reactive([]),o=getCurrentInstance();return{children:r,linkChildren:l=>{provide(a,Object.assign({link:f=>{f.proxy&&(n.push(f),r.push(f.proxy),sortChildren(o,r,n))},unlink:f=>{const d=n.indexOf(f);r.splice(d,1),n.splice(d,1)},children:r,internalChildren:n},l))}}}function onMountedOrActivated(a){let r;onMounted(()=>{a(),nextTick(()=>{r=!0})}),onActivated(()=>{r&&a()})}function useEventListener(a,r,n={}){if(!inBrowser)return;const{target:o=window,passive:s=!1,capture:l=!1}=n;let u=!1,c;const f=g=>{if(u)return;const y=unref(g);y&&!c&&(y.addEventListener(a,r,{capture:l,passive:s}),c=!0)},d=g=>{if(u)return;const y=unref(g);y&&c&&(y.removeEventListener(a,r,l),c=!1)};onUnmounted(()=>d(o)),onDeactivated(()=>d(o)),onMountedOrActivated(()=>f(o));let v;return isRef(o)&&(v=watch(o,(g,y)=>{d(y),f(g)})),()=>{v==null||v(),d(o),u=!0}}var width,height;function useWindowSize(){if(!width&&(width=ref(0),height=ref(0),inBrowser)){const a=()=>{width.value=window.innerWidth,height.value=window.innerHeight};a(),window.addEventListener("resize",a,{passive:!0}),window.addEventListener("orientationchange",a,{passive:!0})}return{width,height}}var overflowScrollReg=/scroll|auto|overlay/i,defaultRoot=inBrowser?window:void 0;function isElement(a){return a.tagName!=="HTML"&&a.tagName!=="BODY"&&a.nodeType===1}function getScrollParent(a,r=defaultRoot){let n=a;for(;n&&n!==r&&isElement(n);){const{overflowY:o}=window.getComputedStyle(n);if(overflowScrollReg.test(o))return n;n=n.parentNode}return r}var visibility;function usePageVisibility(){if(!visibility&&(visibility=ref("visible"),inBrowser)){const a=()=>{visibility.value=document.hidden?"hidden":"visible"};a(),window.addEventListener("visibilitychange",a)}return visibility}var CUSTOM_FIELD_INJECTION_KEY=Symbol("van-field");function useCustomFieldValue(a){const r=inject(CUSTOM_FIELD_INJECTION_KEY,null);r&&!r.customValue.value&&(r.customValue.value=a,watch(a,()=>{r.resetValidation(),r.validateWithTrigger("onChange")}))}function setScrollTop(a,r){"scrollTop"in a?a.scrollTop=r:a.scrollTo(a.scrollX,r)}function getRootScrollTop(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function setRootScrollTop(a){setScrollTop(window,a),setScrollTop(document.body,a)}const isIOS=isIOS$1();function resetScroll(){isIOS&&setRootScrollTop(getRootScrollTop())}const stopPropagation=a=>a.stopPropagation();function preventDefault$1(a,r){(typeof a.cancelable!="boolean"||a.cancelable)&&a.preventDefault(),r&&stopPropagation(a)}function isHidden(a){const r=unref(a);if(!r)return!1;const n=window.getComputedStyle(r),o=n.display==="none",s=r.offsetParent===null&&n.position!=="fixed";return o||s}const{width:windowWidth,height:windowHeight}=useWindowSize();function addUnit(a){if(isDef$1(a))return isNumeric$1(a)?`${a}px`:String(a)}function getSizeStyle(a){if(isDef$1(a)){if(Array.isArray(a))return{width:addUnit(a[0]),height:addUnit(a[1])};const r=addUnit(a);return{width:r,height:r}}}function getZIndexStyle(a){const r={};return a!==void 0&&(r.zIndex=+a),r}const camelizeRE=/-(\w)/g,camelize=a=>a.replace(camelizeRE,(r,n)=>n.toUpperCase()),clamp$1=(a,r,n)=>Math.min(Math.max(a,r),n);function trimExtraChar(a,r,n){const o=a.indexOf(r);return o===-1?a:r==="-"&&o!==0?a.slice(0,o):a.slice(0,o+1)+a.slice(o).replace(n,"")}function formatNumber(a,r=!0,n=!0){r?a=trimExtraChar(a,".",/\./g):a=a.split(".")[0],n?a=trimExtraChar(a,"-",/-/g):a=a.replace(/-/,"");const o=r?/[^-0-9.]/g:/[^-0-9]/g;return a.replace(o,"")}const{hasOwnProperty}=Object.prototype;function assignKey(a,r,n){const o=r[n];isDef$1(o)&&(!hasOwnProperty.call(a,n)||!isObject$4(o)?a[n]=o:a[n]=deepAssign(Object(a[n]),o))}function deepAssign(a,r){return Object.keys(r).forEach(n=>{assignKey(a,r,n)}),a}var stdin_default$n={name:"",tel:"",save:"",clear:"",cancel:"",confirm:"",delete:"",loading:"...",noCoupon:"",nameEmpty:"",addContact:"",telInvalid:"",vanCalendar:{end:"",start:"",title:"",weekdays:["","","","","","",""],monthTitle:(a,r)=>`${a}${r}`,rangePrompt:a=>` ${a} `},vanCascader:{select:""},vanPagination:{prev:"",next:""},vanPullRefresh:{pulling:"...",loosing:"..."},vanSubmitBar:{label:":"},vanCoupon:{unlimited:"",discount:a=>`${a}`,condition:a=>`${a}`},vanCouponCell:{title:"",count:a=>`${a}`},vanCouponList:{exchange:"",close:"",enable:"",disabled:"",placeholder:""},vanAddressEdit:{area:"",areaEmpty:"",addressEmpty:"",addressDetail:"",defaultAddress:""},vanAddressList:{add:""}};const lang=ref("zh-CN"),messages=reactive({"zh-CN":stdin_default$n}),Locale={messages(){return messages[lang.value]},use(a,r){lang.value=a,this.add({[a]:r})},add(a={}){deepAssign(messages,a)}};var stdin_default$m=Locale;function createTranslate(a){const r=camelize(a)+".";return(n,...o)=>{const s=stdin_default$m.messages(),l=get$1(s,r+n)||get$1(s,n);return isFunction$1(l)?l(...o):l}}function genBem(a,r){return r?typeof r=="string"?` ${a}--${r}`:Array.isArray(r)?r.reduce((n,o)=>n+genBem(a,o),""):Object.keys(r).reduce((n,o)=>n+(r[o]?genBem(a,o):""),""):""}function createBEM(a){return(r,n)=>(r&&typeof r!="string"&&(n=r,r=""),r=r?`${a}__${r}`:a,`${r}${genBem(r,n)}`)}function createNamespace(a){const r=`van-${a}`;return[r,createBEM(r),createTranslate(r)]}const BORDER="van-hairline",BORDER_TOP=`${BORDER}--top`,BORDER_LEFT=`${BORDER}--left`,BORDER_SURROUND=`${BORDER}--surround`,HAPTICS_FEEDBACK="van-haptics-feedback",FORM_KEY=Symbol("van-form"),LONG_PRESS_START_TIME=500,TAP_OFFSET=5;function callInterceptor(a,{args:r=[],done:n,canceled:o,error:s}){if(a){const l=a.apply(null,r);isPromise(l)?l.then(u=>{u?n():o&&o()}).catch(s||noop$1):l?n():o&&o()}else n()}function withInstall(a){return a.install=r=>{const{name:n}=a;n&&(r.component(n,a),r.component(camelize(`-${n}`),a))},a}const POPUP_TOGGLE_KEY=Symbol();function onPopupReopen(a){const r=inject(POPUP_TOGGLE_KEY,null);r&&watch(r,n=>{n&&a()})}const useHeight=(a,r)=>{const n=ref(),o=()=>{n.value=useRect(a).height};return onMounted(()=>{nextTick(o);for(let s=1;s<=3;s++)setTimeout(o,100*s)}),onPopupReopen(()=>nextTick(o)),watch([windowWidth,windowHeight],o),n};function usePlaceholder(a,r){const n=useHeight(a);return o=>createVNode$1("div",{class:r("placeholder"),style:{height:n.value?`${n.value}px`:void 0}},[o()])}const[name$k,bem$j]=createNamespace("action-bar"),ACTION_BAR_KEY=Symbol(name$k),actionBarProps={placeholder:Boolean,safeAreaInsetBottom:truthProp};var stdin_default$l=defineComponent({name:name$k,props:actionBarProps,setup(a,{slots:r}){const n=ref(),o=usePlaceholder(n,bem$j),{linkChildren:s}=useChildren(ACTION_BAR_KEY);s();const l=()=>{var u;return createVNode$1("div",{ref:n,class:[bem$j(),{"van-safe-area-bottom":a.safeAreaInsetBottom}]},[(u=r.default)==null?void 0:u.call(r)])};return()=>a.placeholder?o(l):l()}});const ActionBar=withInstall(stdin_default$l);function useExpose(a){const r=getCurrentInstance();r&&extend$1(r.proxy,a)}const routeProps={to:[String,Object],url:String,replace:Boolean};function route({to:a,url:r,replace:n,$router:o}){a&&o?o[n?"replace":"push"](a):r&&(n?location.replace(r):location.href=r)}function useRoute(){const a=getCurrentInstance().proxy;return()=>route(a)}const[name$j,bem$i]=createNamespace("badge"),badgeProps={dot:Boolean,max:numericProp,tag:makeStringProp("div"),color:String,offset:Array,content:numericProp,showZero:truthProp,position:makeStringProp("top-right")};var stdin_default$k=defineComponent({name:name$j,props:badgeProps,setup(a,{slots:r}){const n=()=>{if(r.content)return!0;const{content:c,showZero:f}=a;return isDef$1(c)&&c!==""&&(f||c!==0&&c!=="0")},o=()=>{const{dot:c,max:f,content:d}=a;if(!c&&n())return r.content?r.content():isDef$1(f)&&isNumeric$1(d)&&+d>+f?`${f}+`:d},s=c=>c.startsWith("-")?c.replace("-",""):`-${c}`,l=computed(()=>{const c={background:a.color};if(a.offset){const[f,d]=a.offset,{position:v}=a,[g,y]=v.split("-");r.default?(typeof d=="number"?c[g]=addUnit(g==="top"?d:-d):c[g]=g==="top"?addUnit(d):s(d),typeof f=="number"?c[y]=addUnit(y==="left"?f:-f):c[y]=y==="left"?addUnit(f):s(f)):(c.marginTop=addUnit(d),c.marginLeft=addUnit(f))}return c}),u=()=>{if(n()||a.dot)return createVNode$1("div",{class:bem$i([a.position,{dot:a.dot,fixed:!!r.default}]),style:l.value},[o()])};return()=>{if(r.default){const{tag:c}=a;return createVNode$1(c,{class:bem$i("wrapper")},{default:()=>[r.default(),u()]})}return u()}}});const Badge=withInstall(stdin_default$k);let globalZIndex=2e3;const useGlobalZIndex=()=>++globalZIndex,[name$i]=createNamespace("config-provider"),CONFIG_PROVIDER_KEY=Symbol(name$i),[name$h,bem$h]=createNamespace("icon"),isImage=a=>a==null?void 0:a.includes("/"),iconProps={dot:Boolean,tag:makeStringProp("i"),name:String,size:numericProp,badge:numericProp,color:String,badgeProps:Object,classPrefix:String};var stdin_default$j=defineComponent({name:name$h,props:iconProps,setup(a,{slots:r}){const n=inject(CONFIG_PROVIDER_KEY,null),o=computed(()=>a.classPrefix||(n==null?void 0:n.iconPrefix)||bem$h());return()=>{const{tag:s,dot:l,name:u,size:c,badge:f,color:d}=a,v=isImage(u);return createVNode$1(Badge,mergeProps({dot:l,tag:s,class:[o.value,v?"":`${o.value}-${u}`],style:{color:d,fontSize:addUnit(c)},content:f},a.badgeProps),{default:()=>{var g;return[(g=r.default)==null?void 0:g.call(r),v&&createVNode$1("img",{class:bem$h("image"),src:u},null)]}})}}});const Icon=withInstall(stdin_default$j),[name$g,bem$g]=createNamespace("loading"),SpinIcon=Array(12).fill(null).map((a,r)=>createVNode$1("i",{class:bem$g("line",String(r+1))},null)),CircularIcon=createVNode$1("svg",{class:bem$g("circular"),viewBox:"25 25 50 50"},[createVNode$1("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),loadingProps={size:numericProp,type:makeStringProp("circular"),color:String,vertical:Boolean,textSize:numericProp,textColor:String};var stdin_default$i=defineComponent({name:name$g,props:loadingProps,setup(a,{slots:r}){const n=computed(()=>extend$1({color:a.color},getSizeStyle(a.size))),o=()=>{const l=a.type==="spinner"?SpinIcon:CircularIcon;return createVNode$1("span",{class:bem$g("spinner",a.type),style:n.value},[r.icon?r.icon():l])},s=()=>{var l;if(r.default)return createVNode$1("span",{class:bem$g("text"),style:{fontSize:addUnit(a.textSize),color:(l=a.textColor)!=null?l:a.color}},[r.default()])};return()=>{const{type:l,vertical:u}=a;return createVNode$1("div",{class:bem$g([l,{vertical:u}]),"aria-live":"polite","aria-busy":!0},[o(),s()])}}});const Loading=withInstall(stdin_default$i),[name$f,bem$f]=createNamespace("button"),buttonProps=extend$1({},routeProps,{tag:makeStringProp("button"),text:String,icon:String,type:makeStringProp("default"),size:makeStringProp("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:makeStringProp("button"),loadingSize:numericProp,loadingText:String,loadingType:String,iconPosition:makeStringProp("left")});var stdin_default$h=defineComponent({name:name$f,props:buttonProps,emits:["click"],setup(a,{emit:r,slots:n}){const o=useRoute(),s=()=>n.loading?n.loading():createVNode$1(Loading,{size:a.loadingSize,type:a.loadingType,class:bem$f("loading")},null),l=()=>{if(a.loading)return s();if(n.icon)return createVNode$1("div",{class:bem$f("icon")},[n.icon()]);if(a.icon)return createVNode$1(Icon,{name:a.icon,class:bem$f("icon"),classPrefix:a.iconPrefix},null)},u=()=>{let d;if(a.loading?d=a.loadingText:d=n.default?n.default():a.text,d)return createVNode$1("span",{class:bem$f("text")},[d])},c=()=>{const{color:d,plain:v}=a;if(d){const g={color:v?d:"white"};return v||(g.background=d),d.includes("gradient")?g.border=0:g.borderColor=d,g}},f=d=>{a.loading?preventDefault$1(d):a.disabled||(r("click",d),o())};return()=>{const{tag:d,type:v,size:g,block:y,round:_,plain:S,square:b,loading:x,disabled:T,hairline:A,nativeType:w,iconPosition:C}=a,E=[bem$f([v,g,{plain:S,block:y,round:_,square:b,loading:x,disabled:T,hairline:A}]),{[BORDER_SURROUND]:A}];return createVNode$1(d,{type:w,class:E,style:c(),disabled:T,onClick:f},{default:()=>[createVNode$1("div",{class:bem$f("content")},[C==="left"&&l(),u(),C==="right"&&l()])]})}}});const Button=withInstall(stdin_default$h),[name$e,bem$e]=createNamespace("action-bar-button"),actionBarButtonProps=extend$1({},routeProps,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var stdin_default$g=defineComponent({name:name$e,props:actionBarButtonProps,setup(a,{slots:r}){const n=useRoute(),{parent:o,index:s}=useParent(ACTION_BAR_KEY),l=computed(()=>{if(o){const c=o.children[s.value-1];return!(c&&"isButton"in c)}}),u=computed(()=>{if(o){const c=o.children[s.value+1];return!(c&&"isButton"in c)}});return useExpose({isButton:!0}),()=>{const{type:c,icon:f,text:d,color:v,loading:g,disabled:y}=a;return createVNode$1(Button,{class:bem$e([c,{last:u.value,first:l.value}]),size:"large",type:c,icon:f,color:v,loading:g,disabled:y,onClick:n},{default:()=>[r.default?r.default():d]})}}});const ActionBarButton=withInstall(stdin_default$g),popupSharedProps={show:Boolean,zIndex:numericProp,overlay:truthProp,duration:numericProp,teleport:[String,Object],lockScroll:truthProp,lazyRender:truthProp,beforeClose:Function,overlayProps:Object,overlayStyle:Object,overlayClass:unknownProp,transitionAppear:Boolean,closeOnClickOverlay:truthProp},popupSharedPropKeys=Object.keys(popupSharedProps);function getDirection(a,r){return a>r?"horizontal":r>a?"vertical":""}function useTouch(){const a=ref(0),r=ref(0),n=ref(0),o=ref(0),s=ref(0),l=ref(0),u=ref(""),c=ref(!0),f=()=>u.value==="vertical",d=()=>u.value==="horizontal",v=()=>{n.value=0,o.value=0,s.value=0,l.value=0,u.value="",c.value=!0};return{move:_=>{const S=_.touches[0];n.value=(S.clientX<0?0:S.clientX)-a.value,o.value=S.clientY-r.value,s.value=Math.abs(n.value),l.value=Math.abs(o.value);const b=10;(!u.value||s.value<b&&l.value<b)&&(u.value=getDirection(s.value,l.value)),c.value&&(s.value>TAP_OFFSET||l.value>TAP_OFFSET)&&(c.value=!1)},start:_=>{v(),a.value=_.touches[0].clientX,r.value=_.touches[0].clientY},reset:v,startX:a,startY:r,deltaX:n,deltaY:o,offsetX:s,offsetY:l,direction:u,isVertical:f,isHorizontal:d,isTap:c}}let totalLockCount=0;const BODY_LOCK_CLASS="van-overflow-hidden";function useLockScroll(a,r){const n=useTouch(),o="01",s="10",l=v=>{n.move(v);const g=n.deltaY.value>0?s:o,y=getScrollParent(v.target,a.value),{scrollHeight:_,offsetHeight:S,scrollTop:b}=y;let x="11";b===0?x=S>=_?"00":"01":b+S>=_&&(x="10"),x!=="11"&&n.isVertical()&&!(parseInt(x,2)&parseInt(g,2))&&preventDefault$1(v,!0)},u=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",l,{passive:!1}),totalLockCount||document.body.classList.add(BODY_LOCK_CLASS),totalLockCount++},c=()=>{totalLockCount&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",l),totalLockCount--,totalLockCount||document.body.classList.remove(BODY_LOCK_CLASS))},f=()=>r()&&u(),d=()=>r()&&c();onMountedOrActivated(f),onDeactivated(d),onBeforeUnmount(d),watch(r,v=>{v?u():c()})}function useLazyRender(a){const r=ref(!1);return watch(a,n=>{n&&(r.value=n)},{immediate:!0}),n=>()=>r.value?n():null}const useScopeId=()=>{var a;const{scopeId:r}=((a=getCurrentInstance())==null?void 0:a.vnode)||{};return r?{[r]:""}:null},[name$d,bem$d]=createNamespace("overlay"),overlayProps={show:Boolean,zIndex:numericProp,duration:numericProp,className:unknownProp,lockScroll:truthProp,lazyRender:truthProp,customStyle:Object,teleport:[String,Object]};var stdin_default$f=defineComponent({name:name$d,inheritAttrs:!1,props:overlayProps,setup(a,{attrs:r,slots:n}){const o=ref(),s=useLazyRender(()=>a.show||!a.lazyRender),l=c=>{a.lockScroll&&preventDefault$1(c,!0)},u=s(()=>{var c;const f=extend$1(getZIndexStyle(a.zIndex),a.customStyle);return isDef$1(a.duration)&&(f.animationDuration=`${a.duration}s`),withDirectives(createVNode$1("div",mergeProps({ref:o,style:f,class:[bem$d(),a.className]},r),[(c=n.default)==null?void 0:c.call(n)]),[[vShow,a.show]])});return useEventListener("touchmove",l,{target:o}),()=>{const c=createVNode$1(Transition,{name:"van-fade",appear:!0},{default:u});return a.teleport?createVNode$1(Teleport,{to:a.teleport},{default:()=>[c]}):c}}});const Overlay=withInstall(stdin_default$f),popupProps$1=extend$1({},popupSharedProps,{round:Boolean,position:makeStringProp("center"),closeIcon:makeStringProp("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:makeStringProp("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[name$c,bem$c]=createNamespace("popup");var stdin_default$e=defineComponent({name:name$c,inheritAttrs:!1,props:popupProps$1,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(a,{emit:r,attrs:n,slots:o}){let s,l;const u=ref(),c=ref(),f=useLazyRender(()=>a.show||!a.lazyRender),d=computed(()=>{const P={zIndex:u.value};if(isDef$1(a.duration)){const I=a.position==="center"?"animationDuration":"transitionDuration";P[I]=`${a.duration}s`}return P}),v=()=>{s||(s=!0,u.value=a.zIndex!==void 0?+a.zIndex:useGlobalZIndex(),r("open"))},g=()=>{s&&callInterceptor(a.beforeClose,{done(){s=!1,r("close"),r("update:show",!1)}})},y=P=>{r("clickOverlay",P),a.closeOnClickOverlay&&g()},_=()=>{if(a.overlay){const P=extend$1({show:a.show,class:a.overlayClass,zIndex:u.value,duration:a.duration,customStyle:a.overlayStyle,role:a.closeOnClickOverlay?"button":void 0,tabindex:a.closeOnClickOverlay?0:void 0},a.overlayProps);return createVNode$1(Overlay,mergeProps(P,useScopeId(),{onClick:y}),{default:o["overlay-content"]})}},S=P=>{r("clickCloseIcon",P),g()},b=()=>{if(a.closeable)return createVNode$1(Icon,{role:"button",tabindex:0,name:a.closeIcon,class:[bem$c("close-icon",a.closeIconPosition),HAPTICS_FEEDBACK],classPrefix:a.iconPrefix,onClick:S},null)};let x;const T=()=>{x&&clearTimeout(x),x=setTimeout(()=>{r("opened")})},A=()=>r("closed"),w=P=>r("keydown",P),C=f(()=>{var P;const{destroyOnClose:I,round:M,position:R,safeAreaInsetTop:O,safeAreaInsetBottom:$,show:B}=a;if(!(!B&&I))return withDirectives(createVNode$1("div",mergeProps({ref:c,style:d.value,role:"dialog",tabindex:0,class:[bem$c({round:M,[R]:R}),{"van-safe-area-top":O,"van-safe-area-bottom":$}],onKeydown:w},n,useScopeId()),[(P=o.default)==null?void 0:P.call(o),b()]),[[vShow,B]])}),E=()=>{const{position:P,transition:I,transitionAppear:M}=a,R=P==="center"?"van-fade":`van-popup-slide-${P}`;return createVNode$1(Transition,{name:I||R,appear:M,onAfterEnter:T,onAfterLeave:A},{default:C})};return watch(()=>a.show,P=>{P&&!s&&(v(),n.tabindex===0&&nextTick(()=>{var I;(I=c.value)==null||I.focus()})),!P&&s&&(s=!1,r("close"))}),useExpose({popupRef:c}),useLockScroll(c,()=>a.show&&a.lockScroll),useEventListener("popstate",()=>{a.closeOnPopstate&&(g(),l=!1)}),onMounted(()=>{a.show&&v()}),onActivated(()=>{l&&(r("update:show",!0),l=!1)}),onDeactivated(()=>{a.show&&a.teleport&&(g(),l=!0)}),provide(POPUP_TOGGLE_KEY,()=>a.show),()=>a.teleport?createVNode$1(Teleport,{to:a.teleport},{default:()=>[_(),E()]}):createVNode$1(Fragment,null,[_(),E()])}});const Popup=withInstall(stdin_default$e);let current=0;function useId(){const a=getCurrentInstance(),{name:r="unknown"}=(a==null?void 0:a.type)||{};return`${r}-${++current}`}const[name$b,bem$b]=createNamespace("swipe"),swipeProps={loop:truthProp,width:numericProp,height:numericProp,vertical:Boolean,autoplay:makeNumericProp(0),duration:makeNumericProp(500),touchable:truthProp,lazyRender:Boolean,initialSwipe:makeNumericProp(0),indicatorColor:String,showIndicators:truthProp,stopPropagation:truthProp},SWIPE_KEY=Symbol(name$b);var stdin_default$d=defineComponent({name:name$b,props:swipeProps,emits:["change","dragStart","dragEnd"],setup(a,{emit:r,slots:n}){const o=ref(),s=ref(),l=reactive({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let u=!1;const c=useTouch(),{children:f,linkChildren:d}=useChildren(SWIPE_KEY),v=computed(()=>f.length),g=computed(()=>l[a.vertical?"height":"width"]),y=computed(()=>a.vertical?c.deltaY.value:c.deltaX.value),_=computed(()=>l.rect?(a.vertical?l.rect.height:l.rect.width)-g.value*v.value:0),S=computed(()=>g.value?Math.ceil(Math.abs(_.value)/g.value):v.value),b=computed(()=>v.value*g.value),x=computed(()=>(l.active+v.value)%v.value),T=computed(()=>{const H=a.vertical?"vertical":"horizontal";return c.direction.value===H}),A=computed(()=>{const H={transitionDuration:`${l.swiping?0:a.duration}ms`,transform:`translate${a.vertical?"Y":"X"}(${+l.offset.toFixed(2)}px)`};if(g.value){const q=a.vertical?"height":"width",Z=a.vertical?"width":"height";H[q]=`${b.value}px`,H[Z]=a[Z]?`${a[Z]}px`:""}return H}),w=H=>{const{active:q}=l;return H?a.loop?clamp$1(q+H,-1,v.value):clamp$1(q+H,0,S.value):q},C=(H,q=0)=>{let Z=H*g.value;a.loop||(Z=Math.min(Z,-_.value));let ee=q-Z;return a.loop||(ee=clamp$1(ee,_.value,0)),ee},E=({pace:H=0,offset:q=0,emitChange:Z})=>{if(v.value<=1)return;const{active:ee}=l,ne=w(H),ue=C(ne,q);if(a.loop){if(f[0]&&ue!==_.value){const K=ue<_.value;f[0].setOffset(K?b.value:0)}if(f[v.value-1]&&ue!==0){const K=ue>0;f[v.value-1].setOffset(K?-b.value:0)}}l.active=ne,l.offset=ue,Z&&ne!==ee&&r("change",x.value)},P=()=>{l.swiping=!0,l.active<=-1?E({pace:v.value}):l.active>=v.value&&E({pace:-v.value})},I=()=>{P(),c.reset(),doubleRaf(()=>{l.swiping=!1,E({pace:-1,emitChange:!0})})},M=()=>{P(),c.reset(),doubleRaf(()=>{l.swiping=!1,E({pace:1,emitChange:!0})})};let R;const O=()=>clearTimeout(R),$=()=>{O(),+a.autoplay>0&&v.value>1&&(R=setTimeout(()=>{M(),$()},+a.autoplay))},B=(H=+a.initialSwipe)=>{if(!o.value)return;const q=()=>{var Z,ee;if(!isHidden(o)){const ne={width:o.value.offsetWidth,height:o.value.offsetHeight};l.rect=ne,l.width=+((Z=a.width)!=null?Z:ne.width),l.height=+((ee=a.height)!=null?ee:ne.height)}v.value&&(H=Math.min(v.value-1,H),H===-1&&(H=v.value-1)),l.active=H,l.swiping=!0,l.offset=C(H),f.forEach(ne=>{ne.setOffset(0)}),$()};isHidden(o)?nextTick().then(q):q()},F=()=>B(l.active);let z;const G=H=>{!a.touchable||H.touches.length>1||(c.start(H),u=!1,z=Date.now(),O(),P())},D=H=>{a.touchable&&l.swiping&&(c.move(H),T.value&&(!a.loop&&(l.active===0&&y.value>0||l.active===v.value-1&&y.value<0)||(preventDefault$1(H,a.stopPropagation),E({offset:y.value}),u||(r("dragStart",{index:x.value}),u=!0))))},V=()=>{if(!a.touchable||!l.swiping)return;const H=Date.now()-z,q=y.value/H;if((Math.abs(q)>.25||Math.abs(y.value)>g.value/2)&&T.value){const ee=a.vertical?c.offsetY.value:c.offsetX.value;let ne=0;a.loop?ne=ee>0?y.value>0?-1:1:0:ne=-Math[y.value>0?"ceil":"floor"](y.value/g.value),E({pace:ne,emitChange:!0})}else y.value&&E({pace:0});u=!1,l.swiping=!1,r("dragEnd",{index:x.value}),$()},L=(H,q={})=>{P(),c.reset(),doubleRaf(()=>{let Z;a.loop&&H===v.value?Z=l.active===0?0:H:Z=H%v.value,q.immediate?doubleRaf(()=>{l.swiping=!1}):l.swiping=!1,E({pace:Z-l.active,emitChange:!0})})},N=(H,q)=>{const Z=q===x.value,ee=Z?{backgroundColor:a.indicatorColor}:void 0;return createVNode$1("i",{style:ee,class:bem$b("indicator",{active:Z})},null)},U=()=>{if(n.indicator)return n.indicator({active:x.value,total:v.value});if(a.showIndicators&&v.value>1)return createVNode$1("div",{class:bem$b("indicators",{vertical:a.vertical})},[Array(v.value).fill("").map(N)])};return useExpose({prev:I,next:M,state:l,resize:F,swipeTo:L}),d({size:g,props:a,count:v,activeIndicator:x}),watch(()=>a.initialSwipe,H=>B(+H)),watch(v,()=>B(l.active)),watch(()=>a.autoplay,$),watch([windowWidth,windowHeight,()=>a.width,()=>a.height],F),watch(usePageVisibility(),H=>{H==="visible"?$():O()}),onMounted(B),onActivated(()=>B(l.active)),onPopupReopen(()=>B(l.active)),onDeactivated(O),onBeforeUnmount(O),useEventListener("touchmove",D,{target:s}),()=>{var H;return createVNode$1("div",{ref:o,class:bem$b()},[createVNode$1("div",{ref:s,style:A.value,class:bem$b("track",{vertical:a.vertical}),onTouchstartPassive:G,onTouchend:V,onTouchcancel:V},[(H=n.default)==null?void 0:H.call(n)]),U()])}}});const Swipe=withInstall(stdin_default$d),[name$a,bem$a]=createNamespace("swipe-item");var stdin_default$c=defineComponent({name:name$a,setup(a,{slots:r}){let n;const o=reactive({offset:0,inited:!1,mounted:!1}),{parent:s,index:l}=useParent(SWIPE_KEY);if(!s)return;const u=computed(()=>{const d={},{vertical:v}=s.props;return s.size.value&&(d[v?"height":"width"]=`${s.size.value}px`),o.offset&&(d.transform=`translate${v?"Y":"X"}(${o.offset}px)`),d}),c=computed(()=>{const{loop:d,lazyRender:v}=s.props;if(!v||n)return!0;if(!o.mounted)return!1;const g=s.activeIndicator.value,y=s.count.value-1,_=g===0&&d?y:g-1,S=g===y&&d?0:g+1;return n=l.value===g||l.value===_||l.value===S,n}),f=d=>{o.offset=d};return onMounted(()=>{nextTick(()=>{o.mounted=!0})}),useExpose({setOffset:f}),()=>{var d;return createVNode$1("div",{class:bem$a(),style:u.value},[c.value?(d=r.default)==null?void 0:d.call(r):null])}}});const SwipeItem=withInstall(stdin_default$c),[name$9,bem$9]=createNamespace("cell"),cellSharedProps={tag:makeStringProp("div"),icon:String,size:String,title:numericProp,value:numericProp,label:numericProp,center:Boolean,isLink:Boolean,border:truthProp,iconPrefix:String,valueClass:unknownProp,labelClass:unknownProp,titleClass:unknownProp,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},cellProps=extend$1({},cellSharedProps,routeProps);var stdin_default$b=defineComponent({name:name$9,props:cellProps,setup(a,{slots:r}){const n=useRoute(),o=()=>{if(r.label||isDef$1(a.label))return createVNode$1("div",{class:[bem$9("label"),a.labelClass]},[r.label?r.label():a.label])},s=()=>{var f;if(r.title||isDef$1(a.title)){const d=(f=r.title)==null?void 0:f.call(r);return Array.isArray(d)&&d.length===0?void 0:createVNode$1("div",{class:[bem$9("title"),a.titleClass],style:a.titleStyle},[d||createVNode$1("span",null,[a.title]),o()])}},l=()=>{const f=r.value||r.default;if(f||isDef$1(a.value))return createVNode$1("div",{class:[bem$9("value"),a.valueClass]},[f?f():createVNode$1("span",null,[a.value])])},u=()=>{if(r.icon)return r.icon();if(a.icon)return createVNode$1(Icon,{name:a.icon,class:bem$9("left-icon"),classPrefix:a.iconPrefix},null)},c=()=>{if(r["right-icon"])return r["right-icon"]();if(a.isLink){const f=a.arrowDirection&&a.arrowDirection!=="right"?`arrow-${a.arrowDirection}`:"arrow";return createVNode$1(Icon,{name:f,class:bem$9("right-icon")},null)}};return()=>{var f;const{tag:d,size:v,center:g,border:y,isLink:_,required:S}=a,b=(f=a.clickable)!=null?f:_,x={center:g,required:!!S,clickable:b,borderless:!y};return v&&(x[v]=!!v),createVNode$1(d,{class:bem$9(x),role:b?"button":void 0,tabindex:b?0:void 0,onClick:n},{default:()=>{var T;return[u(),s(),l(),c(),(T=r.extra)==null?void 0:T.call(r)]}})}}});const Cell=withInstall(stdin_default$b);function isEmptyValue$1(a){return Array.isArray(a)?!a.length:a===0?!1:!a}function runSyncRule(a,r){if(isEmptyValue$1(a)){if(r.required)return!1;if(r.validateEmpty===!1)return!0}return!(r.pattern&&!r.pattern.test(String(a)))}function runRuleValidator(a,r){return new Promise(n=>{const o=r.validator(a,r);if(isPromise(o)){o.then(n);return}n(o)})}function getRuleMessage(a,r){const{message:n}=r;return isFunction$1(n)?n(a,r):n||""}function startComposing({target:a}){a.composing=!0}function endComposing({target:a}){a.composing&&(a.composing=!1,a.dispatchEvent(new Event("input")))}function resizeTextarea(a,r){const n=getRootScrollTop();a.style.height="auto";let o=a.scrollHeight;if(isObject$4(r)){const{maxHeight:s,minHeight:l}=r;s!==void 0&&(o=Math.min(o,s)),l!==void 0&&(o=Math.max(o,l))}o&&(a.style.height=`${o}px`,setRootScrollTop(n))}function mapInputType(a,r){return a==="number"&&(a="text",r??(r="decimal")),a==="digit"&&(a="tel",r??(r="numeric")),{type:a,inputmode:r}}function getStringLength(a){return[...a].length}function cutString(a,r){return[...a].slice(0,r).join("")}const[name$8,bem$8]=createNamespace("field"),fieldSharedProps={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:numericProp,max:Number,min:Number,formatter:Function,clearIcon:makeStringProp("clear"),modelValue:makeNumericProp(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:makeStringProp("focus"),formatTrigger:makeStringProp("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},fieldProps=extend$1({},cellSharedProps,fieldSharedProps,{rows:numericProp,type:makeStringProp("text"),rules:Array,autosize:[Boolean,Object],labelWidth:numericProp,labelClass:unknownProp,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var stdin_default$a=defineComponent({name:name$8,props:fieldProps,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(a,{emit:r,slots:n}){const o=useId(),s=reactive({status:"unvalidated",focused:!1,validateMessage:""}),l=ref(),u=ref(),c=ref(),{parent:f}=useParent(FORM_KEY),d=()=>{var K;return String((K=a.modelValue)!=null?K:"")},v=K=>{if(isDef$1(a[K]))return a[K];if(f&&isDef$1(f.props[K]))return f.props[K]},g=computed(()=>{const K=v("readonly");if(a.clearable&&!K){const J=d()!=="",X=a.clearTrigger==="always"||a.clearTrigger==="focus"&&s.focused;return J&&X}return!1}),y=computed(()=>c.value&&n.input?c.value():a.modelValue),_=computed(()=>{var K;const J=v("required");return J==="auto"?(K=a.rules)==null?void 0:K.some(X=>X.required):J}),S=K=>K.reduce((J,X)=>J.then(()=>{if(s.status==="failed")return;let{value:ie}=y;if(X.formatter&&(ie=X.formatter(ie,X)),!runSyncRule(ie,X)){s.status="failed",s.validateMessage=getRuleMessage(ie,X);return}if(X.validator)return isEmptyValue$1(ie)&&X.validateEmpty===!1?void 0:runRuleValidator(ie,X).then(te=>{te&&typeof te=="string"?(s.status="failed",s.validateMessage=te):te===!1&&(s.status="failed",s.validateMessage=getRuleMessage(ie,X))})}),Promise.resolve()),b=()=>{s.status="unvalidated",s.validateMessage=""},x=()=>r("endValidate",{status:s.status,message:s.validateMessage}),T=(K=a.rules)=>new Promise(J=>{b(),K?(r("startValidate"),S(K).then(()=>{s.status==="failed"?(J({name:a.name,message:s.validateMessage}),x()):(s.status="passed",J(),x())})):J()}),A=K=>{if(f&&a.rules){const{validateTrigger:J}=f.props,X=toArray$1(J).includes(K),ie=a.rules.filter(te=>te.trigger?toArray$1(te.trigger).includes(K):X);ie.length&&T(ie)}},w=K=>{var J;const{maxlength:X}=a;if(isDef$1(X)&&getStringLength(K)>+X){const ie=d();if(ie&&getStringLength(ie)===+X)return ie;const te=(J=l.value)==null?void 0:J.selectionEnd;if(s.focused&&te){const W=[...K],Y=W.length-+X;return W.splice(te-Y,Y),W.join("")}return cutString(K,+X)}return K},C=(K,J="onChange")=>{var X,ie;const te=K;K=w(K);const W=te.length-K.length;if(a.type==="number"||a.type==="digit"){const j=a.type==="number";if(K=formatNumber(K,j,j),J==="onBlur"&&K!==""&&(a.min!==void 0||a.max!==void 0)){const Q=clamp$1(+K,(X=a.min)!=null?X:-1/0,(ie=a.max)!=null?ie:1/0);+K!==Q&&(K=Q.toString())}}let Y=0;if(a.formatter&&J===a.formatTrigger){const{formatter:j,maxlength:Q}=a;if(K=j(K),isDef$1(Q)&&getStringLength(K)>+Q&&(K=cutString(K,+Q)),l.value&&s.focused){const{selectionEnd:re}=l.value,ae=cutString(te,re);Y=j(ae).length-ae.length}}if(l.value&&l.value.value!==K)if(s.focused){let{selectionStart:j,selectionEnd:Q}=l.value;if(l.value.value=K,isDef$1(j)&&isDef$1(Q)){const re=K.length;W?(j-=W,Q-=W):Y&&(j+=Y,Q+=Y),l.value.setSelectionRange(Math.min(j,re),Math.min(Q,re))}}else l.value.value=K;K!==a.modelValue&&r("update:modelValue",K)},E=K=>{K.target.composing||C(K.target.value)},P=()=>{var K;return(K=l.value)==null?void 0:K.blur()},I=()=>{var K;return(K=l.value)==null?void 0:K.focus()},M=()=>{const K=l.value;a.type==="textarea"&&a.autosize&&K&&resizeTextarea(K,a.autosize)},R=K=>{s.focused=!0,r("focus",K),nextTick(M),v("readonly")&&P()},O=K=>{s.focused=!1,C(d(),"onBlur"),r("blur",K),!v("readonly")&&(A("onBlur"),nextTick(M),resetScroll())},$=K=>r("clickInput",K),B=K=>r("clickLeftIcon",K),F=K=>r("clickRightIcon",K),z=K=>{preventDefault$1(K),r("update:modelValue",""),r("clear",K)},G=computed(()=>{if(typeof a.error=="boolean")return a.error;if(f&&f.props.showError&&s.status==="failed")return!0}),D=computed(()=>{const K=v("labelWidth"),J=v("labelAlign");if(K&&J!=="top")return{width:addUnit(K)}}),V=K=>{K.keyCode===13&&(!(f&&f.props.submitOnEnter)&&a.type!=="textarea"&&preventDefault$1(K),a.type==="search"&&P()),r("keypress",K)},L=()=>a.id||`${o}-input`,N=()=>s.status,U=()=>{const K=bem$8("control",[v("inputAlign"),{error:G.value,custom:!!n.input,"min-height":a.type==="textarea"&&!a.autosize}]);if(n.input)return createVNode$1("div",{class:K,onClick:$},[n.input()]);const J={id:L(),ref:l,name:a.name,rows:a.rows!==void 0?+a.rows:void 0,class:K,disabled:v("disabled"),readonly:v("readonly"),autofocus:a.autofocus,placeholder:a.placeholder,autocomplete:a.autocomplete,autocapitalize:a.autocapitalize,autocorrect:a.autocorrect,enterkeyhint:a.enterkeyhint,spellcheck:a.spellcheck,"aria-labelledby":a.label?`${o}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:O,onFocus:R,onInput:E,onClick:$,onChange:endComposing,onKeypress:V,onCompositionend:endComposing,onCompositionstart:startComposing};return a.type==="textarea"?createVNode$1("textarea",mergeProps(J,{inputmode:a.inputmode}),null):createVNode$1("input",mergeProps(mapInputType(a.type,a.inputmode),J),null)},H=()=>{const K=n["left-icon"];if(a.leftIcon||K)return createVNode$1("div",{class:bem$8("left-icon"),onClick:B},[K?K():createVNode$1(Icon,{name:a.leftIcon,classPrefix:a.iconPrefix},null)])},q=()=>{const K=n["right-icon"];if(a.rightIcon||K)return createVNode$1("div",{class:bem$8("right-icon"),onClick:F},[K?K():createVNode$1(Icon,{name:a.rightIcon,classPrefix:a.iconPrefix},null)])},Z=()=>{if(a.showWordLimit&&a.maxlength){const K=getStringLength(d());return createVNode$1("div",{class:bem$8("word-limit")},[createVNode$1("span",{class:bem$8("word-num")},[K]),createTextVNode("/"),a.maxlength])}},ee=()=>{if(f&&f.props.showErrorMessage===!1)return;const K=a.errorMessage||s.validateMessage;if(K){const J=n["error-message"],X=v("errorMessageAlign");return createVNode$1("div",{class:bem$8("error-message",X)},[J?J({message:K}):K])}},ne=()=>{const K=v("labelWidth"),J=v("labelAlign"),X=v("colon")?":":"";if(n.label)return[n.label(),X];if(a.label)return createVNode$1("label",{id:`${o}-label`,for:n.input?void 0:L(),"data-allow-mismatch":"attribute",onClick:ie=>{preventDefault$1(ie),I()},style:J==="top"&&K?{width:addUnit(K)}:void 0},[a.label+X])},ue=()=>[createVNode$1("div",{class:bem$8("body")},[U(),g.value&&createVNode$1(Icon,{ref:u,name:a.clearIcon,class:bem$8("clear")},null),q(),n.button&&createVNode$1("div",{class:bem$8("button")},[n.button()])]),Z(),ee()];return useExpose({blur:P,focus:I,validate:T,formValue:y,resetValidation:b,getValidationStatus:N}),provide(CUSTOM_FIELD_INJECTION_KEY,{customValue:c,resetValidation:b,validateWithTrigger:A}),watch(()=>a.modelValue,()=>{C(d()),b(),A("onChange"),nextTick(M)}),onMounted(()=>{C(d(),a.formatTrigger),nextTick(M)}),useEventListener("touchstart",z,{target:computed(()=>{var K;return(K=u.value)==null?void 0:K.$el})}),()=>{const K=v("disabled"),J=v("labelAlign"),X=H(),ie=()=>{const te=ne();return J==="top"?[X,te].filter(Boolean):te||[]};return createVNode$1(Cell,{size:a.size,class:bem$8({error:G.value,disabled:K,[`label-${J}`]:J}),center:a.center,border:a.border,isLink:a.isLink,clickable:a.clickable,titleStyle:D.value,valueClass:bem$8("value"),titleClass:[bem$8("label",[J,{required:_.value}]),a.labelClass],arrowDirection:a.arrowDirection},{icon:X&&J!=="top"?()=>X:null,title:ie,value:ue,extra:n.extra})}}});const Field=withInstall(stdin_default$a);let lockCount=0;function lockClick(a){a?(lockCount||document.body.classList.add("van-toast--unclickable"),lockCount++):lockCount&&(lockCount--,lockCount||document.body.classList.remove("van-toast--unclickable"))}const[name$7,bem$7]=createNamespace("toast"),popupInheritProps=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],toastProps={icon:String,show:Boolean,type:makeStringProp("text"),overlay:Boolean,message:numericProp,iconSize:numericProp,duration:makeNumberProp(2e3),position:makeStringProp("middle"),teleport:[String,Object],wordBreak:String,className:unknownProp,iconPrefix:String,transition:makeStringProp("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:unknownProp,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:numericProp};var stdin_default$9=defineComponent({name:name$7,props:toastProps,emits:["update:show"],setup(a,{emit:r,slots:n}){let o,s=!1;const l=()=>{const g=a.show&&a.forbidClick;s!==g&&(s=g,lockClick(s))},u=g=>r("update:show",g),c=()=>{a.closeOnClick&&u(!1)},f=()=>clearTimeout(o),d=()=>{const{icon:g,type:y,iconSize:_,iconPrefix:S,loadingType:b}=a;if(g||y==="success"||y==="fail")return createVNode$1(Icon,{name:g||y,size:_,class:bem$7("icon"),classPrefix:S},null);if(y==="loading")return createVNode$1(Loading,{class:bem$7("loading"),size:_,type:b},null)},v=()=>{const{type:g,message:y}=a;if(n.message)return createVNode$1("div",{class:bem$7("text")},[n.message()]);if(isDef$1(y)&&y!=="")return g==="html"?createVNode$1("div",{key:0,class:bem$7("text"),innerHTML:String(y)},null):createVNode$1("div",{class:bem$7("text")},[y])};return watch(()=>[a.show,a.forbidClick],l),watch(()=>[a.show,a.type,a.message,a.duration],()=>{f(),a.show&&a.duration>0&&(o=setTimeout(()=>{u(!1)},a.duration))}),onMounted(l),onUnmounted(l),()=>createVNode$1(Popup,mergeProps({class:[bem$7([a.position,a.wordBreak==="normal"?"break-normal":a.wordBreak,{[a.type]:!a.icon}]),a.className],lockScroll:!1,onClick:c,onClosed:f,"onUpdate:show":u},pick(a,popupInheritProps)),{default:()=>[d(),v()]})}});function usePopupState(){const a=reactive({show:!1}),r=s=>{a.show=s},n=s=>{extend$1(a,s,{transitionAppear:!0}),r(!0)},o=()=>r(!1);return useExpose({open:n,close:o,toggle:r}),{open:n,close:o,state:a,toggle:r}}function mountComponent(a){const r=createApp(a),n=document.createElement("div");return document.body.appendChild(n),{instance:r.mount(n),unmount(){r.unmount(),document.body.removeChild(n)}}}const defaultOptions={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let queue=[],allowMultiple=!1,currentOptions$1=extend$1({},defaultOptions);const defaultOptionsMap=new Map;function parseOptions(a){return isObject$4(a)?a:{message:a}}function createInstance(){const{instance:a}=mountComponent({setup(){const r=ref(""),{open:n,state:o,close:s,toggle:l}=usePopupState(),u=()=>{},c=()=>createVNode$1(stdin_default$9,mergeProps(o,{onClosed:u,"onUpdate:show":l}),null);return watch(r,f=>{o.message=f}),getCurrentInstance().render=c,{open:n,close:s,message:r}}});return a}function getInstance(){if(!queue.length||allowMultiple){const a=createInstance();queue.push(a)}return queue[queue.length-1]}function showToast(a={}){if(!inBrowser$1)return{};const r=getInstance(),n=parseOptions(a);return r.open(extend$1({},currentOptions$1,defaultOptionsMap.get(n.type||currentOptions$1.type),n)),r}const createMethod=a=>r=>showToast(extend$1({type:a},parseOptions(r))),showLoadingToast=createMethod("loading"),showSuccessToast=createMethod("success"),showFailToast=createMethod("fail"),[name$6,bem$6]=createNamespace("switch"),switchProps={size:numericProp,loading:Boolean,disabled:Boolean,modelValue:unknownProp,activeColor:String,inactiveColor:String,activeValue:{type:unknownProp,default:!0},inactiveValue:{type:unknownProp,default:!1}};var stdin_default$8=defineComponent({name:name$6,props:switchProps,emits:["change","update:modelValue"],setup(a,{emit:r,slots:n}){const o=()=>a.modelValue===a.activeValue,s=()=>{if(!a.disabled&&!a.loading){const u=o()?a.inactiveValue:a.activeValue;r("update:modelValue",u),r("change",u)}},l=()=>{if(a.loading){const u=o()?a.activeColor:a.inactiveColor;return createVNode$1(Loading,{class:bem$6("loading"),color:u},null)}if(n.node)return n.node()};return useCustomFieldValue(()=>a.modelValue),()=>{var u;const{size:c,loading:f,disabled:d,activeColor:v,inactiveColor:g}=a,y=o(),_={fontSize:addUnit(c),backgroundColor:y?v:g};return createVNode$1("div",{role:"switch",class:bem$6({on:y,loading:f,disabled:d}),style:_,tabindex:d?void 0:0,"aria-checked":y,onClick:s},[createVNode$1("div",{class:bem$6("node")},[l()]),(u=n.background)==null?void 0:u.call(n)])}}});const Switch=withInstall(stdin_default$8),[name$5]=createNamespace("checkbox-group"),CHECKBOX_GROUP_KEY=Symbol(name$5),checkerProps={name:unknownProp,disabled:Boolean,iconSize:numericProp,modelValue:unknownProp,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var stdin_default$7=defineComponent({props:extend$1({},checkerProps,{bem:makeRequiredProp(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:truthProp,indeterminate:{type:Boolean,default:null}}),emits:["click","toggle"],setup(a,{emit:r,slots:n}){const o=ref(),s=y=>{if(a.parent&&a.bindGroup)return a.parent.props[y]},l=computed(()=>{if(a.parent&&a.bindGroup){const y=s("disabled")||a.disabled;if(a.role==="checkbox"){const _=s("modelValue").length,S=s("max"),b=S&&_>=+S;return y||b&&!a.checked}return y}return a.disabled}),u=computed(()=>s("direction")),c=computed(()=>{const y=a.checkedColor||s("checkedColor");if(y&&(a.checked||a.indeterminate)&&!l.value)return{borderColor:y,backgroundColor:y}}),f=computed(()=>a.shape||s("shape")||"round"),d=y=>{const{target:_}=y,S=o.value,b=S===_||(S==null?void 0:S.contains(_));!l.value&&(b||!a.labelDisabled)&&r("toggle"),r("click",y)},v=()=>{var y,_;const{bem:S,checked:b,indeterminate:x}=a,T=a.iconSize||s("iconSize");return createVNode$1("div",{ref:o,class:S("icon",[f.value,{disabled:l.value,checked:b,indeterminate:x}]),style:f.value!=="dot"?{fontSize:addUnit(T)}:{width:addUnit(T),height:addUnit(T),borderColor:(y=c.value)==null?void 0:y.borderColor}},[n.icon?n.icon({checked:b,disabled:l.value}):f.value!=="dot"?createVNode$1(Icon,{name:x?"minus":"success",style:c.value},null):createVNode$1("div",{class:S("icon--dot__icon"),style:{backgroundColor:(_=c.value)==null?void 0:_.backgroundColor}},null)])},g=()=>{const{checked:y}=a;if(n.default)return createVNode$1("span",{class:a.bem("label",[a.labelPosition,{disabled:l.value}])},[n.default({checked:y,disabled:l.value})])};return()=>{const y=a.labelPosition==="left"?[g(),v()]:[v(),g()];return createVNode$1("div",{role:a.role,class:a.bem([{disabled:l.value,"label-disabled":a.labelDisabled},u.value]),tabindex:l.value?void 0:0,"aria-checked":a.checked,onClick:d},[y])}}});const[name$4,bem$5]=createNamespace("checkbox"),checkboxProps=extend$1({},checkerProps,{shape:String,bindGroup:truthProp,indeterminate:{type:Boolean,default:null}});var stdin_default$6=defineComponent({name:name$4,props:checkboxProps,emits:["change","update:modelValue"],setup(a,{emit:r,slots:n}){const{parent:o}=useParent(CHECKBOX_GROUP_KEY),s=c=>{const{name:f}=a,{max:d,modelValue:v}=o.props,g=v.slice();if(c)!(d&&g.length>=+d)&&!g.includes(f)&&(g.push(f),a.bindGroup&&o.updateValue(g));else{const y=g.indexOf(f);y!==-1&&(g.splice(y,1),a.bindGroup&&o.updateValue(g))}},l=computed(()=>o&&a.bindGroup?o.props.modelValue.indexOf(a.name)!==-1:!!a.modelValue),u=(c=!l.value)=>{o&&a.bindGroup?s(c):r("update:modelValue",c),a.indeterminate!==null&&r("change",c)};return watch(()=>a.modelValue,c=>{a.indeterminate===null&&r("change",c)}),useExpose({toggle:u,props:a,checked:l}),useCustomFieldValue(()=>a.modelValue),()=>createVNode$1(stdin_default$7,mergeProps({bem:bem$5,role:"checkbox",parent:o,checked:l.value,onToggle:u},a),pick(n,["default","icon"]))}});const Checkbox=withInstall(stdin_default$6),[name$3,bem$4]=createNamespace("image"),imageProps={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:numericProp,height:numericProp,radius:numericProp,lazyLoad:Boolean,iconSize:numericProp,showError:truthProp,errorIcon:makeStringProp("photo-fail"),iconPrefix:String,showLoading:truthProp,loadingIcon:makeStringProp("photo"),crossorigin:String,referrerpolicy:String,decoding:String};var stdin_default$5=defineComponent({name:name$3,props:imageProps,emits:["load","error"],setup(a,{emit:r,slots:n}){const o=ref(!1),s=ref(!0),l=ref(),{$Lazyload:u}=getCurrentInstance().proxy,c=computed(()=>{const x={width:addUnit(a.width),height:addUnit(a.height)};return isDef$1(a.radius)&&(x.overflow="hidden",x.borderRadius=addUnit(a.radius)),x});watch(()=>a.src,()=>{o.value=!1,s.value=!0});const f=x=>{s.value&&(s.value=!1,r("load",x))},d=()=>{const x=new Event("load");Object.defineProperty(x,"target",{value:l.value,enumerable:!0}),f(x)},v=x=>{o.value=!0,s.value=!1,r("error",x)},g=(x,T,A)=>A?A():createVNode$1(Icon,{name:x,size:a.iconSize,class:T,classPrefix:a.iconPrefix},null),y=()=>{if(s.value&&a.showLoading)return createVNode$1("div",{class:bem$4("loading")},[g(a.loadingIcon,bem$4("loading-icon"),n.loading)]);if(o.value&&a.showError)return createVNode$1("div",{class:bem$4("error")},[g(a.errorIcon,bem$4("error-icon"),n.error)])},_=()=>{if(o.value||!a.src)return;const x={alt:a.alt,class:bem$4("img"),decoding:a.decoding,style:{objectFit:a.fit,objectPosition:a.position},crossorigin:a.crossorigin,referrerpolicy:a.referrerpolicy};return a.lazyLoad?withDirectives(createVNode$1("img",mergeProps({ref:l},x),null),[[resolveDirective("lazy"),a.src]]):createVNode$1("img",mergeProps({ref:l,src:a.src,onLoad:f,onError:v},x),null)},S=({el:x})=>{const T=()=>{x===l.value&&s.value&&d()};l.value?T():nextTick(T)},b=({el:x})=>{x===l.value&&!o.value&&v()};return u&&inBrowser$1&&(u.$on("loaded",S),u.$on("error",b),onBeforeUnmount(()=>{u.$off("loaded",S),u.$off("error",b)})),onMounted(()=>{nextTick(()=>{var x;(x=l.value)!=null&&x.complete&&!a.lazyLoad&&d()})}),()=>{var x;return createVNode$1("div",{class:bem$4({round:a.round,block:a.block}),style:c.value},[_(),y(),(x=n.default)==null?void 0:x.call(n)])}}});const Image$1=withInstall(stdin_default$5),[name$2,bem$3,t$1]=createNamespace("dialog"),dialogProps=extend$1({},popupSharedProps,{title:String,theme:String,width:numericProp,message:[String,Function],callback:Function,allowHtml:Boolean,className:unknownProp,transition:makeStringProp("van-dialog-bounce"),messageAlign:String,closeOnPopstate:truthProp,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:truthProp,closeOnClickOverlay:Boolean,keyboardEnabled:truthProp,destroyOnClose:Boolean}),popupInheritKeys=[...popupSharedPropKeys,"transition","closeOnPopstate","destroyOnClose"];var stdin_default$4=defineComponent({name:name$2,props:dialogProps,emits:["confirm","cancel","keydown","update:show"],setup(a,{emit:r,slots:n}){const o=ref(),s=reactive({confirm:!1,cancel:!1}),l=T=>r("update:show",T),u=T=>{var A;l(!1),(A=a.callback)==null||A.call(a,T)},c=T=>()=>{a.show&&(r(T),a.beforeClose?(s[T]=!0,callInterceptor(a.beforeClose,{args:[T],done(){u(T),s[T]=!1},canceled(){s[T]=!1}})):u(T))},f=c("cancel"),d=c("confirm"),v=withKeys(T=>{var A,w;if(!a.keyboardEnabled||T.target!==((w=(A=o.value)==null?void 0:A.popupRef)==null?void 0:w.value))return;({Enter:a.showConfirmButton?d:noop$1,Escape:a.showCancelButton?f:noop$1})[T.key](),r("keydown",T)},["enter","esc"]),g=()=>{const T=n.title?n.title():a.title;if(T)return createVNode$1("div",{class:bem$3("header",{isolated:!a.message&&!n.default})},[T])},y=T=>{const{message:A,allowHtml:w,messageAlign:C}=a,E=bem$3("message",{"has-title":T,[C]:C}),P=isFunction$1(A)?A():A;return w&&typeof P=="string"?createVNode$1("div",{class:E,innerHTML:P},null):createVNode$1("div",{class:E},[P])},_=()=>{if(n.default)return createVNode$1("div",{class:bem$3("content")},[n.default()]);const{title:T,message:A,allowHtml:w}=a;if(A){const C=!!(T||n.title);return createVNode$1("div",{key:w?1:0,class:bem$3("content",{isolated:!C})},[y(C)])}},S=()=>createVNode$1("div",{class:[BORDER_TOP,bem$3("footer")]},[a.showCancelButton&&createVNode$1(Button,{size:"large",text:a.cancelButtonText||t$1("cancel"),class:bem$3("cancel"),style:{color:a.cancelButtonColor},loading:s.cancel,disabled:a.cancelButtonDisabled,onClick:f},null),a.showConfirmButton&&createVNode$1(Button,{size:"large",text:a.confirmButtonText||t$1("confirm"),class:[bem$3("confirm"),{[BORDER_LEFT]:a.showCancelButton}],style:{color:a.confirmButtonColor},loading:s.confirm,disabled:a.confirmButtonDisabled,onClick:d},null)]),b=()=>createVNode$1(ActionBar,{class:bem$3("footer")},{default:()=>[a.showCancelButton&&createVNode$1(ActionBarButton,{type:"warning",text:a.cancelButtonText||t$1("cancel"),class:bem$3("cancel"),color:a.cancelButtonColor,loading:s.cancel,disabled:a.cancelButtonDisabled,onClick:f},null),a.showConfirmButton&&createVNode$1(ActionBarButton,{type:"danger",text:a.confirmButtonText||t$1("confirm"),class:bem$3("confirm"),color:a.confirmButtonColor,loading:s.confirm,disabled:a.confirmButtonDisabled,onClick:d},null)]}),x=()=>n.footer?n.footer():a.theme==="round-button"?b():S();return()=>{const{width:T,title:A,theme:w,message:C,className:E}=a;return createVNode$1(Popup,mergeProps({ref:o,role:"dialog",class:[bem$3([w]),E],style:{width:addUnit(T)},tabindex:0,"aria-labelledby":A||C,onKeydown:v,"onUpdate:show":l},pick(a,popupInheritKeys)),{default:()=>[g(),_(),x()]})}}});let instance$1;const DEFAULT_OPTIONS={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,destroyOnClose:!1};let currentOptions=extend$1({},DEFAULT_OPTIONS);function initInstance$1(){({instance:instance$1}=mountComponent({setup(){const{state:r,toggle:n}=usePopupState();return()=>createVNode$1(stdin_default$4,mergeProps(r,{"onUpdate:show":n}),null)}}))}function showDialog(a){return inBrowser$1?new Promise((r,n)=>{instance$1||initInstance$1(),instance$1.open(extend$1({},currentOptions,a,{callback:o=>{(o==="confirm"?r:n)(o)}}))}):Promise.resolve(void 0)}const showConfirmDialog=a=>showDialog(extend$1({showCancelButton:!0},a));withInstall(stdin_default$4);const getDistance=a=>Math.sqrt((a[0].clientX-a[1].clientX)**2+(a[0].clientY-a[1].clientY)**2),getCenter=a=>({x:(a[0].clientX+a[1].clientX)/2,y:(a[0].clientY+a[1].clientY)/2}),bem$2=createNamespace("image-preview")[1],longImageRatio=2.6,imagePreviewItemProps={src:String,show:Boolean,active:Number,minZoom:makeRequiredProp(numericProp),maxZoom:makeRequiredProp(numericProp),rootWidth:makeRequiredProp(Number),rootHeight:makeRequiredProp(Number),disableZoom:Boolean,doubleScale:Boolean,closeOnClickImage:Boolean,closeOnClickOverlay:Boolean,vertical:Boolean};var stdin_default$3=defineComponent({props:imagePreviewItemProps,emits:["scale","close","longPress"],setup(a,{emit:r,slots:n}){const o=reactive({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),s=useTouch(),l=ref(),u=ref(),c=ref(!1),f=ref(!1);let d=0;const v=computed(()=>{const{scale:D,moveX:V,moveY:L,moving:N,zooming:U,initializing:H}=o,q={transitionDuration:U||N||H?"0s":".3s"};return(D!==1||f.value)&&(q.transform=`matrix(${D}, 0, 0, ${D}, ${V}, ${L})`),q}),g=computed(()=>{if(o.imageRatio){const{rootWidth:D,rootHeight:V}=a,L=c.value?V/o.imageRatio:D;return Math.max(0,(o.scale*L-D)/2)}return 0}),y=computed(()=>{if(o.imageRatio){const{rootWidth:D,rootHeight:V}=a,L=c.value?V:D*o.imageRatio;return Math.max(0,(o.scale*L-V)/2)}return 0}),_=(D,V)=>{var L;if(D=clamp$1(D,+a.minZoom,+a.maxZoom+1),D!==o.scale){const N=D/o.scale;if(o.scale=D,V){const U=useRect((L=l.value)==null?void 0:L.$el),H={x:U.width*.5,y:U.height*.5},q=o.moveX-(V.x-U.left-H.x)*(N-1),Z=o.moveY-(V.y-U.top-H.y)*(N-1);o.moveX=clamp$1(q,-g.value,g.value),o.moveY=clamp$1(Z,-y.value,y.value)}else o.moveX=0,o.moveY=f.value?d:0;r("scale",{scale:D,index:a.active})}},S=()=>{_(1)},b=()=>{const D=o.scale>1?1:2;_(D,D===2||f.value?{x:s.startX.value,y:s.startY.value}:void 0)};let x,T,A,w,C,E,P,I,M=!1;const R=D=>{const{touches:V}=D;if(x=V.length,x===2&&a.disableZoom)return;const{offsetX:L}=s;s.start(D),T=o.moveX,A=o.moveY,I=Date.now(),M=!1,o.moving=x===1&&(o.scale!==1||f.value),o.zooming=x===2&&!L.value,o.zooming&&(w=o.scale,C=getDistance(V))},O=D=>{const{touches:V}=D;if(s.move(D),o.moving){const{deltaX:L,deltaY:N}=s,U=L.value+T,H=N.value+A;if((a.vertical?s.isVertical()&&Math.abs(H)>y.value:s.isHorizontal()&&Math.abs(U)>g.value)&&!M){o.moving=!1;return}M=!0,preventDefault$1(D,!0),o.moveX=clamp$1(U,-g.value,g.value),o.moveY=clamp$1(H,-y.value,y.value)}if(o.zooming&&(preventDefault$1(D,!0),V.length===2)){const L=getDistance(V),N=w*L/C;E=getCenter(V),_(N,E)}},$=D=>{var V;const L=(V=u.value)==null?void 0:V.$el;if(!L)return;const N=L.firstElementChild,U=D.target===L,H=N==null?void 0:N.contains(D.target);!a.closeOnClickImage&&H||!a.closeOnClickOverlay&&U||r("close")},B=D=>{if(x>1)return;const V=Date.now()-I,L=250;s.isTap.value&&(V<L?a.doubleScale?P?(clearTimeout(P),P=null,b()):P=setTimeout(()=>{$(D),P=null},L):$(D):V>LONG_PRESS_START_TIME&&r("longPress"))},F=D=>{let V=!1;if((o.moving||o.zooming)&&(V=!0,o.moving&&T===o.moveX&&A===o.moveY&&(V=!1),!D.touches.length)){o.zooming&&(o.moveX=clamp$1(o.moveX,-g.value,g.value),o.moveY=clamp$1(o.moveY,-y.value,y.value),o.zooming=!1),o.moving=!1,T=0,A=0,w=1,o.scale<1&&S();const L=+a.maxZoom;o.scale>L&&_(L,E)}preventDefault$1(D,V),B(D),s.reset()},z=()=>{const{rootWidth:D,rootHeight:V}=a,L=V/D,{imageRatio:N}=o;c.value=o.imageRatio>L&&N<longImageRatio,f.value=o.imageRatio>L&&N>=longImageRatio,f.value&&(d=(N*D-V)/2,o.moveY=d,o.initializing=!0,raf(()=>{o.initializing=!1})),S()},G=D=>{const{naturalWidth:V,naturalHeight:L}=D.target;o.imageRatio=L/V,z()};return watch(()=>a.active,S),watch(()=>a.show,D=>{D||S()}),watch(()=>[a.rootWidth,a.rootHeight],z),useEventListener("touchmove",O,{target:computed(()=>{var D;return(D=u.value)==null?void 0:D.$el})}),useExpose({resetScale:S}),()=>{const D={loading:()=>createVNode$1(Loading,{type:"spinner"},null)};return createVNode$1(SwipeItem,{ref:u,class:bem$2("swipe-item"),onTouchstartPassive:R,onTouchend:F,onTouchcancel:F},{default:()=>[n.image?createVNode$1("div",{class:bem$2("image-wrap")},[n.image({src:a.src,onLoad:G,style:v.value})]):createVNode$1(Image$1,{ref:l,src:a.src,fit:"contain",class:bem$2("image",{vertical:c.value}),style:v.value,onLoad:G},D)]})}}});const[name$1,bem$1]=createNamespace("image-preview"),popupProps=["show","teleport","transition","overlayStyle","closeOnPopstate"],imagePreviewProps={show:Boolean,loop:truthProp,images:makeArrayProp(),minZoom:makeNumericProp(1/3),maxZoom:makeNumericProp(3),overlay:truthProp,vertical:Boolean,closeable:Boolean,showIndex:truthProp,className:unknownProp,closeIcon:makeStringProp("clear"),transition:String,beforeClose:Function,doubleScale:truthProp,overlayClass:unknownProp,overlayStyle:Object,swipeDuration:makeNumericProp(300),startPosition:makeNumericProp(0),showIndicators:Boolean,closeOnPopstate:truthProp,closeOnClickImage:truthProp,closeOnClickOverlay:truthProp,closeIconPosition:makeStringProp("top-right"),teleport:[String,Object]};var stdin_default$2=defineComponent({name:name$1,props:imagePreviewProps,emits:["scale","close","closed","change","longPress","update:show"],setup(a,{emit:r,slots:n}){const o=ref(),s=ref(),l=reactive({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),u=()=>{if(o.value){const w=useRect(o.value.$el);l.rootWidth=w.width,l.rootHeight=w.height,o.value.resize()}},c=w=>r("scale",w),f=w=>r("update:show",w),d=()=>{callInterceptor(a.beforeClose,{args:[l.active],done:()=>f(!1)})},v=w=>{w!==l.active&&(l.active=w,r("change",w))},g=()=>{if(a.showIndex)return createVNode$1("div",{class:bem$1("index")},[n.index?n.index({index:l.active}):`${l.active+1} / ${a.images.length}`])},y=()=>{if(n.cover)return createVNode$1("div",{class:bem$1("cover")},[n.cover()])},_=()=>{l.disableZoom=!0},S=()=>{l.disableZoom=!1},b=()=>createVNode$1(Swipe,{ref:o,lazyRender:!0,loop:a.loop,class:bem$1("swipe"),vertical:a.vertical,duration:a.swipeDuration,initialSwipe:a.startPosition,showIndicators:a.showIndicators,indicatorColor:"white",onChange:v,onDragEnd:S,onDragStart:_},{default:()=>[a.images.map((w,C)=>createVNode$1(stdin_default$3,{ref:E=>{C===l.active&&(s.value=E)},src:w,show:a.show,active:l.active,maxZoom:a.maxZoom,minZoom:a.minZoom,rootWidth:l.rootWidth,rootHeight:l.rootHeight,disableZoom:l.disableZoom,doubleScale:a.doubleScale,closeOnClickImage:a.closeOnClickImage,closeOnClickOverlay:a.closeOnClickOverlay,vertical:a.vertical,onScale:c,onClose:d,onLongPress:()=>r("longPress",{index:C})},{image:n.image}))]}),x=()=>{if(a.closeable)return createVNode$1(Icon,{role:"button",name:a.closeIcon,class:[bem$1("close-icon",a.closeIconPosition),HAPTICS_FEEDBACK],onClick:d},null)},T=()=>r("closed"),A=(w,C)=>{var E;return(E=o.value)==null?void 0:E.swipeTo(w,C)};return useExpose({resetScale:()=>{var w;(w=s.value)==null||w.resetScale()},swipeTo:A}),onMounted(u),watch([windowWidth,windowHeight],u),watch(()=>a.startPosition,w=>v(+w)),watch(()=>a.show,w=>{const{images:C,startPosition:E}=a;w?(v(+E),nextTick(()=>{u(),A(+E,{immediate:!0})})):r("close",{index:l.active,url:C[l.active]})}),()=>createVNode$1(Popup,mergeProps({class:[bem$1(),a.className],overlayClass:[bem$1("overlay"),a.overlayClass],onClosed:T,"onUpdate:show":f},pick(a,popupProps)),{default:()=>[x(),b(),g(),y()]})}});let instance;const defaultConfig={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,vertical:!1,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"};function initInstance(){({instance}=mountComponent({setup(){const{state:a,toggle:r}=usePopupState(),n=()=>{a.images=[]};return()=>createVNode$1(stdin_default$2,mergeProps(a,{onClosed:n,"onUpdate:show":r}),null)}}))}const showImagePreview=(a,r=0)=>{if(inBrowser$1)return instance||initInstance(),a=Array.isArray(a)?{images:a,startPosition:r}:a,instance.open(extend$1({},defaultConfig,a)),instance};withInstall(stdin_default$2);const[name,bem,t]=createNamespace("uploader");function readFileContent(a,r){return new Promise(n=>{if(r==="file"){n();return}const o=new FileReader;o.onload=s=>{n(s.target.result)},r==="dataUrl"?o.readAsDataURL(a):r==="text"&&o.readAsText(a)})}function isOversize(a,r){return toArray$1(a).some(n=>n.file?isFunction$1(r)?r(n.file):n.file.size>+r:!1)}function filterFiles(a,r){const n=[],o=[];return a.forEach(s=>{isOversize(s,r)?o.push(s):n.push(s)}),{valid:n,invalid:o}}const IMAGE_REGEXP=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,isImageUrl=a=>IMAGE_REGEXP.test(a);function isImageFile(a){return a.isImage?!0:a.file&&a.file.type?a.file.type.indexOf("image")===0:a.url?isImageUrl(a.url):typeof a.content=="string"?a.content.indexOf("data:image")===0:!1}var stdin_default$1=defineComponent({props:{name:numericProp,item:makeRequiredProp(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,reupload:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview","reupload"],setup(a,{emit:r,slots:n}){const o=()=>{const{status:v,message:g}=a.item;if(v==="uploading"||v==="failed"){const y=v==="failed"?createVNode$1(Icon,{name:"close",class:bem("mask-icon")},null):createVNode$1(Loading,{class:bem("loading")},null),_=isDef$1(g)&&g!=="";return createVNode$1("div",{class:bem("mask")},[y,_&&createVNode$1("div",{class:bem("mask-message")},[g])])}},s=v=>{const{name:g,item:y,index:_,beforeDelete:S}=a;v.stopPropagation(),callInterceptor(S,{args:[y,{name:g,index:_}],done:()=>r("delete")})},l=()=>r("preview"),u=()=>r("reupload"),c=()=>{if(a.deletable&&a.item.status!=="uploading"){const v=n["preview-delete"];return createVNode$1("div",{role:"button",class:bem("preview-delete",{shadow:!v}),tabindex:0,"aria-label":t("delete"),onClick:s},[v?v():createVNode$1(Icon,{name:"cross",class:bem("preview-delete-icon")},null)])}},f=()=>{if(n["preview-cover"]){const{index:v,item:g}=a;return createVNode$1("div",{class:bem("preview-cover")},[n["preview-cover"](extend$1({index:v},g))])}},d=()=>{const{item:v,lazyLoad:g,imageFit:y,previewSize:_,reupload:S}=a;return isImageFile(v)?createVNode$1(Image$1,{fit:y,src:v.objectUrl||v.content||v.url,class:bem("preview-image"),width:Array.isArray(_)?_[0]:_,height:Array.isArray(_)?_[1]:_,lazyLoad:g,onClick:S?u:l},{default:f}):createVNode$1("div",{class:bem("file"),style:getSizeStyle(a.previewSize)},[createVNode$1(Icon,{class:bem("file-icon"),name:"description"},null),createVNode$1("div",{class:[bem("file-name"),"van-ellipsis"]},[v.file?v.file.name:v.url]),f()])};return()=>createVNode$1("div",{class:bem("preview")},[d(),o(),c()])}});const uploaderProps={name:makeNumericProp(""),accept:makeStringProp("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:makeNumericProp(1/0),imageFit:makeStringProp("cover"),resultType:makeStringProp("dataUrl"),uploadIcon:makeStringProp("photograph"),uploadText:String,deletable:truthProp,reupload:Boolean,afterRead:Function,showUpload:truthProp,modelValue:makeArrayProp(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:truthProp,previewOptions:Object,previewFullImage:truthProp,maxSize:{type:[Number,String,Function],default:1/0}};var stdin_default=defineComponent({name,props:uploaderProps,emits:["delete","oversize","clickUpload","closePreview","clickPreview","clickReupload","update:modelValue"],setup(a,{emit:r,slots:n}){const o=ref(),s=[],l=ref(-1),u=ref(!1),c=(M=a.modelValue.length)=>({name:a.name,index:M}),f=()=>{o.value&&(o.value.value="")},d=M=>{if(f(),isOversize(M,a.maxSize))if(Array.isArray(M)){const R=filterFiles(M,a.maxSize);if(M=R.valid,r("oversize",R.invalid,c()),!M.length)return}else{r("oversize",M,c());return}if(M=reactive(M),l.value>-1){const R=[...a.modelValue];R.splice(l.value,1,M),r("update:modelValue",R),l.value=-1}else r("update:modelValue",[...a.modelValue,...toArray$1(M)]);a.afterRead&&a.afterRead(M,c())},v=M=>{const{maxCount:R,modelValue:O,resultType:$}=a;if(Array.isArray(M)){const B=+R-O.length;M.length>B&&(M=M.slice(0,B)),Promise.all(M.map(F=>readFileContent(F,$))).then(F=>{const z=M.map((G,D)=>{const V={file:G,status:"",message:"",objectUrl:URL.createObjectURL(G)};return F[D]&&(V.content=F[D]),V});d(z)})}else readFileContent(M,$).then(B=>{const F={file:M,status:"",message:"",objectUrl:URL.createObjectURL(M)};B&&(F.content=B),d(F)})},g=M=>{const{files:R}=M.target;if(a.disabled||!R||!R.length)return;const O=R.length===1?R[0]:[].slice.call(R);if(a.beforeRead){const $=a.beforeRead(O,c());if(!$){f();return}if(isPromise($)){$.then(B=>{v(B||O)}).catch(f);return}}v(O)};let y;const _=()=>r("closePreview"),S=M=>{if(a.previewFullImage){const R=a.modelValue.filter(isImageFile),O=R.map($=>($.objectUrl&&!$.url&&$.status!=="failed"&&($.url=$.objectUrl,s.push($.url)),$.url)).filter(Boolean);y=showImagePreview(extend$1({images:O,startPosition:R.indexOf(M),onClose:_},a.previewOptions))}},b=()=>{y&&y.close()},x=(M,R)=>{const O=a.modelValue.slice(0);O.splice(R,1),r("update:modelValue",O),r("delete",M,c(R))},T=M=>{u.value=!0,l.value=M,nextTick(()=>I())},A=()=>{u.value||(l.value=-1),u.value=!1},w=(M,R)=>{const O=["imageFit","deletable","reupload","previewSize","beforeDelete"],$=extend$1(pick(a,O),pick(M,O,!0));return createVNode$1(stdin_default$1,mergeProps({item:M,index:R,onClick:()=>r(a.reupload?"clickReupload":"clickPreview",M,c(R)),onDelete:()=>x(M,R),onPreview:()=>S(M),onReupload:()=>T(R)},pick(a,["name","lazyLoad"]),$),pick(n,["preview-cover","preview-delete"]))},C=()=>{if(a.previewImage)return a.modelValue.map(w)},E=M=>r("clickUpload",M),P=()=>{const M=a.modelValue.length<+a.maxCount,R=a.readonly?null:createVNode$1("input",{ref:o,type:"file",class:bem("input"),accept:a.accept,capture:a.capture,multiple:a.multiple&&l.value===-1,disabled:a.disabled,onChange:g,onClick:A},null);return n.default?withDirectives(createVNode$1("div",{class:bem("input-wrapper"),onClick:E},[n.default(),R]),[[vShow,M]]):withDirectives(createVNode$1("div",{class:bem("upload",{readonly:a.readonly}),style:getSizeStyle(a.previewSize),onClick:E},[createVNode$1(Icon,{name:a.uploadIcon,class:bem("upload-icon")},null),a.uploadText&&createVNode$1("span",{class:bem("upload-text")},[a.uploadText]),R]),[[vShow,a.showUpload&&M]])},I=()=>{o.value&&!a.disabled&&o.value.click()};return onBeforeUnmount(()=>{s.forEach(M=>URL.revokeObjectURL(M))}),useExpose({chooseFile:I,reuploadFile:T,closeImagePreview:b}),useCustomFieldValue(()=>a.modelValue),()=>createVNode$1("div",{class:bem()},[createVNode$1("div",{class:bem("wrapper",{disabled:a.disabled})},[C(),P()])])}});const Uploader=withInstall(stdin_default);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}/*!
 * Compressor.js v1.2.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-02-28T14:09:41.732Z
 */function ownKeys(a,r){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);r&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),n.push.apply(n,o)}return n}function _objectSpread2(a){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ownKeys(Object(n),!0).forEach(function(o){_defineProperty(a,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(n,o))})}return a}function _classCallCheck(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,_toPropertyKey(o.key),o)}}function _createClass(a,r,n){return r&&_defineProperties(a.prototype,r),n&&_defineProperties(a,n),Object.defineProperty(a,"prototype",{writable:!1}),a}function _defineProperty(a,r,n){return r=_toPropertyKey(r),r in a?Object.defineProperty(a,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[r]=n,a}function _extends(){return _extends=Object.assign?Object.assign.bind():function(a){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},_extends.apply(this,arguments)}function _toPrimitive(a,r){if(typeof a!="object"||a===null)return a;var n=a[Symbol.toPrimitive];if(n!==void 0){var o=n.call(a,r);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}function _toPropertyKey(a){var r=_toPrimitive(a,"string");return typeof r=="symbol"?r:String(r)}var canvasToBlob={exports:{}};(function(a){typeof window>"u"||function(r){var n=r.HTMLCanvasElement&&r.HTMLCanvasElement.prototype,o=r.Blob&&function(){try{return!!new Blob}catch{return!1}}(),s=o&&r.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),l=r.BlobBuilder||r.WebKitBlobBuilder||r.MozBlobBuilder||r.MSBlobBuilder,u=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,c=(o||l)&&r.atob&&r.ArrayBuffer&&r.Uint8Array&&function(f){var d,v,g,y,_,S,b,x,T;if(d=f.match(u),!d)throw new Error("invalid data URI");for(v=d[2]?d[1]:"text/plain"+(d[3]||";charset=US-ASCII"),g=!!d[4],y=f.slice(d[0].length),g?_=atob(y):_=decodeURIComponent(y),S=new ArrayBuffer(_.length),b=new Uint8Array(S),x=0;x<_.length;x+=1)b[x]=_.charCodeAt(x);return o?new Blob([s?b:S],{type:v}):(T=new l,T.append(S),T.getBlob(v))};r.HTMLCanvasElement&&!n.toBlob&&(n.mozGetAsFile?n.toBlob=function(f,d,v){var g=this;setTimeout(function(){v&&n.toDataURL&&c?f(c(g.toDataURL(d,v))):f(g.mozGetAsFile("blob",d))})}:n.toDataURL&&c&&(n.msToBlob?n.toBlob=function(f,d,v){var g=this;setTimeout(function(){(d&&d!=="image/png"||v)&&n.toDataURL&&c?f(c(g.toDataURL(d,v))):f(g.msToBlob(d))})}:n.toBlob=function(f,d,v){var g=this;setTimeout(function(){f(c(g.toDataURL(d,v)))})})),a.exports?a.exports=c:r.dataURLtoBlob=c}(window)})(canvasToBlob);var toBlob=canvasToBlob.exports,isBlob=function(r){return typeof Blob>"u"?!1:r instanceof Blob||Object.prototype.toString.call(r)==="[object Blob]"},DEFAULTS={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},IS_BROWSER=typeof window<"u"&&typeof window.document<"u",WINDOW=IS_BROWSER?window:{},isPositiveNumber=function(r){return r>0&&r<1/0},slice$1=Array.prototype.slice;function toArray(a){return Array.from?Array.from(a):slice$1.call(a)}var REGEXP_IMAGE_TYPE=/^image\/.+$/;function isImageType(a){return REGEXP_IMAGE_TYPE.test(a)}function imageTypeToExtension(a){var r=isImageType(a)?a.substr(6):"";return r==="jpeg"&&(r="jpg"),".".concat(r)}var fromCharCode=String.fromCharCode;function getStringFromCharCode(a,r,n){var o="",s;for(n+=r,s=r;s<n;s+=1)o+=fromCharCode(a.getUint8(s));return o}var btoa$1=WINDOW.btoa;function arrayBufferToDataURL(a,r){for(var n=[],o=8192,s=new Uint8Array(a);s.length>0;)n.push(fromCharCode.apply(null,toArray(s.subarray(0,o)))),s=s.subarray(o);return"data:".concat(r,";base64,").concat(btoa$1(n.join("")))}function resetAndGetOrientation(a){var r=new DataView(a),n;try{var o,s,l;if(r.getUint8(0)===255&&r.getUint8(1)===216)for(var u=r.byteLength,c=2;c+1<u;){if(r.getUint8(c)===255&&r.getUint8(c+1)===225){s=c;break}c+=1}if(s){var f=s+4,d=s+10;if(getStringFromCharCode(r,f,4)==="Exif"){var v=r.getUint16(d);if(o=v===18761,(o||v===19789)&&r.getUint16(d+2,o)===42){var g=r.getUint32(d+4,o);g>=8&&(l=d+g)}}}if(l){var y=r.getUint16(l,o),_,S;for(S=0;S<y;S+=1)if(_=l+S*12+2,r.getUint16(_,o)===274){_+=8,n=r.getUint16(_,o),r.setUint16(_,1,o);break}}}catch{n=1}return n}function parseOrientation(a){var r=0,n=1,o=1;switch(a){case 2:n=-1;break;case 3:r=-180;break;case 4:o=-1;break;case 5:r=90,o=-1;break;case 6:r=90;break;case 7:r=90,n=-1;break;case 8:r=-90;break}return{rotate:r,scaleX:n,scaleY:o}}var REGEXP_DECIMALS=/\.\d*(?:0|9){12}\d*$/;function normalizeDecimalNumber(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return REGEXP_DECIMALS.test(a)?Math.round(a*r)/r:a}function getAdjustedSizes(a){var r=a.aspectRatio,n=a.height,o=a.width,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",l=isPositiveNumber(o),u=isPositiveNumber(n);if(l&&u){var c=n*r;(s==="contain"||s==="none")&&c>o||s==="cover"&&c<o?n=o/r:o=n*r}else l?n=o/r:u&&(o=n*r);return{width:o,height:n}}function getExif(a){for(var r=toArray(new Uint8Array(a)),n=r.length,o=[],s=0;s+3<n;){var l=r[s],u=r[s+1];if(l===255&&u===218)break;if(l===255&&u===216)s+=2;else{var c=r[s+2]*256+r[s+3],f=s+c+2,d=r.slice(s,f);o.push(d),s=f}}return o.reduce(function(v,g){return g[0]===255&&g[1]===225?v.concat(g):v},[])}function insertExif(a,r){var n=toArray(new Uint8Array(a));if(n[2]!==255||n[3]!==224)return a;var o=n[4]*256+n[5],s=[255,216].concat(r,n.slice(4+o));return new Uint8Array(s)}var ArrayBuffer$1=WINDOW.ArrayBuffer,FileReader$1=WINDOW.FileReader,URL$1=WINDOW.URL||WINDOW.webkitURL,REGEXP_EXTENSION=/\.\w+$/,AnotherCompressor=WINDOW.Compressor,Compressor=function(){function a(r,n){_classCallCheck(this,a),this.file=r,this.exif=[],this.image=new Image,this.options=_objectSpread2(_objectSpread2({},DEFAULTS),n),this.aborted=!1,this.result=null,this.init()}return _createClass(a,[{key:"init",value:function(){var n=this,o=this.file,s=this.options;if(!isBlob(o)){this.fail(new Error("The first argument must be a File or Blob object."));return}var l=o.type;if(!isImageType(l)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!URL$1||!FileReader$1){this.fail(new Error("The current browser does not support image compression."));return}ArrayBuffer$1||(s.checkOrientation=!1,s.retainExif=!1);var u=l==="image/jpeg",c=u&&s.checkOrientation,f=u&&s.retainExif;if(URL$1&&!c&&!f)this.load({url:URL$1.createObjectURL(o)});else{var d=new FileReader$1;this.reader=d,d.onload=function(v){var g=v.target,y=g.result,_={},S=1;c&&(S=resetAndGetOrientation(y),S>1&&_extends(_,parseOrientation(S))),f&&(n.exif=getExif(y)),c||f?!URL$1||S>1?_.url=arrayBufferToDataURL(y,l):_.url=URL$1.createObjectURL(o):_.url=y,n.load(_)},d.onabort=function(){n.fail(new Error("Aborted to read the image with FileReader."))},d.onerror=function(){n.fail(new Error("Failed to read the image with FileReader."))},d.onloadend=function(){n.reader=null},c||f?d.readAsArrayBuffer(o):d.readAsDataURL(o)}}},{key:"load",value:function(n){var o=this,s=this.file,l=this.image;l.onload=function(){o.draw(_objectSpread2(_objectSpread2({},n),{},{naturalWidth:l.naturalWidth,naturalHeight:l.naturalHeight}))},l.onabort=function(){o.fail(new Error("Aborted to load the image."))},l.onerror=function(){o.fail(new Error("Failed to load the image."))},WINDOW.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent)&&(l.crossOrigin="anonymous"),l.alt=s.name,l.src=n.url}},{key:"draw",value:function(n){var o=this,s=n.naturalWidth,l=n.naturalHeight,u=n.rotate,c=u===void 0?0:u,f=n.scaleX,d=f===void 0?1:f,v=n.scaleY,g=v===void 0?1:v,y=this.file,_=this.image,S=this.options,b=document.createElement("canvas"),x=b.getContext("2d"),T=Math.abs(c)%180===90,A=(S.resize==="contain"||S.resize==="cover")&&isPositiveNumber(S.width)&&isPositiveNumber(S.height),w=Math.max(S.maxWidth,0)||1/0,C=Math.max(S.maxHeight,0)||1/0,E=Math.max(S.minWidth,0)||0,P=Math.max(S.minHeight,0)||0,I=s/l,M=S.width,R=S.height;if(T){var O=[C,w];w=O[0],C=O[1];var $=[P,E];E=$[0],P=$[1];var B=[R,M];M=B[0],R=B[1]}A&&(I=M/R);var F=getAdjustedSizes({aspectRatio:I,width:w,height:C},"contain");w=F.width,C=F.height;var z=getAdjustedSizes({aspectRatio:I,width:E,height:P},"cover");if(E=z.width,P=z.height,A){var G=getAdjustedSizes({aspectRatio:I,width:M,height:R},S.resize);M=G.width,R=G.height}else{var D=getAdjustedSizes({aspectRatio:I,width:M,height:R}),V=D.width;M=V===void 0?s:V;var L=D.height;R=L===void 0?l:L}M=Math.floor(normalizeDecimalNumber(Math.min(Math.max(M,E),w))),R=Math.floor(normalizeDecimalNumber(Math.min(Math.max(R,P),C)));var N=-M/2,U=-R/2,H=M,q=R,Z=[];if(A){var ee=0,ne=0,ue=s,K=l,J=getAdjustedSizes({aspectRatio:I,width:s,height:l},{contain:"cover",cover:"contain"}[S.resize]);ue=J.width,K=J.height,ee=(s-ue)/2,ne=(l-K)/2,Z.push(ee,ne,ue,K)}if(Z.push(N,U,H,q),T){var X=[R,M];M=X[0],R=X[1]}b.width=M,b.height=R,isImageType(S.mimeType)||(S.mimeType=y.type);var ie="transparent";y.size>S.convertSize&&S.convertTypes.indexOf(S.mimeType)>=0&&(S.mimeType="image/jpeg");var te=S.mimeType==="image/jpeg";if(te&&(ie="#fff"),x.fillStyle=ie,x.fillRect(0,0,M,R),S.beforeDraw&&S.beforeDraw.call(this,x,b),!this.aborted&&(x.save(),x.translate(M/2,R/2),x.rotate(c*Math.PI/180),x.scale(d,g),x.drawImage.apply(x,[_].concat(Z)),x.restore(),S.drew&&S.drew.call(this,x,b),!this.aborted)){var W=function(j){if(!o.aborted){var Q=function(se){return o.done({naturalWidth:s,naturalHeight:l,result:se})};if(j&&te&&S.retainExif&&o.exif&&o.exif.length>0){var re=function(se){return Q(toBlob(arrayBufferToDataURL(insertExif(se,o.exif),S.mimeType)))};if(j.arrayBuffer)j.arrayBuffer().then(re).catch(function(){o.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var ae=new FileReader$1;o.reader=ae,ae.onload=function(le){var se=le.target;re(se.result)},ae.onabort=function(){o.fail(new Error("Aborted to read the compressed image with FileReader."))},ae.onerror=function(){o.fail(new Error("Failed to read the compressed image with FileReader."))},ae.onloadend=function(){o.reader=null},ae.readAsArrayBuffer(j)}}else Q(j)}};b.toBlob?b.toBlob(W,S.mimeType,S.quality):W(toBlob(b.toDataURL(S.mimeType,S.quality)))}}},{key:"done",value:function(n){var o=n.naturalWidth,s=n.naturalHeight,l=n.result,u=this.file,c=this.image,f=this.options;if(URL$1&&c.src.indexOf("blob:")===0&&URL$1.revokeObjectURL(c.src),l)if(f.strict&&!f.retainExif&&l.size>u.size&&f.mimeType===u.type&&!(f.width>o||f.height>s||f.minWidth>o||f.minHeight>s||f.maxWidth<o||f.maxHeight<s))l=u;else{var d=new Date;l.lastModified=d.getTime(),l.lastModifiedDate=d,l.name=u.name,l.name&&l.type!==u.type&&(l.name=l.name.replace(REGEXP_EXTENSION,imageTypeToExtension(l.type)))}else l=u;this.result=l,f.success&&f.success.call(this,l)}},{key:"fail",value:function(n){var o=this.options;if(o.error)o.error.call(this,n);else throw n}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=AnotherCompressor,a}},{key:"setDefaults",value:function(n){_extends(DEFAULTS,n)}}]),a}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(a,r){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},extendStatics(a,r)};function __extends(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");extendStatics(a,r);function n(){this.constructor=a}a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var Browser=function(){function a(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return a}(),Env=function(){function a(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return a}(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?env.worker=!0:!env.hasGlobalWindow||"Deno"in window||typeof navigator<"u"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Node.js")>-1?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(a,r){var n=r.browser,o=a.match(/Firefox\/([\d.]+)/),s=a.match(/MSIE\s([\d.]+)/)||a.match(/Trident\/.+?rv:(([\d.]+))/),l=a.match(/Edge?\/([\d.]+)/),u=/micromessenger/i.test(a);o&&(n.firefox=!0,n.version=o[1]),s&&(n.ie=!0,n.version=s[1]),l&&(n.edge=!0,n.version=l[1],n.newEdge=+l[1].split(".")[0]>18),u&&(n.weChat=!0),r.svgSupported=typeof SVGRect<"u",r.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,r.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11);var c=r.domSupported=typeof document<"u";if(c){var f=document.documentElement.style;r.transform3dSupported=(n.ie&&"transition"in f||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in f)&&!("OTransition"in f),r.transformSupported=r.transform3dSupported||n.ie&&+n.version>=9}}var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(a){var r={};if(typeof JSON>"u")return r;for(var n=0;n<a.length;n++){var o=String.fromCharCode(n+32),s=(a.charCodeAt(n)-OFFSET)/SCALE;r[o]=s}return r}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var a,r;return function(n,o){if(!a){var s=platformApi.createCanvas();a=s&&s.getContext("2d")}if(a)return r!==o&&(r=a.font=o||DEFAULT_FONT),a.measureText(n);n=n||"",o=o||DEFAULT_FONT;var l=/((?:\d+)?\.?\d*)px/.exec(o),u=l&&+l[1]||DEFAULT_FONT_SIZE,c=0;if(o.indexOf("mono")>=0)c=u*n.length;else for(var f=0;f<n.length;f++){var d=DEFAULT_TEXT_WIDTH_MAP[n[f]];c+=d==null?u:d*u}return{width:c}}}(),loadImage:function(a,r,n){var o=new Image;return o.onload=r,o.onerror=n,o.src=a,o}},BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(a,r){return a["[object "+r+"]"]=!0,a},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(a,r){return a["[object "+r+"Array]"]=!0,a},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=(function(){}).constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart=2311;function guid(){return idStart++}function logError(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];typeof console<"u"&&console.error.apply(console,a)}function clone$4(a){if(a==null||typeof a!="object")return a;var r=a,n=objToString.call(a);if(n==="[object Array]"){if(!isPrimitive(a)){r=[];for(var o=0,s=a.length;o<s;o++)r[o]=clone$4(a[o])}}else if(TYPED_ARRAY[n]){if(!isPrimitive(a)){var l=a.constructor;if(l.from)r=l.from(a);else{r=new l(a.length);for(var o=0,s=a.length;o<s;o++)r[o]=a[o]}}}else if(!BUILTIN_OBJECT[n]&&!isPrimitive(a)&&!isDom(a)){r={};for(var u in a)a.hasOwnProperty(u)&&u!==protoKey&&(r[u]=clone$4(a[u]))}return r}function merge(a,r,n){if(!isObject$3(r)||!isObject$3(a))return n?clone$4(r):a;for(var o in r)if(r.hasOwnProperty(o)&&o!==protoKey){var s=a[o],l=r[o];isObject$3(l)&&isObject$3(s)&&!isArray$1(l)&&!isArray$1(s)&&!isDom(l)&&!isDom(s)&&!isBuiltInObject(l)&&!isBuiltInObject(s)&&!isPrimitive(l)&&!isPrimitive(s)?merge(s,l,n):(n||!(o in a))&&(a[o]=clone$4(r[o]))}return a}function mergeAll(a,r){for(var n=a[0],o=1,s=a.length;o<s;o++)n=merge(n,a[o],r);return n}function extend(a,r){if(Object.assign)Object.assign(a,r);else for(var n in r)r.hasOwnProperty(n)&&n!==protoKey&&(a[n]=r[n]);return a}function defaults(a,r,n){for(var o=keys(r),s=0,l=o.length;s<l;s++){var u=o[s];(n?r[u]!=null:a[u]==null)&&(a[u]=r[u])}return a}function indexOf(a,r){if(a){if(a.indexOf)return a.indexOf(r);for(var n=0,o=a.length;n<o;n++)if(a[n]===r)return n}return-1}function inherits(a,r){var n=a.prototype;function o(){}o.prototype=r.prototype,a.prototype=new o;for(var s in n)n.hasOwnProperty(s)&&(a.prototype[s]=n[s]);a.prototype.constructor=a,a.superClass=r}function mixin(a,r,n){if(a="prototype"in a?a.prototype:a,r="prototype"in r?r.prototype:r,Object.getOwnPropertyNames)for(var o=Object.getOwnPropertyNames(r),s=0;s<o.length;s++){var l=o[s];l!=="constructor"&&(n?r[l]!=null:a[l]==null)&&(a[l]=r[l])}else defaults(a,r,n)}function isArrayLike(a){return!a||typeof a=="string"?!1:typeof a.length=="number"}function each$f(a,r,n){if(a&&r)if(a.forEach&&a.forEach===nativeForEach)a.forEach(r,n);else if(a.length===+a.length)for(var o=0,s=a.length;o<s;o++)r.call(n,a[o],o,a);else for(var l in a)a.hasOwnProperty(l)&&r.call(n,a[l],l,a)}function map$1(a,r,n){if(!a)return[];if(!r)return slice(a);if(a.map&&a.map===nativeMap)return a.map(r,n);for(var o=[],s=0,l=a.length;s<l;s++)o.push(r.call(n,a[s],s,a));return o}function reduce(a,r,n,o){if(a&&r){for(var s=0,l=a.length;s<l;s++)n=r.call(o,n,a[s],s,a);return n}}function filter(a,r,n){if(!a)return[];if(!r)return slice(a);if(a.filter&&a.filter===nativeFilter)return a.filter(r,n);for(var o=[],s=0,l=a.length;s<l;s++)r.call(n,a[s],s,a)&&o.push(a[s]);return o}function find(a,r,n){if(a&&r){for(var o=0,s=a.length;o<s;o++)if(r.call(n,a[o],o,a))return a[o]}}function keys(a){if(!a)return[];if(Object.keys)return Object.keys(a);var r=[];for(var n in a)a.hasOwnProperty(n)&&r.push(n);return r}function bindPolyfill(a,r){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return function(){return a.apply(r,n.concat(nativeSlice.call(arguments)))}}var bind$1=protoFunction&&isFunction(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry$1(a){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return function(){return a.apply(this,r.concat(nativeSlice.call(arguments)))}}function isArray$1(a){return Array.isArray?Array.isArray(a):objToString.call(a)==="[object Array]"}function isFunction(a){return typeof a=="function"}function isString(a){return typeof a=="string"}function isStringSafe(a){return objToString.call(a)==="[object String]"}function isNumber(a){return typeof a=="number"}function isObject$3(a){var r=typeof a;return r==="function"||!!a&&r==="object"}function isBuiltInObject(a){return!!BUILTIN_OBJECT[objToString.call(a)]}function isTypedArray(a){return!!TYPED_ARRAY[objToString.call(a)]}function isDom(a){return typeof a=="object"&&typeof a.nodeType=="number"&&typeof a.ownerDocument=="object"}function isGradientObject(a){return a.colorStops!=null}function isImagePatternObject(a){return a.image!=null}function isRegExp(a){return objToString.call(a)==="[object RegExp]"}function eqNaN(a){return a!==a}function retrieve(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];for(var n=0,o=a.length;n<o;n++)if(a[n]!=null)return a[n]}function retrieve2(a,r){return a??r}function retrieve3(a,r,n){return a??r??n}function slice(a){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return nativeSlice.apply(a,r)}function normalizeCssArray$1(a){if(typeof a=="number")return[a,a,a,a];var r=a.length;return r===2?[a[0],a[1],a[0],a[1]]:r===3?[a[0],a[1],a[2],a[1]]:a}function assert(a,r){if(!a)throw new Error(r)}function trim$1(a){return a==null?null:typeof a.trim=="function"?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(a){a[primitiveKey]=!0}function isPrimitive(a){return a[primitiveKey]}var MapPolyfill=function(){function a(){this.data={}}return a.prototype.delete=function(r){var n=this.has(r);return n&&delete this.data[r],n},a.prototype.has=function(r){return this.data.hasOwnProperty(r)},a.prototype.get=function(r){return this.data[r]},a.prototype.set=function(r,n){return this.data[r]=n,this},a.prototype.keys=function(){return keys(this.data)},a.prototype.forEach=function(r){var n=this.data;for(var o in n)n.hasOwnProperty(o)&&r(n[o],o)},a}(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=function(){function a(r){var n=isArray$1(r);this.data=maybeNativeMap();var o=this;r instanceof a?r.each(s):r&&each$f(r,s);function s(l,u){n?o.set(l,u):o.set(u,l)}}return a.prototype.hasKey=function(r){return this.data.has(r)},a.prototype.get=function(r){return this.data.get(r)},a.prototype.set=function(r,n){return this.data.set(r,n),n},a.prototype.each=function(r,n){this.data.forEach(function(o,s){r.call(n,o,s)})},a.prototype.keys=function(){var r=this.data.keys();return isNativeMapSupported?Array.from(r):r},a.prototype.removeKey=function(r){this.data.delete(r)},a}();function createHashMap(a){return new HashMap(a)}function concatArray(a,r){for(var n=new a.constructor(a.length+r.length),o=0;o<a.length;o++)n[o]=a[o];for(var s=a.length,o=0;o<r.length;o++)n[o+s]=r[o];return n}function createObject(a,r){var n;if(Object.create)n=Object.create(a);else{var o=function(){};o.prototype=a,n=new o}return r&&extend(n,r),n}function disableUserSelect(a){var r=a.style;r.webkitUserSelect="none",r.userSelect="none",r.webkitTapHighlightColor="rgba(0,0,0,0)",r["-webkit-touch-callout"]="none"}function hasOwn(a,r){return a.hasOwnProperty(r)}function noop(){}var RADIAN_TO_DEGREE=180/Math.PI;function create$2(a,r){return a==null&&(a=0),r==null&&(r=0),[a,r]}function copy$1(a,r){return a[0]=r[0],a[1]=r[1],a}function clone$3(a){return[a[0],a[1]]}function set$1(a,r,n){return a[0]=r,a[1]=n,a}function add(a,r,n){return a[0]=r[0]+n[0],a[1]=r[1]+n[1],a}function scaleAndAdd$1(a,r,n,o){return a[0]=r[0]+n[0]*o,a[1]=r[1]+n[1]*o,a}function sub(a,r,n){return a[0]=r[0]-n[0],a[1]=r[1]-n[1],a}function len(a){return Math.sqrt(lenSquare(a))}function lenSquare(a){return a[0]*a[0]+a[1]*a[1]}function scale$2(a,r,n){return a[0]=r[0]*n,a[1]=r[1]*n,a}function normalize$3(a,r){var n=len(r);return n===0?(a[0]=0,a[1]=0):(a[0]=r[0]/n,a[1]=r[1]/n),a}function distance(a,r){return Math.sqrt((a[0]-r[0])*(a[0]-r[0])+(a[1]-r[1])*(a[1]-r[1]))}var dist$1=distance;function distanceSquare(a,r){return(a[0]-r[0])*(a[0]-r[0])+(a[1]-r[1])*(a[1]-r[1])}var distSquare=distanceSquare;function lerp$1(a,r,n,o){return a[0]=r[0]+o*(n[0]-r[0]),a[1]=r[1]+o*(n[1]-r[1]),a}function applyTransform$1(a,r,n){var o=r[0],s=r[1];return a[0]=n[0]*o+n[2]*s+n[4],a[1]=n[1]*o+n[3]*s+n[5],a}function min$1(a,r,n){return a[0]=Math.min(r[0],n[0]),a[1]=Math.min(r[1],n[1]),a}function max$1(a,r,n){return a[0]=Math.max(r[0],n[0]),a[1]=Math.max(r[1],n[1]),a}var Param=function(){function a(r,n){this.target=r,this.topTarget=n&&n.topTarget}return a}(),Draggable=function(){function a(r){this.handler=r,r.on("mousedown",this._dragStart,this),r.on("mousemove",this._drag,this),r.on("mouseup",this._dragEnd,this)}return a.prototype._dragStart=function(r){for(var n=r.target;n&&!n.draggable;)n=n.parent||n.__hostTarget;n&&(this._draggingTarget=n,n.dragging=!0,this._x=r.offsetX,this._y=r.offsetY,this.handler.dispatchToElement(new Param(n,r),"dragstart",r.event))},a.prototype._drag=function(r){var n=this._draggingTarget;if(n){var o=r.offsetX,s=r.offsetY,l=o-this._x,u=s-this._y;this._x=o,this._y=s,n.drift(l,u,r),this.handler.dispatchToElement(new Param(n,r),"drag",r.event);var c=this.handler.findHover(o,s,n).target,f=this._dropTarget;this._dropTarget=c,n!==c&&(f&&c!==f&&this.handler.dispatchToElement(new Param(f,r),"dragleave",r.event),c&&c!==f&&this.handler.dispatchToElement(new Param(c,r),"dragenter",r.event))}},a.prototype._dragEnd=function(r){var n=this._draggingTarget;n&&(n.dragging=!1),this.handler.dispatchToElement(new Param(n,r),"dragend",r.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,r),"drop",r.event),this._draggingTarget=null,this._dropTarget=null},a}(),Eventful=function(){function a(r){r&&(this._$eventProcessor=r)}return a.prototype.on=function(r,n,o,s){this._$handlers||(this._$handlers={});var l=this._$handlers;if(typeof n=="function"&&(s=o,o=n,n=null),!o||!r)return this;var u=this._$eventProcessor;n!=null&&u&&u.normalizeQuery&&(n=u.normalizeQuery(n)),l[r]||(l[r]=[]);for(var c=0;c<l[r].length;c++)if(l[r][c].h===o)return this;var f={h:o,query:n,ctx:s||this,callAtLast:o.zrEventfulCallAtLast},d=l[r].length-1,v=l[r][d];return v&&v.callAtLast?l[r].splice(d,0,f):l[r].push(f),this},a.prototype.isSilent=function(r){var n=this._$handlers;return!n||!n[r]||!n[r].length},a.prototype.off=function(r,n){var o=this._$handlers;if(!o)return this;if(!r)return this._$handlers={},this;if(n){if(o[r]){for(var s=[],l=0,u=o[r].length;l<u;l++)o[r][l].h!==n&&s.push(o[r][l]);o[r]=s}o[r]&&o[r].length===0&&delete o[r]}else delete o[r];return this},a.prototype.trigger=function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(!this._$handlers)return this;var s=this._$handlers[r],l=this._$eventProcessor;if(s)for(var u=n.length,c=s.length,f=0;f<c;f++){var d=s[f];if(!(l&&l.filter&&d.query!=null&&!l.filter(r,d.query)))switch(u){case 0:d.h.call(d.ctx);break;case 1:d.h.call(d.ctx,n[0]);break;case 2:d.h.call(d.ctx,n[0],n[1]);break;default:d.h.apply(d.ctx,n);break}}return l&&l.afterTrigger&&l.afterTrigger(r),this},a.prototype.triggerWithContext=function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(!this._$handlers)return this;var s=this._$handlers[r],l=this._$eventProcessor;if(s)for(var u=n.length,c=n[u-1],f=s.length,d=0;d<f;d++){var v=s[d];if(!(l&&l.filter&&v.query!=null&&!l.filter(r,v.query)))switch(u){case 0:v.h.call(c);break;case 1:v.h.call(c,n[0]);break;case 2:v.h.call(c,n[0],n[1]);break;default:v.h.apply(c,n.slice(1,u-1));break}}return l&&l.afterTrigger&&l.afterTrigger(r),this},a}(),LN2=Math.log(2);function determinant(a,r,n,o,s,l){var u=o+"-"+s,c=a.length;if(l.hasOwnProperty(u))return l[u];if(r===1){var f=Math.round(Math.log((1<<c)-1&~s)/LN2);return a[n][f]}for(var d=o|1<<n,v=n+1;o&1<<v;)v++;for(var g=0,y=0,_=0;y<c;y++){var S=1<<y;S&s||(g+=(_%2?-1:1)*a[n][y]*determinant(a,r-1,v,d,s|S,l),_++)}return l[u]=g,g}function buildTransformer(a,r){var n=[[a[0],a[1],1,0,0,0,-r[0]*a[0],-r[0]*a[1]],[0,0,0,a[0],a[1],1,-r[1]*a[0],-r[1]*a[1]],[a[2],a[3],1,0,0,0,-r[2]*a[2],-r[2]*a[3]],[0,0,0,a[2],a[3],1,-r[3]*a[2],-r[3]*a[3]],[a[4],a[5],1,0,0,0,-r[4]*a[4],-r[4]*a[5]],[0,0,0,a[4],a[5],1,-r[5]*a[4],-r[5]*a[5]],[a[6],a[7],1,0,0,0,-r[6]*a[6],-r[6]*a[7]],[0,0,0,a[6],a[7],1,-r[7]*a[6],-r[7]*a[7]]],o={},s=determinant(n,8,0,0,0,o);if(s!==0){for(var l=[],u=0;u<8;u++)for(var c=0;c<8;c++)l[c]==null&&(l[c]=0),l[c]+=((u+c)%2?-1:1)*determinant(n,7,u===0?1:0,1<<u,1<<c,o)/s*r[u];return function(f,d,v){var g=d*l[6]+v*l[7]+1;f[0]=(d*l[0]+v*l[1]+l[2])/g,f[1]=(d*l[3]+v*l[4]+l[5])/g}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(a,r,n,o,s){return transformCoordWithViewport(_calcOut$1,r,o,s,!0)&&transformCoordWithViewport(a,n,_calcOut$1[0],_calcOut$1[1])}function transformLocalCoordClear(a,r){a&&n(a),r&&n(r);function n(o){var s=o[EVENT_SAVED_PROP];s&&(s.clearMarkers&&s.clearMarkers(),delete o[EVENT_SAVED_PROP])}}function transformCoordWithViewport(a,r,n,o,s){if(r.getBoundingClientRect&&env.domSupported&&!isCanvasEl(r)){var l=r[EVENT_SAVED_PROP]||(r[EVENT_SAVED_PROP]={}),u=prepareCoordMarkers(r,l),c=preparePointerTransformer(u,l,s);if(c)return c(a,n,o),!0}return!1}function prepareCoordMarkers(a,r){var n=r.markers;if(n)return n;n=r.markers=[];for(var o=["left","right"],s=["top","bottom"],l=0;l<4;l++){var u=document.createElement("div"),c=u.style,f=l%2,d=(l>>1)%2;c.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",o[f]+":0",s[d]+":0",o[1-f]+":auto",s[1-d]+":auto",""].join("!important;"),a.appendChild(u),n.push(u)}return r.clearMarkers=function(){each$f(n,function(v){v.parentNode&&v.parentNode.removeChild(v)})},n}function preparePointerTransformer(a,r,n){for(var o=n?"invTrans":"trans",s=r[o],l=r.srcCoords,u=[],c=[],f=!0,d=0;d<4;d++){var v=a[d].getBoundingClientRect(),g=2*d,y=v.left,_=v.top;u.push(y,_),f=f&&l&&y===l[g]&&_===l[g+1],c.push(a[d].offsetLeft,a[d].offsetTop)}return f&&s?s:(r.srcCoords=u,r[o]=n?buildTransformer(c,u):buildTransformer(u,c))}function isCanvasEl(a){return a.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(a){return a==null?"":(a+"").replace(replaceReg,function(r,n){return replaceMap[n]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env.browser.firefox&&+env.browser.version.split(".")[0]<39;function clientToLocal(a,r,n,o){return n=n||{},o?calculateZrXY(a,r,n):firefoxNotSupportOffsetXY&&r.layerX!=null&&r.layerX!==r.offsetX?(n.zrX=r.layerX,n.zrY=r.layerY):r.offsetX!=null?(n.zrX=r.offsetX,n.zrY=r.offsetY):calculateZrXY(a,r,n),n}function calculateZrXY(a,r,n){if(env.domSupported&&a.getBoundingClientRect){var o=r.clientX,s=r.clientY;if(isCanvasEl(a)){var l=a.getBoundingClientRect();n.zrX=o-l.left,n.zrY=s-l.top;return}else if(transformCoordWithViewport(_calcOut,a,o,s)){n.zrX=_calcOut[0],n.zrY=_calcOut[1];return}}n.zrX=n.zrY=0}function getNativeEvent(a){return a||window.event}function normalizeEvent(a,r,n){if(r=getNativeEvent(r),r.zrX!=null)return r;var o=r.type,s=o&&o.indexOf("touch")>=0;if(s){var u=o!=="touchend"?r.targetTouches[0]:r.changedTouches[0];u&&clientToLocal(a,u,r,n)}else{clientToLocal(a,r,r,n);var l=getWheelDeltaMayPolyfill(r);r.zrDelta=l?l/120:-(r.detail||0)/3}var c=r.button;return r.which==null&&c!==void 0&&MOUSE_EVENT_REG.test(r.type)&&(r.which=c&1?1:c&2?3:c&4?2:0),r}function getWheelDeltaMayPolyfill(a){var r=a.wheelDelta;if(r)return r;var n=a.deltaX,o=a.deltaY;if(n==null||o==null)return r;var s=Math.abs(o!==0?o:n),l=o>0?-1:o<0?1:n>0?-1:1;return 3*s*l}function addEventListener(a,r,n,o){a.addEventListener(r,n,o)}function removeEventListener(a,r,n,o){a.removeEventListener(r,n,o)}var stop=function(a){a.preventDefault(),a.stopPropagation(),a.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(a){return a.which===2||a.which===3}var GestureMgr=function(){function a(){this._track=[]}return a.prototype.recognize=function(r,n,o){return this._doTrack(r,n,o),this._recognize(r)},a.prototype.clear=function(){return this._track.length=0,this},a.prototype._doTrack=function(r,n,o){var s=r.touches;if(s){for(var l={points:[],touches:[],target:n,event:r},u=0,c=s.length;u<c;u++){var f=s[u],d=clientToLocal(o,f,{});l.points.push([d.zrX,d.zrY]),l.touches.push(f)}this._track.push(l)}},a.prototype._recognize=function(r){for(var n in recognizers)if(recognizers.hasOwnProperty(n)){var o=recognizers[n](this._track,r);if(o)return o}},a}();function dist(a){var r=a[1][0]-a[0][0],n=a[1][1]-a[0][1];return Math.sqrt(r*r+n*n)}function center$1(a){return[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]}var recognizers={pinch:function(a,r){var n=a.length;if(n){var o=(a[n-1]||{}).points,s=(a[n-2]||{}).points||o;if(s&&s.length>1&&o&&o.length>1){var l=dist(o)/dist(s);!isFinite(l)&&(l=1),r.pinchScale=l;var u=center$1(o);return r.pinchX=u[0],r.pinchY=u[1],{type:"pinch",target:a[0].target,event:r}}}}};function create$1(){return[1,0,0,1,0,0]}function identity(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a}function copy(a,r){return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a}function mul(a,r,n){var o=r[0]*n[0]+r[2]*n[1],s=r[1]*n[0]+r[3]*n[1],l=r[0]*n[2]+r[2]*n[3],u=r[1]*n[2]+r[3]*n[3],c=r[0]*n[4]+r[2]*n[5]+r[4],f=r[1]*n[4]+r[3]*n[5]+r[5];return a[0]=o,a[1]=s,a[2]=l,a[3]=u,a[4]=c,a[5]=f,a}function translate(a,r,n){return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4]+n[0],a[5]=r[5]+n[1],a}function rotate(a,r,n,o){o===void 0&&(o=[0,0]);var s=r[0],l=r[2],u=r[4],c=r[1],f=r[3],d=r[5],v=Math.sin(n),g=Math.cos(n);return a[0]=s*g+c*v,a[1]=-s*v+c*g,a[2]=l*g+f*v,a[3]=-l*v+g*f,a[4]=g*(u-o[0])+v*(d-o[1])+o[0],a[5]=g*(d-o[1])-v*(u-o[0])+o[1],a}function scale$1(a,r,n){var o=n[0],s=n[1];return a[0]=r[0]*o,a[1]=r[1]*s,a[2]=r[2]*o,a[3]=r[3]*s,a[4]=r[4]*o,a[5]=r[5]*s,a}function invert(a,r){var n=r[0],o=r[2],s=r[4],l=r[1],u=r[3],c=r[5],f=n*u-l*o;return f?(f=1/f,a[0]=u*f,a[1]=-l*f,a[2]=-o*f,a[3]=n*f,a[4]=(o*c-u*s)*f,a[5]=(l*s-n*c)*f,a):null}function clone$2(a){var r=create$1();return copy(r,a),r}var Point=function(){function a(r,n){this.x=r||0,this.y=n||0}return a.prototype.copy=function(r){return this.x=r.x,this.y=r.y,this},a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.set=function(r,n){return this.x=r,this.y=n,this},a.prototype.equal=function(r){return r.x===this.x&&r.y===this.y},a.prototype.add=function(r){return this.x+=r.x,this.y+=r.y,this},a.prototype.scale=function(r){this.x*=r,this.y*=r},a.prototype.scaleAndAdd=function(r,n){this.x+=r.x*n,this.y+=r.y*n},a.prototype.sub=function(r){return this.x-=r.x,this.y-=r.y,this},a.prototype.dot=function(r){return this.x*r.x+this.y*r.y},a.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},a.prototype.normalize=function(){var r=this.len();return this.x/=r,this.y/=r,this},a.prototype.distance=function(r){var n=this.x-r.x,o=this.y-r.y;return Math.sqrt(n*n+o*o)},a.prototype.distanceSquare=function(r){var n=this.x-r.x,o=this.y-r.y;return n*n+o*o},a.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},a.prototype.transform=function(r){if(r){var n=this.x,o=this.y;return this.x=r[0]*n+r[2]*o+r[4],this.y=r[1]*n+r[3]*o+r[5],this}},a.prototype.toArray=function(r){return r[0]=this.x,r[1]=this.y,r},a.prototype.fromArray=function(r){this.x=r[0],this.y=r[1]},a.set=function(r,n,o){r.x=n,r.y=o},a.copy=function(r,n){r.x=n.x,r.y=n.y},a.len=function(r){return Math.sqrt(r.x*r.x+r.y*r.y)},a.lenSquare=function(r){return r.x*r.x+r.y*r.y},a.dot=function(r,n){return r.x*n.x+r.y*n.y},a.add=function(r,n,o){r.x=n.x+o.x,r.y=n.y+o.y},a.sub=function(r,n,o){r.x=n.x-o.x,r.y=n.y-o.y},a.scale=function(r,n,o){r.x=n.x*o,r.y=n.y*o},a.scaleAndAdd=function(r,n,o,s){r.x=n.x+o.x*s,r.y=n.y+o.y*s},a.lerp=function(r,n,o,s){var l=1-s;r.x=l*n.x+s*o.x,r.y=l*n.y+s*o.y},a}(),mathMin$b=Math.min,mathMax$b=Math.max,mathAbs$5=Math.abs,XY$3=["x","y"],WH$3=["width","height"],lt=new Point,rb=new Point,lb=new Point,rt=new Point,_intersectCtx$1=createIntersectContext(),_minTv$1=_intersectCtx$1.minTv,_maxTv$1=_intersectCtx$1.maxTv,_lenMinMax=[0,0],BoundingRect=function(){function a(r,n,o,s){a.set(this,r,n,o,s)}return a.set=function(r,n,o,s,l){return s<0&&(n=n+s,s=-s),l<0&&(o=o+l,l=-l),r.x=n,r.y=o,r.width=s,r.height=l,r},a.prototype.union=function(r){var n=mathMin$b(r.x,this.x),o=mathMin$b(r.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$b(r.x+r.width,this.x+this.width)-n:this.width=r.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$b(r.y+r.height,this.y+this.height)-o:this.height=r.height,this.x=n,this.y=o},a.prototype.applyTransform=function(r){a.applyTransform(this,this,r)},a.prototype.calculateTransform=function(r){var n=this,o=r.width/n.width,s=r.height/n.height,l=create$1();return translate(l,l,[-n.x,-n.y]),scale$1(l,l,[o,s]),translate(l,l,[r.x,r.y]),l},a.prototype.intersect=function(r,n,o){return a.intersect(this,r,n,o)},a.intersect=function(r,n,o,s){o&&Point.set(o,0,0);var l=s&&s.outIntersectRect||null,u=s&&s.clamp;if(l&&(l.x=l.y=l.width=l.height=NaN),!r||!n)return!1;r instanceof a||(r=a.set(_tmpIntersectA,r.x,r.y,r.width,r.height)),n instanceof a||(n=a.set(_tmpIntersectB,n.x,n.y,n.width,n.height));var c=!!o;_intersectCtx$1.reset(s,c);var f=_intersectCtx$1.touchThreshold,d=r.x+f,v=r.x+r.width-f,g=r.y+f,y=r.y+r.height-f,_=n.x+f,S=n.x+n.width-f,b=n.y+f,x=n.y+n.height-f;if(d>v||g>y||_>S||b>x)return!1;var T=!(v<_||S<d||y<b||x<g);return(c||l)&&(_lenMinMax[0]=1/0,_lenMinMax[1]=0,intersectOneDim(d,v,_,S,0,c,l,u),intersectOneDim(g,y,b,x,1,c,l,u),c&&Point.copy(o,T?_intersectCtx$1.useDir?_intersectCtx$1.dirMinTv:_minTv$1:_maxTv$1)),T},a.contain=function(r,n,o){return n>=r.x&&n<=r.x+r.width&&o>=r.y&&o<=r.y+r.height},a.prototype.contain=function(r,n){return a.contain(this,r,n)},a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.copy=function(r){a.copy(this,r)},a.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},a.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},a.prototype.isZero=function(){return this.width===0||this.height===0},a.create=function(r){return new a(r.x,r.y,r.width,r.height)},a.copy=function(r,n){return r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height,r},a.applyTransform=function(r,n,o){if(!o){r!==n&&a.copy(r,n);return}if(o[1]<1e-5&&o[1]>-1e-5&&o[2]<1e-5&&o[2]>-1e-5){var s=o[0],l=o[3],u=o[4],c=o[5];r.x=n.x*s+u,r.y=n.y*l+c,r.width=n.width*s,r.height=n.height*l,r.width<0&&(r.x+=r.width,r.width=-r.width),r.height<0&&(r.y+=r.height,r.height=-r.height);return}lt.x=lb.x=n.x,lt.y=rt.y=n.y,rb.x=rt.x=n.x+n.width,rb.y=lb.y=n.y+n.height,lt.transform(o),rt.transform(o),rb.transform(o),lb.transform(o),r.x=mathMin$b(lt.x,rb.x,lb.x,rt.x),r.y=mathMin$b(lt.y,rb.y,lb.y,rt.y);var f=mathMax$b(lt.x,rb.x,lb.x,rt.x),d=mathMax$b(lt.y,rb.y,lb.y,rt.y);r.width=f-r.x,r.height=d-r.y},a}(),_tmpIntersectA=new BoundingRect(0,0,0,0),_tmpIntersectB=new BoundingRect(0,0,0,0);function intersectOneDim(a,r,n,o,s,l,u,c){var f=mathAbs$5(r-n),d=mathAbs$5(o-a),v=mathMin$b(f,d),g=XY$3[s],y=XY$3[1-s],_=WH$3[s];r<n||o<a?f<d?(l&&(_maxTv$1[g]=-f),c&&(u[g]=r,u[_]=0)):(l&&(_maxTv$1[g]=d),c&&(u[g]=a,u[_]=0)):(u&&(u[g]=mathMax$b(a,n),u[_]=mathMin$b(r,o)-u[g]),l&&(v<_lenMinMax[0]||_intersectCtx$1.useDir)&&(_lenMinMax[0]=mathMin$b(v,_lenMinMax[0]),(f<d||!_intersectCtx$1.bidirectional)&&(_minTv$1[g]=f,_minTv$1[y]=0,_intersectCtx$1.useDir&&_intersectCtx$1.calcDirMTV()),(f>=d||!_intersectCtx$1.bidirectional)&&(_minTv$1[g]=-d,_minTv$1[y]=0,_intersectCtx$1.useDir&&_intersectCtx$1.calcDirMTV())))}function createIntersectContext(){var a=0,r=new Point,n=new Point,o={minTv:new Point,maxTv:new Point,useDir:!1,dirMinTv:new Point,touchThreshold:0,bidirectional:!0,negativeSize:!1,reset:function(l,u){o.touchThreshold=0,l&&l.touchThreshold!=null&&(o.touchThreshold=mathMax$b(0,l.touchThreshold)),o.negativeSize=!1,u&&(o.minTv.set(1/0,1/0),o.maxTv.set(0,0),o.useDir=!1,l&&l.direction!=null&&(o.useDir=!0,o.dirMinTv.copy(o.minTv),n.copy(o.minTv),a=l.direction,o.bidirectional=l.bidirectional==null||!!l.bidirectional,o.bidirectional||r.set(Math.cos(a),Math.sin(a))))},calcDirMTV:function(){var l=o.minTv,u=o.dirMinTv,c=l.y*l.y+l.x*l.x,f=Math.sin(a),d=Math.cos(a),v=f*l.y+d*l.x;if(s(v)){s(l.x)&&s(l.y)&&u.set(0,0);return}if(n.x=c*d/v,n.y=c*f/v,s(n.x)&&s(n.y)){u.set(0,0);return}(o.bidirectional||r.dot(n)>0)&&n.len()<u.len()&&u.copy(n)}};function s(l){return mathAbs$5(l)<1e-10}return o}var SILENT="silent";function makeEventPacket(a,r,n){return{type:a,event:n,target:r.target,topTarget:r.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.handler=null,n}return r.prototype.dispose=function(){},r.prototype.setCursor=function(){},r}(Eventful),HoveredResult=function(){function a(r,n){this.x=r,this.y=n}return a}(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect(0,0,0,0),Handler=function(a){__extends(r,a);function r(n,o,s,l,u){var c=a.call(this)||this;return c._hovered=new HoveredResult(0,0),c.storage=n,c.painter=o,c.painterRoot=l,c._pointerSize=u,s=s||new EmptyProxy,c.proxy=null,c.setHandlerProxy(s),c._draggingMgr=new Draggable(c),c}return r.prototype.setHandlerProxy=function(n){this.proxy&&this.proxy.dispose(),n&&(each$f(handlerNames,function(o){n.on&&n.on(o,this[o],this)},this),n.handler=this),this.proxy=n},r.prototype.mousemove=function(n){var o=n.zrX,s=n.zrY,l=isOutsideBoundary(this,o,s),u=this._hovered,c=u.target;c&&!c.__zr&&(u=this.findHover(u.x,u.y),c=u.target);var f=this._hovered=l?new HoveredResult(o,s):this.findHover(o,s),d=f.target,v=this.proxy;v.setCursor&&v.setCursor(d?d.cursor:"default"),c&&d!==c&&this.dispatchToElement(u,"mouseout",n),this.dispatchToElement(f,"mousemove",n),d&&d!==c&&this.dispatchToElement(f,"mouseover",n)},r.prototype.mouseout=function(n){var o=n.zrEventControl;o!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",n),o!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:n})},r.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},r.prototype.dispatch=function(n,o){var s=this[n];s&&s.call(this,o)},r.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},r.prototype.setCursorStyle=function(n){var o=this.proxy;o.setCursor&&o.setCursor(n)},r.prototype.dispatchToElement=function(n,o,s){n=n||{};var l=n.target;if(!(l&&l.silent)){for(var u="on"+o,c=makeEventPacket(o,n,s);l&&(l[u]&&(c.cancelBubble=!!l[u].call(l,c)),l.trigger(o,c),l=l.__hostTarget?l.__hostTarget:l.parent,!c.cancelBubble););c.cancelBubble||(this.trigger(o,c),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(f){typeof f[u]=="function"&&f[u].call(f,c),f.trigger&&f.trigger(o,c)}))}},r.prototype.findHover=function(n,o,s){var l=this.storage.getDisplayList(),u=new HoveredResult(n,o);if(setHoverTarget(l,u,n,o,s),this._pointerSize&&!u.target){for(var c=[],f=this._pointerSize,d=f/2,v=new BoundingRect(n-d,o-d,f,f),g=l.length-1;g>=0;g--){var y=l[g];y!==s&&!y.ignore&&!y.ignoreCoarsePointer&&(!y.parent||!y.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(y.getBoundingRect()),y.transform&&tmpRect$1.applyTransform(y.transform),tmpRect$1.intersect(v)&&c.push(y))}if(c.length)for(var _=4,S=Math.PI/12,b=Math.PI*2,x=0;x<d;x+=_)for(var T=0;T<b;T+=S){var A=n+x*Math.cos(T),w=o+x*Math.sin(T);if(setHoverTarget(c,u,A,w,s),u.target)return u}}return u},r.prototype.processGesture=function(n,o){this._gestureMgr||(this._gestureMgr=new GestureMgr);var s=this._gestureMgr;o==="start"&&s.clear();var l=s.recognize(n,this.findHover(n.zrX,n.zrY,null).target,this.proxy.dom);if(o==="end"&&s.clear(),l){var u=l.type;n.gestureEvent=u;var c=new HoveredResult;c.target=l.target,this.dispatchToElement(c,u,l.event)}},r}(Eventful);each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(a){Handler.prototype[a]=function(r){var n=r.zrX,o=r.zrY,s=isOutsideBoundary(this,n,o),l,u;if((a!=="mouseup"||!s)&&(l=this.findHover(n,o),u=l.target),a==="mousedown")this._downEl=u,this._downPoint=[r.zrX,r.zrY],this._upEl=u;else if(a==="mouseup")this._upEl=u;else if(a==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$1(this._downPoint,[r.zrX,r.zrY])>4)return;this._downPoint=null}this.dispatchToElement(l,a,r)}});function isHover(a,r,n){if(a[a.rectHover?"rectContain":"contain"](r,n)){for(var o=a,s=void 0,l=!1;o;){if(o.ignoreClip&&(l=!0),!l){var u=o.getClipPath();if(u&&!u.contain(r,n))return!1}o.silent&&(s=!0);var c=o.__hostTarget;o=c?o.ignoreHostSilent?null:c:o.parent}return s?SILENT:!0}return!1}function setHoverTarget(a,r,n,o,s){for(var l=a.length-1;l>=0;l--){var u=a[l],c=void 0;if(u!==s&&!u.ignore&&(c=isHover(u,n,o))&&(!r.topTarget&&(r.topTarget=u),c!==SILENT)){r.target=u;break}}}function isOutsideBoundary(a,r,n){var o=a.painter;return r<0||r>o.getWidth()||n<0||n>o.getHeight()}var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(a){for(var r=0;a>=DEFAULT_MIN_MERGE;)r|=a&1,a>>=1;return a+r}function makeAscendingRun(a,r,n,o){var s=r+1;if(s===n)return 1;if(o(a[s++],a[r])<0){for(;s<n&&o(a[s],a[s-1])<0;)s++;reverseRun(a,r,s)}else for(;s<n&&o(a[s],a[s-1])>=0;)s++;return s-r}function reverseRun(a,r,n){for(n--;r<n;){var o=a[r];a[r++]=a[n],a[n--]=o}}function binaryInsertionSort(a,r,n,o,s){for(o===r&&o++;o<n;o++){for(var l=a[o],u=r,c=o,f;u<c;)f=u+c>>>1,s(l,a[f])<0?c=f:u=f+1;var d=o-u;switch(d){case 3:a[u+3]=a[u+2];case 2:a[u+2]=a[u+1];case 1:a[u+1]=a[u];break;default:for(;d>0;)a[u+d]=a[u+d-1],d--}a[u]=l}}function gallopLeft(a,r,n,o,s,l){var u=0,c=0,f=1;if(l(a,r[n+s])>0){for(c=o-s;f<c&&l(a,r[n+s+f])>0;)u=f,f=(f<<1)+1,f<=0&&(f=c);f>c&&(f=c),u+=s,f+=s}else{for(c=s+1;f<c&&l(a,r[n+s-f])<=0;)u=f,f=(f<<1)+1,f<=0&&(f=c);f>c&&(f=c);var d=u;u=s-f,f=s-d}for(u++;u<f;){var v=u+(f-u>>>1);l(a,r[n+v])>0?u=v+1:f=v}return f}function gallopRight(a,r,n,o,s,l){var u=0,c=0,f=1;if(l(a,r[n+s])<0){for(c=s+1;f<c&&l(a,r[n+s-f])<0;)u=f,f=(f<<1)+1,f<=0&&(f=c);f>c&&(f=c);var d=u;u=s-f,f=s-d}else{for(c=o-s;f<c&&l(a,r[n+s+f])>=0;)u=f,f=(f<<1)+1,f<=0&&(f=c);f>c&&(f=c),u+=s,f+=s}for(u++;u<f;){var v=u+(f-u>>>1);l(a,r[n+v])<0?f=v:u=v+1}return f}function TimSort(a,r){var n=DEFAULT_MIN_GALLOPING,o,s,l=0,u=[];o=[],s=[];function c(_,S){o[l]=_,s[l]=S,l+=1}function f(){for(;l>1;){var _=l-2;if(_>=1&&s[_-1]<=s[_]+s[_+1]||_>=2&&s[_-2]<=s[_]+s[_-1])s[_-1]<s[_+1]&&_--;else if(s[_]>s[_+1])break;v(_)}}function d(){for(;l>1;){var _=l-2;_>0&&s[_-1]<s[_+1]&&_--,v(_)}}function v(_){var S=o[_],b=s[_],x=o[_+1],T=s[_+1];s[_]=b+T,_===l-3&&(o[_+1]=o[_+2],s[_+1]=s[_+2]),l--;var A=gallopRight(a[x],a,S,b,0,r);S+=A,b-=A,b!==0&&(T=gallopLeft(a[S+b-1],a,x,T,T-1,r),T!==0&&(b<=T?g(S,b,x,T):y(S,b,x,T)))}function g(_,S,b,x){var T=0;for(T=0;T<S;T++)u[T]=a[_+T];var A=0,w=b,C=_;if(a[C++]=a[w++],--x===0){for(T=0;T<S;T++)a[C+T]=u[A+T];return}if(S===1){for(T=0;T<x;T++)a[C+T]=a[w+T];a[C+x]=u[A];return}for(var E=n,P,I,M;;){P=0,I=0,M=!1;do if(r(a[w],u[A])<0){if(a[C++]=a[w++],I++,P=0,--x===0){M=!0;break}}else if(a[C++]=u[A++],P++,I=0,--S===1){M=!0;break}while((P|I)<E);if(M)break;do{if(P=gallopRight(a[w],u,A,S,0,r),P!==0){for(T=0;T<P;T++)a[C+T]=u[A+T];if(C+=P,A+=P,S-=P,S<=1){M=!0;break}}if(a[C++]=a[w++],--x===0){M=!0;break}if(I=gallopLeft(u[A],a,w,x,0,r),I!==0){for(T=0;T<I;T++)a[C+T]=a[w+T];if(C+=I,w+=I,x-=I,x===0){M=!0;break}}if(a[C++]=u[A++],--S===1){M=!0;break}E--}while(P>=DEFAULT_MIN_GALLOPING||I>=DEFAULT_MIN_GALLOPING);if(M)break;E<0&&(E=0),E+=2}if(n=E,n<1&&(n=1),S===1){for(T=0;T<x;T++)a[C+T]=a[w+T];a[C+x]=u[A]}else{if(S===0)throw new Error;for(T=0;T<S;T++)a[C+T]=u[A+T]}}function y(_,S,b,x){var T=0;for(T=0;T<x;T++)u[T]=a[b+T];var A=_+S-1,w=x-1,C=b+x-1,E=0,P=0;if(a[C--]=a[A--],--S===0){for(E=C-(x-1),T=0;T<x;T++)a[E+T]=u[T];return}if(x===1){for(C-=S,A-=S,P=C+1,E=A+1,T=S-1;T>=0;T--)a[P+T]=a[E+T];a[C]=u[w];return}for(var I=n;;){var M=0,R=0,O=!1;do if(r(u[w],a[A])<0){if(a[C--]=a[A--],M++,R=0,--S===0){O=!0;break}}else if(a[C--]=u[w--],R++,M=0,--x===1){O=!0;break}while((M|R)<I);if(O)break;do{if(M=S-gallopRight(u[w],a,_,S,S-1,r),M!==0){for(C-=M,A-=M,S-=M,P=C+1,E=A+1,T=M-1;T>=0;T--)a[P+T]=a[E+T];if(S===0){O=!0;break}}if(a[C--]=u[w--],--x===1){O=!0;break}if(R=x-gallopLeft(a[A],u,0,x,x-1,r),R!==0){for(C-=R,w-=R,x-=R,P=C+1,E=w+1,T=0;T<R;T++)a[P+T]=u[E+T];if(x<=1){O=!0;break}}if(a[C--]=a[A--],--S===0){O=!0;break}I--}while(M>=DEFAULT_MIN_GALLOPING||R>=DEFAULT_MIN_GALLOPING);if(O)break;I<0&&(I=0),I+=2}if(n=I,n<1&&(n=1),x===1){for(C-=S,A-=S,P=C+1,E=A+1,T=S-1;T>=0;T--)a[P+T]=a[E+T];a[C]=u[w]}else{if(x===0)throw new Error;for(E=C-(x-1),T=0;T<x;T++)a[E+T]=u[T]}}return{mergeRuns:f,forceMergeRuns:d,pushRun:c}}function sort$2(a,r,n,o){n||(n=0),o||(o=a.length);var s=o-n;if(!(s<2)){var l=0;if(s<DEFAULT_MIN_MERGE){l=makeAscendingRun(a,n,o,r),binaryInsertionSort(a,n,o,n+l,r);return}var u=TimSort(a,r),c=minRunLength(s);do{if(l=makeAscendingRun(a,n,o,r),l<c){var f=s;f>c&&(f=c),binaryInsertionSort(a,n,n+f,n+l,r),l=f}u.pushRun(n,l),u.mergeRuns(),s-=l,n+=l}while(s!==0);u.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(a,r){return a.zlevel===r.zlevel?a.z===r.z?a.z2-r.z2:a.z-r.z:a.zlevel-r.zlevel}var Storage=function(){function a(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return a.prototype.traverse=function(r,n){for(var o=0;o<this._roots.length;o++)this._roots[o].traverse(r,n)},a.prototype.getDisplayList=function(r,n){n=n||!1;var o=this._displayList;return(r||!o.length)&&this.updateDisplayList(n),o},a.prototype.updateDisplayList=function(r){this._displayListLen=0;for(var n=this._roots,o=this._displayList,s=0,l=n.length;s<l;s++)this._updateAndAddDisplayable(n[s],null,r);o.length=this._displayListLen,sort$2(o,shapeCompareFunc)},a.prototype._updateAndAddDisplayable=function(r,n,o){if(!(r.ignore&&!o)){r.beforeUpdate(),r.update(),r.afterUpdate();var s=r.getClipPath(),l=n&&n.length,u=0,c=r.__clipPaths;if(!r.ignoreClip&&(l||s)){if(c||(c=r.__clipPaths=[]),l)for(var f=0;f<n.length;f++)c[u++]=n[f];for(var d=s,v=r;d;)d.parent=v,d.updateTransform(),c[u++]=d,v=d,d=d.getClipPath()}if(c&&(c.length=u),r.childrenRef){for(var g=r.childrenRef(),y=0;y<g.length;y++){var _=g[y];r.__dirty&&(_.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(_,c,o)}r.__dirty=0}else{var S=r;isNaN(S.z)&&(logInvalidZError(),S.z=0),isNaN(S.z2)&&(logInvalidZError(),S.z2=0),isNaN(S.zlevel)&&(logInvalidZError(),S.zlevel=0),this._displayList[this._displayListLen++]=S}var b=r.getDecalElement&&r.getDecalElement();b&&this._updateAndAddDisplayable(b,c,o);var x=r.getTextGuideLine();x&&this._updateAndAddDisplayable(x,c,o);var T=r.getTextContent();T&&this._updateAndAddDisplayable(T,c,o)}},a.prototype.addRoot=function(r){r.__zr&&r.__zr.storage===this||this._roots.push(r)},a.prototype.delRoot=function(r){if(r instanceof Array){for(var n=0,o=r.length;n<o;n++)this.delRoot(r[n]);return}var s=indexOf(this._roots,r);s>=0&&this._roots.splice(s,1)},a.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},a.prototype.getRoots=function(){return this._roots},a.prototype.dispose=function(){this._displayList=null,this._roots=null},a}(),requestAnimationFrame$1;requestAnimationFrame$1=env.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(a){return setTimeout(a,16)};var easingFuncs={linear:function(a){return a},quadraticIn:function(a){return a*a},quadraticOut:function(a){return a*(2-a)},quadraticInOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)},cubicIn:function(a){return a*a*a},cubicOut:function(a){return--a*a*a+1},cubicInOut:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},quarticIn:function(a){return a*a*a*a},quarticOut:function(a){return 1- --a*a*a*a},quarticInOut:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},quinticIn:function(a){return a*a*a*a*a},quinticOut:function(a){return--a*a*a*a*a+1},quinticInOut:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},sinusoidalIn:function(a){return 1-Math.cos(a*Math.PI/2)},sinusoidalOut:function(a){return Math.sin(a*Math.PI/2)},sinusoidalInOut:function(a){return .5*(1-Math.cos(Math.PI*a))},exponentialIn:function(a){return a===0?0:Math.pow(1024,a-1)},exponentialOut:function(a){return a===1?1:1-Math.pow(2,-10*a)},exponentialInOut:function(a){return a===0?0:a===1?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)},circularIn:function(a){return 1-Math.sqrt(1-a*a)},circularOut:function(a){return Math.sqrt(1- --a*a)},circularInOut:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},elasticIn:function(a){var r,n=.1,o=.4;return a===0?0:a===1?1:(!n||n<1?(n=1,r=o/4):r=o*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(a-=1))*Math.sin((a-r)*(2*Math.PI)/o)))},elasticOut:function(a){var r,n=.1,o=.4;return a===0?0:a===1?1:(!n||n<1?(n=1,r=o/4):r=o*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*a)*Math.sin((a-r)*(2*Math.PI)/o)+1)},elasticInOut:function(a){var r,n=.1,o=.4;return a===0?0:a===1?1:(!n||n<1?(n=1,r=o/4):r=o*Math.asin(1/n)/(2*Math.PI),(a*=2)<1?-.5*(n*Math.pow(2,10*(a-=1))*Math.sin((a-r)*(2*Math.PI)/o)):n*Math.pow(2,-10*(a-=1))*Math.sin((a-r)*(2*Math.PI)/o)*.5+1)},backIn:function(a){var r=1.70158;return a*a*((r+1)*a-r)},backOut:function(a){var r=1.70158;return--a*a*((r+1)*a+r)+1},backInOut:function(a){var r=2.5949095;return(a*=2)<1?.5*(a*a*((r+1)*a-r)):.5*((a-=2)*a*((r+1)*a+r)+2)},bounceIn:function(a){return 1-easingFuncs.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},bounceInOut:function(a){return a<.5?easingFuncs.bounceIn(a*2)*.5:easingFuncs.bounceOut(a*2-1)*.5+.5}},mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$4=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$2(),_v1=create$2(),_v2=create$2();function isAroundZero$1(a){return a>-EPSILON$4&&a<EPSILON$4}function isNotAroundZero$1(a){return a>EPSILON$4||a<-EPSILON$4}function cubicAt(a,r,n,o,s){var l=1-s;return l*l*(l*a+3*s*r)+s*s*(s*o+3*l*n)}function cubicDerivativeAt(a,r,n,o,s){var l=1-s;return 3*(((r-a)*l+2*(n-r)*s)*l+(o-n)*s*s)}function cubicRootAt(a,r,n,o,s,l){var u=o+3*(r-n)-a,c=3*(n-r*2+a),f=3*(r-a),d=a-s,v=c*c-3*u*f,g=c*f-9*u*d,y=f*f-3*c*d,_=0;if(isAroundZero$1(v)&&isAroundZero$1(g))if(isAroundZero$1(c))l[0]=0;else{var S=-f/c;S>=0&&S<=1&&(l[_++]=S)}else{var b=g*g-4*v*y;if(isAroundZero$1(b)){var x=g/v,S=-c/u+x,T=-x/2;S>=0&&S<=1&&(l[_++]=S),T>=0&&T<=1&&(l[_++]=T)}else if(b>0){var A=mathSqrt$3(b),w=v*c+1.5*u*(-g+A),C=v*c+1.5*u*(-g-A);w<0?w=-mathPow$2(-w,ONE_THIRD):w=mathPow$2(w,ONE_THIRD),C<0?C=-mathPow$2(-C,ONE_THIRD):C=mathPow$2(C,ONE_THIRD);var S=(-c-(w+C))/(3*u);S>=0&&S<=1&&(l[_++]=S)}else{var E=(2*v*c-3*u*g)/(2*mathSqrt$3(v*v*v)),P=Math.acos(E)/3,I=mathSqrt$3(v),M=Math.cos(P),S=(-c-2*I*M)/(3*u),T=(-c+I*(M+THREE_SQRT*Math.sin(P)))/(3*u),R=(-c+I*(M-THREE_SQRT*Math.sin(P)))/(3*u);S>=0&&S<=1&&(l[_++]=S),T>=0&&T<=1&&(l[_++]=T),R>=0&&R<=1&&(l[_++]=R)}}return _}function cubicExtrema(a,r,n,o,s){var l=6*n-12*r+6*a,u=9*r+3*o-3*a-9*n,c=3*r-3*a,f=0;if(isAroundZero$1(u)){if(isNotAroundZero$1(l)){var d=-c/l;d>=0&&d<=1&&(s[f++]=d)}}else{var v=l*l-4*u*c;if(isAroundZero$1(v))s[0]=-l/(2*u);else if(v>0){var g=mathSqrt$3(v),d=(-l+g)/(2*u),y=(-l-g)/(2*u);d>=0&&d<=1&&(s[f++]=d),y>=0&&y<=1&&(s[f++]=y)}}return f}function cubicSubdivide(a,r,n,o,s,l){var u=(r-a)*s+a,c=(n-r)*s+r,f=(o-n)*s+n,d=(c-u)*s+u,v=(f-c)*s+c,g=(v-d)*s+d;l[0]=a,l[1]=u,l[2]=d,l[3]=g,l[4]=g,l[5]=v,l[6]=f,l[7]=o}function cubicProjectPoint(a,r,n,o,s,l,u,c,f,d,v){var g,y=.005,_=1/0,S,b,x,T;_v0[0]=f,_v0[1]=d;for(var A=0;A<1;A+=.05)_v1[0]=cubicAt(a,n,s,u,A),_v1[1]=cubicAt(r,o,l,c,A),x=distSquare(_v0,_v1),x<_&&(g=A,_=x);_=1/0;for(var w=0;w<32&&!(y<EPSILON_NUMERIC);w++)S=g-y,b=g+y,_v1[0]=cubicAt(a,n,s,u,S),_v1[1]=cubicAt(r,o,l,c,S),x=distSquare(_v1,_v0),S>=0&&x<_?(g=S,_=x):(_v2[0]=cubicAt(a,n,s,u,b),_v2[1]=cubicAt(r,o,l,c,b),T=distSquare(_v2,_v0),b<=1&&T<_?(g=b,_=T):y*=.5);return v&&(v[0]=cubicAt(a,n,s,u,g),v[1]=cubicAt(r,o,l,c,g)),mathSqrt$3(_)}function cubicLength(a,r,n,o,s,l,u,c,f){for(var d=a,v=r,g=0,y=1/f,_=1;_<=f;_++){var S=_*y,b=cubicAt(a,n,s,u,S),x=cubicAt(r,o,l,c,S),T=b-d,A=x-v;g+=Math.sqrt(T*T+A*A),d=b,v=x}return g}function quadraticAt$1(a,r,n,o){var s=1-o;return s*(s*a+2*o*r)+o*o*n}function quadraticDerivativeAt(a,r,n,o){return 2*((1-o)*(r-a)+o*(n-r))}function quadraticRootAt(a,r,n,o,s){var l=a-2*r+n,u=2*(r-a),c=a-o,f=0;if(isAroundZero$1(l)){if(isNotAroundZero$1(u)){var d=-c/u;d>=0&&d<=1&&(s[f++]=d)}}else{var v=u*u-4*l*c;if(isAroundZero$1(v)){var d=-u/(2*l);d>=0&&d<=1&&(s[f++]=d)}else if(v>0){var g=mathSqrt$3(v),d=(-u+g)/(2*l),y=(-u-g)/(2*l);d>=0&&d<=1&&(s[f++]=d),y>=0&&y<=1&&(s[f++]=y)}}return f}function quadraticExtremum(a,r,n){var o=a+n-2*r;return o===0?.5:(a-r)/o}function quadraticSubdivide(a,r,n,o,s){var l=(r-a)*o+a,u=(n-r)*o+r,c=(u-l)*o+l;s[0]=a,s[1]=l,s[2]=c,s[3]=c,s[4]=u,s[5]=n}function quadraticProjectPoint(a,r,n,o,s,l,u,c,f){var d,v=.005,g=1/0;_v0[0]=u,_v0[1]=c;for(var y=0;y<1;y+=.05){_v1[0]=quadraticAt$1(a,n,s,y),_v1[1]=quadraticAt$1(r,o,l,y);var _=distSquare(_v0,_v1);_<g&&(d=y,g=_)}g=1/0;for(var S=0;S<32&&!(v<EPSILON_NUMERIC);S++){var b=d-v,x=d+v;_v1[0]=quadraticAt$1(a,n,s,b),_v1[1]=quadraticAt$1(r,o,l,b);var _=distSquare(_v1,_v0);if(b>=0&&_<g)d=b,g=_;else{_v2[0]=quadraticAt$1(a,n,s,x),_v2[1]=quadraticAt$1(r,o,l,x);var T=distSquare(_v2,_v0);x<=1&&T<g?(d=x,g=T):v*=.5}}return f&&(f[0]=quadraticAt$1(a,n,s,d),f[1]=quadraticAt$1(r,o,l,d)),mathSqrt$3(g)}function quadraticLength(a,r,n,o,s,l,u){for(var c=a,f=r,d=0,v=1/u,g=1;g<=u;g++){var y=g*v,_=quadraticAt$1(a,n,s,y),S=quadraticAt$1(r,o,l,y),b=_-c,x=S-f;d+=Math.sqrt(b*b+x*x),c=_,f=S}return d}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(a){var r=a&&regexp.exec(a);if(r){var n=r[1].split(","),o=+trim$1(n[0]),s=+trim$1(n[1]),l=+trim$1(n[2]),u=+trim$1(n[3]);if(isNaN(o+s+l+u))return;var c=[];return function(f){return f<=0?0:f>=1?1:cubicRootAt(0,o,l,1,f,c)&&cubicAt(0,s,u,1,c[0])}}}var Clip=function(){function a(r){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=r.life||1e3,this._delay=r.delay||0,this.loop=r.loop||!1,this.onframe=r.onframe||noop,this.ondestroy=r.ondestroy||noop,this.onrestart=r.onrestart||noop,r.easing&&this.setEasing(r.easing)}return a.prototype.step=function(r,n){if(this._inited||(this._startTime=r+this._delay,this._inited=!0),this._paused){this._pausedTime+=n;return}var o=this._life,s=r-this._startTime-this._pausedTime,l=s/o;l<0&&(l=0),l=Math.min(l,1);var u=this.easingFunc,c=u?u(l):l;if(this.onframe(c),l===1)if(this.loop){var f=s%o;this._startTime=r-f,this._pausedTime=0,this.onrestart()}else return!0;return!1},a.prototype.pause=function(){this._paused=!0},a.prototype.resume=function(){this._paused=!1},a.prototype.setEasing=function(r){this.easing=r,this.easingFunc=isFunction(r)?r:easingFuncs[r]||createCubicEasingFunc(r)},a}(),Entry=function(){function a(r){this.value=r}return a}(),LinkedList=function(){function a(){this._len=0}return a.prototype.insert=function(r){var n=new Entry(r);return this.insertEntry(n),n},a.prototype.insertEntry=function(r){this.head?(this.tail.next=r,r.prev=this.tail,r.next=null,this.tail=r):this.head=this.tail=r,this._len++},a.prototype.remove=function(r){var n=r.prev,o=r.next;n?n.next=o:this.head=o,o?o.prev=n:this.tail=n,r.next=r.prev=null,this._len--},a.prototype.len=function(){return this._len},a.prototype.clear=function(){this.head=this.tail=null,this._len=0},a}(),LRU=function(){function a(r){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=r}return a.prototype.put=function(r,n){var o=this._list,s=this._map,l=null;if(s[r]==null){var u=o.len(),c=this._lastRemovedEntry;if(u>=this._maxSize&&u>0){var f=o.head;o.remove(f),delete s[f.key],l=f.value,this._lastRemovedEntry=f}c?c.value=n:c=new Entry(n),c.key=r,o.insertEntry(c),s[r]=c}return l},a.prototype.get=function(r){var n=this._map[r],o=this._list;if(n!=null)return n!==o.tail&&(o.remove(n),o.insertEntry(n)),n.value},a.prototype.clear=function(){this._list.clear(),this._map={}},a.prototype.len=function(){return this._list.len()},a}(),kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(a){return a=Math.round(a),a<0?0:a>255?255:a}function clampCssAngle(a){return a=Math.round(a),a<0?0:a>360?360:a}function clampCssFloat(a){return a<0?0:a>1?1:a}function parseCssInt(a){var r=a;return r.length&&r.charAt(r.length-1)==="%"?clampCssByte(parseFloat(r)/100*255):clampCssByte(parseInt(r,10))}function parseCssFloat(a){var r=a;return r.length&&r.charAt(r.length-1)==="%"?clampCssFloat(parseFloat(r)/100):clampCssFloat(parseFloat(r))}function cssHueToRgb(a,r,n){return n<0?n+=1:n>1&&(n-=1),n*6<1?a+(r-a)*n*6:n*2<1?r:n*3<2?a+(r-a)*(2/3-n)*6:a}function lerpNumber(a,r,n){return a+(r-a)*n}function setRgba(a,r,n,o,s){return a[0]=r,a[1]=n,a[2]=o,a[3]=s,a}function copyRgba(a,r){return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a}var colorCache=new LRU(20),lastRemovedArr=null;function putToCache(a,r){lastRemovedArr&&copyRgba(lastRemovedArr,r),lastRemovedArr=colorCache.put(a,lastRemovedArr||r.slice())}function parse(a,r){if(a){r=r||[];var n=colorCache.get(a);if(n)return copyRgba(r,n);a=a+"";var o=a.replace(/ /g,"").toLowerCase();if(o in kCSSColorTable)return copyRgba(r,kCSSColorTable[o]),putToCache(a,r),r;var s=o.length;if(o.charAt(0)==="#"){if(s===4||s===5){var l=parseInt(o.slice(1,4),16);if(!(l>=0&&l<=4095)){setRgba(r,0,0,0,1);return}return setRgba(r,(l&3840)>>4|(l&3840)>>8,l&240|(l&240)>>4,l&15|(l&15)<<4,s===5?parseInt(o.slice(4),16)/15:1),putToCache(a,r),r}else if(s===7||s===9){var l=parseInt(o.slice(1,7),16);if(!(l>=0&&l<=16777215)){setRgba(r,0,0,0,1);return}return setRgba(r,(l&16711680)>>16,(l&65280)>>8,l&255,s===9?parseInt(o.slice(7),16)/255:1),putToCache(a,r),r}return}var u=o.indexOf("("),c=o.indexOf(")");if(u!==-1&&c+1===s){var f=o.substr(0,u),d=o.substr(u+1,c-(u+1)).split(","),v=1;switch(f){case"rgba":if(d.length!==4)return d.length===3?setRgba(r,+d[0],+d[1],+d[2],1):setRgba(r,0,0,0,1);v=parseCssFloat(d.pop());case"rgb":if(d.length>=3)return setRgba(r,parseCssInt(d[0]),parseCssInt(d[1]),parseCssInt(d[2]),d.length===3?v:parseCssFloat(d[3])),putToCache(a,r),r;setRgba(r,0,0,0,1);return;case"hsla":if(d.length!==4){setRgba(r,0,0,0,1);return}return d[3]=parseCssFloat(d[3]),hsla2rgba(d,r),putToCache(a,r),r;case"hsl":if(d.length!==3){setRgba(r,0,0,0,1);return}return hsla2rgba(d,r),putToCache(a,r),r;default:return}}setRgba(r,0,0,0,1)}}function hsla2rgba(a,r){var n=(parseFloat(a[0])%360+360)%360/360,o=parseCssFloat(a[1]),s=parseCssFloat(a[2]),l=s<=.5?s*(o+1):s+o-s*o,u=s*2-l;return r=r||[],setRgba(r,clampCssByte(cssHueToRgb(u,l,n+1/3)*255),clampCssByte(cssHueToRgb(u,l,n)*255),clampCssByte(cssHueToRgb(u,l,n-1/3)*255),1),a.length===4&&(r[3]=a[3]),r}function rgba2hsla(a){if(a){var r=a[0]/255,n=a[1]/255,o=a[2]/255,s=Math.min(r,n,o),l=Math.max(r,n,o),u=l-s,c=(l+s)/2,f,d;if(u===0)f=0,d=0;else{c<.5?d=u/(l+s):d=u/(2-l-s);var v=((l-r)/6+u/2)/u,g=((l-n)/6+u/2)/u,y=((l-o)/6+u/2)/u;r===l?f=y-g:n===l?f=1/3+v-y:o===l&&(f=2/3+g-v),f<0&&(f+=1),f>1&&(f-=1)}var _=[f*360,d,c];return a[3]!=null&&_.push(a[3]),_}}function lift(a,r){var n=parse(a);if(n){for(var o=0;o<3;o++)r<0?n[o]=n[o]*(1-r)|0:n[o]=(255-n[o])*r+n[o]|0,n[o]>255?n[o]=255:n[o]<0&&(n[o]=0);return stringify(n,n.length===4?"rgba":"rgb")}}function fastLerp(a,r,n){if(!(!(r&&r.length)||!(a>=0&&a<=1))){n=n||[];var o=a*(r.length-1),s=Math.floor(o),l=Math.ceil(o),u=r[s],c=r[l],f=o-s;return n[0]=clampCssByte(lerpNumber(u[0],c[0],f)),n[1]=clampCssByte(lerpNumber(u[1],c[1],f)),n[2]=clampCssByte(lerpNumber(u[2],c[2],f)),n[3]=clampCssFloat(lerpNumber(u[3],c[3],f)),n}}function lerp(a,r,n){if(!(!(r&&r.length)||!(a>=0&&a<=1))){var o=a*(r.length-1),s=Math.floor(o),l=Math.ceil(o),u=parse(r[s]),c=parse(r[l]),f=o-s,d=stringify([clampCssByte(lerpNumber(u[0],c[0],f)),clampCssByte(lerpNumber(u[1],c[1],f)),clampCssByte(lerpNumber(u[2],c[2],f)),clampCssFloat(lerpNumber(u[3],c[3],f))],"rgba");return n?{color:d,leftIndex:s,rightIndex:l,value:o}:d}}function modifyHSL(a,r,n,o){var s=parse(a);if(a)return s=rgba2hsla(s),r!=null&&(s[0]=clampCssAngle(isFunction(r)?r(s[0]):r)),n!=null&&(s[1]=parseCssFloat(isFunction(n)?n(s[1]):n)),o!=null&&(s[2]=parseCssFloat(isFunction(o)?o(s[2]):o)),stringify(hsla2rgba(s),"rgba")}function modifyAlpha(a,r){var n=parse(a);if(n&&r!=null)return n[3]=clampCssFloat(r),stringify(n,"rgba")}function stringify(a,r){if(!(!a||!a.length)){var n=a[0]+","+a[1]+","+a[2];return(r==="rgba"||r==="hsva"||r==="hsla")&&(n+=","+a[3]),r+"("+n+")"}}function lum(a,r){var n=parse(a);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*r:0}var liftedColorCache=new LRU(100);function liftColor(a){if(isString(a)){var r=liftedColorCache.get(a);return r||(r=lift(a,-.1),liftedColorCache.put(a,r)),r}else if(isGradientObject(a)){var n=extend({},a);return n.colorStops=map$1(a.colorStops,function(o){return{offset:o.offset,color:lift(o.color,-.1)}}),n}return a}var mathRound$1=Math.round;function normalizeColor(a){var r;if(!a||a==="transparent")a="none";else if(typeof a=="string"&&a.indexOf("rgba")>-1){var n=parse(a);n&&(a="rgb("+n[0]+","+n[1]+","+n[2]+")",r=n[3])}return{color:a,opacity:r??1}}var EPSILON$3=1e-4;function isAroundZero(a){return a<EPSILON$3&&a>-EPSILON$3}function round3(a){return mathRound$1(a*1e3)/1e3}function round4(a){return mathRound$1(a*1e4)/1e4}function getMatrixStr(a){return"matrix("+round3(a[0])+","+round3(a[1])+","+round3(a[2])+","+round3(a[3])+","+round4(a[4])+","+round4(a[5])+")"}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function adjustTextY$1(a,r,n){return n==="top"?a+=r/2:n==="bottom"&&(a-=r/2),a}function hasShadow(a){return a&&(a.shadowBlur||a.shadowOffsetX||a.shadowOffsetY)}function getShadowKey(a){var r=a.style,n=a.getGlobalScale();return[r.shadowColor,(r.shadowBlur||0).toFixed(2),(r.shadowOffsetX||0).toFixed(2),(r.shadowOffsetY||0).toFixed(2),n[0],n[1]].join(",")}function isImagePattern(a){return a&&!!a.image}function isSVGPattern(a){return a&&!!a.svgElement}function isPattern(a){return isImagePattern(a)||isSVGPattern(a)}function isLinearGradient(a){return a.type==="linear"}function isRadialGradient(a){return a.type==="radial"}function isGradient(a){return a&&(a.type==="linear"||a.type==="radial")}function getIdURL(a){return"url(#"+a+")"}function getPathPrecision(a){var r=a.getGlobalScale(),n=Math.max(r[0],r[1]);return Math.max(Math.ceil(Math.log(n)/Math.log(10)),1)}function getSRTTransformString(a){var r=a.x||0,n=a.y||0,o=(a.rotation||0)*RADIAN_TO_DEGREE,s=retrieve2(a.scaleX,1),l=retrieve2(a.scaleY,1),u=a.skewX||0,c=a.skewY||0,f=[];return(r||n)&&f.push("translate("+r+"px,"+n+"px)"),o&&f.push("rotate("+o+")"),(s!==1||l!==1)&&f.push("scale("+s+","+l+")"),(u||c)&&f.push("skew("+mathRound$1(u*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(c*RADIAN_TO_DEGREE)+"deg)"),f.join(" ")}var encodeBase64=function(){return env.hasGlobalWindow&&isFunction(window.btoa)?function(a){return window.btoa(unescape(encodeURIComponent(a)))}:typeof Buffer<"u"?function(a){return Buffer.from(a).toString("base64")}:function(a){return null}}(),arraySlice=Array.prototype.slice;function interpolateNumber$1(a,r,n){return(r-a)*n+a}function interpolate1DArray(a,r,n,o){for(var s=r.length,l=0;l<s;l++)a[l]=interpolateNumber$1(r[l],n[l],o);return a}function interpolate2DArray(a,r,n,o){for(var s=r.length,l=s&&r[0].length,u=0;u<s;u++){a[u]||(a[u]=[]);for(var c=0;c<l;c++)a[u][c]=interpolateNumber$1(r[u][c],n[u][c],o)}return a}function add1DArray(a,r,n,o){for(var s=r.length,l=0;l<s;l++)a[l]=r[l]+n[l]*o;return a}function add2DArray(a,r,n,o){for(var s=r.length,l=s&&r[0].length,u=0;u<s;u++){a[u]||(a[u]=[]);for(var c=0;c<l;c++)a[u][c]=r[u][c]+n[u][c]*o}return a}function fillColorStops(a,r){for(var n=a.length,o=r.length,s=n>o?r:a,l=Math.min(n,o),u=s[l-1]||{color:[0,0,0,0],offset:0},c=l;c<Math.max(n,o);c++)s.push({offset:u.offset,color:u.color.slice()})}function fillArray(a,r,n){var o=a,s=r;if(!(!o.push||!s.push)){var l=o.length,u=s.length;if(l!==u){var c=l>u;if(c)o.length=u;else for(var f=l;f<u;f++)o.push(n===1?s[f]:arraySlice.call(s[f]))}for(var d=o[0]&&o[0].length,f=0;f<o.length;f++)if(n===1)isNaN(o[f])&&(o[f]=s[f]);else for(var v=0;v<d;v++)isNaN(o[f][v])&&(o[f][v]=s[f][v])}}function cloneValue(a){if(isArrayLike(a)){var r=a.length;if(isArrayLike(a[0])){for(var n=[],o=0;o<r;o++)n.push(arraySlice.call(a[o]));return n}return arraySlice.call(a)}return a}function rgba2String(a){return a[0]=Math.floor(a[0])||0,a[1]=Math.floor(a[1])||0,a[2]=Math.floor(a[2])||0,a[3]=a[3]==null?1:a[3],"rgba("+a.join(",")+")"}function guessArrayDim(a){return isArrayLike(a&&a[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(a){return a===VALUE_TYPE_LINEAR_GRADIENT||a===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(a){return a===VALUE_TYPE_1D_ARRAY||a===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=function(){function a(r){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=r}return a.prototype.isFinished=function(){return this._finished},a.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},a.prototype.needsAnimate=function(){return this.keyframes.length>=1},a.prototype.getAdditiveTrack=function(){return this._additiveTrack},a.prototype.addKeyframe=function(r,n,o){this._needsSort=!0;var s=this.keyframes,l=s.length,u=!1,c=VALUE_TYPE_UNKOWN,f=n;if(isArrayLike(n)){var d=guessArrayDim(n);c=d,(d===1&&!isNumber(n[0])||d===2&&!isNumber(n[0][0]))&&(u=!0)}else if(isNumber(n)&&!eqNaN(n))c=VALUE_TYPE_NUMBER;else if(isString(n))if(!isNaN(+n))c=VALUE_TYPE_NUMBER;else{var v=parse(n);v&&(f=v,c=VALUE_TYPE_COLOR)}else if(isGradientObject(n)){var g=extend({},f);g.colorStops=map$1(n.colorStops,function(_){return{offset:_.offset,color:parse(_.color)}}),isLinearGradient(n)?c=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(n)&&(c=VALUE_TYPE_RADIAL_GRADIENT),f=g}l===0?this.valType=c:(c!==this.valType||c===VALUE_TYPE_UNKOWN)&&(u=!0),this.discrete=this.discrete||u;var y={time:r,value:f,rawValue:n,percent:0};return o&&(y.easing=o,y.easingFunc=isFunction(o)?o:easingFuncs[o]||createCubicEasingFunc(o)),s.push(y),y},a.prototype.prepare=function(r,n){var o=this.keyframes;this._needsSort&&o.sort(function(b,x){return b.time-x.time});for(var s=this.valType,l=o.length,u=o[l-1],c=this.discrete,f=isArrayValueType(s),d=isGradientValueType(s),v=0;v<l;v++){var g=o[v],y=g.value,_=u.value;g.percent=g.time/r,c||(f&&v!==l-1?fillArray(y,_,s):d&&fillColorStops(y.colorStops,_.colorStops))}if(!c&&s!==VALUE_TYPE_RADIAL_GRADIENT&&n&&this.needsAnimate()&&n.needsAnimate()&&s===n.valType&&!n._finished){this._additiveTrack=n;for(var S=o[0].value,v=0;v<l;v++)s===VALUE_TYPE_NUMBER?o[v].additiveValue=o[v].value-S:s===VALUE_TYPE_COLOR?o[v].additiveValue=add1DArray([],o[v].value,S,-1):isArrayValueType(s)&&(o[v].additiveValue=s===VALUE_TYPE_1D_ARRAY?add1DArray([],o[v].value,S,-1):add2DArray([],o[v].value,S,-1))}},a.prototype.step=function(r,n){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var o=this._additiveTrack!=null,s=o?"additiveValue":"value",l=this.valType,u=this.keyframes,c=u.length,f=this.propName,d=l===VALUE_TYPE_COLOR,v,g=this._lastFr,y=Math.min,_,S;if(c===1)_=S=u[0];else{if(n<0)v=0;else if(n<this._lastFrP){var b=y(g+1,c-1);for(v=b;v>=0&&!(u[v].percent<=n);v--);v=y(v,c-2)}else{for(v=g;v<c&&!(u[v].percent>n);v++);v=y(v-1,c-2)}S=u[v+1],_=u[v]}if(_&&S){this._lastFr=v,this._lastFrP=n;var x=S.percent-_.percent,T=x===0?1:y((n-_.percent)/x,1);S.easingFunc&&(T=S.easingFunc(T));var A=o?this._additiveValue:d?tmpRgba:r[f];if((isArrayValueType(l)||d)&&!A&&(A=this._additiveValue=[]),this.discrete)r[f]=T<1?_.rawValue:S.rawValue;else if(isArrayValueType(l))l===VALUE_TYPE_1D_ARRAY?interpolate1DArray(A,_[s],S[s],T):interpolate2DArray(A,_[s],S[s],T);else if(isGradientValueType(l)){var w=_[s],C=S[s],E=l===VALUE_TYPE_LINEAR_GRADIENT;r[f]={type:E?"linear":"radial",x:interpolateNumber$1(w.x,C.x,T),y:interpolateNumber$1(w.y,C.y,T),colorStops:map$1(w.colorStops,function(I,M){var R=C.colorStops[M];return{offset:interpolateNumber$1(I.offset,R.offset,T),color:rgba2String(interpolate1DArray([],I.color,R.color,T))}}),global:C.global},E?(r[f].x2=interpolateNumber$1(w.x2,C.x2,T),r[f].y2=interpolateNumber$1(w.y2,C.y2,T)):r[f].r=interpolateNumber$1(w.r,C.r,T)}else if(d)interpolate1DArray(A,_[s],S[s],T),o||(r[f]=rgba2String(A));else{var P=interpolateNumber$1(_[s],S[s],T);o?this._additiveValue=P:r[f]=P}o&&this._addToTarget(r)}}},a.prototype._addToTarget=function(r){var n=this.valType,o=this.propName,s=this._additiveValue;n===VALUE_TYPE_NUMBER?r[o]=r[o]+s:n===VALUE_TYPE_COLOR?(parse(r[o],tmpRgba),add1DArray(tmpRgba,tmpRgba,s,1),r[o]=rgba2String(tmpRgba)):n===VALUE_TYPE_1D_ARRAY?add1DArray(r[o],r[o],s,1):n===VALUE_TYPE_2D_ARRAY&&add2DArray(r[o],r[o],s,1)},a}(),Animator=function(){function a(r,n,o,s){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=r,this._loop=n,n&&s){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=s,this._allowDiscrete=o}return a.prototype.getMaxTime=function(){return this._maxTime},a.prototype.getDelay=function(){return this._delay},a.prototype.getLoop=function(){return this._loop},a.prototype.getTarget=function(){return this._target},a.prototype.changeTarget=function(r){this._target=r},a.prototype.when=function(r,n,o){return this.whenWithKeys(r,n,keys(n),o)},a.prototype.whenWithKeys=function(r,n,o,s){for(var l=this._tracks,u=0;u<o.length;u++){var c=o[u],f=l[c];if(!f){f=l[c]=new Track(c);var d=void 0,v=this._getAdditiveTrack(c);if(v){var g=v.keyframes,y=g[g.length-1];d=y&&y.value,v.valType===VALUE_TYPE_COLOR&&d&&(d=rgba2String(d))}else d=this._target[c];if(d==null)continue;r>0&&f.addKeyframe(0,cloneValue(d),s),this._trackKeys.push(c)}f.addKeyframe(r,cloneValue(n[c]),s)}return this._maxTime=Math.max(this._maxTime,r),this},a.prototype.pause=function(){this._clip.pause(),this._paused=!0},a.prototype.resume=function(){this._clip.resume(),this._paused=!1},a.prototype.isPaused=function(){return!!this._paused},a.prototype.duration=function(r){return this._maxTime=r,this._force=!0,this},a.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var r=this._doneCbs;if(r)for(var n=r.length,o=0;o<n;o++)r[o].call(this)},a.prototype._abortedCallback=function(){this._setTracksFinished();var r=this.animation,n=this._abortedCbs;if(r&&r.removeClip(this._clip),this._clip=null,n)for(var o=0;o<n.length;o++)n[o].call(this)},a.prototype._setTracksFinished=function(){for(var r=this._tracks,n=this._trackKeys,o=0;o<n.length;o++)r[n[o]].setFinished()},a.prototype._getAdditiveTrack=function(r){var n,o=this._additiveAnimators;if(o)for(var s=0;s<o.length;s++){var l=o[s].getTrack(r);l&&(n=l)}return n},a.prototype.start=function(r){if(!(this._started>0)){this._started=1;for(var n=this,o=[],s=this._maxTime||0,l=0;l<this._trackKeys.length;l++){var u=this._trackKeys[l],c=this._tracks[u],f=this._getAdditiveTrack(u),d=c.keyframes,v=d.length;if(c.prepare(s,f),c.needsAnimate())if(!this._allowDiscrete&&c.discrete){var g=d[v-1];g&&(n._target[c.propName]=g.rawValue),c.setFinished()}else o.push(c)}if(o.length||this._force){var y=new Clip({life:s,loop:this._loop,delay:this._delay||0,onframe:function(_){n._started=2;var S=n._additiveAnimators;if(S){for(var b=!1,x=0;x<S.length;x++)if(S[x]._clip){b=!0;break}b||(n._additiveAnimators=null)}for(var x=0;x<o.length;x++)o[x].step(n._target,_);var T=n._onframeCbs;if(T)for(var x=0;x<T.length;x++)T[x](n._target,_)},ondestroy:function(){n._doneCallback()}});this._clip=y,this.animation&&this.animation.addClip(y),r&&y.setEasing(r)}else this._doneCallback();return this}},a.prototype.stop=function(r){if(this._clip){var n=this._clip;r&&n.onframe(1),this._abortedCallback()}},a.prototype.delay=function(r){return this._delay=r,this},a.prototype.during=function(r){return r&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(r)),this},a.prototype.done=function(r){return r&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(r)),this},a.prototype.aborted=function(r){return r&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(r)),this},a.prototype.getClip=function(){return this._clip},a.prototype.getTrack=function(r){return this._tracks[r]},a.prototype.getTracks=function(){var r=this;return map$1(this._trackKeys,function(n){return r._tracks[n]})},a.prototype.stopTracks=function(r,n){if(!r.length||!this._clip)return!0;for(var o=this._tracks,s=this._trackKeys,l=0;l<r.length;l++){var u=o[r[l]];u&&!u.isFinished()&&(n?u.step(this._target,1):this._started===1&&u.step(this._target,0),u.setFinished())}for(var c=!0,l=0;l<s.length;l++)if(!o[s[l]].isFinished()){c=!1;break}return c&&this._abortedCallback(),c},a.prototype.saveTo=function(r,n,o){if(r){n=n||this._trackKeys;for(var s=0;s<n.length;s++){var l=n[s],u=this._tracks[l];if(!(!u||u.isFinished())){var c=u.keyframes,f=c[o?0:c.length-1];f&&(r[l]=cloneValue(f.rawValue))}}}},a.prototype.__changeFinalValue=function(r,n){n=n||keys(r);for(var o=0;o<n.length;o++){var s=n[o],l=this._tracks[s];if(l){var u=l.keyframes;if(u.length>1){var c=u.pop();l.addKeyframe(c.time,r[s]),l.prepare(this._maxTime,l.getAdditiveTrack())}}}},a}();function getTime(){return new Date().getTime()}var Animation=function(a){__extends(r,a);function r(n){var o=a.call(this)||this;return o._running=!1,o._time=0,o._pausedTime=0,o._pauseStart=0,o._paused=!1,n=n||{},o.stage=n.stage||{},o}return r.prototype.addClip=function(n){n.animation&&this.removeClip(n),this._head?(this._tail.next=n,n.prev=this._tail,n.next=null,this._tail=n):this._head=this._tail=n,n.animation=this},r.prototype.addAnimator=function(n){n.animation=this;var o=n.getClip();o&&this.addClip(o)},r.prototype.removeClip=function(n){if(n.animation){var o=n.prev,s=n.next;o?o.next=s:this._head=s,s?s.prev=o:this._tail=o,n.next=n.prev=n.animation=null}},r.prototype.removeAnimator=function(n){var o=n.getClip();o&&this.removeClip(o),n.animation=null},r.prototype.update=function(n){for(var o=getTime()-this._pausedTime,s=o-this._time,l=this._head;l;){var u=l.next,c=l.step(o,s);c&&(l.ondestroy(),this.removeClip(l)),l=u}this._time=o,n||(this.trigger("frame",s),this.stage.update&&this.stage.update())},r.prototype._startLoop=function(){var n=this;this._running=!0;function o(){n._running&&(requestAnimationFrame$1(o),!n._paused&&n.update())}requestAnimationFrame$1(o)},r.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},r.prototype.stop=function(){this._running=!1},r.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},r.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},r.prototype.clear=function(){for(var n=this._head;n;){var o=n.next;n.prev=n.next=n.animation=null,n=o}this._head=this._tail=null},r.prototype.isFinished=function(){return this._head==null},r.prototype.animate=function(n,o){o=o||{},this.start();var s=new Animator(n,o.loop);return this.addAnimator(s),s},r}(Eventful),TOUCH_CLICK_DELAY=300,globalEventSupported=env.domSupported,localNativeListenerNames=function(){var a=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],r=["touchstart","touchend","touchmove"],n={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},o=map$1(a,function(s){var l=s.replace("mouse","pointer");return n.hasOwnProperty(l)?l:s});return{mouse:a,touch:r,pointer:o}}(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(a){var r=a.pointerType;return r==="pen"||r==="touch"}function setTouchTimer(a){a.touching=!0,a.touchTimer!=null&&(clearTimeout(a.touchTimer),a.touchTimer=null),a.touchTimer=setTimeout(function(){a.touching=!1,a.touchTimer=null},700)}function markTouch(a){a&&(a.zrByTouch=!0)}function normalizeGlobalEvent(a,r){return normalizeEvent(a.dom,new FakeGlobalEvent(a,r),!0)}function isLocalEl(a,r){for(var n=r,o=!1;n&&n.nodeType!==9&&!(o=n.domBelongToZr||n!==r&&n===a.painterRoot);)n=n.parentNode;return o}var FakeGlobalEvent=function(){function a(r,n){this.stopPropagation=noop,this.stopImmediatePropagation=noop,this.preventDefault=noop,this.type=n.type,this.target=this.currentTarget=r.dom,this.pointerType=n.pointerType,this.clientX=n.clientX,this.clientY=n.clientY}return a}(),localDOMHandlers={mousedown:function(a){a=normalizeEvent(this.dom,a),this.__mayPointerCapture=[a.zrX,a.zrY],this.trigger("mousedown",a)},mousemove:function(a){a=normalizeEvent(this.dom,a);var r=this.__mayPointerCapture;r&&(a.zrX!==r[0]||a.zrY!==r[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",a)},mouseup:function(a){a=normalizeEvent(this.dom,a),this.__togglePointerCapture(!1),this.trigger("mouseup",a)},mouseout:function(a){a=normalizeEvent(this.dom,a);var r=a.toElement||a.relatedTarget;isLocalEl(this,r)||(this.__pointerCapturing&&(a.zrEventControl="no_globalout"),this.trigger("mouseout",a))},wheel:function(a){wheelEventSupported=!0,a=normalizeEvent(this.dom,a),this.trigger("mousewheel",a)},mousewheel:function(a){wheelEventSupported||(a=normalizeEvent(this.dom,a),this.trigger("mousewheel",a))},touchstart:function(a){a=normalizeEvent(this.dom,a),markTouch(a),this.__lastTouchMoment=new Date,this.handler.processGesture(a,"start"),localDOMHandlers.mousemove.call(this,a),localDOMHandlers.mousedown.call(this,a)},touchmove:function(a){a=normalizeEvent(this.dom,a),markTouch(a),this.handler.processGesture(a,"change"),localDOMHandlers.mousemove.call(this,a)},touchend:function(a){a=normalizeEvent(this.dom,a),markTouch(a),this.handler.processGesture(a,"end"),localDOMHandlers.mouseup.call(this,a),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,a)},pointerdown:function(a){localDOMHandlers.mousedown.call(this,a)},pointermove:function(a){isPointerFromTouch(a)||localDOMHandlers.mousemove.call(this,a)},pointerup:function(a){localDOMHandlers.mouseup.call(this,a)},pointerout:function(a){isPointerFromTouch(a)||localDOMHandlers.mouseout.call(this,a)}};each$f(["click","dblclick","contextmenu"],function(a){localDOMHandlers[a]=function(r){r=normalizeEvent(this.dom,r),this.trigger(a,r)}});var globalDOMHandlers={pointermove:function(a){isPointerFromTouch(a)||globalDOMHandlers.mousemove.call(this,a)},pointerup:function(a){globalDOMHandlers.mouseup.call(this,a)},mousemove:function(a){this.trigger("mousemove",a)},mouseup:function(a){var r=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",a),r&&(a.zrEventControl="only_globalout",this.trigger("mouseout",a))}};function mountLocalDOMEventListeners(a,r){var n=r.domHandlers;env.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(o){mountSingleDOMEventListener(r,o,function(s){n[o].call(a,s)})}):(env.touchEventsSupported&&each$f(localNativeListenerNames.touch,function(o){mountSingleDOMEventListener(r,o,function(s){n[o].call(a,s),setTouchTimer(r)})}),each$f(localNativeListenerNames.mouse,function(o){mountSingleDOMEventListener(r,o,function(s){s=getNativeEvent(s),r.touching||n[o].call(a,s)})}))}function mountGlobalDOMEventListeners(a,r){env.pointerEventsSupported?each$f(globalNativeListenerNames.pointer,n):env.touchEventsSupported||each$f(globalNativeListenerNames.mouse,n);function n(o){function s(l){l=getNativeEvent(l),isLocalEl(a,l.target)||(l=normalizeGlobalEvent(a,l),r.domHandlers[o].call(a,l))}mountSingleDOMEventListener(r,o,s,{capture:!0})}}function mountSingleDOMEventListener(a,r,n,o){a.mounted[r]=n,a.listenerOpts[r]=o,addEventListener(a.domTarget,r,n,o)}function unmountDOMEventListeners(a){var r=a.mounted;for(var n in r)r.hasOwnProperty(n)&&removeEventListener(a.domTarget,n,r[n],a.listenerOpts[n]);a.mounted={}}var DOMHandlerScope=function(){function a(r,n){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=r,this.domHandlers=n}return a}(),HandlerDomProxy=function(a){__extends(r,a);function r(n,o){var s=a.call(this)||this;return s.__pointerCapturing=!1,s.dom=n,s.painterRoot=o,s._localHandlerScope=new DOMHandlerScope(n,localDOMHandlers),globalEventSupported&&(s._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(s,s._localHandlerScope),s}return r.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},r.prototype.setCursor=function(n){this.dom.style&&(this.dom.style.cursor=n||"default")},r.prototype.__togglePointerCapture=function(n){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+n){this.__pointerCapturing=n;var o=this._globalHandlerScope;n?mountGlobalDOMEventListeners(this,o):unmountDOMEventListeners(o)}},r}(Eventful),dpr=1;env.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$2=5e-5;function isNotAroundZero(a){return a>EPSILON$2||a<-EPSILON$2}var scaleTmp=[],tmpTransform=[],originTransform=create$1(),abs=Math.abs,Transformable=function(){function a(){}return a.prototype.getLocalTransform=function(r){return a.getLocalTransform(this,r)},a.prototype.setPosition=function(r){this.x=r[0],this.y=r[1]},a.prototype.setScale=function(r){this.scaleX=r[0],this.scaleY=r[1]},a.prototype.setSkew=function(r){this.skewX=r[0],this.skewY=r[1]},a.prototype.setOrigin=function(r){this.originX=r[0],this.originY=r[1]},a.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},a.prototype.updateTransform=function(){var r=this.parent&&this.parent.transform,n=this.needLocalTransform(),o=this.transform;if(!(n||r)){o&&(mIdentity(o),this.invTransform=null);return}o=o||create$1(),n?this.getLocalTransform(o):mIdentity(o),r&&(n?mul(o,r,o):copy(o,r)),this.transform=o,this._resolveGlobalScaleRatio(o)},a.prototype._resolveGlobalScaleRatio=function(r){var n=this.globalScaleRatio;if(n!=null&&n!==1){this.getGlobalScale(scaleTmp);var o=scaleTmp[0]<0?-1:1,s=scaleTmp[1]<0?-1:1,l=((scaleTmp[0]-o)*n+o)/scaleTmp[0]||0,u=((scaleTmp[1]-s)*n+s)/scaleTmp[1]||0;r[0]*=l,r[1]*=l,r[2]*=u,r[3]*=u}this.invTransform=this.invTransform||create$1(),invert(this.invTransform,r)},a.prototype.getComputedTransform=function(){for(var r=this,n=[];r;)n.push(r),r=r.parent;for(;r=n.pop();)r.updateTransform();return this.transform},a.prototype.setLocalTransform=function(r){if(r){var n=r[0]*r[0]+r[1]*r[1],o=r[2]*r[2]+r[3]*r[3],s=Math.atan2(r[1],r[0]),l=Math.PI/2+s-Math.atan2(r[3],r[2]);o=Math.sqrt(o)*Math.cos(l),n=Math.sqrt(n),this.skewX=l,this.skewY=0,this.rotation=-s,this.x=+r[4],this.y=+r[5],this.scaleX=n,this.scaleY=o,this.originX=0,this.originY=0}},a.prototype.decomposeTransform=function(){if(this.transform){var r=this.parent,n=this.transform;r&&r.transform&&(r.invTransform=r.invTransform||create$1(),mul(tmpTransform,r.invTransform,n),n=tmpTransform);var o=this.originX,s=this.originY;(o||s)&&(originTransform[4]=o,originTransform[5]=s,mul(tmpTransform,n,originTransform),tmpTransform[4]-=o,tmpTransform[5]-=s,n=tmpTransform),this.setLocalTransform(n)}},a.prototype.getGlobalScale=function(r){var n=this.transform;return r=r||[],n?(r[0]=Math.sqrt(n[0]*n[0]+n[1]*n[1]),r[1]=Math.sqrt(n[2]*n[2]+n[3]*n[3]),n[0]<0&&(r[0]=-r[0]),n[3]<0&&(r[1]=-r[1]),r):(r[0]=1,r[1]=1,r)},a.prototype.transformCoordToLocal=function(r,n){var o=[r,n],s=this.invTransform;return s&&applyTransform$1(o,o,s),o},a.prototype.transformCoordToGlobal=function(r,n){var o=[r,n],s=this.transform;return s&&applyTransform$1(o,o,s),o},a.prototype.getLineScale=function(){var r=this.transform;return r&&abs(r[0]-1)>1e-10&&abs(r[3]-1)>1e-10?Math.sqrt(abs(r[0]*r[3]-r[2]*r[1])):1},a.prototype.copyTransform=function(r){copyTransform(this,r)},a.getLocalTransform=function(r,n){n=n||[];var o=r.originX||0,s=r.originY||0,l=r.scaleX,u=r.scaleY,c=r.anchorX,f=r.anchorY,d=r.rotation||0,v=r.x,g=r.y,y=r.skewX?Math.tan(r.skewX):0,_=r.skewY?Math.tan(-r.skewY):0;if(o||s||c||f){var S=o+c,b=s+f;n[4]=-S*l-y*b*u,n[5]=-b*u-_*S*l}else n[4]=n[5]=0;return n[0]=l,n[3]=u,n[1]=_*l,n[2]=y*u,d&&rotate(n,n,d),n[4]+=o+v,n[5]+=s+g,n},a.initDefaultProps=function(){var r=a.prototype;r.scaleX=r.scaleY=r.globalScaleRatio=1,r.x=r.y=r.originX=r.originY=r.skewX=r.skewY=r.rotation=r.anchorX=r.anchorY=0}(),a}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(a,r){for(var n=0;n<TRANSFORMABLE_PROPS.length;n++){var o=TRANSFORMABLE_PROPS[n];a[o]=r[o]}}function ensureFontMeasureInfo(a){_fontMeasureInfoCache||(_fontMeasureInfoCache=new LRU(100)),a=a||DEFAULT_FONT;var r=_fontMeasureInfoCache.get(a);return r||(r={font:a,strWidthCache:new LRU(500),asciiWidthMap:null,asciiWidthMapTried:!1,stWideCharWidth:platformApi.measureText("",a).width,asciiCharWidth:platformApi.measureText("a",a).width},_fontMeasureInfoCache.put(a,r)),r}var _fontMeasureInfoCache;function tryCreateASCIIWidthMap(a){if(!(_getASCIIWidthMapLongCount>=GET_ASCII_WIDTH_LONG_COUNT_MAX)){a=a||DEFAULT_FONT;for(var r=[],n=+new Date,o=0;o<=127;o++)r[o]=platformApi.measureText(String.fromCharCode(o),a).width;var s=+new Date-n;return s>16?_getASCIIWidthMapLongCount=GET_ASCII_WIDTH_LONG_COUNT_MAX:s>2&&_getASCIIWidthMapLongCount++,r}}var _getASCIIWidthMapLongCount=0,GET_ASCII_WIDTH_LONG_COUNT_MAX=5;function measureCharWidth(a,r){return a.asciiWidthMapTried||(a.asciiWidthMap=tryCreateASCIIWidthMap(a.font),a.asciiWidthMapTried=!0),0<=r&&r<=127?a.asciiWidthMap!=null?a.asciiWidthMap[r]:a.asciiCharWidth:a.stWideCharWidth}function measureWidth(a,r){var n=a.strWidthCache,o=n.get(r);return o==null&&(o=platformApi.measureText(r,a.font).width,n.put(r,o)),o}function innerGetBoundingRect(a,r,n,o){var s=measureWidth(ensureFontMeasureInfo(r),a),l=getLineHeight(r),u=adjustTextX(0,s,n),c=adjustTextY(0,l,o),f=new BoundingRect(u,c,s,l);return f}function getBoundingRect(a,r,n,o){var s=((a||"")+"").split(`
`),l=s.length;if(l===1)return innerGetBoundingRect(s[0],r,n,o);for(var u=new BoundingRect(0,0,0,0),c=0;c<s.length;c++){var f=innerGetBoundingRect(s[c],r,n,o);c===0?u.copy(f):u.union(f)}return u}function adjustTextX(a,r,n,o){return n==="right"?o?a+=r:a-=r:n==="center"&&(o?a+=r/2:a-=r/2),a}function adjustTextY(a,r,n,o){return n==="middle"?o?a+=r/2:a-=r/2:n==="bottom"&&(o?a+=r:a-=r),a}function getLineHeight(a){return ensureFontMeasureInfo(a).stWideCharWidth}function parsePercent$1(a,r){return typeof a=="string"?a.lastIndexOf("%")>=0?parseFloat(a)/100*r:parseFloat(a):a}function calculateTextPosition(a,r,n){var o=r.position||"inside",s=r.distance!=null?r.distance:5,l=n.height,u=n.width,c=l/2,f=n.x,d=n.y,v="left",g="top";if(o instanceof Array)f+=parsePercent$1(o[0],n.width),d+=parsePercent$1(o[1],n.height),v=null,g=null;else switch(o){case"left":f-=s,d+=c,v="right",g="middle";break;case"right":f+=s+u,d+=c,g="middle";break;case"top":f+=u/2,d-=s,v="center",g="bottom";break;case"bottom":f+=u/2,d+=l+s,v="center";break;case"inside":f+=u/2,d+=c,v="center",g="middle";break;case"insideLeft":f+=s,d+=c,g="middle";break;case"insideRight":f+=u-s,d+=c,v="right",g="middle";break;case"insideTop":f+=u/2,d+=s,v="center";break;case"insideBottom":f+=u/2,d+=l-s,v="center",g="bottom";break;case"insideTopLeft":f+=s,d+=s;break;case"insideTopRight":f+=u-s,d+=s,v="right";break;case"insideBottomLeft":f+=s,d+=l-s,g="bottom";break;case"insideBottomRight":f+=u-s,d+=l-s,v="right",g="bottom";break}return a=a||{},a.x=f,a.y=d,a.align=v,a.verticalAlign=g,a}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(a,r){return a[r]=!0,a},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect(0,0,0,0),tmpInnerTextTrans=[],Element$1=function(){function a(r){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(r)}return a.prototype._init=function(r){this.attr(r)},a.prototype.drift=function(r,n,o){switch(this.draggable){case"horizontal":n=0;break;case"vertical":r=0;break}var s=this.transform;s||(s=this.transform=[1,0,0,1,0,0]),s[4]+=r,s[5]+=n,this.decomposeTransform(),this.markRedraw()},a.prototype.beforeUpdate=function(){},a.prototype.afterUpdate=function(){},a.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},a.prototype.updateInnerText=function(r){var n=this._textContent;if(n&&(!n.ignore||r)){this.textConfig||(this.textConfig={});var o=this.textConfig,s=o.local,l=n.innerTransformable,u=void 0,c=void 0,f=!1;l.parent=s?this:null;var d=!1;l.copyTransform(n);var v=o.position!=null,g=o.autoOverflowArea,y=void 0;if((g||v)&&(y=tmpBoundingRect,o.layoutRect?y.copy(o.layoutRect):y.copy(this.getBoundingRect()),s||y.applyTransform(this.transform)),v){this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,o,y):calculateTextPosition(tmpTextPosCalcRes,o,y),l.x=tmpTextPosCalcRes.x,l.y=tmpTextPosCalcRes.y,u=tmpTextPosCalcRes.align,c=tmpTextPosCalcRes.verticalAlign;var _=o.origin;if(_&&o.rotation!=null){var S=void 0,b=void 0;_==="center"?(S=y.width*.5,b=y.height*.5):(S=parsePercent$1(_[0],y.width),b=parsePercent$1(_[1],y.height)),d=!0,l.originX=-l.x+S+(s?0:y.x),l.originY=-l.y+b+(s?0:y.y)}}o.rotation!=null&&(l.rotation=o.rotation);var x=o.offset;x&&(l.x+=x[0],l.y+=x[1],d||(l.originX=-x[0],l.originY=-x[1]));var T=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={});if(g){var A=T.overflowRect=T.overflowRect||new BoundingRect(0,0,0,0);l.getLocalTransform(tmpInnerTextTrans),invert(tmpInnerTextTrans,tmpInnerTextTrans),BoundingRect.copy(A,y),A.applyTransform(tmpInnerTextTrans)}else T.overflowRect=null;var w=o.inside==null?typeof o.position=="string"&&o.position.indexOf("inside")>=0:o.inside,C=void 0,E=void 0,P=void 0;w&&this.canBeInsideText()?(C=o.insideFill,E=o.insideStroke,(C==null||C==="auto")&&(C=this.getInsideTextFill()),(E==null||E==="auto")&&(E=this.getInsideTextStroke(C),P=!0)):(C=o.outsideFill,E=o.outsideStroke,(C==null||C==="auto")&&(C=this.getOutsideFill()),(E==null||E==="auto")&&(E=this.getOutsideStroke(C),P=!0)),C=C||"#000",(C!==T.fill||E!==T.stroke||P!==T.autoStroke||u!==T.align||c!==T.verticalAlign)&&(f=!0,T.fill=C,T.stroke=E,T.autoStroke=P,T.align=u,T.verticalAlign=c,n.setDefaultTextStyle(T)),n.__dirty|=REDRAW_BIT,f&&n.dirtyStyle(!0)}},a.prototype.canBeInsideText=function(){return!0},a.prototype.getInsideTextFill=function(){return"#fff"},a.prototype.getInsideTextStroke=function(r){return"#000"},a.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},a.prototype.getOutsideStroke=function(r){var n=this.__zr&&this.__zr.getBackgroundColor(),o=typeof n=="string"&&parse(n);o||(o=[255,255,255,1]);for(var s=o[3],l=this.__zr.isDarkMode(),u=0;u<3;u++)o[u]=o[u]*s+(l?0:255)*(1-s);return o[3]=1,stringify(o,"rgba")},a.prototype.traverse=function(r,n){},a.prototype.attrKV=function(r,n){r==="textConfig"?this.setTextConfig(n):r==="textContent"?this.setTextContent(n):r==="clipPath"?this.setClipPath(n):r==="extra"?(this.extra=this.extra||{},extend(this.extra,n)):this[r]=n},a.prototype.hide=function(){this.ignore=!0,this.markRedraw()},a.prototype.show=function(){this.ignore=!1,this.markRedraw()},a.prototype.attr=function(r,n){if(typeof r=="string")this.attrKV(r,n);else if(isObject$3(r))for(var o=r,s=keys(o),l=0;l<s.length;l++){var u=s[l];this.attrKV(u,r[u])}return this.markRedraw(),this},a.prototype.saveCurrentToNormalState=function(r){this._innerSaveToNormal(r);for(var n=this._normalState,o=0;o<this.animators.length;o++){var s=this.animators[o],l=s.__fromStateTransition;if(!(s.getLoop()||l&&l!==PRESERVED_NORMAL_STATE)){var u=s.targetName,c=u?n[u]:n;s.saveTo(c)}}},a.prototype._innerSaveToNormal=function(r){var n=this._normalState;n||(n=this._normalState={}),r.textConfig&&!n.textConfig&&(n.textConfig=this.textConfig),this._savePrimaryToNormal(r,n,PRIMARY_STATES_KEYS$1)},a.prototype._savePrimaryToNormal=function(r,n,o){for(var s=0;s<o.length;s++){var l=o[s];r[l]!=null&&!(l in n)&&(n[l]=this[l])}},a.prototype.hasState=function(){return this.currentStates.length>0},a.prototype.getState=function(r){return this.states[r]},a.prototype.ensureState=function(r){var n=this.states;return n[r]||(n[r]={}),n[r]},a.prototype.clearStates=function(r){this.useState(PRESERVED_NORMAL_STATE,!1,r)},a.prototype.useState=function(r,n,o,s){var l=r===PRESERVED_NORMAL_STATE,u=this.hasState();if(!(!u&&l)){var c=this.currentStates,f=this.stateTransition;if(!(indexOf(c,r)>=0&&(n||c.length===1))){var d;if(this.stateProxy&&!l&&(d=this.stateProxy(r)),d||(d=this.states&&this.states[r]),!d&&!l){logError("State "+r+" not exists.");return}l||this.saveCurrentToNormalState(d);var v=!!(d&&d.hoverLayer||s);v&&this._toggleHoverLayerFlag(!0),this._applyStateObj(r,d,this._normalState,n,!o&&!this.__inHover&&f&&f.duration>0,f);var g=this._textContent,y=this._textGuide;return g&&g.useState(r,n,o,v),y&&y.useState(r,n,o,v),l?(this.currentStates=[],this._normalState={}):n?this.currentStates.push(r):this.currentStates=[r],this._updateAnimationTargets(),this.markRedraw(),!v&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT),d}}},a.prototype.useStates=function(r,n,o){if(!r.length)this.clearStates();else{var s=[],l=this.currentStates,u=r.length,c=u===l.length;if(c){for(var f=0;f<u;f++)if(r[f]!==l[f]){c=!1;break}}if(c)return;for(var f=0;f<u;f++){var d=r[f],v=void 0;this.stateProxy&&(v=this.stateProxy(d,r)),v||(v=this.states[d]),v&&s.push(v)}var g=s[u-1],y=!!(g&&g.hoverLayer||o);y&&this._toggleHoverLayerFlag(!0);var _=this._mergeStates(s),S=this.stateTransition;this.saveCurrentToNormalState(_),this._applyStateObj(r.join(","),_,this._normalState,!1,!n&&!this.__inHover&&S&&S.duration>0,S);var b=this._textContent,x=this._textGuide;b&&b.useStates(r,n,y),x&&x.useStates(r,n,y),this._updateAnimationTargets(),this.currentStates=r.slice(),this.markRedraw(),!y&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT)}},a.prototype.isSilent=function(){for(var r=this;r;){if(r.silent)return!0;var n=r.__hostTarget;r=n?r.ignoreHostSilent?null:n:r.parent}return!1},a.prototype._updateAnimationTargets=function(){for(var r=0;r<this.animators.length;r++){var n=this.animators[r];n.targetName&&n.changeTarget(this[n.targetName])}},a.prototype.removeState=function(r){var n=indexOf(this.currentStates,r);if(n>=0){var o=this.currentStates.slice();o.splice(n,1),this.useStates(o)}},a.prototype.replaceState=function(r,n,o){var s=this.currentStates.slice(),l=indexOf(s,r),u=indexOf(s,n)>=0;l>=0?u?s.splice(l,1):s[l]=n:o&&!u&&s.push(n),this.useStates(s)},a.prototype.toggleState=function(r,n){n?this.useState(r,!0):this.removeState(r)},a.prototype._mergeStates=function(r){for(var n={},o,s=0;s<r.length;s++){var l=r[s];extend(n,l),l.textConfig&&(o=o||{},extend(o,l.textConfig))}return o&&(n.textConfig=o),n},a.prototype._applyStateObj=function(r,n,o,s,l,u){var c=!(n&&s);n&&n.textConfig?(this.textConfig=extend({},s?this.textConfig:o.textConfig),extend(this.textConfig,n.textConfig)):c&&o.textConfig&&(this.textConfig=o.textConfig);for(var f={},d=!1,v=0;v<PRIMARY_STATES_KEYS$1.length;v++){var g=PRIMARY_STATES_KEYS$1[v],y=l&&DEFAULT_ANIMATABLE_MAP[g];n&&n[g]!=null?y?(d=!0,f[g]=n[g]):this[g]=n[g]:c&&o[g]!=null&&(y?(d=!0,f[g]=o[g]):this[g]=o[g])}if(!l)for(var v=0;v<this.animators.length;v++){var _=this.animators[v],S=_.targetName;_.getLoop()||_.__changeFinalValue(S?(n||o)[S]:n||o)}d&&this._transitionState(r,f,u)},a.prototype._attachComponent=function(r){if(!(r.__zr&&!r.__hostTarget)&&r!==this){var n=this.__zr;n&&r.addSelfToZr(n),r.__zr=n,r.__hostTarget=this}},a.prototype._detachComponent=function(r){r.__zr&&r.removeSelfFromZr(r.__zr),r.__zr=null,r.__hostTarget=null},a.prototype.getClipPath=function(){return this._clipPath},a.prototype.setClipPath=function(r){this._clipPath&&this._clipPath!==r&&this.removeClipPath(),this._attachComponent(r),this._clipPath=r,this.markRedraw()},a.prototype.removeClipPath=function(){var r=this._clipPath;r&&(this._detachComponent(r),this._clipPath=null,this.markRedraw())},a.prototype.getTextContent=function(){return this._textContent},a.prototype.setTextContent=function(r){var n=this._textContent;n!==r&&(n&&n!==r&&this.removeTextContent(),r.innerTransformable=new Transformable,this._attachComponent(r),this._textContent=r,this.markRedraw())},a.prototype.setTextConfig=function(r){this.textConfig||(this.textConfig={}),extend(this.textConfig,r),this.markRedraw()},a.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},a.prototype.removeTextContent=function(){var r=this._textContent;r&&(r.innerTransformable=null,this._detachComponent(r),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},a.prototype.getTextGuideLine=function(){return this._textGuide},a.prototype.setTextGuideLine=function(r){this._textGuide&&this._textGuide!==r&&this.removeTextGuideLine(),this._attachComponent(r),this._textGuide=r,this.markRedraw()},a.prototype.removeTextGuideLine=function(){var r=this._textGuide;r&&(this._detachComponent(r),this._textGuide=null,this.markRedraw())},a.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var r=this.__zr;r&&(this.__inHover?r.refreshHover():r.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},a.prototype.dirty=function(){this.markRedraw()},a.prototype._toggleHoverLayerFlag=function(r){this.__inHover=r;var n=this._textContent,o=this._textGuide;n&&(n.__inHover=r),o&&(o.__inHover=r)},a.prototype.addSelfToZr=function(r){if(this.__zr!==r){this.__zr=r;var n=this.animators;if(n)for(var o=0;o<n.length;o++)r.animation.addAnimator(n[o]);this._clipPath&&this._clipPath.addSelfToZr(r),this._textContent&&this._textContent.addSelfToZr(r),this._textGuide&&this._textGuide.addSelfToZr(r)}},a.prototype.removeSelfFromZr=function(r){if(this.__zr){this.__zr=null;var n=this.animators;if(n)for(var o=0;o<n.length;o++)r.animation.removeAnimator(n[o]);this._clipPath&&this._clipPath.removeSelfFromZr(r),this._textContent&&this._textContent.removeSelfFromZr(r),this._textGuide&&this._textGuide.removeSelfFromZr(r)}},a.prototype.animate=function(r,n,o){var s=r?this[r]:this,l=new Animator(s,n,o);return r&&(l.targetName=r),this.addAnimator(l,r),l},a.prototype.addAnimator=function(r,n){var o=this.__zr,s=this;r.during(function(){s.updateDuringAnimation(n)}).done(function(){var l=s.animators,u=indexOf(l,r);u>=0&&l.splice(u,1)}),this.animators.push(r),o&&o.animation.addAnimator(r),o&&o.wakeUp()},a.prototype.updateDuringAnimation=function(r){this.markRedraw()},a.prototype.stopAnimation=function(r,n){for(var o=this.animators,s=o.length,l=[],u=0;u<s;u++){var c=o[u];!r||r===c.scope?c.stop(n):l.push(c)}return this.animators=l,this},a.prototype.animateTo=function(r,n,o){animateTo(this,r,n,o)},a.prototype.animateFrom=function(r,n,o){animateTo(this,r,n,o,!0)},a.prototype._transitionState=function(r,n,o,s){for(var l=animateTo(this,n,o,s),u=0;u<l.length;u++)l[u].__fromStateTransition=r},a.prototype.getBoundingRect=function(){return null},a.prototype.getPaintRect=function(){return null},a.initDefaultProps=function(){var r=a.prototype;r.type="element",r.name="",r.ignore=r.silent=r.ignoreHostSilent=r.isGroup=r.draggable=r.dragging=r.ignoreClip=r.__inHover=!1,r.__dirty=REDRAW_BIT;function n(o,s,l,u){Object.defineProperty(r,o,{get:function(){if(!this[s]){var f=this[s]=[];c(this,f)}return this[s]},set:function(f){this[l]=f[0],this[u]=f[1],this[s]=f,c(this,f)}});function c(f,d){Object.defineProperty(d,0,{get:function(){return f[l]},set:function(v){f[l]=v}}),Object.defineProperty(d,1,{get:function(){return f[u]},set:function(v){f[u]=v}})}}Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),a}();mixin(Element$1,Eventful);mixin(Element$1,Transformable);function animateTo(a,r,n,o,s){n=n||{};var l=[];animateToShallow(a,"",a,r,n,o,l,s);var u=l.length,c=!1,f=n.done,d=n.aborted,v=function(){c=!0,u--,u<=0&&(c?f&&f():d&&d())},g=function(){u--,u<=0&&(c?f&&f():d&&d())};u||f&&f(),l.length>0&&n.during&&l[0].during(function(S,b){n.during(b)});for(var y=0;y<l.length;y++){var _=l[y];v&&_.done(v),g&&_.aborted(g),n.force&&_.duration(n.duration),_.start(n.easing)}return l}function copyArrShallow(a,r,n){for(var o=0;o<n;o++)a[o]=r[o]}function is2DArray(a){return isArrayLike(a[0])}function copyValue(a,r,n){if(isArrayLike(r[n]))if(isArrayLike(a[n])||(a[n]=[]),isTypedArray(r[n])){var o=r[n].length;a[n].length!==o&&(a[n]=new r[n].constructor(o),copyArrShallow(a[n],r[n],o))}else{var s=r[n],l=a[n],u=s.length;if(is2DArray(s))for(var c=s[0].length,f=0;f<u;f++)l[f]?copyArrShallow(l[f],s[f],c):l[f]=Array.prototype.slice.call(s[f]);else copyArrShallow(l,s,u);l.length=s.length}else a[n]=r[n]}function isValueSame(a,r){return a===r||isArrayLike(a)&&isArrayLike(r)&&is1DArraySame(a,r)}function is1DArraySame(a,r){var n=a.length;if(n!==r.length)return!1;for(var o=0;o<n;o++)if(a[o]!==r[o])return!1;return!0}function animateToShallow(a,r,n,o,s,l,u,c){for(var f=keys(o),d=s.duration,v=s.delay,g=s.additive,y=s.setToFinal,_=!isObject$3(l),S=a.animators,b=[],x=0;x<f.length;x++){var T=f[x],A=o[T];if(A!=null&&n[T]!=null&&(_||l[T]))if(isObject$3(A)&&!isArrayLike(A)&&!isGradientObject(A)){if(r){c||(n[T]=A,a.updateDuringAnimation(r));continue}animateToShallow(a,T,n[T],A,s,l&&l[T],u,c)}else b.push(T);else c||(n[T]=A,a.updateDuringAnimation(r),b.push(T))}var w=b.length;if(!g&&w)for(var C=0;C<S.length;C++){var E=S[C];if(E.targetName===r){var P=E.stopTracks(b);if(P){var I=indexOf(S,E);S.splice(I,1)}}}if(s.force||(b=filter(b,function($){return!isValueSame(o[$],n[$])}),w=b.length),w>0||s.force&&!u.length){var M=void 0,R=void 0,O=void 0;if(c){R={},y&&(M={});for(var C=0;C<w;C++){var T=b[C];R[T]=n[T],y?M[T]=o[T]:n[T]=o[T]}}else if(y){O={};for(var C=0;C<w;C++){var T=b[C];O[T]=cloneValue(n[T]),copyValue(n,o,T)}}var E=new Animator(n,!1,!1,g?filter(S,function(B){return B.targetName===r}):null);E.targetName=r,s.scope&&(E.scope=s.scope),y&&M&&E.whenWithKeys(0,M,b),O&&E.whenWithKeys(0,O,b),E.whenWithKeys(d??500,c?R:o,b).delay(v||0),a.addAnimator(E,r),u.push(E)}}var Group$3=function(a){__extends(r,a);function r(n){var o=a.call(this)||this;return o.isGroup=!0,o._children=[],o.attr(n),o}return r.prototype.childrenRef=function(){return this._children},r.prototype.children=function(){return this._children.slice()},r.prototype.childAt=function(n){return this._children[n]},r.prototype.childOfName=function(n){for(var o=this._children,s=0;s<o.length;s++)if(o[s].name===n)return o[s]},r.prototype.childCount=function(){return this._children.length},r.prototype.add=function(n){return n&&n!==this&&n.parent!==this&&(this._children.push(n),this._doAdd(n)),this},r.prototype.addBefore=function(n,o){if(n&&n!==this&&n.parent!==this&&o&&o.parent===this){var s=this._children,l=s.indexOf(o);l>=0&&(s.splice(l,0,n),this._doAdd(n))}return this},r.prototype.replace=function(n,o){var s=indexOf(this._children,n);return s>=0&&this.replaceAt(o,s),this},r.prototype.replaceAt=function(n,o){var s=this._children,l=s[o];if(n&&n!==this&&n.parent!==this&&n!==l){s[o]=n,l.parent=null;var u=this.__zr;u&&l.removeSelfFromZr(u),this._doAdd(n)}return this},r.prototype._doAdd=function(n){n.parent&&n.parent.remove(n),n.parent=this;var o=this.__zr;o&&o!==n.__zr&&n.addSelfToZr(o),o&&o.refresh()},r.prototype.remove=function(n){var o=this.__zr,s=this._children,l=indexOf(s,n);return l<0?this:(s.splice(l,1),n.parent=null,o&&n.removeSelfFromZr(o),o&&o.refresh(),this)},r.prototype.removeAll=function(){for(var n=this._children,o=this.__zr,s=0;s<n.length;s++){var l=n[s];o&&l.removeSelfFromZr(o),l.parent=null}return n.length=0,this},r.prototype.eachChild=function(n,o){for(var s=this._children,l=0;l<s.length;l++){var u=s[l];n.call(o,u,l)}return this},r.prototype.traverse=function(n,o){for(var s=0;s<this._children.length;s++){var l=this._children[s],u=n.call(o,l);l.isGroup&&!u&&l.traverse(n,o)}return this},r.prototype.addSelfToZr=function(n){a.prototype.addSelfToZr.call(this,n);for(var o=0;o<this._children.length;o++){var s=this._children[o];s.addSelfToZr(n)}},r.prototype.removeSelfFromZr=function(n){a.prototype.removeSelfFromZr.call(this,n);for(var o=0;o<this._children.length;o++){var s=this._children[o];s.removeSelfFromZr(n)}},r.prototype.getBoundingRect=function(n){for(var o=new BoundingRect(0,0,0,0),s=n||this._children,l=[],u=null,c=0;c<s.length;c++){var f=s[c];if(!(f.ignore||f.invisible)){var d=f.getBoundingRect(),v=f.getLocalTransform(l);v?(BoundingRect.applyTransform(o,d,v),u=u||o.clone(),u.union(o)):(u=u||d.clone(),u.union(d))}}return u||o},r}(Element$1);Group$3.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(a){delete instances$1[a]}function isDarkMode(a){if(!a)return!1;if(typeof a=="string")return lum(a,1)<DARK_MODE_THRESHOLD;if(a.colorStops){for(var r=a.colorStops,n=0,o=r.length,s=0;s<o;s++)n+=lum(r[s].color,1);return n/=o,n<DARK_MODE_THRESHOLD}return!1}var ZRender=function(){function a(r,n,o){var s=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,o=o||{},this.dom=n,this.id=r;var l=new Storage,u=o.renderer||"canvas";painterCtors[u]||(u=keys(painterCtors)[0]),o.useDirtyRect=o.useDirtyRect==null?!1:o.useDirtyRect;var c=new painterCtors[u](n,l,o,r),f=o.ssr||c.ssrOnly;this.storage=l,this.painter=c;var d=!env.node&&!env.worker&&!f?new HandlerDomProxy(c.getViewportRoot(),c.root):null,v=o.useCoarsePointer,g=v==null||v==="auto"?env.touchEventsSupported:!!v,y=44,_;g&&(_=retrieve2(o.pointerSize,y)),this.handler=new Handler(l,c,d,c.root,_),this.animation=new Animation({stage:{update:f?null:function(){return s._flush(!0)}}}),f||this.animation.start()}return a.prototype.add=function(r){this._disposed||!r||(this.storage.addRoot(r),r.addSelfToZr(this),this.refresh())},a.prototype.remove=function(r){this._disposed||!r||(this.storage.delRoot(r),r.removeSelfFromZr(this),this.refresh())},a.prototype.configLayer=function(r,n){this._disposed||(this.painter.configLayer&&this.painter.configLayer(r,n),this.refresh())},a.prototype.setBackgroundColor=function(r){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(r),this.refresh(),this._backgroundColor=r,this._darkMode=isDarkMode(r))},a.prototype.getBackgroundColor=function(){return this._backgroundColor},a.prototype.setDarkMode=function(r){this._darkMode=r},a.prototype.isDarkMode=function(){return this._darkMode},a.prototype.refreshImmediately=function(r){this._disposed||(r||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},a.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},a.prototype.flush=function(){this._disposed||this._flush(!1)},a.prototype._flush=function(r){var n,o=getTime();this._needsRefresh&&(n=!0,this.refreshImmediately(r)),this._needsRefreshHover&&(n=!0,this.refreshHoverImmediately());var s=getTime();n?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:s-o})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},a.prototype.setSleepAfterStill=function(r){this._sleepAfterStill=r},a.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},a.prototype.refreshHover=function(){this._needsRefreshHover=!0},a.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},a.prototype.resize=function(r){this._disposed||(r=r||{},this.painter.resize(r.width,r.height),this.handler.resize())},a.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},a.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},a.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},a.prototype.setCursorStyle=function(r){this._disposed||this.handler.setCursorStyle(r)},a.prototype.findHover=function(r,n){if(!this._disposed)return this.handler.findHover(r,n)},a.prototype.on=function(r,n,o){return this._disposed||this.handler.on(r,n,o),this},a.prototype.off=function(r,n){this._disposed||this.handler.off(r,n)},a.prototype.trigger=function(r,n){this._disposed||this.handler.trigger(r,n)},a.prototype.clear=function(){if(!this._disposed){for(var r=this.storage.getRoots(),n=0;n<r.length;n++)r[n]instanceof Group$3&&r[n].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},a.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,delInstance(this.id))},a}();function init$2(a,r){var n=new ZRender(guid(),a,r);return instances$1[n.id]=n,n}function registerPainter(a,r){painterCtors[a]=r}var ssrDataGetter;function getElementSSRData(a){if(typeof ssrDataGetter=="function")return ssrDataGetter(a)}function registerSSRDataGetter(a){ssrDataGetter=a}var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(a){return a.replace(/^\s+|\s+$/g,"")}var mathMin$a=Math.min,mathMax$a=Math.max,mathAbs$4=Math.abs;function linearMap$2(a,r,n,o){var s=r[0],l=r[1],u=n[0],c=n[1],f=l-s,d=c-u;if(f===0)return d===0?u:(u+c)/2;if(o)if(f>0){if(a<=s)return u;if(a>=l)return c}else{if(a>=s)return u;if(a<=l)return c}else{if(a===s)return u;if(a===l)return c}return(a-s)/f*d+u}var parsePercent=parsePositionOption;function parsePositionOption(a,r,n){switch(a){case"center":case"middle":a="50%";break;case"left":case"top":a="0%";break;case"right":case"bottom":a="100%";break}return parsePositionSizeOption(a,r,n)}function parsePositionSizeOption(a,r,n){return isString(a)?_trim(a).match(/%$/)?parseFloat(a)/100*r+(n||0):parseFloat(a):a==null?NaN:+a}function round$4(a,r,n){return r==null&&(r=10),r=Math.min(Math.max(0,r),ROUND_SUPPORTED_PRECISION_MAX),a=(+a).toFixed(r),n?a:+a}function asc$2(a){return a.sort(function(r,n){return r-n}),a}function getPrecision(a){if(a=+a,isNaN(a))return 0;if(a>1e-14){for(var r=1,n=0;n<15;n++,r*=10)if(Math.round(a*r)/r===a)return n}return getPrecisionSafe(a)}function getPrecisionSafe(a){var r=a.toString().toLowerCase(),n=r.indexOf("e"),o=n>0?+r.slice(n+1):0,s=n>0?n:r.length,l=r.indexOf("."),u=l<0?0:s-1-l;return Math.max(0,u-o)}function getPixelPrecision(a,r){var n=Math.log,o=Math.LN10,s=Math.floor(n(a[1]-a[0])/o),l=Math.round(n(mathAbs$4(r[1]-r[0]))/o),u=Math.min(Math.max(-s+l,0),20);return isFinite(u)?u:20}function getPercentSeats(a,r){var n=reduce(a,function(_,S){return _+(isNaN(S)?0:S)},0);if(n===0)return[];for(var o=Math.pow(10,r),s=map$1(a,function(_){return(isNaN(_)?0:_)/n*o*100}),l=o*100,u=map$1(s,function(_){return Math.floor(_)}),c=reduce(u,function(_,S){return _+S},0),f=map$1(s,function(_,S){return _-u[S]});c<l;){for(var d=Number.NEGATIVE_INFINITY,v=null,g=0,y=f.length;g<y;++g)f[g]>d&&(d=f[g],v=g);++u[v],f[v]=0,++c}return map$1(u,function(_){return _/o})}function addSafe(a,r){var n=Math.max(getPrecision(a),getPrecision(r)),o=a+r;return n>ROUND_SUPPORTED_PRECISION_MAX?o:round$4(o,n)}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(a){var r=Math.PI*2;return(a%r+r)%r}function isRadianAroundZero(a){return a>-RADIAN_EPSILON&&a<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(a){if(a instanceof Date)return a;if(isString(a)){var r=TIME_REG.exec(a);if(!r)return new Date(NaN);if(r[8]){var n=+r[4]||0;return r[8].toUpperCase()!=="Z"&&(n-=+r[8].slice(0,3)),new Date(Date.UTC(+r[1],+(r[2]||1)-1,+r[3]||1,n,+(r[5]||0),+r[6]||0,r[7]?+r[7].substring(0,3):0))}else return new Date(+r[1],+(r[2]||1)-1,+r[3]||1,+r[4]||0,+(r[5]||0),+r[6]||0,r[7]?+r[7].substring(0,3):0)}else if(a==null)return new Date(NaN);return new Date(Math.round(a))}function quantity(a){return Math.pow(10,quantityExponent(a))}function quantityExponent(a){if(a===0)return 0;var r=Math.floor(Math.log(a)/Math.LN10);return a/Math.pow(10,r)>=10&&r++,r}function nice(a,r){var n=quantityExponent(a),o=Math.pow(10,n),s=a/o,l;return s<1.5?l=1:s<2.5?l=2:s<4?l=3:s<7?l=5:l=10,a=l*o,n>=-20?+a.toFixed(n<0?-n:0):a}function quantile(a,r){var n=(a.length-1)*r+1,o=Math.floor(n),s=+a[o-1],l=n-o;return l?s+l*(a[o]-s):s}function reformIntervals(a){a.sort(function(f,d){return c(f,d,0)?-1:1});for(var r=-1/0,n=1,o=0;o<a.length;){for(var s=a[o].interval,l=a[o].close,u=0;u<2;u++)s[u]<=r&&(s[u]=r,l[u]=u?1:1-n),r=s[u],n=l[u];s[0]===s[1]&&l[0]*l[1]!==1?a.splice(o,1):o++}return a;function c(f,d,v){return f.interval[v]<d.interval[v]||f.interval[v]===d.interval[v]&&(f.close[v]-d.close[v]===(v?-1:1)||!v&&c(f,d,1))}}function numericToNumber(a){var r=parseFloat(a);return r==a&&(r!==0||!isString(a)||a.indexOf("x")<=0)?r:NaN}function isNumeric(a){return!isNaN(numericToNumber(a))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(a,r){return r===0?a:getGreatestCommonDividor(r,a%r)}function getLeastCommonMultiple(a,r){return a==null?r:r==null?a:a*r/getGreatestCommonDividor(a,r)}var ECHARTS_PREFIX="[ECharts] ",hasConsole=typeof console<"u"&&console.warn&&console.log;function outputLog(a,r,n){hasConsole&&console[a](ECHARTS_PREFIX+r)}function error(a,r){outputLog("error",a)}function throwError(a){throw new Error(a)}function interpolateNumber(a,r,n){return(r-a)*n+a}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(a){return a instanceof Array?a:a==null?[]:[a]}function defaultEmphasis(a,r,n){if(a){a[r]=a[r]||{},a.emphasis=a.emphasis||{},a.emphasis[r]=a.emphasis[r]||{};for(var o=0,s=n.length;o<s;o++){var l=n[o];!a.emphasis[r].hasOwnProperty(l)&&a[r].hasOwnProperty(l)&&(a.emphasis[r][l]=a[r][l])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(a){return isObject$3(a)&&!isArray$1(a)&&!(a instanceof Date)?a.value:a}function isDataItemOption(a){return isObject$3(a)&&!(a instanceof Array)}function mappingToExists(a,r,n){var o=n==="normalMerge",s=n==="replaceMerge",l=n==="replaceAll";a=a||[],r=(r||[]).slice();var u=createHashMap();each$f(r,function(f,d){if(!isObject$3(f)){r[d]=null;return}});var c=prepareResult(a,u,n);return(o||s)&&mappingById(c,a,u,r),o&&mappingByName(c,r),o||s?mappingByIndex(c,r,s):l&&mappingInReplaceAllMode(c,r),makeIdAndName(c),c}function prepareResult(a,r,n){var o=[];if(n==="replaceAll")return o;for(var s=0;s<a.length;s++){var l=a[s];l&&l.id!=null&&r.set(l.id,s),o.push({existing:n==="replaceMerge"||isComponentIdInternal(l)?null:l,newOption:null,keyInfo:null,brandNew:null})}return o}function mappingById(a,r,n,o){each$f(o,function(s,l){if(!(!s||s.id==null)){var u=makeComparableKey(s.id),c=n.get(u);if(c!=null){var f=a[c];assert(!f.newOption,'Duplicated option on id "'+u+'".'),f.newOption=s,f.existing=r[c],o[l]=null}}})}function mappingByName(a,r){each$f(r,function(n,o){if(!(!n||n.name==null))for(var s=0;s<a.length;s++){var l=a[s].existing;if(!a[s].newOption&&l&&(l.id==null||n.id==null)&&!isComponentIdInternal(n)&&!isComponentIdInternal(l)&&keyExistAndEqual("name",l,n)){a[s].newOption=n,r[o]=null;return}}})}function mappingByIndex(a,r,n){each$f(r,function(o){if(o){for(var s,l=0;(s=a[l])&&(s.newOption||isComponentIdInternal(s.existing)||s.existing&&o.id!=null&&!keyExistAndEqual("id",o,s.existing));)l++;s?(s.newOption=o,s.brandNew=n):a.push({newOption:o,brandNew:n,existing:null,keyInfo:null}),l++}})}function mappingInReplaceAllMode(a,r){each$f(r,function(n){a.push({newOption:n,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(a){var r=createHashMap();each$f(a,function(n){var o=n.existing;o&&r.set(o.id,n)}),each$f(a,function(n){var o=n.newOption;assert(!o||o.id==null||!r.get(o.id)||r.get(o.id)===n,"id duplicates: "+(o&&o.id)),o&&o.id!=null&&r.set(o.id,n),!n.keyInfo&&(n.keyInfo={})}),each$f(a,function(n,o){var s=n.existing,l=n.newOption,u=n.keyInfo;if(isObject$3(l)){if(u.name=l.name!=null?makeComparableKey(l.name):s?s.name:DUMMY_COMPONENT_NAME_PREFIX+o,s)u.id=makeComparableKey(s.id);else if(l.id!=null)u.id=makeComparableKey(l.id);else{var c=0;do u.id="\0"+u.name+"\0"+c++;while(r.get(u.id))}r.set(u.id,n)}})}function keyExistAndEqual(a,r,n){var o=convertOptionIdName(r[a],null),s=convertOptionIdName(n[a],null);return o!=null&&s!=null&&o===s}function makeComparableKey(a){return convertOptionIdName(a,"")}function convertOptionIdName(a,r){return a==null?r:isString(a)?a:isNumber(a)||isStringSafe(a)?a+"":r}function isNameSpecified(a){var r=a.name;return!!(r&&r.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(a){return a&&a.id!=null&&makeComparableKey(a.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function makeInternalComponentId(a){return INTERNAL_COMPONENT_ID_PREFIX+a}function setComponentTypeToKeyInfo(a,r,n){each$f(a,function(o){var s=o.newOption;isObject$3(s)&&(o.keyInfo.mainType=r,o.keyInfo.subType=determineSubType(r,s,o.existing,n))})}function determineSubType(a,r,n,o){var s=r.type?r.type:n?n.subType:o.determineSubType(a,r);return s}function compressBatches(a,r){var n={},o={};return s(a||[],n),s(r||[],o,n),[l(n),l(o)];function s(u,c,f){for(var d=0,v=u.length;d<v;d++){var g=convertOptionIdName(u[d].seriesId,null);if(g==null)return;for(var y=normalizeToArray(u[d].dataIndex),_=f&&f[g],S=0,b=y.length;S<b;S++){var x=y[S];_&&_[x]?_[x]=null:(c[g]||(c[g]={}))[x]=1}}}function l(u,c){var f=[];for(var d in u)if(u.hasOwnProperty(d)&&u[d]!=null)if(c)f.push(+d);else{var v=l(u[d],!0);v.length&&f.push({seriesId:d,dataIndex:v})}return f}}function queryDataIndex(a,r){if(r.dataIndexInside!=null)return r.dataIndexInside;if(r.dataIndex!=null)return isArray$1(r.dataIndex)?map$1(r.dataIndex,function(n){return a.indexOfRawIndex(n)}):a.indexOfRawIndex(r.dataIndex);if(r.name!=null)return isArray$1(r.name)?map$1(r.name,function(n){return a.indexOfName(n)}):a.indexOfName(r.name)}function makeInner(){var a="__ec_inner_"+innerUniqueIndex++;return function(r){return r[a]||(r[a]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(a,r,n){var o=preParseFinder(r,n),s=o.mainTypeSpecified,l=o.queryOptionMap,u=o.others,c=u,f=n?n.defaultMainType:null;return!s&&f&&l.set(f,{}),l.each(function(d,v){var g=queryReferringComponents(a,v,d,{useDefault:f===v,enableAll:n&&n.enableAll!=null?n.enableAll:!0,enableNone:n&&n.enableNone!=null?n.enableNone:!0});c[v+"Models"]=g.models,c[v+"Model"]=g.models[0]}),c}function preParseFinder(a,r){var n;if(isString(a)){var o={};o[a+"Index"]=0,n=o}else n=a;var s=createHashMap(),l={},u=!1;return each$f(n,function(c,f){if(f==="dataIndex"||f==="dataIndexInside"){l[f]=c;return}var d=f.match(/^(\w+)(Index|Id|Name)$/)||[],v=d[1],g=(d[2]||"").toLowerCase();if(!(!v||!g||r&&r.includeMainTypes&&indexOf(r.includeMainTypes,v)<0)){u=u||!!v;var y=s.get(v)||s.set(v,{});y[g]=c}}),{mainTypeSpecified:u,queryOptionMap:s,others:l}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(a,r,n,o){o=o||SINGLE_REFERRING;var s=n.index,l=n.id,u=n.name,c={models:null,specified:s!=null||l!=null||u!=null};if(!c.specified){var f=void 0;return c.models=o.useDefault&&(f=a.getComponent(r))?[f]:[],c}if(s==="none"||s===!1){if(o.enableNone)return c.models=[],c;s=-1}return s==="all"&&(o.enableAll?s=l=u=null:s=-1),c.models=a.queryComponents({mainType:r,index:s,id:l,name:u}),c}function setAttribute(a,r,n){a.setAttribute?a.setAttribute(r,n):a[r]=n}function getAttribute(a,r){return a.getAttribute?a.getAttribute(r):a[r]}function getTooltipRenderMode(a){return a==="auto"?env.domSupported?"html":"richText":a||"html"}function groupData(a,r){var n=createHashMap(),o=[];return each$f(a,function(s){var l=r(s);(n.get(l)||(o.push(l),n.set(l,[]))).push(s)}),{keys:o,buckets:n}}function interpolateRawValues(a,r,n,o,s){var l=r==null||r==="auto";if(o==null)return o;if(isNumber(o)){var u=interpolateNumber(n||0,o,s);return round$4(u,l?Math.max(getPrecision(n||0),getPrecision(o)):r)}else{if(isString(o))return s<1?n:o;for(var c=[],f=n,d=o,v=Math.max(f?f.length:0,d.length),g=0;g<v;++g){var y=a.getDimensionInfo(g);if(y&&y.type==="ordinal")c[g]=(s<1&&f?f:d)[g];else{var _=f&&f[g]?f[g]:0,S=d[g],u=interpolateNumber(_,S,s);c[g]=round$4(u,l?Math.max(getPrecision(_),getPrecision(S)):r)}}return c}}var ListIterator=function(){function a(){}return a.prototype.reset=function(r,n,o,s){return this._list=r,this._step=s=s||1,this._idx=n,this._end=o??(s>0?r.length:0),this.item=null,this.key=NaN,this},a.prototype.next=function(){return(this._step>0?this._idx<this._end:this._idx>=this._end)?(this.item=this._list[this._idx],this.key=this._idx=this._idx+this._step,!0):!1},a}();function clearTmpModel(a){a.option=a.parentModel=a.ecModel=null}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(a){var r={main:"",sub:""};if(a){var n=a.split(TYPE_DELIMITER);r.main=n[0]||"",r.sub=n[1]||""}return r}function checkClassType(a){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(a),'componentType "'+a+'" illegal')}function isExtendedClass(a){return!!(a&&a[IS_EXTENDED_CLASS])}function enableClassExtend(a,r){a.$constructor=a,a.extend=function(n){var o=this,s;return isESClass(o)?s=function(l){__extends(u,l);function u(){return l.apply(this,arguments)||this}return u}(o):(s=function(){(n.$constructor||o).apply(this,arguments)},inherits(s,this)),extend(s.prototype,n),s[IS_EXTENDED_CLASS]=!0,s.extend=this.extend,s.superCall=superCall,s.superApply=superApply,s.superClass=o,s}}function isESClass(a){return isFunction(a)&&/^class\s/.test(Function.prototype.toString.call(a))}function mountExtend(a,r){a.extend=r.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(a){var r=["__\0is_clz",classBase++].join("_");a.prototype[r]=!0,a.isInstance=function(n){return!!(n&&n[r])}}function superCall(a,r){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return this.superClass.prototype[r].apply(a,n)}function superApply(a,r,n){return this.superClass.prototype[r].apply(a,n)}function enableClassManagement(a){var r={};a.registerClass=function(o){var s=o.type||o.prototype.type;if(s){checkClassType(s),o.prototype.type=s;var l=parseClassType(s);if(!l.sub)r[l.main]=o;else if(l.sub!==IS_CONTAINER){var u=n(l);u[l.sub]=o}}return o},a.getClass=function(o,s,l){var u=r[o];if(u&&u[IS_CONTAINER]&&(u=s?u[s]:null),l&&!u)throw new Error(s?"Component "+o+"."+(s||"")+" is used but not imported.":o+".type should be specified.");return u},a.getClassesByMainType=function(o){var s=parseClassType(o),l=[],u=r[s.main];return u&&u[IS_CONTAINER]?each$f(u,function(c,f){f!==IS_CONTAINER&&l.push(c)}):l.push(u),l},a.hasClass=function(o){var s=parseClassType(o);return!!r[s.main]},a.getAllClassMainTypes=function(){var o=[];return each$f(r,function(s,l){o.push(l)}),o},a.hasSubTypes=function(o){var s=parseClassType(o),l=r[s.main];return l&&l[IS_CONTAINER]};function n(o){var s=r[o.main];return(!s||!s[IS_CONTAINER])&&(s=r[o.main]={},s[IS_CONTAINER]=!0),s}}function makeStyleMapper(a,r){for(var n=0;n<a.length;n++)a[n][1]||(a[n][1]=a[n][0]);return r=r||!1,function(o,s,l){for(var u={},c=0;c<a.length;c++){var f=a[c][1];if(!(s&&indexOf(s,f)>=0||l&&indexOf(l,f)<0)){var d=o.getShallow(f,r);d!=null&&(u[a[c][0]]=d)}}return u}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=function(){function a(){}return a.prototype.getAreaStyle=function(r,n){return getAreaStyle(this,r,n)},a}(),globalImageCache=new LRU(50);function findExistImage(a){if(typeof a=="string"){var r=globalImageCache.get(a);return r&&r.image}else return a}function createOrUpdateImage(a,r,n,o,s){if(a)if(typeof a=="string"){if(r&&r.__zrImageSrc===a||!n)return r;var l=globalImageCache.get(a),u={hostEl:n,cb:o,cbPayload:s};return l?(r=l.image,!isImageReady(r)&&l.pending.push(u)):(r=platformApi.loadImage(a,imageOnLoad,imageOnLoad),r.__zrImageSrc=a,globalImageCache.put(a,r.__cachedImgObj={image:r,pending:[u]})),r}else return a;else return r}function imageOnLoad(){var a=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var r=0;r<a.pending.length;r++){var n=a.pending[r],o=n.cb;o&&o(this,n.cbPayload),n.hostEl.dirty()}a.pending.length=0}function isImageReady(a){return a&&a.width&&a.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText2(a,r,n,o,s,l){if(!n){a.text="",a.isTruncated=!1;return}var u=(r+"").split(`
`);l=prepareTruncateOptions(n,o,s,l);for(var c=!1,f={},d=0,v=u.length;d<v;d++)truncateSingleLine(f,u[d],l),u[d]=f.textLine,c=c||f.isTruncated;a.text=u.join(`
`),a.isTruncated=c}function prepareTruncateOptions(a,r,n,o){o=o||{};var s=extend({},o);n=retrieve2(n,"..."),s.maxIterations=retrieve2(o.maxIterations,2);var l=s.minChar=retrieve2(o.minChar,0),u=s.fontMeasureInfo=ensureFontMeasureInfo(r),c=u.asciiCharWidth;s.placeholder=retrieve2(o.placeholder,"");for(var f=a=Math.max(0,a-1),d=0;d<l&&f>=c;d++)f-=c;var v=measureWidth(u,n);return v>f&&(n="",v=0),f=a-v,s.ellipsis=n,s.ellipsisWidth=v,s.contentWidth=f,s.containerWidth=a,s}function truncateSingleLine(a,r,n){var o=n.containerWidth,s=n.contentWidth,l=n.fontMeasureInfo;if(!o){a.textLine="",a.isTruncated=!1;return}var u=measureWidth(l,r);if(u<=o){a.textLine=r,a.isTruncated=!1;return}for(var c=0;;c++){if(u<=s||c>=n.maxIterations){r+=n.ellipsis;break}var f=c===0?estimateLength(r,s,l):u>0?Math.floor(r.length*s/u):0;r=r.substr(0,f),u=measureWidth(l,r)}r===""&&(r=n.placeholder),a.textLine=r,a.isTruncated=!0}function estimateLength(a,r,n){for(var o=0,s=0,l=a.length;s<l&&o<r;s++)o+=measureCharWidth(n,a.charCodeAt(s));return s}function parsePlainText(a,r,n,o){var s=formatText(a),l=r.overflow,u=r.padding,c=u?u[1]+u[3]:0,f=u?u[0]+u[2]:0,d=r.font,v=l==="truncate",g=getLineHeight(d),y=retrieve2(r.lineHeight,g),_=r.lineOverflow==="truncate",S=!1,b=r.width;b==null&&n!=null&&(b=n-c);var x=r.height;x==null&&o!=null&&(x=o-f);var T;b!=null&&(l==="break"||l==="breakAll")?T=s?wrapText(s,r.font,b,l==="breakAll",0).lines:[]:T=s?s.split(`
`):[];var A=T.length*y;if(x==null&&(x=A),A>x&&_){var w=Math.floor(x/y);S=S||T.length>w,T=T.slice(0,w),A=T.length*y}if(s&&v&&b!=null)for(var C=prepareTruncateOptions(b,d,r.ellipsis,{minChar:r.truncateMinChar,placeholder:r.placeholder}),E={},P=0;P<T.length;P++)truncateSingleLine(E,T[P],C),T[P]=E.textLine,S=S||E.isTruncated;for(var I=x,M=0,R=ensureFontMeasureInfo(d),P=0;P<T.length;P++)M=Math.max(measureWidth(R,T[P]),M);b==null&&(b=M);var O=b;return I+=f,O+=c,{lines:T,height:x,outerWidth:O,outerHeight:I,lineHeight:y,calculatedLineHeight:g,contentWidth:M,contentHeight:A,width:b,isTruncated:S}}var RichTextToken=function(){function a(){}return a}(),RichTextLine=function(){function a(r){this.tokens=[],r&&(this.tokens=r)}return a}(),RichTextContentBlock=function(){function a(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return a}();function parseRichText(a,r,n,o,s){var l=new RichTextContentBlock,u=formatText(a);if(!u)return l;var c=r.padding,f=c?c[1]+c[3]:0,d=c?c[0]+c[2]:0,v=r.width;v==null&&n!=null&&(v=n-f);var g=r.height;g==null&&o!=null&&(g=o-d);for(var y=r.overflow,_=(y==="break"||y==="breakAll")&&v!=null?{width:v,accumWidth:0,breakAll:y==="breakAll"}:null,S=STYLE_REG.lastIndex=0,b;(b=STYLE_REG.exec(u))!=null;){var x=b.index;x>S&&pushTokens(l,u.substring(S,x),r,_),pushTokens(l,b[2],r,_,b[1]),S=STYLE_REG.lastIndex}S<u.length&&pushTokens(l,u.substring(S,u.length),r,_);var T=[],A=0,w=0,C=y==="truncate",E=r.lineOverflow==="truncate",P={};function I(ue,K,J){ue.width=K,ue.lineHeight=J,A+=J,w=Math.max(w,K)}e:for(var M=0;M<l.lines.length;M++){for(var R=l.lines[M],O=0,$=0,B=0;B<R.tokens.length;B++){var F=R.tokens[B],z=F.styleName&&r.rich[F.styleName]||{},G=F.textPadding=z.padding,D=G?G[1]+G[3]:0,V=F.font=z.font||r.font;F.contentHeight=getLineHeight(V);var L=retrieve2(z.height,F.contentHeight);if(F.innerHeight=L,G&&(L+=G[0]+G[2]),F.height=L,F.lineHeight=retrieve3(z.lineHeight,r.lineHeight,L),F.align=z&&z.align||s,F.verticalAlign=z&&z.verticalAlign||"middle",E&&g!=null&&A+F.lineHeight>g){var N=l.lines.length;B>0?(R.tokens=R.tokens.slice(0,B),I(R,$,O),l.lines=l.lines.slice(0,M+1)):l.lines=l.lines.slice(0,M),l.isTruncated=l.isTruncated||l.lines.length<N;break e}var U=z.width,H=U==null||U==="auto";if(typeof U=="string"&&U.charAt(U.length-1)==="%")F.percentWidth=U,T.push(F),F.contentWidth=measureWidth(ensureFontMeasureInfo(V),F.text);else{if(H){var q=z.backgroundColor,Z=q&&q.image;Z&&(Z=findExistImage(Z),isImageReady(Z)&&(F.width=Math.max(F.width,Z.width*L/Z.height)))}var ee=C&&v!=null?v-$:null;ee!=null&&ee<F.width?!H||ee<D?(F.text="",F.width=F.contentWidth=0):(truncateText2(P,F.text,ee-D,V,r.ellipsis,{minChar:r.truncateMinChar}),F.text=P.text,l.isTruncated=l.isTruncated||P.isTruncated,F.width=F.contentWidth=measureWidth(ensureFontMeasureInfo(V),F.text)):F.contentWidth=measureWidth(ensureFontMeasureInfo(V),F.text)}F.width+=D,$+=F.width,z&&(O=Math.max(O,F.lineHeight))}I(R,$,O)}l.outerWidth=l.width=retrieve2(v,w),l.outerHeight=l.height=retrieve2(g,A),l.contentHeight=A,l.contentWidth=w,l.outerWidth+=f,l.outerHeight+=d;for(var M=0;M<T.length;M++){var F=T[M],ne=F.percentWidth;F.width=parseInt(ne,10)/100*l.width}return l}function pushTokens(a,r,n,o,s){var l=r==="",u=s&&n.rich[s]||{},c=a.lines,f=u.font||n.font,d=!1,v,g;if(o){var y=u.padding,_=y?y[1]+y[3]:0;if(u.width!=null&&u.width!=="auto"){var S=parsePercent$1(u.width,o.width)+_;c.length>0&&S+o.accumWidth>o.width&&(v=r.split(`
`),d=!0),o.accumWidth=S}else{var b=wrapText(r,f,o.width,o.breakAll,o.accumWidth);o.accumWidth=b.accumWidth+_,g=b.linesWidths,v=b.lines}}v||(v=r.split(`
`));for(var x=ensureFontMeasureInfo(f),T=0;T<v.length;T++){var A=v[T],w=new RichTextToken;if(w.styleName=s,w.text=A,w.isLineHolder=!A&&!l,typeof u.width=="number"?w.width=u.width:w.width=g?g[T]:measureWidth(x,A),!T&&!d){var C=(c[c.length-1]||(c[0]=new RichTextLine)).tokens,E=C.length;E===1&&C[0].isLineHolder?C[0]=w:(A||!E||l)&&C.push(w)}else c.push(new RichTextLine([w]))}}function isAlphabeticLetter(a){var r=a.charCodeAt(0);return r>=32&&r<=591||r>=880&&r<=4351||r>=4608&&r<=5119||r>=7680&&r<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(a,r){return a[r]=!0,a},{});function isWordBreakChar(a){return isAlphabeticLetter(a)?!!breakCharMap[a]:!0}function wrapText(a,r,n,o,s){for(var l=[],u=[],c="",f="",d=0,v=0,g=ensureFontMeasureInfo(r),y=0;y<a.length;y++){var _=a.charAt(y);if(_===`
`){f&&(c+=f,v+=d),l.push(c),u.push(v),c="",f="",d=0,v=0;continue}var S=measureCharWidth(g,_.charCodeAt(0)),b=o?!1:!isWordBreakChar(_);if(l.length?v+S>n:s+v+S>n){v?(c||f)&&(b?(c||(c=f,f="",d=0,v=d),l.push(c),u.push(v-d),f+=_,d+=S,c="",v=d):(f&&(c+=f,f="",d=0),l.push(c),u.push(v),c=_,v=S)):b?(l.push(f),u.push(d),f=_,d=S):(l.push(_),u.push(S));continue}v+=S,b?(f+=_,d+=S):(f&&(c+=f,f="",d=0),c+=_)}return f&&(c+=f),c&&(l.push(c),u.push(v)),l.length===1&&(v+=s),{accumWidth:v,lines:l,linesWidths:u}}function calcInnerTextOverflowArea(a,r,n,o,s,l){if(a.baseX=n,a.baseY=o,a.outerWidth=a.outerHeight=null,!!r){var u=r.width*2,c=r.height*2;BoundingRect.set(tmpCITCTextRect,adjustTextX(n,u,s),adjustTextY(o,c,l),u,c),BoundingRect.intersect(r,tmpCITCTextRect,null,tmpCITCIntersectRectOpt);var f=tmpCITCIntersectRectOpt.outIntersectRect;a.outerWidth=f.width,a.outerHeight=f.height,a.baseX=adjustTextX(f.x,f.width,s,!0),a.baseY=adjustTextY(f.y,f.height,l,!0)}}var tmpCITCTextRect=new BoundingRect(0,0,0,0),tmpCITCIntersectRectOpt={outIntersectRect:{},clamp:!0};function formatText(a){return a!=null?a+="":a=""}function tSpanCreateBoundingRect(a){var r=formatText(a.text),n=a.font,o=measureWidth(ensureFontMeasureInfo(n),r),s=getLineHeight(n);return tSpanCreateBoundingRect2(a,o,s,null)}function tSpanCreateBoundingRect2(a,r,n,o){var s=new BoundingRect(adjustTextX(a.x||0,r,a.textAlign),adjustTextY(a.y||0,n,a.textBaseline),r,n),l=o??(tSpanHasStroke(a)?a.lineWidth:0);return l>0&&(s.x-=l/2,s.y-=l/2,s.width+=l,s.height+=l),s}function tSpanHasStroke(a){var r=a.stroke;return r!=null&&r!=="none"&&a.lineWidth>0}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(a){__extends(r,a);function r(n){return a.call(this,n)||this}return r.prototype._init=function(n){for(var o=keys(n),s=0;s<o.length;s++){var l=o[s];l==="style"?this.useStyle(n[l]):a.prototype.attrKV.call(this,l,n[l])}this.style||this.useStyle({})},r.prototype.beforeBrush=function(){},r.prototype.afterBrush=function(){},r.prototype.innerBeforeBrush=function(){},r.prototype.innerAfterBrush=function(){},r.prototype.shouldBePainted=function(n,o,s,l){var u=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,n,o)||u&&!u[0]&&!u[3])return!1;if(s&&this.__clipPaths&&this.__clipPaths.length){for(var c=0;c<this.__clipPaths.length;++c)if(this.__clipPaths[c].isZeroArea())return!1}if(l&&this.parent)for(var f=this.parent;f;){if(f.ignore)return!1;f=f.parent}return!0},r.prototype.contain=function(n,o){return this.rectContain(n,o)},r.prototype.traverse=function(n,o){n.call(o,this)},r.prototype.rectContain=function(n,o){var s=this.transformCoordToLocal(n,o),l=this.getBoundingRect();return l.contain(s[0],s[1])},r.prototype.getPaintRect=function(){var n=this._paintRect;if(!this._paintRect||this.__dirty){var o=this.transform,s=this.getBoundingRect(),l=this.style,u=l.shadowBlur||0,c=l.shadowOffsetX||0,f=l.shadowOffsetY||0;n=this._paintRect||(this._paintRect=new BoundingRect(0,0,0,0)),o?BoundingRect.applyTransform(n,s,o):n.copy(s),(u||c||f)&&(n.width+=u*2+Math.abs(c),n.height+=u*2+Math.abs(f),n.x=Math.min(n.x,n.x+c-u),n.y=Math.min(n.y,n.y+f-u));var d=this.dirtyRectTolerance;n.isZero()||(n.x=Math.floor(n.x-d),n.y=Math.floor(n.y-d),n.width=Math.ceil(n.width+1+d*2),n.height=Math.ceil(n.height+1+d*2))}return n},r.prototype.setPrevPaintRect=function(n){n?(this._prevPaintRect=this._prevPaintRect||new BoundingRect(0,0,0,0),this._prevPaintRect.copy(n)):this._prevPaintRect=null},r.prototype.getPrevPaintRect=function(){return this._prevPaintRect},r.prototype.animateStyle=function(n){return this.animate("style",n)},r.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():this.markRedraw()},r.prototype.attrKV=function(n,o){n!=="style"?a.prototype.attrKV.call(this,n,o):this.style?this.setStyle(o):this.useStyle(o)},r.prototype.setStyle=function(n,o){return typeof n=="string"?this.style[n]=o:extend(this.style,n),this.dirtyStyle(),this},r.prototype.dirtyStyle=function(n){n||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},r.prototype.dirty=function(){this.dirtyStyle()},r.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},r.prototype.styleUpdated=function(){this.__dirty&=~STYLE_CHANGED_BIT},r.prototype.createStyle=function(n){return createObject(DEFAULT_COMMON_STYLE,n)},r.prototype.useStyle=function(n){n[STYLE_MAGIC_KEY]||(n=this.createStyle(n)),this.__inHover?this.__hoverStyle=n:this.style=n,this.dirtyStyle()},r.prototype.isStyleObject=function(n){return n[STYLE_MAGIC_KEY]},r.prototype._innerSaveToNormal=function(n){a.prototype._innerSaveToNormal.call(this,n);var o=this._normalState;n.style&&!o.style&&(o.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(n,o,PRIMARY_STATES_KEYS)},r.prototype._applyStateObj=function(n,o,s,l,u,c){a.prototype._applyStateObj.call(this,n,o,s,l,u,c);var f=!(o&&l),d;if(o&&o.style?u?l?d=o.style:(d=this._mergeStyle(this.createStyle(),s.style),this._mergeStyle(d,o.style)):(d=this._mergeStyle(this.createStyle(),l?this.style:s.style),this._mergeStyle(d,o.style)):f&&(d=s.style),d)if(u){var v=this.style;if(this.style=this.createStyle(f?{}:v),f)for(var g=keys(v),y=0;y<g.length;y++){var _=g[y];_ in d&&(d[_]=d[_],this.style[_]=v[_])}for(var S=keys(d),y=0;y<S.length;y++){var _=S[y];this.style[_]=this.style[_]}this._transitionState(n,{style:d},c,this.getAnimationStyleProps())}else this.useStyle(d);for(var b=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,y=0;y<b.length;y++){var _=b[y];o&&o[_]!=null?this[_]=o[_]:f&&s[_]!=null&&(this[_]=s[_])}},r.prototype._mergeStates=function(n){for(var o=a.prototype._mergeStates.call(this,n),s,l=0;l<n.length;l++){var u=n[l];u.style&&(s=s||{},this._mergeStyle(s,u.style))}return s&&(o.style=s),o},r.prototype._mergeStyle=function(n,o){return extend(n,o),n},r.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},r.initDefaultProps=function(){var n=r.prototype;n.type="displayable",n.invisible=!1,n.z=0,n.z2=0,n.zlevel=0,n.culling=!1,n.cursor="pointer",n.rectHover=!1,n.incremental=!1,n._rect=null,n.dirtyRectTolerance=0,n.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT}(),r}(Element$1),tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0);function isDisplayableCulled(a,r,n){return tmpRect.copy(a.getBoundingRect()),a.transform&&tmpRect.applyTransform(a.transform),viewRect.width=r,viewRect.height=n,!tmpRect.intersect(viewRect)}var mathMin$9=Math.min,mathMax$9=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=Math.PI*2,start=create$2(),end=create$2(),extremity=create$2();function fromPoints(a,r,n){if(a.length!==0){for(var o=a[0],s=o[0],l=o[0],u=o[1],c=o[1],f=1;f<a.length;f++)o=a[f],s=mathMin$9(s,o[0]),l=mathMax$9(l,o[0]),u=mathMin$9(u,o[1]),c=mathMax$9(c,o[1]);r[0]=s,r[1]=u,n[0]=l,n[1]=c}}function fromLine(a,r,n,o,s,l){s[0]=mathMin$9(a,n),s[1]=mathMin$9(r,o),l[0]=mathMax$9(a,n),l[1]=mathMax$9(r,o)}var xDim=[],yDim=[];function fromCubic(a,r,n,o,s,l,u,c,f,d){var v=cubicExtrema,g=cubicAt,y=v(a,n,s,u,xDim);f[0]=1/0,f[1]=1/0,d[0]=-1/0,d[1]=-1/0;for(var _=0;_<y;_++){var S=g(a,n,s,u,xDim[_]);f[0]=mathMin$9(S,f[0]),d[0]=mathMax$9(S,d[0])}y=v(r,o,l,c,yDim);for(var _=0;_<y;_++){var b=g(r,o,l,c,yDim[_]);f[1]=mathMin$9(b,f[1]),d[1]=mathMax$9(b,d[1])}f[0]=mathMin$9(a,f[0]),d[0]=mathMax$9(a,d[0]),f[0]=mathMin$9(u,f[0]),d[0]=mathMax$9(u,d[0]),f[1]=mathMin$9(r,f[1]),d[1]=mathMax$9(r,d[1]),f[1]=mathMin$9(c,f[1]),d[1]=mathMax$9(c,d[1])}function fromQuadratic(a,r,n,o,s,l,u,c){var f=quadraticExtremum,d=quadraticAt$1,v=mathMax$9(mathMin$9(f(a,n,s),1),0),g=mathMax$9(mathMin$9(f(r,o,l),1),0),y=d(a,n,s,v),_=d(r,o,l,g);u[0]=mathMin$9(a,s,y),u[1]=mathMin$9(r,l,_),c[0]=mathMax$9(a,s,y),c[1]=mathMax$9(r,l,_)}function fromArc(a,r,n,o,s,l,u,c,f){var d=min$1,v=max$1,g=Math.abs(s-l);if(g%PI2$8<1e-4&&g>1e-4){c[0]=a-n,c[1]=r-o,f[0]=a+n,f[1]=r+o;return}if(start[0]=mathCos$4(s)*n+a,start[1]=mathSin$4(s)*o+r,end[0]=mathCos$4(l)*n+a,end[1]=mathSin$4(l)*o+r,d(c,start,end),v(f,start,end),s=s%PI2$8,s<0&&(s=s+PI2$8),l=l%PI2$8,l<0&&(l=l+PI2$8),s>l&&!u?l+=PI2$8:s<l&&u&&(s+=PI2$8),u){var y=l;l=s,s=y}for(var _=0;_<l;_+=Math.PI/2)_>s&&(extremity[0]=mathCos$4(_)*n+a,extremity[1]=mathSin$4(_)*o+r,d(c,extremity,c),v(f,extremity,f))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$8=Math.min,mathMax$8=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$3=Math.abs,PI$8=Math.PI,PI2$7=PI$8*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(a){var r=Math.round(a/PI$8*1e8)/1e8;return r%2*PI$8}function normalizeArcAngles(a,r){var n=modPI2(a[0]);n<0&&(n+=PI2$7);var o=n-a[0],s=a[1];s+=o,!r&&s-n>=PI2$7?s=n+PI2$7:r&&n-s>=PI2$7?s=n-PI2$7:!r&&n>s?s=n+(PI2$7-modPI2(n-s)):r&&n<s&&(s=n-(PI2$7-modPI2(s-n))),a[0]=n,a[1]=s}var PathProxy=function(){function a(r){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,r&&(this._saveData=!1),this._saveData&&(this.data=[])}return a.prototype.increaseVersion=function(){this._version++},a.prototype.getVersion=function(){return this._version},a.prototype.setScale=function(r,n,o){o=o||0,o>0&&(this._ux=mathAbs$3(o/devicePixelRatio/r)||0,this._uy=mathAbs$3(o/devicePixelRatio/n)||0)},a.prototype.setDPR=function(r){this.dpr=r},a.prototype.setContext=function(r){this._ctx=r},a.prototype.getContext=function(){return this._ctx},a.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},a.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},a.prototype.moveTo=function(r,n){return this._drawPendingPt(),this.addData(CMD$4.M,r,n),this._ctx&&this._ctx.moveTo(r,n),this._x0=r,this._y0=n,this._xi=r,this._yi=n,this},a.prototype.lineTo=function(r,n){var o=mathAbs$3(r-this._xi),s=mathAbs$3(n-this._yi),l=o>this._ux||s>this._uy;if(this.addData(CMD$4.L,r,n),this._ctx&&l&&this._ctx.lineTo(r,n),l)this._xi=r,this._yi=n,this._pendingPtDist=0;else{var u=o*o+s*s;u>this._pendingPtDist&&(this._pendingPtX=r,this._pendingPtY=n,this._pendingPtDist=u)}return this},a.prototype.bezierCurveTo=function(r,n,o,s,l,u){return this._drawPendingPt(),this.addData(CMD$4.C,r,n,o,s,l,u),this._ctx&&this._ctx.bezierCurveTo(r,n,o,s,l,u),this._xi=l,this._yi=u,this},a.prototype.quadraticCurveTo=function(r,n,o,s){return this._drawPendingPt(),this.addData(CMD$4.Q,r,n,o,s),this._ctx&&this._ctx.quadraticCurveTo(r,n,o,s),this._xi=o,this._yi=s,this},a.prototype.arc=function(r,n,o,s,l,u){this._drawPendingPt(),tmpAngles[0]=s,tmpAngles[1]=l,normalizeArcAngles(tmpAngles,u),s=tmpAngles[0],l=tmpAngles[1];var c=l-s;return this.addData(CMD$4.A,r,n,o,o,s,c,0,u?0:1),this._ctx&&this._ctx.arc(r,n,o,s,l,u),this._xi=mathCos$3(l)*o+r,this._yi=mathSin$3(l)*o+n,this},a.prototype.arcTo=function(r,n,o,s,l){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(r,n,o,s,l),this},a.prototype.rect=function(r,n,o,s){return this._drawPendingPt(),this._ctx&&this._ctx.rect(r,n,o,s),this.addData(CMD$4.R,r,n,o,s),this},a.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var r=this._ctx,n=this._x0,o=this._y0;return r&&r.closePath(),this._xi=n,this._yi=o,this},a.prototype.fill=function(r){r&&r.fill(),this.toStatic()},a.prototype.stroke=function(r){r&&r.stroke(),this.toStatic()},a.prototype.len=function(){return this._len},a.prototype.setData=function(r){if(this._saveData){var n=r.length;!(this.data&&this.data.length===n)&&hasTypedArray&&(this.data=new Float32Array(n));for(var o=0;o<n;o++)this.data[o]=r[o];this._len=n}},a.prototype.appendPath=function(r){if(this._saveData){r instanceof Array||(r=[r]);for(var n=r.length,o=0,s=this._len,l=0;l<n;l++)o+=r[l].len();var u=this.data;if(hasTypedArray&&(u instanceof Float32Array||!u)&&(this.data=new Float32Array(s+o),s>0&&u))for(var c=0;c<s;c++)this.data[c]=u[c];for(var l=0;l<n;l++)for(var f=r[l].data,c=0;c<f.length;c++)this.data[s++]=f[c];this._len=s}},a.prototype.addData=function(r,n,o,s,l,u,c,f,d){if(this._saveData){var v=this.data;this._len+arguments.length>v.length&&(this._expandData(),v=this.data);for(var g=0;g<arguments.length;g++)v[this._len++]=arguments[g]}},a.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},a.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var r=[],n=0;n<this._len;n++)r[n]=this.data[n];this.data=r}},a.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var r=this.data;r instanceof Array&&(r.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(r)))}},a.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var r=this.data,n=0,o=0,s=0,l=0,u;for(u=0;u<this._len;){var c=r[u++],f=u===1;switch(f&&(n=r[u],o=r[u+1],s=n,l=o),c){case CMD$4.M:n=s=r[u++],o=l=r[u++],min2[0]=s,min2[1]=l,max2[0]=s,max2[1]=l;break;case CMD$4.L:fromLine(n,o,r[u],r[u+1],min2,max2),n=r[u++],o=r[u++];break;case CMD$4.C:fromCubic(n,o,r[u++],r[u++],r[u++],r[u++],r[u],r[u+1],min2,max2),n=r[u++],o=r[u++];break;case CMD$4.Q:fromQuadratic(n,o,r[u++],r[u++],r[u],r[u+1],min2,max2),n=r[u++],o=r[u++];break;case CMD$4.A:var d=r[u++],v=r[u++],g=r[u++],y=r[u++],_=r[u++],S=r[u++]+_;u+=1;var b=!r[u++];f&&(s=mathCos$3(_)*g+d,l=mathSin$3(_)*y+v),fromArc(d,v,g,y,_,S,b,min2,max2),n=mathCos$3(S)*g+d,o=mathSin$3(S)*y+v;break;case CMD$4.R:s=n=r[u++],l=o=r[u++];var x=r[u++],T=r[u++];fromLine(s,l,s+x,l+T,min2,max2);break;case CMD$4.Z:n=s,o=l;break}min$1(min,min,min2),max$1(max,max,max2)}return u===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},a.prototype._calculateLength=function(){var r=this.data,n=this._len,o=this._ux,s=this._uy,l=0,u=0,c=0,f=0;this._pathSegLen||(this._pathSegLen=[]);for(var d=this._pathSegLen,v=0,g=0,y=0;y<n;){var _=r[y++],S=y===1;S&&(l=r[y],u=r[y+1],c=l,f=u);var b=-1;switch(_){case CMD$4.M:l=c=r[y++],u=f=r[y++];break;case CMD$4.L:{var x=r[y++],T=r[y++],A=x-l,w=T-u;(mathAbs$3(A)>o||mathAbs$3(w)>s||y===n-1)&&(b=Math.sqrt(A*A+w*w),l=x,u=T);break}case CMD$4.C:{var C=r[y++],E=r[y++],x=r[y++],T=r[y++],P=r[y++],I=r[y++];b=cubicLength(l,u,C,E,x,T,P,I,10),l=P,u=I;break}case CMD$4.Q:{var C=r[y++],E=r[y++],x=r[y++],T=r[y++];b=quadraticLength(l,u,C,E,x,T,10),l=x,u=T;break}case CMD$4.A:var M=r[y++],R=r[y++],O=r[y++],$=r[y++],B=r[y++],F=r[y++],z=F+B;y+=1,S&&(c=mathCos$3(B)*O+M,f=mathSin$3(B)*$+R),b=mathMax$8(O,$)*mathMin$8(PI2$7,Math.abs(F)),l=mathCos$3(z)*O+M,u=mathSin$3(z)*$+R;break;case CMD$4.R:{c=l=r[y++],f=u=r[y++];var G=r[y++],D=r[y++];b=G*2+D*2;break}case CMD$4.Z:{var A=c-l,w=f-u;b=Math.sqrt(A*A+w*w),l=c,u=f;break}}b>=0&&(d[g++]=b,v+=b)}return this._pathLen=v,v},a.prototype.rebuildPath=function(r,n){var o=this.data,s=this._ux,l=this._uy,u=this._len,c,f,d,v,g,y,_=n<1,S,b,x=0,T=0,A,w=0,C,E;if(!(_&&(this._pathSegLen||this._calculateLength(),S=this._pathSegLen,b=this._pathLen,A=n*b,!A)))e:for(var P=0;P<u;){var I=o[P++],M=P===1;switch(M&&(d=o[P],v=o[P+1],c=d,f=v),I!==CMD$4.L&&w>0&&(r.lineTo(C,E),w=0),I){case CMD$4.M:c=d=o[P++],f=v=o[P++],r.moveTo(d,v);break;case CMD$4.L:{g=o[P++],y=o[P++];var R=mathAbs$3(g-d),O=mathAbs$3(y-v);if(R>s||O>l){if(_){var $=S[T++];if(x+$>A){var B=(A-x)/$;r.lineTo(d*(1-B)+g*B,v*(1-B)+y*B);break e}x+=$}r.lineTo(g,y),d=g,v=y,w=0}else{var F=R*R+O*O;F>w&&(C=g,E=y,w=F)}break}case CMD$4.C:{var z=o[P++],G=o[P++],D=o[P++],V=o[P++],L=o[P++],N=o[P++];if(_){var $=S[T++];if(x+$>A){var B=(A-x)/$;cubicSubdivide(d,z,D,L,B,tmpOutX),cubicSubdivide(v,G,V,N,B,tmpOutY),r.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}x+=$}r.bezierCurveTo(z,G,D,V,L,N),d=L,v=N;break}case CMD$4.Q:{var z=o[P++],G=o[P++],D=o[P++],V=o[P++];if(_){var $=S[T++];if(x+$>A){var B=(A-x)/$;quadraticSubdivide(d,z,D,B,tmpOutX),quadraticSubdivide(v,G,V,B,tmpOutY),r.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}x+=$}r.quadraticCurveTo(z,G,D,V),d=D,v=V;break}case CMD$4.A:var U=o[P++],H=o[P++],q=o[P++],Z=o[P++],ee=o[P++],ne=o[P++],ue=o[P++],K=!o[P++],J=q>Z?q:Z,X=mathAbs$3(q-Z)>.001,ie=ee+ne,te=!1;if(_){var $=S[T++];x+$>A&&(ie=ee+ne*(A-x)/$,te=!0),x+=$}if(X&&r.ellipse?r.ellipse(U,H,q,Z,ue,ee,ie,K):r.arc(U,H,J,ee,ie,K),te)break e;M&&(c=mathCos$3(ee)*q+U,f=mathSin$3(ee)*Z+H),d=mathCos$3(ie)*q+U,v=mathSin$3(ie)*Z+H;break;case CMD$4.R:c=d=o[P],f=v=o[P+1],g=o[P++],y=o[P++];var W=o[P++],Y=o[P++];if(_){var $=S[T++];if(x+$>A){var j=A-x;r.moveTo(g,y),r.lineTo(g+mathMin$8(j,W),y),j-=W,j>0&&r.lineTo(g+W,y+mathMin$8(j,Y)),j-=Y,j>0&&r.lineTo(g+mathMax$8(W-j,0),y+Y),j-=W,j>0&&r.lineTo(g,y+mathMax$8(Y-j,0));break e}x+=$}r.rect(g,y,W,Y);break;case CMD$4.Z:if(_){var $=S[T++];if(x+$>A){var B=(A-x)/$;r.lineTo(d*(1-B)+c*B,v*(1-B)+f*B);break e}x+=$}r.closePath(),d=c,v=f}}},a.prototype.clone=function(){var r=new a,n=this.data;return r.data=n.slice?n.slice():Array.prototype.slice.call(n),r._len=this._len,r},a.prototype.canSave=function(){return!!this._saveData},a.CMD=CMD$4,a.initDefaultProps=function(){var r=a.prototype;r._saveData=!0,r._ux=0,r._uy=0,r._pendingPtDist=0,r._version=0}(),a}();function containStroke$4(a,r,n,o,s,l,u){if(s===0)return!1;var c=s,f=0,d=a;if(u>r+c&&u>o+c||u<r-c&&u<o-c||l>a+c&&l>n+c||l<a-c&&l<n-c)return!1;if(a!==n)f=(r-o)/(a-n),d=(a*o-n*r)/(a-n);else return Math.abs(l-a)<=c/2;var v=f*l-u+d,g=v*v/(f*f+1);return g<=c/2*c/2}function containStroke$3(a,r,n,o,s,l,u,c,f,d,v){if(f===0)return!1;var g=f;if(v>r+g&&v>o+g&&v>l+g&&v>c+g||v<r-g&&v<o-g&&v<l-g&&v<c-g||d>a+g&&d>n+g&&d>s+g&&d>u+g||d<a-g&&d<n-g&&d<s-g&&d<u-g)return!1;var y=cubicProjectPoint(a,r,n,o,s,l,u,c,d,v,null);return y<=g/2}function containStroke$2(a,r,n,o,s,l,u,c,f){if(u===0)return!1;var d=u;if(f>r+d&&f>o+d&&f>l+d||f<r-d&&f<o-d&&f<l-d||c>a+d&&c>n+d&&c>s+d||c<a-d&&c<n-d&&c<s-d)return!1;var v=quadraticProjectPoint(a,r,n,o,s,l,c,f,null);return v<=d/2}var PI2$6=Math.PI*2;function normalizeRadian(a){return a%=PI2$6,a<0&&(a+=PI2$6),a}var PI2$5=Math.PI*2;function containStroke$1(a,r,n,o,s,l,u,c,f){if(u===0)return!1;var d=u;c-=a,f-=r;var v=Math.sqrt(c*c+f*f);if(v-d>n||v+d<n)return!1;if(Math.abs(o-s)%PI2$5<1e-4)return!0;if(l){var g=o;o=normalizeRadian(s),s=normalizeRadian(g)}else o=normalizeRadian(o),s=normalizeRadian(s);o>s&&(s+=PI2$5);var y=Math.atan2(f,c);return y<0&&(y+=PI2$5),y>=o&&y<=s||y+PI2$5>=o&&y+PI2$5<=s}function windingLine(a,r,n,o,s,l){if(l>r&&l>o||l<r&&l<o||o===r)return 0;var u=(l-r)/(o-r),c=o<r?1:-1;(u===1||u===0)&&(c=o<r?.5:-.5);var f=u*(n-a)+a;return f===s?1/0:f>s?c:0}var CMD$3=PathProxy.CMD,PI2$4=Math.PI*2,EPSILON$1=1e-4;function isAroundEqual$1(a,r){return Math.abs(a-r)<EPSILON$1}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var a=extrema[0];extrema[0]=extrema[1],extrema[1]=a}function windingCubic(a,r,n,o,s,l,u,c,f,d){if(d>r&&d>o&&d>l&&d>c||d<r&&d<o&&d<l&&d<c)return 0;var v=cubicRootAt(r,o,l,c,d,roots);if(v===0)return 0;for(var g=0,y=-1,_=void 0,S=void 0,b=0;b<v;b++){var x=roots[b],T=x===0||x===1?.5:1,A=cubicAt(a,n,s,u,x);A<f||(y<0&&(y=cubicExtrema(r,o,l,c,extrema),extrema[1]<extrema[0]&&y>1&&swapExtrema(),_=cubicAt(r,o,l,c,extrema[0]),y>1&&(S=cubicAt(r,o,l,c,extrema[1]))),y===2?x<extrema[0]?g+=_<r?T:-T:x<extrema[1]?g+=S<_?T:-T:g+=c<S?T:-T:x<extrema[0]?g+=_<r?T:-T:g+=c<_?T:-T)}return g}function windingQuadratic(a,r,n,o,s,l,u,c){if(c>r&&c>o&&c>l||c<r&&c<o&&c<l)return 0;var f=quadraticRootAt(r,o,l,c,roots);if(f===0)return 0;var d=quadraticExtremum(r,o,l);if(d>=0&&d<=1){for(var v=0,g=quadraticAt$1(r,o,l,d),y=0;y<f;y++){var _=roots[y]===0||roots[y]===1?.5:1,S=quadraticAt$1(a,n,s,roots[y]);S<u||(roots[y]<d?v+=g<r?_:-_:v+=l<g?_:-_)}return v}else{var _=roots[0]===0||roots[0]===1?.5:1,S=quadraticAt$1(a,n,s,roots[0]);return S<u?0:l<r?_:-_}}function windingArc(a,r,n,o,s,l,u,c){if(c-=r,c>n||c<-n)return 0;var f=Math.sqrt(n*n-c*c);roots[0]=-f,roots[1]=f;var d=Math.abs(o-s);if(d<1e-4)return 0;if(d>=PI2$4-1e-4){o=0,s=PI2$4;var v=l?1:-1;return u>=roots[0]+a&&u<=roots[1]+a?v:0}if(o>s){var g=o;o=s,s=g}o<0&&(o+=PI2$4,s+=PI2$4);for(var y=0,_=0;_<2;_++){var S=roots[_];if(S+a>u){var b=Math.atan2(c,S),v=l?1:-1;b<0&&(b=PI2$4+b),(b>=o&&b<=s||b+PI2$4>=o&&b+PI2$4<=s)&&(b>Math.PI/2&&b<Math.PI*1.5&&(v=-v),y+=v)}}return y}function containPath(a,r,n,o,s){for(var l=a.data,u=a.len(),c=0,f=0,d=0,v=0,g=0,y,_,S=0;S<u;){var b=l[S++],x=S===1;switch(b===CMD$3.M&&S>1&&(n||(c+=windingLine(f,d,v,g,o,s))),x&&(f=l[S],d=l[S+1],v=f,g=d),b){case CMD$3.M:v=l[S++],g=l[S++],f=v,d=g;break;case CMD$3.L:if(n){if(containStroke$4(f,d,l[S],l[S+1],r,o,s))return!0}else c+=windingLine(f,d,l[S],l[S+1],o,s)||0;f=l[S++],d=l[S++];break;case CMD$3.C:if(n){if(containStroke$3(f,d,l[S++],l[S++],l[S++],l[S++],l[S],l[S+1],r,o,s))return!0}else c+=windingCubic(f,d,l[S++],l[S++],l[S++],l[S++],l[S],l[S+1],o,s)||0;f=l[S++],d=l[S++];break;case CMD$3.Q:if(n){if(containStroke$2(f,d,l[S++],l[S++],l[S],l[S+1],r,o,s))return!0}else c+=windingQuadratic(f,d,l[S++],l[S++],l[S],l[S+1],o,s)||0;f=l[S++],d=l[S++];break;case CMD$3.A:var T=l[S++],A=l[S++],w=l[S++],C=l[S++],E=l[S++],P=l[S++];S+=1;var I=!!(1-l[S++]);y=Math.cos(E)*w+T,_=Math.sin(E)*C+A,x?(v=y,g=_):c+=windingLine(f,d,y,_,o,s);var M=(o-T)*C/w+T;if(n){if(containStroke$1(T,A,C,E,E+P,I,r,M,s))return!0}else c+=windingArc(T,A,C,E,E+P,I,M,s);f=Math.cos(E+P)*w+T,d=Math.sin(E+P)*C+A;break;case CMD$3.R:v=f=l[S++],g=d=l[S++];var R=l[S++],O=l[S++];if(y=v+R,_=g+O,n){if(containStroke$4(v,g,y,g,r,o,s)||containStroke$4(y,g,y,_,r,o,s)||containStroke$4(y,_,v,_,r,o,s)||containStroke$4(v,_,v,g,r,o,s))return!0}else c+=windingLine(y,g,y,_,o,s),c+=windingLine(v,_,v,g,o,s);break;case CMD$3.Z:if(n){if(containStroke$4(f,d,v,g,r,o,s))return!0}else c+=windingLine(f,d,v,g,o,s);f=v,d=g;break}}return!n&&!isAroundEqual$1(d,g)&&(c+=windingLine(f,d,v,g,o,s)||0),c!==0}function contain$2(a,r,n){return containPath(a,0,!1,r,n)}function containStroke(a,r,n,o){return containPath(a,r,!0,n,o)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(a){__extends(r,a);function r(n){return a.call(this,n)||this}return r.prototype.update=function(){var n=this;a.prototype.update.call(this);var o=this.style;if(o.decal){var s=this._decalEl=this._decalEl||new r;s.buildPath===r.prototype.buildPath&&(s.buildPath=function(f){n.buildPath(f,n.shape)}),s.silent=!0;var l=s.style;for(var u in o)l[u]!==o[u]&&(l[u]=o[u]);l.fill=o.fill?o.decal:null,l.decal=null,l.shadowColor=null,o.strokeFirst&&(l.stroke=null);for(var c=0;c<pathCopyParams.length;++c)s[pathCopyParams[c]]=this[pathCopyParams[c]];s.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},r.prototype.getDecalElement=function(){return this._decalEl},r.prototype._init=function(n){var o=keys(n);this.shape=this.getDefaultShape();var s=this.getDefaultStyle();s&&this.useStyle(s);for(var l=0;l<o.length;l++){var u=o[l],c=n[u];u==="style"?this.style?extend(this.style,c):this.useStyle(c):u==="shape"?extend(this.shape,c):a.prototype.attrKV.call(this,u,c)}this.style||this.useStyle({})},r.prototype.getDefaultStyle=function(){return null},r.prototype.getDefaultShape=function(){return{}},r.prototype.canBeInsideText=function(){return this.hasFill()},r.prototype.getInsideTextFill=function(){var n=this.style.fill;if(n!=="none"){if(isString(n)){var o=lum(n,0);return o>.5?DARK_LABEL_COLOR:o>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(n)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},r.prototype.getInsideTextStroke=function(n){var o=this.style.fill;if(isString(o)){var s=this.__zr,l=!!(s&&s.isDarkMode()),u=lum(n,0)<DARK_MODE_THRESHOLD;if(l===u)return o}},r.prototype.buildPath=function(n,o,s){},r.prototype.pathUpdated=function(){this.__dirty&=~SHAPE_CHANGED_BIT},r.prototype.getUpdatedPathProxy=function(n){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,n),this.path},r.prototype.createPathProxy=function(){this.path=new PathProxy(!1)},r.prototype.hasStroke=function(){var n=this.style,o=n.stroke;return!(o==null||o==="none"||!(n.lineWidth>0))},r.prototype.hasFill=function(){var n=this.style,o=n.fill;return o!=null&&o!=="none"},r.prototype.getBoundingRect=function(){var n=this._rect,o=this.style,s=!n;if(s){var l=!1;this.path||(l=!0,this.createPathProxy());var u=this.path;(l||this.__dirty&SHAPE_CHANGED_BIT)&&(u.beginPath(),this.buildPath(u,this.shape,!1),this.pathUpdated()),n=u.getBoundingRect()}if(this._rect=n,this.hasStroke()&&this.path&&this.path.len()>0){var c=this._rectStroke||(this._rectStroke=n.clone());if(this.__dirty||s){c.copy(n);var f=o.strokeNoScale?this.getLineScale():1,d=o.lineWidth;if(!this.hasFill()){var v=this.strokeContainThreshold;d=Math.max(d,v??4)}f>1e-10&&(c.width+=d/f,c.height+=d/f,c.x-=d/f/2,c.y-=d/f/2)}return c}return n},r.prototype.contain=function(n,o){var s=this.transformCoordToLocal(n,o),l=this.getBoundingRect(),u=this.style;if(n=s[0],o=s[1],l.contain(n,o)){var c=this.path;if(this.hasStroke()){var f=u.lineWidth,d=u.strokeNoScale?this.getLineScale():1;if(d>1e-10&&(this.hasFill()||(f=Math.max(f,this.strokeContainThreshold)),containStroke(c,f/d,n,o)))return!0}if(this.hasFill())return contain$2(c,n,o)}return!1},r.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},r.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},r.prototype.animateShape=function(n){return this.animate("shape",n)},r.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():n==="shape"?this.dirtyShape():this.markRedraw()},r.prototype.attrKV=function(n,o){n==="shape"?this.setShape(o):a.prototype.attrKV.call(this,n,o)},r.prototype.setShape=function(n,o){var s=this.shape;return s||(s=this.shape={}),typeof n=="string"?s[n]=o:extend(s,n),this.dirtyShape(),this},r.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},r.prototype.createStyle=function(n){return createObject(DEFAULT_PATH_STYLE,n)},r.prototype._innerSaveToNormal=function(n){a.prototype._innerSaveToNormal.call(this,n);var o=this._normalState;n.shape&&!o.shape&&(o.shape=extend({},this.shape))},r.prototype._applyStateObj=function(n,o,s,l,u,c){a.prototype._applyStateObj.call(this,n,o,s,l,u,c);var f=!(o&&l),d;if(o&&o.shape?u?l?d=o.shape:(d=extend({},s.shape),extend(d,o.shape)):(d=extend({},l?this.shape:s.shape),extend(d,o.shape)):f&&(d=s.shape),d)if(u){this.shape=extend({},this.shape);for(var v={},g=keys(d),y=0;y<g.length;y++){var _=g[y];typeof d[_]=="object"?this.shape[_]=d[_]:v[_]=d[_]}this._transitionState(n,{shape:v},c)}else this.shape=d,this.dirtyShape()},r.prototype._mergeStates=function(n){for(var o=a.prototype._mergeStates.call(this,n),s,l=0;l<n.length;l++){var u=n[l];u.shape&&(s=s||{},this._mergeStyle(s,u.shape))}return s&&(o.shape=s),o},r.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},r.prototype.isZeroArea=function(){return!1},r.extend=function(n){var o=function(l){__extends(u,l);function u(c){var f=l.call(this,c)||this;return n.init&&n.init.call(f,c),f}return u.prototype.getDefaultStyle=function(){return clone$4(n.style)},u.prototype.getDefaultShape=function(){return clone$4(n.shape)},u}(r);for(var s in n)typeof n[s]=="function"&&(o.prototype[s]=n[s]);return o},r.initDefaultProps=function(){var n=r.prototype;n.type="path",n.strokeContainThreshold=5,n.segmentIgnoreThreshold=0,n.subPixelOptimize=!1,n.autoBatch=!1,n.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT}(),r}(Displayable),DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.hasStroke=function(){return tSpanHasStroke(this.style)},r.prototype.hasFill=function(){var n=this.style,o=n.fill;return o!=null&&o!=="none"},r.prototype.createStyle=function(n){return createObject(DEFAULT_TSPAN_STYLE,n)},r.prototype.setBoundingRect=function(n){this._rect=n},r.prototype.getBoundingRect=function(){return this._rect||(this._rect=tSpanCreateBoundingRect(this.style)),this._rect},r.initDefaultProps=function(){var n=r.prototype;n.dirtyRectTolerance=10}(),r}(Displayable);TSpan.prototype.type="tspan";var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(a){return!!(a&&typeof a!="string"&&a.width&&a.height)}var ZRImage=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.createStyle=function(n){return createObject(DEFAULT_IMAGE_STYLE,n)},r.prototype._getSize=function(n){var o=this.style,s=o[n];if(s!=null)return s;var l=isImageLike$1(o.image)?o.image:this.__image;if(!l)return 0;var u=n==="width"?"height":"width",c=o[u];return c==null?l[n]:l[n]/l[u]*c},r.prototype.getWidth=function(){return this._getSize("width")},r.prototype.getHeight=function(){return this._getSize("height")},r.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},r.prototype.getBoundingRect=function(){var n=this.style;return this._rect||(this._rect=new BoundingRect(n.x||0,n.y||0,this.getWidth(),this.getHeight())),this._rect},r}(Displayable);ZRImage.prototype.type="image";function buildPath$2(a,r){var n=r.x,o=r.y,s=r.width,l=r.height,u=r.r,c,f,d,v;s<0&&(n=n+s,s=-s),l<0&&(o=o+l,l=-l),typeof u=="number"?c=f=d=v=u:u instanceof Array?u.length===1?c=f=d=v=u[0]:u.length===2?(c=d=u[0],f=v=u[1]):u.length===3?(c=u[0],f=v=u[1],d=u[2]):(c=u[0],f=u[1],d=u[2],v=u[3]):c=f=d=v=0;var g;c+f>s&&(g=c+f,c*=s/g,f*=s/g),d+v>s&&(g=d+v,d*=s/g,v*=s/g),f+d>l&&(g=f+d,f*=l/g,d*=l/g),c+v>l&&(g=c+v,c*=l/g,v*=l/g),a.moveTo(n+c,o),a.lineTo(n+s-f,o),f!==0&&a.arc(n+s-f,o+f,f,-Math.PI/2,0),a.lineTo(n+s,o+l-d),d!==0&&a.arc(n+s-d,o+l-d,d,0,Math.PI/2),a.lineTo(n+v,o+l),v!==0&&a.arc(n+v,o+l-v,v,Math.PI/2,Math.PI),a.lineTo(n,o+c),c!==0&&a.arc(n+c,o+c,c,Math.PI,Math.PI*1.5)}var round$3=Math.round;function subPixelOptimizeLine$1(a,r,n){if(r){var o=r.x1,s=r.x2,l=r.y1,u=r.y2;a.x1=o,a.x2=s,a.y1=l,a.y2=u;var c=n&&n.lineWidth;return c&&(round$3(o*2)===round$3(s*2)&&(a.x1=a.x2=subPixelOptimize$1(o,c,!0)),round$3(l*2)===round$3(u*2)&&(a.y1=a.y2=subPixelOptimize$1(l,c,!0))),a}}function subPixelOptimizeRect$1(a,r,n){if(r){var o=r.x,s=r.y,l=r.width,u=r.height;a.x=o,a.y=s,a.width=l,a.height=u;var c=n&&n.lineWidth;return c&&(a.x=subPixelOptimize$1(o,c,!0),a.y=subPixelOptimize$1(s,c,!0),a.width=Math.max(subPixelOptimize$1(o+l,c,!1)-a.x,l===0?0:1),a.height=Math.max(subPixelOptimize$1(s+u,c,!1)-a.y,u===0?0:1)),a}}function subPixelOptimize$1(a,r,n){if(!r)return a;var o=round$3(a*2);return(o+round$3(r))%2===0?o/2:(o+(n?1:-1))/2}var RectShape=function(){function a(){this.x=0,this.y=0,this.width=0,this.height=0}return a}(),subPixelOptimizeOutputShape$1={},Rect$2=function(a){__extends(r,a);function r(n){return a.call(this,n)||this}return r.prototype.getDefaultShape=function(){return new RectShape},r.prototype.buildPath=function(n,o){var s,l,u,c;if(this.subPixelOptimize){var f=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,o,this.style);s=f.x,l=f.y,u=f.width,c=f.height,f.r=o.r,o=f}else s=o.x,l=o.y,u=o.width,c=o.height;o.r?buildPath$2(n,o):n.rect(s,l,u,c)},r.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},r}(Path);Rect$2.prototype.type="rect";var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,tmpCITOverflowAreaOut={},DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(a){__extends(r,a);function r(n){var o=a.call(this)||this;return o.type="text",o._children=[],o._defaultStyle=DEFAULT_RICH_TEXT_COLOR,o.attr(n),o}return r.prototype.childrenRef=function(){return this._children},r.prototype.update=function(){a.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var n=0;n<this._children.length;n++){var o=this._children[n];o.zlevel=this.zlevel,o.z=this.z,o.z2=this.z2,o.culling=this.culling,o.cursor=this.cursor,o.invisible=this.invisible}},r.prototype.updateTransform=function(){var n=this.innerTransformable;n?(n.updateTransform(),n.transform&&(this.transform=n.transform)):a.prototype.updateTransform.call(this)},r.prototype.getLocalTransform=function(n){var o=this.innerTransformable;return o?o.getLocalTransform(n):a.prototype.getLocalTransform.call(this,n)},r.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),a.prototype.getComputedTransform.call(this)},r.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},r.prototype.addSelfToZr=function(n){a.prototype.addSelfToZr.call(this,n);for(var o=0;o<this._children.length;o++)this._children[o].__zr=n},r.prototype.removeSelfFromZr=function(n){a.prototype.removeSelfFromZr.call(this,n);for(var o=0;o<this._children.length;o++)this._children[o].__zr=null},r.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var n=new BoundingRect(0,0,0,0),o=this._children,s=[],l=null,u=0;u<o.length;u++){var c=o[u],f=c.getBoundingRect(),d=c.getLocalTransform(s);d?(n.copy(f),n.applyTransform(d),l=l||n.clone(),l.union(n)):(l=l||f.clone(),l.union(f))}this._rect=l||n}return this._rect},r.prototype.setDefaultTextStyle=function(n){this._defaultStyle=n||DEFAULT_RICH_TEXT_COLOR},r.prototype.setTextContent=function(n){},r.prototype._mergeStyle=function(n,o){if(!o)return n;var s=o.rich,l=n.rich||s&&{};return extend(n,o),s&&l?(this._mergeRich(l,s),n.rich=l):l&&(n.rich=l),n},r.prototype._mergeRich=function(n,o){for(var s=keys(o),l=0;l<s.length;l++){var u=s[l];n[u]=n[u]||{},extend(n[u],o[u])}},r.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},r.prototype._getOrCreateChild=function(n){var o=this._children[this._childCursor];return(!o||!(o instanceof n))&&(o=new n),this._children[this._childCursor++]=o,o.__zr=this.__zr,o.parent=this,o},r.prototype._updatePlainTexts=function(){var n=this.style,o=n.font||DEFAULT_FONT,s=n.padding,l=this._defaultStyle,u=n.x||0,c=n.y||0,f=n.align||l.align||"left",d=n.verticalAlign||l.verticalAlign||"top";calcInnerTextOverflowArea(tmpCITOverflowAreaOut,l.overflowRect,u,c,f,d),u=tmpCITOverflowAreaOut.baseX,c=tmpCITOverflowAreaOut.baseY;var v=getStyleText(n),g=parsePlainText(v,n,tmpCITOverflowAreaOut.outerWidth,tmpCITOverflowAreaOut.outerHeight),y=needDrawBackground(n),_=!!n.backgroundColor,S=g.outerHeight,b=g.outerWidth,x=g.lines,T=g.lineHeight;this.isTruncated=!!g.isTruncated;var A=u,w=adjustTextY(c,g.contentHeight,d);if(y||s){var C=adjustTextX(u,b,f),E=adjustTextY(c,S,d);y&&this._renderBackground(n,n,C,E,b,S)}w+=T/2,s&&(A=getTextXForPadding(u,f,s),d==="top"?w+=s[0]:d==="bottom"&&(w-=s[2]));for(var P=0,I=!1,M=!1,R=getFill("fill"in n?n.fill:(M=!0,l.fill)),O=getStroke("stroke"in n?n.stroke:!_&&(!l.autoStroke||M)?(P=DEFAULT_STROKE_LINE_WIDTH,I=!0,l.stroke):null),$=n.textShadowBlur>0,B=0;B<x.length;B++){var F=this._getOrCreateChild(TSpan),z=F.createStyle();F.useStyle(z),z.text=x[B],z.x=A,z.y=w,z.textAlign=f,z.textBaseline="middle",z.opacity=n.opacity,z.strokeFirst=!0,$&&(z.shadowBlur=n.textShadowBlur||0,z.shadowColor=n.textShadowColor||"transparent",z.shadowOffsetX=n.textShadowOffsetX||0,z.shadowOffsetY=n.textShadowOffsetY||0),z.stroke=O,z.fill=R,O&&(z.lineWidth=n.lineWidth||P,z.lineDash=n.lineDash,z.lineDashOffset=n.lineDashOffset||0),z.font=o,setSeparateFont(z,n),w+=T,F.setBoundingRect(tSpanCreateBoundingRect2(z,g.contentWidth,g.calculatedLineHeight,I?0:null))}},r.prototype._updateRichTexts=function(){var n=this.style,o=this._defaultStyle,s=n.align||o.align,l=n.verticalAlign||o.verticalAlign,u=n.x||0,c=n.y||0;calcInnerTextOverflowArea(tmpCITOverflowAreaOut,o.overflowRect,u,c,s,l),u=tmpCITOverflowAreaOut.baseX,c=tmpCITOverflowAreaOut.baseY;var f=getStyleText(n),d=parseRichText(f,n,tmpCITOverflowAreaOut.outerWidth,tmpCITOverflowAreaOut.outerHeight,s),v=d.width,g=d.outerWidth,y=d.outerHeight,_=n.padding;this.isTruncated=!!d.isTruncated;var S=adjustTextX(u,g,s),b=adjustTextY(c,y,l),x=S,T=b;_&&(x+=_[3],T+=_[0]);var A=x+v;needDrawBackground(n)&&this._renderBackground(n,n,S,b,g,y);for(var w=!!n.backgroundColor,C=0;C<d.lines.length;C++){for(var E=d.lines[C],P=E.tokens,I=P.length,M=E.lineHeight,R=E.width,O=0,$=x,B=A,F=I-1,z=void 0;O<I&&(z=P[O],!z.align||z.align==="left");)this._placeToken(z,n,M,T,$,"left",w),R-=z.width,$+=z.width,O++;for(;F>=0&&(z=P[F],z.align==="right");)this._placeToken(z,n,M,T,B,"right",w),R-=z.width,B-=z.width,F--;for($+=(v-($-x)-(A-B)-R)/2;O<=F;)z=P[O],this._placeToken(z,n,M,T,$+z.width/2,"center",w),$+=z.width,O++;T+=M}},r.prototype._placeToken=function(n,o,s,l,u,c,f){var d=o.rich[n.styleName]||{};d.text=n.text;var v=n.verticalAlign,g=l+s/2;v==="top"?g=l+n.height/2:v==="bottom"&&(g=l+s-n.height/2);var y=!n.isLineHolder&&needDrawBackground(d);y&&this._renderBackground(d,o,c==="right"?u-n.width:c==="center"?u-n.width/2:u,g-n.height/2,n.width,n.height);var _=!!d.backgroundColor,S=n.textPadding;S&&(u=getTextXForPadding(u,c,S),g-=n.height/2-S[0]-n.innerHeight/2);var b=this._getOrCreateChild(TSpan),x=b.createStyle();b.useStyle(x);var T=this._defaultStyle,A=!1,w=0,C=!1,E=getFill("fill"in d?d.fill:"fill"in o?o.fill:(A=!0,T.fill)),P=getStroke("stroke"in d?d.stroke:"stroke"in o?o.stroke:!_&&!f&&(!T.autoStroke||A)?(w=DEFAULT_STROKE_LINE_WIDTH,C=!0,T.stroke):null),I=d.textShadowBlur>0||o.textShadowBlur>0;x.text=n.text,x.x=u,x.y=g,I&&(x.shadowBlur=d.textShadowBlur||o.textShadowBlur||0,x.shadowColor=d.textShadowColor||o.textShadowColor||"transparent",x.shadowOffsetX=d.textShadowOffsetX||o.textShadowOffsetX||0,x.shadowOffsetY=d.textShadowOffsetY||o.textShadowOffsetY||0),x.textAlign=c,x.textBaseline="middle",x.font=n.font||DEFAULT_FONT,x.opacity=retrieve3(d.opacity,o.opacity,1),setSeparateFont(x,d),P&&(x.lineWidth=retrieve3(d.lineWidth,o.lineWidth,w),x.lineDash=retrieve2(d.lineDash,o.lineDash),x.lineDashOffset=o.lineDashOffset||0,x.stroke=P),E&&(x.fill=E),b.setBoundingRect(tSpanCreateBoundingRect2(x,n.contentWidth,n.contentHeight,C?0:null))},r.prototype._renderBackground=function(n,o,s,l,u,c){var f=n.backgroundColor,d=n.borderWidth,v=n.borderColor,g=f&&f.image,y=f&&!g,_=n.borderRadius,S=this,b,x;if(y||n.lineHeight||d&&v){b=this._getOrCreateChild(Rect$2),b.useStyle(b.createStyle()),b.style.fill=null;var T=b.shape;T.x=s,T.y=l,T.width=u,T.height=c,T.r=_,b.dirtyShape()}if(y){var A=b.style;A.fill=f||null,A.fillOpacity=retrieve2(n.fillOpacity,1)}else if(g){x=this._getOrCreateChild(ZRImage),x.onload=function(){S.dirtyStyle()};var w=x.style;w.image=f.image,w.x=s,w.y=l,w.width=u,w.height=c}if(d&&v){var A=b.style;A.lineWidth=d,A.stroke=v,A.strokeOpacity=retrieve2(n.strokeOpacity,1),A.lineDash=n.borderDash,A.lineDashOffset=n.borderDashOffset||0,b.strokeContainThreshold=0,b.hasFill()&&b.hasStroke()&&(A.strokeFirst=!0,A.lineWidth*=2)}var C=(b||x).style;C.shadowBlur=n.shadowBlur||0,C.shadowColor=n.shadowColor||"transparent",C.shadowOffsetX=n.shadowOffsetX||0,C.shadowOffsetY=n.shadowOffsetY||0,C.opacity=retrieve3(n.opacity,o.opacity,1)},r.makeFont=function(n){var o="";return hasSeparateFont(n)&&(o=[n.fontStyle,n.fontWeight,parseFontSize(n.fontSize),n.fontFamily||"sans-serif"].join(" ")),o&&trim$1(o)||n.textFont||n.font},r}(Displayable),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(a){return typeof a=="string"&&(a.indexOf("px")!==-1||a.indexOf("rem")!==-1||a.indexOf("em")!==-1)?a:isNaN(+a)?DEFAULT_FONT_SIZE+"px":a+"px"}function setSeparateFont(a,r){for(var n=0;n<FONT_PARTS.length;n++){var o=FONT_PARTS[n],s=r[o];s!=null&&(a[o]=s)}}function hasSeparateFont(a){return a.fontSize!=null||a.fontFamily||a.fontWeight}function normalizeTextStyle(a){return normalizeStyle(a),each$f(a.rich,normalizeStyle),a}function normalizeStyle(a){if(a){a.font=ZRText.makeFont(a);var r=a.align;r==="middle"&&(r="center"),a.align=r==null||VALID_TEXT_ALIGN[r]?r:"left";var n=a.verticalAlign;n==="center"&&(n="middle"),a.verticalAlign=n==null||VALID_TEXT_VERTICAL_ALIGN[n]?n:"top";var o=a.padding;o&&(a.padding=normalizeCssArray$1(a.padding))}}function getStroke(a,r){return a==null||r<=0||a==="transparent"||a==="none"?null:a.image||a.colorStops?"#000":a}function getFill(a){return a==null||a==="none"?null:a.image||a.colorStops?"#000":a}function getTextXForPadding(a,r,n){return r==="right"?a-n[1]:r==="center"?a+n[3]/2-n[1]/2:a+n[3]}function getStyleText(a){var r=a.text;return r!=null&&(r+=""),r}function needDrawBackground(a){return!!(a.backgroundColor||a.lineHeight||a.borderWidth&&a.borderColor)}var getECData=makeInner(),setCommonECData=function(a,r,n,o){if(o){var s=getECData(o);s.dataIndex=n,s.dataType=r,s.seriesIndex=a,s.ssrType="chart",o.type==="group"&&o.traverse(function(l){var u=getECData(l);u.seriesIndex=a,u.dataIndex=n,u.dataType=r,u.ssrType="chart"})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect",SELECT_CHANGED_EVENT_TYPE="selectchanged";function hasFillOrStroke(a){return a!=null&&a!=="none"}function doChangeHoverState(a,r,n){a.onHoverStateChange&&(a.hoverState||0)!==n&&a.onHoverStateChange(r),a.hoverState=n}function singleEnterEmphasis(a){doChangeHoverState(a,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(a){a.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(a,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(a){doChangeHoverState(a,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(a){a.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(a,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(a){a.selected=!0}function singleLeaveSelect(a){a.selected=!1}function updateElementState(a,r,n){r(a,n)}function traverseUpdateState(a,r,n){updateElementState(a,r,n),a.isGroup&&a.traverse(function(o){updateElementState(o,r,n)})}function setStatesFlag(a,r){switch(r){case"emphasis":a.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":a.hoverState=HOVER_STATE_NORMAL;break;case"blur":a.hoverState=HOVER_STATE_BLUR;break;case"select":a.selected=!0}}function getFromStateStyle(a,r,n,o){for(var s=a.style,l={},u=0;u<r.length;u++){var c=r[u],f=s[c];l[c]=f??(o&&o[c])}for(var u=0;u<a.animators.length;u++){var d=a.animators[u];d.__fromStateTransition&&d.__fromStateTransition.indexOf(n)<0&&d.targetName==="style"&&d.saveTo(l,r)}return l}function createEmphasisDefaultState(a,r,n,o){var s=n&&indexOf(n,"select")>=0,l=!1;if(a instanceof Path){var u=getSavedStates(a),c=s&&u.selectFill||u.normalFill,f=s&&u.selectStroke||u.normalStroke;if(hasFillOrStroke(c)||hasFillOrStroke(f)){o=o||{};var d=o.style||{};d.fill==="inherit"?(l=!0,o=extend({},o),d=extend({},d),d.fill=c):!hasFillOrStroke(d.fill)&&hasFillOrStroke(c)?(l=!0,o=extend({},o),d=extend({},d),d.fill=liftColor(c)):!hasFillOrStroke(d.stroke)&&hasFillOrStroke(f)&&(l||(o=extend({},o),d=extend({},d)),d.stroke=liftColor(f)),o.style=d}}if(o&&o.z2==null){l||(o=extend({},o));var v=a.z2EmphasisLift;o.z2=a.z2+(v??Z2_EMPHASIS_LIFT)}return o}function createSelectDefaultState(a,r,n){if(n&&n.z2==null){n=extend({},n);var o=a.z2SelectLift;n.z2=a.z2+(o??Z2_SELECT_LIFT)}return n}function createBlurDefaultState(a,r,n){var o=indexOf(a.currentStates,r)>=0,s=a.style.opacity,l=o?null:getFromStateStyle(a,["opacity"],r,{opacity:1});n=n||{};var u=n.style||{};return u.opacity==null&&(n=extend({},n),u=extend({opacity:o?s:l.opacity*.1},u),n.style=u),n}function elementStateProxy(a,r){var n=this.states[a];if(this.style){if(a==="emphasis")return createEmphasisDefaultState(this,a,r,n);if(a==="blur")return createBlurDefaultState(this,a,n);if(a==="select")return createSelectDefaultState(this,a,n)}return n}function setDefaultStateProxy(a){a.stateProxy=elementStateProxy;var r=a.getTextContent(),n=a.getTextGuideLine();r&&(r.stateProxy=elementStateProxy),n&&(n.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(a,r){!shouldSilent(a,r)&&!a.__highByOuter&&traverseUpdateState(a,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(a,r){!shouldSilent(a,r)&&!a.__highByOuter&&traverseUpdateState(a,singleLeaveEmphasis)}function enterEmphasis(a,r){a.__highByOuter|=1<<(r||0),traverseUpdateState(a,singleEnterEmphasis)}function leaveEmphasis(a,r){!(a.__highByOuter&=~(1<<(r||0)))&&traverseUpdateState(a,singleLeaveEmphasis)}function enterBlur(a){traverseUpdateState(a,singleEnterBlur)}function leaveBlur(a){traverseUpdateState(a,singleLeaveBlur)}function enterSelect(a){traverseUpdateState(a,singleEnterSelect)}function leaveSelect(a){traverseUpdateState(a,singleLeaveSelect)}function shouldSilent(a,r){return a.__highDownSilentOnTouch&&r.zrByTouch}function allLeaveBlur(a){var r=a.getModel(),n=[],o=[];r.eachComponent(function(s,l){var u=getComponentStates(l),c=s==="series",f=c?a.getViewOfSeriesModel(l):a.getViewOfComponentModel(l);!c&&o.push(f),u.isBlured&&(f.group.traverse(function(d){singleLeaveBlur(d)}),c&&n.push(l)),u.isBlured=!1}),each$f(o,function(s){s&&s.toggleBlurSeries&&s.toggleBlurSeries(n,!1,r)})}function blurSeries(a,r,n,o){var s=o.getModel();n=n||"coordinateSystem";function l(d,v){for(var g=0;g<v.length;g++){var y=d.getItemGraphicEl(v[g]);y&&leaveBlur(y)}}if(a!=null&&!(!r||r==="none")){var u=s.getSeriesByIndex(a),c=u.coordinateSystem;c&&c.master&&(c=c.master);var f=[];s.eachSeries(function(d){var v=u===d,g=d.coordinateSystem;g&&g.master&&(g=g.master);var y=g&&c?g===c:v;if(!(n==="series"&&!v||n==="coordinateSystem"&&!y||r==="series"&&v)){var _=o.getViewOfSeriesModel(d);if(_.group.traverse(function(x){x.__highByOuter&&v&&r==="self"||singleEnterBlur(x)}),isArrayLike(r))l(d.getData(),r);else if(isObject$3(r))for(var S=keys(r),b=0;b<S.length;b++)l(d.getData(S[b]),r[S[b]]);f.push(d),getComponentStates(d).isBlured=!0}}),s.eachComponent(function(d,v){if(d!=="series"){var g=o.getViewOfComponentModel(v);g&&g.toggleBlurSeries&&g.toggleBlurSeries(f,!0,s)}})}}function blurComponent(a,r,n){if(!(a==null||r==null)){var o=n.getModel().getComponent(a,r);if(o){getComponentStates(o).isBlured=!0;var s=n.getViewOfComponentModel(o);!s||!s.focusBlurEnabled||s.group.traverse(function(l){singleEnterBlur(l)})}}}function blurSeriesFromHighlightPayload(a,r,n){var o=a.seriesIndex,s=a.getData(r.dataType);if(s){var l=queryDataIndex(s,r);l=(isArray$1(l)?l[0]:l)||0;var u=s.getItemGraphicEl(l);if(!u)for(var c=s.count(),f=0;!u&&f<c;)u=s.getItemGraphicEl(f++);if(u){var d=getECData(u);blurSeries(o,d.focus,d.blurScope,n)}else{var v=a.get(["emphasis","focus"]),g=a.get(["emphasis","blurScope"]);v!=null&&blurSeries(o,v,g,n)}}}function findComponentHighDownDispatchers(a,r,n,o){var s={focusSelf:!1,dispatchers:null};if(a==null||a==="series"||r==null||n==null)return s;var l=o.getModel().getComponent(a,r);if(!l)return s;var u=o.getViewOfComponentModel(l);if(!u||!u.findHighDownDispatchers)return s;for(var c=u.findHighDownDispatchers(n),f,d=0;d<c.length;d++)if(getECData(c[d]).focus==="self"){f=!0;break}return{focusSelf:f,dispatchers:c}}function handleGlobalMouseOverForHighDown(a,r,n){var o=getECData(a),s=findComponentHighDownDispatchers(o.componentMainType,o.componentIndex,o.componentHighDownName,n),l=s.dispatchers,u=s.focusSelf;l?(u&&blurComponent(o.componentMainType,o.componentIndex,n),each$f(l,function(c){return enterEmphasisWhenMouseOver(c,r)})):(blurSeries(o.seriesIndex,o.focus,o.blurScope,n),o.focus==="self"&&blurComponent(o.componentMainType,o.componentIndex,n),enterEmphasisWhenMouseOver(a,r))}function handleGlobalMouseOutForHighDown(a,r,n){allLeaveBlur(n);var o=getECData(a),s=findComponentHighDownDispatchers(o.componentMainType,o.componentIndex,o.componentHighDownName,n).dispatchers;s?each$f(s,function(l){return leaveEmphasisWhenMouseOut(l,r)}):leaveEmphasisWhenMouseOut(a,r)}function toggleSelectionFromPayload(a,r,n){if(isSelectChangePayload(r)){var o=r.dataType,s=a.getData(o),l=queryDataIndex(s,r);isArray$1(l)||(l=[l]),a[r.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":r.type===SELECT_ACTION_TYPE?"select":"unselect"](l,o)}}function updateSeriesElementSelection(a){var r=a.getAllData();each$f(r,function(n){var o=n.data,s=n.type;o.eachItemGraphicEl(function(l,u){a.isSelected(u,s)?enterSelect(l):leaveSelect(l)})})}function getAllSelectedIndices(a){var r=[];return a.eachSeries(function(n){var o=n.getAllData();each$f(o,function(s){s.data;var l=s.type,u=n.getSelectedDataIndices();if(u.length>0){var c={dataIndex:u,seriesIndex:n.seriesIndex};l!=null&&(c.dataType=l),r.push(c)}})}),r}function enableHoverEmphasis(a,r,n){setAsHighDownDispatcher(a,!0),traverseUpdateState(a,setDefaultStateProxy),enableHoverFocus(a,r,n)}function disableHoverEmphasis(a){setAsHighDownDispatcher(a,!1)}function toggleHoverEmphasis(a,r,n,o){o?disableHoverEmphasis(a):enableHoverEmphasis(a,r,n)}function enableHoverFocus(a,r,n){var o=getECData(a);r!=null?(o.focus=r,o.blurScope=n):o.focus&&(o.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(a,r,n,o){n=n||"itemStyle";for(var s=0;s<OTHER_STATES.length;s++){var l=OTHER_STATES[s],u=r.getModel([l,n]),c=a.ensureState(l);c.style=o?o(u):u[defaultStyleGetterMap[n]]()}}function setAsHighDownDispatcher(a,r){var n=r===!1,o=a;a.highDownSilentOnTouch&&(o.__highDownSilentOnTouch=a.highDownSilentOnTouch),(!n||o.__highDownDispatcher)&&(o.__highByOuter=o.__highByOuter||0,o.__highDownDispatcher=!n)}function isHighDownDispatcher(a){return!!(a&&a.__highDownDispatcher)}function enableComponentHighDownFeatures(a,r,n){var o=getECData(a);o.componentMainType=r.mainType,o.componentIndex=r.componentIndex,o.componentHighDownName=n}function getHighlightDigit(a){var r=_highlightKeyMap[a];return r==null&&_highlightNextDigit<=32&&(r=_highlightKeyMap[a]=_highlightNextDigit++),r}function isSelectChangePayload(a){var r=a.type;return r===SELECT_ACTION_TYPE||r===UNSELECT_ACTION_TYPE||r===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(a){var r=a.type;return r===HIGHLIGHT_ACTION_TYPE||r===DOWNPLAY_ACTION_TYPE}function savePathStates(a){var r=getSavedStates(a);r.normalFill=a.style.fill,r.normalStroke=a.style.stroke;var n=a.states.select||{};r.selectFill=n.style&&n.style.fill||null,r.selectStroke=n.style&&n.style.stroke||null}var CMD$2=PathProxy.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(a,r){if(r){var n=a.data,o=a.len(),s,l,u,c,f,d,v=CMD$2.M,g=CMD$2.C,y=CMD$2.L,_=CMD$2.R,S=CMD$2.A,b=CMD$2.Q;for(u=0,c=0;u<o;){switch(s=n[u++],c=u,l=0,s){case v:l=1;break;case y:l=1;break;case g:l=3;break;case b:l=2;break;case S:var x=r[4],T=r[5],A=mathSqrt$2(r[0]*r[0]+r[1]*r[1]),w=mathSqrt$2(r[2]*r[2]+r[3]*r[3]),C=mathAtan2(-r[1]/w,r[0]/A);n[u]*=A,n[u++]+=x,n[u]*=w,n[u++]+=T,n[u++]*=A,n[u++]*=w,n[u++]+=C,n[u++]+=C,u+=2,c=u;break;case _:d[0]=n[u++],d[1]=n[u++],applyTransform$1(d,d,r),n[c++]=d[0],n[c++]=d[1],d[0]+=n[u++],d[1]+=n[u++],applyTransform$1(d,d,r),n[c++]=d[0],n[c++]=d[1]}for(f=0;f<l;f++){var E=points$2[f];E[0]=n[u++],E[1]=n[u++],applyTransform$1(E,E,r),n[c++]=E[0],n[c++]=E[1]}}a.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$7=Math.PI;function vMag(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function vRatio(a,r){return(a[0]*r[0]+a[1]*r[1])/(vMag(a)*vMag(r))}function vAngle(a,r){return(a[0]*r[1]<a[1]*r[0]?-1:1)*Math.acos(vRatio(a,r))}function processArc(a,r,n,o,s,l,u,c,f,d,v){var g=f*(PI$7/180),y=mathCos$2(g)*(a-n)/2+mathSin$2(g)*(r-o)/2,_=-1*mathSin$2(g)*(a-n)/2+mathCos$2(g)*(r-o)/2,S=y*y/(u*u)+_*_/(c*c);S>1&&(u*=mathSqrt$1(S),c*=mathSqrt$1(S));var b=(s===l?-1:1)*mathSqrt$1((u*u*(c*c)-u*u*(_*_)-c*c*(y*y))/(u*u*(_*_)+c*c*(y*y)))||0,x=b*u*_/c,T=b*-c*y/u,A=(a+n)/2+mathCos$2(g)*x-mathSin$2(g)*T,w=(r+o)/2+mathSin$2(g)*x+mathCos$2(g)*T,C=vAngle([1,0],[(y-x)/u,(_-T)/c]),E=[(y-x)/u,(_-T)/c],P=[(-1*y-x)/u,(-1*_-T)/c],I=vAngle(E,P);if(vRatio(E,P)<=-1&&(I=PI$7),vRatio(E,P)>=1&&(I=0),I<0){var M=Math.round(I/PI$7*1e6)/1e6;I=PI$7*2+M%2*PI$7}v.addData(d,A,w,u,c,C,I,g,l)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(a){var r=new PathProxy;if(!a)return r;var n=0,o=0,s=n,l=o,u,c=PathProxy.CMD,f=a.match(commandReg);if(!f)return r;for(var d=0;d<f.length;d++){for(var v=f[d],g=v.charAt(0),y=void 0,_=v.match(numberReg$1)||[],S=_.length,b=0;b<S;b++)_[b]=parseFloat(_[b]);for(var x=0;x<S;){var T=void 0,A=void 0,w=void 0,C=void 0,E=void 0,P=void 0,I=void 0,M=n,R=o,O=void 0,$=void 0;switch(g){case"l":n+=_[x++],o+=_[x++],y=c.L,r.addData(y,n,o);break;case"L":n=_[x++],o=_[x++],y=c.L,r.addData(y,n,o);break;case"m":n+=_[x++],o+=_[x++],y=c.M,r.addData(y,n,o),s=n,l=o,g="l";break;case"M":n=_[x++],o=_[x++],y=c.M,r.addData(y,n,o),s=n,l=o,g="L";break;case"h":n+=_[x++],y=c.L,r.addData(y,n,o);break;case"H":n=_[x++],y=c.L,r.addData(y,n,o);break;case"v":o+=_[x++],y=c.L,r.addData(y,n,o);break;case"V":o=_[x++],y=c.L,r.addData(y,n,o);break;case"C":y=c.C,r.addData(y,_[x++],_[x++],_[x++],_[x++],_[x++],_[x++]),n=_[x-2],o=_[x-1];break;case"c":y=c.C,r.addData(y,_[x++]+n,_[x++]+o,_[x++]+n,_[x++]+o,_[x++]+n,_[x++]+o),n+=_[x-2],o+=_[x-1];break;case"S":T=n,A=o,O=r.len(),$=r.data,u===c.C&&(T+=n-$[O-4],A+=o-$[O-3]),y=c.C,M=_[x++],R=_[x++],n=_[x++],o=_[x++],r.addData(y,T,A,M,R,n,o);break;case"s":T=n,A=o,O=r.len(),$=r.data,u===c.C&&(T+=n-$[O-4],A+=o-$[O-3]),y=c.C,M=n+_[x++],R=o+_[x++],n+=_[x++],o+=_[x++],r.addData(y,T,A,M,R,n,o);break;case"Q":M=_[x++],R=_[x++],n=_[x++],o=_[x++],y=c.Q,r.addData(y,M,R,n,o);break;case"q":M=_[x++]+n,R=_[x++]+o,n+=_[x++],o+=_[x++],y=c.Q,r.addData(y,M,R,n,o);break;case"T":T=n,A=o,O=r.len(),$=r.data,u===c.Q&&(T+=n-$[O-4],A+=o-$[O-3]),n=_[x++],o=_[x++],y=c.Q,r.addData(y,T,A,n,o);break;case"t":T=n,A=o,O=r.len(),$=r.data,u===c.Q&&(T+=n-$[O-4],A+=o-$[O-3]),n+=_[x++],o+=_[x++],y=c.Q,r.addData(y,T,A,n,o);break;case"A":w=_[x++],C=_[x++],E=_[x++],P=_[x++],I=_[x++],M=n,R=o,n=_[x++],o=_[x++],y=c.A,processArc(M,R,n,o,P,I,w,C,E,y,r);break;case"a":w=_[x++],C=_[x++],E=_[x++],P=_[x++],I=_[x++],M=n,R=o,n+=_[x++],o+=_[x++],y=c.A,processArc(M,R,n,o,P,I,w,C,E,y,r);break}}(g==="z"||g==="Z")&&(y=c.Z,r.addData(y),n=s,o=l),u=y}return r.toStatic(),r}var SVGPath=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.applyTransform=function(n){},r}(Path);function isPathProxy(a){return a.setData!=null}function createPathOptions(a,r){var n=createPathProxyFromString(a),o=extend({},r);return o.buildPath=function(s){var l=isPathProxy(s);if(l&&s.canSave()){s.appendPath(n);var u=s.getContext();u&&s.rebuildPath(u,1)}else{var u=l?s.getContext():s;u&&n.rebuildPath(u,1)}},o.applyTransform=function(s){transformPath(n,s),this.dirtyShape()},o}function createFromString(a,r){return new SVGPath(createPathOptions(a,r))}function extendFromString(a,r){var n=createPathOptions(a,r),o=function(s){__extends(l,s);function l(u){var c=s.call(this,u)||this;return c.applyTransform=n.applyTransform,c.buildPath=n.buildPath,c}return l}(SVGPath);return o}function mergePath$1(a,r){for(var n=[],o=a.length,s=0;s<o;s++){var l=a[s];n.push(l.getUpdatedPathProxy(!0))}var u=new Path(r);return u.createPathProxy(),u.buildPath=function(c){if(isPathProxy(c)){c.appendPath(n);var f=c.getContext();f&&c.rebuildPath(f,1)}},u}function clonePath(a,r){r=r||{};var n=new Path;return a.shape&&n.setShape(a.shape),n.setStyle(a.style),r.bakeTransform?transformPath(n.path,a.getComputedTransform()):r.toLocal?n.setLocalTransform(a.getComputedTransform()):n.copyTransform(a),n.buildPath=a.buildPath,n.applyTransform=n.applyTransform,n.z=a.z,n.z2=a.z2,n.zlevel=a.zlevel,n}var CircleShape=function(){function a(){this.cx=0,this.cy=0,this.r=0}return a}(),Circle=function(a){__extends(r,a);function r(n){return a.call(this,n)||this}return r.prototype.getDefaultShape=function(){return new CircleShape},r.prototype.buildPath=function(n,o){n.moveTo(o.cx+o.r,o.cy),n.arc(o.cx,o.cy,o.r,0,Math.PI*2)},r}(Path);Circle.prototype.type="circle";var EllipseShape=function(){function a(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return a}(),Ellipse=function(a){__extends(r,a);function r(n){return a.call(this,n)||this}return r.prototype.getDefaultShape=function(){return new EllipseShape},r.prototype.buildPath=function(n,o){var s=.5522848,l=o.cx,u=o.cy,c=o.rx,f=o.ry,d=c*s,v=f*s;n.moveTo(l-c,u),n.bezierCurveTo(l-c,u-v,l-d,u-f,l,u-f),n.bezierCurveTo(l+d,u-f,l+c,u-v,l+c,u),n.bezierCurveTo(l+c,u+v,l+d,u+f,l,u+f),n.bezierCurveTo(l-d,u+f,l-c,u+v,l-c,u),n.closePath()},r}(Path);Ellipse.prototype.type="ellipse";var PI$6=Math.PI,PI2$3=PI$6*2,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$2=Math.abs,mathSqrt=Math.sqrt,mathMax$7=Math.max,mathMin$7=Math.min,e=1e-4;function intersect(a,r,n,o,s,l,u,c){var f=n-a,d=o-r,v=u-s,g=c-l,y=g*f-v*d;if(!(y*y<e))return y=(v*(r-l)-g*(a-s))/y,[a+y*f,r+y*d]}function computeCornerTangents(a,r,n,o,s,l,u){var c=a-n,f=r-o,d=(u?l:-l)/mathSqrt(c*c+f*f),v=d*f,g=-d*c,y=a+v,_=r+g,S=n+v,b=o+g,x=(y+S)/2,T=(_+b)/2,A=S-y,w=b-_,C=A*A+w*w,E=s-l,P=y*b-S*_,I=(w<0?-1:1)*mathSqrt(mathMax$7(0,E*E*C-P*P)),M=(P*w-A*I)/C,R=(-P*A-w*I)/C,O=(P*w+A*I)/C,$=(-P*A+w*I)/C,B=M-x,F=R-T,z=O-x,G=$-T;return B*B+F*F>z*z+G*G&&(M=O,R=$),{cx:M,cy:R,x0:-v,y0:-g,x1:M*(s/E-1),y1:R*(s/E-1)}}function normalizeCornerRadius(a){var r;if(isArray$1(a)){var n=a.length;if(!n)return a;n===1?r=[a[0],a[0],0,0]:n===2?r=[a[0],a[0],a[1],a[1]]:n===3?r=a.concat(a[2]):r=a}else r=[a,a,a,a];return r}function buildPath$1(a,r){var n,o=mathMax$7(r.r,0),s=mathMax$7(r.r0||0,0),l=o>0,u=s>0;if(!(!l&&!u)){if(l||(o=s,s=0),s>o){var c=o;o=s,s=c}var f=r.startAngle,d=r.endAngle;if(!(isNaN(f)||isNaN(d))){var v=r.cx,g=r.cy,y=!!r.clockwise,_=mathAbs$2(d-f),S=_>PI2$3&&_%PI2$3;if(S>e&&(_=S),!(o>e))a.moveTo(v,g);else if(_>PI2$3-e)a.moveTo(v+o*mathCos$1(f),g+o*mathSin$1(f)),a.arc(v,g,o,f,d,!y),s>e&&(a.moveTo(v+s*mathCos$1(d),g+s*mathSin$1(d)),a.arc(v,g,s,d,f,y));else{var b=void 0,x=void 0,T=void 0,A=void 0,w=void 0,C=void 0,E=void 0,P=void 0,I=void 0,M=void 0,R=void 0,O=void 0,$=void 0,B=void 0,F=void 0,z=void 0,G=o*mathCos$1(f),D=o*mathSin$1(f),V=s*mathCos$1(d),L=s*mathSin$1(d),N=_>e;if(N){var U=r.cornerRadius;U&&(n=normalizeCornerRadius(U),b=n[0],x=n[1],T=n[2],A=n[3]);var H=mathAbs$2(o-s)/2;if(w=mathMin$7(H,T),C=mathMin$7(H,A),E=mathMin$7(H,b),P=mathMin$7(H,x),R=I=mathMax$7(w,C),O=M=mathMax$7(E,P),(I>e||M>e)&&($=o*mathCos$1(d),B=o*mathSin$1(d),F=s*mathCos$1(f),z=s*mathSin$1(f),_<PI$6)){var q=intersect(G,D,F,z,$,B,V,L);if(q){var Z=G-q[0],ee=D-q[1],ne=$-q[0],ue=B-q[1],K=1/mathSin$1(mathACos((Z*ne+ee*ue)/(mathSqrt(Z*Z+ee*ee)*mathSqrt(ne*ne+ue*ue)))/2),J=mathSqrt(q[0]*q[0]+q[1]*q[1]);R=mathMin$7(I,(o-J)/(K+1)),O=mathMin$7(M,(s-J)/(K-1))}}}if(!N)a.moveTo(v+G,g+D);else if(R>e){var X=mathMin$7(T,R),ie=mathMin$7(A,R),te=computeCornerTangents(F,z,G,D,o,X,y),W=computeCornerTangents($,B,V,L,o,ie,y);a.moveTo(v+te.cx+te.x0,g+te.cy+te.y0),R<I&&X===ie?a.arc(v+te.cx,g+te.cy,R,mathATan2(te.y0,te.x0),mathATan2(W.y0,W.x0),!y):(X>0&&a.arc(v+te.cx,g+te.cy,X,mathATan2(te.y0,te.x0),mathATan2(te.y1,te.x1),!y),a.arc(v,g,o,mathATan2(te.cy+te.y1,te.cx+te.x1),mathATan2(W.cy+W.y1,W.cx+W.x1),!y),ie>0&&a.arc(v+W.cx,g+W.cy,ie,mathATan2(W.y1,W.x1),mathATan2(W.y0,W.x0),!y))}else a.moveTo(v+G,g+D),a.arc(v,g,o,f,d,!y);if(!(s>e)||!N)a.lineTo(v+V,g+L);else if(O>e){var X=mathMin$7(b,O),ie=mathMin$7(x,O),te=computeCornerTangents(V,L,$,B,s,-ie,y),W=computeCornerTangents(G,D,F,z,s,-X,y);a.lineTo(v+te.cx+te.x0,g+te.cy+te.y0),O<M&&X===ie?a.arc(v+te.cx,g+te.cy,O,mathATan2(te.y0,te.x0),mathATan2(W.y0,W.x0),!y):(ie>0&&a.arc(v+te.cx,g+te.cy,ie,mathATan2(te.y0,te.x0),mathATan2(te.y1,te.x1),!y),a.arc(v,g,s,mathATan2(te.cy+te.y1,te.cx+te.x1),mathATan2(W.cy+W.y1,W.cx+W.x1),y),X>0&&a.arc(v+W.cx,g+W.cy,X,mathATan2(W.y1,W.x1),mathATan2(W.y0,W.x0),!y))}else a.lineTo(v+V,g+L),a.arc(v,g,s,d,f,y)}a.closePath()}}}var SectorShape=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return a}(),Sector=function(a){__extends(r,a);function r(n){return a.call(this,n)||this}return r.prototype.getDefaultShape=function(){return new SectorShape},r.prototype.buildPath=function(n,o){buildPath$1(n,o)},r.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},r}(Path);Sector.prototype.type="sector";var RingShape=function(){function a(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return a}(),Ring=function(a){__extends(r,a);function r(n){return a.call(this,n)||this}return r.prototype.getDefaultShape=function(){return new RingShape},r.prototype.buildPath=function(n,o){var s=o.cx,l=o.cy,u=Math.PI*2;n.moveTo(s+o.r,l),n.arc(s,l,o.r,0,u,!1),n.moveTo(s+o.r0,l),n.arc(s,l,o.r0,0,u,!0)},r}(Path);Ring.prototype.type="ring";function smoothBezier(a,r,n,o){var s=[],l=[],u=[],c=[],f,d,v,g;if(o){v=[1/0,1/0],g=[-1/0,-1/0];for(var y=0,_=a.length;y<_;y++)min$1(v,v,a[y]),max$1(g,g,a[y]);min$1(v,v,o[0]),max$1(g,g,o[1])}for(var y=0,_=a.length;y<_;y++){var S=a[y];if(n)f=a[y?y-1:_-1],d=a[(y+1)%_];else if(y===0||y===_-1){s.push(clone$3(a[y]));continue}else f=a[y-1],d=a[y+1];sub(l,d,f),scale$2(l,l,r);var b=distance(S,f),x=distance(S,d),T=b+x;T!==0&&(b/=T,x/=T),scale$2(u,l,-b),scale$2(c,l,x);var A=add([],S,u),w=add([],S,c);o&&(max$1(A,A,v),min$1(A,A,g),max$1(w,w,v),min$1(w,w,g)),s.push(A),s.push(w)}return n&&s.push(s.shift()),s}function buildPath(a,r,n){var o=r.smooth,s=r.points;if(s&&s.length>=2){if(o){var l=smoothBezier(s,o,n,r.smoothConstraint);a.moveTo(s[0][0],s[0][1]);for(var u=s.length,c=0;c<(n?u:u-1);c++){var f=l[c*2],d=l[c*2+1],v=s[(c+1)%u];a.bezierCurveTo(f[0],f[1],d[0],d[1],v[0],v[1])}}else{a.moveTo(s[0][0],s[0][1]);for(var c=1,g=s.length;c<g;c++)a.lineTo(s[c][0],s[c][1])}n&&a.closePath()}}var PolygonShape=function(){function a(){this.points=null,this.smooth=0,this.smoothConstraint=null}return a}(),Polygon=function(a){__extends(r,a);function r(n){return a.call(this,n)||this}return r.prototype.getDefaultShape=function(){return new PolygonShape},r.prototype.buildPath=function(n,o){buildPath(n,o,!0)},r}(Path);Polygon.prototype.type="polygon";var PolylineShape=function(){function a(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return a}(),Polyline$1=function(a){__extends(r,a);function r(n){return a.call(this,n)||this}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new PolylineShape},r.prototype.buildPath=function(n,o){buildPath(n,o,!1)},r}(Path);Polyline$1.prototype.type="polyline";var subPixelOptimizeOutputShape={},LineShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}(),Line$1=function(a){__extends(r,a);function r(n){return a.call(this,n)||this}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new LineShape},r.prototype.buildPath=function(n,o){var s,l,u,c;if(this.subPixelOptimize){var f=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,o,this.style);s=f.x1,l=f.y1,u=f.x2,c=f.y2}else s=o.x1,l=o.y1,u=o.x2,c=o.y2;var d=o.percent;d!==0&&(n.moveTo(s,l),d<1&&(u=s*(1-d)+u*d,c=l*(1-d)+c*d),n.lineTo(u,c))},r.prototype.pointAt=function(n){var o=this.shape;return[o.x1*(1-n)+o.x2*n,o.y1*(1-n)+o.y2*n]},r}(Path);Line$1.prototype.type="line";var out=[],BezierCurveShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return a}();function someVectorAt(a,r,n){var o=a.cpx2,s=a.cpy2;return o!=null||s!=null?[(n?cubicDerivativeAt:cubicAt)(a.x1,a.cpx1,a.cpx2,a.x2,r),(n?cubicDerivativeAt:cubicAt)(a.y1,a.cpy1,a.cpy2,a.y2,r)]:[(n?quadraticDerivativeAt:quadraticAt$1)(a.x1,a.cpx1,a.x2,r),(n?quadraticDerivativeAt:quadraticAt$1)(a.y1,a.cpy1,a.y2,r)]}var BezierCurve=function(a){__extends(r,a);function r(n){return a.call(this,n)||this}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new BezierCurveShape},r.prototype.buildPath=function(n,o){var s=o.x1,l=o.y1,u=o.x2,c=o.y2,f=o.cpx1,d=o.cpy1,v=o.cpx2,g=o.cpy2,y=o.percent;y!==0&&(n.moveTo(s,l),v==null||g==null?(y<1&&(quadraticSubdivide(s,f,u,y,out),f=out[1],u=out[2],quadraticSubdivide(l,d,c,y,out),d=out[1],c=out[2]),n.quadraticCurveTo(f,d,u,c)):(y<1&&(cubicSubdivide(s,f,v,u,y,out),f=out[1],v=out[2],u=out[3],cubicSubdivide(l,d,g,c,y,out),d=out[1],g=out[2],c=out[3]),n.bezierCurveTo(f,d,v,g,u,c)))},r.prototype.pointAt=function(n){return someVectorAt(this.shape,n,!1)},r.prototype.tangentAt=function(n){var o=someVectorAt(this.shape,n,!0);return normalize$3(o,o)},r}(Path);BezierCurve.prototype.type="bezier-curve";var ArcShape=function(){function a(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),Arc=function(a){__extends(r,a);function r(n){return a.call(this,n)||this}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new ArcShape},r.prototype.buildPath=function(n,o){var s=o.cx,l=o.cy,u=Math.max(o.r,0),c=o.startAngle,f=o.endAngle,d=o.clockwise,v=Math.cos(c),g=Math.sin(c);n.moveTo(v*u+s,g*u+l),n.arc(s,l,u,c,f,!d)},r}(Path);Arc.prototype.type="arc";var CompoundPath=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type="compound",n}return r.prototype._updatePathDirty=function(){for(var n=this.shape.paths,o=this.shapeChanged(),s=0;s<n.length;s++)o=o||n[s].shapeChanged();o&&this.dirtyShape()},r.prototype.beforeBrush=function(){this._updatePathDirty();for(var n=this.shape.paths||[],o=this.getGlobalScale(),s=0;s<n.length;s++)n[s].path||n[s].createPathProxy(),n[s].path.setScale(o[0],o[1],n[s].segmentIgnoreThreshold)},r.prototype.buildPath=function(n,o){for(var s=o.paths||[],l=0;l<s.length;l++)s[l].buildPath(n,s[l].shape,!0)},r.prototype.afterBrush=function(){for(var n=this.shape.paths||[],o=0;o<n.length;o++)n[o].pathUpdated()},r.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path.prototype.getBoundingRect.call(this)},r}(Path),Gradient=function(){function a(r){this.colorStops=r||[]}return a.prototype.addColorStop=function(r,n){this.colorStops.push({offset:r,color:n})},a}(),LinearGradient=function(a){__extends(r,a);function r(n,o,s,l,u,c){var f=a.call(this,u)||this;return f.x=n??0,f.y=o??0,f.x2=s??1,f.y2=l??0,f.type="linear",f.global=c||!1,f}return r}(Gradient),RadialGradient=function(a){__extends(r,a);function r(n,o,s,l,u){var c=a.call(this,l)||this;return c.x=n??.5,c.y=o??.5,c.r=s??.5,c.type="radial",c.global=u||!1,c}return r}(Gradient),mathMin$6=Math.min,mathMax$6=Math.max,mathAbs$1=Math.abs,_extent=[0,0],_extent2=[0,0],_intersectCtx=createIntersectContext(),_minTv=_intersectCtx.minTv,_maxTv=_intersectCtx.maxTv,OrientedBoundingRect=function(){function a(r,n){this._corners=[],this._axes=[],this._origin=[0,0];for(var o=0;o<4;o++)this._corners[o]=new Point;for(var o=0;o<2;o++)this._axes[o]=new Point;r&&this.fromBoundingRect(r,n)}return a.prototype.fromBoundingRect=function(r,n){var o=this._corners,s=this._axes,l=r.x,u=r.y,c=l+r.width,f=u+r.height;if(o[0].set(l,u),o[1].set(c,u),o[2].set(c,f),o[3].set(l,f),n)for(var d=0;d<4;d++)o[d].transform(n);Point.sub(s[0],o[1],o[0]),Point.sub(s[1],o[3],o[0]),s[0].normalize(),s[1].normalize();for(var d=0;d<2;d++)this._origin[d]=s[d].dot(o[0])},a.prototype.intersect=function(r,n,o){var s=!0,l=!n;return n&&Point.set(n,0,0),_intersectCtx.reset(o,!l),!this._intersectCheckOneSide(this,r,l,1)&&(s=!1,l)||!this._intersectCheckOneSide(r,this,l,-1)&&(s=!1,l)||!l&&!_intersectCtx.negativeSize&&Point.copy(n,s?_intersectCtx.useDir?_intersectCtx.dirMinTv:_minTv:_maxTv),s},a.prototype._intersectCheckOneSide=function(r,n,o,s){for(var l=!0,u=0;u<2;u++){var c=r._axes[u];if(r._getProjMinMaxOnAxis(u,r._corners,_extent),r._getProjMinMaxOnAxis(u,n._corners,_extent2),_intersectCtx.negativeSize||_extent[1]<_extent2[0]||_extent[0]>_extent2[1]){if(l=!1,_intersectCtx.negativeSize||o)return l;var f=mathAbs$1(_extent2[0]-_extent[1]),d=mathAbs$1(_extent[0]-_extent2[1]);mathMin$6(f,d)>_maxTv.len()&&(f<d?Point.scale(_maxTv,c,-f*s):Point.scale(_maxTv,c,d*s))}else if(!o){var f=mathAbs$1(_extent2[0]-_extent[1]),d=mathAbs$1(_extent[0]-_extent2[1]);(_intersectCtx.useDir||mathMin$6(f,d)<_minTv.len())&&((f<d||!_intersectCtx.bidirectional)&&(Point.scale(_minTv,c,f*s),_intersectCtx.useDir&&_intersectCtx.calcDirMTV()),(f>=d||!_intersectCtx.bidirectional)&&(Point.scale(_minTv,c,-d*s),_intersectCtx.useDir&&_intersectCtx.calcDirMTV()))}}return l},a.prototype._getProjMinMaxOnAxis=function(r,n,o){for(var s=this._axes[r],l=this._origin,u=n[0].dot(s)+l[r],c=u,f=u,d=1;d<n.length;d++){var v=n[d].dot(s)+l[r];c=mathMin$6(v,c),f=mathMax$6(v,f)}o[0]=c+_intersectCtx.touchThreshold,o[1]=f-_intersectCtx.touchThreshold,_intersectCtx.negativeSize=o[1]<o[0]},a}(),m=[],IncrementalDisplayable=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.notClear=!0,n.incremental=!0,n._displayables=[],n._temporaryDisplayables=[],n._cursor=0,n}return r.prototype.traverse=function(n,o){n.call(o,this)},r.prototype.useStyle=function(){this.style={}},r.prototype.getCursor=function(){return this._cursor},r.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},r.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},r.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},r.prototype.addDisplayable=function(n,o){o?this._temporaryDisplayables.push(n):this._displayables.push(n),this.markRedraw()},r.prototype.addDisplayables=function(n,o){o=o||!1;for(var s=0;s<n.length;s++)this.addDisplayable(n[s],o)},r.prototype.getDisplayables=function(){return this._displayables},r.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},r.prototype.eachPendingDisplayable=function(n){for(var o=this._cursor;o<this._displayables.length;o++)n&&n(this._displayables[o]);for(var o=0;o<this._temporaryDisplayables.length;o++)n&&n(this._temporaryDisplayables[o])},r.prototype.update=function(){this.updateTransform();for(var n=this._cursor;n<this._displayables.length;n++){var o=this._displayables[n];o.parent=this,o.update(),o.parent=null}for(var n=0;n<this._temporaryDisplayables.length;n++){var o=this._temporaryDisplayables[n];o.parent=this,o.update(),o.parent=null}},r.prototype.getBoundingRect=function(){if(!this._rect){for(var n=new BoundingRect(1/0,1/0,-1/0,-1/0),o=0;o<this._displayables.length;o++){var s=this._displayables[o],l=s.getBoundingRect().clone();s.needLocalTransform()&&l.applyTransform(s.getLocalTransform(m)),n.union(l)}this._rect=n}return this._rect},r.prototype.contain=function(n,o){var s=this.transformCoordToLocal(n,o),l=this.getBoundingRect();if(l.contain(s[0],s[1]))for(var u=0;u<this._displayables.length;u++){var c=this._displayables[u];if(c.contain(n,o))return!0}return!1},r}(Displayable),transitionStore=makeInner();function getAnimationConfig(a,r,n,o,s){var l;if(r&&r.ecModel){var u=r.ecModel.getUpdatePayload();l=u&&u.animation}var c=r&&r.isAnimationEnabled(),f=a==="update";if(c){var d=void 0,v=void 0,g=void 0;o?(d=retrieve2(o.duration,200),v=retrieve2(o.easing,"cubicOut"),g=0):(d=r.getShallow(f?"animationDurationUpdate":"animationDuration"),v=r.getShallow(f?"animationEasingUpdate":"animationEasing"),g=r.getShallow(f?"animationDelayUpdate":"animationDelay")),l&&(l.duration!=null&&(d=l.duration),l.easing!=null&&(v=l.easing),l.delay!=null&&(g=l.delay)),isFunction(g)&&(g=g(n,s)),isFunction(d)&&(d=d(n));var y={duration:d||0,delay:g,easing:v};return y}else return null}function animateOrSetProps(a,r,n,o,s,l,u){var c=!1,f;isFunction(s)?(u=l,l=s,s=null):isObject$3(s)&&(l=s.cb,u=s.during,c=s.isFrom,f=s.removeOpt,s=s.dataIndex);var d=a==="leave";d||r.stopAnimation("leave");var v=getAnimationConfig(a,o,s,d?f||{}:null,o&&o.getAnimationDelayParams?o.getAnimationDelayParams(r,s):null);if(v&&v.duration>0){var g=v.duration,y=v.delay,_=v.easing,S={duration:g,delay:y||0,easing:_,done:l,force:!!l||!!u,setToFinal:!d,scope:a,during:u};c?r.animateFrom(n,S):r.animateTo(n,S)}else r.stopAnimation(),!c&&r.attr(n),u&&u(1),l&&l()}function updateProps$1(a,r,n,o,s,l){animateOrSetProps("update",a,r,n,o,s,l)}function initProps(a,r,n,o,s,l){animateOrSetProps("enter",a,r,n,o,s,l)}function isElementRemoved(a){if(!a.__zr)return!0;for(var r=0;r<a.animators.length;r++){var n=a.animators[r];if(n.scope==="leave")return!0}return!1}function removeElement(a,r,n,o,s,l){isElementRemoved(a)||animateOrSetProps("leave",a,r,n,o,s,l)}function fadeOutDisplayable(a,r,n,o){a.removeTextContent(),a.removeTextGuideLine(),removeElement(a,{style:{opacity:0}},r,n,o)}function removeElementWithFadeOut(a,r,n){function o(){a.parent&&a.parent.remove(a)}a.isGroup?a.traverse(function(s){s.isGroup||fadeOutDisplayable(s,r,n,o)}):fadeOutDisplayable(a,r,n,o)}function saveOldStyle(a){transitionStore(a).oldStyle=a.style}function getOldStyle(a){return transitionStore(a).oldStyle}var _customShapeMap={},XY$2=["x","y"],WH$2=["width","height"];function extendShape(a){return Path.extend(a)}var extendPathFromString=extendFromString;function extendPath(a,r){return extendPathFromString(a,r)}function registerShape(a,r){_customShapeMap[a]=r}function getShapeClass(a){if(_customShapeMap.hasOwnProperty(a))return _customShapeMap[a]}function makePath(a,r,n,o){var s=createFromString(a,r);return n&&(o==="center"&&(n=centerGraphic(n,s.getBoundingRect())),resizePath(s,n)),s}function makeImage(a,r,n){var o=new ZRImage({style:{image:a,x:r.x,y:r.y,width:r.width,height:r.height},onload:function(s){if(n==="center"){var l={width:s.width,height:s.height};o.setStyle(centerGraphic(r,l))}}});return o}function centerGraphic(a,r){var n=r.width/r.height,o=a.height*n,s;o<=a.width?s=a.height:(o=a.width,s=o/n);var l=a.x+a.width/2,u=a.y+a.height/2;return{x:l-o/2,y:u-s/2,width:o,height:s}}var mergePath=mergePath$1;function resizePath(a,r){if(a.applyTransform){var n=a.getBoundingRect(),o=n.calculateTransform(r);a.applyTransform(o)}}function subPixelOptimizeLine(a,r){return subPixelOptimizeLine$1(a,a,{lineWidth:r}),a}function subPixelOptimizeRect(a,r){return subPixelOptimizeRect$1(a,a,r),a}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(a,r){for(var n=identity([]);a&&a!==r;)mul(n,a.getLocalTransform(),n),a=a.parent;return n}function applyTransform(a,r,n){return r&&!isArrayLike(r)&&(r=Transformable.getLocalTransform(r)),n&&(r=invert([],r)),applyTransform$1([],a,r)}function transformDirection(a,r,n){var o=r[4]===0||r[5]===0||r[0]===0?1:mathAbs$4(2*r[4]/r[0]),s=r[4]===0||r[5]===0||r[2]===0?1:mathAbs$4(2*r[4]/r[2]),l=[a==="left"?-o:a==="right"?o:0,a==="top"?-s:a==="bottom"?s:0];return l=applyTransform(l,r,n),mathAbs$4(l[0])>mathAbs$4(l[1])?l[0]>0?"right":"left":l[1]>0?"bottom":"top"}function isNotGroup(a){return!a.isGroup}function isPath$1(a){return a.shape!=null}function groupTransition(a,r,n){if(!a||!r)return;function o(u){var c={};return u.traverse(function(f){isNotGroup(f)&&f.anid&&(c[f.anid]=f)}),c}function s(u){var c={x:u.x,y:u.y,rotation:u.rotation};return isPath$1(u)&&(c.shape=clone$4(u.shape)),c}var l=o(a);r.traverse(function(u){if(isNotGroup(u)&&u.anid){var c=l[u.anid];if(c){var f=s(u);u.attr(s(c)),updateProps$1(u,f,n,getECData(u).dataIndex)}}})}function clipPointsByRect(a,r){return map$1(a,function(n){var o=n[0];o=mathMax$a(o,r.x),o=mathMin$a(o,r.x+r.width);var s=n[1];return s=mathMax$a(s,r.y),s=mathMin$a(s,r.y+r.height),[o,s]})}function clipRectByRect(a,r){var n=mathMax$a(a.x,r.x),o=mathMin$a(a.x+a.width,r.x+r.width),s=mathMax$a(a.y,r.y),l=mathMin$a(a.y+a.height,r.y+r.height);if(o>=n&&l>=s)return{x:n,y:s,width:o-n,height:l-s}}function createIcon(a,r,n){var o=extend({rectHover:!0},r),s=o.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},a)return a.indexOf("image://")===0?(s.image=a.slice(8),defaults(s,n),new ZRImage(o)):makePath(a.replace("path://",""),o,n,"center")}function linePolygonIntersect(a,r,n,o,s){for(var l=0,u=s[s.length-1];l<s.length;l++){var c=s[l];if(lineLineIntersect$1(a,r,n,o,c[0],c[1],u[0],u[1]))return!0;u=c}}function lineLineIntersect$1(a,r,n,o,s,l,u,c){var f=n-a,d=o-r,v=u-s,g=c-l,y=crossProduct2d$1(v,g,f,d);if(nearZero(y))return!1;var _=a-s,S=r-l,b=crossProduct2d$1(_,S,f,d)/y;if(b<0||b>1)return!1;var x=crossProduct2d$1(_,S,v,g)/y;return!(x<0||x>1)}function crossProduct2d$1(a,r,n,o){return a*o-n*r}function nearZero(a){return a<=1e-6&&a>=-1e-6}function expandOrShrinkRect(a,r,n,o,s){return r==null||(isNumber(r)?_tmpExpandRectDelta[0]=_tmpExpandRectDelta[1]=_tmpExpandRectDelta[2]=_tmpExpandRectDelta[3]=r:(_tmpExpandRectDelta[0]=r[0],_tmpExpandRectDelta[1]=r[1],_tmpExpandRectDelta[2]=r[2],_tmpExpandRectDelta[3]=r[3]),o&&(_tmpExpandRectDelta[0]=mathMax$a(0,_tmpExpandRectDelta[0]),_tmpExpandRectDelta[1]=mathMax$a(0,_tmpExpandRectDelta[1]),_tmpExpandRectDelta[2]=mathMax$a(0,_tmpExpandRectDelta[2]),_tmpExpandRectDelta[3]=mathMax$a(0,_tmpExpandRectDelta[3])),n&&(_tmpExpandRectDelta[0]=-_tmpExpandRectDelta[0],_tmpExpandRectDelta[1]=-_tmpExpandRectDelta[1],_tmpExpandRectDelta[2]=-_tmpExpandRectDelta[2],_tmpExpandRectDelta[3]=-_tmpExpandRectDelta[3]),expandRectOnOneDimension(a,_tmpExpandRectDelta,"x","width",3,1,s&&s[0]||0),expandRectOnOneDimension(a,_tmpExpandRectDelta,"y","height",0,2,s&&s[1]||0)),a}var _tmpExpandRectDelta=[0,0,0,0];function expandRectOnOneDimension(a,r,n,o,s,l,u){var c=r[l]+r[s],f=a[o];a[o]+=c,u=mathMax$a(0,mathMin$a(u,f)),a[o]<u?(a[o]=u,a[n]+=r[s]>=0?-r[s]:r[l]>=0?f+r[l]:mathAbs$4(c)>1e-8?(f-u)*r[s]/c:0):a[n]-=r[s]}function setTooltipConfig(a){var r=a.itemTooltipOption,n=a.componentModel,o=a.itemName,s=isString(r)?{formatter:r}:r,l=n.mainType,u=n.componentIndex,c={componentType:l,name:o,$vars:["name"]};c[l+"Index"]=u;var f=a.formatterParamsExtra;f&&each$f(keys(f),function(v){hasOwn(c,v)||(c[v]=f[v],c.$vars.push(v))});var d=getECData(a.el);d.componentMainType=l,d.componentIndex=u,d.tooltipConfig={name:o,option:defaults({content:o,encodeHTMLContent:!0,formatterParams:c},s)}}function traverseElement(a,r){var n;a.isGroup&&(n=r(a)),n||a.traverse(r)}function traverseElements(a,r){if(a)if(isArray$1(a))for(var n=0;n<a.length;n++)traverseElement(a[n],r);else traverseElement(a,r)}function isBoundingRectAxisAligned(a){return!a||mathAbs$4(a[1])<AXIS_ALIGN_EPSILON&&mathAbs$4(a[2])<AXIS_ALIGN_EPSILON||mathAbs$4(a[0])<AXIS_ALIGN_EPSILON&&mathAbs$4(a[3])<AXIS_ALIGN_EPSILON}var AXIS_ALIGN_EPSILON=1e-5;function ensureCopyRect(a,r){return a?BoundingRect.copy(a,r):r.clone()}function ensureCopyTransform(a,r){return r?copy(a||create$1(),r):void 0}function retrieveZInfo(a){return{z:a.get("z")||0,zlevel:a.get("zlevel")||0}}function calcZ2Range(a){var r=-1/0,n=1/0;traverseElement(a,function(l){o(l),o(l.getTextContent()),o(l.getTextGuideLine())});function o(l){if(!(!l||l.isGroup)){var u=l.currentStates;if(u.length)for(var c=0;c<u.length;c++)s(l.states[u[c]]);s(l)}}function s(l){if(l){var u=l.z2;u>r&&(r=u),u<n&&(n=u)}}return n>r&&(n=r=0),{min:n,max:r}}function traverseUpdateZ(a,r,n){doUpdateZ(a,r,n,-1/0)}function doUpdateZ(a,r,n,o){if(a.ignoreModelZ)return o;var s=a.getTextContent(),l=a.getTextGuideLine(),u=a.isGroup;if(u)for(var c=a.childrenRef(),f=0;f<c.length;f++)o=mathMax$a(doUpdateZ(c[f],r,n,o),o);else a.z=r,a.zlevel=n,o=mathMax$a(a.z2||0,o);if(s&&(s.z=r,s.zlevel=n,isFinite(o)&&(s.z2=o+2)),l){var d=a.textGuideLineConfig;l.z=r,l.zlevel=n,isFinite(o)&&(l.z2=o+(d&&d.showAbove?1:-1))}return o}registerShape("circle",Circle);registerShape("ellipse",Ellipse);registerShape("sector",Sector);registerShape("ring",Ring);registerShape("polygon",Polygon);registerShape("polyline",Polyline$1);registerShape("rect",Rect$2);registerShape("line",Line$1);registerShape("bezierCurve",BezierCurve);registerShape("arc",Arc);const graphic=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable,Line:Line$1,LinearGradient,OrientedBoundingRect,Path,Point,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,WH:WH$2,XY:XY$2,applyTransform,calcZ2Range,clipPointsByRect,clipRectByRect,createIcon,ensureCopyRect,ensureCopyTransform,expandOrShrinkRect,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,groupTransition,initProps,isBoundingRectAxisAligned,isElementRemoved,lineLineIntersect:lineLineIntersect$1,linePolygonIntersect,makeImage,makePath,mergePath,registerShape,removeElement,removeElementWithFadeOut,resizePath,retrieveZInfo,setTooltipConfig,subPixelOptimize,subPixelOptimizeLine,subPixelOptimizeRect,transformDirection,traverseElements,traverseUpdateZ,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(a,r){for(var n=0;n<SPECIAL_STATES.length;n++){var o=SPECIAL_STATES[n],s=r[o],l=a.ensureState(o);l.style=l.style||{},l.style.text=s}var u=a.currentStates.slice();a.clearStates(!0),a.setStyle({text:r.normal}),a.useStates(u,!0)}function getLabelText(a,r,n){var o=a.labelFetcher,s=a.labelDataIndex,l=a.labelDimIndex,u=r.normal,c;o&&(c=o.getFormattedLabel(s,"normal",null,l,u&&u.get("formatter"),n!=null?{interpolatedValue:n}:null)),c==null&&(c=isFunction(a.defaultText)?a.defaultText(s,a,n):a.defaultText);for(var f={normal:c},d=0;d<SPECIAL_STATES.length;d++){var v=SPECIAL_STATES[d],g=r[v];f[v]=retrieve2(o?o.getFormattedLabel(s,v,null,l,g&&g.get("formatter")):null,c)}return f}function setLabelStyle(a,r,n,o){n=n||EMPTY_OBJ;for(var s=a instanceof ZRText,l=!1,u=0;u<DISPLAY_STATES.length;u++){var c=r[DISPLAY_STATES[u]];if(c&&c.getShallow("show")){l=!0;break}}var f=s?a:a.getTextContent();if(l){s||(f||(f=new ZRText,a.setTextContent(f)),a.stateProxy&&(f.stateProxy=a.stateProxy));var d=getLabelText(n,r),v=r.normal,g=!!v.getShallow("show"),y=createTextStyle(v,o&&o.normal,n,!1,!s);y.text=d.normal,s||a.setTextConfig(createTextConfig(v,n,!1));for(var u=0;u<SPECIAL_STATES.length;u++){var _=SPECIAL_STATES[u],c=r[_];if(c){var S=f.ensureState(_),b=!!retrieve2(c.getShallow("show"),g);if(b!==g&&(S.ignore=!b),S.style=createTextStyle(c,o&&o[_],n,!0,!s),S.style.text=d[_],!s){var x=a.ensureState(_);x.textConfig=createTextConfig(c,n,!0)}}}f.silent=!!v.getShallow("silent"),f.style.x!=null&&(y.x=f.style.x),f.style.y!=null&&(y.y=f.style.y),f.ignore=!g,f.useStyle(y),f.dirty(),n.enableTextSetter&&(labelInner(f).setLabelText=function(T){var A=getLabelText(n,r,T);setLabelText(f,A)})}else f&&(f.ignore=!0);a.dirty()}function getLabelStatesModels(a,r){r=r||"label";for(var n={normal:a.getModel(r)},o=0;o<SPECIAL_STATES.length;o++){var s=SPECIAL_STATES[o];n[s]=a.getModel([s,r])}return n}function createTextStyle(a,r,n,o,s){var l={};return setTextStyleCommon(l,a,n,o,s),r&&extend(l,r),l}function createTextConfig(a,r,n){r=r||{};var o={},s,l=a.getShallow("rotate"),u=retrieve2(a.getShallow("distance"),n?null:5),c=a.getShallow("offset");return s=a.getShallow("position")||(n?null:"inside"),s==="outside"&&(s=r.defaultOutsidePosition||"top"),s!=null&&(o.position=s),c!=null&&(o.offset=c),l!=null&&(l*=Math.PI/180,o.rotation=l),u!=null&&(o.distance=u),o.outsideFill=a.get("color")==="inherit"?r.inheritColor||null:"auto",r.autoOverflowArea!=null&&(o.autoOverflowArea=r.autoOverflowArea),r.layoutRect!=null&&(o.layoutRect=r.layoutRect),o}function setTextStyleCommon(a,r,n,o,s){n=n||EMPTY_OBJ;var l=r.ecModel,u=l&&l.option.textStyle,c=getRichItemNames(r),f;if(c){f={};var d="richInheritPlainLabel",v=retrieve2(r.get(d),l?l.get(d):void 0);for(var g in c)if(c.hasOwnProperty(g)){var y=r.getModel(["rich",g]);setTokenTextStyle(f[g]={},y,u,r,v,n,o,s,!1,!0)}}f&&(a.rich=f);var _=r.get("overflow");_&&(a.overflow=_);var S=r.get("lineOverflow");S&&(a.lineOverflow=S);var b=a,x=r.get("minMargin");if(x!=null)x=isNumber(x)?x/2:0,b.margin=[x,x,x,x],b.__marginType=LabelMarginType.minMargin;else{var T=r.get("textMargin");T!=null&&(b.margin=normalizeCssArray$1(T),b.__marginType=LabelMarginType.textMargin)}setTokenTextStyle(a,r,u,null,null,n,o,s,!0,!1)}function getRichItemNames(a){for(var r;a&&a!==a.ecModel;){var n=(a.option||EMPTY_OBJ).rich;if(n){r=r||{};for(var o=keys(n),s=0;s<o.length;s++){var l=o[s];r[l]=1}}a=a.parentModel}return r}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(a,r,n,o,s,l,u,c,f,d){n=!u&&n||EMPTY_OBJ;var v=l&&l.inheritColor,g=r.getShallow("color"),y=r.getShallow("textBorderColor"),_=retrieve2(r.getShallow("opacity"),n.opacity);(g==="inherit"||g==="auto")&&(v?g=v:g=null),(y==="inherit"||y==="auto")&&(v?y=v:y=null),c||(g=g||n.color,y=y||n.textBorderColor),g!=null&&(a.fill=g),y!=null&&(a.stroke=y);var S=retrieve2(r.getShallow("textBorderWidth"),n.textBorderWidth);S!=null&&(a.lineWidth=S);var b=retrieve2(r.getShallow("textBorderType"),n.textBorderType);b!=null&&(a.lineDash=b);var x=retrieve2(r.getShallow("textBorderDashOffset"),n.textBorderDashOffset);x!=null&&(a.lineDashOffset=x),!u&&_==null&&!d&&(_=l&&l.defaultOpacity),_!=null&&(a.opacity=_),!u&&!c&&a.fill==null&&l.inheritColor&&(a.fill=l.inheritColor);for(var T=0;T<TEXT_PROPS_WITH_GLOBAL.length;T++){var A=TEXT_PROPS_WITH_GLOBAL[T],w=s!==!1&&o?retrieve3(r.getShallow(A),o.getShallow(A),n[A]):retrieve2(r.getShallow(A),n[A]);w!=null&&(a[A]=w)}for(var T=0;T<TEXT_PROPS_SELF.length;T++){var A=TEXT_PROPS_SELF[T],w=r.getShallow(A);w!=null&&(a[A]=w)}if(a.verticalAlign==null){var C=r.getShallow("baseline");C!=null&&(a.verticalAlign=C)}if(!f||!l.disableBox){for(var T=0;T<TEXT_PROPS_BOX.length;T++){var A=TEXT_PROPS_BOX[T],w=r.getShallow(A);w!=null&&(a[A]=w)}var E=r.getShallow("borderType");E!=null&&(a.borderDash=E),(a.backgroundColor==="auto"||a.backgroundColor==="inherit")&&v&&(a.backgroundColor=v),(a.borderColor==="auto"||a.borderColor==="inherit")&&v&&(a.borderColor=v)}}function getFont(a,r){var n=r&&r.getModel("textStyle");return trim$1([a.fontStyle||n&&n.getShallow("fontStyle")||"",a.fontWeight||n&&n.getShallow("fontWeight")||"",(a.fontSize||n&&n.getShallow("fontSize")||12)+"px",a.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(a,r,n,o){if(a){var s=labelInner(a);s.prevValue=s.value,s.value=n;var l=r.normal;s.valueAnimation=l.get("valueAnimation"),s.valueAnimation&&(s.precision=l.get("precision"),s.defaultInterpolatedText=o,s.statesModels=r)}}function animateLabelValue(a,r,n,o,s){var l=labelInner(a);if(!l.valueAnimation||l.prevValue===l.value)return;var u=l.defaultInterpolatedText,c=retrieve2(l.interpolatedValue,l.prevValue),f=l.value;function d(v){var g=interpolateRawValues(n,l.precision,c,f,v);l.interpolatedValue=v===1?null:g;var y=getLabelText({labelDataIndex:r,labelFetcher:s,defaultText:u?u(g):g+""},l.statesModels,g);setLabelText(a,y)}a.percent=0,(l.prevValue==null?initProps:updateProps$1)(a,{percent:1},o,r,null,d)}var LabelMarginType={minMargin:1,textMargin:2},PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText,TextStyleMixin=function(){function a(){}return a.prototype.getTextColor=function(r){var n=this.ecModel;return this.getShallow("color")||(!r&&n?n.get(PATH_COLOR):null)},a.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},a.prototype.getTextRect=function(r){for(var n={text:r,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},o=0;o<textStyleParams.length;o++)n[textStyleParams[o]]=this.getShallow(textStyleParams[o]);return tmpText.useStyle(n),tmpText.update(),tmpText.getBoundingRect()},a}(),LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=function(){function a(){}return a.prototype.getLineStyle=function(r){return getLineStyle(this,r)},a}(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=function(){function a(){}return a.prototype.getItemStyle=function(r,n){return getItemStyle(this,r,n)},a}(),Model=function(){function a(r,n,o){this.parentModel=n,this.ecModel=o,this.option=r}return a.prototype.init=function(r,n,o){},a.prototype.mergeOption=function(r,n){merge(this.option,r,!0)},a.prototype.get=function(r,n){return r==null?this.option:this._doGet(this.parsePath(r),!n&&this.parentModel)},a.prototype.getShallow=function(r,n){var o=this.option,s=o==null?o:o[r];if(s==null&&!n){var l=this.parentModel;l&&(s=l.getShallow(r))}return s},a.prototype.getModel=function(r,n){var o=r!=null,s=o?this.parsePath(r):null,l=o?this._doGet(s):this.option;return n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(s)),new a(l,n,this.ecModel)},a.prototype.isEmpty=function(){return this.option==null},a.prototype.restoreData=function(){},a.prototype.clone=function(){var r=this.constructor;return new r(clone$4(this.option))},a.prototype.parsePath=function(r){return typeof r=="string"?r.split("."):r},a.prototype.resolveParentPath=function(r){return r},a.prototype.isAnimationEnabled=function(){if(!env.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},a.prototype._doGet=function(r,n){var o=this.option;if(!r)return o;for(var s=0;s<r.length&&!(r[s]&&(o=o&&typeof o=="object"?o[r[s]]:null,o==null));s++);return o==null&&n&&(o=n._doGet(this.resolveParentPath(r),n.parentModel)),o},a}();enableClassExtend(Model);enableClassCheck(Model);mixin(Model,LineStyleMixin);mixin(Model,ItemStyleMixin);mixin(Model,AreaStyleMixin);mixin(Model,TextStyleMixin);var base=Math.round(Math.random()*10);function getUID(a){return[a||"",base++].join("_")}function enableSubTypeDefaulter(a){var r={};a.registerSubTypeDefaulter=function(n,o){var s=parseClassType(n);r[s.main]=o},a.determineSubType=function(n,o){var s=o.type;if(!s){var l=parseClassType(n).main;a.hasSubTypes(n)&&r[l]&&(s=r[l](o))}return s}}function enableTopologicalTravel(a,r){a.topologicalTravel=function(l,u,c,f){if(!l.length)return;var d=n(u),v=d.graph,g=d.noEntryList,y={};for(each$f(l,function(A){y[A]=!0});g.length;){var _=g.pop(),S=v[_],b=!!y[_];b&&(c.call(f,_,S.originalDeps.slice()),delete y[_]),each$f(S.successor,b?T:x)}each$f(y,function(){var A="";throw new Error(A)});function x(A){v[A].entryCount--,v[A].entryCount===0&&g.push(A)}function T(A){y[A]=!0,x(A)}};function n(l){var u={},c=[];return each$f(l,function(f){var d=o(u,f),v=d.originalDeps=r(f),g=s(v,l);d.entryCount=g.length,d.entryCount===0&&c.push(f),each$f(g,function(y){indexOf(d.predecessor,y)<0&&d.predecessor.push(y);var _=o(u,y);indexOf(_.successor,y)<0&&_.successor.push(f)})}),{graph:u,noEntryList:c}}function o(l,u){return l[u]||(l[u]={predecessor:[],successor:[]}),l[u]}function s(l,u){var c=[];return each$f(l,function(f){indexOf(u,f)>=0&&c.push(f)}),c}}function inheritDefaultOption(a,r){return merge(merge({},a,!0),r,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env.domSupported?function(){var a=(document.documentElement.lang||navigator.language||navigator.browserLanguage||DEFAULT_LOCALE).toUpperCase();return a.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE}():DEFAULT_LOCALE;function registerLocale(a,r){a=a.toUpperCase(),localeModels[a]=new Model(r),localeStorage[a]=r}function createLocaleObject(a){if(isString(a)){var r=localeStorage[a.toUpperCase()]||{};return a===LOCALE_ZH||a===LOCALE_EN?clone$4(r):merge(clone$4(r),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}else return merge(clone$4(a),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(a){return localeModels[a]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN);registerLocale(LOCALE_ZH,langZH);var _impl$1=null;function registerScaleBreakHelperImpl(a){_impl$1||(_impl$1=a)}function getScaleBreakHelper(){return _impl$1}var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,primaryTimeUnitFormatterMatchers={year:/({yyyy}|{yy})/,month:/({MMMM}|{MMM}|{MM}|{M})/,day:/({dd}|{d})/,hour:/({HH}|{H}|{hh}|{h})/,minute:/({mm}|{m})/,second:/({ss}|{s})/,millisecond:/({SSS}|{S})/},defaultFormatterSeed={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}"},defaultFullFormatter="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}",fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultFormatterSeed.hour,minute:fullDayFormatter+" "+defaultFormatterSeed.minute,second:fullDayFormatter+" "+defaultFormatterSeed.second,millisecond:defaultFullFormatter},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function parseTimeAxisLabelFormatter(a){return!isString(a)&&!isFunction(a)?parseTimeAxisLabelFormatterDictionary(a):a}function parseTimeAxisLabelFormatterDictionary(a){a=a||{};var r={},n=!0;return each$f(primaryTimeUnits,function(o){n&&(n=a[o]==null)}),each$f(primaryTimeUnits,function(o,s){var l=a[o];r[o]={};for(var u=null,c=s;c>=0;c--){var f=primaryTimeUnits[c],d=isObject$3(l)&&!isArray$1(l)?l[f]:l,v=void 0;isArray$1(d)?(v=d.slice(),u=v[0]||""):isString(d)?(u=d,v=[u]):(u==null?u=defaultFormatterSeed[o]:primaryTimeUnitFormatterMatchers[f].test(u)||(u=r[f][f][0]+" "+u),v=[u],n&&(v[1]="{primary|"+u+"}")),r[o][f]=v}}),r}function pad(a,r){return a+="","0000".substr(0,r-a.length)+a}function getPrimaryTimeUnit(a){switch(a){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return a}}function isPrimaryTimeUnit(a){return a===getPrimaryTimeUnit(a)}function getDefaultFormatPrecisionOfInterval(a){switch(a){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format(a,r,n,o){var s=parseDate(a),l=s[fullYearGetterName(n)](),u=s[monthGetterName(n)]()+1,c=Math.floor((u-1)/3)+1,f=s[dateGetterName(n)](),d=s["get"+(n?"UTC":"")+"Day"](),v=s[hoursGetterName(n)](),g=(v-1)%12+1,y=s[minutesGetterName(n)](),_=s[secondsGetterName(n)](),S=s[millisecondsGetterName(n)](),b=v>=12?"pm":"am",x=b.toUpperCase(),T=o instanceof Model?o:getLocaleModel(o||SYSTEM_LANG)||getDefaultLocaleModel(),A=T.getModel("time"),w=A.get("month"),C=A.get("monthAbbr"),E=A.get("dayOfWeek"),P=A.get("dayOfWeekAbbr");return(r||"").replace(/{a}/g,b+"").replace(/{A}/g,x+"").replace(/{yyyy}/g,l+"").replace(/{yy}/g,pad(l%100+"",2)).replace(/{Q}/g,c+"").replace(/{MMMM}/g,w[u-1]).replace(/{MMM}/g,C[u-1]).replace(/{MM}/g,pad(u,2)).replace(/{M}/g,u+"").replace(/{dd}/g,pad(f,2)).replace(/{d}/g,f+"").replace(/{eeee}/g,E[d]).replace(/{ee}/g,P[d]).replace(/{e}/g,d+"").replace(/{HH}/g,pad(v,2)).replace(/{H}/g,v+"").replace(/{hh}/g,pad(g+"",2)).replace(/{h}/g,g+"").replace(/{mm}/g,pad(y,2)).replace(/{m}/g,y+"").replace(/{ss}/g,pad(_,2)).replace(/{s}/g,_+"").replace(/{SSS}/g,pad(S,3)).replace(/{S}/g,S+"")}function leveledFormat(a,r,n,o,s){var l=null;if(isString(n))l=n;else if(isFunction(n)){var u={time:a.time,level:a.time.level},c=getScaleBreakHelper();c&&c.makeAxisLabelFormatterParamBreak(u,a.break),l=n(a.value,r,u)}else{var f=a.time;if(f){var d=n[f.lowerTimeUnit][f.upperTimeUnit];l=d[Math.min(f.level,d.length-1)]||""}else{var v=getUnitFromValue(a.value,s);l=n[v][v][0]}}return format(new Date(a.value),l,s,o)}function getUnitFromValue(a,r){var n=parseDate(a),o=n[monthGetterName(r)]()+1,s=n[dateGetterName(r)](),l=n[hoursGetterName(r)](),u=n[minutesGetterName(r)](),c=n[secondsGetterName(r)](),f=n[millisecondsGetterName(r)](),d=f===0,v=d&&c===0,g=v&&u===0,y=g&&l===0,_=y&&s===1,S=_&&o===1;return S?"year":_?"month":y?"day":g?"hour":v?"minute":d?"second":"millisecond"}function roundTime(a,r,n){switch(r){case"year":a[monthSetterName(n)](0);case"month":a[dateSetterName(n)](1);case"day":a[hoursSetterName(n)](0);case"hour":a[minutesSetterName(n)](0);case"minute":a[secondsSetterName(n)](0);case"second":a[millisecondsSetterName(n)](0)}return a}function fullYearGetterName(a){return a?"getUTCFullYear":"getFullYear"}function monthGetterName(a){return a?"getUTCMonth":"getMonth"}function dateGetterName(a){return a?"getUTCDate":"getDate"}function hoursGetterName(a){return a?"getUTCHours":"getHours"}function minutesGetterName(a){return a?"getUTCMinutes":"getMinutes"}function secondsGetterName(a){return a?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(a){return a?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(a){return a?"setUTCFullYear":"setFullYear"}function monthSetterName(a){return a?"setUTCMonth":"setMonth"}function dateSetterName(a){return a?"setUTCDate":"setDate"}function hoursSetterName(a){return a?"setUTCHours":"setHours"}function minutesSetterName(a){return a?"setUTCMinutes":"setMinutes"}function secondsSetterName(a){return a?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(a){return a?"setUTCMilliseconds":"setMilliseconds"}function addCommas(a){if(!isNumeric(a))return isString(a)?a:"-";var r=(a+"").split(".");return r[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(r.length>1?"."+r[1]:"")}function toCamelCase(a,r){return a=(a||"").toLowerCase().replace(/-(.)/g,function(n,o){return o.toUpperCase()}),r&&a&&(a=a.charAt(0).toUpperCase()+a.slice(1)),a}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(a,r,n){var o="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function s(v){return v&&trim$1(v)?v:"-"}function l(v){return!!(v!=null&&!isNaN(v)&&isFinite(v))}var u=r==="time",c=a instanceof Date;if(u||c){var f=u?parseDate(a):a;if(isNaN(+f)){if(c)return"-"}else return format(f,o,n)}if(r==="ordinal")return isStringSafe(a)?s(a):isNumber(a)&&l(a)?a+"":"-";var d=numericToNumber(a);return l(d)?addCommas(d):isStringSafe(a)?s(a):typeof a=="boolean"?a+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(a,r){return"{"+a+(r??"")+"}"};function formatTpl(a,r,n){isArray$1(r)||(r=[r]);var o=r.length;if(!o)return"";for(var s=r[0].$vars||[],l=0;l<s.length;l++){var u=TPL_VAR_ALIAS[l];a=a.replace(wrapVar(u),wrapVar(u,0))}for(var c=0;c<o;c++)for(var f=0;f<s.length;f++){var d=r[c][s[f]];a=a.replace(wrapVar(TPL_VAR_ALIAS[f],c),n?encodeHTML(d):d)}return a}function formatTplSimple(a,r,n){return each$f(r,function(o,s){a=a.replace("{"+s+"}",o)}),a}function getTooltipMarker(a,r){var n=isString(a)?{color:a,extraCssText:r}:a||{},o=n.color,s=n.type;r=n.extraCssText;var l=n.renderMode||"html";if(!o)return"";if(l==="html")return s==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(o)+";"+(r||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(o)+";"+(r||"")+'"></span>';var u=n.markerId||"markerX";return{renderMode:l,content:"{"+u+"|}  ",style:s==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:o}:{width:10,height:10,borderRadius:5,backgroundColor:o}}}function convertToColorString(a,r){return r=r||"transparent",isString(a)?a:isObject$3(a)&&a.colorStops&&(a.colorStops[0]||{}).color||r}function windowOpen(a,r){if(r==="_blank"||r==="blank"){var n=window.open();n.opener=null,n.location.href=a}else window.open(a,r)}var nonSeriesBoxCoordSysCreators={},normalCoordSysCreators={},CoordinateSystemManager=function(){function a(){this._normalMasterList=[],this._nonSeriesBoxMasterList=[]}return a.prototype.create=function(r,n){this._nonSeriesBoxMasterList=o(nonSeriesBoxCoordSysCreators),this._normalMasterList=o(normalCoordSysCreators);function o(s,l){var u=[];return each$f(s,function(c,f){var d=c.create(r,n);u=u.concat(d||[])}),u}},a.prototype.update=function(r,n){each$f(this._normalMasterList,function(o){o.update&&o.update(r,n)})},a.prototype.getCoordinateSystems=function(){return this._normalMasterList.concat(this._nonSeriesBoxMasterList)},a.register=function(r,n){if(r==="matrix"||r==="calendar"){nonSeriesBoxCoordSysCreators[r]=n;return}normalCoordSysCreators[r]=n},a.get=function(r){return normalCoordSysCreators[r]||nonSeriesBoxCoordSysCreators[r]},a}();function canBeNonSeriesBoxCoordSys(a){return!!nonSeriesBoxCoordSysCreators[a]}var BoxCoordinateSystemCoordFrom={coord:1,coord2:2};function registerLayOutOnCoordSysUsage(a){coordSysUseMap.set(a.fullType,{getCoord2:void 0}).getCoord2=a.getCoord2}var coordSysUseMap=createHashMap();function getCoordForBoxCoordSys(a){var r=a.getShallow("coord",!0),n=BoxCoordinateSystemCoordFrom.coord;if(r==null){var o=coordSysUseMap.get(a.type);o&&o.getCoord2&&(n=BoxCoordinateSystemCoordFrom.coord2,r=o.getCoord2(a))}return{coord:r,from:n}}var CoordinateSystemUsageKind={none:0,dataCoordSys:1,boxCoordSys:2};function decideCoordSysUsageKind(a,r){var n=a.getShallow("coordinateSystem"),o=a.getShallow("coordinateSystemUsage",!0),s=CoordinateSystemUsageKind.none;if(n){var l=a.mainType==="series";o==null&&(o=l?"data":"box"),o==="data"?(s=CoordinateSystemUsageKind.dataCoordSys,l||(s=CoordinateSystemUsageKind.none)):o==="box"&&(s=CoordinateSystemUsageKind.boxCoordSys,!l&&!canBeNonSeriesBoxCoordSys(n)&&(s=CoordinateSystemUsageKind.none))}return{coordSysType:n,kind:s}}function injectCoordSysByOption(a){var r=a.targetModel,n=a.coordSysType,o=a.coordSysProvider,s=a.isDefaultDataCoordSys;a.allowNotFound;var l=decideCoordSysUsageKind(r),u=l.kind,c=l.coordSysType;if(s&&u!==CoordinateSystemUsageKind.dataCoordSys&&(u=CoordinateSystemUsageKind.dataCoordSys,c=n),u===CoordinateSystemUsageKind.none||c!==n)return!1;var f=o(n,r);return f?(u===CoordinateSystemUsageKind.dataCoordSys?r.coordinateSystem=f:r.boxCoordinateSystem=f,!0):!1}var simpleCoordSysInjectionProvider=function(a,r){var n=r.getReferringComponents(a,SINGLE_REFERRING).models[0];return n&&n.coordinateSystem},each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(a,r,n,o,s){var l=0,u=0;o==null&&(o=1/0),s==null&&(s=1/0);var c=0;r.eachChild(function(f,d){var v=f.getBoundingRect(),g=r.childAt(d+1),y=g&&g.getBoundingRect(),_,S;if(a==="horizontal"){var b=v.width+(y?-y.x+v.x:0);_=l+b,_>o||f.newline?(l=0,_=b,u+=c+n,c=v.height):c=Math.max(c,v.height)}else{var x=v.height+(y?-y.y+v.y:0);S=u+x,S>s||f.newline?(l+=c+n,u=0,S=x,c=v.width):c=Math.max(c,v.width)}f.newline||(f.x=l,f.y=u,f.markRedraw(),a==="horizontal"?l=_+n:u=S+n)})}var box=boxLayout;curry$1(boxLayout,"vertical");curry$1(boxLayout,"horizontal");function getBoxLayoutParams(a,r){return{left:a.getShallow("left",r),top:a.getShallow("top",r),right:a.getShallow("right",r),bottom:a.getShallow("bottom",r),width:a.getShallow("width",r),height:a.getShallow("height",r)}}function getViewRectAndCenterForCircleLayout(a,r){var n=createBoxLayoutReference(a,r,{enableLayoutOnlyByCenter:!0}),o=a.getBoxLayoutParams(),s,l;if(n.type===BoxLayoutReferenceType.point)l=n.refPoint,s=getLayoutRect(o,{width:r.getWidth(),height:r.getHeight()});else{var u=a.get("center"),c=isArray$1(u)?u:[u,u];s=getLayoutRect(o,n.refContainer),l=n.boxCoordFrom===BoxCoordinateSystemCoordFrom.coord2?n.refPoint:[parsePercent(c[0],s.width)+s.x,parsePercent(c[1],s.height)+s.y]}return{viewRect:s,center:l}}function getCircleLayout(a,r){var n=getViewRectAndCenterForCircleLayout(a,r),o=n.viewRect,s=n.center,l=a.get("radius");isArray$1(l)||(l=[0,l]);var u=parsePercent(o.width,r.getWidth()),c=parsePercent(o.height,r.getHeight()),f=Math.min(u,c),d=parsePercent(l[0],f/2),v=parsePercent(l[1],f/2);return{cx:s[0],cy:s[1],r0:d,r:v,viewRect:o}}function getLayoutRect(a,r,n){n=normalizeCssArray(n||0);var o=r.width,s=r.height,l=parsePercent(a.left,o),u=parsePercent(a.top,s),c=parsePercent(a.right,o),f=parsePercent(a.bottom,s),d=parsePercent(a.width,o),v=parsePercent(a.height,s),g=n[2]+n[0],y=n[1]+n[3],_=a.aspect;switch(isNaN(d)&&(d=o-c-y-l),isNaN(v)&&(v=s-f-g-u),_!=null&&(isNaN(d)&&isNaN(v)&&(_>o/s?d=o*.8:v=s*.8),isNaN(d)&&(d=_*v),isNaN(v)&&(v=d/_)),isNaN(l)&&(l=o-c-d-y),isNaN(u)&&(u=s-f-v-g),a.left||a.right){case"center":l=o/2-d/2-n[3];break;case"right":l=o-d-y;break}switch(a.top||a.bottom){case"middle":case"center":u=s/2-v/2-n[0];break;case"bottom":u=s-v-g;break}l=l||0,u=u||0,isNaN(d)&&(d=o-y-l-(c||0)),isNaN(v)&&(v=s-g-u-(f||0));var S=new BoundingRect((r.x||0)+l+n[3],(r.y||0)+u+n[0],d,v);return S.margin=n,S}function applyPreserveAspect(a,r,n){var o=a.getShallow("preserveAspect",!0);if(!o)return r;var s=r.width/r.height;if(Math.abs(Math.atan(n)-Math.atan(s))<1e-9)return r;var l=a.getShallow("preserveAspectAlign",!0),u=a.getShallow("preserveAspectVerticalAlign",!0),c={width:r.width,height:r.height},f=o==="cover";return s>n&&!f||s<n&&f?(c.width=r.height*n,l==="left"?c.left=0:l==="right"?c.right=0:c.left="center"):(c.height=r.width/n,u==="top"?c.top=0:u==="bottom"?c.bottom=0:c.top="middle"),getLayoutRect(c,r)}var BoxLayoutReferenceType={rect:1,point:2};function createBoxLayoutReference(a,r,n){var o,s,l,u=a.boxCoordinateSystem,c;if(u){var f=getCoordForBoxCoordSys(a),d=f.coord,v=f.from;if(u.dataToLayout){l=BoxLayoutReferenceType.rect,c=v;var g=u.dataToLayout(d);o=g.contentRect||g.rect}else n&&n.enableLayoutOnlyByCenter&&u.dataToPoint&&(l=BoxLayoutReferenceType.point,c=v,s=u.dataToPoint(d))}return l==null&&(l=BoxLayoutReferenceType.rect),l===BoxLayoutReferenceType.rect&&(o||(o={x:0,y:0,width:r.getWidth(),height:r.getHeight()}),s=[o.x+o.width/2,o.y+o.height/2]),{type:l,refContainer:o,refPoint:s,boxCoordFrom:c}}function positionElement(a,r,n,o,s,l){var u=!s||!s.hv||s.hv[0],c=!s||!s.hv||s.hv[1],f=s&&s.boundingMode||"all";if(l=l||a,l.x=a.x,l.y=a.y,!u&&!c)return!1;var d;if(f==="raw")d=a.type==="group"?new BoundingRect(0,0,+r.width||0,+r.height||0):a.getBoundingRect();else if(d=a.getBoundingRect(),a.needLocalTransform()){var v=a.getLocalTransform();d=d.clone(),d.applyTransform(v)}var g=getLayoutRect(defaults({width:d.width,height:d.height},r),n,o),y=u?g.x-d.x:0,_=c?g.y-d.y:0;return f==="raw"?(l.x=y,l.y=_):(l.x+=y,l.y+=_),l===a&&a.markRedraw(),!0}function sizeCalculable(a,r){return a[HV_NAMES[r][0]]!=null||a[HV_NAMES[r][1]]!=null&&a[HV_NAMES[r][2]]!=null}function fetchLayoutMode(a){var r=a.layoutMode||a.constructor.layoutMode;return isObject$3(r)?r:r?{type:r}:null}function mergeLayoutParam(a,r,n){var o=n&&n.ignoreSize;!isArray$1(o)&&(o=[o,o]);var s=u(HV_NAMES[0],0),l=u(HV_NAMES[1],1);f(HV_NAMES[0],a,s),f(HV_NAMES[1],a,l);function u(d,v){var g={},y=0,_={},S=0,b=2;if(each$e(d,function(A){_[A]=a[A]}),each$e(d,function(A){hasOwn(r,A)&&(g[A]=_[A]=r[A]),c(g,A)&&y++,c(_,A)&&S++}),o[v])return c(r,d[1])?_[d[2]]=null:c(r,d[2])&&(_[d[1]]=null),_;if(S===b||!y)return _;if(y>=b)return g;for(var x=0;x<d.length;x++){var T=d[x];if(!hasOwn(g,T)&&hasOwn(a,T)){g[T]=a[T];break}}return g}function c(d,v){return d[v]!=null&&d[v]!=="auto"}function f(d,v,g){each$e(d,function(y){v[y]=g[y]})}}function getLayoutParams(a){return copyLayoutParams({},a)}function copyLayoutParams(a,r){return r&&a&&each$e(LOCATION_PARAMS,function(n){hasOwn(r,n)&&(a[n]=r[n])}),a}var inner$n=makeInner(),ComponentModel=function(a){__extends(r,a);function r(n,o,s){var l=a.call(this,n,o,s)||this;return l.uid=getUID("ec_cpt_model"),l}return r.prototype.init=function(n,o,s){this.mergeDefaultAndTheme(n,s)},r.prototype.mergeDefaultAndTheme=function(n,o){var s=fetchLayoutMode(this),l=s?getLayoutParams(n):{},u=o.getTheme();merge(n,u.get(this.mainType)),merge(n,this.getDefaultOption()),s&&mergeLayoutParam(n,l,s)},r.prototype.mergeOption=function(n,o){merge(this.option,n,!0);var s=fetchLayoutMode(this);s&&mergeLayoutParam(this.option,n,s)},r.prototype.optionUpdated=function(n,o){},r.prototype.getDefaultOption=function(){var n=this.constructor;if(!isExtendedClass(n))return n.defaultOption;var o=inner$n(this);if(!o.defaultOption){for(var s=[],l=n;l;){var u=l.prototype.defaultOption;u&&s.push(u),l=l.superClass}for(var c={},f=s.length-1;f>=0;f--)c=merge(c,s[f],!0);o.defaultOption=c}return o.defaultOption},r.prototype.getReferringComponents=function(n,o){var s=n+"Index",l=n+"Id";return queryReferringComponents(this.ecModel,n,{index:this.get(s,!0),id:this.get(l,!0)},o)},r.prototype.getBoxLayoutParams=function(){return getBoxLayoutParams(this,!1)},r.prototype.getZLevelKey=function(){return""},r.prototype.setZLevel=function(n){this.option.zlevel=n},r.protoInitialize=function(){var n=r.prototype;n.type="component",n.id="",n.name="",n.mainType="",n.subType="",n.componentIndex=0}(),r}(Model);mountExtend(ComponentModel,Model);enableClassManagement(ComponentModel);enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(a){var r=[];return each$f(ComponentModel.getClassesByMainType(a),function(n){r=r.concat(n.dependencies||n.prototype.dependencies||[])}),r=map$1(r,function(n){return parseClassType(n).main}),a!=="dataset"&&indexOf(r,"dataset")<=0&&r.unshift("dataset"),r}var tokens={color:{},darkColor:{},size:{}},color$1=tokens.color={theme:["#5070dd","#b6d634","#505372","#ff994d","#0ca8df","#ffd10a","#fb628b","#785db0","#3fbe95"],neutral00:"#fff",neutral05:"#f4f7fd",neutral10:"#e8ebf0",neutral15:"#dbdee4",neutral20:"#cfd2d7",neutral25:"#c3c5cb",neutral30:"#b7b9be",neutral35:"#aaacb2",neutral40:"#9ea0a5",neutral45:"#929399",neutral50:"#86878c",neutral55:"#797b7f",neutral60:"#6d6e73",neutral65:"#616266",neutral70:"#54555a",neutral75:"#48494d",neutral80:"#3c3c41",neutral85:"#303034",neutral90:"#232328",neutral95:"#17171b",neutral99:"#000",accent05:"#eff1f9",accent10:"#e0e4f2",accent15:"#d0d6ec",accent20:"#c0c9e6",accent25:"#b1bbdf",accent30:"#a1aed9",accent35:"#91a0d3",accent40:"#8292cc",accent45:"#7285c6",accent50:"#6578ba",accent55:"#5c6da9",accent60:"#536298",accent65:"#4a5787",accent70:"#404c76",accent75:"#374165",accent80:"#2e3654",accent85:"#252b43",accent90:"#1b2032",accent95:"#121521",transparent:"rgba(0,0,0,0)",highlight:"rgba(255,231,130,0.8)"};extend(color$1,{primary:color$1.neutral80,secondary:color$1.neutral70,tertiary:color$1.neutral60,quaternary:color$1.neutral50,disabled:color$1.neutral20,border:color$1.neutral30,borderTint:color$1.neutral20,borderShade:color$1.neutral40,background:color$1.neutral05,backgroundTint:"rgba(234,237,245,0.5)",backgroundTransparent:"rgba(255,255,255,0)",backgroundShade:color$1.neutral10,shadow:"rgba(0,0,0,0.2)",shadowTint:"rgba(129,130,136,0.2)",axisLine:color$1.neutral70,axisLineTint:color$1.neutral40,axisTick:color$1.neutral70,axisTickMinor:color$1.neutral60,axisLabel:color$1.neutral70,axisSplitLine:color$1.neutral15,axisMinorSplitLine:color$1.neutral05});for(var key in color$1)if(color$1.hasOwnProperty(key)){var hex=color$1[key];key==="theme"?tokens.darkColor.theme=color$1.theme.slice():key==="highlight"?tokens.darkColor.highlight="rgba(255,231,130,0.4)":key.indexOf("accent")===0?tokens.darkColor[key]=modifyHSL(hex,null,function(a){return a*.5},function(a){return Math.min(1,1.3-a)}):tokens.darkColor[key]=modifyHSL(hex,null,function(a){return a*.9},function(a){return 1-Math.pow(a,1.5)})}tokens.size={xxs:2,xs:5,s:10,m:15,l:20,xl:30,xxl:40,xxxl:50};var platform="";typeof navigator<"u"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)",themeColor=tokens.color.theme[0],lightThemeColor=modifyHSL(themeColor,null,null,.9);const globalDefault={darkMode:"auto",colorBy:"series",color:tokens.color.theme,gradientColor:[lightThemeColor,themeColor],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(a){innerGlobalModel(a).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(a,r,n){var o={},s=querySeriesUpstreamDatasetModel(r);if(!s||!a)return o;var l=[],u=[],c=r.ecModel,f=innerGlobalModel(c).datasetMap,d=s.uid+"_"+n.seriesLayoutBy,v,g;a=a.slice(),each$f(a,function(b,x){var T=isObject$3(b)?b:a[x]={name:b};T.type==="ordinal"&&v==null&&(v=x,g=S(T)),o[T.name]=[]});var y=f.get(d)||f.set(d,{categoryWayDim:g,valueWayDim:0});each$f(a,function(b,x){var T=b.name,A=S(b);if(v==null){var w=y.valueWayDim;_(o[T],w,A),_(u,w,A),y.valueWayDim+=A}else if(v===x)_(o[T],0,A),_(l,0,A);else{var w=y.categoryWayDim;_(o[T],w,A),_(u,w,A),y.categoryWayDim+=A}});function _(b,x,T){for(var A=0;A<T;A++)b.push(x+A)}function S(b){var x=b.dimsDef;return x?x.length:1}return l.length&&(o.itemName=l),u.length&&(o.seriesName=u),o}function makeSeriesEncodeForNameBased(a,r,n){var o={},s=querySeriesUpstreamDatasetModel(a);if(!s)return o;var l=r.sourceFormat,u=r.dimensionsDefine,c;(l===SOURCE_FORMAT_OBJECT_ROWS||l===SOURCE_FORMAT_KEYED_COLUMNS)&&each$f(u,function(v,g){(isObject$3(v)?v.name:v)==="name"&&(c=g)});var f=function(){for(var v={},g={},y=[],_=0,S=Math.min(5,n);_<S;_++){var b=doGuessOrdinal(r.data,l,r.seriesLayoutBy,u,r.startIndex,_);y.push(b);var x=b===BE_ORDINAL.Not;if(x&&v.v==null&&_!==c&&(v.v=_),(v.n==null||v.n===v.v||!x&&y[v.n]===BE_ORDINAL.Not)&&(v.n=_),T(v)&&y[v.n]!==BE_ORDINAL.Not)return v;x||(b===BE_ORDINAL.Might&&g.v==null&&_!==c&&(g.v=_),(g.n==null||g.n===g.v)&&(g.n=_))}function T(A){return A.v!=null&&A.n!=null}return T(v)?v:T(g)?g:null}();if(f){o.value=[f.v];var d=c??f.n;o.itemName=[d],o.seriesName=[d]}return o}function querySeriesUpstreamDatasetModel(a){var r=a.get("data",!0);if(!r)return queryReferringComponents(a.ecModel,"dataset",{index:a.get("datasetIndex",!0),id:a.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(a){return!a.get("transform",!0)&&!a.get("fromTransformResult",!0)?[]:queryReferringComponents(a.ecModel,"dataset",{index:a.get("fromDatasetIndex",!0),id:a.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(a,r){return doGuessOrdinal(a.data,a.sourceFormat,a.seriesLayoutBy,a.dimensionsDefine,a.startIndex,r)}function doGuessOrdinal(a,r,n,o,s,l){var u,c=5;if(isTypedArray(a))return BE_ORDINAL.Not;var f,d;if(o){var v=o[l];isObject$3(v)?(f=v.name,d=v.type):isString(v)&&(f=v)}if(d!=null)return d==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(r===SOURCE_FORMAT_ARRAY_ROWS){var g=a;if(n===SERIES_LAYOUT_BY_ROW){for(var y=g[l],_=0;_<(y||[]).length&&_<c;_++)if((u=C(y[s+_]))!=null)return u}else for(var _=0;_<g.length&&_<c;_++){var S=g[s+_];if(S&&(u=C(S[l]))!=null)return u}}else if(r===SOURCE_FORMAT_OBJECT_ROWS){var b=a;if(!f)return BE_ORDINAL.Not;for(var _=0;_<b.length&&_<c;_++){var x=b[_];if(x&&(u=C(x[f]))!=null)return u}}else if(r===SOURCE_FORMAT_KEYED_COLUMNS){var T=a;if(!f)return BE_ORDINAL.Not;var y=T[f];if(!y||isTypedArray(y))return BE_ORDINAL.Not;for(var _=0;_<y.length&&_<c;_++)if((u=C(y[_]))!=null)return u}else if(r===SOURCE_FORMAT_ORIGINAL)for(var A=a,_=0;_<A.length&&_<c;_++){var x=A[_],w=getDataItemValue(x);if(!isArray$1(w))return BE_ORDINAL.Not;if((u=C(w[l]))!=null)return u}function C(E){var P=isString(E);if(E!=null&&Number.isFinite(Number(E))&&E!=="")return P?BE_ORDINAL.Might:BE_ORDINAL.Not;if(P&&E!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function registerInternalOptionCreator(a,r){assert(internalOptionCreatorMap.get(a)==null&&r),internalOptionCreatorMap.set(a,r)}function concatInternalOptions(a,r,n){var o=internalOptionCreatorMap.get(r);if(!o)return n;var s=o(a);return s?n.concat(s):n}var innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=function(){function a(){}return a.prototype.getColorFromPalette=function(r,n,o){var s=normalizeToArray(this.get("color",!0)),l=this.get("colorLayer",!0);return getFromPalette(this,innerColor,s,l,r,n,o)},a.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},a}();function getDecalFromPalette(a,r,n,o){var s=normalizeToArray(a.get(["aria","decal","decals"]));return getFromPalette(a,innerDecal,s,null,r,n,o)}function getNearestPalette(a,r){for(var n=a.length,o=0;o<n;o++)if(a[o].length>r)return a[o];return a[n-1]}function getFromPalette(a,r,n,o,s,l,u){l=l||a;var c=r(l),f=c.paletteIdx||0,d=c.paletteNameMap=c.paletteNameMap||{};if(d.hasOwnProperty(s))return d[s];var v=u==null||!o?n:getNearestPalette(o,u);if(v=v||n,!(!v||!v.length)){var g=v[f];return s&&(d[s]=g),c.paletteIdx=(f+1)%v.length,g}}function clearPalette(a,r){r(a).paletteIdx=0,r(a).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,GlobalModel=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.init=function(n,o,s,l,u,c){l=l||{},this.option=null,this._theme=new Model(l),this._locale=new Model(u),this._optionManager=c},r.prototype.setOption=function(n,o,s){var l=normalizeSetOptionInput(o);this._optionManager.setOption(n,s,l),this._resetOption(null,l)},r.prototype.resetOption=function(n,o){return this._resetOption(n,normalizeSetOptionInput(o))},r.prototype._resetOption=function(n,o){var s=!1,l=this._optionManager;if(!n||n==="recreate"){var u=l.mountOption(n==="recreate");!this.option||n==="recreate"?initBase(this,u):(this.restoreData(),this._mergeOption(u,o)),s=!0}if((n==="timeline"||n==="media")&&this.restoreData(),!n||n==="recreate"||n==="timeline"){var c=l.getTimelineOption(this);c&&(s=!0,this._mergeOption(c,o))}if(!n||n==="recreate"||n==="media"){var f=l.getMediaOption(this);f.length&&each$f(f,function(d){s=!0,this._mergeOption(d,o)},this)}return s},r.prototype.mergeOption=function(n){this._mergeOption(n,null)},r.prototype._mergeOption=function(n,o){var s=this.option,l=this._componentsMap,u=this._componentsCount,c=[],f=createHashMap(),d=o&&o.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$f(n,function(g,y){g!=null&&(ComponentModel.hasClass(y)?y&&(c.push(y),f.set(y,!0)):s[y]=s[y]==null?clone$4(g):merge(s[y],g,!0))}),d&&d.each(function(g,y){ComponentModel.hasClass(y)&&!f.get(y)&&(c.push(y),f.set(y,!0))}),ComponentModel.topologicalTravel(c,ComponentModel.getAllClassMainTypes(),v,this);function v(g){var y=concatInternalOptions(this,g,normalizeToArray(n[g])),_=l.get(g),S=_?d&&d.get(g)?"replaceMerge":"normalMerge":"replaceAll",b=mappingToExists(_,y,S);setComponentTypeToKeyInfo(b,g,ComponentModel),s[g]=null,l.set(g,null),u.set(g,0);var x=[],T=[],A=0,w;each$f(b,function(C,E){var P=C.existing,I=C.newOption;if(!I)P&&(P.mergeOption({},this),P.optionUpdated({},!1));else{var M=g==="series",R=ComponentModel.getClass(g,C.keyInfo.subType,!M);if(!R)return;if(g==="tooltip"){if(w)return;w=!0}if(P&&P.constructor===R)P.name=C.keyInfo.name,P.mergeOption(I,this),P.optionUpdated(I,!1);else{var O=extend({componentIndex:E},C.keyInfo);P=new R(I,this,this,O),extend(P,O),C.brandNew&&(P.__requireNewView=!0),P.init(I,this,this),P.optionUpdated(null,!0)}}P?(x.push(P.option),T.push(P),A++):(x.push(void 0),T.push(void 0))},this),s[g]=x,l.set(g,T),u.set(g,A),g==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},r.prototype.getOption=function(){var n=clone$4(this.option);return each$f(n,function(o,s){if(ComponentModel.hasClass(s)){for(var l=normalizeToArray(o),u=l.length,c=!1,f=u-1;f>=0;f--)l[f]&&!isComponentIdInternal(l[f])?c=!0:(l[f]=null,!c&&u--);l.length=u,n[s]=l}}),delete n[OPTION_INNER_KEY],n},r.prototype.setTheme=function(n){this._theme=new Model(n),this._resetOption("recreate",null)},r.prototype.getTheme=function(){return this._theme},r.prototype.getLocaleModel=function(){return this._locale},r.prototype.setUpdatePayload=function(n){this._payload=n},r.prototype.getUpdatePayload=function(){return this._payload},r.prototype.getComponent=function(n,o){var s=this._componentsMap.get(n);if(s){var l=s[o||0];if(l)return l;if(o==null){for(var u=0;u<s.length;u++)if(s[u])return s[u]}}},r.prototype.queryComponents=function(n){var o=n.mainType;if(!o)return[];var s=n.index,l=n.id,u=n.name,c=this._componentsMap.get(o);if(!c||!c.length)return[];var f;return s!=null?(f=[],each$f(normalizeToArray(s),function(d){c[d]&&f.push(c[d])})):l!=null?f=queryByIdOrName("id",l,c):u!=null?f=queryByIdOrName("name",u,c):f=filter(c,function(d){return!!d}),filterBySubType(f,n)},r.prototype.findComponents=function(n){var o=n.query,s=n.mainType,l=c(o),u=l?this.queryComponents(l):filter(this._componentsMap.get(s),function(d){return!!d});return f(filterBySubType(u,n));function c(d){var v=s+"Index",g=s+"Id",y=s+"Name";return d&&(d[v]!=null||d[g]!=null||d[y]!=null)?{mainType:s,index:d[v],id:d[g],name:d[y]}:null}function f(d){return n.filter?filter(d,n.filter):d}},r.prototype.eachComponent=function(n,o,s){var l=this._componentsMap;if(isFunction(n)){var u=o,c=n;l.each(function(g,y){for(var _=0;g&&_<g.length;_++){var S=g[_];S&&c.call(u,y,S,S.componentIndex)}})}else for(var f=isString(n)?l.get(n):isObject$3(n)?this.findComponents(n):null,d=0;f&&d<f.length;d++){var v=f[d];v&&o.call(s,v,v.componentIndex)}},r.prototype.getSeriesByName=function(n){var o=convertOptionIdName(n,null);return filter(this._componentsMap.get("series"),function(s){return!!s&&o!=null&&s.name===o})},r.prototype.getSeriesByIndex=function(n){return this._componentsMap.get("series")[n]},r.prototype.getSeriesByType=function(n){return filter(this._componentsMap.get("series"),function(o){return!!o&&o.subType===n})},r.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(n){return!!n})},r.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},r.prototype.eachSeries=function(n,o){assertSeriesInitialized(this),each$f(this._seriesIndices,function(s){var l=this._componentsMap.get("series")[s];n.call(o,l,s)},this)},r.prototype.eachRawSeries=function(n,o){each$f(this._componentsMap.get("series"),function(s){s&&n.call(o,s,s.componentIndex)})},r.prototype.eachSeriesByType=function(n,o,s){assertSeriesInitialized(this),each$f(this._seriesIndices,function(l){var u=this._componentsMap.get("series")[l];u.subType===n&&o.call(s,u,l)},this)},r.prototype.eachRawSeriesByType=function(n,o,s){return each$f(this.getSeriesByType(n),o,s)},r.prototype.isSeriesFiltered=function(n){return assertSeriesInitialized(this),this._seriesIndicesMap.get(n.componentIndex)==null},r.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},r.prototype.filterSeries=function(n,o){assertSeriesInitialized(this);var s=[];each$f(this._seriesIndices,function(l){var u=this._componentsMap.get("series")[l];n.call(o,u,l)&&s.push(l)},this),this._seriesIndices=s,this._seriesIndicesMap=createHashMap(s)},r.prototype.restoreData=function(n){reCreateSeriesIndices(this);var o=this._componentsMap,s=[];o.each(function(l,u){ComponentModel.hasClass(u)&&s.push(u)}),ComponentModel.topologicalTravel(s,ComponentModel.getAllClassMainTypes(),function(l){each$f(o.get(l),function(u){u&&(l!=="series"||!isNotTargetSeries(u,n))&&u.restoreData()})})},r.internalField=function(){reCreateSeriesIndices=function(n){var o=n._seriesIndices=[];each$f(n._componentsMap.get("series"),function(s){s&&o.push(s.componentIndex)}),n._seriesIndicesMap=createHashMap(o)},assertSeriesInitialized=function(n){},initBase=function(n,o){n.option={},n.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,n._componentsMap=createHashMap({series:[]}),n._componentsCount=createHashMap();var s=o.aria;isObject$3(s)&&s.enabled==null&&(s.enabled=!0),mergeTheme(o,n._theme.option),merge(o,globalDefault,!1),n._mergeOption(o,null)}}(),r}(Model);function isNotTargetSeries(a,r){if(r){var n=r.seriesIndex,o=r.seriesId,s=r.seriesName;return n!=null&&a.componentIndex!==n||o!=null&&a.id!==o||s!=null&&a.name!==s}}function mergeTheme(a,r){var n=a.color&&!a.colorLayer;each$f(r,function(o,s){s==="colorLayer"&&n||s==="color"&&a.color||ComponentModel.hasClass(s)||(typeof o=="object"?a[s]=a[s]?merge(a[s],o,!1):clone$4(o):a[s]==null&&(a[s]=o))})}function queryByIdOrName(a,r,n){if(isArray$1(r)){var o=createHashMap();return each$f(r,function(l){if(l!=null){var u=convertOptionIdName(l,null);u!=null&&o.set(l,!0)}}),filter(n,function(l){return l&&o.get(l[a])})}else{var s=convertOptionIdName(r,null);return filter(n,function(l){return l&&s!=null&&l[a]===s})}}function filterBySubType(a,r){return r.hasOwnProperty("subType")?filter(a,function(n){return n&&n.subType===r.subType}):a}function normalizeSetOptionInput(a){var r=createHashMap();return a&&each$f(normalizeToArray(a.replaceMerge),function(n){r.set(n,!0)}),{replaceMergeMainTypeMap:r}}mixin(GlobalModel,PaletteMixin);var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=function(){function a(r){each$f(availableMethods,function(n){this[n]=bind$1(r[n],r)},this)}return a}(),QUERY_REG=/^(min|max)?(.+)$/,OptionManager=function(){function a(r){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=r}return a.prototype.setOption=function(r,n,o){r&&(each$f(normalizeToArray(r.series),function(u){u&&u.data&&isTypedArray(u.data)&&setAsPrimitive(u.data)}),each$f(normalizeToArray(r.dataset),function(u){u&&u.source&&isTypedArray(u.source)&&setAsPrimitive(u.source)})),r=clone$4(r);var s=this._optionBackup,l=parseRawOption(r,n,!s);this._newBaseOption=l.baseOption,s?(l.timelineOptions.length&&(s.timelineOptions=l.timelineOptions),l.mediaList.length&&(s.mediaList=l.mediaList),l.mediaDefault&&(s.mediaDefault=l.mediaDefault)):this._optionBackup=l},a.prototype.mountOption=function(r){var n=this._optionBackup;return this._timelineOptions=n.timelineOptions,this._mediaList=n.mediaList,this._mediaDefault=n.mediaDefault,this._currentMediaIndices=[],clone$4(r?n.baseOption:this._newBaseOption)},a.prototype.getTimelineOption=function(r){var n,o=this._timelineOptions;if(o.length){var s=r.getComponent("timeline");s&&(n=clone$4(o[s.getCurrentIndex()]))}return n},a.prototype.getMediaOption=function(r){var n=this._api.getWidth(),o=this._api.getHeight(),s=this._mediaList,l=this._mediaDefault,u=[],c=[];if(!s.length&&!l)return c;for(var f=0,d=s.length;f<d;f++)applyMediaQuery(s[f].query,n,o)&&u.push(f);return!u.length&&l&&(u=[-1]),u.length&&!indicesEquals(u,this._currentMediaIndices)&&(c=map$1(u,function(v){return clone$4(v===-1?l.option:s[v].option)})),this._currentMediaIndices=u,c},a}();function parseRawOption(a,r,n){var o=[],s,l,u=a.baseOption,c=a.timeline,f=a.options,d=a.media,v=!!a.media,g=!!(f||c||u&&u.timeline);u?(l=u,l.timeline||(l.timeline=c)):((g||v)&&(a.options=a.media=null),l=a),v&&isArray$1(d)&&each$f(d,function(_){_&&_.option&&(_.query?o.push(_):s||(s=_))}),y(l),each$f(f,function(_){return y(_)}),each$f(o,function(_){return y(_.option)});function y(_){each$f(r,function(S){S(_,n)})}return{baseOption:l,timelineOptions:f||[],mediaDefault:s,mediaList:o}}function applyMediaQuery(a,r,n){var o={width:r,height:n,aspectratio:r/n},s=!0;return each$f(a,function(l,u){var c=u.match(QUERY_REG);if(!(!c||!c[1]||!c[2])){var f=c[1],d=c[2].toLowerCase();compare(o[d],l,f)||(s=!1)}}),s}function compare(a,r,n){return n==="min"?a>=r:n==="max"?a<=r:a===r}function indicesEquals(a,r){return a.join(",")===r.join(",")}var each$d=each$f,isObject$2=isObject$3,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(a){var r=a&&a.itemStyle;if(r)for(var n=0,o=POSSIBLE_STYLES.length;n<o;n++){var s=POSSIBLE_STYLES[n],l=r.normal,u=r.emphasis;l&&l[s]&&(a[s]=a[s]||{},a[s].normal?merge(a[s].normal,l[s]):a[s].normal=l[s],l[s]=null),u&&u[s]&&(a[s]=a[s]||{},a[s].emphasis?merge(a[s].emphasis,u[s]):a[s].emphasis=u[s],u[s]=null)}}function convertNormalEmphasis(a,r,n){if(a&&a[r]&&(a[r].normal||a[r].emphasis)){var o=a[r].normal,s=a[r].emphasis;o&&(n?(a[r].normal=a[r].emphasis=null,defaults(a[r],o)):a[r]=o),s&&(a.emphasis=a.emphasis||{},a.emphasis[r]=s,s.focus&&(a.emphasis.focus=s.focus),s.blurScope&&(a.emphasis.blurScope=s.blurScope))}}function removeEC3NormalStatus(a){convertNormalEmphasis(a,"itemStyle"),convertNormalEmphasis(a,"lineStyle"),convertNormalEmphasis(a,"areaStyle"),convertNormalEmphasis(a,"label"),convertNormalEmphasis(a,"labelLine"),convertNormalEmphasis(a,"upperLabel"),convertNormalEmphasis(a,"edgeLabel")}function compatTextStyle(a,r){var n=isObject$2(a)&&a[r],o=isObject$2(n)&&n.textStyle;if(o)for(var s=0,l=TEXT_STYLE_OPTIONS.length;s<l;s++){var u=TEXT_STYLE_OPTIONS[s];o.hasOwnProperty(u)&&(n[u]=o[u])}}function compatEC3CommonStyles(a){a&&(removeEC3NormalStatus(a),compatTextStyle(a,"label"),a.emphasis&&compatTextStyle(a.emphasis,"label"))}function processSeries(a){if(isObject$2(a)){compatEC2ItemStyle(a),removeEC3NormalStatus(a),compatTextStyle(a,"label"),compatTextStyle(a,"upperLabel"),compatTextStyle(a,"edgeLabel"),a.emphasis&&(compatTextStyle(a.emphasis,"label"),compatTextStyle(a.emphasis,"upperLabel"),compatTextStyle(a.emphasis,"edgeLabel"));var r=a.markPoint;r&&(compatEC2ItemStyle(r),compatEC3CommonStyles(r));var n=a.markLine;n&&(compatEC2ItemStyle(n),compatEC3CommonStyles(n));var o=a.markArea;o&&compatEC3CommonStyles(o);var s=a.data;if(a.type==="graph"){s=s||a.nodes;var l=a.links||a.edges;if(l&&!isTypedArray(l))for(var u=0;u<l.length;u++)compatEC3CommonStyles(l[u]);each$f(a.categories,function(d){removeEC3NormalStatus(d)})}if(s&&!isTypedArray(s))for(var u=0;u<s.length;u++)compatEC3CommonStyles(s[u]);if(r=a.markPoint,r&&r.data)for(var c=r.data,u=0;u<c.length;u++)compatEC3CommonStyles(c[u]);if(n=a.markLine,n&&n.data)for(var f=n.data,u=0;u<f.length;u++)isArray$1(f[u])?(compatEC3CommonStyles(f[u][0]),compatEC3CommonStyles(f[u][1])):compatEC3CommonStyles(f[u]);a.type==="gauge"?(compatTextStyle(a,"axisLabel"),compatTextStyle(a,"title"),compatTextStyle(a,"detail")):a.type==="treemap"?(convertNormalEmphasis(a.breadcrumb,"itemStyle"),each$f(a.levels,function(d){removeEC3NormalStatus(d)})):a.type==="tree"&&removeEC3NormalStatus(a.leaves)}}function toArr(a){return isArray$1(a)?a:a?[a]:[]}function toObj(a){return(isArray$1(a)?a[0]:a)||{}}function globalCompatStyle(a,r){each$d(toArr(a.series),function(o){isObject$2(o)&&processSeries(o)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];r&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(n,function(o){each$d(toArr(a[o]),function(s){s&&(compatTextStyle(s,"axisLabel"),compatTextStyle(s.axisPointer,"label"))})}),each$d(toArr(a.parallel),function(o){var s=o&&o.parallelAxisDefault;compatTextStyle(s,"axisLabel"),compatTextStyle(s&&s.axisPointer,"label")}),each$d(toArr(a.calendar),function(o){convertNormalEmphasis(o,"itemStyle"),compatTextStyle(o,"dayLabel"),compatTextStyle(o,"monthLabel"),compatTextStyle(o,"yearLabel")}),each$d(toArr(a.radar),function(o){compatTextStyle(o,"name"),o.name&&o.axisName==null&&(o.axisName=o.name,delete o.name),o.nameGap!=null&&o.axisNameGap==null&&(o.axisNameGap=o.nameGap,delete o.nameGap)}),each$d(toArr(a.geo),function(o){isObject$2(o)&&(compatEC3CommonStyles(o),each$d(toArr(o.regions),function(s){compatEC3CommonStyles(s)}))}),each$d(toArr(a.timeline),function(o){compatEC3CommonStyles(o),convertNormalEmphasis(o,"label"),convertNormalEmphasis(o,"itemStyle"),convertNormalEmphasis(o,"controlStyle",!0);var s=o.data;isArray$1(s)&&each$f(s,function(l){isObject$3(l)&&(convertNormalEmphasis(l,"label"),convertNormalEmphasis(l,"itemStyle"))})}),each$d(toArr(a.toolbox),function(o){convertNormalEmphasis(o,"iconStyle"),each$d(o.feature,function(s){convertNormalEmphasis(s,"iconStyle")})}),compatTextStyle(toObj(a.axisPointer),"label"),compatTextStyle(toObj(a.tooltip).axisPointer,"label")}function get(a,r){for(var n=r.split(","),o=a,s=0;s<n.length&&(o=o&&o[n[s]],o!=null);s++);return o}function set(a,r,n,o){for(var s=r.split(","),l=a,u,c=0;c<s.length-1;c++)u=s[c],l[u]==null&&(l[u]={}),l=l[u];l[s[c]]==null&&(l[s[c]]=n)}function compatLayoutProperties(a){a&&each$f(LAYOUT_PROPERTIES,function(r){r[0]in a&&!(r[1]in a)&&(a[r[1]]=a[r[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(a){var r=a&&a.itemStyle;if(r)for(var n=0;n<BAR_ITEM_STYLE_MAP.length;n++){var o=BAR_ITEM_STYLE_MAP[n][1],s=BAR_ITEM_STYLE_MAP[n][0];r[o]!=null&&(r[s]=r[o])}}function compatPieLabel(a){a&&a.alignTo==="edge"&&a.margin!=null&&a.edgeDistance==null&&(a.edgeDistance=a.margin)}function compatSunburstState(a){a&&a.downplay&&!a.blur&&(a.blur=a.downplay)}function compatGraphFocus(a){a&&a.focusNodeAdjacency!=null&&(a.emphasis=a.emphasis||{},a.emphasis.focus==null&&(a.emphasis.focus="adjacency"))}function traverseTree(a,r){if(a)for(var n=0;n<a.length;n++)r(a[n]),a[n]&&traverseTree(a[n].children,r)}function globalBackwardCompat(a,r){globalCompatStyle(a,r),a.series=normalizeToArray(a.series),each$f(a.series,function(n){if(isObject$3(n)){var o=n.type;if(o==="line")n.clipOverflow!=null&&(n.clip=n.clipOverflow);else if(o==="pie"||o==="gauge"){n.clockWise!=null&&(n.clockwise=n.clockWise),compatPieLabel(n.label);var s=n.data;if(s&&!isTypedArray(s))for(var l=0;l<s.length;l++)compatPieLabel(s[l]);n.hoverOffset!=null&&(n.emphasis=n.emphasis||{},(n.emphasis.scaleSize=null)&&(n.emphasis.scaleSize=n.hoverOffset))}else if(o==="gauge"){var u=get(n,"pointer.color");u!=null&&set(n,"itemStyle.color",u)}else if(o==="bar"){compatBarItemStyle(n),compatBarItemStyle(n.backgroundStyle),compatBarItemStyle(n.emphasis);var s=n.data;if(s&&!isTypedArray(s))for(var l=0;l<s.length;l++)typeof s[l]=="object"&&(compatBarItemStyle(s[l]),compatBarItemStyle(s[l]&&s[l].emphasis))}else if(o==="sunburst"){var c=n.highlightPolicy;c&&(n.emphasis=n.emphasis||{},n.emphasis.focus||(n.emphasis.focus=c)),compatSunburstState(n),traverseTree(n.data,compatSunburstState)}else o==="graph"||o==="sankey"?compatGraphFocus(n):o==="map"&&(n.mapType&&!n.map&&(n.map=n.mapType),n.mapLocation&&defaults(n,n.mapLocation));n.hoverAnimation!=null&&(n.emphasis=n.emphasis||{},n.emphasis&&n.emphasis.scale==null&&(n.emphasis.scale=n.hoverAnimation)),compatLayoutProperties(n)}}),a.dataRange&&(a.visualMap=a.dataRange),each$f(COMPATITABLE_COMPONENTS,function(n){var o=a[n];o&&(isArray$1(o)||(o=[o]),each$f(o,function(s){compatLayoutProperties(s)}))})}function dataStack(a){var r=createHashMap();a.eachSeries(function(n){var o=n.get("stack");if(o){var s=r.get(o)||r.set(o,[]),l=n.getData(),u={stackResultDimension:l.getCalculationInfo("stackResultDimension"),stackedOverDimension:l.getCalculationInfo("stackedOverDimension"),stackedDimension:l.getCalculationInfo("stackedDimension"),stackedByDimension:l.getCalculationInfo("stackedByDimension"),isStackedByIndex:l.getCalculationInfo("isStackedByIndex"),data:l,seriesModel:n};if(!u.stackedDimension||!(u.isStackedByIndex||u.stackedByDimension))return;s.push(u)}}),r.each(function(n){if(n.length!==0){var o=n[0].seriesModel,s=o.get("stackOrder")||"seriesAsc";s==="seriesDesc"&&n.reverse(),each$f(n,function(l,u){l.data.setCalculationInfo("stackedOnSeries",u>0?n[u-1].seriesModel:null)}),calculateStack(n)}})}function calculateStack(a){each$f(a,function(r,n){var o=[],s=[NaN,NaN],l=[r.stackResultDimension,r.stackedOverDimension],u=r.data,c=r.isStackedByIndex,f=r.seriesModel.get("stackStrategy")||"samesign";u.modify(l,function(d,v,g){var y=u.get(r.stackedDimension,g);if(isNaN(y))return s;var _,S;c?S=u.getRawIndex(g):_=u.get(r.stackedByDimension,g);for(var b=NaN,x=n-1;x>=0;x--){var T=a[x];if(c||(S=T.data.rawIndexOf(T.stackedByDimension,_)),S>=0){var A=T.data.getByRawIndex(T.stackResultDimension,S);if(f==="all"||f==="positive"&&A>0||f==="negative"&&A<0||f==="samesign"&&y>=0&&A>0||f==="samesign"&&y<=0&&A<0){y=addSafe(y,A),b=A;break}}}return o[0]=y,o[1]=b,o})})}var SourceImpl=function(){function a(r){this.data=r.data||(r.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=r.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=r.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=r.startIndex||0,this.dimensionsDetectedCount=r.dimensionsDetectedCount,this.metaRawOption=r.metaRawOption;var n=this.dimensionsDefine=r.dimensionsDefine;if(n)for(var o=0;o<n.length;o++){var s=n[o];s.type==null&&guessOrdinal(this,o)===BE_ORDINAL.Must&&(s.type="ordinal")}}return a}();function isSourceInstance(a){return a instanceof SourceImpl}function createSource(a,r,n){n=n||detectSourceFormat(a);var o=r.seriesLayoutBy,s=determineSourceDimensions(a,n,o,r.sourceHeader,r.dimensions),l=new SourceImpl({data:a,sourceFormat:n,seriesLayoutBy:o,dimensionsDefine:s.dimensionsDefine,startIndex:s.startIndex,dimensionsDetectedCount:s.dimensionsDetectedCount,metaRawOption:clone$4(r)});return l}function createSourceFromSeriesDataOption(a){return new SourceImpl({data:a,sourceFormat:isTypedArray(a)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(a){return new SourceImpl({data:a.data,sourceFormat:a.sourceFormat,seriesLayoutBy:a.seriesLayoutBy,dimensionsDefine:clone$4(a.dimensionsDefine),startIndex:a.startIndex,dimensionsDetectedCount:a.dimensionsDetectedCount})}function detectSourceFormat(a){var r=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(a))r=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$1(a)){a.length===0&&(r=SOURCE_FORMAT_ARRAY_ROWS);for(var n=0,o=a.length;n<o;n++){var s=a[n];if(s!=null){if(isArray$1(s)||isTypedArray(s)){r=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$3(s)){r=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$3(a)){for(var l in a)if(hasOwn(a,l)&&isArrayLike(a[l])){r=SOURCE_FORMAT_KEYED_COLUMNS;break}}return r}function determineSourceDimensions(a,r,n,o,s){var l,u;if(!a)return{dimensionsDefine:normalizeDimensionsOption(s),startIndex:u,dimensionsDetectedCount:l};if(r===SOURCE_FORMAT_ARRAY_ROWS){var c=a;o==="auto"||o==null?arrayRowsTravelFirst(function(d){d!=null&&d!=="-"&&(isString(d)?u==null&&(u=1):u=0)},n,c,10):u=isNumber(o)?o:o?1:0,!s&&u===1&&(s=[],arrayRowsTravelFirst(function(d,v){s[v]=d!=null?d+"":""},n,c,1/0)),l=s?s.length:n===SERIES_LAYOUT_BY_ROW?c.length:c[0]?c[0].length:null}else if(r===SOURCE_FORMAT_OBJECT_ROWS)s||(s=objectRowsCollectDimensions(a));else if(r===SOURCE_FORMAT_KEYED_COLUMNS)s||(s=[],each$f(a,function(d,v){s.push(v)}));else if(r===SOURCE_FORMAT_ORIGINAL){var f=getDataItemValue(a[0]);l=isArray$1(f)&&f.length||1}return{startIndex:u,dimensionsDefine:normalizeDimensionsOption(s),dimensionsDetectedCount:l}}function objectRowsCollectDimensions(a){for(var r=0,n;r<a.length&&!(n=a[r++]););if(n)return keys(n)}function normalizeDimensionsOption(a){if(a){var r=createHashMap();return map$1(a,function(n,o){n=isObject$3(n)?n:{name:n};var s={name:n.name,displayName:n.displayName,type:n.type};if(s.name==null)return s;s.name+="",s.displayName==null&&(s.displayName=s.name);var l=r.get(s.name);return l?s.name+="-"+l.count++:r.set(s.name,{count:1}),s})}}function arrayRowsTravelFirst(a,r,n,o){if(r===SERIES_LAYOUT_BY_ROW)for(var s=0;s<n.length&&s<o;s++)a(n[s]?n[s][0]:null,s);else for(var l=n[0]||[],s=0;s<l.length&&s<o;s++)a(l[s],s)}function shouldRetrieveDataByName(a){var r=a.sourceFormat;return r===SOURCE_FORMAT_OBJECT_ROWS||r===SOURCE_FORMAT_KEYED_COLUMNS}var _a,_b,_c,_d,providerMethods,mountMethods,DefaultDataProvider=function(){function a(r,n){var o=isSourceInstance(r)?r:createSourceFromSeriesDataOption(r);this._source=o;var s=this._data=o.data,l=o.sourceFormat;o.seriesLayoutBy,l===SOURCE_FORMAT_TYPED_ARRAY&&(this._offset=0,this._dimSize=n,this._data=s),mountMethods(this,s,o)}return a.prototype.getSource=function(){return this._source},a.prototype.count=function(){return 0},a.prototype.getItem=function(r,n){},a.prototype.appendData=function(r){},a.prototype.clean=function(){},a.protoInitialize=function(){var r=a.prototype;r.pure=!1,r.persistent=!0}(),a.internalField=function(){var r;mountMethods=function(u,c,f){var d=f.sourceFormat,v=f.seriesLayoutBy,g=f.startIndex,y=f.dimensionsDefine,_=providerMethods[getMethodMapKey(d,v)];if(extend(u,_),d===SOURCE_FORMAT_TYPED_ARRAY)u.getItem=n,u.count=s,u.fillStorage=o;else{var S=getRawSourceItemGetter(d,v);u.getItem=bind$1(S,null,c,g,y);var b=getRawSourceDataCounter(d,v);u.count=bind$1(b,null,c,g,y)}};var n=function(u,c){u=u-this._offset,c=c||[];for(var f=this._data,d=this._dimSize,v=d*u,g=0;g<d;g++)c[g]=f[v+g];return c},o=function(u,c,f,d){for(var v=this._data,g=this._dimSize,y=0;y<g;y++){for(var _=d[y],S=_[0]==null?1/0:_[0],b=_[1]==null?-1/0:_[1],x=c-u,T=f[y],A=0;A<x;A++){var w=v[A*g+y];T[u+A]=w,w<S&&(S=w),w>b&&(b=w)}_[0]=S,_[1]=b}},s=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(r={},r[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:l},r[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},r[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:l},r[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(u){var c=this._data;each$f(u,function(f,d){for(var v=c[d]||(c[d]=[]),g=0;g<(f||[]).length;g++)v.push(f[g])})}},r[SOURCE_FORMAT_ORIGINAL]={appendData:l},r[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(u){this._data=u},clean:function(){this._offset+=this.count(),this._data=null}},r);function l(u){for(var c=0;c<u.length;c++)this._data.push(u[c])}}(),a}(),validateSimply=function(a){isArray$1(a)||error("series.data or dataset.source must be an array.")};_a={},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=validateSimply,_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=validateSimply,_a[SOURCE_FORMAT_OBJECT_ROWS]=validateSimply,_a[SOURCE_FORMAT_KEYED_COLUMNS]=function(a,r){for(var n=0;n<r.length;n++){var o=r[n].name;o==null&&error("dimension name must not be null/undefined.")}},_a[SOURCE_FORMAT_ORIGINAL]=validateSimply;var getItemSimply=function(a,r,n,o){return a[o]},rawSourceItemGetterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(a,r,n,o){return a[o+r]},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(a,r,n,o,s){o+=r;for(var l=s||[],u=a,c=0;c<u.length;c++){var f=u[c];l[c]=f?f[o]:null}return l},_b[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(a,r,n,o,s){for(var l=s||[],u=0;u<n.length;u++){var c=n[u].name,f=c!=null?a[c]:null;l[u]=f?f[o]:null}return l},_b[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_b);function getRawSourceItemGetter(a,r){var n=rawSourceItemGetterMap[getMethodMapKey(a,r)];return n}var countSimply=function(a,r,n){return a.length},rawSourceDataCounterMap=(_c={},_c[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(a,r,n){return Math.max(0,a.length-r)},_c[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(a,r,n){var o=a[0];return o?Math.max(0,o.length-r):0},_c[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_c[SOURCE_FORMAT_KEYED_COLUMNS]=function(a,r,n){var o=n[0].name,s=o!=null?a[o]:null;return s?s.length:0},_c[SOURCE_FORMAT_ORIGINAL]=countSimply,_c);function getRawSourceDataCounter(a,r){var n=rawSourceDataCounterMap[getMethodMapKey(a,r)];return n}var getRawValueSimply=function(a,r,n){return a[r]},rawSourceValueGetterMap=(_d={},_d[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_d[SOURCE_FORMAT_OBJECT_ROWS]=function(a,r,n){return a[n]},_d[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_d[SOURCE_FORMAT_ORIGINAL]=function(a,r,n){var o=getDataItemValue(a);return o instanceof Array?o[r]:o},_d[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_d);function getRawSourceValueGetter(a){var r=rawSourceValueGetterMap[a];return r}function getMethodMapKey(a,r){return a===SOURCE_FORMAT_ARRAY_ROWS?a+"_"+r:a}function retrieveRawValue(a,r,n){if(a){var o=a.getRawDataItem(r);if(o!=null){var s=a.getStore(),l=s.getSource().sourceFormat;if(n!=null){var u=a.getDimensionIndex(n),c=s.getDimensionProperty(u);return getRawSourceValueGetter(l)(o,u,c)}else{var f=o;return l===SOURCE_FORMAT_ORIGINAL&&(f=getDataItemValue(o)),f}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=function(){function a(){}return a.prototype.getDataParams=function(r,n){var o=this.getData(n),s=this.getRawValue(r,n),l=o.getRawIndex(r),u=o.getName(r),c=o.getRawDataItem(r),f=o.getItemVisual(r,"style"),d=f&&f[o.getItemVisual(r,"drawType")||"fill"],v=f&&f.stroke,g=this.mainType,y=g==="series",_=o.userOutput&&o.userOutput.get();return{componentType:g,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:y?this.subType:null,seriesIndex:this.seriesIndex,seriesId:y?this.id:null,seriesName:y?this.name:null,name:u,dataIndex:l,data:c,dataType:n,value:s,color:d,borderColor:v,dimensionNames:_?_.fullDimensions:null,encode:_?_.encode:null,$vars:["seriesName","name","value"]}},a.prototype.getFormattedLabel=function(r,n,o,s,l,u){n=n||"normal";var c=this.getData(o),f=this.getDataParams(r,o);if(u&&(f.value=u.interpolatedValue),s!=null&&isArray$1(f.value)&&(f.value=f.value[s]),!l){var d=c.getItemModel(r);l=d.get(n==="normal"?["label","formatter"]:[n,"label","formatter"])}if(isFunction(l))return f.status=n,f.dimensionIndex=s,l(f);if(isString(l)){var v=formatTpl(l,f);return v.replace(DIMENSION_LABEL_REG,function(g,y){var _=y.length,S=y;S.charAt(0)==="["&&S.charAt(_-1)==="]"&&(S=+S.slice(1,_-1));var b=retrieveRawValue(c,r,S);if(u&&isArray$1(u.interpolatedValue)){var x=c.getDimensionIndex(S);x>=0&&(b=u.interpolatedValue[x])}return b!=null?b+"":""})}},a.prototype.getRawValue=function(r,n){return retrieveRawValue(this.getData(n),r)},a.prototype.formatTooltip=function(r,n,o){},a}();function normalizeTooltipFormatResult(a){var r,n;return isObject$3(a)?a.type&&(n=a):r=a,{text:r,frag:n}}function createTask(a){return new Task(a)}var Task=function(){function a(r){r=r||{},this._reset=r.reset,this._plan=r.plan,this._count=r.count,this._onDirty=r.onDirty,this._dirty=!0}return a.prototype.perform=function(r){var n=this._upstream,o=r&&r.skip;if(this._dirty&&n){var s=this.context;s.data=s.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var l;this._plan&&!o&&(l=this._plan(this.context));var u=v(this._modBy),c=this._modDataCount||0,f=v(r&&r.modBy),d=r&&r.modDataCount||0;(u!==f||c!==d)&&(l="reset");function v(A){return!(A>=1)&&(A=1),A}var g;(this._dirty||l==="reset")&&(this._dirty=!1,g=this._doReset(o)),this._modBy=f,this._modDataCount=d;var y=r&&r.step;if(n?this._dueEnd=n._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var _=this._dueIndex,S=Math.min(y!=null?this._dueIndex+y:1/0,this._dueEnd);if(!o&&(g||_<S)){var b=this._progress;if(isArray$1(b))for(var x=0;x<b.length;x++)this._doProgress(b[x],_,S,f,d);else this._doProgress(b,_,S,f,d)}this._dueIndex=S;var T=this._settedOutputEnd!=null?this._settedOutputEnd:S;this._outputDueEnd=T}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},a.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},a.prototype._doProgress=function(r,n,o,s,l){iterator.reset(n,o,s,l),this._callingProgress=r,this._callingProgress({start:n,end:o,count:o-n,next:iterator.next},this.context)},a.prototype._doReset=function(r){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var n,o;!r&&this._reset&&(n=this._reset(this.context),n&&n.progress&&(o=n.forceFirstProgress,n=n.progress),isArray$1(n)&&!n.length&&(n=null)),this._progress=n,this._modBy=this._modDataCount=null;var s=this._downstream;return s&&s.dirty(),o},a.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},a.prototype.pipe=function(r){(this._downstream!==r||this._dirty)&&(this._downstream=r,r._upstream=this,r.dirty())},a.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},a.prototype.getUpstream=function(){return this._upstream},a.prototype.getDownstream=function(){return this._downstream},a.prototype.setOutputEnd=function(r){this._outputDueEnd=this._settedOutputEnd=r},a}(),iterator=function(){var a,r,n,o,s,l={reset:function(f,d,v,g){r=f,a=d,n=v,o=g,s=Math.ceil(o/n),l.next=n>1&&o>0?c:u}};return l;function u(){return r<a?r++:null}function c(){var f=r%s*n+Math.ceil(r/s),d=r>=a?null:f<o?f:r;return r++,d}}();function parseDataValue(a,r){var n=r&&r.type;return n==="ordinal"?a:(n==="time"&&!isNumber(a)&&a!=null&&a!=="-"&&(a=+parseDate(a)),a==null||a===""?NaN:Number(a))}var valueParserMap=createHashMap({number:function(a){return parseFloat(a)},time:function(a){return+parseDate(a)},trim:function(a){return isString(a)?trim$1(a):a}});function getRawValueParser(a){return valueParserMap.get(a)}var ORDER_COMPARISON_OP_MAP={lt:function(a,r){return a<r},lte:function(a,r){return a<=r},gt:function(a,r){return a>r},gte:function(a,r){return a>=r}},FilterOrderComparator=function(){function a(r,n){if(!isNumber(n)){var o="";throwError(o)}this._opFn=ORDER_COMPARISON_OP_MAP[r],this._rvalFloat=numericToNumber(n)}return a.prototype.evaluate=function(r){return isNumber(r)?this._opFn(r,this._rvalFloat):this._opFn(numericToNumber(r),this._rvalFloat)},a}(),SortOrderComparator=function(){function a(r,n){var o=r==="desc";this._resultLT=o?1:-1,n==null&&(n=o?"min":"max"),this._incomparable=n==="min"?-1/0:1/0}return a.prototype.evaluate=function(r,n){var o=isNumber(r)?r:numericToNumber(r),s=isNumber(n)?n:numericToNumber(n),l=isNaN(o),u=isNaN(s);if(l&&(o=this._incomparable),u&&(s=this._incomparable),l&&u){var c=isString(r),f=isString(n);c&&(o=f?r:0),f&&(s=c?n:0)}return o<s?this._resultLT:o>s?-this._resultLT:0},a}(),FilterEqualityComparator=function(){function a(r,n){this._rval=n,this._isEQ=r,this._rvalTypeof=typeof n,this._rvalFloat=numericToNumber(n)}return a.prototype.evaluate=function(r){var n=r===this._rval;if(!n){var o=typeof r;o!==this._rvalTypeof&&(o==="number"||this._rvalTypeof==="number")&&(n=numericToNumber(r)===this._rvalFloat)}return this._isEQ?n:!n},a}();function createFilterComparator(a,r){return a==="eq"||a==="ne"?new FilterEqualityComparator(a==="eq",r):hasOwn(ORDER_COMPARISON_OP_MAP,a)?new FilterOrderComparator(a,r):null}var ExternalSource=function(){function a(){}return a.prototype.getRawData=function(){throw new Error("not supported")},a.prototype.getRawDataItem=function(r){throw new Error("not supported")},a.prototype.cloneRawData=function(){},a.prototype.getDimensionInfo=function(r){},a.prototype.cloneAllDimensionInfo=function(){},a.prototype.count=function(){},a.prototype.retrieveValue=function(r,n){},a.prototype.retrieveValueFromItem=function(r,n){},a.prototype.convertValue=function(r,n){return parseDataValue(r,n)},a}();function createExternalSource(a,r){var n=new ExternalSource,o=a.data,s=n.sourceFormat=a.sourceFormat,l=a.startIndex,u="";a.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&throwError(u);var c=[],f={},d=a.dimensionsDefine;if(d)each$f(d,function(b,x){var T=b.name,A={index:x,name:T,displayName:b.displayName};if(c.push(A),T!=null){var w="";hasOwn(f,T)&&throwError(w),f[T]=A}});else for(var v=0;v<a.dimensionsDetectedCount;v++)c.push({index:v});var g=getRawSourceItemGetter(s,SERIES_LAYOUT_BY_COLUMN);r.__isBuiltIn&&(n.getRawDataItem=function(b){return g(o,l,c,b)},n.getRawData=bind$1(getRawData,null,a)),n.cloneRawData=bind$1(cloneRawData,null,a);var y=getRawSourceDataCounter(s,SERIES_LAYOUT_BY_COLUMN);n.count=bind$1(y,null,o,l,c);var _=getRawSourceValueGetter(s);n.retrieveValue=function(b,x){var T=g(o,l,c,b);return S(T,x)};var S=n.retrieveValueFromItem=function(b,x){if(b!=null){var T=c[x];if(T)return _(b,x,T.name)}};return n.getDimensionInfo=bind$1(getDimensionInfo,null,c,f),n.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,c),n}function getRawData(a){var r=a.sourceFormat;if(!isSupportedSourceFormat(r)){var n="";throwError(n)}return a.data}function cloneRawData(a){var r=a.sourceFormat,n=a.data;if(!isSupportedSourceFormat(r)){var o="";throwError(o)}if(r===SOURCE_FORMAT_ARRAY_ROWS){for(var s=[],l=0,u=n.length;l<u;l++)s.push(n[l].slice());return s}else if(r===SOURCE_FORMAT_OBJECT_ROWS){for(var s=[],l=0,u=n.length;l<u;l++)s.push(extend({},n[l]));return s}}function getDimensionInfo(a,r,n){if(n!=null){if(isNumber(n)||!isNaN(n)&&!hasOwn(r,n))return a[n];if(hasOwn(r,n))return r[n]}}function cloneAllDimensionInfo(a){return clone$4(a)}var externalTransformMap=createHashMap();function registerExternalTransform(a){a=clone$4(a);var r=a.type,n="";r||throwError(n);var o=r.split(":");o.length!==2&&throwError(n);var s=!1;o[0]==="echarts"&&(r=o[1],s=!0),a.__isBuiltIn=s,externalTransformMap.set(r,a)}function applyDataTransform(a,r,n){var o=normalizeToArray(a),s=o.length,l="";s||throwError(l);for(var u=0,c=s;u<c;u++){var f=o[u];r=applySingleDataTransform(f,r),u!==c-1&&(r.length=Math.max(r.length,1))}return r}function applySingleDataTransform(a,r,n,o){var s="";r.length||throwError(s),isObject$3(a)||throwError(s);var l=a.type,u=externalTransformMap.get(l);u||throwError(s);var c=map$1(r,function(d){return createExternalSource(d,u)}),f=normalizeToArray(u.transform({upstream:c[0],upstreamList:c,config:clone$4(a.config)}));return map$1(f,function(d,v){var g="";isObject$3(d)||throwError(g),d.data||throwError(g);var y=detectSourceFormat(d.data);isSupportedSourceFormat(y)||throwError(g);var _,S=r[0];if(S&&v===0&&!d.dimensions){var b=S.startIndex;b&&(d.data=S.data.slice(0,b).concat(d.data)),_={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:b,dimensions:S.metaRawOption.dimensions}}else _={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:d.dimensions};return createSource(d.data,_,null)})}function isSupportedSourceFormat(a){return a===SOURCE_FORMAT_ARRAY_ROWS||a===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(a){return a>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(a){var r=a.constructor;return r===Array?a.slice():new r(a)}function prepareStore(a,r,n,o,s){var l=dataCtors[n||"float"];if(s){var u=a[r],c=u&&u.length;if(c!==o){for(var f=new l(o),d=0;d<c;d++)f[d]=u[d];a[r]=f}}else a[r]=new l(o)}var DataStore=function(){function a(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return a.prototype.initData=function(r,n,o){this._provider=r,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var s=r.getSource(),l=this.defaultDimValueGetter=defaultDimValueGetters[s.sourceFormat];this._dimValueGetter=o||l,this._rawExtent=[],shouldRetrieveDataByName(s),this._dimensions=map$1(n,function(u){return{type:u.type,property:u.property}}),this._initDataFromProvider(0,r.count())},a.prototype.getProvider=function(){return this._provider},a.prototype.getSource=function(){return this._provider.getSource()},a.prototype.ensureCalculationDimension=function(r,n){var o=this._calcDimNameToIdx,s=this._dimensions,l=o.get(r);if(l!=null){if(s[l].type===n)return l}else l=s.length;return s[l]={type:n},o.set(r,l),this._chunks[l]=new dataCtors[n||"float"](this._rawCount),this._rawExtent[l]=getInitialExtent(),l},a.prototype.collectOrdinalMeta=function(r,n){var o=this._chunks[r],s=this._dimensions[r],l=this._rawExtent,u=s.ordinalOffset||0,c=o.length;u===0&&(l[r]=getInitialExtent());for(var f=l[r],d=u;d<c;d++){var v=o[d]=n.parseAndCollect(o[d]);isNaN(v)||(f[0]=Math.min(v,f[0]),f[1]=Math.max(v,f[1]))}s.ordinalMeta=n,s.ordinalOffset=c,s.type="ordinal"},a.prototype.getOrdinalMeta=function(r){var n=this._dimensions[r],o=n.ordinalMeta;return o},a.prototype.getDimensionProperty=function(r){var n=this._dimensions[r];return n&&n.property},a.prototype.appendData=function(r){var n=this._provider,o=this.count();n.appendData(r);var s=n.count();return n.persistent||(s+=o),o<s&&this._initDataFromProvider(o,s,!0),[o,s]},a.prototype.appendValues=function(r,n){for(var o=this._chunks,s=this._dimensions,l=s.length,u=this._rawExtent,c=this.count(),f=c+Math.max(r.length,n||0),d=0;d<l;d++){var v=s[d];prepareStore(o,d,v.type,f,!0)}for(var g=[],y=c;y<f;y++)for(var _=y-c,S=0;S<l;S++){var v=s[S],b=defaultDimValueGetters.arrayRows.call(this,r[_]||g,v.property,_,S);o[S][y]=b;var x=u[S];b<x[0]&&(x[0]=b),b>x[1]&&(x[1]=b)}return this._rawCount=this._count=f,{start:c,end:f}},a.prototype._initDataFromProvider=function(r,n,o){for(var s=this._provider,l=this._chunks,u=this._dimensions,c=u.length,f=this._rawExtent,d=map$1(u,function(A){return A.property}),v=0;v<c;v++){var g=u[v];f[v]||(f[v]=getInitialExtent()),prepareStore(l,v,g.type,n,o)}if(s.fillStorage)s.fillStorage(r,n,l,f);else for(var y=[],_=r;_<n;_++){y=s.getItem(_,y);for(var S=0;S<c;S++){var b=l[S],x=this._dimValueGetter(y,d[S],_,S);b[_]=x;var T=f[S];x<T[0]&&(T[0]=x),x>T[1]&&(T[1]=x)}}!s.persistent&&s.clean&&s.clean(),this._rawCount=this._count=n,this._extent=[]},a.prototype.count=function(){return this._count},a.prototype.get=function(r,n){if(!(n>=0&&n<this._count))return NaN;var o=this._chunks[r];return o?o[this.getRawIndex(n)]:NaN},a.prototype.getValues=function(r,n){var o=[],s=[];if(n==null){n=r,r=[];for(var l=0;l<this._dimensions.length;l++)s.push(l)}else s=r;for(var l=0,u=s.length;l<u;l++)o.push(this.get(s[l],n));return o},a.prototype.getByRawIndex=function(r,n){if(!(n>=0&&n<this._rawCount))return NaN;var o=this._chunks[r];return o?o[n]:NaN},a.prototype.getSum=function(r){var n=this._chunks[r],o=0;if(n)for(var s=0,l=this.count();s<l;s++){var u=this.get(r,s);isNaN(u)||(o+=u)}return o},a.prototype.getMedian=function(r){var n=[];this.each([r],function(l){isNaN(l)||n.push(l)});var o=n.sort(function(l,u){return l-u}),s=this.count();return s===0?0:s%2===1?o[(s-1)/2]:(o[s/2]+o[s/2-1])/2},a.prototype.indexOfRawIndex=function(r){if(r>=this._rawCount||r<0)return-1;if(!this._indices)return r;var n=this._indices,o=n[r];if(o!=null&&o<this._count&&o===r)return r;for(var s=0,l=this._count-1;s<=l;){var u=(s+l)/2|0;if(n[u]<r)s=u+1;else if(n[u]>r)l=u-1;else return u}return-1},a.prototype.getIndices=function(){var r,n=this._indices;if(n){var o=n.constructor,s=this._count;if(o===Array){r=new o(s);for(var l=0;l<s;l++)r[l]=n[l]}else r=new o(n.buffer,0,s)}else{var o=getIndicesCtor(this._rawCount);r=new o(this.count());for(var l=0;l<r.length;l++)r[l]=l}return r},a.prototype.filter=function(r,n){if(!this._count)return this;for(var o=this.clone(),s=o.count(),l=getIndicesCtor(o._rawCount),u=new l(s),c=[],f=r.length,d=0,v=r[0],g=o._chunks,y=0;y<s;y++){var _=void 0,S=o.getRawIndex(y);if(f===0)_=n(y);else if(f===1){var b=g[v][S];_=n(b,y)}else{for(var x=0;x<f;x++)c[x]=g[r[x]][S];c[x]=y,_=n.apply(null,c)}_&&(u[d++]=S)}return d<s&&(o._indices=u),o._count=d,o._extent=[],o._updateGetRawIdx(),o},a.prototype.selectRange=function(r){var n=this.clone(),o=n._count;if(!o)return this;var s=keys(r),l=s.length;if(!l)return this;var u=n.count(),c=getIndicesCtor(n._rawCount),f=new c(u),d=0,v=s[0],g=r[v][0],y=r[v][1],_=n._chunks,S=!1;if(!n._indices){var b=0;if(l===1){for(var x=_[s[0]],T=0;T<o;T++){var A=x[T];(A>=g&&A<=y||isNaN(A))&&(f[d++]=b),b++}S=!0}else if(l===2){for(var x=_[s[0]],w=_[s[1]],C=r[s[1]][0],E=r[s[1]][1],T=0;T<o;T++){var A=x[T],P=w[T];(A>=g&&A<=y||isNaN(A))&&(P>=C&&P<=E||isNaN(P))&&(f[d++]=b),b++}S=!0}}if(!S)if(l===1)for(var T=0;T<u;T++){var I=n.getRawIndex(T),A=_[s[0]][I];(A>=g&&A<=y||isNaN(A))&&(f[d++]=I)}else for(var T=0;T<u;T++){for(var M=!0,I=n.getRawIndex(T),R=0;R<l;R++){var O=s[R],A=_[O][I];(A<r[O][0]||A>r[O][1])&&(M=!1)}M&&(f[d++]=n.getRawIndex(T))}return d<u&&(n._indices=f),n._count=d,n._extent=[],n._updateGetRawIdx(),n},a.prototype.map=function(r,n){var o=this.clone(r);return this._updateDims(o,r,n),o},a.prototype.modify=function(r,n){this._updateDims(this,r,n)},a.prototype._updateDims=function(r,n,o){for(var s=r._chunks,l=[],u=n.length,c=r.count(),f=[],d=r._rawExtent,v=0;v<n.length;v++)d[n[v]]=getInitialExtent();for(var g=0;g<c;g++){for(var y=r.getRawIndex(g),_=0;_<u;_++)f[_]=s[n[_]][y];f[u]=g;var S=o&&o.apply(null,f);if(S!=null){typeof S!="object"&&(l[0]=S,S=l);for(var v=0;v<S.length;v++){var b=n[v],x=S[v],T=d[b],A=s[b];A&&(A[y]=x),x<T[0]&&(T[0]=x),x>T[1]&&(T[1]=x)}}}},a.prototype.lttbDownSample=function(r,n){var o=this.clone([r],!0),s=o._chunks,l=s[r],u=this.count(),c=0,f=Math.floor(1/n),d=this.getRawIndex(0),v,g,y,_=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(u/f)+2)*2,u));_[c++]=d;for(var S=1;S<u-1;S+=f){for(var b=Math.min(S+f,u-1),x=Math.min(S+f*2,u),T=(x+b)/2,A=0,w=b;w<x;w++){var C=this.getRawIndex(w),E=l[C];isNaN(E)||(A+=E)}A/=x-b;var P=S,I=Math.min(S+f,u),M=S-1,R=l[d];v=-1,y=P;for(var O=-1,$=0,w=P;w<I;w++){var C=this.getRawIndex(w),E=l[C];if(isNaN(E)){$++,O<0&&(O=C);continue}g=Math.abs((M-T)*(E-R)-(M-w)*(A-R)),g>v&&(v=g,y=C)}$>0&&$<I-P&&(_[c++]=Math.min(O,y),y=Math.max(O,y)),_[c++]=y,d=y}return _[c++]=this.getRawIndex(u-1),o._count=c,o._indices=_,o.getRawIndex=this._getRawIdx,o},a.prototype.minmaxDownSample=function(r,n){for(var o=this.clone([r],!0),s=o._chunks,l=Math.floor(1/n),u=s[r],c=this.count(),f=new(getIndicesCtor(this._rawCount))(Math.ceil(c/l)*2),d=0,v=0;v<c;v+=l){var g=v,y=u[this.getRawIndex(g)],_=v,S=u[this.getRawIndex(_)],b=l;v+l>c&&(b=c-v);for(var x=0;x<b;x++){var T=this.getRawIndex(v+x),A=u[T];A<y&&(y=A,g=v+x),A>S&&(S=A,_=v+x)}var w=this.getRawIndex(g),C=this.getRawIndex(_);g<_?(f[d++]=w,f[d++]=C):(f[d++]=C,f[d++]=w)}return o._count=d,o._indices=f,o._updateGetRawIdx(),o},a.prototype.downSample=function(r,n,o,s){for(var l=this.clone([r],!0),u=l._chunks,c=[],f=Math.floor(1/n),d=u[r],v=this.count(),g=l._rawExtent[r]=getInitialExtent(),y=new(getIndicesCtor(this._rawCount))(Math.ceil(v/f)),_=0,S=0;S<v;S+=f){f>v-S&&(f=v-S,c.length=f);for(var b=0;b<f;b++){var x=this.getRawIndex(S+b);c[b]=d[x]}var T=o(c),A=this.getRawIndex(Math.min(S+s(c,T)||0,v-1));d[A]=T,T<g[0]&&(g[0]=T),T>g[1]&&(g[1]=T),y[_++]=A}return l._count=_,l._indices=y,l._updateGetRawIdx(),l},a.prototype.each=function(r,n){if(this._count)for(var o=r.length,s=this._chunks,l=0,u=this.count();l<u;l++){var c=this.getRawIndex(l);switch(o){case 0:n(l);break;case 1:n(s[r[0]][c],l);break;case 2:n(s[r[0]][c],s[r[1]][c],l);break;default:for(var f=0,d=[];f<o;f++)d[f]=s[r[f]][c];d[f]=l,n.apply(null,d)}}},a.prototype.getDataExtent=function(r){var n=this._chunks[r],o=getInitialExtent();if(!n)return o;var s=this.count(),l=!this._indices,u;if(l)return this._rawExtent[r].slice();if(u=this._extent[r],u)return u.slice();u=o;for(var c=u[0],f=u[1],d=0;d<s;d++){var v=this.getRawIndex(d),g=n[v];g<c&&(c=g),g>f&&(f=g)}return u=[c,f],this._extent[r]=u,u},a.prototype.getRawDataItem=function(r){var n=this.getRawIndex(r);if(this._provider.persistent)return this._provider.getItem(n);for(var o=[],s=this._chunks,l=0;l<s.length;l++)o.push(s[l][n]);return o},a.prototype.clone=function(r,n){var o=new a,s=this._chunks,l=r&&reduce(r,function(c,f){return c[f]=!0,c},{});if(l)for(var u=0;u<s.length;u++)o._chunks[u]=l[u]?cloneChunk(s[u]):s[u];else o._chunks=s;return this._copyCommonProps(o),n||(o._indices=this._cloneIndices()),o._updateGetRawIdx(),o},a.prototype._copyCommonProps=function(r){r._count=this._count,r._rawCount=this._rawCount,r._provider=this._provider,r._dimensions=this._dimensions,r._extent=clone$4(this._extent),r._rawExtent=clone$4(this._rawExtent)},a.prototype._cloneIndices=function(){if(this._indices){var r=this._indices.constructor,n=void 0;if(r===Array){var o=this._indices.length;n=new r(o);for(var s=0;s<o;s++)n[s]=this._indices[s]}else n=new r(this._indices);return n}return null},a.prototype._getRawIdxIdentity=function(r){return r},a.prototype._getRawIdx=function(r){return r<this._count&&r>=0?this._indices[r]:-1},a.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},a.internalField=function(){function r(n,o,s,l){return parseDataValue(n[l],this._dimensions[l])}defaultDimValueGetters={arrayRows:r,objectRows:function(n,o,s,l){return parseDataValue(n[o],this._dimensions[l])},keyedColumns:r,original:function(n,o,s,l){var u=n&&(n.value==null?n:n.value);return parseDataValue(u instanceof Array?u[l]:u,this._dimensions[l])},typedArray:function(n,o,s,l){return n[l]}}}(),a}(),SourceManager=function(){function a(r){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=r}return a.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},a.prototype._setLocalSource=function(r,n){this._sourceList=r,this._upstreamSignList=n,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},a.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},a.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},a.prototype._createSource=function(){this._setLocalSource([],[]);var r=this._sourceHost,n=this._getUpstreamSourceManagers(),o=!!n.length,s,l;if(isSeries(r)){var u=r,c=void 0,f=void 0,d=void 0;if(o){var v=n[0];v.prepareSource(),d=v.getSource(),c=d.data,f=d.sourceFormat,l=[v._getVersionSign()]}else c=u.get("data",!0),f=isTypedArray(c)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,l=[];var g=this._getSourceMetaRawOption()||{},y=d&&d.metaRawOption||{},_=retrieve2(g.seriesLayoutBy,y.seriesLayoutBy)||null,S=retrieve2(g.sourceHeader,y.sourceHeader),b=retrieve2(g.dimensions,y.dimensions),x=_!==y.seriesLayoutBy||!!S!=!!y.sourceHeader||b;s=x?[createSource(c,{seriesLayoutBy:_,sourceHeader:S,dimensions:b},f)]:[]}else{var T=r;if(o){var A=this._applyTransform(n);s=A.sourceList,l=A.upstreamSignList}else{var w=T.get("source",!0);s=[createSource(w,this._getSourceMetaRawOption(),null)],l=[]}}this._setLocalSource(s,l)},a.prototype._applyTransform=function(r){var n=this._sourceHost,o=n.get("transform",!0),s=n.get("fromTransformResult",!0);if(s!=null){var l="";r.length!==1&&doThrow(l)}var u,c=[],f=[];return each$f(r,function(d){d.prepareSource();var v=d.getSource(s||0),g="";s!=null&&!v&&doThrow(g),c.push(v),f.push(d._getVersionSign())}),o?u=applyDataTransform(o,c,{datasetIndex:n.componentIndex}):s!=null&&(u=[cloneSourceShallow(c[0])]),{sourceList:u,upstreamSignList:f}},a.prototype._isDirty=function(){if(this._dirty)return!0;for(var r=this._getUpstreamSourceManagers(),n=0;n<r.length;n++){var o=r[n];if(o._isDirty()||this._upstreamSignList[n]!==o._getVersionSign())return!0}},a.prototype.getSource=function(r){r=r||0;var n=this._sourceList[r];if(!n){var o=this._getUpstreamSourceManagers();return o[0]&&o[0].getSource(r)}return n},a.prototype.getSharedDataStore=function(r){var n=r.makeStoreSchema();return this._innerGetDataStore(n.dimensions,r.source,n.hash)},a.prototype._innerGetDataStore=function(r,n,o){var s=0,l=this._storeList,u=l[s];u||(u=l[s]={});var c=u[o];if(!c){var f=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&f?c=f._innerGetDataStore(r,n,o):(c=new DataStore,c.initData(new DefaultDataProvider(n,r.length),r)),u[o]=c}return c},a.prototype._getUpstreamSourceManagers=function(){var r=this._sourceHost;if(isSeries(r)){var n=querySeriesUpstreamDatasetModel(r);return n?[n.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(r),function(o){return o.getSourceManager()})},a.prototype._getSourceMetaRawOption=function(){var r=this._sourceHost,n,o,s;if(isSeries(r))n=r.get("seriesLayoutBy",!0),o=r.get("sourceHeader",!0),s=r.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var l=r;n=l.get("seriesLayoutBy",!0),o=l.get("sourceHeader",!0),s=l.get("dimensions",!0)}return{seriesLayoutBy:n,sourceHeader:o,dimensions:s}},a}();function disableTransformOptionMerge(a){var r=a.option.transform;r&&setAsPrimitive(a.option.transform)}function isSeries(a){return a.mainType==="series"}function doThrow(a){throw new Error(a)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipLineHeight(a){var r=a.lineHeight;return r==null?TOOLTIP_LINE_HEIGHT_CSS:"line-height:"+encodeHTML(r+"")+"px"}function getTooltipTextStyle(a,r){var n=a.color||tokens.color.tertiary,o=a.fontSize||12,s=a.fontWeight||"400",l=a.color||tokens.color.secondary,u=a.fontSize||14,c=a.fontWeight||"900";return r==="html"?{nameStyle:"font-size:"+encodeHTML(o+"")+"px;color:"+encodeHTML(n)+";font-weight:"+encodeHTML(s+""),valueStyle:"font-size:"+encodeHTML(u+"")+"px;color:"+encodeHTML(l)+";font-weight:"+encodeHTML(c+"")}:{nameStyle:{fontSize:o,fill:n,fontWeight:s},valueStyle:{fontSize:u,fill:l,fontWeight:c}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(a,r){return r.type=a,r}function isSectionFragment(a){return a.type==="section"}function getBuilder(a){return isSectionFragment(a)?buildSection:buildNameValue}function getBlockGapLevel(a){if(isSectionFragment(a)){var r=0,n=a.blocks.length,o=n>1||n>0&&!a.noHeader;return each$f(a.blocks,function(s){var l=getBlockGapLevel(s);l>=r&&(r=l+ +(o&&(!l||isSectionFragment(s)&&!s.noHeader)))}),r}return 0}function buildSection(a,r,n,o){var s=r.noHeader,l=getGap(getBlockGapLevel(r)),u=[],c=r.blocks||[];assert(!c||isArray$1(c)),c=c||[];var f=a.orderMode;if(r.sortBlocks&&f){c=c.slice();var d={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(d,f)){var v=new SortOrderComparator(d[f],null);c.sort(function(b,x){return v.evaluate(b.sortParam,x.sortParam)})}else f==="seriesDesc"&&c.reverse()}each$f(c,function(b,x){var T=r.valueFormatter,A=getBuilder(b)(T?extend(extend({},a),{valueFormatter:T}):a,b,x>0?l.html:0,o);A!=null&&u.push(A)});var g=a.renderMode==="richText"?u.join(l.richText):wrapBlockHTML(o,u.join(""),s?n:l.html);if(s)return g;var y=makeValueReadable(r.header,"ordinal",a.useUTC),_=getTooltipTextStyle(o,a.renderMode).nameStyle,S=getTooltipLineHeight(o);return a.renderMode==="richText"?wrapInlineNameRichText(a,y,_)+l.richText+g:wrapBlockHTML(o,'<div style="'+_+";"+S+';">'+encodeHTML(y)+"</div>"+g,n)}function buildNameValue(a,r,n,o){var s=a.renderMode,l=r.noName,u=r.noValue,c=!r.markerType,f=r.name,d=a.useUTC,v=r.valueFormatter||a.valueFormatter||function(C){return C=isArray$1(C)?C:[C],map$1(C,function(E,P){return makeValueReadable(E,isArray$1(_)?_[P]:_,d)})};if(!(l&&u)){var g=c?"":a.markupStyleCreator.makeTooltipMarker(r.markerType,r.markerColor||tokens.color.secondary,s),y=l?"":makeValueReadable(f,"ordinal",d),_=r.valueType,S=u?[]:v(r.value,r.dataIndex),b=!c||!l,x=!c&&l,T=getTooltipTextStyle(o,s),A=T.nameStyle,w=T.valueStyle;return s==="richText"?(c?"":g)+(l?"":wrapInlineNameRichText(a,y,A))+(u?"":wrapInlineValueRichText(a,S,b,x,w)):wrapBlockHTML(o,(c?"":g)+(l?"":wrapInlineNameHTML(y,!c,A))+(u?"":wrapInlineValueHTML(S,b,x,w)),n)}}function buildTooltipMarkup(a,r,n,o,s,l){if(a){var u=getBuilder(a),c={useUTC:s,renderMode:n,orderMode:o,markupStyleCreator:r,valueFormatter:a.valueFormatter};return u(c,a,0,l)}}function getGap(a){return{html:HTML_GAPS[a],richText:RICH_TEXT_GAPS[a]}}function wrapBlockHTML(a,r,n){var o='<div style="clear:both"></div>',s="margin: "+n+"px 0 0",l=getTooltipLineHeight(a);return'<div style="'+s+";"+l+';">'+r+o+"</div>"}function wrapInlineNameHTML(a,r,n){var o=r?"margin-left:2px":"";return'<span style="'+n+";"+o+'">'+encodeHTML(a)+"</span>"}function wrapInlineValueHTML(a,r,n,o){var s=n?"10px":"20px",l=r?"float:right;margin-left:"+s:"";return a=isArray$1(a)?a:[a],'<span style="'+l+";"+o+'">'+map$1(a,function(u){return encodeHTML(u)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(a,r,n){return a.markupStyleCreator.wrapRichTextStyle(r,n)}function wrapInlineValueRichText(a,r,n,o,s){var l=[s],u=o?10:20;return n&&l.push({padding:[0,0,0,u],align:"right"}),a.markupStyleCreator.wrapRichTextStyle(isArray$1(r)?r.join("  "):r,l)}function retrieveVisualColorForTooltipMarker(a,r){var n=a.getData().getItemVisual(r,"style"),o=n[a.visualDrawType];return convertToColorString(o)}function getPaddingFromTooltipModel(a,r){var n=a.get("padding");return n??(r==="richText"?[8,10]:10)}var TooltipMarkupStyleCreator=function(){function a(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return a.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},a.prototype.makeTooltipMarker=function(r,n,o){var s=o==="richText"?this._generateStyleName():null,l=getTooltipMarker({color:n,type:r,renderMode:o,markerId:s});return isString(l)?l:(this.richTextStyles[s]=l.style,l.content)},a.prototype.wrapRichTextStyle=function(r,n){var o={};isArray$1(n)?each$f(n,function(l){return extend(o,l)}):extend(o,n);var s=this._generateStyleName();return this.richTextStyles[s]=o,"{"+s+"|"+r+"}"},a}();function defaultSeriesFormatTooltip(a){var r=a.series,n=a.dataIndex,o=a.multipleSeries,s=r.getData(),l=s.mapDimensionsAll("defaultedTooltip"),u=l.length,c=r.getRawValue(n),f=isArray$1(c),d=retrieveVisualColorForTooltipMarker(r,n),v,g,y,_;if(u>1||f&&!u){var S=formatTooltipArrayValue(c,r,n,l,d);v=S.inlineValues,g=S.inlineValueTypes,y=S.blocks,_=S.inlineValues[0]}else if(u){var b=s.getDimensionInfo(l[0]);_=v=retrieveRawValue(s,n,l[0]),g=b.type}else _=v=f?c[0]:c;var x=isNameSpecified(r),T=x&&r.name||"",A=s.getName(n),w=o?T:A;return createTooltipMarkup("section",{header:T,noHeader:o||!x,sortParam:_,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:d,name:w,noName:!trim$1(w),value:v,valueType:g,dataIndex:n})].concat(y||[])})}function formatTooltipArrayValue(a,r,n,o,s){var l=r.getData(),u=reduce(a,function(g,y,_){var S=l.getDimensionInfo(_);return g=g||S&&S.tooltip!==!1&&S.displayName!=null},!1),c=[],f=[],d=[];o.length?each$f(o,function(g){v(retrieveRawValue(l,n,g),g)}):each$f(a,v);function v(g,y){var _=l.getDimensionInfo(y);!_||_.otherDims.tooltip===!1||(u?d.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:s,name:_.displayName,value:g,valueType:_.type})):(c.push(g),f.push(_.type)))}return{inlineValues:c,inlineValueTypes:f,blocks:d}}var inner$m=makeInner();function getSelectionKey(a,r){return a.getName(r)||a.getId(r)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n._selectedDataIndicesMap={},n}return r.prototype.init=function(n,o,s){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(n,s);var l=inner$m(this).sourceManager=new SourceManager(this);l.prepareSource();var u=this.getInitialData(n,s);wrapData(u,this),this.dataTask.context.data=u,inner$m(this).dataBeforeProcessed=u,autoSeriesName(this),this._initSelectedMapFromData(u)},r.prototype.mergeDefaultAndTheme=function(n,o){var s=fetchLayoutMode(this),l=s?getLayoutParams(n):{},u=this.subType;ComponentModel.hasClass(u)&&(u+="Series"),merge(n,o.getTheme().get(this.subType)),merge(n,this.getDefaultOption()),defaultEmphasis(n,"label",["show"]),this.fillDataTextStyle(n.data),s&&mergeLayoutParam(n,l,s)},r.prototype.mergeOption=function(n,o){n=merge(this.option,n,!0),this.fillDataTextStyle(n.data);var s=fetchLayoutMode(this);s&&mergeLayoutParam(this.option,n,s);var l=inner$m(this).sourceManager;l.dirty(),l.prepareSource();var u=this.getInitialData(n,o);wrapData(u,this),this.dataTask.dirty(),this.dataTask.context.data=u,inner$m(this).dataBeforeProcessed=u,autoSeriesName(this),this._initSelectedMapFromData(u)},r.prototype.fillDataTextStyle=function(n){if(n&&!isTypedArray(n))for(var o=["show"],s=0;s<n.length;s++)n[s]&&n[s].label&&defaultEmphasis(n[s],"label",o)},r.prototype.getInitialData=function(n,o){},r.prototype.appendData=function(n){var o=this.getRawData();o.appendData(n.data)},r.prototype.getData=function(n){var o=getCurrentTask(this);if(o){var s=o.context.data;return n==null||!s.getLinkedData?s:s.getLinkedData(n)}else return inner$m(this).data},r.prototype.getAllData=function(){var n=this.getData();return n&&n.getLinkedDataAll?n.getLinkedDataAll():[{data:n}]},r.prototype.setData=function(n){var o=getCurrentTask(this);if(o){var s=o.context;s.outputData=n,o!==this.dataTask&&(s.data=n)}inner$m(this).data=n},r.prototype.getEncode=function(){var n=this.get("encode",!0);if(n)return createHashMap(n)},r.prototype.getSourceManager=function(){return inner$m(this).sourceManager},r.prototype.getSource=function(){return this.getSourceManager().getSource()},r.prototype.getRawData=function(){return inner$m(this).dataBeforeProcessed},r.prototype.getColorBy=function(){var n=this.get("colorBy");return n||"series"},r.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},r.prototype.getBaseAxis=function(){var n=this.coordinateSystem;return n&&n.getBaseAxis&&n.getBaseAxis()},r.prototype.indicesOfNearest=function(n,o,s,l){var u=this.getData(),c=this.coordinateSystem,f=c&&c.getAxis(n);if(!c||!f)return[];var d=f.dataToCoord(s);l==null&&(l=1/0);var v=[],g=1/0,y=-1,_=0;return u.each(o,function(S,b){var x=f.dataToCoord(S),T=d-x,A=Math.abs(T);A<=l&&((A<g||A===g&&T>=0&&y<0)&&(g=A,y=T,_=0),T===y&&(v[_++]=b))}),v.length=_,v},r.prototype.formatTooltip=function(n,o,s){return defaultSeriesFormatTooltip({series:this,dataIndex:n,multipleSeries:o})},r.prototype.isAnimationEnabled=function(){var n=this.ecModel;if(env.node&&!(n&&n.ssr))return!1;var o=this.getShallow("animation");return o&&this.getData().count()>this.getShallow("animationThreshold")&&(o=!1),!!o},r.prototype.restoreData=function(){this.dataTask.dirty()},r.prototype.getColorFromPalette=function(n,o,s){var l=this.ecModel,u=PaletteMixin.prototype.getColorFromPalette.call(this,n,o,s);return u||(u=l.getColorFromPalette(n,o,s)),u},r.prototype.coordDimToDataDim=function(n){return this.getRawData().mapDimensionsAll(n)},r.prototype.getProgressive=function(){return this.get("progressive")},r.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},r.prototype.select=function(n,o){this._innerSelect(this.getData(o),n)},r.prototype.unselect=function(n,o){var s=this.option.selectedMap;if(s){var l=this.option.selectedMode,u=this.getData(o);if(l==="series"||s==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var c=0;c<n.length;c++){var f=n[c],d=getSelectionKey(u,f);s[d]=!1,this._selectedDataIndicesMap[d]=-1}}},r.prototype.toggleSelect=function(n,o){for(var s=[],l=0;l<n.length;l++)s[0]=n[l],this.isSelected(n[l],o)?this.unselect(s,o):this.select(s,o)},r.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var n=this._selectedDataIndicesMap,o=keys(n),s=[],l=0;l<o.length;l++){var u=n[o[l]];u>=0&&s.push(u)}return s},r.prototype.isSelected=function(n,o){var s=this.option.selectedMap;if(!s)return!1;var l=this.getData(o);return(s==="all"||s[getSelectionKey(l,n)])&&!l.getItemModel(n).get(["select","disabled"])},r.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var n=this.option.universalTransition;return n?n===!0?!0:n&&n.enabled:!1},r.prototype._innerSelect=function(n,o){var s,l,u=this.option,c=u.selectedMode,f=o.length;if(!(!c||!f)){if(c==="series")u.selectedMap="all";else if(c==="multiple"){isObject$3(u.selectedMap)||(u.selectedMap={});for(var d=u.selectedMap,v=0;v<f;v++){var g=o[v],y=getSelectionKey(n,g);d[y]=!0,this._selectedDataIndicesMap[y]=n.getRawIndex(g)}}else if(c==="single"||c===!0){var _=o[f-1],y=getSelectionKey(n,_);u.selectedMap=(s={},s[y]=!0,s),this._selectedDataIndicesMap=(l={},l[y]=n.getRawIndex(_),l)}}},r.prototype._initSelectedMapFromData=function(n){if(!this.option.selectedMap){var o=[];n.hasItemOption&&n.each(function(s){var l=n.getRawDataItem(s);l&&l.selected&&o.push(s)}),o.length>0&&this._innerSelect(n,o)}},r.registerClass=function(n){return ComponentModel.registerClass(n)},r.protoInitialize=function(){var n=r.prototype;n.type="series.__base__",n.seriesIndex=0,n.ignoreStyleOnData=!1,n.hasSymbolVisual=!1,n.defaultSymbol="circle",n.visualStyleAccessPath="itemStyle",n.visualDrawType="fill"}(),r}(ComponentModel);mixin(SeriesModel,DataFormatMixin);mixin(SeriesModel,PaletteMixin);mountExtend(SeriesModel,ComponentModel);function autoSeriesName(a){var r=a.name;isNameSpecified(a)||(a.name=getSeriesAutoName(a)||r)}function getSeriesAutoName(a){var r=a.getRawData(),n=r.mapDimensionsAll("seriesName"),o=[];return each$f(n,function(s){var l=r.getDimensionInfo(s);l.displayName&&o.push(l.displayName)}),o.join(" ")}function dataTaskCount(a){return a.model.getRawData().count()}function dataTaskReset(a){var r=a.model;return r.setData(r.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(a,r){r.outputData&&a.end>r.outputData.count()&&r.model.getRawData().cloneShallow(r.outputData)}function wrapData(a,r){each$f(concatArray(a.CHANGABLE_METHODS,a.DOWNSAMPLE_METHODS),function(n){a.wrapMethod(n,curry$1(onDataChange,r))})}function onDataChange(a,r){var n=getCurrentTask(a);return n&&n.setOutputEnd((r||this).count()),r}function getCurrentTask(a){var r=(a.ecModel||{}).scheduler,n=r&&r.getPipeline(a.uid);if(n){var o=n.currentTask;if(o){var s=o.agentStubMap;s&&(o=s.get(a.uid))}return o}}var ComponentView=function(){function a(){this.group=new Group$3,this.uid=getUID("viewComponent")}return a.prototype.init=function(r,n){},a.prototype.render=function(r,n,o,s){},a.prototype.dispose=function(r,n){},a.prototype.updateView=function(r,n,o,s){},a.prototype.updateLayout=function(r,n,o,s){},a.prototype.updateVisual=function(r,n,o,s){},a.prototype.toggleBlurSeries=function(r,n,o){},a.prototype.eachRendered=function(r){var n=this.group;n&&n.traverse(r)},a}();enableClassExtend(ComponentView);enableClassManagement(ComponentView);function createRenderPlanner(){var a=makeInner();return function(r){var n=a(r),o=r.pipelineContext,s=!!n.large,l=!!n.progressiveRender,u=n.large=!!(o&&o.large),c=n.progressiveRender=!!(o&&o.progressiveRender);return(s!==u||l!==c)&&"reset"}}var inner$l=makeInner(),renderPlanner=createRenderPlanner(),ChartView=function(){function a(){this.group=new Group$3,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return a.prototype.init=function(r,n){},a.prototype.render=function(r,n,o,s){},a.prototype.highlight=function(r,n,o,s){var l=r.getData(s&&s.dataType);l&&toggleHighlight(l,s,"emphasis")},a.prototype.downplay=function(r,n,o,s){var l=r.getData(s&&s.dataType);l&&toggleHighlight(l,s,"normal")},a.prototype.remove=function(r,n){this.group.removeAll()},a.prototype.dispose=function(r,n){},a.prototype.updateView=function(r,n,o,s){this.render(r,n,o,s)},a.prototype.updateLayout=function(r,n,o,s){this.render(r,n,o,s)},a.prototype.updateVisual=function(r,n,o,s){this.render(r,n,o,s)},a.prototype.eachRendered=function(r){traverseElements(this.group,r)},a.markUpdateMethod=function(r,n){inner$l(r).updateMethod=n},a.protoInitialize=function(){var r=a.prototype;r.type="chart"}(),a}();function elSetState(a,r,n){a&&isHighDownDispatcher(a)&&(r==="emphasis"?enterEmphasis:leaveEmphasis)(a,n)}function toggleHighlight(a,r,n){var o=queryDataIndex(a,r),s=r&&r.highlightKey!=null?getHighlightDigit(r.highlightKey):null;o!=null?each$f(normalizeToArray(o),function(l){elSetState(a.getItemGraphicEl(l),n,s)}):a.eachItemGraphicEl(function(l){elSetState(l,n,s)})}enableClassExtend(ChartView);enableClassManagement(ChartView);function renderTaskPlan(a){return renderPlanner(a.model)}function renderTaskReset(a){var r=a.model,n=a.ecModel,o=a.api,s=a.payload,l=r.pipelineContext.progressiveRender,u=a.view,c=s&&inner$l(s).updateMethod,f=l?"incrementalPrepareRender":c&&u[c]?c:"render";return f!=="render"&&u[f](r,n,o,s),progressMethodMap[f]}var progressMethodMap={incrementalPrepareRender:{progress:function(a,r){r.view.incrementalRender(a,r.model,r.ecModel,r.api,r.payload)}},render:{forceFirstProgress:!0,progress:function(a,r){r.view.render(r.model,r.ecModel,r.api,r.payload)}}},ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle(a,r,n){var o,s=0,l=0,u=null,c,f,d,v;r=r||0;function g(){l=new Date().getTime(),u=null,a.apply(f,d||[])}var y=function(){for(var _=[],S=0;S<arguments.length;S++)_[S]=arguments[S];o=new Date().getTime(),f=this,d=_;var b=v||r,x=v||n;v=null,c=o-(x?s:l)-b,clearTimeout(u),x?u=setTimeout(g,b):c>=0?g():u=setTimeout(g,-c),s=o};return y.clear=function(){u&&(clearTimeout(u),u=null)},y.debounceNextCall=function(_){v=_},y}function createOrUpdate(a,r,n,o){var s=a[r];if(s){var l=s[ORIGIN_METHOD]||s,u=s[THROTTLE_TYPE],c=s[RATE];if(c!==n||u!==o){if(n==null||!o)return a[r]=l;s=a[r]=throttle(l,n,o==="debounce"),s[ORIGIN_METHOD]=l,s[THROTTLE_TYPE]=o,s[RATE]=n}return s}}function clear$1(a,r){var n=a[r];n&&n[ORIGIN_METHOD]&&(n.clear&&n.clear(),a[r]=n[ORIGIN_METHOD])}var inner$k=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(a,r){var n=a.visualStyleMapper||defaultStyleMappers[r];return n||(console.warn("Unknown style type '"+r+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(a,r){var n=a.visualDrawType||defaultColorKey[r];return n||(console.warn("Unknown style type '"+r+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,r){var n=a.getData(),o=a.visualStyleAccessPath||"itemStyle",s=a.getModel(o),l=getStyleMapper(a,o),u=l(s),c=s.getShallow("decal");c&&(n.setVisual("decal",c),c.dirty=!0);var f=getDefaultColorKey(a,o),d=u[f],v=isFunction(d)?d:null,g=u.fill==="auto"||u.stroke==="auto";if(!u[f]||v||g){var y=a.getColorFromPalette(a.name,null,r.getSeriesCount());u[f]||(u[f]=y,n.setVisual("colorFromPalette",!0)),u.fill=u.fill==="auto"||isFunction(u.fill)?y:u.fill,u.stroke=u.stroke==="auto"||isFunction(u.stroke)?y:u.stroke}if(n.setVisual("style",u),n.setVisual("drawType",f),!r.isSeriesFiltered(a)&&v)return n.setVisual("colorFromPalette",!1),{dataEach:function(_,S){var b=a.getDataParams(S),x=extend({},u);x[f]=v(b),_.setItemVisual(S,"style",x)}}}},sharedModel=new Model,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,r){if(!(a.ignoreStyleOnData||r.isSeriesFiltered(a))){var n=a.getData(),o=a.visualStyleAccessPath||"itemStyle",s=getStyleMapper(a,o),l=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(u,c){var f=u.getRawDataItem(c);if(f&&f[o]){sharedModel.option=f[o];var d=s(sharedModel),v=u.ensureUniqueItemVisual(c,"style");extend(v,d),sharedModel.option.decal&&(u.setItemVisual(c,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),l in d&&u.setItemVisual(c,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(a){var r=createHashMap();a.eachSeries(function(n){var o=n.getColorBy();if(!n.isColorBySeries()){var s=n.type+"-"+o,l=r.get(s);l||(l={},r.set(s,l)),inner$k(n).scope=l}}),a.eachSeries(function(n){if(!(n.isColorBySeries()||a.isSeriesFiltered(n))){var o=n.getRawData(),s={},l=n.getData(),u=inner$k(n).scope,c=n.visualStyleAccessPath||"itemStyle",f=getDefaultColorKey(n,c);l.each(function(d){var v=l.getRawIndex(d);s[v]=d}),o.each(function(d){var v=s[d],g=l.getItemVisual(v,"colorFromPalette");if(g){var y=l.ensureUniqueItemVisual(v,"style"),_=o.getName(d)||d+"",S=o.count();y[f]=n.getColorFromPalette(_,u,S)}})}})}},PI$5=Math.PI;function defaultLoading(a,r){r=r||{},defaults(r,{text:"loading",textColor:tokens.color.primary,fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255,255,255,0.8)",showSpinner:!0,color:tokens.color.theme[0],spinnerRadius:10,lineWidth:5,zlevel:0});var n=new Group$3,o=new Rect$2({style:{fill:r.maskColor},zlevel:r.zlevel,z:1e4});n.add(o);var s=new ZRText({style:{text:r.text,fill:r.textColor,fontSize:r.fontSize,fontWeight:r.fontWeight,fontStyle:r.fontStyle,fontFamily:r.fontFamily},zlevel:r.zlevel,z:10001}),l=new Rect$2({style:{fill:"none"},textContent:s,textConfig:{position:"right",distance:10},zlevel:r.zlevel,z:10001});n.add(l);var u;return r.showSpinner&&(u=new Arc({shape:{startAngle:-PI$5/2,endAngle:-PI$5/2+.1,r:r.spinnerRadius},style:{stroke:r.color,lineCap:"round",lineWidth:r.lineWidth},zlevel:r.zlevel,z:10001}),u.animateShape(!0).when(1e3,{endAngle:PI$5*3/2}).start("circularInOut"),u.animateShape(!0).when(1e3,{startAngle:PI$5*3/2}).delay(300).start("circularInOut"),n.add(u)),n.resize=function(){var c=s.getBoundingRect().width,f=r.showSpinner?r.spinnerRadius:0,d=(a.getWidth()-f*2-(r.showSpinner&&c?10:0)-c)/2-(r.showSpinner&&c?0:5+c/2)+(r.showSpinner?0:c/2)+(c?0:f),v=a.getHeight()/2;r.showSpinner&&u.setShape({cx:d,cy:v}),l.setShape({x:d-f,y:v-f,width:f*2,height:f*2}),o.setShape({x:0,y:0,width:a.getWidth(),height:a.getHeight()})},n.resize(),n}var Scheduler=function(){function a(r,n,o,s){this._stageTaskMap=createHashMap(),this.ecInstance=r,this.api=n,o=this._dataProcessorHandlers=o.slice(),s=this._visualHandlers=s.slice(),this._allHandlers=o.concat(s)}return a.prototype.restoreData=function(r,n){r.restoreData(n),this._stageTaskMap.each(function(o){var s=o.overallTask;s&&s.dirty()})},a.prototype.getPerformArgs=function(r,n){if(r.__pipeline){var o=this._pipelineMap.get(r.__pipeline.id),s=o.context,l=!n&&o.progressiveEnabled&&(!s||s.progressiveRender)&&r.__idxInPipeline>o.blockIndex,u=l?o.step:null,c=s&&s.modDataCount,f=c!=null?Math.ceil(c/u):null;return{step:u,modBy:f,modDataCount:c}}},a.prototype.getPipeline=function(r){return this._pipelineMap.get(r)},a.prototype.updateStreamModes=function(r,n){var o=this._pipelineMap.get(r.uid),s=r.getData(),l=s.count(),u=o.progressiveEnabled&&n.incrementalPrepareRender&&l>=o.threshold,c=r.get("large")&&l>=r.get("largeThreshold"),f=r.get("progressiveChunkMode")==="mod"?l:null;r.pipelineContext=o.context={progressiveRender:u,modDataCount:f,large:c}},a.prototype.restorePipelines=function(r){var n=this,o=n._pipelineMap=createHashMap();r.eachSeries(function(s){var l=s.getProgressive(),u=s.uid;o.set(u,{id:u,head:null,tail:null,threshold:s.getProgressiveThreshold(),progressiveEnabled:l&&!(s.preventIncremental&&s.preventIncremental()),blockIndex:-1,step:Math.round(l||700),count:0}),n._pipe(s,s.dataTask)})},a.prototype.prepareStageTasks=function(){var r=this._stageTaskMap,n=this.api.getModel(),o=this.api;each$f(this._allHandlers,function(s){var l=r.get(s.uid)||r.set(s.uid,{}),u="";assert(!(s.reset&&s.overallReset),u),s.reset&&this._createSeriesStageTask(s,l,n,o),s.overallReset&&this._createOverallStageTask(s,l,n,o)},this)},a.prototype.prepareView=function(r,n,o,s){var l=r.renderTask,u=l.context;u.model=n,u.ecModel=o,u.api=s,l.__block=!r.incrementalPrepareRender,this._pipe(n,l)},a.prototype.performDataProcessorTasks=function(r,n){this._performStageTasks(this._dataProcessorHandlers,r,n,{block:!0})},a.prototype.performVisualTasks=function(r,n,o){this._performStageTasks(this._visualHandlers,r,n,o)},a.prototype._performStageTasks=function(r,n,o,s){s=s||{};var l=!1,u=this;each$f(r,function(f,d){if(!(s.visualType&&s.visualType!==f.visualType)){var v=u._stageTaskMap.get(f.uid),g=v.seriesTaskMap,y=v.overallTask;if(y){var _,S=y.agentStubMap;S.each(function(x){c(s,x)&&(x.dirty(),_=!0)}),_&&y.dirty(),u.updatePayload(y,o);var b=u.getPerformArgs(y,s.block);S.each(function(x){x.perform(b)}),y.perform(b)&&(l=!0)}else g&&g.each(function(x,T){c(s,x)&&x.dirty();var A=u.getPerformArgs(x,s.block);A.skip=!f.performRawSeries&&n.isSeriesFiltered(x.context.model),u.updatePayload(x,o),x.perform(A)&&(l=!0)})}});function c(f,d){return f.setDirty&&(!f.dirtyMap||f.dirtyMap.get(d.__pipeline.id))}this.unfinished=l||this.unfinished},a.prototype.performSeriesTasks=function(r){var n;r.eachSeries(function(o){n=o.dataTask.perform()||n}),this.unfinished=n||this.unfinished},a.prototype.plan=function(){this._pipelineMap.each(function(r){var n=r.tail;do{if(n.__block){r.blockIndex=n.__idxInPipeline;break}n=n.getUpstream()}while(n)})},a.prototype.updatePayload=function(r,n){n!=="remain"&&(r.context.payload=n)},a.prototype._createSeriesStageTask=function(r,n,o,s){var l=this,u=n.seriesTaskMap,c=n.seriesTaskMap=createHashMap(),f=r.seriesType,d=r.getTargetSeries;r.createOnAllSeries?o.eachRawSeries(v):f?o.eachRawSeriesByType(f,v):d&&d(o,s).each(v);function v(g){var y=g.uid,_=c.set(y,u&&u.get(y)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));_.context={model:g,ecModel:o,api:s,useClearVisual:r.isVisual&&!r.isLayout,plan:r.plan,reset:r.reset,scheduler:l},l._pipe(g,_)}},a.prototype._createOverallStageTask=function(r,n,o,s){var l=this,u=n.overallTask=n.overallTask||createTask({reset:overallTaskReset});u.context={ecModel:o,api:s,overallReset:r.overallReset,scheduler:l};var c=u.agentStubMap,f=u.agentStubMap=createHashMap(),d=r.seriesType,v=r.getTargetSeries,g=!0,y=!1,_="";assert(!r.createOnAllSeries,_),d?o.eachRawSeriesByType(d,S):v?v(o,s).each(S):(g=!1,each$f(o.getSeries(),S));function S(b){var x=b.uid,T=f.set(x,c&&c.get(x)||(y=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));T.context={model:b,overallProgress:g},T.agent=u,T.__block=g,l._pipe(b,T)}y&&u.dirty()},a.prototype._pipe=function(r,n){var o=r.uid,s=this._pipelineMap.get(o);!s.head&&(s.head=n),s.tail&&s.tail.pipe(n),s.tail=n,n.__idxInPipeline=s.count++,n.__pipeline=s},a.wrapStageHandler=function(r,n){return isFunction(r)&&(r={overallReset:r,seriesType:detectSeriseType(r)}),r.uid=getUID("stageHandler"),n&&(r.visualType=n),r},a}();function overallTaskReset(a){a.overallReset(a.ecModel,a.api,a.payload)}function stubReset(a){return a.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(a){return a.plan?a.plan(a.model,a.ecModel,a.api,a.payload):null}function seriesTaskReset(a){a.useClearVisual&&a.data.clearAllVisual();var r=a.resetDefines=normalizeToArray(a.reset(a.model,a.ecModel,a.api,a.payload));return r.length>1?map$1(r,function(n,o){return makeSeriesTaskProgress(o)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(a){return function(r,n){var o=n.data,s=n.resetDefines[a];if(s&&s.dataEach)for(var l=r.start;l<r.end;l++)s.dataEach(o,l);else s&&s.progress&&s.progress(r,o)}}function seriesTaskCount(a){return a.data.count()}function detectSeriseType(a){seriesType=null;try{a(ecModelMock,apiMock)}catch{}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel);mockMethods(apiMock,ExtensionAPI);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(a){seriesType=a};ecModelMock.eachComponent=function(a){a.mainType==="series"&&a.subType&&(seriesType=a.subType)};function mockMethods(a,r){for(var n in r.prototype)a[n]=noop}var color=tokens.darkColor,backgroundColor=color.background,axisCommon=function(){return{axisLine:{lineStyle:{color:color.axisLine}},splitLine:{lineStyle:{color:color.axisSplitLine}},splitArea:{areaStyle:{color:[color.backgroundTint,color.backgroundTransparent]}},minorSplitLine:{lineStyle:{color:color.axisMinorSplitLine}},axisLabel:{color:color.axisLabel},axisName:{}}},matrixAxis={label:{color:color.secondary},itemStyle:{borderColor:color.borderTint},dividerLineStyle:{color:color.border}},theme={darkMode:!0,color:color.theme,backgroundColor,axisPointer:{lineStyle:{color:color.border},crossStyle:{color:color.borderShade},label:{color:color.tertiary}},legend:{textStyle:{color:color.secondary},pageTextStyle:{color:color.tertiary}},textStyle:{color:color.secondary},title:{textStyle:{color:color.primary},subtextStyle:{color:color.quaternary}},toolbox:{iconStyle:{borderColor:color.accent50}},tooltip:{backgroundColor:color.neutral20,defaultBorderColor:color.border,textStyle:{color:color.tertiary}},dataZoom:{borderColor:color.accent10,textStyle:{color:color.tertiary},brushStyle:{color:color.backgroundTint},handleStyle:{color:color.neutral00,borderColor:color.accent20},moveHandleStyle:{color:color.accent40},emphasis:{handleStyle:{borderColor:color.accent50}},dataBackground:{lineStyle:{color:color.accent30},areaStyle:{color:color.accent20}},selectedDataBackground:{lineStyle:{color:color.accent50},areaStyle:{color:color.accent30}}},visualMap:{textStyle:{color:color.secondary},handleStyle:{borderColor:color.neutral30}},timeline:{lineStyle:{color:color.accent10},label:{color:color.tertiary},controlStyle:{color:color.accent30,borderColor:color.accent30}},calendar:{itemStyle:{color:color.neutral00,borderColor:color.neutral20},dayLabel:{color:color.tertiary},monthLabel:{color:color.secondary},yearLabel:{color:color.secondary}},matrix:{x:matrixAxis,y:matrixAxis,backgroundColor:{borderColor:color.axisLine},body:{itemStyle:{borderColor:color.borderTint}}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:color.theme},gauge:{title:{color:color.secondary},axisLine:{lineStyle:{color:[[1,color.neutral05]]}},axisLabel:{color:color.axisLabel},detail:{color:color.primary}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}},funnel:{itemStyle:{borderColor:color.background}},radar:function(){var a=axisCommon();return a.axisName={color:color.axisLabel},a.axisLine.lineStyle.color=color.neutral20,a}(),treemap:{breadcrumb:{itemStyle:{color:color.neutral20,textStyle:{color:color.secondary}},emphasis:{itemStyle:{color:color.neutral30}}}},sunburst:{itemStyle:{borderColor:color.background}},map:{itemStyle:{borderColor:color.border,areaColor:color.neutral10},label:{color:color.tertiary},emphasis:{label:{color:color.primary},itemStyle:{areaColor:color.highlight}},select:{label:{color:color.primary},itemStyle:{areaColor:color.highlight}}},geo:{itemStyle:{borderColor:color.border,areaColor:color.neutral10},emphasis:{label:{color:color.primary},itemStyle:{areaColor:color.highlight}},select:{label:{color:color.primary},itemStyle:{color:color.highlight}}}};theme.categoryAxis.splitLine.show=!1;var ECEventProcessor=function(){function a(){}return a.prototype.normalizeQuery=function(r){var n={},o={},s={};if(isString(r)){var l=parseClassType(r);n.mainType=l.main||null,n.subType=l.sub||null}else{var u=["Index","Name","Id"],c={name:1,dataIndex:1,dataType:1};each$f(r,function(f,d){for(var v=!1,g=0;g<u.length;g++){var y=u[g],_=d.lastIndexOf(y);if(_>0&&_===d.length-y.length){var S=d.slice(0,_);S!=="data"&&(n.mainType=S,n[y.toLowerCase()]=f,v=!0)}}c.hasOwnProperty(d)&&(o[d]=f,v=!0),v||(s[d]=f)})}return{cptQuery:n,dataQuery:o,otherQuery:s}},a.prototype.filter=function(r,n){var o=this.eventInfo;if(!o)return!0;var s=o.targetEl,l=o.packedEvent,u=o.model,c=o.view;if(!u||!c)return!0;var f=n.cptQuery,d=n.dataQuery;return v(f,u,"mainType")&&v(f,u,"subType")&&v(f,u,"index","componentIndex")&&v(f,u,"name")&&v(f,u,"id")&&v(d,l,"name")&&v(d,l,"dataIndex")&&v(d,l,"dataType")&&(!c.filterForExposedEvent||c.filterForExposedEvent(r,n.otherQuery,s,l));function v(g,y,_,S){return g[_]==null||y[S||_]===g[_]}},a.prototype.afterTrigger=function(){this.eventInfo=null},a}(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,r){var n=a.getData();if(a.legendIcon&&n.setVisual("legendIcon",a.legendIcon),!a.hasSymbolVisual)return;for(var o={},s={},l=!1,u=0;u<SYMBOL_PROPS_WITH_CB.length;u++){var c=SYMBOL_PROPS_WITH_CB[u],f=a.get(c);isFunction(f)?(l=!0,s[c]=f):o[c]=f}if(o.symbol=o.symbol||a.defaultSymbol,n.setVisual(extend({legendIcon:a.legendIcon||o.symbol,symbolKeepAspect:a.get("symbolKeepAspect")},o)),r.isSeriesFiltered(a))return;var d=keys(s);function v(g,y){for(var _=a.getRawValue(y),S=a.getDataParams(y),b=0;b<d.length;b++){var x=d[b];g.setItemVisual(y,x,s[x](_,S))}}return{dataEach:l?v:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,r){if(!a.hasSymbolVisual||r.isSeriesFiltered(a))return;var n=a.getData();function o(s,l){for(var u=s.getItemModel(l),c=0;c<SYMBOL_PROPS.length;c++){var f=SYMBOL_PROPS[c],d=u.getShallow(f,!0);d!=null&&s.setItemVisual(l,f,d)}}return{dataEach:n.hasItemOption?o:null}}};function getItemVisualFromData(a,r,n){switch(n){case"color":var o=a.getItemVisual(r,"style");return o[a.getVisual("drawType")];case"opacity":return a.getItemVisual(r,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return a.getItemVisual(r,n)}}function getVisualFromData(a,r){switch(r){case"color":var n=a.getVisual("style");return n[a.getVisual("drawType")];case"opacity":return a.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return a.getVisual(r)}}function setItemVisualFromData(a,r,n,o){switch(n){case"color":var s=a.ensureUniqueItemVisual(r,"style");s[a.getVisual("drawType")]=o,a.setItemVisual(r,"colorFromPalette",!1);break;case"opacity":a.ensureUniqueItemVisual(r,"style").opacity=o;break;case"symbol":case"symbolSize":case"liftZ":a.setItemVisual(r,n,o);break}}function createLegacyDataSelectAction(a,r){function n(o,s){var l=[];return o.eachComponent({mainType:"series",subType:a,query:s},function(u){l.push(u.seriesIndex)}),l}each$f([[a+"ToggleSelect","toggleSelect"],[a+"Select","select"],[a+"UnSelect","unselect"]],function(o){r(o[0],function(s,l,u){s=extend({},s),u.dispatchAction(extend(s,{type:o[1],seriesIndex:n(l,s)}))})})}function handleSeriesLegacySelectEvents(a,r,n,o,s){var l=a+r;n.isSilent(l)||o.eachComponent({mainType:"series",subType:"pie"},function(u){for(var c=u.seriesIndex,f=u.option.selectedMap,d=s.selected,v=0;v<d.length;v++)if(d[v].seriesIndex===c){var g=u.getData(),y=queryDataIndex(g,s.fromActionPayload);n.trigger(l,{type:l,seriesId:u.id,name:isArray$1(y)?g.getName(y[0]):g.getName(y),selected:isString(f)?f:extend({},f)})}})}function handleLegacySelectEvents(a,r,n){a.on("selectchanged",function(o){var s=n.getModel();o.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",r,s,o),handleSeriesLegacySelectEvents("pie","selectchanged",r,s,o)):o.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",r,s,o),handleSeriesLegacySelectEvents("pie","selected",r,s,o)):o.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",r,s,o),handleSeriesLegacySelectEvents("pie","unselected",r,s,o))})}function findEventDispatcher(a,r,n){for(var o;a&&!(r(a)&&(o=a,n));)a=a.__hostTarget||a.parent;return o}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap$1=function(){function a(){this._id="__ec_inner_"+wmUniqueIndex++}return a.prototype.get=function(r){return this._guard(r)[this._id]},a.prototype.set=function(r,n){var o=this._guard(r);return supportDefineProperty?Object.defineProperty(o,this._id,{value:n,enumerable:!1,configurable:!0}):o[this._id]=n,this},a.prototype.delete=function(r){return this.has(r)?(delete this._guard(r)[this._id],!0):!1},a.prototype.has=function(r){return!!this._guard(r)[this._id]},a.prototype._guard=function(r){if(r!==Object(r))throw TypeError("Value of WeakMap is not a non-null object.");return r},a}(),Triangle=Path.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,r){var n=r.cx,o=r.cy,s=r.width/2,l=r.height/2;a.moveTo(n,o-l),a.lineTo(n+s,o+l),a.lineTo(n-s,o+l),a.closePath()}}),Diamond=Path.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,r){var n=r.cx,o=r.cy,s=r.width/2,l=r.height/2;a.moveTo(n,o-l),a.lineTo(n+s,o),a.lineTo(n,o+l),a.lineTo(n-s,o),a.closePath()}}),Pin=Path.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(a,r){var n=r.x,o=r.y,s=r.width/5*3,l=Math.max(s,r.height),u=s/2,c=u*u/(l-u),f=o-l+u+c,d=Math.asin(c/u),v=Math.cos(d)*u,g=Math.sin(d),y=Math.cos(d),_=u*.6,S=u*.7;a.moveTo(n-v,f+c),a.arc(n,f,u,Math.PI-d,Math.PI*2+d),a.bezierCurveTo(n+v-g*_,f+c+y*_,n,o-S,n,o),a.bezierCurveTo(n,o-S,n-v+g*_,f+c+y*_,n-v,f+c),a.closePath()}}),Arrow=Path.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(a,r){var n=r.height,o=r.width,s=r.x,l=r.y,u=o/3*2;a.moveTo(s,l),a.lineTo(s+u,l+n),a.lineTo(s,l+n/4*3),a.lineTo(s-u,l+n),a.lineTo(s,l),a.closePath()}}),symbolCtors={line:Line$1,rect:Rect$2,roundRect:Rect$2,square:Rect$2,circle:Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(a,r,n,o,s){s.x1=a,s.y1=r+o/2,s.x2=a+n,s.y2=r+o/2},rect:function(a,r,n,o,s){s.x=a,s.y=r,s.width=n,s.height=o},roundRect:function(a,r,n,o,s){s.x=a,s.y=r,s.width=n,s.height=o,s.r=Math.min(n,o)/4},square:function(a,r,n,o,s){var l=Math.min(n,o);s.x=a,s.y=r,s.width=l,s.height=l},circle:function(a,r,n,o,s){s.cx=a+n/2,s.cy=r+o/2,s.r=Math.min(n,o)/2},diamond:function(a,r,n,o,s){s.cx=a+n/2,s.cy=r+o/2,s.width=n,s.height=o},pin:function(a,r,n,o,s){s.x=a+n/2,s.y=r+o/2,s.width=n,s.height=o},arrow:function(a,r,n,o,s){s.x=a+n/2,s.y=r+o/2,s.width=n,s.height=o},triangle:function(a,r,n,o,s){s.cx=a+n/2,s.cy=r+o/2,s.width=n,s.height=o}},symbolBuildProxies={};each$f(symbolCtors,function(a,r){symbolBuildProxies[r]=new a});var SymbolClz=Path.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(a,r,n){var o=calculateTextPosition(a,r,n),s=this.shape;return s&&s.symbolType==="pin"&&r.position==="inside"&&(o.y=n.y+n.height*.4),o},buildPath:function(a,r,n){var o=r.symbolType;if(o!=="none"){var s=symbolBuildProxies[o];s||(o="rect",s=symbolBuildProxies[o]),symbolShapeMakers[o](r.x,r.y,r.width,r.height,s.shape),s.buildPath(a,s.shape,n)}}});function symbolPathSetColor(a,r){if(this.type!=="image"){var n=this.style;this.__isEmptyBrush?(n.stroke=a,n.fill=r||tokens.color.neutral00,n.lineWidth=2):this.shape.symbolType==="line"?n.stroke=a:n.fill=a,this.markRedraw()}}function createSymbol$1(a,r,n,o,s,l,u){var c=a.indexOf("empty")===0;c&&(a=a.substr(5,1).toLowerCase()+a.substr(6));var f;return a.indexOf("image://")===0?f=makeImage(a.slice(8),new BoundingRect(r,n,o,s),u?"center":"cover"):a.indexOf("path://")===0?f=makePath(a.slice(7),{},new BoundingRect(r,n,o,s),u?"center":"cover"):f=new SymbolClz({shape:{symbolType:a,x:r,y:n,width:o,height:s}}),f.__isEmptyBrush=c,f.setColor=symbolPathSetColor,l&&f.setColor(l),f}function normalizeSymbolSize(a){return isArray$1(a)||(a=[+a,+a]),[a[0]||0,a[1]||0]}function normalizeSymbolOffset(a,r){if(a!=null)return isArray$1(a)||(a=[a,a]),[parsePercent(a[0],r[0])||0,parsePercent(retrieve2(a[1],a[0]),r[1])||0]}function isSafeNum(a){return isFinite(a)}function createLinearGradient(a,r,n){var o=r.x==null?0:r.x,s=r.x2==null?1:r.x2,l=r.y==null?0:r.y,u=r.y2==null?0:r.y2;r.global||(o=o*n.width+n.x,s=s*n.width+n.x,l=l*n.height+n.y,u=u*n.height+n.y),o=isSafeNum(o)?o:0,s=isSafeNum(s)?s:1,l=isSafeNum(l)?l:0,u=isSafeNum(u)?u:0;var c=a.createLinearGradient(o,l,s,u);return c}function createRadialGradient(a,r,n){var o=n.width,s=n.height,l=Math.min(o,s),u=r.x==null?.5:r.x,c=r.y==null?.5:r.y,f=r.r==null?.5:r.r;r.global||(u=u*o+n.x,c=c*s+n.y,f=f*l),u=isSafeNum(u)?u:.5,c=isSafeNum(c)?c:.5,f=f>=0&&isSafeNum(f)?f:.5;var d=a.createRadialGradient(u,c,0,u,c,f);return d}function getCanvasGradient(a,r,n){for(var o=r.type==="radial"?createRadialGradient(a,r,n):createLinearGradient(a,r,n),s=r.colorStops,l=0;l<s.length;l++)o.addColorStop(s[l].offset,s[l].color);return o}function isClipPathChanged(a,r){if(a===r||!a&&!r)return!1;if(!a||!r||a.length!==r.length)return!0;for(var n=0;n<a.length;n++)if(a[n]!==r[n])return!0;return!1}function parseInt10(a){return parseInt(a,10)}function getSize$1(a,r,n){var o=["width","height"][r],s=["clientWidth","clientHeight"][r],l=["paddingLeft","paddingTop"][r],u=["paddingRight","paddingBottom"][r];if(n[o]!=null&&n[o]!=="auto")return parseFloat(n[o]);var c=document.defaultView.getComputedStyle(a);return(a[s]||parseInt10(c[o])||parseInt10(a.style[o]))-(parseInt10(c[l])||0)-(parseInt10(c[u])||0)|0}function normalizeLineDash(a,r){return!a||a==="solid"||!(r>0)?null:a==="dashed"?[4*r,2*r]:a==="dotted"?[r]:isNumber(a)?[a]:isArray$1(a)?a:null}function getLineDash(a){var r=a.style,n=r.lineDash&&r.lineWidth>0&&normalizeLineDash(r.lineDash,r.lineWidth),o=r.lineDashOffset;if(n){var s=r.strokeNoScale&&a.getLineScale?a.getLineScale():1;s&&s!==1&&(n=map$1(n,function(l){return l/s}),o/=s)}return[n,o]}var pathProxyForDraw=new PathProxy(!0);function styleHasStroke(a){var r=a.stroke;return!(r==null||r==="none"||!(a.lineWidth>0))}function isValidStrokeFillStyle(a){return typeof a=="string"&&a!=="none"}function styleHasFill(a){var r=a.fill;return r!=null&&r!=="none"}function doFillPath(a,r){if(r.fillOpacity!=null&&r.fillOpacity!==1){var n=a.globalAlpha;a.globalAlpha=r.fillOpacity*r.opacity,a.fill(),a.globalAlpha=n}else a.fill()}function doStrokePath(a,r){if(r.strokeOpacity!=null&&r.strokeOpacity!==1){var n=a.globalAlpha;a.globalAlpha=r.strokeOpacity*r.opacity,a.stroke(),a.globalAlpha=n}else a.stroke()}function createCanvasPattern(a,r,n){var o=createOrUpdateImage(r.image,r.__image,n);if(isImageReady(o)){var s=a.createPattern(o,r.repeat||"repeat");if(typeof DOMMatrix=="function"&&s&&s.setTransform){var l=new DOMMatrix;l.translateSelf(r.x||0,r.y||0),l.rotateSelf(0,0,(r.rotation||0)*RADIAN_TO_DEGREE),l.scaleSelf(r.scaleX||1,r.scaleY||1),s.setTransform(l)}return s}}function brushPath(a,r,n,o){var s,l=styleHasStroke(n),u=styleHasFill(n),c=n.strokePercent,f=c<1,d=!r.path;(!r.silent||f)&&d&&r.createPathProxy();var v=r.path||pathProxyForDraw,g=r.__dirty;if(!o){var y=n.fill,_=n.stroke,S=u&&!!y.colorStops,b=l&&!!_.colorStops,x=u&&!!y.image,T=l&&!!_.image,A=void 0,w=void 0,C=void 0,E=void 0,P=void 0;(S||b)&&(P=r.getBoundingRect()),S&&(A=g?getCanvasGradient(a,y,P):r.__canvasFillGradient,r.__canvasFillGradient=A),b&&(w=g?getCanvasGradient(a,_,P):r.__canvasStrokeGradient,r.__canvasStrokeGradient=w),x&&(C=g||!r.__canvasFillPattern?createCanvasPattern(a,y,r):r.__canvasFillPattern,r.__canvasFillPattern=C),T&&(E=g||!r.__canvasStrokePattern?createCanvasPattern(a,_,r):r.__canvasStrokePattern,r.__canvasStrokePattern=E),S?a.fillStyle=A:x&&(C?a.fillStyle=C:u=!1),b?a.strokeStyle=w:T&&(E?a.strokeStyle=E:l=!1)}var I=r.getGlobalScale();v.setScale(I[0],I[1],r.segmentIgnoreThreshold);var M,R;a.setLineDash&&n.lineDash&&(s=getLineDash(r),M=s[0],R=s[1]);var O=!0;(d||g&SHAPE_CHANGED_BIT)&&(v.setDPR(a.dpr),f?v.setContext(null):(v.setContext(a),O=!1),v.reset(),r.buildPath(v,r.shape,o),v.toStatic(),r.pathUpdated()),O&&v.rebuildPath(a,f?c:1),M&&(a.setLineDash(M),a.lineDashOffset=R),o||(n.strokeFirst?(l&&doStrokePath(a,n),u&&doFillPath(a,n)):(u&&doFillPath(a,n),l&&doStrokePath(a,n))),M&&a.setLineDash([])}function brushImage(a,r,n){var o=r.__image=createOrUpdateImage(n.image,r.__image,r,r.onload);if(!(!o||!isImageReady(o))){var s=n.x||0,l=n.y||0,u=r.getWidth(),c=r.getHeight(),f=o.width/o.height;if(u==null&&c!=null?u=c*f:c==null&&u!=null?c=u/f:u==null&&c==null&&(u=o.width,c=o.height),n.sWidth&&n.sHeight){var d=n.sx||0,v=n.sy||0;a.drawImage(o,d,v,n.sWidth,n.sHeight,s,l,u,c)}else if(n.sx&&n.sy){var d=n.sx,v=n.sy,g=u-d,y=c-v;a.drawImage(o,d,v,g,y,s,l,u,c)}else a.drawImage(o,s,l,u,c)}}function brushText(a,r,n){var o,s=n.text;if(s!=null&&(s+=""),s){a.font=n.font||DEFAULT_FONT,a.textAlign=n.textAlign,a.textBaseline=n.textBaseline;var l=void 0,u=void 0;a.setLineDash&&n.lineDash&&(o=getLineDash(r),l=o[0],u=o[1]),l&&(a.setLineDash(l),a.lineDashOffset=u),n.strokeFirst?(styleHasStroke(n)&&a.strokeText(s,n.x,n.y),styleHasFill(n)&&a.fillText(s,n.x,n.y)):(styleHasFill(n)&&a.fillText(s,n.x,n.y),styleHasStroke(n)&&a.strokeText(s,n.x,n.y)),l&&a.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(a,r,n,o,s){var l=!1;if(!o&&(n=n||{},r===n))return!1;if(o||r.opacity!==n.opacity){flushPathDrawn(a,s),l=!0;var u=Math.max(Math.min(r.opacity,1),0);a.globalAlpha=isNaN(u)?DEFAULT_COMMON_STYLE.opacity:u}(o||r.blend!==n.blend)&&(l||(flushPathDrawn(a,s),l=!0),a.globalCompositeOperation=r.blend||DEFAULT_COMMON_STYLE.blend);for(var c=0;c<SHADOW_NUMBER_PROPS.length;c++){var f=SHADOW_NUMBER_PROPS[c];(o||r[f]!==n[f])&&(l||(flushPathDrawn(a,s),l=!0),a[f]=a.dpr*(r[f]||0))}return(o||r.shadowColor!==n.shadowColor)&&(l||(flushPathDrawn(a,s),l=!0),a.shadowColor=r.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),l}function bindPathAndTextCommonStyle(a,r,n,o,s){var l=getStyle(r,s.inHover),u=o?null:n&&getStyle(n,s.inHover)||{};if(l===u)return!1;var c=bindCommonProps(a,l,u,o,s);if((o||l.fill!==u.fill)&&(c||(flushPathDrawn(a,s),c=!0),isValidStrokeFillStyle(l.fill)&&(a.fillStyle=l.fill)),(o||l.stroke!==u.stroke)&&(c||(flushPathDrawn(a,s),c=!0),isValidStrokeFillStyle(l.stroke)&&(a.strokeStyle=l.stroke)),(o||l.opacity!==u.opacity)&&(c||(flushPathDrawn(a,s),c=!0),a.globalAlpha=l.opacity==null?1:l.opacity),r.hasStroke()){var f=l.lineWidth,d=f/(l.strokeNoScale&&r.getLineScale?r.getLineScale():1);a.lineWidth!==d&&(c||(flushPathDrawn(a,s),c=!0),a.lineWidth=d)}for(var v=0;v<STROKE_PROPS.length;v++){var g=STROKE_PROPS[v],y=g[0];(o||l[y]!==u[y])&&(c||(flushPathDrawn(a,s),c=!0),a[y]=l[y]||g[1])}return c}function bindImageStyle(a,r,n,o,s){return bindCommonProps(a,getStyle(r,s.inHover),n&&getStyle(n,s.inHover),o,s)}function setContextTransform(a,r){var n=r.transform,o=a.dpr||1;n?a.setTransform(o*n[0],o*n[1],o*n[2],o*n[3],o*n[4],o*n[5]):a.setTransform(o,0,0,o,0,0)}function updateClipStatus(a,r,n){for(var o=!1,s=0;s<a.length;s++){var l=a[s];o=o||l.isZeroArea(),setContextTransform(r,l),r.beginPath(),l.buildPath(r,l.shape),r.clip()}n.allClipped=o}function isTransformChanged(a,r){return a&&r?a[0]!==r[0]||a[1]!==r[1]||a[2]!==r[2]||a[3]!==r[3]||a[4]!==r[4]||a[5]!==r[5]:!(!a&&!r)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(a){var r=styleHasFill(a),n=styleHasStroke(a);return!(a.lineDash||!(+r^+n)||r&&typeof a.fill!="string"||n&&typeof a.stroke!="string"||a.strokePercent<1||a.strokeOpacity<1||a.fillOpacity<1)}function flushPathDrawn(a,r){r.batchFill&&a.fill(),r.batchStroke&&a.stroke(),r.batchFill="",r.batchStroke=""}function getStyle(a,r){return r&&a.__hoverStyle||a.style}function brushSingle(a,r){brush$1(a,r,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(a,r,n,o){var s=r.transform;if(!r.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1)){r.__dirty&=~REDRAW_BIT,r.__isRendered=!1;return}var l=r.__clipPaths,u=n.prevElClipPaths,c=!1,f=!1;if((!u||isClipPathChanged(l,u))&&(u&&u.length&&(flushPathDrawn(a,n),a.restore(),f=c=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),l&&l.length&&(flushPathDrawn(a,n),a.save(),updateClipStatus(l,a,n),c=!0),n.prevElClipPaths=l),n.allClipped){r.__isRendered=!1;return}r.beforeBrush&&r.beforeBrush(),r.innerBeforeBrush();var d=n.prevEl;d||(f=c=!0);var v=r instanceof Path&&r.autoBatch&&canPathBatch(r.style);c||isTransformChanged(s,d.transform)?(flushPathDrawn(a,n),setContextTransform(a,r)):v||flushPathDrawn(a,n);var g=getStyle(r,n.inHover);r instanceof Path?(n.lastDrawType!==DRAW_TYPE_PATH&&(f=!0,n.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(a,r,d,f,n),(!v||!n.batchFill&&!n.batchStroke)&&a.beginPath(),brushPath(a,r,g,v),v&&(n.batchFill=g.fill||"",n.batchStroke=g.stroke||"")):r instanceof TSpan?(n.lastDrawType!==DRAW_TYPE_TEXT&&(f=!0,n.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(a,r,d,f,n),brushText(a,r,g)):r instanceof ZRImage?(n.lastDrawType!==DRAW_TYPE_IMAGE&&(f=!0,n.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(a,r,d,f,n),brushImage(a,r,g)):r.getTemporalDisplayables&&(n.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(f=!0,n.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(a,r,n)),v&&o&&flushPathDrawn(a,n),r.innerAfterBrush(),r.afterBrush&&r.afterBrush(),n.prevEl=r,r.__dirty=0,r.__isRendered=!0}function brushIncremental(a,r,n){var o=r.getDisplayables(),s=r.getTemporalDisplayables();a.save();var l={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover},u,c;for(u=r.getCursor(),c=o.length;u<c;u++){var f=o[u];f.beforeBrush&&f.beforeBrush(),f.innerBeforeBrush(),brush$1(a,f,l,u===c-1),f.innerAfterBrush(),f.afterBrush&&f.afterBrush(),l.prevEl=f}for(var d=0,v=s.length;d<v;d++){var f=s[d];f.beforeBrush&&f.beforeBrush(),f.innerBeforeBrush(),brush$1(a,f,l,d===v-1),f.innerAfterBrush(),f.afterBrush&&f.afterBrush(),l.prevEl=f}r.clearTemporalDisplayables(),r.notClear=!0,a.restore()}var decalMap=new WeakMap$1,decalCache=new LRU(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(a,r){if(a==="none")return null;var n=r.getDevicePixelRatio(),o=r.getZr(),s=o.painter.type==="svg";a.dirty&&decalMap.delete(a);var l=decalMap.get(a);if(l)return l;var u=defaults(a,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});u.backgroundColor==="none"&&(u.backgroundColor=null);var c={repeat:"repeat"};return f(c),c.rotation=u.rotation,c.scaleX=c.scaleY=s?1:1/n,decalMap.set(a,c),a.dirty=!1,c;function f(d){for(var v=[n],g=!0,y=0;y<decalKeys.length;++y){var _=u[decalKeys[y]];if(_!=null&&!isArray$1(_)&&!isString(_)&&!isNumber(_)&&typeof _!="boolean"){g=!1;break}v.push(_)}var S;if(g){S=v.join(",")+(s?"-svg":"");var b=decalCache.get(S);b&&(s?d.svgElement=b:d.image=b)}var x=normalizeDashArrayX(u.dashArrayX),T=normalizeDashArrayY(u.dashArrayY),A=normalizeSymbolArray(u.symbol),w=getLineBlockLengthX(x),C=getLineBlockLengthY(T),E=!s&&platformApi.createCanvas(),P=s&&{tag:"g",attrs:{},key:"dcl",children:[]},I=R(),M;E&&(E.width=I.width*n,E.height=I.height*n,M=E.getContext("2d")),O(),g&&decalCache.put(S,E||P),d.image=E,d.svgElement=P,d.svgWidth=I.width,d.svgHeight=I.height;function R(){for(var $=1,B=0,F=w.length;B<F;++B)$=getLeastCommonMultiple($,w[B]);for(var z=1,B=0,F=A.length;B<F;++B)z=getLeastCommonMultiple(z,A[B].length);$*=z;var G=C*w.length*A.length;return{width:Math.max(1,Math.min($,u.maxTileWidth)),height:Math.max(1,Math.min(G,u.maxTileHeight))}}function O(){M&&(M.clearRect(0,0,E.width,E.height),u.backgroundColor&&(M.fillStyle=u.backgroundColor,M.fillRect(0,0,E.width,E.height)));for(var $=0,B=0;B<T.length;++B)$+=T[B];if($<=0)return;for(var F=-C,z=0,G=0,D=0;F<I.height;){if(z%2===0){for(var V=G/2%A.length,L=0,N=0,U=0;L<I.width*2;){for(var H=0,B=0;B<x[D].length;++B)H+=x[D][B];if(H<=0)break;if(N%2===0){var q=(1-u.symbolSize)*.5,Z=L+x[D][N]*q,ee=F+T[z]*q,ne=x[D][N]*u.symbolSize,ue=T[z]*u.symbolSize,K=U/2%A[V].length;J(Z,ee,ne,ue,A[V][K])}L+=x[D][N],++U,++N,N===x[D].length&&(N=0)}++D,D===x.length&&(D=0)}F+=T[z],++G,++z,z===T.length&&(z=0)}function J(X,ie,te,W,Y){var j=s?1:n,Q=createSymbol$1(Y,X*j,ie*j,te*j,W*j,u.color,u.symbolKeepAspect);if(s){var re=o.painter.renderOneToVNode(Q);re&&P.children.push(re)}else brushSingle(M,Q)}}}}function normalizeSymbolArray(a){if(!a||a.length===0)return[["rect"]];if(isString(a))return[[a]];for(var r=!0,n=0;n<a.length;++n)if(!isString(a[n])){r=!1;break}if(r)return normalizeSymbolArray([a]);for(var o=[],n=0;n<a.length;++n)isString(a[n])?o.push([a[n]]):o.push(a[n]);return o}function normalizeDashArrayX(a){if(!a||a.length===0)return[[0,0]];if(isNumber(a)){var r=Math.ceil(a);return[[r,r]]}for(var n=!0,o=0;o<a.length;++o)if(!isNumber(a[o])){n=!1;break}if(n)return normalizeDashArrayX([a]);for(var s=[],o=0;o<a.length;++o)if(isNumber(a[o])){var r=Math.ceil(a[o]);s.push([r,r])}else{var r=map$1(a[o],function(c){return Math.ceil(c)});r.length%2===1?s.push(r.concat(r)):s.push(r)}return s}function normalizeDashArrayY(a){if(!a||typeof a=="object"&&a.length===0)return[0,0];if(isNumber(a)){var r=Math.ceil(a);return[r,r]}var n=map$1(a,function(o){return Math.ceil(o)});return a.length%2?n.concat(n):n}function getLineBlockLengthX(a){return map$1(a,function(r){return getLineBlockLengthY(r)})}function getLineBlockLengthY(a){for(var r=0,n=0;n<a.length;++n)r+=a[n];return a.length%2===1?r*2:r}function decalVisual(a,r){a.eachRawSeries(function(n){if(!a.isSeriesFiltered(n)){var o=n.getData();o.hasItemVisual()&&o.each(function(u){var c=o.getItemVisual(u,"decal");if(c){var f=o.ensureUniqueItemVisual(u,"style");f.decal=createOrUpdatePatternFromDecal(c,r)}});var s=o.getVisual("decal");if(s){var l=o.getVisual("style");l.decal=createOrUpdatePatternFromDecal(s,r)}}})}var lifecycle=new Eventful,implsStore={};function registerImpl(a,r){implsStore[a]=r}function getImpl(a){return implsStore[a]}var customRenderers={};function registerCustomSeries(a,r){customRenderers[a]=r}function getCustomSeries(a){return customRenderers[a]}var TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",MAIN_PROCESS_VERSION_KEY="__mainProcessVersion",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(a){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(this.isDisposed()){this.id;return}return toLowercaseNameAndCallEventful(this,a,r)}}function createRegisterEventWithLowercaseMessageCenter(a){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return toLowercaseNameAndCallEventful(this,a,r)}}function toLowercaseNameAndCallEventful(a,r,n){return n[0]=n[0]&&n[0].toLowerCase(),Eventful.prototype[r].apply(a,n)}var MessageCenter=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r}(Eventful),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on");messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,updateMainProcessVersion,ECharts=function(a){__extends(r,a);function r(n,o,s){var l=a.call(this,new ECEventProcessor)||this;l._chartsViews=[],l._chartsMap={},l._componentsViews=[],l._componentsMap={},l._pendingActions=[],s=s||{},l._dom=n;var u="canvas",c="auto",f=!1;l[MAIN_PROCESS_VERSION_KEY]=1,s.ssr&&registerSSRDataGetter(function(y){var _=getECData(y),S=_.dataIndex;if(S!=null){var b=createHashMap();return b.set("series_index",_.seriesIndex),b.set("data_index",S),_.ssrType&&b.set("ssr_type",_.ssrType),b}});var d=l._zr=init$2(n,{renderer:s.renderer||u,devicePixelRatio:s.devicePixelRatio,width:s.width,height:s.height,ssr:s.ssr,useDirtyRect:retrieve2(s.useDirtyRect,f),useCoarsePointer:retrieve2(s.useCoarsePointer,c),pointerSize:s.pointerSize});l._ssr=s.ssr,l._throttledZrFlush=throttle(bind$1(d.flush,d),17),l._updateTheme(o),l._locale=createLocaleObject(s.locale||SYSTEM_LANG),l._coordSysMgr=new CoordinateSystemManager;var v=l._api=createExtensionAPI(l);function g(y,_){return y.__prio-_.__prio}return sort$2(visualFuncs,g),sort$2(dataProcessorFuncs,g),l._scheduler=new Scheduler(l,v,dataProcessorFuncs,visualFuncs),l._messageCenter=new MessageCenter,l._initEvents(),l.resize=bind$1(l.resize,l),d.animation.on("frame",l._onframe,l),bindRenderedEvent(d,l),bindMouseEvent(d,l),setAsPrimitive(l),l}return r.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var n=this._scheduler;if(this[PENDING_UPDATE]){var o=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0,updateMainProcessVersion(this);try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(f){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,f}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,o),triggerUpdatedEvent.call(this,o)}else if(n.unfinished){var s=TEST_FRAME_REMAIN_TIME,l=this._model,u=this._api;n.unfinished=!1;do{var c=+new Date;n.performSeriesTasks(l),n.performDataProcessorTasks(l),updateStreamModes(this,l),n.performVisualTasks(l),renderSeries(this,this._model,u,"remain",{}),s-=+new Date-c}while(s>0&&n.unfinished);n.unfinished||this._zr.flush()}}},r.prototype.getDom=function(){return this._dom},r.prototype.getId=function(){return this.id},r.prototype.getZr=function(){return this._zr},r.prototype.isSSR=function(){return this._ssr},r.prototype.setOption=function(n,o,s){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}var l,u,c;if(isObject$3(o)&&(s=o.lazyUpdate,l=o.silent,u=o.replaceMerge,c=o.transition,o=o.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,updateMainProcessVersion(this),!this._model||o){var f=new OptionManager(this._api),d=this._theme,v=this._model=new GlobalModel;v.scheduler=this._scheduler,v.ssr=this._ssr,v.init(null,null,null,d,this._locale,f)}this._model.setOption(n,{replaceMerge:u},optionPreprocessorFuncs);var g={seriesTransition:c,optionChanged:!0};if(s)this[PENDING_UPDATE]={silent:l,updateParams:g},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,g)}catch(y){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,y}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,l),triggerUpdatedEvent.call(this,l)}}},r.prototype.setTheme=function(n,o){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}var s=this._model;if(s){var l=o&&o.silent,u=null;this[PENDING_UPDATE]&&(l==null&&(l=this[PENDING_UPDATE].silent),u=this[PENDING_UPDATE].updateParams,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0,updateMainProcessVersion(this);try{this._updateTheme(n),s.setTheme(this._theme),prepare(this),updateMethods.update.call(this,{type:"setTheme"},u)}catch(c){throw this[IN_MAIN_PROCESS_KEY]=!1,c}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,l),triggerUpdatedEvent.call(this,l)}}},r.prototype._updateTheme=function(n){isString(n)&&(n=themeStorage[n]),n&&(n=clone$4(n),n&&globalBackwardCompat(n,!0),this._theme=n)},r.prototype.getModel=function(){return this._model},r.prototype.getOption=function(){return this._model&&this._model.getOption()},r.prototype.getWidth=function(){return this._zr.getWidth()},r.prototype.getHeight=function(){return this._zr.getHeight()},r.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env.hasGlobalWindow&&window.devicePixelRatio||1},r.prototype.getRenderedCanvas=function(n){return this.renderToCanvas(n)},r.prototype.renderToCanvas=function(n){n=n||{};var o=this._zr.painter;return o.getRenderedCanvas({backgroundColor:n.backgroundColor||this._model.get("backgroundColor"),pixelRatio:n.pixelRatio||this.getDevicePixelRatio()})},r.prototype.renderToSVGString=function(n){n=n||{};var o=this._zr.painter;return o.renderToString({useViewBox:n.useViewBox})},r.prototype.getSvgDataURL=function(){var n=this._zr,o=n.storage.getDisplayList();return each$f(o,function(s){s.stopAnimation(null,!0)}),n.painter.toDataURL()},r.prototype.getDataURL=function(n){if(this._disposed){this.id;return}n=n||{};var o=n.excludeComponents,s=this._model,l=[],u=this;each$f(o,function(f){s.eachComponent({mainType:f},function(d){var v=u._componentsMap[d.__viewId];v.group.ignore||(l.push(v),v.group.ignore=!0)})});var c=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(n).toDataURL("image/"+(n&&n.type||"png"));return each$f(l,function(f){f.group.ignore=!1}),c},r.prototype.getConnectedDataURL=function(n){if(this._disposed){this.id;return}var o=n.type==="svg",s=this.group,l=Math.min,u=Math.max,c=1/0;if(connectedGroups[s]){var f=c,d=c,v=-c,g=-c,y=[],_=n&&n.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(w,C){if(w.group===s){var E=o?w.getZr().painter.getSvgDom().innerHTML:w.renderToCanvas(clone$4(n)),P=w.getDom().getBoundingClientRect();f=l(P.left,f),d=l(P.top,d),v=u(P.right,v),g=u(P.bottom,g),y.push({dom:E,left:P.left,top:P.top})}}),f*=_,d*=_,v*=_,g*=_;var S=v-f,b=g-d,x=platformApi.createCanvas(),T=init$2(x,{renderer:o?"svg":"canvas"});if(T.resize({width:S,height:b}),o){var A="";return each$f(y,function(w){var C=w.left-f,E=w.top-d;A+='<g transform="translate('+C+","+E+')">'+w.dom+"</g>"}),T.painter.getSvgRoot().innerHTML=A,n.connectedBackgroundColor&&T.painter.setBackgroundColor(n.connectedBackgroundColor),T.refreshImmediately(),T.painter.toDataURL()}else return n.connectedBackgroundColor&&T.add(new Rect$2({shape:{x:0,y:0,width:S,height:b},style:{fill:n.connectedBackgroundColor}})),each$f(y,function(w){var C=new ZRImage({style:{x:w.left*_-f,y:w.top*_-d,image:w.dom}});T.add(C)}),T.refreshImmediately(),x.toDataURL("image/"+(n&&n.type||"png"))}else return this.getDataURL(n)},r.prototype.convertToPixel=function(n,o,s){return doConvertPixel(this,"convertToPixel",n,o,s)},r.prototype.convertToLayout=function(n,o,s){return doConvertPixel(this,"convertToLayout",n,o,s)},r.prototype.convertFromPixel=function(n,o,s){return doConvertPixel(this,"convertFromPixel",n,o,s)},r.prototype.containPixel=function(n,o){if(this._disposed){this.id;return}var s=this._model,l,u=parseFinder$1(s,n);return each$f(u,function(c,f){f.indexOf("Models")>=0&&each$f(c,function(d){var v=d.coordinateSystem;if(v&&v.containPoint)l=l||!!v.containPoint(o);else if(f==="seriesModels"){var g=this._chartsMap[d.__viewId];g&&g.containPoint&&(l=l||g.containPoint(o,d))}},this)},this),!!l},r.prototype.getVisual=function(n,o){var s=this._model,l=parseFinder$1(s,n,{defaultMainType:"series"}),u=l.seriesModel,c=u.getData(),f=l.hasOwnProperty("dataIndexInside")?l.dataIndexInside:l.hasOwnProperty("dataIndex")?c.indexOfRawIndex(l.dataIndex):null;return f!=null?getItemVisualFromData(c,f,o):getVisualFromData(c,o)},r.prototype.getViewOfComponentModel=function(n){return this._componentsMap[n.__viewId]},r.prototype.getViewOfSeriesModel=function(n){return this._chartsMap[n.__viewId]},r.prototype._initEvents=function(){var n=this;each$f(MOUSE_EVENT_NAMES,function(s){var l=function(u){var c=n.getModel(),f=u.target,d,v=s==="globalout";if(v?d={}:f&&findEventDispatcher(f,function(b){var x=getECData(b);if(x&&x.dataIndex!=null){var T=x.dataModel||c.getSeriesByIndex(x.seriesIndex);return d=T&&T.getDataParams(x.dataIndex,x.dataType,f)||{},!0}else if(x.eventData)return d=extend({},x.eventData),!0},!0),d){var g=d.componentType,y=d.componentIndex;(g==="markLine"||g==="markPoint"||g==="markArea")&&(g="series",y=d.seriesIndex);var _=g&&y!=null&&c.getComponent(g,y),S=_&&n[_.mainType==="series"?"_chartsMap":"_componentsMap"][_.__viewId];d.event=u,d.type=s,n._$eventProcessor.eventInfo={targetEl:f,packedEvent:d,model:_,view:S},n.trigger(s,d)}};l.zrEventfulCallAtLast=!0,n._zr.on(s,l,n)});var o=this._messageCenter;each$f(publicEventTypeMap,function(s,l){o.on(l,function(u){n.trigger(l,u)})}),handleLegacySelectEvents(o,this,this._api)},r.prototype.isDisposed=function(){return this._disposed},r.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},r.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var n=this.getDom();n&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var o=this,s=o._api,l=o._model;each$f(o._componentsViews,function(u){u.dispose(l,s)}),each$f(o._chartsViews,function(u){u.dispose(l,s)}),o._zr.dispose(),o._dom=o._model=o._chartsMap=o._componentsMap=o._chartsViews=o._componentsViews=o._scheduler=o._api=o._zr=o._throttledZrFlush=o._theme=o._coordSysMgr=o._messageCenter=null,delete instances[o.id]},r.prototype.resize=function(n){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}this._zr.resize(n);var o=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!o){var s=o.resetOption("media"),l=n&&n.silent;this[PENDING_UPDATE]&&(l==null&&(l=this[PENDING_UPDATE].silent),s=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0,updateMainProcessVersion(this);try{s&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},n&&n.animation)})}catch(u){throw this[IN_MAIN_PROCESS_KEY]=!1,u}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,l),triggerUpdatedEvent.call(this,l)}}},r.prototype.showLoading=function(n,o){if(this._disposed){this.id;return}if(isObject$3(n)&&(o=n,n=""),n=n||"default",this.hideLoading(),!!loadingEffects[n]){var s=loadingEffects[n](this._api,o),l=this._zr;this._loadingFX=s,l.add(s)}},r.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},r.prototype.makeActionFromEvent=function(n){var o=extend({},n);return o.type=connectionEventRevertMap[n.type],o},r.prototype.dispatchAction=function(n,o){if(this._disposed){this.id;return}if(isObject$3(o)||(o={silent:!!o}),!!actions[n.type]&&this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(n);return}var s=o.silent;doDispatchAction.call(this,n,s);var l=o.flush;l?this._zr.flush():l!==!1&&env.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,s),triggerUpdatedEvent.call(this,s)}},r.prototype.updateLabelLayout=function(){lifecycle.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},r.prototype.appendData=function(n){if(this._disposed){this.id;return}var o=n.seriesIndex,s=this.getModel(),l=s.getSeriesByIndex(o);l.appendData(n),this._scheduler.unfinished=!0,this.getZr().wakeUp()},r.internalField=function(){prepare=function(g){var y=g._scheduler;y.restorePipelines(g._model),y.prepareStageTasks(),prepareView(g,!0),prepareView(g,!1),y.plan()},prepareView=function(g,y){for(var _=g._model,S=g._scheduler,b=y?g._componentsViews:g._chartsViews,x=y?g._componentsMap:g._chartsMap,T=g._zr,A=g._api,w=0;w<b.length;w++)b[w].__alive=!1;y?_.eachComponent(function(P,I){P!=="series"&&C(I)}):_.eachSeries(C);function C(P){var I=P.__requireNewView;P.__requireNewView=!1;var M="_ec_"+P.id+"_"+P.type,R=!I&&x[M];if(!R){var O=parseClassType(P.type),$=y?ComponentView.getClass(O.main,O.sub):ChartView.getClass(O.sub);R=new $,R.init(_,A),x[M]=R,b.push(R),T.add(R.group)}P.__viewId=R.__id=M,R.__alive=!0,R.__model=P,R.group.__ecComponentInfo={mainType:P.mainType,index:P.componentIndex},!y&&S.prepareView(R,P,_,A)}for(var w=0;w<b.length;){var E=b[w];E.__alive?w++:(!y&&E.renderTask.dispose(),T.remove(E.group),E.dispose(_,A),b.splice(w,1),x[E.__id]===E&&delete x[E.__id],E.__id=E.group.__ecComponentInfo=null)}},updateDirectly=function(g,y,_,S,b){var x=g._model;if(x.setUpdatePayload(_),!S){each$f([].concat(g._componentsViews).concat(g._chartsViews),E);return}var T={};T[S+"Id"]=_[S+"Id"],T[S+"Index"]=_[S+"Index"],T[S+"Name"]=_[S+"Name"];var A={mainType:S,query:T};b&&(A.subType=b);var w=_.excludeSeriesId,C;w!=null&&(C=createHashMap(),each$f(normalizeToArray(w),function(P){var I=convertOptionIdName(P,null);I!=null&&C.set(I,!0)})),x&&x.eachComponent(A,function(P){var I=C&&C.get(P.id)!=null;if(!I)if(isHighDownPayload(_))if(P instanceof SeriesModel)_.type===HIGHLIGHT_ACTION_TYPE&&!_.notBlur&&!P.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload(P,_,g._api);else{var M=findComponentHighDownDispatchers(P.mainType,P.componentIndex,_.name,g._api),R=M.focusSelf,O=M.dispatchers;_.type===HIGHLIGHT_ACTION_TYPE&&R&&!_.notBlur&&blurComponent(P.mainType,P.componentIndex,g._api),O&&each$f(O,function($){_.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis($):leaveEmphasis($)})}else isSelectChangePayload(_)&&P instanceof SeriesModel&&(toggleSelectionFromPayload(P,_,g._api),updateSeriesElementSelection(P),markStatusToUpdate(g))},g),x&&x.eachComponent(A,function(P){var I=C&&C.get(P.id)!=null;I||E(g[S==="series"?"_chartsMap":"_componentsMap"][P.__viewId])},g);function E(P){P&&P.__alive&&P[y]&&P[y](P.__model,x,g._api,_)}},updateMethods={prepareAndUpdate:function(g){prepare(this),updateMethods.update.call(this,g,g&&{optionChanged:g.newOption!=null})},update:function(g,y){var _=this._model,S=this._api,b=this._zr,x=this._coordSysMgr,T=this._scheduler;if(_){_.setUpdatePayload(g),T.restoreData(_,g),T.performSeriesTasks(_),x.create(_,S),T.performDataProcessorTasks(_,g),updateStreamModes(this,_),x.update(_,S),o(_),T.performVisualTasks(_,g);var A=_.get("backgroundColor")||"transparent";b.setBackgroundColor(A);var w=_.get("darkMode");w!=null&&w!=="auto"&&b.setDarkMode(w),render(this,_,S,g,y),lifecycle.trigger("afterupdate",_,S)}},updateTransform:function(g){var y=this,_=this._model,S=this._api;if(_){_.setUpdatePayload(g);var b=[];_.eachComponent(function(T,A){if(T!=="series"){var w=y.getViewOfComponentModel(A);if(w&&w.__alive)if(w.updateTransform){var C=w.updateTransform(A,_,S,g);C&&C.update&&b.push(w)}else b.push(w)}});var x=createHashMap();_.eachSeries(function(T){var A=y._chartsMap[T.__viewId];if(A.updateTransform){var w=A.updateTransform(T,_,S,g);w&&w.update&&x.set(T.uid,1)}else x.set(T.uid,1)}),o(_),this._scheduler.performVisualTasks(_,g,{setDirty:!0,dirtyMap:x}),renderSeries(this,_,S,g,{},x),lifecycle.trigger("afterupdate",_,S)}},updateView:function(g){var y=this._model;y&&(y.setUpdatePayload(g),ChartView.markUpdateMethod(g,"updateView"),o(y),this._scheduler.performVisualTasks(y,g,{setDirty:!0}),render(this,y,this._api,g,{}),lifecycle.trigger("afterupdate",y,this._api))},updateVisual:function(g){var y=this,_=this._model;_&&(_.setUpdatePayload(g),_.eachSeries(function(S){S.getData().clearAllVisual()}),ChartView.markUpdateMethod(g,"updateVisual"),o(_),this._scheduler.performVisualTasks(_,g,{visualType:"visual",setDirty:!0}),_.eachComponent(function(S,b){if(S!=="series"){var x=y.getViewOfComponentModel(b);x&&x.__alive&&x.updateVisual(b,_,y._api,g)}}),_.eachSeries(function(S){var b=y._chartsMap[S.__viewId];b.updateVisual(S,_,y._api,g)}),lifecycle.trigger("afterupdate",_,this._api))},updateLayout:function(g){updateMethods.update.call(this,g)}};function n(g,y,_,S,b){if(g._disposed){g.id;return}for(var x=g._model,T=g._coordSysMgr.getCoordinateSystems(),A,w=parseFinder$1(x,_),C=0;C<T.length;C++){var E=T[C];if(E[y]&&(A=E[y](x,w,S,b))!=null)return A}}doConvertPixel=n,updateStreamModes=function(g,y){var _=g._chartsMap,S=g._scheduler;y.eachSeries(function(b){S.updateStreamModes(b,_[b.__viewId])})},doDispatchAction=function(g,y){var _=this,S=this.getModel(),b=g.type,x=g.escapeConnect,T=actions[b],A=(T.update||"update").split(":"),w=A.pop(),C=A[0]!=null&&parseClassType(A[0]);this[IN_MAIN_PROCESS_KEY]=!0,updateMainProcessVersion(this);var E=[g],P=!1;g.batch&&(P=!0,E=map$1(g.batch,function(D){return D=defaults(extend({},D),g),D.batch=null,D}));var I=[],M,R=[],O=T.nonRefinedEventType,$=isSelectChangePayload(g),B=isHighDownPayload(g);if(B&&allLeaveBlur(this._api),each$f(E,function(D){var V=T.action(D,S,_._api);if(T.refineEvent?R.push(V):M=V,M=M||extend({},D),M.type=O,I.push(M),B){var L=preParseFinder(g),N=L.queryOptionMap,U=L.mainTypeSpecified,H=U?N.keys()[0]:"series";updateDirectly(_,w,D,H),markStatusToUpdate(_)}else $?(updateDirectly(_,w,D,"series"),markStatusToUpdate(_)):C&&updateDirectly(_,w,D,C.main,C.sub)}),w!=="none"&&!B&&!$&&!C)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,g),this[PENDING_UPDATE]=null):updateMethods[w].call(this,g)}catch(D){throw this[IN_MAIN_PROCESS_KEY]=!1,D}if(P?M={type:O,escapeConnect:x,batch:I}:M=I[0],this[IN_MAIN_PROCESS_KEY]=!1,!y){var F=void 0;if(T.refineEvent){var z=T.refineEvent(R,g,S,this._api).eventContent;assert(isObject$3(z)),F=defaults({type:T.refinedEventType},z),F.fromAction=g.type,F.fromActionPayload=g,F.escapeConnect=!0}var G=this._messageCenter;G.trigger(M.type,M),F&&G.trigger(F.type,F)}},flushPendingActions=function(g){for(var y=this._pendingActions;y.length;){var _=y.shift();doDispatchAction.call(this,_,g)}},triggerUpdatedEvent=function(g){!g&&this.trigger("updated")},bindRenderedEvent=function(g,y){g.on("rendered",function(_){y.trigger("rendered",_),g.animation.isFinished()&&!y[PENDING_UPDATE]&&!y._scheduler.unfinished&&!y._pendingActions.length&&y.trigger("finished")})},bindMouseEvent=function(g,y){g.on("mouseover",function(_){var S=_.target,b=findEventDispatcher(S,isHighDownDispatcher);b&&(handleGlobalMouseOverForHighDown(b,_,y._api),markStatusToUpdate(y))}).on("mouseout",function(_){var S=_.target,b=findEventDispatcher(S,isHighDownDispatcher);b&&(handleGlobalMouseOutForHighDown(b,_,y._api),markStatusToUpdate(y))}).on("click",function(_){var S=_.target,b=findEventDispatcher(S,function(A){return getECData(A).dataIndex!=null},!0);if(b){var x=b.selected?"unselect":"select",T=getECData(b);y._api.dispatchAction({type:x,dataType:T.dataType,dataIndexInside:T.dataIndex,seriesIndex:T.seriesIndex,isFromClick:!0})}})};function o(g){g.clearColorPalette(),g.eachSeries(function(y){y.clearColorPalette()})}function s(g){var y=[],_=[],S=!1;if(g.eachComponent(function(A,w){var C=w.get("zlevel")||0,E=w.get("z")||0,P=w.getZLevelKey();S=S||!!P,(A==="series"?_:y).push({zlevel:C,z:E,idx:w.componentIndex,type:A,key:P})}),S){var b=y.concat(_),x,T;sort$2(b,function(A,w){return A.zlevel===w.zlevel?A.z-w.z:A.zlevel-w.zlevel}),each$f(b,function(A){var w=g.getComponent(A.type,A.idx),C=A.zlevel,E=A.key;x!=null&&(C=Math.max(x,C)),E?(C===x&&E!==T&&C++,T=E):T&&(C===x&&C++,T=""),x=C,w.setZLevel(C)})}}render=function(g,y,_,S,b){s(y),renderComponents(g,y,_,S,b),each$f(g._chartsViews,function(x){x.__alive=!1}),renderSeries(g,y,_,S,b),each$f(g._chartsViews,function(x){x.__alive||x.remove(y,_)})},renderComponents=function(g,y,_,S,b,x){each$f(x||g._componentsViews,function(T){var A=T.__model;d(A,T),T.render(A,y,_,S),f(A,T),v(A,T)})},renderSeries=function(g,y,_,S,b,x){var T=g._scheduler;b=extend(b||{},{updatedSeries:y.getSeries()}),lifecycle.trigger("series:beforeupdate",y,_,b);var A=!1;y.eachSeries(function(w){var C=g._chartsMap[w.__viewId];C.__alive=!0;var E=C.renderTask;T.updatePayload(E,S),d(w,C),x&&x.get(w.uid)&&E.dirty(),E.perform(T.getPerformArgs(E))&&(A=!0),C.group.silent=!!w.get("silent"),c(w,C),updateSeriesElementSelection(w)}),T.unfinished=A||T.unfinished,lifecycle.trigger("series:layoutlabels",y,_,b),lifecycle.trigger("series:transition",y,_,b),y.eachSeries(function(w){var C=g._chartsMap[w.__viewId];f(w,C),v(w,C)}),u(g,y),lifecycle.trigger("series:afterupdate",y,_,b)},markStatusToUpdate=function(g){g[STATUS_NEEDS_UPDATE_KEY]=!0,g.getZr().wakeUp()},updateMainProcessVersion=function(g){g[MAIN_PROCESS_VERSION_KEY]=(g[MAIN_PROCESS_VERSION_KEY]+1)%1e3},applyChangedStates=function(g){g[STATUS_NEEDS_UPDATE_KEY]&&(g.getZr().storage.traverse(function(y){isElementRemoved(y)||l(y)}),g[STATUS_NEEDS_UPDATE_KEY]=!1)};function l(g){for(var y=[],_=g.currentStates,S=0;S<_.length;S++){var b=_[S];b==="emphasis"||b==="blur"||b==="select"||y.push(b)}g.selected&&g.states.select&&y.push("select"),g.hoverState===HOVER_STATE_EMPHASIS&&g.states.emphasis?y.push("emphasis"):g.hoverState===HOVER_STATE_BLUR&&g.states.blur&&y.push("blur"),g.useStates(y)}function u(g,y){var _=g._zr,S=_.storage,b=0;S.traverse(function(x){x.isGroup||b++}),b>y.get("hoverLayerThreshold")&&!env.node&&!env.worker&&y.eachSeries(function(x){if(!x.preventUsingHoverLayer){var T=g._chartsMap[x.__viewId];T.__alive&&T.eachRendered(function(A){A.states.emphasis&&(A.states.emphasis.hoverLayer=!0)})}})}function c(g,y){var _=g.get("blendMode")||null;y.eachRendered(function(S){S.isGroup||(S.style.blend=_)})}function f(g,y){if(!g.preventAutoZ){var _=retrieveZInfo(g);y.eachRendered(function(S){return traverseUpdateZ(S,_.z,_.zlevel),!0})}}function d(g,y){y.eachRendered(function(_){if(!isElementRemoved(_)){var S=_.getTextContent(),b=_.getTextGuideLine();_.stateTransition&&(_.stateTransition=null),S&&S.stateTransition&&(S.stateTransition=null),b&&b.stateTransition&&(b.stateTransition=null),_.hasState()?(_.prevStates=_.currentStates,_.clearStates()):_.prevStates&&(_.prevStates=null)}})}function v(g,y){var _=g.getModel("stateAnimation"),S=g.isAnimationEnabled(),b=_.get("duration"),x=b>0?{duration:b,delay:_.get("delay"),easing:_.get("easing")}:null;y.eachRendered(function(T){if(T.states&&T.states.emphasis){if(isElementRemoved(T))return;if(T instanceof Path&&savePathStates(T),T.__dirty){var A=T.prevStates;A&&T.useStates(A)}if(S){T.stateTransition=x;var w=T.getTextContent(),C=T.getTextGuideLine();w&&(w.stateTransition=x),C&&(C.stateTransition=x)}T.__dirty&&l(T)}})}createExtensionAPI=function(g){return new(function(y){__extends(_,y);function _(){return y!==null&&y.apply(this,arguments)||this}return _.prototype.getCoordinateSystems=function(){return g._coordSysMgr.getCoordinateSystems()},_.prototype.getComponentByElement=function(S){for(;S;){var b=S.__ecComponentInfo;if(b!=null)return g._model.getComponent(b.mainType,b.index);S=S.parent}},_.prototype.enterEmphasis=function(S,b){enterEmphasis(S,b),markStatusToUpdate(g)},_.prototype.leaveEmphasis=function(S,b){leaveEmphasis(S,b),markStatusToUpdate(g)},_.prototype.enterBlur=function(S){enterBlur(S),markStatusToUpdate(g)},_.prototype.leaveBlur=function(S){leaveBlur(S),markStatusToUpdate(g)},_.prototype.enterSelect=function(S){enterSelect(S),markStatusToUpdate(g)},_.prototype.leaveSelect=function(S){leaveSelect(S),markStatusToUpdate(g)},_.prototype.getModel=function(){return g.getModel()},_.prototype.getViewOfComponentModel=function(S){return g.getViewOfComponentModel(S)},_.prototype.getViewOfSeriesModel=function(S){return g.getViewOfSeriesModel(S)},_.prototype.getMainProcessVersion=function(){return g[MAIN_PROCESS_VERSION_KEY]},_}(ExtensionAPI))(g)},enableConnect=function(g){function y(_,S){for(var b=0;b<_.length;b++){var x=_[b];x[CONNECT_STATUS_KEY]=S}}each$f(connectionEventRevertMap,function(_,S){g._messageCenter.on(S,function(b){if(connectedGroups[g.group]&&g[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(b&&b.escapeConnect)return;var x=g.makeActionFromEvent(b),T=[];each$f(instances,function(A){A!==g&&A.group===g.group&&T.push(A)}),y(T,CONNECT_STATUS_PENDING),each$f(T,function(A){A[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&A.dispatchAction(x)}),y(T,CONNECT_STATUS_UPDATED)}})})}}(),r}(Eventful),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on");echartsProto.off=createRegisterEventWithLowercaseECharts("off");echartsProto.one=function(a,r,n){var o=this;function s(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];r&&r.apply&&r.apply(this,l),o.off(a,s)}this.on.call(this,a,s,n)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(a){}var actions={},connectionEventRevertMap={},publicEventTypeMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(a,r,n){{var o=getInstanceByDom(a);if(o)return o}var s=new ECharts(a,r,n);return s.id="ec_"+idBase++,instances[s.id]=s,setAttribute(a,DOM_ATTRIBUTE_KEY,s.id),enableConnect(s),lifecycle.trigger("afterinit",s),s}function getInstanceByDom(a){return instances[getAttribute(a,DOM_ATTRIBUTE_KEY)]}function registerTheme(a,r){themeStorage[a]=r}function registerPreprocessor(a){indexOf(optionPreprocessorFuncs,a)<0&&optionPreprocessorFuncs.push(a)}function registerProcessor(a,r){normalizeRegister(dataProcessorFuncs,a,r,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(a){registerUpdateLifecycle("afterinit",a)}function registerPostUpdate(a){registerUpdateLifecycle("afterupdate",a)}function registerUpdateLifecycle(a,r){lifecycle.on(a,r)}function registerAction$1(a,r,n){var o,s,l,u,c;isFunction(r)&&(n=r,r=""),isObject$3(a)?(o=a.type,s=a.event,u=a.update,c=a.publishNonRefinedEvent,n||(n=a.action),l=a.refineEvent):(o=a,s=r);function f(v){return v.toLowerCase()}s=f(s||o);var d=l?f(o):s;actions[o]||(assert(ACTION_REG.test(o)&&ACTION_REG.test(s)),l&&assert(s!==o),actions[o]={actionType:o,refinedEventType:s,nonRefinedEventType:d,update:u,action:n,refineEvent:l},publicEventTypeMap[s]=1,l&&c&&(publicEventTypeMap[d]=1),connectionEventRevertMap[d]=o)}function registerCoordinateSystem(a,r){CoordinateSystemManager.register(a,r)}function registerLayout(a,r){normalizeRegister(visualFuncs,a,r,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(a,r){normalizeRegister(visualFuncs,a,r,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(a,r,n,o,s){if((isFunction(r)||isObject$3(r))&&(n=r,r=o),!(indexOf(registeredTasks,n)>=0)){registeredTasks.push(n);var l=Scheduler.wrapStageHandler(n,s);l.__prio=r,l.__raw=n,a.push(l)}}function registerLoading(a,r){loadingEffects[a]=r}function registerMap$1(a,r,n){var o=getImpl("registerMap");o&&o(a,r,n)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask);registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask);registerVisual(PRIORITY_VISUAL_DECAL,decalVisual);registerPreprocessor(globalBackwardCompat);registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack);registerLoading("default",defaultLoading);registerAction$1({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop);registerAction$1({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop);registerAction$1({type:SELECT_ACTION_TYPE,event:SELECT_CHANGED_EVENT_TYPE,update:SELECT_ACTION_TYPE,action:noop,refineEvent:makeSelectChangedEvent,publishNonRefinedEvent:!0});registerAction$1({type:UNSELECT_ACTION_TYPE,event:SELECT_CHANGED_EVENT_TYPE,update:UNSELECT_ACTION_TYPE,action:noop,refineEvent:makeSelectChangedEvent,publishNonRefinedEvent:!0});registerAction$1({type:TOGGLE_SELECT_ACTION_TYPE,event:SELECT_CHANGED_EVENT_TYPE,update:TOGGLE_SELECT_ACTION_TYPE,action:noop,refineEvent:makeSelectChangedEvent,publishNonRefinedEvent:!0});function makeSelectChangedEvent(a,r,n,o){return{eventContent:{selected:getAllSelectedIndices(n),isFromClick:r.isFromClick||!1}}}registerTheme("default",{});registerTheme("dark",theme);var extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction:registerAction$1,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel,ComponentView,SeriesModel,ChartView,registerComponentModel:function(a){ComponentModel.registerClass(a)},registerComponentView:function(a){ComponentView.registerClass(a)},registerSeriesModel:function(a){SeriesModel.registerClass(a)},registerChartView:function(a){ChartView.registerClass(a)},registerCustomSeries:function(a,r){registerCustomSeries(a,r)},registerSubTypeDefaulter:function(a,r){ComponentModel.registerSubTypeDefaulter(a,r)},registerPainter:function(a,r){registerPainter(a,r)}};function use(a){if(isArray$1(a)){each$f(a,function(r){use(r)});return}indexOf(extensions,a)>=0||(extensions.push(a),isFunction(a)&&(a={install:a}),a.install(extensionRegisters))}function dataIndexMapValueLength(a){return a==null?0:a.length||1}function defaultKeyGetter(a){return a}var DataDiffer=function(){function a(r,n,o,s,l,u){this._old=r,this._new=n,this._oldKeyGetter=o||defaultKeyGetter,this._newKeyGetter=s||defaultKeyGetter,this.context=l,this._diffModeMultiple=u==="multiple"}return a.prototype.add=function(r){return this._add=r,this},a.prototype.update=function(r){return this._update=r,this},a.prototype.updateManyToOne=function(r){return this._updateManyToOne=r,this},a.prototype.updateOneToMany=function(r){return this._updateOneToMany=r,this},a.prototype.updateManyToMany=function(r){return this._updateManyToMany=r,this},a.prototype.remove=function(r){return this._remove=r,this},a.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},a.prototype._executeOneToOne=function(){var r=this._old,n=this._new,o={},s=new Array(r.length),l=new Array(n.length);this._initIndexMap(r,null,s,"_oldKeyGetter"),this._initIndexMap(n,o,l,"_newKeyGetter");for(var u=0;u<r.length;u++){var c=s[u],f=o[c],d=dataIndexMapValueLength(f);if(d>1){var v=f.shift();f.length===1&&(o[c]=f[0]),this._update&&this._update(v,u)}else d===1?(o[c]=null,this._update&&this._update(f,u)):this._remove&&this._remove(u)}this._performRestAdd(l,o)},a.prototype._executeMultiple=function(){var r=this._old,n=this._new,o={},s={},l=[],u=[];this._initIndexMap(r,o,l,"_oldKeyGetter"),this._initIndexMap(n,s,u,"_newKeyGetter");for(var c=0;c<l.length;c++){var f=l[c],d=o[f],v=s[f],g=dataIndexMapValueLength(d),y=dataIndexMapValueLength(v);if(g>1&&y===1)this._updateManyToOne&&this._updateManyToOne(v,d),s[f]=null;else if(g===1&&y>1)this._updateOneToMany&&this._updateOneToMany(v,d),s[f]=null;else if(g===1&&y===1)this._update&&this._update(v,d),s[f]=null;else if(g>1&&y>1)this._updateManyToMany&&this._updateManyToMany(v,d),s[f]=null;else if(g>1)for(var _=0;_<g;_++)this._remove&&this._remove(d[_]);else this._remove&&this._remove(d)}this._performRestAdd(u,s)},a.prototype._performRestAdd=function(r,n){for(var o=0;o<r.length;o++){var s=r[o],l=n[s],u=dataIndexMapValueLength(l);if(u>1)for(var c=0;c<u;c++)this._add&&this._add(l[c]);else u===1&&this._add&&this._add(l);n[s]=null}},a.prototype._initIndexMap=function(r,n,o,s){for(var l=this._diffModeMultiple,u=0;u<r.length;u++){var c="_ec_"+this[s](r[u],u);if(l||(o[u]=c),!!n){var f=n[c],d=dataIndexMapValueLength(f);d===0?(n[c]=u,l&&o.push(c)):d===1?n[c]=[f,u]:f.push(u)}}},a}(),DimensionUserOuput=function(){function a(r,n){this._encode=r,this._schema=n}return a.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},a.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},a}();function summarizeDimensions(a,r){var n={},o=n.encode={},s=createHashMap(),l=[],u=[],c={};each$f(a.dimensions,function(y){var _=a.getDimensionInfo(y),S=_.coordDim;if(S){var b=_.coordDimIndex;getOrCreateEncodeArr(o,S)[b]=y,_.isExtraCoord||(s.set(S,1),mayLabelDimType(_.type)&&(l[0]=y),getOrCreateEncodeArr(c,S)[b]=a.getDimensionIndex(_.name)),_.defaultTooltip&&u.push(y)}VISUAL_DIMENSIONS.each(function(x,T){var A=getOrCreateEncodeArr(o,T),w=_.otherDims[T];w!=null&&w!==!1&&(A[w]=_.name)})});var f=[],d={};s.each(function(y,_){var S=o[_];d[_]=S[0],f=f.concat(S)}),n.dataDimsOnCoord=f,n.dataDimIndicesOnCoord=map$1(f,function(y){return a.getDimensionInfo(y).storeDimIndex}),n.encodeFirstDimNotExtra=d;var v=o.label;v&&v.length&&(l=v.slice());var g=o.tooltip;return g&&g.length?u=g.slice():u.length||(u=l.slice()),o.defaultedLabel=l,o.defaultedTooltip=u,n.userOutput=new DimensionUserOuput(c,r),n}function getOrCreateEncodeArr(a,r){return a.hasOwnProperty(r)||(a[r]=[]),a[r]}function getDimensionTypeByAxis(a){return a==="category"?"ordinal":a==="time"?"time":"float"}function mayLabelDimType(a){return!(a==="ordinal"||a==="time")}var SeriesDimensionDefine=function(){function a(r){this.otherDims={},r!=null&&extend(this,r)}return a}(),inner$j=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=function(){function a(r){this.dimensions=r.dimensions,this._dimOmitted=r.dimensionOmitted,this.source=r.source,this._fullDimCount=r.fullDimensionCount,this._updateDimOmitted(r.dimensionOmitted)}return a.prototype.isDimensionOmitted=function(){return this._dimOmitted},a.prototype._updateDimOmitted=function(r){this._dimOmitted=r,r&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},a.prototype.getSourceDimensionIndex=function(r){return retrieve2(this._dimNameMap.get(r),-1)},a.prototype.getSourceDimension=function(r){var n=this.source.dimensionsDefine;if(n)return n[r]},a.prototype.makeStoreSchema=function(){for(var r=this._fullDimCount,n=shouldRetrieveDataByName(this.source),o=!shouldOmitUnusedDimensions(r),s="",l=[],u=0,c=0;u<r;u++){var f=void 0,d=void 0,v=void 0,g=this.dimensions[c];if(g&&g.storeDimIndex===u)f=n?g.name:null,d=g.type,v=g.ordinalMeta,c++;else{var y=this.getSourceDimension(u);y&&(f=n?y.name:null,d=y.type)}l.push({property:f,type:d,ordinalMeta:v}),n&&f!=null&&(!g||!g.isCalculationCoord)&&(s+=o?f.replace(/\`/g,"`1").replace(/\$/g,"`2"):f),s+="$",s+=dimTypeShort[d]||"f",v&&(s+=v.uid),s+="$"}var _=this.source,S=[_.seriesLayoutBy,_.startIndex,s].join("$$");return{dimensions:l,hash:S}},a.prototype.makeOutputDimensionNames=function(){for(var r=[],n=0,o=0;n<this._fullDimCount;n++){var s=void 0,l=this.dimensions[o];if(l&&l.storeDimIndex===n)l.isCalculationCoord||(s=l.name),o++;else{var u=this.getSourceDimension(n);u&&(s=u.name)}r.push(s)}return r},a.prototype.appendCalculationDimension=function(r){this.dimensions.push(r),r.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},a}();function isSeriesDataSchema(a){return a instanceof SeriesDataSchema}function createDimNameMap(a){for(var r=createHashMap(),n=0;n<(a||[]).length;n++){var o=a[n],s=isObject$3(o)?o.name:o;s!=null&&r.get(s)==null&&r.set(s,n)}return r}function ensureSourceDimNameMap(a){var r=inner$j(a);return r.dimNameMap||(r.dimNameMap=createDimNameMap(a.dimensionsDefine))}function shouldOmitUnusedDimensions(a){return a>30}var isObject$1=isObject$3,map=map$1,CtorInt32Array=typeof Int32Array>"u"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=function(){function a(r,n){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var o,s=!1;isSeriesDataSchema(r)?(o=r.dimensions,this._dimOmitted=r.isDimensionOmitted(),this._schema=r):(s=!0,o=r),o=o||["x","y"];for(var l={},u=[],c={},f=!1,d={},v=0;v<o.length;v++){var g=o[v],y=isString(g)?new SeriesDimensionDefine({name:g}):g instanceof SeriesDimensionDefine?g:new SeriesDimensionDefine(g),_=y.name;y.type=y.type||"float",y.coordDim||(y.coordDim=_,y.coordDimIndex=0);var S=y.otherDims=y.otherDims||{};u.push(_),l[_]=y,d[_]!=null&&(f=!0),y.createInvertedIndices&&(c[_]=[]);var b=v;isNumber(y.storeDimIndex)&&(b=y.storeDimIndex),S.itemName===0&&(this._nameDimIdx=b),S.itemId===0&&(this._idDimIdx=b),s&&(y.storeDimIndex=v)}if(this.dimensions=u,this._dimInfos=l,this._initGetDimensionInfo(f),this.hostModel=n,this._invertedIndicesMap=c,this._dimOmitted){var x=this._dimIdxToName=createHashMap();each$f(u,function(T){x.set(l[T].storeDimIndex,T)})}}return a.prototype.getDimension=function(r){var n=this._recognizeDimIndex(r);if(n==null)return r;if(n=r,!this._dimOmitted)return this.dimensions[n];var o=this._dimIdxToName.get(n);if(o!=null)return o;var s=this._schema.getSourceDimension(n);if(s)return s.name},a.prototype.getDimensionIndex=function(r){var n=this._recognizeDimIndex(r);if(n!=null)return n;if(r==null)return-1;var o=this._getDimInfo(r);return o?o.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(r):-1},a.prototype._recognizeDimIndex=function(r){if(isNumber(r)||r!=null&&!isNaN(r)&&!this._getDimInfo(r)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(r)<0))return+r},a.prototype._getStoreDimIndex=function(r){var n=this.getDimensionIndex(r);return n},a.prototype.getDimensionInfo=function(r){return this._getDimInfo(this.getDimension(r))},a.prototype._initGetDimensionInfo=function(r){var n=this._dimInfos;this._getDimInfo=r?function(o){return n.hasOwnProperty(o)?n[o]:void 0}:function(o){return n[o]}},a.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},a.prototype.mapDimension=function(r,n){var o=this._dimSummary;if(n==null)return o.encodeFirstDimNotExtra[r];var s=o.encode[r];return s?s[n]:null},a.prototype.mapDimensionsAll=function(r){var n=this._dimSummary,o=n.encode[r];return(o||[]).slice()},a.prototype.getStore=function(){return this._store},a.prototype.initData=function(r,n,o){var s=this,l;if(r instanceof DataStore&&(l=r),!l){var u=this.dimensions,c=isSourceInstance(r)||isArrayLike(r)?new DefaultDataProvider(r,u.length):r;l=new DataStore;var f=map(u,function(d){return{type:s._dimInfos[d].type,property:d}});l.initData(c,f,o)}this._store=l,this._nameList=(n||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,l.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},a.prototype.appendData=function(r){var n=this._store.appendData(r);this._doInit(n[0],n[1])},a.prototype.appendValues=function(r,n){var o=this._store.appendValues(r,n&&n.length),s=o.start,l=o.end,u=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),n)for(var c=s;c<l;c++){var f=c-s;this._nameList[c]=n[f],u&&makeIdFromName(this,c)}},a.prototype._updateOrdinalMeta=function(){for(var r=this._store,n=this.dimensions,o=0;o<n.length;o++){var s=this._dimInfos[n[o]];s.ordinalMeta&&r.collectOrdinalMeta(s.storeDimIndex,s.ordinalMeta)}},a.prototype._shouldMakeIdFromName=function(){var r=this._store.getProvider();return this._idDimIdx==null&&r.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!r.fillStorage},a.prototype._doInit=function(r,n){if(!(r>=n)){var o=this._store,s=o.getProvider();this._updateOrdinalMeta();var l=this._nameList,u=this._idList,c=s.getSource().sourceFormat,f=c===SOURCE_FORMAT_ORIGINAL;if(f&&!s.pure)for(var d=[],v=r;v<n;v++){var g=s.getItem(v,d);if(!this.hasItemOption&&isDataItemOption(g)&&(this.hasItemOption=!0),g){var y=g.name;l[v]==null&&y!=null&&(l[v]=convertOptionIdName(y,null));var _=g.id;u[v]==null&&_!=null&&(u[v]=convertOptionIdName(_,null))}}if(this._shouldMakeIdFromName())for(var v=r;v<n;v++)makeIdFromName(this,v);prepareInvertedIndex(this)}},a.prototype.getApproximateExtent=function(r){return this._approximateExtent[r]||this._store.getDataExtent(this._getStoreDimIndex(r))},a.prototype.setApproximateExtent=function(r,n){n=this.getDimension(n),this._approximateExtent[n]=r.slice()},a.prototype.getCalculationInfo=function(r){return this._calculationInfo[r]},a.prototype.setCalculationInfo=function(r,n){isObject$1(r)?extend(this._calculationInfo,r):this._calculationInfo[r]=n},a.prototype.getName=function(r){var n=this.getRawIndex(r),o=this._nameList[n];return o==null&&this._nameDimIdx!=null&&(o=getIdNameFromStore(this,this._nameDimIdx,n)),o==null&&(o=""),o},a.prototype._getCategory=function(r,n){var o=this._store.get(r,n),s=this._store.getOrdinalMeta(r);return s?s.categories[o]:o},a.prototype.getId=function(r){return getId(this,this.getRawIndex(r))},a.prototype.count=function(){return this._store.count()},a.prototype.get=function(r,n){var o=this._store,s=this._dimInfos[r];if(s)return o.get(s.storeDimIndex,n)},a.prototype.getByRawIndex=function(r,n){var o=this._store,s=this._dimInfos[r];if(s)return o.getByRawIndex(s.storeDimIndex,n)},a.prototype.getIndices=function(){return this._store.getIndices()},a.prototype.getDataExtent=function(r){return this._store.getDataExtent(this._getStoreDimIndex(r))},a.prototype.getSum=function(r){return this._store.getSum(this._getStoreDimIndex(r))},a.prototype.getMedian=function(r){return this._store.getMedian(this._getStoreDimIndex(r))},a.prototype.getValues=function(r,n){var o=this,s=this._store;return isArray$1(r)?s.getValues(map(r,function(l){return o._getStoreDimIndex(l)}),n):s.getValues(r)},a.prototype.hasValue=function(r){for(var n=this._dimSummary.dataDimIndicesOnCoord,o=0,s=n.length;o<s;o++)if(isNaN(this._store.get(n[o],r)))return!1;return!0},a.prototype.indexOfName=function(r){for(var n=0,o=this._store.count();n<o;n++)if(this.getName(n)===r)return n;return-1},a.prototype.getRawIndex=function(r){return this._store.getRawIndex(r)},a.prototype.indexOfRawIndex=function(r){return this._store.indexOfRawIndex(r)},a.prototype.rawIndexOf=function(r,n){var o=r&&this._invertedIndicesMap[r],s=o&&o[n];return s==null||isNaN(s)?INDEX_NOT_FOUND:s},a.prototype.each=function(r,n,o){isFunction(r)&&(o=n,n=r,r=[]);var s=o||this,l=map(normalizeDimensions(r),this._getStoreDimIndex,this);this._store.each(l,s?bind$1(n,s):n)},a.prototype.filterSelf=function(r,n,o){isFunction(r)&&(o=n,n=r,r=[]);var s=o||this,l=map(normalizeDimensions(r),this._getStoreDimIndex,this);return this._store=this._store.filter(l,s?bind$1(n,s):n),this},a.prototype.selectRange=function(r){var n=this,o={},s=keys(r);return each$f(s,function(l){var u=n._getStoreDimIndex(l);o[u]=r[l]}),this._store=this._store.selectRange(o),this},a.prototype.mapArray=function(r,n,o){isFunction(r)&&(o=n,n=r,r=[]),o=o||this;var s=[];return this.each(r,function(){s.push(n&&n.apply(this,arguments))},o),s},a.prototype.map=function(r,n,o,s){var l=o||s||this,u=map(normalizeDimensions(r),this._getStoreDimIndex,this),c=cloneListForMapAndSample(this);return c._store=this._store.map(u,l?bind$1(n,l):n),c},a.prototype.modify=function(r,n,o,s){var l=o||s||this,u=map(normalizeDimensions(r),this._getStoreDimIndex,this);this._store.modify(u,l?bind$1(n,l):n)},a.prototype.downSample=function(r,n,o,s){var l=cloneListForMapAndSample(this);return l._store=this._store.downSample(this._getStoreDimIndex(r),n,o,s),l},a.prototype.minmaxDownSample=function(r,n){var o=cloneListForMapAndSample(this);return o._store=this._store.minmaxDownSample(this._getStoreDimIndex(r),n),o},a.prototype.lttbDownSample=function(r,n){var o=cloneListForMapAndSample(this);return o._store=this._store.lttbDownSample(this._getStoreDimIndex(r),n),o},a.prototype.getRawDataItem=function(r){return this._store.getRawDataItem(r)},a.prototype.getItemModel=function(r){var n=this.hostModel,o=this.getRawDataItem(r);return new Model(o,n,n&&n.ecModel)},a.prototype.diff=function(r){var n=this;return new DataDiffer(r?r.getStore().getIndices():[],this.getStore().getIndices(),function(o){return getId(r,o)},function(o){return getId(n,o)})},a.prototype.getVisual=function(r){var n=this._visual;return n&&n[r]},a.prototype.setVisual=function(r,n){this._visual=this._visual||{},isObject$1(r)?extend(this._visual,r):this._visual[r]=n},a.prototype.getItemVisual=function(r,n){var o=this._itemVisuals[r],s=o&&o[n];return s??this.getVisual(n)},a.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},a.prototype.ensureUniqueItemVisual=function(r,n){var o=this._itemVisuals,s=o[r];s||(s=o[r]={});var l=s[n];return l==null&&(l=this.getVisual(n),isArray$1(l)?l=l.slice():isObject$1(l)&&(l=extend({},l)),s[n]=l),l},a.prototype.setItemVisual=function(r,n,o){var s=this._itemVisuals[r]||{};this._itemVisuals[r]=s,isObject$1(n)?extend(s,n):s[n]=o},a.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},a.prototype.setLayout=function(r,n){isObject$1(r)?extend(this._layout,r):this._layout[r]=n},a.prototype.getLayout=function(r){return this._layout[r]},a.prototype.getItemLayout=function(r){return this._itemLayouts[r]},a.prototype.setItemLayout=function(r,n,o){this._itemLayouts[r]=o?extend(this._itemLayouts[r]||{},n):n},a.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},a.prototype.setItemGraphicEl=function(r,n){var o=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(o,this.dataType,r,n),this._graphicEls[r]=n},a.prototype.getItemGraphicEl=function(r){return this._graphicEls[r]},a.prototype.eachItemGraphicEl=function(r,n){each$f(this._graphicEls,function(o,s){o&&r&&r.call(n,o,s)})},a.prototype.cloneShallow=function(r){return r||(r=new a(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(r,this),r._store=this._store,r},a.prototype.wrapMethod=function(r,n){var o=this[r];isFunction(o)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(r),this[r]=function(){var s=o.apply(this,arguments);return n.apply(this,[s].concat(slice(arguments)))})},a.internalField=function(){prepareInvertedIndex=function(r){var n=r._invertedIndicesMap;each$f(n,function(o,s){var l=r._dimInfos[s],u=l.ordinalMeta,c=r._store;if(u){o=n[s]=new CtorInt32Array(u.categories.length);for(var f=0;f<o.length;f++)o[f]=INDEX_NOT_FOUND;for(var f=0;f<c.count();f++)o[c.get(l.storeDimIndex,f)]=f}})},getIdNameFromStore=function(r,n,o){return convertOptionIdName(r._getCategory(n,o),null)},getId=function(r,n){var o=r._idList[n];return o==null&&r._idDimIdx!=null&&(o=getIdNameFromStore(r,r._idDimIdx,n)),o==null&&(o=ID_PREFIX+n),o},normalizeDimensions=function(r){return isArray$1(r)||(r=r!=null?[r]:[]),r},cloneListForMapAndSample=function(r){var n=new a(r._schema?r._schema:map(r.dimensions,r._getDimInfo,r),r.hostModel);return transferProperties(n,r),n},transferProperties=function(r,n){each$f(TRANSFERABLE_PROPERTIES.concat(n.__wrappedMethods||[]),function(o){n.hasOwnProperty(o)&&(r[o]=n[o])}),r.__wrappedMethods=n.__wrappedMethods,each$f(CLONE_PROPERTIES,function(o){r[o]=clone$4(n[o])}),r._calculationInfo=extend({},n._calculationInfo)},makeIdFromName=function(r,n){var o=r._nameList,s=r._idList,l=r._nameDimIdx,u=r._idDimIdx,c=o[n],f=s[n];if(c==null&&l!=null&&(o[n]=c=getIdNameFromStore(r,l,n)),f==null&&u!=null&&(s[n]=f=getIdNameFromStore(r,u,n)),f==null&&c!=null){var d=r._nameRepeatCount,v=d[c]=(d[c]||0)+1;f=c,v>1&&(f+="__ec__"+v),s[n]=f}}}(),a}();function prepareSeriesDataSchema(a,r){isSourceInstance(a)||(a=createSourceFromSeriesDataOption(a)),r=r||{};var n=r.coordDimensions||[],o=r.dimensionsDefine||a.dimensionsDefine||[],s=createHashMap(),l=[],u=getDimCount(a,n,o,r.dimensionsCount),c=r.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(u),f=o===a.dimensionsDefine,d=f?ensureSourceDimNameMap(a):createDimNameMap(o),v=r.encodeDefine;!v&&r.encodeDefaulter&&(v=r.encodeDefaulter(a,u));for(var g=createHashMap(v),y=new CtorInt32Array$1(u),_=0;_<y.length;_++)y[_]=-1;function S(R){var O=y[R];if(O<0){var $=o[R],B=isObject$3($)?$:{name:$},F=new SeriesDimensionDefine,z=B.name;z!=null&&d.get(z)!=null&&(F.name=F.displayName=z),B.type!=null&&(F.type=B.type),B.displayName!=null&&(F.displayName=B.displayName);var G=l.length;return y[R]=G,F.storeDimIndex=R,l.push(F),F}return l[O]}if(!c)for(var _=0;_<u;_++)S(_);g.each(function(R,O){var $=normalizeToArray(R).slice();if($.length===1&&!isString($[0])&&$[0]<0){g.set(O,!1);return}var B=g.set(O,[]);each$f($,function(F,z){var G=isString(F)?d.get(F):F;G!=null&&G<u&&(B[z]=G,x(S(G),O,z))})});var b=0;each$f(n,function(R){var O,$,B,F;if(isString(R))O=R,F={};else{F=R,O=F.name;var z=F.ordinalMeta;F.ordinalMeta=null,F=extend({},F),F.ordinalMeta=z,$=F.dimsDef,B=F.otherDims,F.name=F.coordDim=F.coordDimIndex=F.dimsDef=F.otherDims=null}var G=g.get(O);if(G!==!1){if(G=normalizeToArray(G),!G.length)for(var D=0;D<($&&$.length||1);D++){for(;b<u&&S(b).coordDim!=null;)b++;b<u&&G.push(b++)}each$f(G,function(V,L){var N=S(V);if(f&&F.type!=null&&(N.type=F.type),x(defaults(N,F),O,L),N.name==null&&$){var U=$[L];!isObject$3(U)&&(U={name:U}),N.name=N.displayName=U.name,N.defaultTooltip=U.defaultTooltip}B&&defaults(N.otherDims,B)})}});function x(R,O,$){VISUAL_DIMENSIONS.get(O)!=null?R.otherDims[O]=$:(R.coordDim=O,R.coordDimIndex=$,s.set(O,!0))}var T=r.generateCoord,A=r.generateCoordCount,w=A!=null;A=T?A||1:0;var C=T||"value";function E(R){R.name==null&&(R.name=R.coordDim)}if(c)each$f(l,function(R){E(R)}),l.sort(function(R,O){return R.storeDimIndex-O.storeDimIndex});else for(var P=0;P<u;P++){var I=S(P),M=I.coordDim;M==null&&(I.coordDim=genCoordDimName(C,s,w),I.coordDimIndex=0,(!T||A<=0)&&(I.isExtraCoord=!0),A--),E(I),I.type==null&&(guessOrdinal(a,P)===BE_ORDINAL.Must||I.isExtraCoord&&(I.otherDims.itemName!=null||I.otherDims.seriesName!=null))&&(I.type="ordinal")}return removeDuplication(l),new SeriesDataSchema({source:a,dimensions:l,fullDimensionCount:u,dimensionOmitted:c})}function removeDuplication(a){for(var r=createHashMap(),n=0;n<a.length;n++){var o=a[n],s=o.name,l=r.get(s)||0;l>0&&(o.name=s+(l-1)),l++,r.set(s,l)}}function getDimCount(a,r,n,o){var s=Math.max(a.dimensionsDetectedCount||1,r.length,n.length,o||0);return each$f(r,function(l){var u;isObject$3(l)&&(u=l.dimsDef)&&(s=Math.max(s,u.length))}),s}function genCoordDimName(a,r,n){if(n||r.hasKey(a)){for(var o=0;r.hasKey(a+o);)o++;a+=o}return r.set(a,!0),a}var CoordSysInfo=function(){function a(r){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=r}return a}();function getCoordSysInfoBySeries(a){var r=a.get("coordinateSystem"),n=new CoordSysInfo(r),o=fetchers[r];if(o)return o(a,n,n.axisMap,n.categoryAxisMap),n}var fetchers={cartesian2d:function(a,r,n,o){var s=a.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],l=a.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];r.coordSysDims=["x","y"],n.set("x",s),n.set("y",l),isCategory(s)&&(o.set("x",s),r.firstCategoryDimIndex=0),isCategory(l)&&(o.set("y",l),r.firstCategoryDimIndex==null&&(r.firstCategoryDimIndex=1))},singleAxis:function(a,r,n,o){var s=a.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];r.coordSysDims=["single"],n.set("single",s),isCategory(s)&&(o.set("single",s),r.firstCategoryDimIndex=0)},polar:function(a,r,n,o){var s=a.getReferringComponents("polar",SINGLE_REFERRING).models[0],l=s.findAxisModel("radiusAxis"),u=s.findAxisModel("angleAxis");r.coordSysDims=["radius","angle"],n.set("radius",l),n.set("angle",u),isCategory(l)&&(o.set("radius",l),r.firstCategoryDimIndex=0),isCategory(u)&&(o.set("angle",u),r.firstCategoryDimIndex==null&&(r.firstCategoryDimIndex=1))},geo:function(a,r,n,o){r.coordSysDims=["lng","lat"]},parallel:function(a,r,n,o){var s=a.ecModel,l=s.getComponent("parallel",a.get("parallelIndex")),u=r.coordSysDims=l.dimensions.slice();each$f(l.parallelAxisIndex,function(c,f){var d=s.getComponent("parallelAxis",c),v=u[f];n.set(v,d),isCategory(d)&&(o.set(v,d),r.firstCategoryDimIndex==null&&(r.firstCategoryDimIndex=f))})},matrix:function(a,r,n,o){var s=a.getReferringComponents("matrix",SINGLE_REFERRING).models[0];r.coordSysDims=["x","y"];var l=s.getDimensionModel("x"),u=s.getDimensionModel("y");n.set("x",l),n.set("y",u),o.set("x",l),o.set("y",u)}};function isCategory(a){return a.get("type")==="category"}function enableDataStack(a,r,n){n=n||{};var o=n.byIndex,s=n.stackedCoordDimension,l,u,c;isLegacyDimensionsInput(r)?l=r:(u=r.schema,l=u.dimensions,c=r.store);var f=!!(a&&a.get("stack")),d,v,g,y;if(each$f(l,function(A,w){isString(A)&&(l[w]=A={name:A}),f&&!A.isExtraCoord&&(!o&&!d&&A.ordinalMeta&&(d=A),!v&&A.type!=="ordinal"&&A.type!=="time"&&(!s||s===A.coordDim)&&(v=A))}),v&&!o&&!d&&(o=!0),v){g="__\0ecstackresult_"+a.id,y="__\0ecstackedover_"+a.id,d&&(d.createInvertedIndices=!0);var _=v.coordDim,S=v.type,b=0;each$f(l,function(A){A.coordDim===_&&b++});var x={name:g,coordDim:_,coordDimIndex:b,type:S,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:l.length},T={name:y,coordDim:y,coordDimIndex:b+1,type:S,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:l.length+1};u?(c&&(x.storeDimIndex=c.ensureCalculationDimension(y,S),T.storeDimIndex=c.ensureCalculationDimension(g,S)),u.appendCalculationDimension(x),u.appendCalculationDimension(T)):(l.push(x),l.push(T))}return{stackedDimension:v&&v.name,stackedByDimension:d&&d.name,isStackedByIndex:o,stackedOverDimension:y,stackResultDimension:g}}function isLegacyDimensionsInput(a){return!isSeriesDataSchema(a.schema)}function isDimensionStacked(a,r){return!!r&&r===a.getCalculationInfo("stackedDimension")}function getStackedDimension(a,r){return isDimensionStacked(a,r)?a.getCalculationInfo("stackResultDimension"):r}function getCoordSysDimDefs(a,r){var n=a.get("coordinateSystem"),o=CoordinateSystemManager.get(n),s;return r&&r.coordSysDims&&(s=map$1(r.coordSysDims,function(l){var u={name:l},c=r.axisMap.get(l);if(c){var f=c.get("type");u.type=getDimensionTypeByAxis(f)}return u})),s||(s=o&&(o.getDimensionsInfo?o.getDimensionsInfo():o.dimensions.slice())||["x","y"]),s}function injectOrdinalMeta(a,r,n){var o,s;return n&&each$f(a,function(l,u){var c=l.coordDim,f=n.categoryAxisMap.get(c);f&&(o==null&&(o=u),l.ordinalMeta=f.getOrdinalMeta(),r&&(l.createInvertedIndices=!0)),l.otherDims.itemName!=null&&(s=!0)}),!s&&o!=null&&(a[o].otherDims.itemName=0),o}function createSeriesData(a,r,n){n=n||{};var o=r.getSourceManager(),s,l=!1;a?(l=!0,s=createSourceFromSeriesDataOption(a)):(s=o.getSource(),l=s.sourceFormat===SOURCE_FORMAT_ORIGINAL);var u=getCoordSysInfoBySeries(r),c=getCoordSysDimDefs(r,u),f=n.useEncodeDefaulter,d=isFunction(f)?f:f?curry$1(makeSeriesEncodeForAxisCoordSys,c,r):null,v={coordDimensions:c,generateCoord:n.generateCoord,encodeDefine:r.getEncode(),encodeDefaulter:d,canOmitUnusedDimensions:!l},g=prepareSeriesDataSchema(s,v),y=injectOrdinalMeta(g.dimensions,n.createInvertedIndices,u),_=l?null:o.getSharedDataStore(g),S=enableDataStack(r,{schema:g,store:_}),b=new SeriesData(g,r);b.setCalculationInfo(S);var x=y!=null&&isNeedCompleteOrdinalData(s)?function(T,A,w,C){return C===y?w:this.defaultDimValueGetter(T,A,w,C)}:null;return b.hasItemOption=!1,b.initData(l?s:_,null,x),b}function isNeedCompleteOrdinalData(a){if(a.sourceFormat===SOURCE_FORMAT_ORIGINAL){var r=firstDataNotNull(a.data||[]);return!isArray$1(getDataItemValue(r))}}function firstDataNotNull(a){for(var r=0;r<a.length&&a[r]==null;)r++;return a[r]}function isIntervalOrLogScale(a){return a.type==="interval"||a.type==="log"}function intervalScaleNiceTicks(a,r,n,o,s){var l={},u=l.interval=nice(r/n);o!=null&&u<o&&(u=l.interval=o),s!=null&&u>s&&(u=l.interval=s);var c=l.intervalPrecision=getIntervalPrecision(u),f=l.niceTickExtent=[round$4(Math.ceil(a[0]/u)*u,c),round$4(Math.floor(a[1]/u)*u,c)];return fixExtent(f,a),l}function increaseInterval(a){var r=Math.pow(10,quantityExponent(a)),n=a/r;return n?n===2?n=3:n===3?n=5:n*=2:n=1,round$4(n*r)}function getIntervalPrecision(a){return getPrecision(a)+2}function clamp(a,r,n){a[r]=Math.max(Math.min(a[r],n[1]),n[0])}function fixExtent(a,r){!isFinite(a[0])&&(a[0]=r[0]),!isFinite(a[1])&&(a[1]=r[1]),clamp(a,0,r),clamp(a,1,r),a[0]>a[1]&&(a[0]=a[1])}function contain$1(a,r){return a>=r[0]&&a<=r[1]}var ScaleCalculator=function(){function a(){this.normalize=normalize$2,this.scale=scale}return a.prototype.updateMethods=function(r){r.hasBreaks()?(this.normalize=bind$1(r.normalize,r),this.scale=bind$1(r.scale,r)):(this.normalize=normalize$2,this.scale=scale)},a}();function normalize$2(a,r){return r[1]===r[0]?.5:(a-r[0])/(r[1]-r[0])}function scale(a,r){return a*(r[1]-r[0])+r[0]}function logTransform(a,r,n){var o=Math.log(a);return[Math.log(n?r[0]:Math.max(0,r[0]))/o,Math.log(n?r[1]:Math.max(0,r[1]))/o]}var Scale=function(){function a(r){this._calculator=new ScaleCalculator,this._setting=r||{},this._extent=[1/0,-1/0];var n=getScaleBreakHelper();n&&(this._brkCtx=n.createScaleBreakContext(),this._brkCtx.update(this._extent))}return a.prototype.getSetting=function(r){return this._setting[r]},a.prototype._innerUnionExtent=function(r){var n=this._extent;this._innerSetExtent(r[0]<n[0]?r[0]:n[0],r[1]>n[1]?r[1]:n[1])},a.prototype.unionExtentFromData=function(r,n){this._innerUnionExtent(r.getApproximateExtent(n))},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.setExtent=function(r,n){this._innerSetExtent(r,n)},a.prototype._innerSetExtent=function(r,n){var o=this._extent;isNaN(r)||(o[0]=r),isNaN(n)||(o[1]=n),this._brkCtx&&this._brkCtx.update(o)},a.prototype.setBreaksFromOption=function(r){var n=getScaleBreakHelper();n&&this._innerSetBreak(n.parseAxisBreakOption(r,bind$1(this.parse,this)))},a.prototype._innerSetBreak=function(r){this._brkCtx&&(this._brkCtx.setBreaks(r),this._calculator.updateMethods(this._brkCtx),this._brkCtx.update(this._extent))},a.prototype._innerGetBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},a.prototype.hasBreaks=function(){return this._brkCtx?this._brkCtx.hasBreaks():!1},a.prototype._getExtentSpanWithBreaks=function(){return this._brkCtx&&this._brkCtx.hasBreaks()?this._brkCtx.getExtentSpan():this._extent[1]-this._extent[0]},a.prototype.isInExtentRange=function(r){return this._extent[0]<=r&&this._extent[1]>=r},a.prototype.isBlank=function(){return this._isBlank},a.prototype.setBlank=function(r){this._isBlank=r},a}();enableClassManagement(Scale);var uidBase=0,OrdinalMeta=function(){function a(r){this.categories=r.categories||[],this._needCollect=r.needCollect,this._deduplication=r.deduplication,this.uid=++uidBase,this._onCollect=r.onCollect}return a.createByAxisModel=function(r){var n=r.option,o=n.data,s=o&&map$1(o,getName);return new a({categories:s,needCollect:!s,deduplication:n.dedplication!==!1})},a.prototype.getOrdinal=function(r){return this._getOrCreateMap().get(r)},a.prototype.parseAndCollect=function(r){var n,o=this._needCollect;if(!isString(r)&&!o)return r;if(o&&!this._deduplication)return n=this.categories.length,this.categories[n]=r,this._onCollect&&this._onCollect(r,n),n;var s=this._getOrCreateMap();return n=s.get(r),n==null&&(o?(n=this.categories.length,this.categories[n]=r,s.set(r,n),this._onCollect&&this._onCollect(r,n)):n=NaN),n},a.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},a}();function getName(a){return isObject$3(a)&&a.value!=null?a.value:a+""}var OrdinalScale=function(a){__extends(r,a);function r(n){var o=a.call(this,n)||this;o.type="ordinal";var s=o.getSetting("ordinalMeta");return s||(s=new OrdinalMeta({})),isArray$1(s)&&(s=new OrdinalMeta({categories:map$1(s,function(l){return isObject$3(l)?l.value:l})})),o._ordinalMeta=s,o._extent=o.getSetting("extent")||[0,s.categories.length-1],o}return r.prototype.parse=function(n){return n==null?NaN:isString(n)?this._ordinalMeta.getOrdinal(n):Math.round(n)},r.prototype.contain=function(n){return contain$1(n,this._extent)&&n>=0&&n<this._ordinalMeta.categories.length},r.prototype.normalize=function(n){return n=this._getTickNumber(n),this._calculator.normalize(n,this._extent)},r.prototype.scale=function(n){return n=Math.round(this._calculator.scale(n,this._extent)),this.getRawOrdinalNumber(n)},r.prototype.getTicks=function(){for(var n=[],o=this._extent,s=o[0];s<=o[1];)n.push({value:s}),s++;return n},r.prototype.getMinorTicks=function(n){},r.prototype.setSortInfo=function(n){if(n==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var o=n.ordinalNumbers,s=this._ordinalNumbersByTick=[],l=this._ticksByOrdinalNumber=[],u=0,c=this._ordinalMeta.categories.length,f=Math.min(c,o.length);u<f;++u){var d=o[u];s[u]=d,l[d]=u}for(var v=0;u<c;++u){for(;l[v]!=null;)v++;s.push(v),l[v]=u}},r.prototype._getTickNumber=function(n){var o=this._ticksByOrdinalNumber;return o&&n>=0&&n<o.length?o[n]:n},r.prototype.getRawOrdinalNumber=function(n){var o=this._ordinalNumbersByTick;return o&&n>=0&&n<o.length?o[n]:n},r.prototype.getLabel=function(n){if(!this.isBlank()){var o=this.getRawOrdinalNumber(n.value),s=this._ordinalMeta.categories[o];return s==null?"":s+""}},r.prototype.count=function(){return this._extent[1]-this._extent[0]+1},r.prototype.isInExtentRange=function(n){return n=this._getTickNumber(n),this._extent[0]<=n&&this._extent[1]>=n},r.prototype.getOrdinalMeta=function(){return this._ordinalMeta},r.prototype.calcNiceTicks=function(){},r.prototype.calcNiceExtent=function(){},r.type="ordinal",r}(Scale);Scale.registerClass(OrdinalScale);var roundNumber=round$4,IntervalScale=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type="interval",n._interval=0,n._intervalPrecision=2,n}return r.prototype.parse=function(n){return n==null||n===""?NaN:Number(n)},r.prototype.contain=function(n){return contain$1(n,this._extent)},r.prototype.normalize=function(n){return this._calculator.normalize(n,this._extent)},r.prototype.scale=function(n){return this._calculator.scale(n,this._extent)},r.prototype.getInterval=function(){return this._interval},r.prototype.setInterval=function(n){this._interval=n,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(n)},r.prototype.getTicks=function(n){n=n||{};var o=this._interval,s=this._extent,l=this._niceExtent,u=this._intervalPrecision,c=getScaleBreakHelper(),f=[];if(!o)return f;if(n.breakTicks==="only_break"&&c)return c.addBreaksToTicks(f,this._brkCtx.breaks,this._extent),f;var d=1e4;s[0]<l[0]&&(n.expandToNicedExtent?f.push({value:roundNumber(l[0]-o,u)}):f.push({value:s[0]}));for(var v=function(S,b){return Math.round((b-S)/o)},g=l[0];g<=l[1];){if(f.push({value:g}),g=roundNumber(g+o,u),this._brkCtx){var y=this._brkCtx.calcNiceTickMultiple(g,v);y>=0&&(g=roundNumber(g+y*o,u))}if(f.length>0&&g===f[f.length-1].value)break;if(f.length>d)return[]}var _=f.length?f[f.length-1].value:l[1];return s[1]>_&&(n.expandToNicedExtent?f.push({value:roundNumber(_+o,u)}):f.push({value:s[1]})),c&&c.pruneTicksByBreak(n.pruneByBreak,f,this._brkCtx.breaks,function(S){return S.value},this._interval,this._extent),n.breakTicks!=="none"&&c&&c.addBreaksToTicks(f,this._brkCtx.breaks,this._extent),f},r.prototype.getMinorTicks=function(n){for(var o=this.getTicks({expandToNicedExtent:!0}),s=[],l=this.getExtent(),u=1;u<o.length;u++){var c=o[u],f=o[u-1];if(!(f.break||c.break)){for(var d=0,v=[],g=c.value-f.value,y=g/n,_=getIntervalPrecision(y);d<n-1;){var S=roundNumber(f.value+(d+1)*y,_);S>l[0]&&S<l[1]&&v.push(S),d++}var b=getScaleBreakHelper();b&&b.pruneTicksByBreak("auto",v,this._getNonTransBreaks(),function(x){return x},this._interval,l),s.push(v)}}return s},r.prototype._getNonTransBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},r.prototype.getLabel=function(n,o){if(n==null)return"";var s=o&&o.precision;s==null?s=getPrecision(n.value)||0:s==="auto"&&(s=this._intervalPrecision);var l=roundNumber(n.value,s,!0);return addCommas(l)},r.prototype.calcNiceTicks=function(n,o,s){n=n||5;var l=this._extent.slice(),u=this._getExtentSpanWithBreaks();if(isFinite(u)){u<0&&(u=-u,l.reverse(),this._innerSetExtent(l[0],l[1]),l=this._extent.slice());var c=intervalScaleNiceTicks(l,u,n,o,s);this._intervalPrecision=c.intervalPrecision,this._interval=c.interval,this._niceExtent=c.niceTickExtent}},r.prototype.calcNiceExtent=function(n){var o=this._extent.slice();if(o[0]===o[1])if(o[0]!==0){var s=Math.abs(o[0]);n.fixMax||(o[1]+=s/2),o[0]-=s/2}else o[1]=1;var l=o[1]-o[0];isFinite(l)||(o[0]=0,o[1]=1),this._innerSetExtent(o[0],o[1]),o=this._extent.slice(),this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval);var u=this._interval,c=this._intervalPrecision;n.fixMin||(o[0]=roundNumber(Math.floor(o[0]/u)*u,c)),n.fixMax||(o[1]=roundNumber(Math.ceil(o[1]/u)*u,c)),this._innerSetExtent(o[0],o[1])},r.prototype.setNiceExtent=function(n,o){this._niceExtent=[n,o]},r.type="interval",r}(Scale);Scale.registerClass(IntervalScale);var supportFloat32Array=typeof Float32Array<"u",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(a){return isArray$1(a)?supportFloat32Array?new Float32Array(a):a:new Float32ArrayCtor(a)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId$1(a){return a.get("stack")||STACK_PREFIX+a.seriesIndex}function getAxisKey$1(a){return a.dim+a.index}function getLayoutOnAxis(a){var r=[],n=a.axis,o="axis0";if(n.type==="category"){for(var s=n.getBandWidth(),l=0;l<a.count;l++)r.push(defaults({bandWidth:s,axisKey:o,stackId:STACK_PREFIX+l},a));for(var u=doCalBarWidthAndOffset(r),c=[],l=0;l<a.count;l++){var f=u[o][STACK_PREFIX+l];f.offsetCenter=f.offset+f.width/2,c.push(f)}return c}}function prepareLayoutBarSeries(a,r){var n=[];return r.eachSeriesByType(a,function(o){isOnCartesian(o)&&n.push(o)}),n}function getValueAxesMinGaps(a){var r={};each$f(a,function(f){var d=f.coordinateSystem,v=d.getBaseAxis();if(!(v.type!=="time"&&v.type!=="value"))for(var g=f.getData(),y=v.dim+"_"+v.index,_=g.getDimensionIndex(g.mapDimension(v.dim)),S=g.getStore(),b=0,x=S.count();b<x;++b){var T=S.get(_,b);r[y]?r[y].push(T):r[y]=[T]}});var n={};for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];if(s){s.sort(function(f,d){return f-d});for(var l=null,u=1;u<s.length;++u){var c=s[u]-s[u-1];c>0&&(l=l===null?c:Math.min(l,c))}n[o]=l}}return n}function makeColumnLayout(a){var r=getValueAxesMinGaps(a),n=[];return each$f(a,function(o){var s=o.coordinateSystem,l=s.getBaseAxis(),u=l.getExtent(),c;if(l.type==="category")c=l.getBandWidth();else if(l.type==="value"||l.type==="time"){var f=l.dim+"_"+l.index,d=r[f],v=Math.abs(u[1]-u[0]),g=l.scale.getExtent(),y=Math.abs(g[1]-g[0]);c=d?v/y*d:v}else{var _=o.getData();c=Math.abs(u[1]-u[0])/_.count()}var S=parsePercent(o.get("barWidth"),c),b=parsePercent(o.get("barMaxWidth"),c),x=parsePercent(o.get("barMinWidth")||(isInLargeMode(o)?.5:1),c),T=o.get("barGap"),A=o.get("barCategoryGap"),w=o.get("defaultBarGap");n.push({bandWidth:c,barWidth:S,barMaxWidth:b,barMinWidth:x,barGap:T,barCategoryGap:A,defaultBarGap:w,axisKey:getAxisKey$1(l),stackId:getSeriesStackId$1(o)})}),doCalBarWidthAndOffset(n)}function doCalBarWidthAndOffset(a){var r={};each$f(a,function(o,s){var l=o.axisKey,u=o.bandWidth,c=r[l]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:null,gap:o.defaultBarGap||0,stacks:{}},f=c.stacks;r[l]=c;var d=o.stackId;f[d]||c.autoWidthCount++,f[d]=f[d]||{width:0,maxWidth:0};var v=o.barWidth;v&&!f[d].width&&(f[d].width=v,v=Math.min(c.remainedWidth,v),c.remainedWidth-=v);var g=o.barMaxWidth;g&&(f[d].maxWidth=g);var y=o.barMinWidth;y&&(f[d].minWidth=y);var _=o.barGap;_!=null&&(c.gap=_);var S=o.barCategoryGap;S!=null&&(c.categoryGap=S)});var n={};return each$f(r,function(o,s){n[s]={};var l=o.stacks,u=o.bandWidth,c=o.categoryGap;if(c==null){var f=keys(l).length;c=Math.max(35-f*4,15)+"%"}var d=parsePercent(c,u),v=parsePercent(o.gap,1),g=o.remainedWidth,y=o.autoWidthCount,_=(g-d)/(y+(y-1)*v);_=Math.max(_,0),each$f(l,function(T){var A=T.maxWidth,w=T.minWidth;if(T.width){var C=T.width;A&&(C=Math.min(C,A)),w&&(C=Math.max(C,w)),T.width=C,g-=C+v*C,y--}else{var C=_;A&&A<C&&(C=Math.min(A,g)),w&&w>C&&(C=w),C!==_&&(T.width=C,g-=C+v*C,y--)}}),_=(g-d)/(y+(y-1)*v),_=Math.max(_,0);var S=0,b;each$f(l,function(T,A){T.width||(T.width=_),b=T,S+=T.width*(1+v)}),b&&(S-=b.width*v);var x=-S/2;each$f(l,function(T,A){n[s][A]=n[s][A]||{bandWidth:u,offset:x,width:T.width},x+=T.width*(1+v)})}),n}function retrieveColumnLayout(a,r,n){if(a&&r){var o=a[getAxisKey$1(r)];return o}}function layout$2(a,r){var n=prepareLayoutBarSeries(a,r),o=makeColumnLayout(n);each$f(n,function(s){var l=s.getData(),u=s.coordinateSystem,c=u.getBaseAxis(),f=getSeriesStackId$1(s),d=o[getAxisKey$1(c)][f],v=d.offset,g=d.width;l.setLayout({bandWidth:d.bandWidth,offset:v,size:g})})}function createProgressiveLayout(a){return{seriesType:a,plan:createRenderPlanner(),reset:function(r){if(isOnCartesian(r)){var n=r.getData(),o=r.coordinateSystem,s=o.getBaseAxis(),l=o.getOtherAxis(s),u=n.getDimensionIndex(n.mapDimension(l.dim)),c=n.getDimensionIndex(n.mapDimension(s.dim)),f=r.get("showBackground",!0),d=n.mapDimension(l.dim),v=n.getCalculationInfo("stackResultDimension"),g=isDimensionStacked(n,d)&&!!n.getCalculationInfo("stackedOnSeries"),y=l.isHorizontal(),_=getValueAxisStart(s,l),S=isInLargeMode(r),b=r.get("barMinHeight")||0,x=v&&n.getDimensionIndex(v),T=n.getLayout("size"),A=n.getLayout("offset");return{progress:function(w,C){for(var E=w.count,P=S&&createFloat32Array(E*3),I=S&&f&&createFloat32Array(E*3),M=S&&createFloat32Array(E),R=o.master.getRect(),O=y?R.width:R.height,$,B=C.getStore(),F=0;($=w.next())!=null;){var z=B.get(g?x:u,$),G=B.get(c,$),D=_,V=void 0;g&&(V=+z-B.get(u,$));var L=void 0,N=void 0,U=void 0,H=void 0;if(y){var q=o.dataToPoint([z,G]);if(g){var Z=o.dataToPoint([V,G]);D=Z[0]}L=D,N=q[1]+A,U=q[0]-D,H=T,Math.abs(U)<b&&(U=(U<0?-1:1)*b)}else{var q=o.dataToPoint([G,z]);if(g){var Z=o.dataToPoint([G,V]);D=Z[1]}L=q[0]+A,N=D,U=T,H=q[1]-D,Math.abs(H)<b&&(H=(H<=0?-1:1)*b)}S?(P[F]=L,P[F+1]=N,P[F+2]=y?U:H,I&&(I[F]=y?R.x:L,I[F+1]=y?N:R.y,I[F+2]=O),M[$]=$):C.setItemLayout($,{x:L,y:N,width:U,height:H}),F+=3}S&&C.setLayout({largePoints:P,largeDataIndices:M,largeBackgroundPoints:I,valueAxisHorizontal:y})}}}}}}function isOnCartesian(a){return a.coordinateSystem&&a.coordinateSystem.type==="cartesian2d"}function isInLargeMode(a){return a.pipelineContext&&a.pipelineContext.large}function getValueAxisStart(a,r){var n=r.model.get("startValue");return n||(n=0),r.toGlobalCoord(r.dataToCoord(r.type==="log"?n>0?n:1:n))}var bisect=function(a,r,n,o){for(;n<o;){var s=n+o>>>1;a[s][1]<r?n=s+1:o=s}return n},TimeScale=function(a){__extends(r,a);function r(n){var o=a.call(this,n)||this;return o.type="time",o}return r.prototype.getLabel=function(n){var o=this.getSetting("useUTC");return format(n.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,o,this.getSetting("locale"))},r.prototype.getFormattedLabel=function(n,o,s){var l=this.getSetting("useUTC"),u=this.getSetting("locale");return leveledFormat(n,o,s,u,l)},r.prototype.getTicks=function(n){n=n||{};var o=this._interval,s=this._extent,l=getScaleBreakHelper(),u=[];if(!o)return u;var c=this.getSetting("useUTC");if(l&&n.breakTicks==="only_break")return getScaleBreakHelper().addBreaksToTicks(u,this._brkCtx.breaks,this._extent),u;var f=getUnitFromValue(s[1],c);u.push({value:s[0],time:{level:0,upperTimeUnit:f,lowerTimeUnit:f}});var d=getIntervalTicks(this._minLevelUnit,this._approxInterval,c,s,this._getExtentSpanWithBreaks(),this._brkCtx);u=u.concat(d);var v=getUnitFromValue(s[1],c);u.push({value:s[1],time:{level:0,upperTimeUnit:v,lowerTimeUnit:v}});var g=this.getSetting("useUTC"),y=primaryTimeUnits.length-1,_=0;return each$f(u,function(S){y=Math.min(y,indexOf(primaryTimeUnits,S.time.upperTimeUnit)),_=Math.max(_,S.time.level)}),l&&getScaleBreakHelper().pruneTicksByBreak(n.pruneByBreak,u,this._brkCtx.breaks,function(S){return S.value},this._approxInterval,this._extent),l&&n.breakTicks!=="none"&&getScaleBreakHelper().addBreaksToTicks(u,this._brkCtx.breaks,this._extent,function(S){for(var b=Math.max(indexOf(primaryTimeUnits,getUnitFromValue(S.vmin,g)),indexOf(primaryTimeUnits,getUnitFromValue(S.vmax,g))),x=0,T=0;T<primaryTimeUnits.length;T++)if(!isPrimaryUnitValueAndGreaterSame(primaryTimeUnits[T],S.vmin,S.vmax,g)){x=T;break}var A=Math.min(x,y),w=Math.max(A,b);return{level:_,lowerTimeUnit:primaryTimeUnits[w],upperTimeUnit:primaryTimeUnits[A]}}),u},r.prototype.calcNiceExtent=function(n){var o=this.getExtent();if(o[0]===o[1]&&(o[0]-=ONE_DAY,o[1]+=ONE_DAY),o[1]===-1/0&&o[0]===1/0){var s=new Date;o[1]=+new Date(s.getFullYear(),s.getMonth(),s.getDate()),o[0]=o[1]-ONE_DAY}this._innerSetExtent(o[0],o[1]),this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval)},r.prototype.calcNiceTicks=function(n,o,s){n=n||10;var l=this._getExtentSpanWithBreaks();this._approxInterval=l/n,o!=null&&this._approxInterval<o&&(this._approxInterval=o),s!=null&&this._approxInterval>s&&(this._approxInterval=s);var u=scaleIntervals.length,c=Math.min(bisect(scaleIntervals,this._approxInterval,0,u),u-1);this._interval=scaleIntervals[c][1],this._intervalPrecision=getIntervalPrecision(this._interval),this._minLevelUnit=scaleIntervals[Math.max(c-1,0)][0]},r.prototype.parse=function(n){return isNumber(n)?n:+parseDate(n)},r.prototype.contain=function(n){return contain$1(n,this._extent)},r.prototype.normalize=function(n){return this._calculator.normalize(n,this._extent)},r.prototype.scale=function(n){return this._calculator.scale(n,this._extent)},r.type="time",r}(IntervalScale),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isPrimaryUnitValueAndGreaterSame(a,r,n,o){return roundTime(new Date(r),a,o).getTime()===roundTime(new Date(n),a,o).getTime()}function getDateInterval(a,r){return a/=ONE_DAY,a>16?16:a>7.5?7:a>3.5?4:a>1.5?2:1}function getMonthInterval(a){var r=30*ONE_DAY;return a/=r,a>6?6:a>3?3:a>2?2:1}function getHourInterval(a){return a/=ONE_HOUR,a>12?12:a>6?6:a>3.5?4:a>2?2:1}function getMinutesAndSecondsInterval(a,r){return a/=r?ONE_MINUTE:ONE_SECOND,a>30?30:a>20?20:a>15?15:a>10?10:a>5?5:a>2?2:1}function getMillisecondsInterval(a){return nice(a)}function getFirstTimestampOfUnit(a,r,n){var o=Math.max(0,indexOf(primaryTimeUnits,r)-1);return roundTime(new Date(a),primaryTimeUnits[o],n).getTime()}function createEstimateNiceMultiple(a,r){var n=new Date(0);n[a](1);var o=n.getTime();n[a](1+r);var s=n.getTime()-o;return function(l,u){return Math.max(0,Math.round((u-l)/s))}}function getIntervalTicks(a,r,n,o,s,l){var u=1e4,c=timeUnits,f=0;function d(F,z,G,D,V,L,N){for(var U=createEstimateNiceMultiple(V,F),H=z,q=new Date(H);H<G&&H<=o[1]&&(N.push({value:H}),!(f++>u));)if(q[V](q[D]()+F),H=q.getTime(),l){var Z=l.calcNiceTickMultiple(H,U);Z>0&&(q[V](q[D]()+Z*F),H=q.getTime())}N.push({value:H,notAdd:!0})}function v(F,z,G){var D=[],V=!z.length;if(!isPrimaryUnitValueAndGreaterSame(getPrimaryTimeUnit(F),o[0],o[1],n)){V&&(z=[{value:getFirstTimestampOfUnit(o[0],F,n)},{value:o[1]}]);for(var L=0;L<z.length-1;L++){var N=z[L].value,U=z[L+1].value;if(N!==U){var H=void 0,q=void 0,Z=void 0,ee=!1;switch(F){case"year":H=Math.max(1,Math.round(r/ONE_DAY/365)),q=fullYearGetterName(n),Z=fullYearSetterName(n);break;case"half-year":case"quarter":case"month":H=getMonthInterval(r),q=monthGetterName(n),Z=monthSetterName(n);break;case"week":case"half-week":case"day":H=getDateInterval(r),q=dateGetterName(n),Z=dateSetterName(n),ee=!0;break;case"half-day":case"quarter-day":case"hour":H=getHourInterval(r),q=hoursGetterName(n),Z=hoursSetterName(n);break;case"minute":H=getMinutesAndSecondsInterval(r,!0),q=minutesGetterName(n),Z=minutesSetterName(n);break;case"second":H=getMinutesAndSecondsInterval(r,!1),q=secondsGetterName(n),Z=secondsSetterName(n);break;case"millisecond":H=getMillisecondsInterval(r),q=millisecondsGetterName(n),Z=millisecondsSetterName(n);break}U>=o[0]&&N<=o[1]&&d(H,N,U,q,Z,ee,D),F==="year"&&G.length>1&&L===0&&G.unshift({value:G[0].value-H})}}for(var L=0;L<D.length;L++)G.push(D[L])}}for(var g=[],y=[],_=0,S=0,b=0;b<c.length;++b){var x=getPrimaryTimeUnit(c[b]);if(isPrimaryTimeUnit(c[b])){v(c[b],g[g.length-1]||[],y);var T=c[b+1]?getPrimaryTimeUnit(c[b+1]):null;if(x!==T){if(y.length){S=_,y.sort(function(F,z){return F.value-z.value});for(var A=[],w=0;w<y.length;++w){var C=y[w].value;(w===0||y[w-1].value!==C)&&(A.push(y[w]),C>=o[0]&&C<=o[1]&&_++)}var E=s/r;if(_>E*1.5&&S>E/1.5||(g.push(A),_>E||a===c[b]))break}y=[]}}}for(var P=filter(map$1(g,function(F){return filter(F,function(z){return z.value>=o[0]&&z.value<=o[1]&&!z.notAdd})}),function(F){return F.length>0}),I=[],M=P.length-1,b=0;b<P.length;++b)for(var R=P[b],O=0;O<R.length;++O){var $=getUnitFromValue(R[O].value,n);I.push({value:R[O].value,time:{level:M-b,upperTimeUnit:$,lowerTimeUnit:$}})}I.sort(function(F,z){return F.value-z.value});for(var B=[],b=0;b<I.length;++b)(b===0||I[b].value!==I[b-1].value)&&B.push(I[b]);return B}Scale.registerClass(TimeScale);var fixRound=round$4,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog=Math.log,LogScale=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type="log",n.base=10,n._originalScale=new IntervalScale,n}return r.prototype.getTicks=function(n){n=n||{};var o=this._extent.slice(),s=this._originalScale.getExtent(),l=a.prototype.getTicks.call(this,n),u=this.base,c=this._originalScale._innerGetBreaks(),f=getScaleBreakHelper();return map$1(l,function(d){var v=d.value,g=null,y=mathPow$1(u,v);v===o[0]&&this._fixMin?g=s[0]:v===o[1]&&this._fixMax&&(g=s[1]);var _;if(f){var S=f.getTicksLogTransformBreak(d,u,c,fixRoundingError);_=S.vBreak,g==null&&(g=S.brkRoundingCriterion)}return g!=null&&(y=fixRoundingError(y,g)),{value:y,break:_}},this)},r.prototype._getNonTransBreaks=function(){return this._originalScale._innerGetBreaks()},r.prototype.setExtent=function(n,o){this._originalScale.setExtent(n,o);var s=logTransform(this.base,[n,o]);a.prototype.setExtent.call(this,s[0],s[1])},r.prototype.getExtent=function(){var n=this.base,o=a.prototype.getExtent.call(this);o[0]=mathPow$1(n,o[0]),o[1]=mathPow$1(n,o[1]);var s=this._originalScale.getExtent();return this._fixMin&&(o[0]=fixRoundingError(o[0],s[0])),this._fixMax&&(o[1]=fixRoundingError(o[1],s[1])),o},r.prototype.unionExtentFromData=function(n,o){this._originalScale.unionExtentFromData(n,o);var s=logTransform(this.base,n.getApproximateExtent(o),!0);this._innerUnionExtent(s)},r.prototype.calcNiceTicks=function(n){n=n||10;var o=this._extent.slice(),s=this._getExtentSpanWithBreaks();if(!(!isFinite(s)||s<=0)){var l=quantity(s),u=n/s*l;for(u<=.5&&(l*=10);!isNaN(l)&&Math.abs(l)<1&&Math.abs(l)>0;)l*=10;var c=[fixRound(mathCeil$1(o[0]/l)*l),fixRound(mathFloor$1(o[1]/l)*l)];this._interval=l,this._intervalPrecision=getIntervalPrecision(l),this._niceExtent=c}},r.prototype.calcNiceExtent=function(n){a.prototype.calcNiceExtent.call(this,n),this._fixMin=n.fixMin,this._fixMax=n.fixMax},r.prototype.contain=function(n){return n=mathLog(n)/mathLog(this.base),a.prototype.contain.call(this,n)},r.prototype.normalize=function(n){return n=mathLog(n)/mathLog(this.base),a.prototype.normalize.call(this,n)},r.prototype.scale=function(n){return n=a.prototype.scale.call(this,n),mathPow$1(this.base,n)},r.prototype.setBreaksFromOption=function(n){var o=getScaleBreakHelper();if(o){var s=o.logarithmicParseBreaksFromOption(n,this.base,bind$1(this.parse,this)),l=s.parsedOriginal,u=s.parsedLogged;this._originalScale._innerSetBreak(l),this._innerSetBreak(u)}},r.type="log",r}(IntervalScale);function fixRoundingError(a,r){return fixRound(a,getPrecision(r))}Scale.registerClass(LogScale);var ScaleRawExtentInfo=function(){function a(r,n,o){this._prepareParams(r,n,o)}return a.prototype._prepareParams=function(r,n,o){o[1]<o[0]&&(o=[NaN,NaN]),this._dataMin=o[0],this._dataMax=o[1];var s=this._isOrdinal=r.type==="ordinal";this._needCrossZero=r.type==="interval"&&n.getNeedCrossZero&&n.getNeedCrossZero();var l=n.get("min",!0);l==null&&(l=n.get("startValue",!0));var u=this._modelMinRaw=l;isFunction(u)?this._modelMinNum=parseAxisModelMinMax(r,u({min:o[0],max:o[1]})):u!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(r,u));var c=this._modelMaxRaw=n.get("max",!0);if(isFunction(c)?this._modelMaxNum=parseAxisModelMinMax(r,c({min:o[0],max:o[1]})):c!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(r,c)),s)this._axisDataLen=n.getCategories().length;else{var f=n.get("boundaryGap"),d=isArray$1(f)?f:[f||0,f||0];typeof d[0]=="boolean"||typeof d[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[parsePercent$1(d[0],1),parsePercent$1(d[1],1)]}},a.prototype.calculate=function(){var r=this._isOrdinal,n=this._dataMin,o=this._dataMax,s=this._axisDataLen,l=this._boundaryGapInner,u=r?null:o-n||Math.abs(n),c=this._modelMinRaw==="dataMin"?n:this._modelMinNum,f=this._modelMaxRaw==="dataMax"?o:this._modelMaxNum,d=c!=null,v=f!=null;c==null&&(c=r?s?0:NaN:n-l[0]*u),f==null&&(f=r?s?s-1:NaN:o+l[1]*u),(c==null||!isFinite(c))&&(c=NaN),(f==null||!isFinite(f))&&(f=NaN);var g=eqNaN(c)||eqNaN(f)||r&&!s;this._needCrossZero&&(c>0&&f>0&&!d&&(c=0),c<0&&f<0&&!v&&(f=0));var y=this._determinedMin,_=this._determinedMax;return y!=null&&(c=y,d=!0),_!=null&&(f=_,v=!0),{min:c,max:f,minFixed:d,maxFixed:v,isBlank:g}},a.prototype.modifyDataMinMax=function(r,n){this[DATA_MIN_MAX_ATTR[r]]=n},a.prototype.setDeterminedMinMax=function(r,n){var o=DETERMINED_MIN_MAX_ATTR[r];this[o]=n},a.prototype.freeze=function(){this.frozen=!0},a}(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(a,r,n){var o=a.rawExtentInfo;return o||(o=new ScaleRawExtentInfo(a,r,n),a.rawExtentInfo=o,o)}function parseAxisModelMinMax(a,r){return r==null?null:eqNaN(r)?NaN:a.parse(r)}function getScaleExtent(a,r){var n=a.type,o=ensureScaleRawExtentInfo(a,r,a.getExtent()).calculate();a.setBlank(o.isBlank);var s=o.min,l=o.max,u=r.ecModel;if(u&&n==="time"){var c=prepareLayoutBarSeries("bar",u),f=!1;if(each$f(c,function(g){f=f||g.getBaseAxis()===r.axis}),f){var d=makeColumnLayout(c),v=adjustScaleForOverflow(s,l,r,d);s=v.min,l=v.max}}return{extent:[s,l],fixMin:o.minFixed,fixMax:o.maxFixed}}function adjustScaleForOverflow(a,r,n,o){var s=n.axis.getExtent(),l=Math.abs(s[1]-s[0]),u=retrieveColumnLayout(o,n.axis);if(u===void 0)return{min:a,max:r};var c=1/0;each$f(u,function(_){c=Math.min(_.offset,c)});var f=-1/0;each$f(u,function(_){f=Math.max(_.offset+_.width,f)}),c=Math.abs(c),f=Math.abs(f);var d=c+f,v=r-a,g=1-(c+f)/l,y=v/g-v;return r+=y*(f/d),a-=y*(c/d),{min:a,max:r}}function niceScaleExtent(a,r){var n=r,o=getScaleExtent(a,n),s=o.extent,l=n.get("splitNumber");a instanceof LogScale&&(a.base=n.get("logBase"));var u=a.type,c=n.get("interval"),f=u==="interval"||u==="time";a.setBreaksFromOption(retrieveAxisBreaksOption(n)),a.setExtent(s[0],s[1]),a.calcNiceExtent({splitNumber:l,fixMin:o.fixMin,fixMax:o.fixMax,minInterval:f?n.get("minInterval"):null,maxInterval:f?n.get("maxInterval"):null}),c!=null&&a.setInterval&&a.setInterval(c)}function createScaleByModel$1(a,r){if(r=r||a.get("type"),r)switch(r){case"category":return new OrdinalScale({ordinalMeta:a.getOrdinalMeta?a.getOrdinalMeta():a.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new(Scale.getClass(r)||IntervalScale)}}function ifAxisCrossZero(a){var r=a.scale.getExtent(),n=r[0],o=r[1];return!(n>0&&o>0||n<0&&o<0)}function makeLabelFormatter(a){var r=a.getLabelModel().get("formatter");if(a.type==="time"){var n=parseTimeAxisLabelFormatter(r);return function(s,l){return a.scale.getFormattedLabel(s,l,n)}}else{if(isString(r))return function(s){var l=a.scale.getLabel(s),u=r.replace("{value}",l??"");return u};if(isFunction(r)){if(a.type==="category")return function(s,l){return r(getAxisRawValue(a,s),s.value-a.scale.getExtent()[0],null)};var o=getScaleBreakHelper();return function(s,l){var u=null;return o&&(u=o.makeAxisLabelFormatterParamBreak(u,s.break)),r(getAxisRawValue(a,s),l,u)}}else return function(s){return a.scale.getLabel(s)}}}function getAxisRawValue(a,r){return a.type==="category"?a.scale.getLabel(r):r.value}function getOptionCategoryInterval(a){var r=a.get("interval");return r??"auto"}function shouldShowAllLabels(a){return a.type==="category"&&getOptionCategoryInterval(a.getLabelModel())===0}function getDataDimensionsOnAxis(a,r){var n={};return each$f(a.mapDimensionsAll(r),function(o){n[getStackedDimension(a,o)]=!0}),keys(n)}function unionAxisExtentFromData(a,r,n){r&&each$f(getDataDimensionsOnAxis(r,n),function(o){var s=r.getApproximateExtent(o);s[0]<a[0]&&(a[0]=s[0]),s[1]>a[1]&&(a[1]=s[1])})}function isNameLocationCenter(a){return a==="middle"||a==="center"}function shouldAxisShow(a){return a.getShallow("show")}function retrieveAxisBreaksOption(a){var r=a.get("breaks",!0);if(r!=null)return!getScaleBreakHelper()||!isSupportAxisBreak(a.axis)?void 0:r}function isSupportAxisBreak(a){return(a.dim==="x"||a.dim==="y"||a.dim==="z"||a.dim==="single")&&a.type!=="category"}var AxisModelCommonMixin=function(){function a(){}return a.prototype.getNeedCrossZero=function(){var r=this.option;return!r.scale},a.prototype.getCoordSysModel=function(){},a}(),EPSILON=1e-8;function isAroundEqual(a,r){return Math.abs(a-r)<EPSILON}function contain(a,r,n){var o=0,s=a[0];if(!s)return!1;for(var l=1;l<a.length;l++){var u=a[l];o+=windingLine(s[0],s[1],u[0],u[1],r,n),s=u}var c=a[0];return(!isAroundEqual(s[0],c[0])||!isAroundEqual(s[1],c[1]))&&(o+=windingLine(s[0],s[1],c[0],c[1],r,n)),o!==0}var TMP_TRANSFORM=[];function transformPoints(a,r){for(var n=0;n<a.length;n++)applyTransform$1(a[n],a[n],r)}function updateBBoxFromPoints(a,r,n,o){for(var s=0;s<a.length;s++){var l=a[s];o&&(l=o.project(l)),l&&isFinite(l[0])&&isFinite(l[1])&&(min$1(r,r,l),max$1(n,n,l))}}function centroid$1(a){for(var r=0,n=0,o=0,s=a.length,l=a[s-1][0],u=a[s-1][1],c=0;c<s;c++){var f=a[c][0],d=a[c][1],v=l*d-f*u;r+=v,n+=(l+f)*v,o+=(u+d)*v,l=f,u=d}return r?[n/r/3,o/r/3,r]:[a[0][0]||0,a[0][1]||0]}var Region=function(){function a(r){this.name=r}return a.prototype.setCenter=function(r){this._center=r},a.prototype.getCenter=function(){var r=this._center;return r||(r=this._center=this.calcCenter()),r},a}(),GeoJSONPolygonGeometry=function(){function a(r,n){this.type="polygon",this.exterior=r,this.interiors=n}return a}(),GeoJSONLineStringGeometry=function(){function a(r){this.type="linestring",this.points=r}return a}(),GeoJSONRegion=function(a){__extends(r,a);function r(n,o,s){var l=a.call(this,n)||this;return l.type="geoJSON",l.geometries=o,l._center=s&&[s[0],s[1]],l}return r.prototype.calcCenter=function(){for(var n=this.geometries,o,s=0,l=0;l<n.length;l++){var u=n[l],c=u.exterior,f=c&&c.length;f>s&&(o=u,s=f)}if(o)return centroid$1(o.exterior);var d=this.getBoundingRect();return[d.x+d.width/2,d.y+d.height/2]},r.prototype.getBoundingRect=function(n){var o=this._rect;if(o&&!n)return o;var s=[1/0,1/0],l=[-1/0,-1/0],u=this.geometries;return each$f(u,function(c){c.type==="polygon"?updateBBoxFromPoints(c.exterior,s,l,n):each$f(c.points,function(f){updateBBoxFromPoints(f,s,l,n)})}),isFinite(s[0])&&isFinite(s[1])&&isFinite(l[0])&&isFinite(l[1])||(s[0]=s[1]=l[0]=l[1]=0),o=new BoundingRect(s[0],s[1],l[0]-s[0],l[1]-s[1]),n||(this._rect=o),o},r.prototype.contain=function(n){var o=this.getBoundingRect(),s=this.geometries;if(!o.contain(n[0],n[1]))return!1;e:for(var l=0,u=s.length;l<u;l++){var c=s[l];if(c.type==="polygon"){var f=c.exterior,d=c.interiors;if(contain(f,n[0],n[1])){for(var v=0;v<(d?d.length:0);v++)if(contain(d[v],n[0],n[1]))continue e;return!0}}}return!1},r.prototype.transformTo=function(n,o,s,l){var u=this.getBoundingRect(),c=u.width/u.height;s?l||(l=s/c):s=c*l;for(var f=new BoundingRect(n,o,s,l),d=u.calculateTransform(f),v=this.geometries,g=0;g<v.length;g++){var y=v[g];y.type==="polygon"?(transformPoints(y.exterior,d),each$f(y.interiors,function(_){transformPoints(_,d)})):each$f(y.points,function(_){transformPoints(_,d)})}u=this._rect,u.copy(f),this._center=[u.x+u.width/2,u.y+u.height/2]},r.prototype.cloneShallow=function(n){n==null&&(n=this.name);var o=new r(n,this.geometries,this._center);return o._rect=this._rect,o.transformTo=null,o},r}(Region),GeoSVGRegion=function(a){__extends(r,a);function r(n,o){var s=a.call(this,n)||this;return s.type="geoSVG",s._elOnlyForCalculate=o,s}return r.prototype.calcCenter=function(){for(var n=this._elOnlyForCalculate,o=n.getBoundingRect(),s=[o.x+o.width/2,o.y+o.height/2],l=identity(TMP_TRANSFORM),u=n;u&&!u.isGeoSVGGraphicRoot;)mul(l,u.getLocalTransform(),l),u=u.parent;return invert(l,l),applyTransform$1(s,s,l),s},r}(Region);function decode(a){if(!a.UTF8Encoding)return a;var r=a,n=r.UTF8Scale;n==null&&(n=1024);var o=r.features;return each$f(o,function(s){var l=s.geometry,u=l.encodeOffsets,c=l.coordinates;if(u)switch(l.type){case"LineString":l.coordinates=decodeRing(c,u,n);break;case"Polygon":decodeRings(c,u,n);break;case"MultiLineString":decodeRings(c,u,n);break;case"MultiPolygon":each$f(c,function(f,d){return decodeRings(f,u[d],n)})}}),r.UTF8Encoding=!1,r}function decodeRings(a,r,n){for(var o=0;o<a.length;o++)a[o]=decodeRing(a[o],r[o],n)}function decodeRing(a,r,n){for(var o=[],s=r[0],l=r[1],u=0;u<a.length;u+=2){var c=a.charCodeAt(u)-64,f=a.charCodeAt(u+1)-64;c=c>>1^-(c&1),f=f>>1^-(f&1),c+=s,f+=l,s=c,l=f,o.push([c/n,f/n])}return o}function parseGeoJSON(a,r){return a=decode(a),map$1(filter(a.features,function(n){return n.geometry&&n.properties&&n.geometry.coordinates.length>0}),function(n){var o=n.properties,s=n.geometry,l=[];switch(s.type){case"Polygon":var u=s.coordinates;l.push(new GeoJSONPolygonGeometry(u[0],u.slice(1)));break;case"MultiPolygon":each$f(s.coordinates,function(f){f[0]&&l.push(new GeoJSONPolygonGeometry(f[0],f.slice(1)))});break;case"LineString":l.push(new GeoJSONLineStringGeometry([s.coordinates]));break;case"MultiLineString":l.push(new GeoJSONLineStringGeometry(s.coordinates))}var c=new GeoJSONRegion(o[r||"name"],l,o.cp);return c.properties=o,c})}var modelInner=makeInner(),axisInner=makeInner(),AxisTickLabelComputingKind={estimate:1,determine:2};function createAxisLabelsComputingContext(a){return{out:{noPxChangeTryDetermine:[]},kind:a}}function tickValuesToNumbers(a,r){var n=map$1(r,function(o){return a.scale.parse(o)});return a.type==="time"&&n.length>0&&(n.sort(),n.unshift(n[0]),n.push(n[n.length-1])),n}function createAxisLabels(a,r){var n=a.getLabelModel().get("customValues");if(n){var o=makeLabelFormatter(a),s=a.scale.getExtent(),l=tickValuesToNumbers(a,n),u=filter(l,function(c){return c>=s[0]&&c<=s[1]});return{labels:map$1(u,function(c){var f={value:c};return{formattedLabel:o(f),rawLabel:a.scale.getLabel(f),tickValue:c,time:void 0,break:void 0}})}}return a.type==="category"?makeCategoryLabels(a,r):makeRealNumberLabels(a)}function createAxisTicks(a,r,n){var o=a.getTickModel().get("customValues");if(o){var s=a.scale.getExtent(),l=tickValuesToNumbers(a,o);return{ticks:filter(l,function(u){return u>=s[0]&&u<=s[1]})}}return a.type==="category"?makeCategoryTicks(a,r):{ticks:map$1(a.scale.getTicks(n),function(u){return u.value})}}function makeCategoryLabels(a,r){var n=a.getLabelModel(),o=makeCategoryLabelsActually(a,n,r);return!n.get("show")||a.scale.isBlank()?{labels:[]}:o}function makeCategoryLabelsActually(a,r,n){var o=ensureCategoryLabelCache(a),s=getOptionCategoryInterval(r),l=n.kind===AxisTickLabelComputingKind.estimate;if(!l){var u=axisCacheGet(o,s);if(u)return u}var c,f;isFunction(s)?c=makeLabelsByCustomizedCategoryInterval(a,s):(f=s==="auto"?makeAutoCategoryInterval(a,n):s,c=makeLabelsByNumericCategoryInterval(a,f));var d={labels:c,labelCategoryInterval:f};return l?n.out.noPxChangeTryDetermine.push(function(){return axisCacheSet(o,s,d),!0}):axisCacheSet(o,s,d),d}function makeCategoryTicks(a,r){var n=ensureCategoryTickCache(a),o=getOptionCategoryInterval(r),s=axisCacheGet(n,o);if(s)return s;var l,u;if((!r.get("show")||a.scale.isBlank())&&(l=[]),isFunction(o))l=makeLabelsByCustomizedCategoryInterval(a,o,!0);else if(o==="auto"){var c=makeCategoryLabelsActually(a,a.getLabelModel(),createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine));u=c.labelCategoryInterval,l=map$1(c.labels,function(f){return f.tickValue})}else u=o,l=makeLabelsByNumericCategoryInterval(a,u,!0);return axisCacheSet(n,o,{ticks:l,tickCategoryInterval:u})}function makeRealNumberLabels(a){var r=a.scale.getTicks(),n=makeLabelFormatter(a);return{labels:map$1(r,function(o,s){return{formattedLabel:n(o,s),rawLabel:a.scale.getLabel(o),tickValue:o.value,time:o.time,break:o.break}})}}var ensureCategoryTickCache=initAxisCacheMethod("axisTick"),ensureCategoryLabelCache=initAxisCacheMethod("axisLabel");function initAxisCacheMethod(a){return function(n){return axisInner(n)[a]||(axisInner(n)[a]={list:[]})}}function axisCacheGet(a,r){for(var n=0;n<a.list.length;n++)if(a.list[n].key===r)return a.list[n].value}function axisCacheSet(a,r,n){return a.list.push({key:r,value:n}),n}function makeAutoCategoryInterval(a,r){if(r.kind===AxisTickLabelComputingKind.estimate){var n=a.calculateCategoryInterval(r);return r.out.noPxChangeTryDetermine.push(function(){return axisInner(a).autoInterval=n,!0}),n}var o=axisInner(a).autoInterval;return o??(axisInner(a).autoInterval=a.calculateCategoryInterval(r))}function calculateCategoryInterval(a,r){var n=r.kind,o=fetchAutoCategoryIntervalCalculationParams(a),s=makeLabelFormatter(a),l=(o.axisRotate-o.labelRotate)/180*Math.PI,u=a.scale,c=u.getExtent(),f=u.count();if(c[1]-c[0]<1)return 0;var d=1,v=40;f>v&&(d=Math.max(1,Math.floor(f/v)));for(var g=c[0],y=a.dataToCoord(g+1)-a.dataToCoord(g),_=Math.abs(y*Math.cos(l)),S=Math.abs(y*Math.sin(l)),b=0,x=0;g<=c[1];g+=d){var T=0,A=0,w=getBoundingRect(s({value:g}),o.font,"center","top");T=w.width*1.3,A=w.height*1.3,b=Math.max(b,T,7),x=Math.max(x,A,7)}var C=b/_,E=x/S;isNaN(C)&&(C=1/0),isNaN(E)&&(E=1/0);var P=Math.max(0,Math.floor(Math.min(C,E)));if(n===AxisTickLabelComputingKind.estimate)return r.out.noPxChangeTryDetermine.push(bind$1(calculateCategoryIntervalTryDetermine,null,a,P,f)),P;var I=calculateCategoryIntervalDealCache(a,P,f);return I??P}function calculateCategoryIntervalTryDetermine(a,r,n){return calculateCategoryIntervalDealCache(a,r,n)==null}function calculateCategoryIntervalDealCache(a,r,n){var o=modelInner(a.model),s=a.getExtent(),l=o.lastAutoInterval,u=o.lastTickCount;if(l!=null&&u!=null&&Math.abs(l-r)<=1&&Math.abs(u-n)<=1&&l>r&&o.axisExtent0===s[0]&&o.axisExtent1===s[1])return l;o.lastTickCount=n,o.lastAutoInterval=r,o.axisExtent0=s[0],o.axisExtent1=s[1]}function fetchAutoCategoryIntervalCalculationParams(a){var r=a.getLabelModel();return{axisRotate:a.getRotate?a.getRotate():a.isHorizontal&&!a.isHorizontal()?90:0,labelRotate:r.get("rotate")||0,font:r.getFont()}}function makeLabelsByNumericCategoryInterval(a,r,n){var o=makeLabelFormatter(a),s=a.scale,l=s.getExtent(),u=a.getLabelModel(),c=[],f=Math.max((r||0)+1,1),d=l[0],v=s.count();d!==0&&f>1&&v/f>2&&(d=Math.round(Math.ceil(d/f)*f));var g=shouldShowAllLabels(a),y=u.get("showMinLabel")||g,_=u.get("showMaxLabel")||g;y&&d!==l[0]&&b(l[0]);for(var S=d;S<=l[1];S+=f)b(S);_&&S-f!==l[1]&&b(l[1]);function b(x){var T={value:x};c.push(n?x:{formattedLabel:o(T),rawLabel:s.getLabel(T),tickValue:x,time:void 0,break:void 0})}return c}function makeLabelsByCustomizedCategoryInterval(a,r,n){var o=a.scale,s=makeLabelFormatter(a),l=[];return each$f(o.getTicks(),function(u){var c=o.getLabel(u),f=u.value;r(u.value,c)&&l.push(n?f:{formattedLabel:s(u),rawLabel:c,tickValue:f,time:void 0,break:void 0})}),l}var NORMALIZED_EXTENT=[0,1],Axis=function(){function a(r,n,o){this.onBand=!1,this.inverse=!1,this.dim=r,this.scale=n,this._extent=o||[0,0]}return a.prototype.contain=function(r){var n=this._extent,o=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return r>=o&&r<=s},a.prototype.containData=function(r){return this.scale.contain(this.scale.parse(r))},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.getPixelPrecision=function(r){return getPixelPrecision(r||this.scale.getExtent(),this._extent)},a.prototype.setExtent=function(r,n){var o=this._extent;o[0]=r,o[1]=n},a.prototype.dataToCoord=function(r,n){var o=this._extent,s=this.scale;return r=s.normalize(s.parse(r)),this.onBand&&s.type==="ordinal"&&(o=o.slice(),fixExtentWithBands(o,s.count())),linearMap$2(r,NORMALIZED_EXTENT,o,n)},a.prototype.coordToData=function(r,n){var o=this._extent,s=this.scale;this.onBand&&s.type==="ordinal"&&(o=o.slice(),fixExtentWithBands(o,s.count()));var l=linearMap$2(r,o,NORMALIZED_EXTENT,n);return this.scale.scale(l)},a.prototype.pointToData=function(r,n){},a.prototype.getTicksCoords=function(r){r=r||{};var n=r.tickModel||this.getTickModel(),o=createAxisTicks(this,n,{breakTicks:r.breakTicks,pruneByBreak:r.pruneByBreak}),s=o.ticks,l=map$1(s,function(c){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(c):c),tickValue:c}},this),u=n.get("alignWithLabel");return fixOnBandTicksCoords(this,l,u,r.clamp),l},a.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var r=this.model.getModel("minorTick"),n=r.get("splitNumber");n>0&&n<100||(n=5);var o=this.scale.getMinorTicks(n),s=map$1(o,function(l){return map$1(l,function(u){return{coord:this.dataToCoord(u),tickValue:u}},this)},this);return s},a.prototype.getViewLabels=function(r){return r=r||createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine),createAxisLabels(this,r).labels},a.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},a.prototype.getTickModel=function(){return this.model.getModel("axisTick")},a.prototype.getBandWidth=function(){var r=this._extent,n=this.scale.getExtent(),o=n[1]-n[0]+(this.onBand?1:0);o===0&&(o=1);var s=Math.abs(r[1]-r[0]);return Math.abs(s)/o},a.prototype.calculateCategoryInterval=function(r){return r=r||createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine),calculateCategoryInterval(this,r)},a}();function fixExtentWithBands(a,r){var n=a[1]-a[0],o=r,s=n/o/2;a[0]+=s,a[1]-=s}function fixOnBandTicksCoords(a,r,n,o){var s=r.length;if(!a.onBand||n||!s)return;var l=a.getExtent(),u,c;if(s===1)r[0].coord=l[0],r[0].onBand=!0,u=r[1]={coord:l[1],tickValue:r[0].tickValue,onBand:!0};else{var f=r[s-1].tickValue-r[0].tickValue,d=(r[s-1].coord-r[0].coord)/f;each$f(r,function(_){_.coord-=d/2,_.onBand=!0});var v=a.scale.getExtent();c=1+v[1]-r[s-1].tickValue,u={coord:r[s-1].coord+d*c,tickValue:v[1]+1,onBand:!0},r.push(u)}var g=l[0]>l[1];y(r[0].coord,l[0])&&(o?r[0].coord=l[0]:r.shift()),o&&y(l[0],r[0].coord)&&r.unshift({coord:l[0],onBand:!0}),y(l[1],u.coord)&&(o?u.coord=l[1]:r.pop()),o&&y(u.coord,l[1])&&r.push({coord:l[1],onBand:!0});function y(_,S){return _=round$4(_),S=round$4(S),g?_>S:_<S}}var PI2$2=Math.PI*2,CMD$1=PathProxy.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(a,r,n,o,s){var l=n.width,u=n.height;switch(a){case"top":o.set(n.x+l/2,n.y-r),s.set(0,-1);break;case"bottom":o.set(n.x+l/2,n.y+u+r),s.set(0,1);break;case"left":o.set(n.x-r,n.y+u/2),s.set(-1,0);break;case"right":o.set(n.x+l+r,n.y+u/2),s.set(1,0);break}}function projectPointToArc(a,r,n,o,s,l,u,c,f){u-=a,c-=r;var d=Math.sqrt(u*u+c*c);u/=d,c/=d;var v=u*n+a,g=c*n+r;if(Math.abs(o-s)%PI2$2<1e-4)return f[0]=v,f[1]=g,d-n;if(l){var y=o;o=normalizeRadian(s),s=normalizeRadian(y)}else o=normalizeRadian(o),s=normalizeRadian(s);o>s&&(s+=PI2$2);var _=Math.atan2(c,u);if(_<0&&(_+=PI2$2),_>=o&&_<=s||_+PI2$2>=o&&_+PI2$2<=s)return f[0]=v,f[1]=g,d-n;var S=n*Math.cos(o)+a,b=n*Math.sin(o)+r,x=n*Math.cos(s)+a,T=n*Math.sin(s)+r,A=(S-u)*(S-u)+(b-c)*(b-c),w=(x-u)*(x-u)+(T-c)*(T-c);return A<w?(f[0]=S,f[1]=b,Math.sqrt(A)):(f[0]=x,f[1]=T,Math.sqrt(w))}function projectPointToLine(a,r,n,o,s,l,u,c){var f=s-a,d=l-r,v=n-a,g=o-r,y=Math.sqrt(v*v+g*g);v/=y,g/=y;var _=f*v+d*g,S=_/y;c&&(S=Math.min(Math.max(S,0),1)),S*=y;var b=u[0]=a+S*v,x=u[1]=r+S*g;return Math.sqrt((b-s)*(b-s)+(x-l)*(x-l))}function projectPointToRect(a,r,n,o,s,l,u){n<0&&(a=a+n,n=-n),o<0&&(r=r+o,o=-o);var c=a+n,f=r+o,d=u[0]=Math.min(Math.max(s,a),c),v=u[1]=Math.min(Math.max(l,r),f);return Math.sqrt((d-s)*(d-s)+(v-l)*(v-l))}var tmpPt=[];function nearestPointOnRect(a,r,n){var o=projectPointToRect(r.x,r.y,r.width,r.height,a.x,a.y,tmpPt);return n.set(tmpPt[0],tmpPt[1]),o}function nearestPointOnPath(a,r,n){for(var o=0,s=0,l=0,u=0,c,f,d=1/0,v=r.data,g=a.x,y=a.y,_=0;_<v.length;){var S=v[_++];_===1&&(o=v[_],s=v[_+1],l=o,u=s);var b=d;switch(S){case CMD$1.M:l=v[_++],u=v[_++],o=l,s=u;break;case CMD$1.L:b=projectPointToLine(o,s,v[_],v[_+1],g,y,tmpPt,!0),o=v[_++],s=v[_++];break;case CMD$1.C:b=cubicProjectPoint(o,s,v[_++],v[_++],v[_++],v[_++],v[_],v[_+1],g,y,tmpPt),o=v[_++],s=v[_++];break;case CMD$1.Q:b=quadraticProjectPoint(o,s,v[_++],v[_++],v[_],v[_+1],g,y,tmpPt),o=v[_++],s=v[_++];break;case CMD$1.A:var x=v[_++],T=v[_++],A=v[_++],w=v[_++],C=v[_++],E=v[_++];_+=1;var P=!!(1-v[_++]);c=Math.cos(C)*A+x,f=Math.sin(C)*w+T,_<=1&&(l=c,u=f);var I=(g-x)*w/A+x;b=projectPointToArc(x,T,w,C,C+E,P,I,y,tmpPt),o=Math.cos(C+E)*A+x,s=Math.sin(C+E)*w+T;break;case CMD$1.R:l=o=v[_++],u=s=v[_++];var M=v[_++],R=v[_++];b=projectPointToRect(l,u,M,R,g,y,tmpPt);break;case CMD$1.Z:b=projectPointToLine(o,s,l,u,g,y,tmpPt,!0),o=l,s=u;break}b<d&&(d=b,n.set(tmpPt[0],tmpPt[1]))}return d}var pt0=new Point,pt1=new Point,pt2=new Point,dir=new Point,dir2=new Point;function updateLabelLinePoints(a,r){if(a){var n=a.getTextGuideLine(),o=a.getTextContent();if(o&&n){var s=a.textGuideLineConfig||{},l=[[0,0],[0,0],[0,0]],u=s.candidates||DEFAULT_SEARCH_SPACE,c=o.getBoundingRect().clone();c.applyTransform(o.getComputedTransform());var f=1/0,d=s.anchor,v=a.getComputedTransform(),g=v&&invert([],v),y=r.get("length2")||0;d&&pt2.copy(d);for(var _=0;_<u.length;_++){var S=u[_];getCandidateAnchor(S,0,c,pt0,dir),Point.scaleAndAdd(pt1,pt0,dir,y),pt1.transform(g);var b=a.getBoundingRect(),x=d?d.distance(pt1):a instanceof Path?nearestPointOnPath(pt1,a.path,pt2):nearestPointOnRect(pt1,b,pt2);x<f&&(f=x,pt1.transform(v),pt2.transform(v),pt2.toArray(l[0]),pt1.toArray(l[1]),pt0.toArray(l[2]))}limitTurnAngle(l,r.get("minTurnAngle")),n.setShape({points:l})}}}var tmpArr=[],tmpProjPoint=new Point;function limitTurnAngle(a,r){if(r<=180&&r>0){r=r/180*Math.PI,pt0.fromArray(a[0]),pt1.fromArray(a[1]),pt2.fromArray(a[2]),Point.sub(dir,pt0,pt1),Point.sub(dir2,pt2,pt1);var n=dir.len(),o=dir2.len();if(!(n<.001||o<.001)){dir.scale(1/n),dir2.scale(1/o);var s=dir.dot(dir2),l=Math.cos(r);if(l<s){var u=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,u/Math.tan(Math.PI-r));var c=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(c))return;c<0?Point.copy(tmpProjPoint,pt1):c>1&&Point.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(a[1])}}}}function limitSurfaceAngle(a,r,n){if(n<=180&&n>0){n=n/180*Math.PI,pt0.fromArray(a[0]),pt1.fromArray(a[1]),pt2.fromArray(a[2]),Point.sub(dir,pt1,pt0),Point.sub(dir2,pt2,pt1);var o=dir.len(),s=dir2.len();if(!(o<.001||s<.001)){dir.scale(1/o),dir2.scale(1/s);var l=dir.dot(r),u=Math.cos(n);if(l<u){var c=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var f=Math.PI/2,d=Math.acos(dir2.dot(r)),v=f+d-n;if(v>=f)Point.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,c/Math.tan(Math.PI/2-v));var g=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(g))return;g<0?Point.copy(tmpProjPoint,pt1):g>1&&Point.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(a[1])}}}}function setLabelLineState(a,r,n,o){var s=n==="normal",l=s?a:a.ensureState(n);l.ignore=r;var u=o.get("smooth");u&&u===!0&&(u=.3),l.shape=l.shape||{},u>0&&(l.shape.smooth=u);var c=o.getModel("lineStyle").getLineStyle();s?a.useStyle(c):l.style=c}function buildLabelLinePath(a,r){var n=r.smooth,o=r.points;if(o)if(a.moveTo(o[0][0],o[0][1]),n>0&&o.length>=3){var s=dist$1(o[0],o[1]),l=dist$1(o[1],o[2]);if(!s||!l){a.lineTo(o[1][0],o[1][1]),a.lineTo(o[2][0],o[2][1]);return}var u=Math.min(s,l)*n,c=lerp$1([],o[1],o[0],u/s),f=lerp$1([],o[1],o[2],u/l),d=lerp$1([],c,f,.5);a.bezierCurveTo(c[0],c[1],c[0],c[1],d[0],d[1]),a.bezierCurveTo(f[0],f[1],f[0],f[1],o[2][0],o[2][1])}else for(var v=1;v<o.length;v++)a.lineTo(o[v][0],o[v][1])}function setLabelLineStyle(a,r,n){var o=a.getTextGuideLine(),s=a.getTextContent();if(!s){o&&a.removeTextGuideLine();return}for(var l=r.normal,u=l.get("show"),c=s.ignore,f=0;f<DISPLAY_STATES.length;f++){var d=DISPLAY_STATES[f],v=r[d],g=d==="normal";if(v){var y=v.get("show"),_=g?c:retrieve2(s.states[d]&&s.states[d].ignore,c);if(_||!retrieve2(y,u)){var S=g?o:o&&o.states[d];S&&(S.ignore=!0),o&&setLabelLineState(o,!0,d,v);continue}o||(o=new Polyline$1,a.setTextGuideLine(o),!g&&(c||!u)&&setLabelLineState(o,!0,"normal",r.normal),a.stateProxy&&(o.stateProxy=a.stateProxy)),setLabelLineState(o,!1,d,v)}}if(o){defaults(o.style,n),o.style.fill=null;var b=l.get("showAbove"),x=a.textGuideLineConfig=a.textGuideLineConfig||{};x.showAbove=b||!1,o.buildPath=buildLabelLinePath}}function getLabelLineStatesModels(a,r){r=r||"labelLine";for(var n={normal:a.getModel(r)},o=0;o<SPECIAL_STATES.length;o++){var s=SPECIAL_STATES[o];n[s]=a.getModel([s,r])}return n}var LABEL_LAYOUT_BASE_PROPS=["label","labelLine","layoutOption","priority","defaultAttr","marginForce","minMarginForce","marginDefault","suggestIgnore"],LABEL_LAYOUT_DIRTY_BIT_OTHERS=1,LABEL_LAYOUT_DIRTY_BIT_OBB=2,LABEL_LAYOUT_DIRTY_ALL=LABEL_LAYOUT_DIRTY_BIT_OTHERS|LABEL_LAYOUT_DIRTY_BIT_OBB;function setLabelLayoutDirty(a,r,n){n=n||LABEL_LAYOUT_DIRTY_ALL,r?a.dirty|=n:a.dirty&=~n}function isLabelLayoutDirty(a,r){return r=r||LABEL_LAYOUT_DIRTY_ALL,a.dirty==null||!!(a.dirty&r)}function ensureLabelLayoutWithGeometry(a){if(a)return isLabelLayoutDirty(a)&&computeLabelGeometry(a,a.label,a),a}function computeLabelGeometry(a,r,n){var o=r.getComputedTransform();a.transform=ensureCopyTransform(a.transform,o);var s=a.localRect=ensureCopyRect(a.localRect,r.getBoundingRect()),l=r.style,u=l.margin,c=n&&n.marginForce,f=n&&n.minMarginForce,d=n&&n.marginDefault,v=l.__marginType;v==null&&d&&(u=d,v=LabelMarginType.textMargin);for(var g=0;g<4;g++)_tmpLabelMargin[g]=v===LabelMarginType.minMargin&&f&&f[g]!=null?f[g]:c&&c[g]!=null?c[g]:u?u[g]:0;v===LabelMarginType.textMargin&&expandOrShrinkRect(s,_tmpLabelMargin,!1,!1);var y=a.rect=ensureCopyRect(a.rect,s);return o&&y.applyTransform(o),v===LabelMarginType.minMargin&&expandOrShrinkRect(y,_tmpLabelMargin,!1,!1),a.axisAligned=isBoundingRectAxisAligned(o),(a.label=a.label||{}).ignore=r.ignore,setLabelLayoutDirty(a,!1),setLabelLayoutDirty(a,!0,LABEL_LAYOUT_DIRTY_BIT_OBB),a}var _tmpLabelMargin=[0,0,0,0];function computeLabelGeometry2(a,r,n){return a.transform=ensureCopyTransform(a.transform,n),a.localRect=ensureCopyRect(a.localRect,r),a.rect=ensureCopyRect(a.rect,r),n&&a.rect.applyTransform(n),a.axisAligned=isBoundingRectAxisAligned(n),a.obb=void 0,(a.label=a.label||{}).ignore=!1,a}function labelLayoutApplyTranslation(a,r){if(a){a.label.x+=r.x,a.label.y+=r.y,a.label.markRedraw();var n=a.transform;n&&(n[4]+=r.x,n[5]+=r.y);var o=a.rect;o&&(o.x+=r.x,o.y+=r.y);var s=a.obb;s&&s.fromBoundingRect(a.localRect,n)}}function newLabelLayoutWithGeometry(a,r){for(var n=0;n<LABEL_LAYOUT_BASE_PROPS.length;n++){var o=LABEL_LAYOUT_BASE_PROPS[n];a[o]==null&&(a[o]=r[o])}return ensureLabelLayoutWithGeometry(a)}function ensureOBB(a){var r=a.obb;return(!r||isLabelLayoutDirty(a,LABEL_LAYOUT_DIRTY_BIT_OBB))&&(a.obb=r=r||new OrientedBoundingRect,r.fromBoundingRect(a.localRect,a.transform),setLabelLayoutDirty(a,!1,LABEL_LAYOUT_DIRTY_BIT_OBB)),r}function shiftLayoutOnXY(a,r,n,o,s){var l=a.length,u=XY$2[r],c=WH$2[r];if(l<2)return!1;a.sort(function(I,M){return I.rect[u]-M.rect[u]});for(var f=0,d,v=!1,g=0;g<l;g++){var y=a[g],_=y.rect;d=_[u]-f,d<0&&(_[u]-=d,y.label[u]-=d,v=!0),f=_[u]+_[c]}var S=a[0],b=a[l-1],x,T;A(),x<0&&E(-x,.8),T<0&&E(T,.8),A(),w(x,T,1),w(T,x,-1),A(),x<0&&P(-x),T<0&&P(T);function A(){x=S.rect[u]-n,T=o-b.rect[u]-b.rect[c]}function w(I,M,R){if(I<0){var O=Math.min(M,-I);if(O>0){C(O*R,0,l);var $=O+I;$<0&&E(-$*R,1)}else E(-I*R,1)}}function C(I,M,R){I!==0&&(v=!0);for(var O=M;O<R;O++){var $=a[O],B=$.rect;B[u]+=I,$.label[u]+=I}}function E(I,M){for(var R=[],O=0,$=1;$<l;$++){var B=a[$-1].rect,F=Math.max(a[$].rect[u]-B[u]-B[c],0);R.push(F),O+=F}if(O){var z=Math.min(Math.abs(I)/O,M);if(I>0)for(var $=0;$<l-1;$++){var G=R[$]*z;C(G,0,$+1)}else for(var $=l-1;$>0;$--){var G=R[$-1]*z;C(-G,$,l)}}}function P(I){var M=I<0?-1:1;I=Math.abs(I);for(var R=Math.ceil(I/(l-1)),O=0;O<l-1;O++)if(M>0?C(R,0,O+1):C(-R,l-O-1,l),I-=R,I<=0)return}return v}function restoreIgnore(a){for(var r=0;r<a.length;r++){var n=a[r],o=n.defaultAttr,s=n.labelLine;n.label.attr("ignore",o.ignore),s&&s.attr("ignore",o.labelGuideIgnore)}}function hideOverlap(a){var r=[];a.sort(function(d,v){return(v.suggestIgnore?1:0)-(d.suggestIgnore?1:0)||v.priority-d.priority});function n(d){if(!d.ignore){var v=d.ensureState("emphasis");v.ignore==null&&(v.ignore=!1)}d.ignore=!0}for(var o=0;o<a.length;o++){var s=ensureLabelLayoutWithGeometry(a[o]);if(!s.label.ignore){for(var l=s.label,u=s.labelLine,c=!1,f=0;f<r.length;f++)if(labelIntersect(s,r[f],null,{touchThreshold:.05})){c=!0;break}c?(n(l),u&&n(u)):r.push(s)}}}function labelIntersect(a,r,n,o){return!a||!r||a.label&&a.label.ignore||r.label&&r.label.ignore||!a.rect.intersect(r.rect,n,o)?!1:a.axisAligned&&r.axisAligned?!0:ensureOBB(a).intersect(ensureOBB(r),n,o)}function cloneArr(a){if(a){for(var r=[],n=0;n<a.length;n++)r.push(a[n].slice());return r}}function prepareLayoutCallbackParams(a,r){var n=a.label,o=r&&r.getTextGuideLine();return{dataIndex:a.dataIndex,dataType:a.dataType,seriesIndex:a.seriesModel.seriesIndex,text:a.label.style.text,rect:a.hostRect,labelRect:a.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:cloneArr(o&&o.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(a,r,n){for(var o=0;o<n.length;o++){var s=n[o];r[s]!=null&&(a[s]=r[s])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=function(){function a(){this._labelList=[],this._chartViewList=[]}return a.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},a.prototype._addLabel=function(r,n,o,s,l){var u=s.style,c=s.__hostTarget,f=c.textConfig||{},d=s.getComputedTransform(),v=s.getBoundingRect().plain();BoundingRect.applyTransform(v,v,d),d?dummyTransformable.setLocalTransform(d):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1),dummyTransformable.rotation=normalizeRadian(dummyTransformable.rotation);var g=s.__hostTarget,y;if(g){y=g.getBoundingRect().plain();var _=g.getComputedTransform();BoundingRect.applyTransform(y,y,_)}var S=y&&g.getTextGuideLine();this._labelList.push({label:s,labelLine:S,seriesModel:o,dataIndex:r,dataType:n,layoutOptionOrCb:l,layoutOption:null,rect:v,hostRect:y,priority:y?y.width*y.height:0,defaultAttr:{ignore:s.ignore,labelGuideIgnore:S&&S.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:u.x,y:u.y,align:u.align,verticalAlign:u.verticalAlign,width:u.width,height:u.height,fontSize:u.fontSize},cursor:s.cursor,attachedPos:f.position,attachedRot:f.rotation}})},a.prototype.addLabelsOfSeries=function(r){var n=this;this._chartViewList.push(r);var o=r.__model,s=o.get("labelLayout");(isFunction(s)||keys(s).length)&&r.group.traverse(function(l){if(l.ignore)return!0;var u=l.getTextContent(),c=getECData(l);u&&!u.disableLabelLayout&&n._addLabel(c.dataIndex,c.dataType,o,u,s)})},a.prototype.updateLayoutConfig=function(r){var n=r.getWidth(),o=r.getHeight();function s(w,C){return function(){updateLabelLinePoints(w,C)}}for(var l=0;l<this._labelList.length;l++){var u=this._labelList[l],c=u.label,f=c.__hostTarget,d=u.defaultAttr,v=void 0;isFunction(u.layoutOptionOrCb)?v=u.layoutOptionOrCb(prepareLayoutCallbackParams(u,f)):v=u.layoutOptionOrCb,v=v||{},u.layoutOption=v;var g=Math.PI/180;f&&f.setTextConfig({local:!1,position:v.x!=null||v.y!=null?null:d.attachedPos,rotation:v.rotate!=null?v.rotate*g:d.attachedRot,offset:[v.dx||0,v.dy||0]});var y=!1;if(v.x!=null?(c.x=parsePercent(v.x,n),c.setStyle("x",0),y=!0):(c.x=d.x,c.setStyle("x",d.style.x)),v.y!=null?(c.y=parsePercent(v.y,o),c.setStyle("y",0),y=!0):(c.y=d.y,c.setStyle("y",d.style.y)),v.labelLinePoints){var _=f.getTextGuideLine();_&&(_.setShape({points:v.labelLinePoints}),y=!1)}var S=labelLayoutInnerStore(c);S.needsUpdateLabelLine=y,c.rotation=v.rotate!=null?v.rotate*g:d.rotation,c.scaleX=d.scaleX,c.scaleY=d.scaleY;for(var b=0;b<LABEL_OPTION_TO_STYLE_KEYS.length;b++){var x=LABEL_OPTION_TO_STYLE_KEYS[b];c.setStyle(x,v[x]!=null?v[x]:d.style[x])}if(v.draggable){if(c.draggable=!0,c.cursor="move",f){var T=u.seriesModel;if(u.dataIndex!=null){var A=u.seriesModel.getData(u.dataType);T=A.getItemModel(u.dataIndex)}c.on("drag",s(f,T.getModel("labelLine")))}}else c.off("drag"),c.cursor=d.cursor}},a.prototype.layout=function(r){var n=r.getWidth(),o=r.getHeight(),s=[];each$f(this._labelList,function(f){f.defaultAttr.ignore||s.push(newLabelLayoutWithGeometry({},f))});var l=filter(s,function(f){return f.layoutOption.moveOverlap==="shiftX"}),u=filter(s,function(f){return f.layoutOption.moveOverlap==="shiftY"});shiftLayoutOnXY(l,0,0,n),shiftLayoutOnXY(u,1,0,o);var c=filter(s,function(f){return f.layoutOption.hideOverlap});restoreIgnore(c),hideOverlap(c)},a.prototype.processLabelsOverall=function(){var r=this;each$f(this._chartViewList,function(n){var o=n.__model,s=n.ignoreLabelLineUpdate,l=o.isAnimationEnabled();n.group.traverse(function(u){if(u.ignore&&!u.forceLabelAnimation)return!0;var c=!s,f=u.getTextContent();!c&&f&&(c=labelLayoutInnerStore(f).needsUpdateLabelLine),c&&r._updateLabelLine(u,o),l&&r._animateLabels(u,o)})})},a.prototype._updateLabelLine=function(r,n){var o=r.getTextContent(),s=getECData(r),l=s.dataIndex;if(o&&l!=null){var u=n.getData(s.dataType),c=u.getItemModel(l),f={},d=u.getItemVisual(l,"style");if(d){var v=u.getVisual("drawType");f.stroke=d[v]}var g=c.getModel("labelLine");setLabelLineStyle(r,getLabelLineStatesModels(c),f),updateLabelLinePoints(r,g)}},a.prototype._animateLabels=function(r,n){var o=r.getTextContent(),s=r.getTextGuideLine();if(o&&(r.forceLabelAnimation||!o.ignore&&!o.invisible&&!r.disableLabelAnimation&&!isElementRemoved(r))){var l=labelLayoutInnerStore(o),u=l.oldLayout,c=getECData(r),f=c.dataIndex,d={x:o.x,y:o.y,rotation:o.rotation},v=n.getData(c.dataType);if(u){o.attr(u);var y=r.prevStates;y&&(indexOf(y,"select")>=0&&o.attr(l.oldLayoutSelect),indexOf(y,"emphasis")>=0&&o.attr(l.oldLayoutEmphasis)),updateProps$1(o,d,n,f)}else if(o.attr(d),!labelInner(o).valueAnimation){var g=retrieve2(o.style.opacity,1);o.style.opacity=0,initProps(o,{style:{opacity:g}},n,f)}if(l.oldLayout=d,o.states.select){var _=l.oldLayoutSelect={};extendWithKeys(_,d,LABEL_LAYOUT_PROPS),extendWithKeys(_,o.states.select,LABEL_LAYOUT_PROPS)}if(o.states.emphasis){var S=l.oldLayoutEmphasis={};extendWithKeys(S,d,LABEL_LAYOUT_PROPS),extendWithKeys(S,o.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(o,f,v,n,n)}if(s&&!s.ignore&&!s.invisible){var l=labelLineAnimationStore(s),u=l.oldLayout,b={points:s.shape.points};u?(s.attr({shape:u}),updateProps$1(s,{shape:b},n)):(s.setShape(b),s.style.strokePercent=0,initProps(s,{style:{strokePercent:1}},n)),l.oldLayout=b}},a}(),getLabelManager=makeInner();function installLabelLayout(a){a.registerUpdateLifecycle("series:beforeupdate",function(r,n,o){var s=getLabelManager(n).labelManager;s||(s=getLabelManager(n).labelManager=new LabelManager),s.clearLabels()}),a.registerUpdateLifecycle("series:layoutlabels",function(r,n,o){var s=getLabelManager(n).labelManager;o.updatedSeries.forEach(function(l){s.addLabelsOfSeries(n.getViewOfSeriesModel(l))}),s.updateLayoutConfig(n),s.layout(n),s.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$4=Math.PI,PI2$1=Math.PI*2,degree=180/PI$4,SVGPathRebuilder=function(){function a(){}return a.prototype.reset=function(r){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,r||4)},a.prototype.moveTo=function(r,n){this._add("M",r,n)},a.prototype.lineTo=function(r,n){this._add("L",r,n)},a.prototype.bezierCurveTo=function(r,n,o,s,l,u){this._add("C",r,n,o,s,l,u)},a.prototype.quadraticCurveTo=function(r,n,o,s){this._add("Q",r,n,o,s)},a.prototype.arc=function(r,n,o,s,l,u){this.ellipse(r,n,o,o,0,s,l,u)},a.prototype.ellipse=function(r,n,o,s,l,u,c,f){var d=c-u,v=!f,g=Math.abs(d),y=isAroundZero(g-PI2$1)||(v?d>=PI2$1:-d>=PI2$1),_=d>0?d%PI2$1:d%PI2$1+PI2$1,S=!1;y?S=!0:isAroundZero(g)?S=!1:S=_>=PI$4==!!v;var b=r+o*mathCos(u),x=n+s*mathSin(u);this._start&&this._add("M",b,x);var T=Math.round(l*degree);if(y){var A=1/this._p,w=(v?1:-1)*(PI2$1-A);this._add("A",o,s,T,1,+v,r+o*mathCos(u+w),n+s*mathSin(u+w)),A>.01&&this._add("A",o,s,T,0,+v,b,x)}else{var C=r+o*mathCos(c),E=n+s*mathSin(c);this._add("A",o,s,T,+S,+v,C,E)}},a.prototype.rect=function(r,n,o,s){this._add("M",r,n),this._add("l",o,0),this._add("l",0,s),this._add("l",-o,0),this._add("Z")},a.prototype.closePath=function(){this._d.length>0&&this._add("Z")},a.prototype._add=function(r,n,o,s,l,u,c,f,d){for(var v=[],g=this._p,y=1;y<arguments.length;y++){var _=arguments[y];if(isNaN(_)){this._invalid=!0;return}v.push(Math.round(_*g)/g)}this._d.push(r+v.join(" ")),this._start=r==="Z"},a.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},a.prototype.getStr=function(){return this._str},a}(),NONE="none",mathRound=Math.round;function pathHasFill(a){var r=a.fill;return r!=null&&r!==NONE}function pathHasStroke(a){var r=a.stroke;return r!=null&&r!==NONE}var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(a){return"stroke-"+a.toLowerCase()});function mapStyleToAttrs(a,r,n,o){var s=r.opacity==null?1:r.opacity;if(n instanceof ZRImage){a("opacity",s);return}if(pathHasFill(r)){var l=normalizeColor(r.fill);a("fill",l.color);var u=r.fillOpacity!=null?r.fillOpacity*l.opacity*s:l.opacity*s;u<1&&a("fill-opacity",u)}else a("fill",NONE);if(pathHasStroke(r)){var c=normalizeColor(r.stroke);a("stroke",c.color);var f=r.strokeNoScale?n.getLineScale():1,d=f?(r.lineWidth||0)/f:0,v=r.strokeOpacity!=null?r.strokeOpacity*c.opacity*s:c.opacity*s,g=r.strokeFirst;if(d!==1&&a("stroke-width",d),g&&a("paint-order",g?"stroke":"fill"),v<1&&a("stroke-opacity",v),r.lineDash){var y=getLineDash(n),_=y[0],S=y[1];_&&(S=mathRound(S||0),a("stroke-dasharray",_.join(",")),(S||o)&&a("stroke-dashoffset",S))}for(var b=0;b<strokeProps.length;b++){var x=strokeProps[b];if(r[x]!==DEFAULT_PATH_STYLE[x]){var T=r[x]||DEFAULT_PATH_STYLE[x];T&&a(svgStrokeProps[b],T)}}}}var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",META_DATA_PREFIX="ecmeta_";function createElement(a){return document.createElementNS(SVGNS,a)}function createVNode(a,r,n,o,s){return{tag:a,attrs:n||{},children:o,text:s,key:r}}function createElementOpen(a,r){var n=[];if(r)for(var o in r){var s=r[o],l=o;s!==!1&&(s!==!0&&s!=null&&(l+='="'+s+'"'),n.push(l))}return"<"+a+" "+n.join(" ")+">"}function createElementClose(a){return"</"+a+">"}function vNodeToString(a,r){r=r||{};var n=r.newline?`
`:"";function o(s){var l=s.children,u=s.tag,c=s.attrs,f=s.text;return createElementOpen(u,c)+(u!=="style"?encodeHTML(f):f||"")+(l?""+n+map$1(l,function(d){return o(d)}).join(n)+n:"")+createElementClose(u)}return o(a)}function getCssString(a,r,n){n=n||{};var o=n.newline?`
`:"",s=" {"+o,l=o+"}",u=map$1(keys(a),function(f){return f+s+map$1(keys(a[f]),function(d){return d+":"+a[f][d]+";"}).join(o)+l}).join(o),c=map$1(keys(r),function(f){return"@keyframes "+f+s+map$1(keys(r[f]),function(d){return d+s+map$1(keys(r[f][d]),function(v){var g=r[f][d][v];return v==="d"&&(g='path("'+g+'")'),v+":"+g+";"}).join(o)+l}).join(o)+l}).join(o);return!u&&!c?"":["<![CDATA[",u,c,"]]>"].join(o)}function createBrushScope(a){return{zrId:a,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(a,r,n,o){return createVNode("svg","root",{width:a,height:r,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:o?"0 0 "+a+" "+r:!1},n)}var cssClassIdx=0;function getClassId(){return cssClassIdx++}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(a,r,n){var o=extend({},a.shape);extend(o,r),a.buildPath(n,o);var s=new SVGPathRebuilder;return s.reset(getPathPrecision(a)),n.rebuildPath(s,1),s.generateStr(),s.getStr()}function setTransformOrigin(a,r){var n=r.originX,o=r.originY;(n||o)&&(a[transformOriginKey]=n+"px "+o+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(a,r){var n=r.zrId+"-ani-"+r.cssAnimIdx++;return r.cssAnims[n]=a,n}function createCompoundPathCSSAnimation(a,r,n){var o=a.shape.paths,s={},l,u;if(each$f(o,function(f){var d=createBrushScope(n.zrId);d.animation=!0,createCSSAnimation(f,{},d,!0);var v=d.cssAnims,g=d.cssNodes,y=keys(v),_=y.length;if(_){u=y[_-1];var S=v[u];for(var b in S){var x=S[b];s[b]=s[b]||{d:""},s[b].d+=x.d||""}for(var T in g){var A=g[T].animation;A.indexOf(u)>=0&&(l=A)}}}),!!l){r.d=!1;var c=addAnimation(s,n);return l.replace(u,c)}}function getEasingFunc(a){return isString(a)?EASING_MAP[a]?"cubic-bezier("+EASING_MAP[a]+")":createCubicEasingFunc(a)?a:"":""}function createCSSAnimation(a,r,n,o){var s=a.animators,l=s.length,u=[];if(a instanceof CompoundPath){var c=createCompoundPathCSSAnimation(a,r,n);if(c)u.push(c);else if(!l)return}else if(!l)return;for(var f={},d=0;d<l;d++){var v=s[d],g=[v.getMaxTime()/1e3+"s"],y=getEasingFunc(v.getClip().easing),_=v.getDelay();y?g.push(y):g.push("linear"),_&&g.push(_/1e3+"s"),v.getLoop()&&g.push("infinite");var S=g.join(" ");f[S]=f[S]||[S,[]],f[S][1].push(v)}function b(A){var w=A[1],C=w.length,E={},P={},I={},M="animation-timing-function";function R(J,X,ie){for(var te=J.getTracks(),W=J.getMaxTime(),Y=0;Y<te.length;Y++){var j=te[Y];if(j.needsAnimate()){var Q=j.keyframes,re=j.propName;if(ie&&(re=ie(re)),re)for(var ae=0;ae<Q.length;ae++){var le=Q[ae],se=Math.round(le.time/W*100)+"%",ce=getEasingFunc(le.easing),oe=le.rawValue;(isString(oe)||isNumber(oe))&&(X[se]=X[se]||{},X[se][re]=le.rawValue,ce&&(X[se][M]=ce))}}}}for(var O=0;O<C;O++){var $=w[O],B=$.targetName;B?B==="shape"&&R($,P):!o&&R($,E)}for(var F in E){var z={};copyTransform(z,a),extend(z,E[F]);var G=getSRTTransformString(z),D=E[F][M];I[F]=G?{transform:G}:{},setTransformOrigin(I[F],z),D&&(I[F][M]=D)}var V,L=!0;for(var F in P){I[F]=I[F]||{};var N=!V,D=P[F][M];N&&(V=new PathProxy);var U=V.len();V.reset(),I[F].d=buildPathString(a,P[F],V);var H=V.len();if(!N&&U!==H){L=!1;break}D&&(I[F][M]=D)}if(!L)for(var F in I)delete I[F].d;if(!o)for(var O=0;O<C;O++){var $=w[O],B=$.targetName;B==="style"&&R($,I,function(te){return ANIMATE_STYLE_MAP[te]})}for(var q=keys(I),Z=!0,ee,O=1;O<q.length;O++){var ne=q[O-1],ue=q[O];if(I[ne][transformOriginKey]!==I[ue][transformOriginKey]){Z=!1;break}ee=I[ne][transformOriginKey]}if(Z&&ee){for(var F in I)I[F][transformOriginKey]&&delete I[F][transformOriginKey];r[transformOriginKey]=ee}if(filter(q,function(J){return keys(I[J]).length>0}).length){var K=addAnimation(I,n);return K+" "+A[0]+" both"}}for(var x in f){var c=b(f[x]);c&&u.push(c)}if(u.length){var T=n.zrId+"-cls-"+getClassId();n.cssNodes["."+T]={animation:u.join(",")},r.class=T}}function createCSSEmphasis(a,r,n){if(!a.ignore)if(a.isSilent()){var o={"pointer-events":"none"};setClassAttribute(o,r,n)}else{var s=a.states.emphasis&&a.states.emphasis.style?a.states.emphasis.style:{},l=s.fill;if(!l){var u=a.style&&a.style.fill,c=a.states.select&&a.states.select.style&&a.states.select.style.fill,f=a.currentStates.indexOf("select")>=0&&c||u;f&&(l=liftColor(f))}var d=s.lineWidth;if(d){var v=!s.strokeNoScale&&a.transform?a.transform[0]:1;d=d/v}var o={cursor:"pointer"};l&&(o.fill=l),s.stroke&&(o.stroke=s.stroke),d&&(o["stroke-width"]=d),setClassAttribute(o,r,n)}}function setClassAttribute(a,r,n,o){var s=JSON.stringify(a),l=n.cssStyleCache[s];l||(l=n.zrId+"-cls-"+getClassId(),n.cssStyleCache[s]=l,n.cssNodes["."+l+":hover"]=a),r.class=r.class?r.class+" "+l:l}var round$2=Math.round;function isImageLike(a){return a&&isString(a.src)}function isCanvasLike(a){return a&&isFunction(a.toDataURL)}function setStyleAttrs(a,r,n,o){mapStyleToAttrs(function(s,l){var u=s==="fill"||s==="stroke";u&&isGradient(l)?setGradient(r,a,s,o):u&&isPattern(l)?setPattern(n,a,s,o):a[s]=l,u&&o.ssr&&l==="none"&&(a["pointer-events"]="visible")},r,n,!1),setShadow(n,a,o)}function setMetaData(a,r){var n=getElementSSRData(r);n&&(n.each(function(o,s){o!=null&&(a[(META_DATA_PREFIX+s).toLowerCase()]=o+"")}),r.isSilent()&&(a[META_DATA_PREFIX+"silent"]="true"))}function noRotateScale(a){return isAroundZero(a[0]-1)&&isAroundZero(a[1])&&isAroundZero(a[2])&&isAroundZero(a[3]-1)}function noTranslate(a){return isAroundZero(a[4])&&isAroundZero(a[5])}function setTransform(a,r,n){if(r&&!(noTranslate(r)&&noRotateScale(r))){var o=1e4;a.transform=noRotateScale(r)?"translate("+round$2(r[4]*o)/o+" "+round$2(r[5]*o)/o+")":getMatrixStr(r)}}function convertPolyShape(a,r,n){for(var o=a.points,s=[],l=0;l<o.length;l++)s.push(round$2(o[l][0]*n)/n),s.push(round$2(o[l][1]*n)/n);r.points=s.join(" ")}function validatePolyShape(a){return!a.smooth}function createAttrsConvert(a){var r=map$1(a,function(n){return typeof n=="string"?[n,n]:n});return function(n,o,s){for(var l=0;l<r.length;l++){var u=r[l],c=n[u[0]];c!=null&&(o[u[1]]=round$2(c*s)/s)}}}var builtinShapesDef={circle:[createAttrsConvert(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function hasShapeAnimation(a){for(var r=a.animators,n=0;n<r.length;n++)if(r[n].targetName==="shape")return!0;return!1}function brushSVGPath(a,r){var n=a.style,o=a.shape,s=builtinShapesDef[a.type],l={},u=r.animation,c="path",f=a.style.strokePercent,d=r.compress&&getPathPrecision(a)||4;if(s&&!r.willUpdate&&!(s[1]&&!s[1](o))&&!(u&&hasShapeAnimation(a))&&!(f<1)){c=a.type;var v=Math.pow(10,d);s[0](o,l,v)}else{var g=!a.path||a.shapeChanged();a.path||a.createPathProxy();var y=a.path;g&&(y.beginPath(),a.buildPath(y,a.shape),a.pathUpdated());var _=y.getVersion(),S=a,b=S.__svgPathBuilder;(S.__svgPathVersion!==_||!b||f!==S.__svgPathStrokePercent)&&(b||(b=S.__svgPathBuilder=new SVGPathRebuilder),b.reset(d),y.rebuildPath(b,f),b.generateStr(),S.__svgPathVersion=_,S.__svgPathStrokePercent=f),l.d=b.getStr()}return setTransform(l,a.transform),setStyleAttrs(l,n,a,r),setMetaData(l,a),r.animation&&createCSSAnimation(a,l,r),r.emphasis&&createCSSEmphasis(a,l,r),createVNode(c,a.id+"",l)}function brushSVGImage(a,r){var n=a.style,o=n.image;if(o&&!isString(o)&&(isImageLike(o)?o=o.src:isCanvasLike(o)&&(o=o.toDataURL())),!!o){var s=n.x||0,l=n.y||0,u=n.width,c=n.height,f={href:o,width:u,height:c};return s&&(f.x=s),l&&(f.y=l),setTransform(f,a.transform),setStyleAttrs(f,n,a,r),setMetaData(f,a),r.animation&&createCSSAnimation(a,f,r),createVNode("image",a.id+"",f)}}function brushSVGTSpan(a,r){var n=a.style,o=n.text;if(o!=null&&(o+=""),!(!o||isNaN(n.x)||isNaN(n.y))){var s=n.font||DEFAULT_FONT,l=n.x||0,u=adjustTextY$1(n.y||0,getLineHeight(s),n.textBaseline),c=TEXT_ALIGN_TO_ANCHOR[n.textAlign]||n.textAlign,f={"dominant-baseline":"central","text-anchor":c};if(hasSeparateFont(n)){var d="",v=n.fontStyle,g=parseFontSize(n.fontSize);if(!parseFloat(g))return;var y=n.fontFamily||DEFAULT_FONT_FAMILY,_=n.fontWeight;d+="font-size:"+g+";font-family:"+y+";",v&&v!=="normal"&&(d+="font-style:"+v+";"),_&&_!=="normal"&&(d+="font-weight:"+_+";"),f.style=d}else f.style="font: "+s;return o.match(/\s/)&&(f["xml:space"]="preserve"),l&&(f.x=l),u&&(f.y=u),setTransform(f,a.transform),setStyleAttrs(f,n,a,r),setMetaData(f,a),r.animation&&createCSSAnimation(a,f,r),createVNode("text",a.id+"",f,void 0,o)}}function brush(a,r){if(a instanceof Path)return brushSVGPath(a,r);if(a instanceof ZRImage)return brushSVGImage(a,r);if(a instanceof TSpan)return brushSVGTSpan(a,r)}function setShadow(a,r,n){var o=a.style;if(hasShadow(o)){var s=getShadowKey(a),l=n.shadowCache,u=l[s];if(!u){var c=a.getGlobalScale(),f=c[0],d=c[1];if(!f||!d)return;var v=o.shadowOffsetX||0,g=o.shadowOffsetY||0,y=o.shadowBlur,_=normalizeColor(o.shadowColor),S=_.opacity,b=_.color,x=y/2/f,T=y/2/d,A=x+" "+T;u=n.zrId+"-s"+n.shadowIdx++,n.defs[u]=createVNode("filter",u,{id:u,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:v/f,dy:g/d,stdDeviation:A,"flood-color":b,"flood-opacity":S})]),l[s]=u}r.filter=getIdURL(u)}}function setGradient(a,r,n,o){var s=a[n],l,u={gradientUnits:s.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(s))l="linearGradient",u.x1=s.x,u.y1=s.y,u.x2=s.x2,u.y2=s.y2;else if(isRadialGradient(s))l="radialGradient",u.cx=retrieve2(s.x,.5),u.cy=retrieve2(s.y,.5),u.r=retrieve2(s.r,.5);else return;for(var c=s.colorStops,f=[],d=0,v=c.length;d<v;++d){var g=round4(c[d].offset)*100+"%",y=c[d].color,_=normalizeColor(y),S=_.color,b=_.opacity,x={offset:g};x["stop-color"]=S,b<1&&(x["stop-opacity"]=b),f.push(createVNode("stop",d+"",x))}var T=createVNode(l,"",u,f),A=vNodeToString(T),w=o.gradientCache,C=w[A];C||(C=o.zrId+"-g"+o.gradientIdx++,w[A]=C,u.id=C,o.defs[C]=createVNode(l,C,u,f)),r[n]=getIdURL(C)}function setPattern(a,r,n,o){var s=a.style[n],l=a.getBoundingRect(),u={},c=s.repeat,f=c==="no-repeat",d=c==="repeat-x",v=c==="repeat-y",g;if(isImagePattern(s)){var y=s.imageWidth,_=s.imageHeight,S=void 0,b=s.image;if(isString(b)?S=b:isImageLike(b)?S=b.src:isCanvasLike(b)&&(S=b.toDataURL()),typeof Image>"u"){var x="Image width/height must been given explictly in svg-ssr renderer.";assert(y,x),assert(_,x)}else if(y==null||_==null){var T=function(O,$){if(O){var B=O.elm,F=y||$.width,z=_||$.height;O.tag==="pattern"&&(d?(z=1,F/=l.width):v&&(F=1,z/=l.height)),O.attrs.width=F,O.attrs.height=z,B&&(B.setAttribute("width",F),B.setAttribute("height",z))}},A=createOrUpdateImage(S,null,a,function(O){f||T(P,O),T(g,O)});A&&A.width&&A.height&&(y=y||A.width,_=_||A.height)}g=createVNode("image","img",{href:S,width:y,height:_}),u.width=y,u.height=_}else s.svgElement&&(g=clone$4(s.svgElement),u.width=s.svgWidth,u.height=s.svgHeight);if(g){var w,C;f?w=C=1:d?(C=1,w=u.width/l.width):v?(w=1,C=u.height/l.height):u.patternUnits="userSpaceOnUse",w!=null&&!isNaN(w)&&(u.width=w),C!=null&&!isNaN(C)&&(u.height=C);var E=getSRTTransformString(s);E&&(u.patternTransform=E);var P=createVNode("pattern","",u,[g]),I=vNodeToString(P),M=o.patternCache,R=M[I];R||(R=o.zrId+"-p"+o.patternIdx++,M[I]=R,u.id=R,P=o.defs[R]=createVNode("pattern",R,u,[g])),r[n]=getIdURL(R)}}function setClipPath(a,r,n){var o=n.clipPathCache,s=n.defs,l=o[a.id];if(!l){l=n.zrId+"-c"+n.clipPathIdx++;var u={id:l};o[a.id]=l,s[l]=createVNode("clipPath",l,u,[brushSVGPath(a,n)])}r["clip-path"]=getIdURL(l)}function createTextNode(a){return document.createTextNode(a)}function insertBefore(a,r,n){a.insertBefore(r,n)}function removeChild(a,r){a.removeChild(r)}function appendChild(a,r){a.appendChild(r)}function parentNode(a){return a.parentNode}function nextSibling(a){return a.nextSibling}function setTextContent(a,r){a.textContent=r}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(a){return a===void 0}function isDef(a){return a!==void 0}function createKeyToOldIdx(a,r,n){for(var o={},s=r;s<=n;++s){var l=a[s].key;l!==void 0&&(o[l]=s)}return o}function sameVnode(a,r){var n=a.key===r.key,o=a.tag===r.tag;return o&&n}function createElm(a){var r,n=a.children,o=a.tag;if(isDef(o)){var s=a.elm=createElement(o);if(updateAttrs(emptyNode,a),isArray$1(n))for(r=0;r<n.length;++r){var l=n[r];l!=null&&appendChild(s,createElm(l))}else isDef(a.text)&&!isObject$3(a.text)&&appendChild(s,createTextNode(a.text))}else a.elm=createTextNode(a.text);return a.elm}function addVnodes(a,r,n,o,s){for(;o<=s;++o){var l=n[o];l!=null&&insertBefore(a,createElm(l),r)}}function removeVnodes(a,r,n,o){for(;n<=o;++n){var s=r[n];if(s!=null)if(isDef(s.tag)){var l=parentNode(s.elm);removeChild(l,s.elm)}else removeChild(a,s.elm)}}function updateAttrs(a,r){var n,o=r.elm,s=a&&a.attrs||{},l=r.attrs||{};if(s!==l){for(n in l){var u=l[n],c=s[n];c!==u&&(u===!0?o.setAttribute(n,""):u===!1?o.removeAttribute(n):n==="style"?o.style.cssText=u:n.charCodeAt(0)!==xChar?o.setAttribute(n,u):n==="xmlns:xlink"||n==="xmlns"?o.setAttributeNS(XMLNS,n,u):n.charCodeAt(3)===colonChar?o.setAttributeNS(XML_NAMESPACE,n,u):n.charCodeAt(5)===colonChar?o.setAttributeNS(XLINKNS,n,u):o.setAttribute(n,u))}for(n in s)n in l||o.removeAttribute(n)}}function updateChildren(a,r,n){for(var o=0,s=0,l=r.length-1,u=r[0],c=r[l],f=n.length-1,d=n[0],v=n[f],g,y,_,S;o<=l&&s<=f;)u==null?u=r[++o]:c==null?c=r[--l]:d==null?d=n[++s]:v==null?v=n[--f]:sameVnode(u,d)?(patchVnode(u,d),u=r[++o],d=n[++s]):sameVnode(c,v)?(patchVnode(c,v),c=r[--l],v=n[--f]):sameVnode(u,v)?(patchVnode(u,v),insertBefore(a,u.elm,nextSibling(c.elm)),u=r[++o],v=n[--f]):sameVnode(c,d)?(patchVnode(c,d),insertBefore(a,c.elm,u.elm),c=r[--l],d=n[++s]):(isUndef(g)&&(g=createKeyToOldIdx(r,o,l)),y=g[d.key],isUndef(y)?insertBefore(a,createElm(d),u.elm):(_=r[y],_.tag!==d.tag?insertBefore(a,createElm(d),u.elm):(patchVnode(_,d),r[y]=void 0,insertBefore(a,_.elm,u.elm))),d=n[++s]);(o<=l||s<=f)&&(o>l?(S=n[f+1]==null?null:n[f+1].elm,addVnodes(a,S,n,s,f)):removeVnodes(a,r,o,l))}function patchVnode(a,r){var n=r.elm=a.elm,o=a.children,s=r.children;a!==r&&(updateAttrs(a,r),isUndef(r.text)?isDef(o)&&isDef(s)?o!==s&&updateChildren(n,o,s):isDef(s)?(isDef(a.text)&&setTextContent(n,""),addVnodes(n,null,s,0,s.length-1)):isDef(o)?removeVnodes(n,o,0,o.length-1):isDef(a.text)&&setTextContent(n,""):a.text!==r.text&&(isDef(o)&&removeVnodes(n,o,0,o.length-1),setTextContent(n,r.text)))}function patch(a,r){if(sameVnode(a,r))patchVnode(a,r);else{var n=a.elm,o=parentNode(n);createElm(r),o!==null&&(insertBefore(o,r.elm,nextSibling(n)),removeVnodes(o,[a],0,0))}return r}var svgId=0,SVGPainter=function(){function a(r,n,o){if(this.type="svg",this.refreshHover=createMethodNotSupport(),this.configLayer=createMethodNotSupport(),this.storage=n,this._opts=o=extend({},o),this.root=r,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(o.width,o.height),r&&!o.ssr){var s=this._viewport=document.createElement("div");s.style.cssText="position:relative;overflow:hidden";var l=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),s.appendChild(l),r.appendChild(s)}this.resize(o.width,o.height)}return a.prototype.getType=function(){return this.type},a.prototype.getViewportRoot=function(){return this._viewport},a.prototype.getViewportRootOffset=function(){var r=this.getViewportRoot();if(r)return{offsetLeft:r.offsetLeft||0,offsetTop:r.offsetTop||0}},a.prototype.getSvgDom=function(){return this._svgDom},a.prototype.refresh=function(){if(this.root){var r=this.renderToVNode({willUpdate:!0});r.attrs.style="position:absolute;left:0;top:0;user-select:none",patch(this._oldVNode,r),this._oldVNode=r}},a.prototype.renderOneToVNode=function(r){return brush(r,createBrushScope(this._id))},a.prototype.renderToVNode=function(r){r=r||{};var n=this.storage.getDisplayList(!0),o=this._width,s=this._height,l=createBrushScope(this._id);l.animation=r.animation,l.willUpdate=r.willUpdate,l.compress=r.compress,l.emphasis=r.emphasis,l.ssr=this._opts.ssr;var u=[],c=this._bgVNode=createBackgroundVNode(o,s,this._backgroundColor,l);c&&u.push(c);var f=r.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(n,l,f?f.children:u),f&&u.push(f);var d=map$1(keys(l.defs),function(y){return l.defs[y]});if(d.length&&u.push(createVNode("defs","defs",{},d)),r.animation){var v=getCssString(l.cssNodes,l.cssAnims,{newline:!0});if(v){var g=createVNode("style","stl",{},[],v);u.push(g)}}return createSVGVNode(o,s,u,r.useViewBox)},a.prototype.renderToString=function(r){return r=r||{},vNodeToString(this.renderToVNode({animation:retrieve2(r.cssAnimation,!0),emphasis:retrieve2(r.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(r.useViewBox,!0)}),{newline:!0})},a.prototype.setBackgroundColor=function(r){this._backgroundColor=r},a.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},a.prototype._paintList=function(r,n,o){for(var s=r.length,l=[],u=0,c,f,d=0,v=0;v<s;v++){var g=r[v];if(!g.invisible){var y=g.__clipPaths,_=y&&y.length||0,S=f&&f.length||0,b=void 0;for(b=Math.max(_-1,S-1);b>=0&&!(y&&f&&y[b]===f[b]);b--);for(var x=S-1;x>b;x--)u--,c=l[u-1];for(var T=b+1;T<_;T++){var A={};setClipPath(y[T],A,n);var w=createVNode("g","clip-g-"+d++,A,[]);(c?c.children:o).push(w),l[u++]=w,c=w}f=y;var C=brush(g,n);C&&(c?c.children:o).push(C)}}},a.prototype.resize=function(r,n){var o=this._opts,s=this.root,l=this._viewport;if(r!=null&&(o.width=r),n!=null&&(o.height=n),s&&l&&(l.style.display="none",r=getSize$1(s,0,o),n=getSize$1(s,1,o),l.style.display=""),this._width!==r||this._height!==n){if(this._width=r,this._height=n,l){var u=l.style;u.width=r+"px",u.height=n+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var c=this._svgDom;c&&(c.setAttribute("width",r),c.setAttribute("height",n));var f=this._bgVNode&&this._bgVNode.elm;f&&(f.setAttribute("width",r),f.setAttribute("height",n))}}},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},a.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},a.prototype.toDataURL=function(r){var n=this.renderToString(),o="data:image/svg+xml;";return r?(n=encodeBase64(n),n&&o+"base64,"+n):o+"charset=UTF-8,"+encodeURIComponent(n)},a}();function createMethodNotSupport(a){return function(){}}function createBackgroundVNode(a,r,n,o){var s;if(n&&n!=="none")if(s=createVNode("rect","bg",{width:a,height:r,x:"0",y:"0"}),isGradient(n))setGradient({fill:n},s.attrs,"fill",o);else if(isPattern(n))setPattern({style:{fill:n},dirty:noop,getBoundingRect:function(){return{width:a,height:r}}},s.attrs,"fill",o);else{var l=normalizeColor(n),u=l.color,c=l.opacity;s.attrs.fill=u,c<1&&(s.attrs["fill-opacity"]=c)}return s}function install$V(a){a.registerPainter("svg",SVGPainter)}function createDom(a,r,n){var o=platformApi.createCanvas(),s=r.getWidth(),l=r.getHeight(),u=o.style;return u&&(u.position="absolute",u.left="0",u.top="0",u.width=s+"px",u.height=l+"px",o.setAttribute("data-zr-dom-id",a)),o.width=s*n,o.height=l*n,o}var Layer=function(a){__extends(r,a);function r(n,o,s){var l=a.call(this)||this;l.motionBlur=!1,l.lastFrameAlpha=.7,l.dpr=1,l.virtual=!1,l.config={},l.incremental=!1,l.zlevel=0,l.maxRepaintRectCount=5,l.__dirty=!0,l.__firstTimePaint=!0,l.__used=!1,l.__drawIndex=0,l.__startIndex=0,l.__endIndex=0,l.__prevStartIndex=null,l.__prevEndIndex=null;var u;s=s||devicePixelRatio,typeof n=="string"?u=createDom(n,o,s):isObject$3(n)&&(u=n,n=u.id),l.id=n,l.dom=u;var c=u.style;return c&&(disableUserSelect(u),u.onselectstart=function(){return!1},c.padding="0",c.margin="0",c.borderWidth="0"),l.painter=o,l.dpr=s,l}return r.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},r.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},r.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},r.prototype.setUnpainted=function(){this.__firstTimePaint=!0},r.prototype.createBackBuffer=function(){var n=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,n),this.ctxBack=this.domBack.getContext("2d"),n!==1&&this.ctxBack.scale(n,n)},r.prototype.createRepaintRects=function(n,o,s,l){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var u=[],c=this.maxRepaintRectCount,f=!1,d=new BoundingRect(0,0,0,0);function v(A){if(!(!A.isFinite()||A.isZero()))if(u.length===0){var w=new BoundingRect(0,0,0,0);w.copy(A),u.push(w)}else{for(var C=!1,E=1/0,P=0,I=0;I<u.length;++I){var M=u[I];if(M.intersect(A)){var R=new BoundingRect(0,0,0,0);R.copy(M),R.union(A),u[I]=R,C=!0;break}else if(f){d.copy(A),d.union(M);var O=A.width*A.height,$=M.width*M.height,B=d.width*d.height,F=B-O-$;F<E&&(E=F,P=I)}}if(f&&(u[P].union(A),C=!0),!C){var w=new BoundingRect(0,0,0,0);w.copy(A),u.push(w)}f||(f=u.length>=c)}}for(var g=this.__startIndex;g<this.__endIndex;++g){var y=n[g];if(y){var _=y.shouldBePainted(s,l,!0,!0),S=y.__isRendered&&(y.__dirty&REDRAW_BIT||!_)?y.getPrevPaintRect():null;S&&v(S);var b=_&&(y.__dirty&REDRAW_BIT||!y.__isRendered)?y.getPaintRect():null;b&&v(b)}}for(var g=this.__prevStartIndex;g<this.__prevEndIndex;++g){var y=o[g],_=y&&y.shouldBePainted(s,l,!0,!0);if(y&&(!_||!y.__zr)&&y.__isRendered){var S=y.getPrevPaintRect();S&&v(S)}}var x;do{x=!1;for(var g=0;g<u.length;){if(u[g].isZero()){u.splice(g,1);continue}for(var T=g+1;T<u.length;)u[g].intersect(u[T])?(x=!0,u[g].union(u[T]),u.splice(T,1)):T++;g++}}while(x);return this._paintRects=u,u},r.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},r.prototype.resize=function(n,o){var s=this.dpr,l=this.dom,u=l.style,c=this.domBack;u&&(u.width=n+"px",u.height=o+"px"),l.width=n*s,l.height=o*s,c&&(c.width=n*s,c.height=o*s,s!==1&&this.ctxBack.scale(s,s))},r.prototype.clear=function(n,o,s){var l=this.dom,u=this.ctx,c=l.width,f=l.height;o=o||this.clearColor;var d=this.motionBlur&&!n,v=this.lastFrameAlpha,g=this.dpr,y=this;d&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(l,0,0,c/g,f/g));var _=this.domBack;function S(b,x,T,A){if(u.clearRect(b,x,T,A),o&&o!=="transparent"){var w=void 0;if(isGradientObject(o)){var C=o.global||o.__width===T&&o.__height===A;w=C&&o.__canvasGradient||getCanvasGradient(u,o,{x:0,y:0,width:T,height:A}),o.__canvasGradient=w,o.__width=T,o.__height=A}else isImagePatternObject(o)&&(o.scaleX=o.scaleX||g,o.scaleY=o.scaleY||g,w=createCanvasPattern(u,o,{dirty:function(){y.setUnpainted(),y.painter.refresh()}}));u.save(),u.fillStyle=w||o,u.fillRect(b,x,T,A),u.restore()}d&&(u.save(),u.globalAlpha=v,u.drawImage(_,b,x,T,A),u.restore())}!s||d?S(0,0,c,f):s.length&&each$f(s,function(b){S(b.x*g,b.y*g,b.width*g,b.height*g)})},r}(Eventful),HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(a){return a?a.__builtin__?!0:!(typeof a.resize!="function"||typeof a.refresh!="function"):!1}function createRoot(a,r){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+a+"px","height:"+r+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}var CanvasPainter=function(){function a(r,n,o,s){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var l=!r.nodeName||r.nodeName.toUpperCase()==="CANVAS";this._opts=o=extend({},o||{}),this.dpr=o.devicePixelRatio||devicePixelRatio,this._singleCanvas=l,this.root=r;var u=r.style;u&&(disableUserSelect(r),r.innerHTML=""),this.storage=n;var c=this._zlevelList;this._prevDisplayList=[];var f=this._layers;if(l){var v=r,g=v.width,y=v.height;o.width!=null&&(g=o.width),o.height!=null&&(y=o.height),this.dpr=o.devicePixelRatio||1,v.width=g*this.dpr,v.height=y*this.dpr,this._width=g,this._height=y;var _=new Layer(v,this,this.dpr);_.__builtin__=!0,_.initContext(),f[CANVAS_ZLEVEL]=_,_.zlevel=CANVAS_ZLEVEL,c.push(CANVAS_ZLEVEL),this._domRoot=r}else{this._width=getSize$1(r,0,o),this._height=getSize$1(r,1,o);var d=this._domRoot=createRoot(this._width,this._height);r.appendChild(d)}}return a.prototype.getType=function(){return"canvas"},a.prototype.isSingleCanvas=function(){return this._singleCanvas},a.prototype.getViewportRoot=function(){return this._domRoot},a.prototype.getViewportRootOffset=function(){var r=this.getViewportRoot();if(r)return{offsetLeft:r.offsetLeft||0,offsetTop:r.offsetTop||0}},a.prototype.refresh=function(r){var n=this.storage.getDisplayList(!0),o=this._prevDisplayList,s=this._zlevelList;this._redrawId=Math.random(),this._paintList(n,o,r,this._redrawId);for(var l=0;l<s.length;l++){var u=s[l],c=this._layers[u];if(!c.__builtin__&&c.refresh){var f=l===0?this._backgroundColor:null;c.refresh(f)}}return this._opts.useDirtyRect&&(this._prevDisplayList=n.slice()),this},a.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},a.prototype._paintHoverList=function(r){var n=r.length,o=this._hoverlayer;if(o&&o.clear(),!!n){for(var s={inHover:!0,viewWidth:this._width,viewHeight:this._height},l,u=0;u<n;u++){var c=r[u];c.__inHover&&(o||(o=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),l||(l=o.ctx,l.save()),brush$1(l,c,s,u===n-1))}l&&l.restore()}},a.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},a.prototype.paintOne=function(r,n){brushSingle(r,n)},a.prototype._paintList=function(r,n,o,s){if(this._redrawId===s){o=o||!1,this._updateLayerStatus(r);var l=this._doPaintList(r,n,o),u=l.finished,c=l.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),c&&this._paintHoverList(r),u)this.eachLayer(function(d){d.afterBrush&&d.afterBrush()});else{var f=this;requestAnimationFrame$1(function(){f._paintList(r,n,o,s)})}}},a.prototype._compositeManually=function(){var r=this.getLayer(CANVAS_ZLEVEL).ctx,n=this._domRoot.width,o=this._domRoot.height;r.clearRect(0,0,n,o),this.eachBuiltinLayer(function(s){s.virtual&&r.drawImage(s.dom,0,0,n,o)})},a.prototype._doPaintList=function(r,n,o){for(var s=this,l=[],u=this._opts.useDirtyRect,c=0;c<this._zlevelList.length;c++){var f=this._zlevelList[c],d=this._layers[f];d.__builtin__&&d!==this._hoverlayer&&(d.__dirty||o)&&l.push(d)}for(var v=!0,g=!1,y=function(b){var x=l[b],T=x.ctx,A=u&&x.createRepaintRects(r,n,_._width,_._height),w=o?x.__startIndex:x.__drawIndex,C=!o&&x.incremental&&Date.now,E=C&&Date.now(),P=x.zlevel===_._zlevelList[0]?_._backgroundColor:null;if(x.__startIndex===x.__endIndex)x.clear(!1,P,A);else if(w===x.__startIndex){var I=r[w];(!I.incremental||!I.notClear||o)&&x.clear(!1,P,A)}w===-1&&(console.error("For some unknown reason. drawIndex is -1"),w=x.__startIndex);var M,R=function(F){var z={inHover:!1,allClipped:!1,prevEl:null,viewWidth:s._width,viewHeight:s._height};for(M=w;M<x.__endIndex;M++){var G=r[M];if(G.__inHover&&(g=!0),s._doPaintEl(G,x,u,F,z,M===x.__endIndex-1),C){var D=Date.now()-E;if(D>15)break}}z.prevElClipPaths&&T.restore()};if(A)if(A.length===0)M=x.__endIndex;else for(var O=_.dpr,$=0;$<A.length;++$){var B=A[$];T.save(),T.beginPath(),T.rect(B.x*O,B.y*O,B.width*O,B.height*O),T.clip(),R(B),T.restore()}else T.save(),R(),T.restore();x.__drawIndex=M,x.__drawIndex<x.__endIndex&&(v=!1)},_=this,S=0;S<l.length;S++)y(S);return env.wxa&&each$f(this._layers,function(b){b&&b.ctx&&b.ctx.draw&&b.ctx.draw()}),{finished:v,needsRefreshHover:g}},a.prototype._doPaintEl=function(r,n,o,s,l,u){var c=n.ctx;if(o){var f=r.getPaintRect();(!s||f&&f.intersect(s))&&(brush$1(c,r,l,u),r.setPrevPaintRect(f))}else brush$1(c,r,l,u)},a.prototype.getLayer=function(r,n){this._singleCanvas&&!this._needsManuallyCompositing&&(r=CANVAS_ZLEVEL);var o=this._layers[r];return o||(o=new Layer("zr_"+r,this,this.dpr),o.zlevel=r,o.__builtin__=!0,this._layerConfig[r]?merge(o,this._layerConfig[r],!0):this._layerConfig[r-EL_AFTER_INCREMENTAL_INC]&&merge(o,this._layerConfig[r-EL_AFTER_INCREMENTAL_INC],!0),n&&(o.virtual=n),this.insertLayer(r,o),o.initContext()),o},a.prototype.insertLayer=function(r,n){var o=this._layers,s=this._zlevelList,l=s.length,u=this._domRoot,c=null,f=-1;if(!o[r]&&isLayerValid(n)){if(l>0&&r>s[0]){for(f=0;f<l-1&&!(s[f]<r&&s[f+1]>r);f++);c=o[s[f]]}if(s.splice(f+1,0,r),o[r]=n,!n.virtual)if(c){var d=c.dom;d.nextSibling?u.insertBefore(n.dom,d.nextSibling):u.appendChild(n.dom)}else u.firstChild?u.insertBefore(n.dom,u.firstChild):u.appendChild(n.dom);n.painter||(n.painter=this)}},a.prototype.eachLayer=function(r,n){for(var o=this._zlevelList,s=0;s<o.length;s++){var l=o[s];r.call(n,this._layers[l],l)}},a.prototype.eachBuiltinLayer=function(r,n){for(var o=this._zlevelList,s=0;s<o.length;s++){var l=o[s],u=this._layers[l];u.__builtin__&&r.call(n,u,l)}},a.prototype.eachOtherLayer=function(r,n){for(var o=this._zlevelList,s=0;s<o.length;s++){var l=o[s],u=this._layers[l];u.__builtin__||r.call(n,u,l)}},a.prototype.getLayers=function(){return this._layers},a.prototype._updateLayerStatus=function(r){this.eachBuiltinLayer(function(g,y){g.__dirty=g.__used=!1});function n(g){l&&(l.__endIndex!==g&&(l.__dirty=!0),l.__endIndex=g)}if(this._singleCanvas)for(var o=1;o<r.length;o++){var s=r[o];if(s.zlevel!==r[o-1].zlevel||s.incremental){this._needsManuallyCompositing=!0;break}}var l=null,u=0,c,f;for(f=0;f<r.length;f++){var s=r[f],d=s.zlevel,v=void 0;c!==d&&(c=d,u=0),s.incremental?(v=this.getLayer(d+INCREMENTAL_INC,this._needsManuallyCompositing),v.incremental=!0,u=1):v=this.getLayer(d+(u>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),v.__builtin__||logError("ZLevel "+d+" has been used by unkown layer "+v.id),v!==l&&(v.__used=!0,v.__startIndex!==f&&(v.__dirty=!0),v.__startIndex=f,v.incremental?v.__drawIndex=-1:v.__drawIndex=f,n(f),l=v),s.__dirty&REDRAW_BIT&&!s.__inHover&&(v.__dirty=!0,v.incremental&&v.__drawIndex<0&&(v.__drawIndex=f))}n(f),this.eachBuiltinLayer(function(g,y){!g.__used&&g.getElementCount()>0&&(g.__dirty=!0,g.__startIndex=g.__endIndex=g.__drawIndex=0),g.__dirty&&g.__drawIndex<0&&(g.__drawIndex=g.__startIndex)})},a.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},a.prototype._clearLayer=function(r){r.clear()},a.prototype.setBackgroundColor=function(r){this._backgroundColor=r,each$f(this._layers,function(n){n.setUnpainted()})},a.prototype.configLayer=function(r,n){if(n){var o=this._layerConfig;o[r]?merge(o[r],n,!0):o[r]=n;for(var s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s];if(l===r||l===r+EL_AFTER_INCREMENTAL_INC){var u=this._layers[l];merge(u,o[r],!0)}}}},a.prototype.delLayer=function(r){var n=this._layers,o=this._zlevelList,s=n[r];s&&(s.dom.parentNode.removeChild(s.dom),delete n[r],o.splice(indexOf(o,r),1))},a.prototype.resize=function(r,n){if(this._domRoot.style){var o=this._domRoot;o.style.display="none";var s=this._opts,l=this.root;if(r!=null&&(s.width=r),n!=null&&(s.height=n),r=getSize$1(l,0,s),n=getSize$1(l,1,s),o.style.display="",this._width!==r||n!==this._height){o.style.width=r+"px",o.style.height=n+"px";for(var u in this._layers)this._layers.hasOwnProperty(u)&&this._layers[u].resize(r,n);this.refresh(!0)}this._width=r,this._height=n}else{if(r==null||n==null)return;this._width=r,this._height=n,this.getLayer(CANVAS_ZLEVEL).resize(r,n)}return this},a.prototype.clearLayer=function(r){var n=this._layers[r];n&&n.clear()},a.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},a.prototype.getRenderedCanvas=function(r){if(r=r||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var n=new Layer("image",this,r.pixelRatio||this.dpr);n.initContext(),n.clear(!1,r.backgroundColor||this._backgroundColor);var o=n.ctx;if(r.pixelRatio<=this.dpr){this.refresh();var s=n.dom.width,l=n.dom.height;this.eachLayer(function(g){g.__builtin__?o.drawImage(g.dom,0,0,s,l):g.renderToCanvas&&(o.save(),g.renderToCanvas(o),o.restore())})}else for(var u={inHover:!1,viewWidth:this._width,viewHeight:this._height},c=this.storage.getDisplayList(!0),f=0,d=c.length;f<d;f++){var v=c[f];brush$1(o,v,u,f===d-1)}return n.dom},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a}();function install$U(a){a.registerPainter("canvas",CanvasPainter)}var LineSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.hasSymbolVisual=!0,n}return r.prototype.getInitialData=function(n){return createSeriesData(null,this,{useEncodeDefaulter:!0})},r.prototype.getLegendIcon=function(n){var o=new Group$3,s=createSymbol$1("line",0,n.itemHeight/2,n.itemWidth,0,n.lineStyle.stroke,!1);o.add(s),s.setStyle(n.lineStyle);var l=this.getData().getVisual("symbol"),u=this.getData().getVisual("symbolRotate"),c=l==="none"?"circle":l,f=n.itemHeight*.8,d=createSymbol$1(c,(n.itemWidth-f)/2,(n.itemHeight-f)/2,f,f,n.itemStyle.fill);o.add(d),d.setStyle(n.itemStyle);var v=n.iconRotate==="inherit"?u:n.iconRotate||0;return d.rotation=v*Math.PI/180,d.setOrigin([n.itemWidth/2,n.itemHeight/2]),c.indexOf("empty")>-1&&(d.style.stroke=d.style.fill,d.style.fill=tokens.color.neutral00,d.style.lineWidth=2),o},r.type="series.line",r.dependencies=["grid","polar"],r.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:6,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},r}(SeriesModel);function getDefaultLabel(a,r){var n=a.mapDimensionsAll("defaultedLabel"),o=n.length;if(o===1){var s=retrieveRawValue(a,r,n[0]);return s!=null?s+"":null}else if(o){for(var l=[],u=0;u<n.length;u++)l.push(retrieveRawValue(a,r,n[u]));return l.join(" ")}}function getDefaultInterpolatedLabel(a,r){var n=a.mapDimensionsAll("defaultedLabel");if(!isArray$1(r))return r+"";for(var o=[],s=0;s<n.length;s++){var l=a.getDimensionIndex(n[s]);l>=0&&o.push(r[l])}return o.join(" ")}var Symbol$1=function(a){__extends(r,a);function r(n,o,s,l){var u=a.call(this)||this;return u.updateData(n,o,s,l),u}return r.prototype._createSymbol=function(n,o,s,l,u,c){this.removeAll();var f=createSymbol$1(n,-1,-1,2,2,null,c);f.attr({z2:retrieve2(u,100),culling:!0,scaleX:l[0]/2,scaleY:l[1]/2}),f.drift=driftSymbol,this._symbolType=n,this.add(f)},r.prototype.stopSymbolAnimation=function(n){this.childAt(0).stopAnimation(null,n)},r.prototype.getSymbolType=function(){return this._symbolType},r.prototype.getSymbolPath=function(){return this.childAt(0)},r.prototype.highlight=function(){enterEmphasis(this.childAt(0))},r.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},r.prototype.setZ=function(n,o){var s=this.childAt(0);s.zlevel=n,s.z=o},r.prototype.setDraggable=function(n,o){var s=this.childAt(0);s.draggable=n,s.cursor=!o&&n?"move":s.cursor},r.prototype.updateData=function(n,o,s,l){this.silent=!1;var u=n.getItemVisual(o,"symbol")||"circle",c=n.hostModel,f=r.getSymbolSize(n,o),d=r.getSymbolZ2(n,o),v=u!==this._symbolType,g=l&&l.disableAnimation;if(v){var y=n.getItemVisual(o,"symbolKeepAspect");this._createSymbol(u,n,o,f,d,y)}else{var _=this.childAt(0);_.silent=!1;var S={scaleX:f[0]/2,scaleY:f[1]/2};g?_.attr(S):updateProps$1(_,S,c,o),saveOldStyle(_)}if(this._updateCommon(n,o,f,s,l),v){var _=this.childAt(0);if(!g){var S={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:_.style.opacity}};_.scaleX=_.scaleY=0,_.style.opacity=0,initProps(_,S,c,o)}}g&&this.childAt(0).stopAnimation("leave")},r.prototype._updateCommon=function(n,o,s,l,u){var c=this.childAt(0),f=n.hostModel,d,v,g,y,_,S,b,x,T;if(l&&(d=l.emphasisItemStyle,v=l.blurItemStyle,g=l.selectItemStyle,y=l.focus,_=l.blurScope,b=l.labelStatesModels,x=l.hoverScale,T=l.cursorStyle,S=l.emphasisDisabled),!l||n.hasItemOption){var A=l&&l.itemModel?l.itemModel:n.getItemModel(o),w=A.getModel("emphasis");d=w.getModel("itemStyle").getItemStyle(),g=A.getModel(["select","itemStyle"]).getItemStyle(),v=A.getModel(["blur","itemStyle"]).getItemStyle(),y=w.get("focus"),_=w.get("blurScope"),S=w.get("disabled"),b=getLabelStatesModels(A),x=w.getShallow("scale"),T=A.getShallow("cursor")}var C=n.getItemVisual(o,"symbolRotate");c.attr("rotation",(C||0)*Math.PI/180||0);var E=normalizeSymbolOffset(n.getItemVisual(o,"symbolOffset"),s);E&&(c.x=E[0],c.y=E[1]),T&&c.attr("cursor",T);var P=n.getItemVisual(o,"style"),I=P.fill;if(c instanceof ZRImage){var M=c.style;c.useStyle(extend({image:M.image,x:M.x,y:M.y,width:M.width,height:M.height},P))}else c.__isEmptyBrush?c.useStyle(extend({},P)):c.useStyle(P),c.style.decal=null,c.setColor(I,u&&u.symbolInnerColor),c.style.strokeNoScale=!0;var R=n.getItemVisual(o,"liftZ"),O=this._z2;R!=null?O==null&&(this._z2=c.z2,c.z2+=R):O!=null&&(c.z2=O,this._z2=null);var $=u&&u.useNameLabel;setLabelStyle(c,b,{labelFetcher:f,labelDataIndex:o,defaultText:B,inheritColor:I,defaultOpacity:P.opacity});function B(G){return $?n.getName(G):getDefaultLabel(n,G)}this._sizeX=s[0]/2,this._sizeY=s[1]/2;var F=c.ensureState("emphasis");F.style=d,c.ensureState("select").style=g,c.ensureState("blur").style=v;var z=x==null||x===!0?Math.max(1.1,3/this._sizeY):isFinite(x)&&x>0?+x:1;F.scaleX=this._sizeX*z,F.scaleY=this._sizeY*z,this.setSymbolScale(1),toggleHoverEmphasis(this,y,_,S)},r.prototype.setSymbolScale=function(n){this.scaleX=this.scaleY=n},r.prototype.fadeOut=function(n,o,s){var l=this.childAt(0),u=getECData(this).dataIndex,c=s&&s.animation;if(this.silent=l.silent=!0,s&&s.fadeLabel){var f=l.getTextContent();f&&removeElement(f,{style:{opacity:0}},o,{dataIndex:u,removeOpt:c,cb:function(){l.removeTextContent()}})}else l.removeTextContent();removeElement(l,{style:{opacity:0},scaleX:0,scaleY:0},o,{dataIndex:u,cb:n,removeOpt:c})},r.getSymbolSize=function(n,o){return normalizeSymbolSize(n.getItemVisual(o,"symbolSize"))},r.getSymbolZ2=function(n,o){return n.getItemVisual(o,"z2")},r}(Group$3);function driftSymbol(a,r){this.parent.drift(a,r)}function symbolNeedsDraw$1(a,r,n,o){return r&&!isNaN(r[0])&&!isNaN(r[1])&&!(o.isIgnore&&o.isIgnore(n))&&!(o.clipShape&&!o.clipShape.contain(r[0],r[1]))&&a.getItemVisual(n,"symbol")!=="none"}function normalizeUpdateOpt(a){return a!=null&&!isObject$3(a)&&(a={isIgnore:a}),a||{}}function makeSeriesScope$2(a){var r=a.hostModel,n=r.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:r.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:r.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),emphasisDisabled:n.get("disabled"),hoverScale:n.get("scale"),labelStatesModels:getLabelStatesModels(r),cursorStyle:r.get("cursor")}}var SymbolDraw=function(){function a(r){this.group=new Group$3,this._SymbolCtor=r||Symbol$1}return a.prototype.updateData=function(r,n){this._progressiveEls=null,n=normalizeUpdateOpt(n);var o=this.group,s=r.hostModel,l=this._data,u=this._SymbolCtor,c=n.disableAnimation,f=makeSeriesScope$2(r),d={disableAnimation:c},v=n.getSymbolPoint||function(g){return r.getItemLayout(g)};l||o.removeAll(),r.diff(l).add(function(g){var y=v(g);if(symbolNeedsDraw$1(r,y,g,n)){var _=new u(r,g,f,d);_.setPosition(y),r.setItemGraphicEl(g,_),o.add(_)}}).update(function(g,y){var _=l.getItemGraphicEl(y),S=v(g);if(!symbolNeedsDraw$1(r,S,g,n)){o.remove(_);return}var b=r.getItemVisual(g,"symbol")||"circle",x=_&&_.getSymbolType&&_.getSymbolType();if(!_||x&&x!==b)o.remove(_),_=new u(r,g,f,d),_.setPosition(S);else{_.updateData(r,g,f,d);var T={x:S[0],y:S[1]};c?_.attr(T):updateProps$1(_,T,s)}o.add(_),r.setItemGraphicEl(g,_)}).remove(function(g){var y=l.getItemGraphicEl(g);y&&y.fadeOut(function(){o.remove(y)},s)}).execute(),this._getSymbolPoint=v,this._data=r},a.prototype.updateLayout=function(){var r=this,n=this._data;n&&n.eachItemGraphicEl(function(o,s){var l=r._getSymbolPoint(s);o.setPosition(l),o.markRedraw()})},a.prototype.incrementalPrepareUpdate=function(r){this._seriesScope=makeSeriesScope$2(r),this._data=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(r,n,o){this._progressiveEls=[],o=normalizeUpdateOpt(o);function s(f){f.isGroup||(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var l=r.start;l<r.end;l++){var u=n.getItemLayout(l);if(symbolNeedsDraw$1(n,u,l,o)){var c=new this._SymbolCtor(n,l,this._seriesScope);c.traverse(s),c.setPosition(u),this.group.add(c),n.setItemGraphicEl(l,c),this._progressiveEls.push(c)}}},a.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},a.prototype.remove=function(r){var n=this.group,o=this._data;o&&r?o.eachItemGraphicEl(function(s){s.fadeOut(function(){n.remove(s)},o.hostModel)}):n.removeAll()},a}();function prepareDataCoordInfo(a,r,n){var o=a.getBaseAxis(),s=a.getOtherAxis(o),l=getValueStart(s,n),u=o.dim,c=s.dim,f=r.mapDimension(c),d=r.mapDimension(u),v=c==="x"||c==="radius"?1:0,g=map$1(a.dimensions,function(S){return r.mapDimension(S)}),y=!1,_=r.getCalculationInfo("stackResultDimension");return isDimensionStacked(r,g[0])&&(y=!0,g[0]=_),isDimensionStacked(r,g[1])&&(y=!0,g[1]=_),{dataDimsForPoint:g,valueStart:l,valueAxisDim:c,baseAxisDim:u,stacked:!!y,valueDim:f,baseDim:d,baseDataOffset:v,stackedOverDimension:r.getCalculationInfo("stackedOverDimension")}}function getValueStart(a,r){var n=0,o=a.scale.getExtent();return r==="start"?n=o[0]:r==="end"?n=o[1]:isNumber(r)&&!isNaN(r)?n=r:o[0]>0?n=o[0]:o[1]<0&&(n=o[1]),n}function getStackedOnPoint(a,r,n,o){var s=NaN;a.stacked&&(s=n.get(n.getCalculationInfo("stackedOverDimension"),o)),isNaN(s)&&(s=a.valueStart);var l=a.baseDataOffset,u=[];return u[l]=n.get(a.baseDim,o),u[1-l]=s,r.dataToPoint(u)}function diffData(a,r){var n=[];return r.diff(a).add(function(o){n.push({cmd:"+",idx:o})}).update(function(o,s){n.push({cmd:"=",idx:s,idx1:o})}).remove(function(o){n.push({cmd:"-",idx:o})}).execute(),n}function lineAnimationDiff(a,r,n,o,s,l,u,c){for(var f=diffData(a,r),d=[],v=[],g=[],y=[],_=[],S=[],b=[],x=prepareDataCoordInfo(s,r,u),T=a.getLayout("points")||[],A=r.getLayout("points")||[],w=0;w<f.length;w++){var C=f[w],E=!0,P=void 0,I=void 0;switch(C.cmd){case"=":P=C.idx*2,I=C.idx1*2;var M=T[P],R=T[P+1],O=A[I],$=A[I+1];(isNaN(M)||isNaN(R))&&(M=O,R=$),d.push(M,R),v.push(O,$),g.push(n[P],n[P+1]),y.push(o[I],o[I+1]),b.push(r.getRawIndex(C.idx1));break;case"+":var B=C.idx,F=x.dataDimsForPoint,z=s.dataToPoint([r.get(F[0],B),r.get(F[1],B)]);I=B*2,d.push(z[0],z[1]),v.push(A[I],A[I+1]);var G=getStackedOnPoint(x,s,r,B);g.push(G[0],G[1]),y.push(o[I],o[I+1]),b.push(r.getRawIndex(B));break;case"-":E=!1}E&&(_.push(C),S.push(S.length))}S.sort(function(ne,ue){return b[ne]-b[ue]});for(var D=d.length,V=createFloat32Array(D),L=createFloat32Array(D),N=createFloat32Array(D),U=createFloat32Array(D),H=[],w=0;w<S.length;w++){var q=S[w],Z=w*2,ee=q*2;V[Z]=d[ee],V[Z+1]=d[ee+1],L[Z]=v[ee],L[Z+1]=v[ee+1],N[Z]=g[ee],N[Z+1]=g[ee+1],U[Z]=y[ee],U[Z+1]=y[ee+1],H[w]=_[q]}return{current:V,next:L,stackedOnCurrent:N,stackedOnNext:U,status:H}}var mathMin$5=Math.min,mathMax$5=Math.max;function isPointNull$1(a,r){return isNaN(a)||isNaN(r)}function drawSegment(a,r,n,o,s,l,u,c,f){for(var d,v,g,y,_,S,b=n,x=0;x<o;x++){var T=r[b*2],A=r[b*2+1];if(b>=s||b<0)break;if(isPointNull$1(T,A)){if(f){b+=l;continue}break}if(b===n)a[l>0?"moveTo":"lineTo"](T,A),g=T,y=A;else{var w=T-d,C=A-v;if(w*w+C*C<.5){b+=l;continue}if(u>0){for(var E=b+l,P=r[E*2],I=r[E*2+1];P===T&&I===A&&x<o;)x++,E+=l,b+=l,P=r[E*2],I=r[E*2+1],T=r[b*2],A=r[b*2+1],w=T-d,C=A-v;var M=x+1;if(f)for(;isPointNull$1(P,I)&&M<o;)M++,E+=l,P=r[E*2],I=r[E*2+1];var R=.5,O=0,$=0,B=void 0,F=void 0;if(M>=o||isPointNull$1(P,I))_=T,S=A;else{O=P-d,$=I-v;var z=T-d,G=P-T,D=A-v,V=I-A,L=void 0,N=void 0;if(c==="x"){L=Math.abs(z),N=Math.abs(G);var U=O>0?1:-1;_=T-U*L*u,S=A,B=T+U*N*u,F=A}else if(c==="y"){L=Math.abs(D),N=Math.abs(V);var H=$>0?1:-1;_=T,S=A-H*L*u,B=T,F=A+H*N*u}else L=Math.sqrt(z*z+D*D),N=Math.sqrt(G*G+V*V),R=N/(N+L),_=T-O*u*(1-R),S=A-$*u*(1-R),B=T+O*u*R,F=A+$*u*R,B=mathMin$5(B,mathMax$5(P,T)),F=mathMin$5(F,mathMax$5(I,A)),B=mathMax$5(B,mathMin$5(P,T)),F=mathMax$5(F,mathMin$5(I,A)),O=B-T,$=F-A,_=T-O*L/N,S=A-$*L/N,_=mathMin$5(_,mathMax$5(d,T)),S=mathMin$5(S,mathMax$5(v,A)),_=mathMax$5(_,mathMin$5(d,T)),S=mathMax$5(S,mathMin$5(v,A)),O=T-_,$=A-S,B=T+O*N/L,F=A+$*N/L}a.bezierCurveTo(g,y,_,S,T,A),g=B,y=F}else a.lineTo(T,A)}d=T,v=A,b+=l}return x}var ECPolylineShape=function(){function a(){this.smooth=0,this.smoothConstraint=!0}return a}(),ECPolyline=function(a){__extends(r,a);function r(n){var o=a.call(this,n)||this;return o.type="ec-polyline",o}return r.prototype.getDefaultStyle=function(){return{stroke:tokens.color.neutral99,fill:null}},r.prototype.getDefaultShape=function(){return new ECPolylineShape},r.prototype.buildPath=function(n,o){var s=o.points,l=0,u=s.length/2;if(o.connectNulls){for(;u>0&&isPointNull$1(s[u*2-2],s[u*2-1]);u--);for(;l<u&&isPointNull$1(s[l*2],s[l*2+1]);l++);}for(;l<u;)l+=drawSegment(n,s,l,u,u,1,o.smooth,o.smoothMonotone,o.connectNulls)+1},r.prototype.getPointOn=function(n,o){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var s=this.path,l=s.data,u=PathProxy.CMD,c,f,d=o==="x",v=[],g=0;g<l.length;){var y=l[g++],_=void 0,S=void 0,b=void 0,x=void 0,T=void 0,A=void 0,w=void 0;switch(y){case u.M:c=l[g++],f=l[g++];break;case u.L:if(_=l[g++],S=l[g++],w=d?(n-c)/(_-c):(n-f)/(S-f),w<=1&&w>=0){var C=d?(S-f)*w+f:(_-c)*w+c;return d?[n,C]:[C,n]}c=_,f=S;break;case u.C:_=l[g++],S=l[g++],b=l[g++],x=l[g++],T=l[g++],A=l[g++];var E=d?cubicRootAt(c,_,b,T,n,v):cubicRootAt(f,S,x,A,n,v);if(E>0)for(var P=0;P<E;P++){var I=v[P];if(I<=1&&I>=0){var C=d?cubicAt(f,S,x,A,I):cubicAt(c,_,b,T,I);return d?[n,C]:[C,n]}}c=T,f=A;break}}},r}(Path),ECPolygonShape=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r}(ECPolylineShape),ECPolygon=function(a){__extends(r,a);function r(n){var o=a.call(this,n)||this;return o.type="ec-polygon",o}return r.prototype.getDefaultShape=function(){return new ECPolygonShape},r.prototype.buildPath=function(n,o){var s=o.points,l=o.stackedOnPoints,u=0,c=s.length/2,f=o.smoothMonotone;if(o.connectNulls){for(;c>0&&isPointNull$1(s[c*2-2],s[c*2-1]);c--);for(;u<c&&isPointNull$1(s[u*2],s[u*2+1]);u++);}for(;u<c;){var d=drawSegment(n,s,u,c,c,1,o.smooth,f,o.connectNulls);drawSegment(n,l,u+d-1,d,c,-1,o.stackedOnSmooth,f,o.connectNulls),u+=d+1,n.closePath()}},r}(Path);function createGridClipPath(a,r,n,o,s){var l=a.getArea(),u=l.x,c=l.y,f=l.width,d=l.height,v=n.get(["lineStyle","width"])||0;u-=v/2,c-=v/2,f+=v,d+=v,f=Math.ceil(f),u!==Math.floor(u)&&(u=Math.floor(u),f++);var g=new Rect$2({shape:{x:u,y:c,width:f,height:d}});if(r){var y=a.getBaseAxis(),_=y.isHorizontal(),S=y.inverse;_?(S&&(g.shape.x+=f),g.shape.width=0):(S||(g.shape.y+=d),g.shape.height=0);var b=isFunction(s)?function(x){s(x,g)}:null;initProps(g,{shape:{width:f,height:d,x:u,y:c}},n,null,o,b)}return g}function createPolarClipPath(a,r,n){var o=a.getArea(),s=round$4(o.r0,1),l=round$4(o.r,1),u=new Sector({shape:{cx:round$4(a.cx,1),cy:round$4(a.cy,1),r0:s,r:l,startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}});if(r){var c=a.getBaseAxis().dim==="angle";c?u.shape.endAngle=o.startAngle:u.shape.r=s,initProps(u,{shape:{endAngle:o.endAngle,r:l}},n)}return u}function createClipPath(a,r,n,o,s){if(a){if(a.type==="polar")return createPolarClipPath(a,r,n);if(a.type==="cartesian2d")return createGridClipPath(a,r,n,o,s)}else return null;return null}function isCoordinateSystemType(a,r){return a.type===r}function isPointsSame(a,r){if(a.length===r.length){for(var n=0;n<a.length;n++)if(a[n]!==r[n])return;return!0}}function bboxFromPoints(a){for(var r=1/0,n=1/0,o=-1/0,s=-1/0,l=0;l<a.length;){var u=a[l++],c=a[l++];isNaN(u)||(r=Math.min(u,r),o=Math.max(u,o)),isNaN(c)||(n=Math.min(c,n),s=Math.max(c,s))}return[[r,n],[o,s]]}function getBoundingDiff(a,r){var n=bboxFromPoints(a),o=n[0],s=n[1],l=bboxFromPoints(r),u=l[0],c=l[1];return Math.max(Math.abs(o[0]-u[0]),Math.abs(o[1]-u[1]),Math.abs(s[0]-c[0]),Math.abs(s[1]-c[1]))}function getSmooth(a){return isNumber(a)?a:a?.5:0}function getStackedOnPoints(a,r,n){if(!n.valueDim)return[];for(var o=r.count(),s=createFloat32Array(o*2),l=0;l<o;l++){var u=getStackedOnPoint(n,a,r,l);s[l*2]=u[0],s[l*2+1]=u[1]}return s}function turnPointsIntoStep(a,r,n,o,s){var l=n.getBaseAxis(),u=l.dim==="x"||l.dim==="radius"?0:1,c=[],f=0,d=[],v=[],g=[],y=[];if(s){for(f=0;f<a.length;f+=2){var _=r||a;!isNaN(_[f])&&!isNaN(_[f+1])&&y.push(a[f],a[f+1])}a=y}for(f=0;f<a.length-2;f+=2)switch(g[0]=a[f+2],g[1]=a[f+3],v[0]=a[f],v[1]=a[f+1],c.push(v[0],v[1]),o){case"end":d[u]=g[u],d[1-u]=v[1-u],c.push(d[0],d[1]);break;case"middle":var S=(v[u]+g[u])/2,b=[];d[u]=b[u]=S,d[1-u]=v[1-u],b[1-u]=g[1-u],c.push(d[0],d[1]),c.push(b[0],b[1]);break;default:d[u]=v[u],d[1-u]=g[1-u],c.push(d[0],d[1])}return c.push(a[f++],a[f++]),c}function clipColorStops(a,r){var n=[],o=a.length,s,l;function u(v,g,y){var _=v.coord,S=(y-_)/(g.coord-_),b=lerp(S,[v.color,g.color]);return{coord:y,color:b}}for(var c=0;c<o;c++){var f=a[c],d=f.coord;if(d<0)s=f;else if(d>r){l?n.push(u(l,f,r)):s&&n.push(u(s,f,0),u(s,f,r));break}else s&&(n.push(u(s,f,0)),s=null),n.push(f),l=f}return n}function getVisualGradient(a,r,n){var o=a.getVisual("visualMeta");if(!(!o||!o.length||!a.count())&&r.type==="cartesian2d"){for(var s,l,u=o.length-1;u>=0;u--){var c=a.getDimensionInfo(o[u].dimension);if(s=c&&c.coordDim,s==="x"||s==="y"){l=o[u];break}}if(l){var f=r.getAxis(s),d=map$1(l.stops,function(w){return{coord:f.toGlobalCoord(f.dataToCoord(w.value)),color:w.color}}),v=d.length,g=l.outerColors.slice();v&&d[0].coord>d[v-1].coord&&(d.reverse(),g.reverse());var y=clipColorStops(d,s==="x"?n.getWidth():n.getHeight()),_=y.length;if(!_&&v)return d[0].coord<0?g[1]?g[1]:d[v-1].color:g[0]?g[0]:d[0].color;var S=10,b=y[0].coord-S,x=y[_-1].coord+S,T=x-b;if(T<.001)return"transparent";each$f(y,function(w){w.offset=(w.coord-b)/T}),y.push({offset:_?y[_-1].offset:.5,color:g[1]||"transparent"}),y.unshift({offset:_?y[0].offset:.5,color:g[0]||"transparent"});var A=new LinearGradient(0,0,0,0,y,!0);return A[s]=b,A[s+"2"]=x,A}}}function getIsIgnoreFunc(a,r,n){var o=a.get("showAllSymbol"),s=o==="auto";if(!(o&&!s)){var l=n.getAxesByScale("ordinal")[0];if(l&&!(s&&canShowAllSymbolForCategory(l,r))){var u=r.mapDimension(l.dim),c={};return each$f(l.getViewLabels(),function(f){var d=l.scale.getRawOrdinalNumber(f.tickValue);c[d]=1}),function(f){return!c.hasOwnProperty(r.get(u,f))}}}}function canShowAllSymbolForCategory(a,r){var n=a.getExtent(),o=Math.abs(n[1]-n[0])/a.scale.count();isNaN(o)&&(o=0);for(var s=r.count(),l=Math.max(1,Math.round(s/5)),u=0;u<s;u+=l)if(Symbol$1.getSymbolSize(r,u)[a.isHorizontal()?1:0]*1.5>o)return!1;return!0}function isPointNull(a,r){return isNaN(a)||isNaN(r)}function getLastIndexNotNull(a){for(var r=a.length/2;r>0&&isPointNull(a[r*2-2],a[r*2-1]);r--);return r-1}function getPointAtIndex(a,r){return[a[r*2],a[r*2+1]]}function getIndexRange(a,r,n){for(var o=a.length/2,s=n==="x"?0:1,l,u,c=0,f=-1,d=0;d<o;d++)if(u=a[d*2+s],!(isNaN(u)||isNaN(a[d*2+1-s]))){if(d===0){l=u;continue}if(l<=r&&u>=r||l>=r&&u<=r){f=d;break}c=d,l=u}return{range:[c,f],t:(r-l)/(u-l)}}function anyStateShowEndLabel(a){if(a.get(["endLabel","show"]))return!0;for(var r=0;r<SPECIAL_STATES.length;r++)if(a.get([SPECIAL_STATES[r],"endLabel","show"]))return!0;return!1}function createLineClipPath(a,r,n,o){if(isCoordinateSystemType(r,"cartesian2d")){var s=o.getModel("endLabel"),l=s.get("valueAnimation"),u=o.getData(),c={lastFrameIndex:0},f=anyStateShowEndLabel(o)?function(_,S){a._endLabelOnDuring(_,S,u,c,l,s,r)}:null,d=r.getBaseAxis().isHorizontal(),v=createGridClipPath(r,n,o,function(){var _=a._endLabel;_&&n&&c.originalX!=null&&_.attr({x:c.originalX,y:c.originalY})},f);if(!o.get("clip",!0)){var g=v.shape,y=Math.max(g.width,g.height);d?(g.y-=y,g.height+=y*2):(g.x-=y,g.width+=y*2)}return f&&f(1,v),v}else return createPolarClipPath(r,n,o)}function getEndLabelStateSpecified(a,r){var n=r.getBaseAxis(),o=n.isHorizontal(),s=n.inverse,l=o?s?"right":"left":"center",u=o?"middle":s?"top":"bottom";return{normal:{align:a.get("align")||l,verticalAlign:a.get("verticalAlign")||u}}}var LineView=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.init=function(){var n=new Group$3,o=new SymbolDraw;this.group.add(o.group),this._symbolDraw=o,this._lineGroup=n,this._changePolyState=bind$1(this._changePolyState,this)},r.prototype.render=function(n,o,s){var l=n.coordinateSystem,u=this.group,c=n.getData(),f=n.getModel("lineStyle"),d=n.getModel("areaStyle"),v=c.getLayout("points")||[],g=l.type==="polar",y=this._coordSys,_=this._symbolDraw,S=this._polyline,b=this._polygon,x=this._lineGroup,T=!o.ssr&&n.get("animation"),A=!d.isEmpty(),w=d.get("origin"),C=prepareDataCoordInfo(l,c,w),E=A&&getStackedOnPoints(l,c,C),P=n.get("showSymbol"),I=n.get("connectNulls"),M=P&&!g&&getIsIgnoreFunc(n,c,l),R=this._data;R&&R.eachItemGraphicEl(function(ne,ue){ne.__temp&&(u.remove(ne),R.setItemGraphicEl(ue,null))}),P||_.remove(),u.add(x);var O=g?!1:n.get("step"),$;l&&l.getArea&&n.get("clip",!0)&&($=l.getArea(),$.width!=null?($.x-=.1,$.y-=.1,$.width+=.2,$.height+=.2):$.r0&&($.r0-=.5,$.r+=.5)),this._clipShapeForSymbol=$;var B=getVisualGradient(c,l,s)||c.getVisual("style")[c.getVisual("drawType")];if(!(S&&y.type===l.type&&O===this._step))P&&_.updateData(c,{isIgnore:M,clipShape:$,disableAnimation:!0,getSymbolPoint:function(ne){return[v[ne*2],v[ne*2+1]]}}),T&&this._initSymbolLabelAnimation(c,l,$),O&&(E&&(E=turnPointsIntoStep(E,v,l,O,I)),v=turnPointsIntoStep(v,null,l,O,I)),S=this._newPolyline(v),A?b=this._newPolygon(v,E):b&&(x.remove(b),b=this._polygon=null),g||this._initOrUpdateEndLabel(n,l,convertToColorString(B)),x.setClipPath(createLineClipPath(this,l,!0,n));else{A&&!b?b=this._newPolygon(v,E):b&&!A&&(x.remove(b),b=this._polygon=null),g||this._initOrUpdateEndLabel(n,l,convertToColorString(B));var F=x.getClipPath();if(F){var z=createLineClipPath(this,l,!1,n);initProps(F,{shape:z.shape},n)}else x.setClipPath(createLineClipPath(this,l,!0,n));P&&_.updateData(c,{isIgnore:M,clipShape:$,disableAnimation:!0,getSymbolPoint:function(ne){return[v[ne*2],v[ne*2+1]]}}),(!isPointsSame(this._stackedOnPoints,E)||!isPointsSame(this._points,v))&&(T?this._doUpdateAnimation(c,E,l,s,O,w,I):(O&&(E&&(E=turnPointsIntoStep(E,v,l,O,I)),v=turnPointsIntoStep(v,null,l,O,I)),S.setShape({points:v}),b&&b.setShape({points:v,stackedOnPoints:E})))}var G=n.getModel("emphasis"),D=G.get("focus"),V=G.get("blurScope"),L=G.get("disabled");if(S.useStyle(defaults(f.getLineStyle(),{fill:"none",stroke:B,lineJoin:"bevel"})),setStatesStylesFromModel(S,n,"lineStyle"),S.style.lineWidth>0&&n.get(["emphasis","lineStyle","width"])==="bolder"){var N=S.getState("emphasis").style;N.lineWidth=+S.style.lineWidth+1}getECData(S).seriesIndex=n.seriesIndex,toggleHoverEmphasis(S,D,V,L);var U=getSmooth(n.get("smooth")),H=n.get("smoothMonotone");if(S.setShape({smooth:U,smoothMonotone:H,connectNulls:I}),b){var q=c.getCalculationInfo("stackedOnSeries"),Z=0;b.useStyle(defaults(d.getAreaStyle(),{fill:B,opacity:.7,lineJoin:"bevel",decal:c.getVisual("style").decal})),q&&(Z=getSmooth(q.get("smooth"))),b.setShape({smooth:U,stackedOnSmooth:Z,smoothMonotone:H,connectNulls:I}),setStatesStylesFromModel(b,n,"areaStyle"),getECData(b).seriesIndex=n.seriesIndex,toggleHoverEmphasis(b,D,V,L)}var ee=this._changePolyState;c.eachItemGraphicEl(function(ne){ne&&(ne.onHoverStateChange=ee)}),this._polyline.onHoverStateChange=ee,this._data=c,this._coordSys=l,this._stackedOnPoints=E,this._points=v,this._step=O,this._valueOrigin=w,n.get("triggerLineEvent")&&(this.packEventData(n,S),b&&this.packEventData(n,b))},r.prototype.packEventData=function(n,o){getECData(o).eventData={componentType:"series",componentSubType:"line",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"line"}},r.prototype.highlight=function(n,o,s,l){var u=n.getData(),c=queryDataIndex(u,l);if(this._changePolyState("emphasis"),!(c instanceof Array)&&c!=null&&c>=0){var f=u.getLayout("points"),d=u.getItemGraphicEl(c);if(!d){var v=f[c*2],g=f[c*2+1];if(isNaN(v)||isNaN(g)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(v,g))return;var y=n.get("zlevel")||0,_=n.get("z")||0;d=new Symbol$1(u,c),d.x=v,d.y=g,d.setZ(y,_);var S=d.getSymbolPath().getTextContent();S&&(S.zlevel=y,S.z=_,S.z2=this._polyline.z2+1),d.__temp=!0,u.setItemGraphicEl(c,d),d.stopSymbolAnimation(!0),this.group.add(d)}d.highlight()}else ChartView.prototype.highlight.call(this,n,o,s,l)},r.prototype.downplay=function(n,o,s,l){var u=n.getData(),c=queryDataIndex(u,l);if(this._changePolyState("normal"),c!=null&&c>=0){var f=u.getItemGraphicEl(c);f&&(f.__temp?(u.setItemGraphicEl(c,null),this.group.remove(f)):f.downplay())}else ChartView.prototype.downplay.call(this,n,o,s,l)},r.prototype._changePolyState=function(n){var o=this._polygon;setStatesFlag(this._polyline,n),o&&setStatesFlag(o,n)},r.prototype._newPolyline=function(n){var o=this._polyline;return o&&this._lineGroup.remove(o),o=new ECPolyline({shape:{points:n},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(o),this._polyline=o,o},r.prototype._newPolygon=function(n,o){var s=this._polygon;return s&&this._lineGroup.remove(s),s=new ECPolygon({shape:{points:n,stackedOnPoints:o},segmentIgnoreThreshold:2}),this._lineGroup.add(s),this._polygon=s,s},r.prototype._initSymbolLabelAnimation=function(n,o,s){var l,u,c=o.getBaseAxis(),f=c.inverse;o.type==="cartesian2d"?(l=c.isHorizontal(),u=!1):o.type==="polar"&&(l=c.dim==="angle",u=!0);var d=n.hostModel,v=d.get("animationDuration");isFunction(v)&&(v=v(null));var g=d.get("animationDelay")||0,y=isFunction(g)?g(null):g;n.eachItemGraphicEl(function(_,S){var b=_;if(b){var x=[_.x,_.y],T=void 0,A=void 0,w=void 0;if(s)if(u){var C=s,E=o.pointToCoord(x);l?(T=C.startAngle,A=C.endAngle,w=-E[1]/180*Math.PI):(T=C.r0,A=C.r,w=E[0])}else{var P=s;l?(T=P.x,A=P.x+P.width,w=_.x):(T=P.y+P.height,A=P.y,w=_.y)}var I=A===T?0:(w-T)/(A-T);f&&(I=1-I);var M=isFunction(g)?g(S):v*I+y,R=b.getSymbolPath(),O=R.getTextContent();b.attr({scaleX:0,scaleY:0}),b.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:M}),O&&O.animateFrom({style:{opacity:0}},{duration:300,delay:M}),R.disableLabelAnimation=!0}})},r.prototype._initOrUpdateEndLabel=function(n,o,s){var l=n.getModel("endLabel");if(anyStateShowEndLabel(n)){var u=n.getData(),c=this._polyline,f=u.getLayout("points");if(!f){c.removeTextContent(),this._endLabel=null;return}var d=this._endLabel;d||(d=this._endLabel=new ZRText({z2:200}),d.ignoreClip=!0,c.setTextContent(this._endLabel),c.disableLabelAnimation=!0);var v=getLastIndexNotNull(f);v>=0&&(setLabelStyle(c,getLabelStatesModels(n,"endLabel"),{inheritColor:s,labelFetcher:n,labelDataIndex:v,defaultText:function(g,y,_){return _!=null?getDefaultInterpolatedLabel(u,_):getDefaultLabel(u,g)},enableTextSetter:!0},getEndLabelStateSpecified(l,o)),c.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},r.prototype._endLabelOnDuring=function(n,o,s,l,u,c,f){var d=this._endLabel,v=this._polyline;if(d){n<1&&l.originalX==null&&(l.originalX=d.x,l.originalY=d.y);var g=s.getLayout("points"),y=s.hostModel,_=y.get("connectNulls"),S=c.get("precision"),b=c.get("distance")||0,x=f.getBaseAxis(),T=x.isHorizontal(),A=x.inverse,w=o.shape,C=A?T?w.x:w.y+w.height:T?w.x+w.width:w.y,E=(T?b:0)*(A?-1:1),P=(T?0:-b)*(A?-1:1),I=T?"x":"y",M=getIndexRange(g,C,I),R=M.range,O=R[1]-R[0],$=void 0;if(O>=1){if(O>1&&!_){var B=getPointAtIndex(g,R[0]);d.attr({x:B[0]+E,y:B[1]+P}),u&&($=y.getRawValue(R[0]))}else{var B=v.getPointOn(C,I);B&&d.attr({x:B[0]+E,y:B[1]+P});var F=y.getRawValue(R[0]),z=y.getRawValue(R[1]);u&&($=interpolateRawValues(s,S,F,z,M.t))}l.lastFrameIndex=R[0]}else{var G=n===1||l.lastFrameIndex>0?R[0]:0,B=getPointAtIndex(g,G);u&&($=y.getRawValue(G)),d.attr({x:B[0]+E,y:B[1]+P})}if(u){var D=labelInner(d);typeof D.setLabelText=="function"&&D.setLabelText($)}}},r.prototype._doUpdateAnimation=function(n,o,s,l,u,c,f){var d=this._polyline,v=this._polygon,g=n.hostModel,y=lineAnimationDiff(this._data,n,this._stackedOnPoints,o,this._coordSys,s,this._valueOrigin),_=y.current,S=y.stackedOnCurrent,b=y.next,x=y.stackedOnNext;if(u&&(S=turnPointsIntoStep(y.stackedOnCurrent,y.current,s,u,f),_=turnPointsIntoStep(y.current,null,s,u,f),x=turnPointsIntoStep(y.stackedOnNext,y.next,s,u,f),b=turnPointsIntoStep(y.next,null,s,u,f)),getBoundingDiff(_,b)>3e3||v&&getBoundingDiff(S,x)>3e3){d.stopAnimation(),d.setShape({points:b}),v&&(v.stopAnimation(),v.setShape({points:b,stackedOnPoints:x}));return}d.shape.__points=y.current,d.shape.points=_;var T={shape:{points:b}};y.current!==_&&(T.shape.__points=y.next),d.stopAnimation(),updateProps$1(d,T,g),v&&(v.setShape({points:_,stackedOnPoints:S}),v.stopAnimation(),updateProps$1(v,{shape:{stackedOnPoints:x}},g),d.shape.points!==v.shape.points&&(v.shape.points=d.shape.points));for(var A=[],w=y.status,C=0;C<w.length;C++){var E=w[C].cmd;if(E==="="){var P=n.getItemGraphicEl(w[C].idx1);P&&A.push({el:P,ptIdx:C})}}d.animators&&d.animators.length&&d.animators[0].during(function(){v&&v.dirtyShape();for(var I=d.shape.__points,M=0;M<A.length;M++){var R=A[M].el,O=A[M].ptIdx*2;R.x=I[O],R.y=I[O+1],R.markRedraw()}})},r.prototype.remove=function(n){var o=this.group,s=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),s&&s.eachItemGraphicEl(function(l,u){l.__temp&&(o.remove(l),s.setItemGraphicEl(u,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},r.type="line",r}(ChartView);function pointsLayout(a,r){return{seriesType:a,plan:createRenderPlanner(),reset:function(n){var o=n.getData(),s=n.coordinateSystem,l=n.pipelineContext,u=r||l.large;if(s){var c=map$1(s.dimensions,function(_){return o.mapDimension(_)}).slice(0,2),f=c.length,d=o.getCalculationInfo("stackResultDimension");isDimensionStacked(o,c[0])&&(c[0]=d),isDimensionStacked(o,c[1])&&(c[1]=d);var v=o.getStore(),g=o.getDimensionIndex(c[0]),y=o.getDimensionIndex(c[1]);return f&&{progress:function(_,S){for(var b=_.end-_.start,x=u&&createFloat32Array(b*f),T=[],A=[],w=_.start,C=0;w<_.end;w++){var E=void 0;if(f===1){var P=v.get(g,w);E=s.dataToPoint(P,null,A)}else T[0]=v.get(g,w),T[1]=v.get(y,w),E=s.dataToPoint(T,null,A);u?(x[C++]=E[0],x[C++]=E[1]):S.setItemLayout(w,E.slice())}u&&S.setLayout("points",x)}}}}}}var samplers={average:function(a){for(var r=0,n=0,o=0;o<a.length;o++)isNaN(a[o])||(r+=a[o],n++);return n===0?NaN:r/n},sum:function(a){for(var r=0,n=0;n<a.length;n++)r+=a[n]||0;return r},max:function(a){for(var r=-1/0,n=0;n<a.length;n++)a[n]>r&&(r=a[n]);return isFinite(r)?r:NaN},min:function(a){for(var r=1/0,n=0;n<a.length;n++)a[n]<r&&(r=a[n]);return isFinite(r)?r:NaN},nearest:function(a){return a[0]}},indexSampler=function(a){return Math.round(a.length/2)};function dataSample(a){return{seriesType:a,reset:function(r,n,o){var s=r.getData(),l=r.get("sampling"),u=r.coordinateSystem,c=s.count();if(c>10&&u.type==="cartesian2d"&&l){var f=u.getBaseAxis(),d=u.getOtherAxis(f),v=f.getExtent(),g=o.getDevicePixelRatio(),y=Math.abs(v[1]-v[0])*(g||1),_=Math.round(c/y);if(isFinite(_)&&_>1){l==="lttb"?r.setData(s.lttbDownSample(s.mapDimension(d.dim),1/_)):l==="minmax"&&r.setData(s.minmaxDownSample(s.mapDimension(d.dim),1/_));var S=void 0;isString(l)?S=samplers[l]:isFunction(l)&&(S=l),S&&r.setData(s.downSample(s.mapDimension(d.dim),1/_,S,indexSampler))}}}}}function install$T(a){a.registerChartView(LineView),a.registerSeriesModel(LineSeriesModel),a.registerLayout(pointsLayout("line",!0)),a.registerVisual({seriesType:"line",reset:function(r){var n=r.getData(),o=r.getModel("lineStyle").getLineStyle();o&&!o.stroke&&(o.stroke=n.getVisual("style").fill),n.setVisual("legendLineStyle",o)}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.getInitialData=function(n,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},r.prototype.getMarkerPosition=function(n,o,s){var l=this.coordinateSystem;if(l&&l.clampData){var u=l.clampData(n),c=l.dataToPoint(u);if(s)each$f(l.getAxes(),function(y,_){if(y.type==="category"&&o!=null){var S=y.getTicksCoords(),b=y.getTickModel().get("alignWithLabel"),x=u[_],T=o[_]==="x1"||o[_]==="y1";if(T&&!b&&(x+=1),S.length<2)return;if(S.length===2){c[_]=y.toGlobalCoord(y.getExtent()[T?1:0]);return}for(var A=void 0,w=void 0,C=1,E=0;E<S.length;E++){var P=S[E].coord,I=E===S.length-1?S[E-1].tickValue+C:S[E].tickValue;if(I===x){w=P;break}else if(I<x)A=P;else if(A!=null&&I>x){w=(P+A)/2;break}E===1&&(C=I-S[0].tickValue)}w==null&&(A?A&&(w=S[S.length-1].coord):w=S[0].coord),c[_]=y.toGlobalCoord(w)}});else{var f=this.getData(),d=f.getLayout("offset"),v=f.getLayout("size"),g=l.getBaseAxis().isHorizontal()?0:1;c[g]+=d+v/2}return c}return[NaN,NaN]},r.type="series.__base_bar__",r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",defaultBarGap:"10%"},r}(SeriesModel);SeriesModel.registerClass(BaseBarSeriesModel);var BarSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},r.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},r.prototype.getProgressiveThreshold=function(){var n=this.get("progressiveThreshold"),o=this.get("largeThreshold");return o>n&&(n=o),n},r.prototype.brushSelector=function(n,o,s){return s.rect(o.getItemLayout(n))},r.type="series.bar",r.dependencies=["grid","polar"],r.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:tokens.color.primary,borderWidth:2}},realtimeSort:!1}),r}(BaseBarSeriesModel),SausageShape=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),SausagePath=function(a){__extends(r,a);function r(n){var o=a.call(this,n)||this;return o.type="sausage",o}return r.prototype.getDefaultShape=function(){return new SausageShape},r.prototype.buildPath=function(n,o){var s=o.cx,l=o.cy,u=Math.max(o.r0||0,0),c=Math.max(o.r,0),f=(c-u)*.5,d=u+f,v=o.startAngle,g=o.endAngle,y=o.clockwise,_=Math.PI*2,S=y?g-v<_:v-g<_;S||(v=g-(y?_:-_));var b=Math.cos(v),x=Math.sin(v),T=Math.cos(g),A=Math.sin(g);S?(n.moveTo(b*u+s,x*u+l),n.arc(b*d+s,x*d+l,f,-Math.PI+v,v,!y)):n.moveTo(b*c+s,x*c+l),n.arc(s,l,c,v,g,!y),n.arc(T*d+s,A*d+l,f,g-Math.PI*2,g-Math.PI,!y),u!==0&&n.arc(s,l,u,g,v,y)},r}(Path);function createSectorCalculateTextPosition(a,r){r=r||{};var n=r.isRoundCap;return function(o,s,l){var u=s.position;if(!u||u instanceof Array)return calculateTextPosition(o,s,l);var c=a(u),f=s.distance!=null?s.distance:5,d=this.shape,v=d.cx,g=d.cy,y=d.r,_=d.r0,S=(y+_)/2,b=d.startAngle,x=d.endAngle,T=(b+x)/2,A=n?Math.abs(y-_)/2:0,w=Math.cos,C=Math.sin,E=v+y*w(b),P=g+y*C(b),I="left",M="top";switch(c){case"startArc":E=v+(_-f)*w(T),P=g+(_-f)*C(T),I="center",M="top";break;case"insideStartArc":E=v+(_+f)*w(T),P=g+(_+f)*C(T),I="center",M="bottom";break;case"startAngle":E=v+S*w(b)+adjustAngleDistanceX(b,f+A,!1),P=g+S*C(b)+adjustAngleDistanceY(b,f+A,!1),I="right",M="middle";break;case"insideStartAngle":E=v+S*w(b)+adjustAngleDistanceX(b,-f+A,!1),P=g+S*C(b)+adjustAngleDistanceY(b,-f+A,!1),I="left",M="middle";break;case"middle":E=v+S*w(T),P=g+S*C(T),I="center",M="middle";break;case"endArc":E=v+(y+f)*w(T),P=g+(y+f)*C(T),I="center",M="bottom";break;case"insideEndArc":E=v+(y-f)*w(T),P=g+(y-f)*C(T),I="center",M="top";break;case"endAngle":E=v+S*w(x)+adjustAngleDistanceX(x,f+A,!0),P=g+S*C(x)+adjustAngleDistanceY(x,f+A,!0),I="left",M="middle";break;case"insideEndAngle":E=v+S*w(x)+adjustAngleDistanceX(x,-f+A,!0),P=g+S*C(x)+adjustAngleDistanceY(x,-f+A,!0),I="right",M="middle";break;default:return calculateTextPosition(o,s,l)}return o=o||{},o.x=E,o.y=P,o.align=I,o.verticalAlign=M,o}}function setSectorTextRotation(a,r,n,o){if(isNumber(o)){a.setTextConfig({rotation:o});return}else if(isArray$1(r)){a.setTextConfig({rotation:0});return}var s=a.shape,l=s.clockwise?s.startAngle:s.endAngle,u=s.clockwise?s.endAngle:s.startAngle,c=(l+u)/2,f,d=n(r);switch(d){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":f=c;break;case"startAngle":case"insideStartAngle":f=l;break;case"endAngle":case"insideEndAngle":f=u;break;default:a.setTextConfig({rotation:0});return}var v=Math.PI*1.5-f;d==="middle"&&v>Math.PI/2&&v<Math.PI*1.5&&(v-=Math.PI),a.setTextConfig({rotation:v})}function adjustAngleDistanceX(a,r,n){return r*Math.sin(a)*(n?-1:1)}function adjustAngleDistanceY(a,r,n){return r*Math.cos(a)*(n?1:-1)}function getSectorCornerRadius(a,r,n){var o=a.get("borderRadius");if(o==null)return n?{cornerRadius:0}:null;isArray$1(o)||(o=[o,o,o,o]);var s=Math.abs(r.r||0-r.r0||0);return{cornerRadius:map$1(o,function(l){return parsePercent$1(l,s)})}}var mathMax$4=Math.max,mathMin$4=Math.min;function getClipArea(a,r){var n=a.getArea&&a.getArea();if(isCoordinateSystemType(a,"cartesian2d")){var o=a.getBaseAxis();if(o.type!=="category"||!o.onBand){var s=r.getLayout("bandWidth");o.isHorizontal()?(n.x-=s,n.width+=s*2):(n.y-=s,n.height+=s*2)}}return n}var BarView=function(a){__extends(r,a);function r(){var n=a.call(this)||this;return n.type=r.type,n._isFirstFrame=!0,n}return r.prototype.render=function(n,o,s,l){this._model=n,this._removeOnRenderedListener(s),this._updateDrawMode(n);var u=n.get("coordinateSystem");(u==="cartesian2d"||u==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(n,o,s):this._renderNormal(n,o,s,l))},r.prototype.incrementalPrepareRender=function(n){this._clear(),this._updateDrawMode(n),this._updateLargeClip(n)},r.prototype.incrementalRender=function(n,o){this._progressiveEls=[],this._incrementalRenderLarge(n,o)},r.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},r.prototype._updateDrawMode=function(n){var o=n.pipelineContext.large;(this._isLargeDraw==null||o!==this._isLargeDraw)&&(this._isLargeDraw=o,this._clear())},r.prototype._renderNormal=function(n,o,s,l){var u=this.group,c=n.getData(),f=this._data,d=n.coordinateSystem,v=d.getBaseAxis(),g;d.type==="cartesian2d"?g=v.isHorizontal():d.type==="polar"&&(g=v.dim==="angle");var y=n.isAnimationEnabled()?n:null,_=shouldRealtimeSort(n,d);_&&this._enableRealtimeSort(_,c,s);var S=n.get("clip",!0)||_,b=getClipArea(d,c);u.removeClipPath();var x=n.get("roundCap",!0),T=n.get("showBackground",!0),A=n.getModel("backgroundStyle"),w=A.get("borderRadius")||0,C=[],E=this._backgroundEls,P=l&&l.isInitSort,I=l&&l.type==="changeAxisOrder";function M($){var B=getLayout[d.type](c,$);if(!B)return null;var F=createBackgroundEl(d,g,B);return F.useStyle(A.getItemStyle()),d.type==="cartesian2d"?F.setShape("r",w):F.setShape("cornerRadius",w),C[$]=F,F}c.diff(f).add(function($){var B=c.getItemModel($),F=getLayout[d.type](c,$,B);if(F&&(T&&M($),!(!c.hasValue($)||!isValidLayout[d.type](F)))){var z=!1;S&&(z=clip[d.type](b,F));var G=elementCreator[d.type](n,c,$,F,g,y,v.model,!1,x);_&&(G.forceLabelAnimation=!0),updateStyle(G,c,$,B,F,n,g,d.type==="polar"),P?G.attr({shape:F}):_?updateRealtimeAnimation(_,y,G,F,$,g,!1,!1):initProps(G,{shape:F},n,$),c.setItemGraphicEl($,G),u.add(G),G.ignore=z}}).update(function($,B){var F=c.getItemModel($),z=getLayout[d.type](c,$,F);if(z){if(T){var G=void 0;E.length===0?G=M(B):(G=E[B],G.useStyle(A.getItemStyle()),d.type==="cartesian2d"?G.setShape("r",w):G.setShape("cornerRadius",w),C[$]=G);var D=getLayout[d.type](c,$),V=createBackgroundShape(g,D,d);updateProps$1(G,{shape:V},y,$)}var L=f.getItemGraphicEl(B);if(!c.hasValue($)||!isValidLayout[d.type](z)){u.remove(L);return}var N=!1;S&&(N=clip[d.type](b,z),N&&u.remove(L));var U=L&&(L.type==="sector"&&x||L.type==="sausage"&&!x);if(U&&(L&&removeElementWithFadeOut(L,n,B),L=null),L?saveOldStyle(L):L=elementCreator[d.type](n,c,$,z,g,y,v.model,!0,x),_&&(L.forceLabelAnimation=!0),I){var H=L.getTextContent();if(H){var q=labelInner(H);q.prevValue!=null&&(q.prevValue=q.value)}}else updateStyle(L,c,$,F,z,n,g,d.type==="polar");P?L.attr({shape:z}):_?updateRealtimeAnimation(_,y,L,z,$,g,!0,I):updateProps$1(L,{shape:z},n,$,null),c.setItemGraphicEl($,L),L.ignore=N,u.add(L)}}).remove(function($){var B=f.getItemGraphicEl($);B&&removeElementWithFadeOut(B,n,$)}).execute();var R=this._backgroundGroup||(this._backgroundGroup=new Group$3);R.removeAll();for(var O=0;O<C.length;++O)R.add(C[O]);u.add(R),this._backgroundEls=C,this._data=c},r.prototype._renderLarge=function(n,o,s){this._clear(),createLarge$1(n,this.group),this._updateLargeClip(n)},r.prototype._incrementalRenderLarge=function(n,o){this._removeBackground(),createLarge$1(o,this.group,this._progressiveEls,!0)},r.prototype._updateLargeClip=function(n){var o=n.get("clip",!0)&&createClipPath(n.coordinateSystem,!1,n),s=this.group;o?s.setClipPath(o):s.removeClipPath()},r.prototype._enableRealtimeSort=function(n,o,s){var l=this;if(o.count()){var u=n.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(o,n,s),this._isFirstFrame=!1;else{var c=function(f){var d=o.getItemGraphicEl(f),v=d&&d.shape;return v&&Math.abs(u.isHorizontal()?v.height:v.width)||0};this._onRendered=function(){l._updateSortWithinSameData(o,c,u,s)},s.getZr().on("rendered",this._onRendered)}}},r.prototype._dataSort=function(n,o,s){var l=[];return n.each(n.mapDimension(o.dim),function(u,c){var f=s(c);f=f??NaN,l.push({dataIndex:c,mappedValue:f,ordinalNumber:u})}),l.sort(function(u,c){return c.mappedValue-u.mappedValue}),{ordinalNumbers:map$1(l,function(u){return u.ordinalNumber})}},r.prototype._isOrderChangedWithinSameData=function(n,o,s){for(var l=s.scale,u=n.mapDimension(s.dim),c=Number.MAX_VALUE,f=0,d=l.getOrdinalMeta().categories.length;f<d;++f){var v=n.rawIndexOf(u,l.getRawOrdinalNumber(f)),g=v<0?Number.MIN_VALUE:o(n.indexOfRawIndex(v));if(g>c)return!0;c=g}return!1},r.prototype._isOrderDifferentInView=function(n,o){for(var s=o.scale,l=s.getExtent(),u=Math.max(0,l[0]),c=Math.min(l[1],s.getOrdinalMeta().categories.length-1);u<=c;++u)if(n.ordinalNumbers[u]!==s.getRawOrdinalNumber(u))return!0},r.prototype._updateSortWithinSameData=function(n,o,s,l){if(this._isOrderChangedWithinSameData(n,o,s)){var u=this._dataSort(n,s,o);this._isOrderDifferentInView(u,s)&&(this._removeOnRenderedListener(l),l.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",axisId:s.index,sortInfo:u}))}},r.prototype._dispatchInitSort=function(n,o,s){var l=o.baseAxis,u=this._dataSort(n,l,function(c){return n.get(n.mapDimension(o.otherAxis.dim),c)});s.dispatchAction({type:"changeAxisOrder",componentType:l.dim+"Axis",isInitSort:!0,axisId:l.index,sortInfo:u})},r.prototype.remove=function(n,o){this._clear(this._model),this._removeOnRenderedListener(o)},r.prototype.dispose=function(n,o){this._removeOnRenderedListener(o)},r.prototype._removeOnRenderedListener=function(n){this._onRendered&&(n.getZr().off("rendered",this._onRendered),this._onRendered=null)},r.prototype._clear=function(n){var o=this.group,s=this._data;n&&n.isAnimationEnabled()&&s&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],s.eachItemGraphicEl(function(l){removeElementWithFadeOut(l,n,getECData(l).dataIndex)})):o.removeAll(),this._data=null,this._isFirstFrame=!0},r.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},r.type="bar",r}(ChartView),clip={cartesian2d:function(a,r){var n=r.width<0?-1:1,o=r.height<0?-1:1;n<0&&(r.x+=r.width,r.width=-r.width),o<0&&(r.y+=r.height,r.height=-r.height);var s=a.x+a.width,l=a.y+a.height,u=mathMax$4(r.x,a.x),c=mathMin$4(r.x+r.width,s),f=mathMax$4(r.y,a.y),d=mathMin$4(r.y+r.height,l),v=c<u,g=d<f;return r.x=v&&u>s?c:u,r.y=g&&f>l?d:f,r.width=v?0:c-u,r.height=g?0:d-f,n<0&&(r.x+=r.width,r.width=-r.width),o<0&&(r.y+=r.height,r.height=-r.height),v||g},polar:function(a,r){var n=r.r0<=r.r?1:-1;if(n<0){var o=r.r;r.r=r.r0,r.r0=o}var s=mathMin$4(r.r,a.r),l=mathMax$4(r.r0,a.r0);r.r=s,r.r0=l;var u=s-l<0;if(n<0){var o=r.r;r.r=r.r0,r.r0=o}return u}},elementCreator={cartesian2d:function(a,r,n,o,s,l,u,c,f){var d=new Rect$2({shape:extend({},o),z2:1});if(d.__dataIndex=n,d.name="item",l){var v=d.shape,g=s?"height":"width";v[g]=0}return d},polar:function(a,r,n,o,s,l,u,c,f){var d=!s&&f?SausagePath:Sector,v=new d({shape:o,z2:1});v.name="item";var g=createPolarPositionMapping(s);if(v.calculateTextPosition=createSectorCalculateTextPosition(g,{isRoundCap:d===SausagePath}),l){var y=v.shape,_=s?"r":"endAngle",S={};y[_]=s?o.r0:o.startAngle,S[_]=o[_],(c?updateProps$1:initProps)(v,{shape:S},l)}return v}};function shouldRealtimeSort(a,r){var n=a.get("realtimeSort",!0),o=r.getBaseAxis();if(n&&o.type==="category"&&r.type==="cartesian2d")return{baseAxis:o,otherAxis:r.getOtherAxis(o)}}function updateRealtimeAnimation(a,r,n,o,s,l,u,c){var f,d;l?(d={x:o.x,width:o.width},f={y:o.y,height:o.height}):(d={y:o.y,height:o.height},f={x:o.x,width:o.width}),c||(u?updateProps$1:initProps)(n,{shape:f},r,s,null);var v=r?a.baseAxis.model:null;(u?updateProps$1:initProps)(n,{shape:d},v,s)}function checkPropertiesNotValid(a,r){for(var n=0;n<r.length;n++)if(!isFinite(a[r[n]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(a){return!checkPropertiesNotValid(a,rectPropties)},polar:function(a){return!checkPropertiesNotValid(a,polarPropties)}},getLayout={cartesian2d:function(a,r,n){var o=a.getItemLayout(r);if(!o)return null;var s=n?getLineWidth(n,o):0,l=o.width>0?1:-1,u=o.height>0?1:-1;return{x:o.x+l*s/2,y:o.y+u*s/2,width:o.width-l*s,height:o.height-u*s}},polar:function(a,r,n){var o=a.getItemLayout(r);return{cx:o.cx,cy:o.cy,r0:o.r0,r:o.r,startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}}};function isZeroOnPolar(a){return a.startAngle!=null&&a.endAngle!=null&&a.startAngle===a.endAngle}function createPolarPositionMapping(a){return function(r){var n=r?"Arc":"Angle";return function(o){switch(o){case"start":case"insideStart":case"end":case"insideEnd":return o+n;default:return o}}}(a)}function updateStyle(a,r,n,o,s,l,u,c){var f=r.getItemVisual(n,"style");if(c){if(!l.get("roundCap")){var v=a.shape,g=getSectorCornerRadius(o.getModel("itemStyle"),v,!0);extend(v,g),a.setShape(v)}}else{var d=o.get(["itemStyle","borderRadius"])||0;a.setShape("r",d)}a.useStyle(f);var y=o.getShallow("cursor");y&&a.attr("cursor",y);var _=c?u?s.r>=s.r0?"endArc":"startArc":s.endAngle>=s.startAngle?"endAngle":"startAngle":u?s.height>=0?"bottom":"top":s.width>=0?"right":"left",S=getLabelStatesModels(o);setLabelStyle(a,S,{labelFetcher:l,labelDataIndex:n,defaultText:getDefaultLabel(l.getData(),n),inheritColor:f.fill,defaultOpacity:f.opacity,defaultOutsidePosition:_});var b=a.getTextContent();if(c&&b){var x=o.get(["label","position"]);a.textConfig.inside=x==="middle"?!0:null,setSectorTextRotation(a,x==="outside"?_:x,createPolarPositionMapping(u),o.get(["label","rotate"]))}setLabelValueAnimation(b,S,l.getRawValue(n),function(A){return getDefaultInterpolatedLabel(r,A)});var T=o.getModel(["emphasis"]);toggleHoverEmphasis(a,T.get("focus"),T.get("blurScope"),T.get("disabled")),setStatesStylesFromModel(a,o),isZeroOnPolar(s)&&(a.style.fill="none",a.style.stroke="none",each$f(a.states,function(A){A.style&&(A.style.fill=A.style.stroke="none")}))}function getLineWidth(a,r){var n=a.get(["itemStyle","borderColor"]);if(!n||n==="none")return 0;var o=a.get(["itemStyle","borderWidth"])||0,s=isNaN(r.width)?Number.MAX_VALUE:Math.abs(r.width),l=isNaN(r.height)?Number.MAX_VALUE:Math.abs(r.height);return Math.min(o,s,l)}var LagePathShape=function(){function a(){}return a}(),LargePath=function(a){__extends(r,a);function r(n){var o=a.call(this,n)||this;return o.type="largeBar",o}return r.prototype.getDefaultShape=function(){return new LagePathShape},r.prototype.buildPath=function(n,o){for(var s=o.points,l=this.baseDimIdx,u=1-this.baseDimIdx,c=[],f=[],d=this.barWidth,v=0;v<s.length;v+=3)f[l]=d,f[u]=s[v+2],c[l]=s[v+l],c[u]=s[v+u],n.rect(c[0],c[1],f[0],f[1])},r}(Path);function createLarge$1(a,r,n,o){var s=a.getData(),l=s.getLayout("valueAxisHorizontal")?1:0,u=s.getLayout("largeDataIndices"),c=s.getLayout("size"),f=a.getModel("backgroundStyle"),d=s.getLayout("largeBackgroundPoints");if(d){var v=new LargePath({shape:{points:d},incremental:!!o,silent:!0,z2:0});v.baseDimIdx=l,v.largeDataIndices=u,v.barWidth=c,v.useStyle(f.getItemStyle()),r.add(v),n&&n.push(v)}var g=new LargePath({shape:{points:s.getLayout("largePoints")},incremental:!!o,ignoreCoarsePointer:!0,z2:1});g.baseDimIdx=l,g.largeDataIndices=u,g.barWidth=c,r.add(g),g.useStyle(s.getVisual("style")),g.style.stroke=null,getECData(g).seriesIndex=a.seriesIndex,a.get("silent")||(g.on("mousedown",largePathUpdateDataIndex),g.on("mousemove",largePathUpdateDataIndex)),n&&n.push(g)}var largePathUpdateDataIndex=throttle(function(a){var r=this,n=largePathFindDataIndex(r,a.offsetX,a.offsetY);getECData(r).dataIndex=n>=0?n:null},30,!1);function largePathFindDataIndex(a,r,n){for(var o=a.baseDimIdx,s=1-o,l=a.shape.points,u=a.largeDataIndices,c=[],f=[],d=a.barWidth,v=0,g=l.length/3;v<g;v++){var y=v*3;if(f[o]=d,f[s]=l[y+2],c[o]=l[y+o],c[s]=l[y+s],f[s]<0&&(c[s]+=f[s],f[s]=-f[s]),r>=c[0]&&r<=c[0]+f[0]&&n>=c[1]&&n<=c[1]+f[1])return u[v]}return-1}function createBackgroundShape(a,r,n){if(isCoordinateSystemType(n,"cartesian2d")){var o=r,s=n.getArea();return{x:a?o.x:s.x,y:a?s.y:o.y,width:a?o.width:s.width,height:a?s.height:o.height}}else{var s=n.getArea(),l=r;return{cx:s.cx,cy:s.cy,r0:a?s.r0:l.r0,r:a?s.r:l.r,startAngle:a?l.startAngle:0,endAngle:a?l.endAngle:Math.PI*2}}}function createBackgroundEl(a,r,n){var o=a.type==="polar"?Sector:Rect$2;return new o({shape:createBackgroundShape(r,n,a),silent:!0,z2:0})}function install$S(a){a.registerChartView(BarView),a.registerSeriesModel(BarSeriesModel),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,curry$1(layout$2,"bar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),a.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(r,n){var o=r.componentType||"series";n.eachComponent({mainType:o,query:r},function(s){r.sortInfo&&s.axis.setCategorySortInfo(r.sortInfo)})})}var PI2=Math.PI*2,RADIAN$4=Math.PI/180;function pieLayout(a,r,n){r.eachSeriesByType(a,function(o){var s=o.getData(),l=s.mapDimension("value"),u=getCircleLayout(o,n),c=u.cx,f=u.cy,d=u.r,v=u.r0,g=u.viewRect,y=-o.get("startAngle")*RADIAN$4,_=o.get("endAngle"),S=o.get("padAngle")*RADIAN$4;_=_==="auto"?y-PI2:-_*RADIAN$4;var b=o.get("minAngle")*RADIAN$4,x=b+S,T=0;s.each(l,function(V){!isNaN(V)&&T++});var A=s.getSum(l),w=Math.PI/(A||T)*2,C=o.get("clockwise"),E=o.get("roseType"),P=o.get("stillShowZeroSum"),I=s.getDataExtent(l);I[0]=0;var M=C?1:-1,R=[y,_],O=M*S/2;normalizeArcAngles(R,!C),y=R[0],_=R[1];var $=getSeriesLayoutData(o);$.startAngle=y,$.endAngle=_,$.clockwise=C,$.cx=c,$.cy=f,$.r=d,$.r0=v;var B=Math.abs(_-y),F=B,z=0,G=y;if(s.setLayout({viewRect:g,r:d}),s.each(l,function(V,L){var N;if(isNaN(V)){s.setItemLayout(L,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:C,cx:c,cy:f,r0:v,r:E?NaN:d});return}E!=="area"?N=A===0&&P?w:V*w:N=B/T,N<x?(N=x,F-=x):z+=V;var U=G+M*N,H=0,q=0;S>N?(H=G+M*N/2,q=H):(H=G+O,q=U-O),s.setItemLayout(L,{angle:N,startAngle:H,endAngle:q,clockwise:C,cx:c,cy:f,r0:v,r:E?linearMap$2(V,I,[v,d]):d}),G=U}),F<PI2&&T)if(F<=.001){var D=B/T;s.each(l,function(V,L){if(!isNaN(V)){var N=s.getItemLayout(L);N.angle=D;var U=0,H=0;D<S?(U=y+M*(L+1/2)*D,H=U):(U=y+M*L*D+O,H=y+M*(L+1)*D-O),N.startAngle=U,N.endAngle=H}})}else w=F/z,G=y,s.each(l,function(V,L){if(!isNaN(V)){var N=s.getItemLayout(L),U=N.angle===x?x:V*w,H=0,q=0;U<S?(H=G+M*U/2,q=H):(H=G+O,q=G+M*U-O),N.startAngle=H,N.endAngle=q,G+=M*U}})})}var getSeriesLayoutData=makeInner();function dataFilter$1(a){return{seriesType:a,reset:function(r,n){var o=n.findComponents({mainType:"legend"});if(!(!o||!o.length)){var s=r.getData();s.filterSelf(function(l){for(var u=s.getName(l),c=0;c<o.length;c++)if(!o[c].isSelected(u))return!1;return!0})}}}}var RADIAN$3=Math.PI/180;function adjustSingleSide(a,r,n,o,s,l,u,c,f,d){if(a.length<2)return;function v(b){for(var x=b.rB,T=x*x,A=0;A<b.list.length;A++){var w=b.list[A],C=Math.abs(w.label.y-n),E=o+w.len,P=E*E,I=Math.sqrt(Math.abs((1-C*C/T)*P)),M=r+(I+w.len2)*s,R=M-w.label.x,O=w.targetTextWidth-R*s;constrainTextWidth(w,O,!0),w.label.x=M}}function g(b){for(var x={list:[],maxY:0},T={list:[],maxY:0},A=0;A<b.length;A++)if(b[A].labelAlignTo==="none"){var w=b[A],C=w.label.y>n?T:x,E=Math.abs(w.label.y-n);if(E>=C.maxY){var P=w.label.x-r-w.len2*s,I=o+w.len,M=Math.abs(P)<I?Math.sqrt(E*E/(1-P*P/I/I)):I;C.rB=M,C.maxY=E}C.list.push(w)}v(x),v(T)}for(var y=a.length,_=0;_<y;_++)if(a[_].position==="outer"&&a[_].labelAlignTo==="labelLine"){var S=a[_].label.x-d;a[_].linePoints[1][0]+=S,a[_].label.x=d}shiftLayoutOnXY(a,1,f,f+u)&&g(a)}function avoidOverlap(a,r,n,o,s,l,u,c){for(var f=[],d=[],v=Number.MAX_VALUE,g=-Number.MAX_VALUE,y=0;y<a.length;y++){var _=a[y].label;isPositionCenter(a[y])||(_.x<r?(v=Math.min(v,_.x),f.push(a[y])):(g=Math.max(g,_.x),d.push(a[y])))}for(var y=0;y<a.length;y++){var S=a[y];if(!isPositionCenter(S)&&S.linePoints){if(S.labelStyleWidth!=null)continue;var _=S.label,b=S.linePoints,x=void 0;S.labelAlignTo==="edge"?_.x<r?x=b[2][0]-S.labelDistance-u-S.edgeDistance:x=u+s-S.edgeDistance-b[2][0]-S.labelDistance:S.labelAlignTo==="labelLine"?_.x<r?x=v-u-S.bleedMargin:x=u+s-g-S.bleedMargin:_.x<r?x=_.x-u-S.bleedMargin:x=u+s-_.x-S.bleedMargin,S.targetTextWidth=x,constrainTextWidth(S,x,!1)}}adjustSingleSide(d,r,n,o,1,s,l,u,c,g),adjustSingleSide(f,r,n,o,-1,s,l,u,c,v);for(var y=0;y<a.length;y++){var S=a[y];if(!isPositionCenter(S)&&S.linePoints){var _=S.label,b=S.linePoints,T=S.labelAlignTo==="edge",A=_.style.padding,w=A?A[1]+A[3]:0,C=_.style.backgroundColor?0:w,E=S.rect.width+C,P=b[1][0]-b[2][0];T?_.x<r?b[2][0]=u+S.edgeDistance+E+S.labelDistance:b[2][0]=u+s-S.edgeDistance-E-S.labelDistance:(_.x<r?b[2][0]=_.x+S.labelDistance:b[2][0]=_.x-S.labelDistance,b[1][0]=b[2][0]+P),b[1][1]=b[2][1]=_.y}}}function constrainTextWidth(a,r,n){if(a.labelStyleWidth==null){var o=a.label,s=o.style,l=a.rect,u=s.backgroundColor,c=s.padding,f=c?c[1]+c[3]:0,d=s.overflow,v=l.width+(u?0:f);if(r<v||n){if(d&&d.match("break")){o.setStyle("backgroundColor",null),o.setStyle("width",r-f);var g=o.getBoundingRect();o.setStyle("width",Math.ceil(g.width)),o.setStyle("backgroundColor",u)}else{var y=r-f,_=r<v?y:n?y>a.unconstrainedWidth?null:y:null;o.setStyle("width",_)}computeLabelGlobalRect(l,o)}}}function computeLabelGlobalRect(a,r){_tmpLabelGeometry.rect=a,computeLabelGeometry(_tmpLabelGeometry,r,_computeLabelGeometryOpt)}var _computeLabelGeometryOpt={minMarginForce:[null,0,null,0],marginDefault:[1,0,1,0]},_tmpLabelGeometry={};function isPositionCenter(a){return a.position==="center"}function pieLabelLayout(a){var r=a.getData(),n=[],o,s,l=!1,u=(a.get("minShowLabelAngle")||0)*RADIAN$3,c=r.getLayout("viewRect"),f=r.getLayout("r"),d=c.width,v=c.x,g=c.y,y=c.height;function _(P){P.ignore=!0}function S(P){if(!P.ignore)return!0;for(var I in P.states)if(P.states[I].ignore===!1)return!0;return!1}r.each(function(P){var I=r.getItemGraphicEl(P),M=I.shape,R=I.getTextContent(),O=I.getTextGuideLine(),$=r.getItemModel(P),B=$.getModel("label"),F=B.get("position")||$.get(["emphasis","label","position"]),z=B.get("distanceToLabelLine"),G=B.get("alignTo"),D=parsePercent(B.get("edgeDistance"),d),V=B.get("bleedMargin");V==null&&(V=Math.min(d,y)>200?10:2);var L=$.getModel("labelLine"),N=L.get("length");N=parsePercent(N,d);var U=L.get("length2");if(U=parsePercent(U,d),Math.abs(M.endAngle-M.startAngle)<u){each$f(R.states,_),R.ignore=!0,O&&(each$f(O.states,_),O.ignore=!0);return}if(S(R)){var H=(M.startAngle+M.endAngle)/2,q=Math.cos(H),Z=Math.sin(H),ee,ne,ue,K;o=M.cx,s=M.cy;var J=F==="inside"||F==="inner";if(F==="center")ee=M.cx,ne=M.cy,K="center";else{var X=(J?(M.r+M.r0)/2*q:M.r*q)+o,ie=(J?(M.r+M.r0)/2*Z:M.r*Z)+s;if(ee=X+q*3,ne=ie+Z*3,!J){var te=X+q*(N+f-M.r),W=ie+Z*(N+f-M.r),Y=te+(q<0?-1:1)*U,j=W;G==="edge"?ee=q<0?v+D:v+d-D:ee=Y+(q<0?-z:z),ne=j,ue=[[X,ie],[te,W],[Y,j]]}K=J?"center":G==="edge"?q>0?"right":"left":q>0?"left":"right"}var Q=Math.PI,re=0,ae=B.get("rotate");if(isNumber(ae))re=ae*(Q/180);else if(F==="center")re=0;else if(ae==="radial"||ae===!0){var le=q<0?-H+Q:-H;re=le}else if(ae==="tangential"&&F!=="outside"&&F!=="outer"){var se=Math.atan2(q,Z);se<0&&(se=Q*2+se);var ce=Z>0;ce&&(se=Q+se),re=se-Q}if(l=!!re,R.x=ee,R.y=ne,R.rotation=re,R.setStyle({verticalAlign:"middle"}),J){R.setStyle({align:K});var de=R.states.select;de&&(de.x+=R.x,de.y+=R.y)}else{var oe=new BoundingRect(0,0,0,0);computeLabelGlobalRect(oe,R),n.push({label:R,labelLine:O,position:F,len:N,len2:U,minTurnAngle:L.get("minTurnAngle"),maxSurfaceAngle:L.get("maxSurfaceAngle"),surfaceNormal:new Point(q,Z),linePoints:ue,textAlign:K,labelDistance:z,labelAlignTo:G,edgeDistance:D,bleedMargin:V,rect:oe,unconstrainedWidth:oe.width,labelStyleWidth:R.style.width})}I.setTextConfig({inside:J})}}),!l&&a.get("avoidLabelOverlap")&&avoidOverlap(n,o,s,f,d,y,v,g);for(var b=0;b<n.length;b++){var x=n[b],T=x.label,A=x.labelLine,w=isNaN(T.x)||isNaN(T.y);if(T){T.setStyle({align:x.textAlign}),w&&(each$f(T.states,_),T.ignore=!0);var C=T.states.select;C&&(C.x+=T.x,C.y+=T.y)}if(A){var E=x.linePoints;w||!E?(each$f(A.states,_),A.ignore=!0):(limitTurnAngle(E,x.minTurnAngle),limitSurfaceAngle(E,x.surfaceNormal,x.maxSurfaceAngle),A.setShape({points:E}),T.__hostTarget.textGuideLineConfig={anchor:new Point(E[0][0],E[0][1])})}}}var PiePiece=function(a){__extends(r,a);function r(n,o,s){var l=a.call(this)||this;l.z2=2;var u=new ZRText;return l.setTextContent(u),l.updateData(n,o,s,!0),l}return r.prototype.updateData=function(n,o,s,l){var u=this,c=n.hostModel,f=n.getItemModel(o),d=f.getModel("emphasis"),v=n.getItemLayout(o),g=extend(getSectorCornerRadius(f.getModel("itemStyle"),v,!0),v);if(isNaN(g.startAngle)){u.setShape(g);return}if(l){u.setShape(g);var y=c.getShallow("animationType");c.ecModel.ssr?(initProps(u,{scaleX:0,scaleY:0},c,{dataIndex:o,isFrom:!0}),u.originX=g.cx,u.originY=g.cy):y==="scale"?(u.shape.r=v.r0,initProps(u,{shape:{r:v.r}},c,o)):s!=null?(u.setShape({startAngle:s,endAngle:s}),initProps(u,{shape:{startAngle:v.startAngle,endAngle:v.endAngle}},c,o)):(u.shape.endAngle=v.startAngle,updateProps$1(u,{shape:{endAngle:v.endAngle}},c,o))}else saveOldStyle(u),updateProps$1(u,{shape:g},c,o);u.useStyle(n.getItemVisual(o,"style")),setStatesStylesFromModel(u,f);var _=(v.startAngle+v.endAngle)/2,S=c.get("selectedOffset"),b=Math.cos(_)*S,x=Math.sin(_)*S,T=f.getShallow("cursor");T&&u.attr("cursor",T),this._updateLabel(c,n,o),u.ensureState("emphasis").shape=extend({r:v.r+(d.get("scale")&&d.get("scaleSize")||0)},getSectorCornerRadius(d.getModel("itemStyle"),v)),extend(u.ensureState("select"),{x:b,y:x,shape:getSectorCornerRadius(f.getModel(["select","itemStyle"]),v)}),extend(u.ensureState("blur"),{shape:getSectorCornerRadius(f.getModel(["blur","itemStyle"]),v)});var A=u.getTextGuideLine(),w=u.getTextContent();A&&extend(A.ensureState("select"),{x:b,y:x}),extend(w.ensureState("select"),{x:b,y:x}),toggleHoverEmphasis(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},r.prototype._updateLabel=function(n,o,s){var l=this,u=o.getItemModel(s),c=u.getModel("labelLine"),f=o.getItemVisual(s,"style"),d=f&&f.fill,v=f&&f.opacity;setLabelStyle(l,getLabelStatesModels(u),{labelFetcher:o.hostModel,labelDataIndex:s,inheritColor:d,defaultOpacity:v,defaultText:n.getFormattedLabel(s,"normal")||o.getName(s)});var g=l.getTextContent();l.setTextConfig({position:null,rotation:null}),g.attr({z2:10});var y=u.get(["label","position"]);if(y!=="outside"&&y!=="outer")l.removeTextGuideLine();else{var _=this.getTextGuideLine();_||(_=new Polyline$1,this.setTextGuideLine(_)),setLabelLineStyle(this,getLabelLineStatesModels(u),{stroke:d,opacity:retrieve3(c.get(["lineStyle","opacity"]),v,1)})}},r}(Sector),PieView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.ignoreLabelLineUpdate=!0,n}return r.prototype.render=function(n,o,s,l){var u=n.getData(),c=this._data,f=this.group,d;if(!c&&u.count()>0){for(var v=u.getItemLayout(0),g=1;isNaN(v&&v.startAngle)&&g<u.count();++g)v=u.getItemLayout(g);v&&(d=v.startAngle)}if(this._emptyCircleSector&&f.remove(this._emptyCircleSector),u.count()===0&&n.get("showEmptyCircle")){var y=getSeriesLayoutData(n),_=new Sector({shape:clone$4(y)});_.useStyle(n.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=_,f.add(_)}u.diff(c).add(function(S){var b=new PiePiece(u,S,d);u.setItemGraphicEl(S,b),f.add(b)}).update(function(S,b){var x=c.getItemGraphicEl(b);x.updateData(u,S,d),x.off("click"),f.add(x),u.setItemGraphicEl(S,x)}).remove(function(S){var b=c.getItemGraphicEl(S);removeElementWithFadeOut(b,n,S)}).execute(),pieLabelLayout(n),n.get("animationTypeUpdate")!=="expansion"&&(this._data=u)},r.prototype.dispose=function(){},r.prototype.containPoint=function(n,o){var s=o.getData(),l=s.getItemLayout(0);if(l){var u=n[0]-l.cx,c=n[1]-l.cy,f=Math.sqrt(u*u+c*c);return f<=l.r&&f>=l.r0}},r.type="pie",r}(ChartView);function createSeriesDataSimply(a,r,n){r=isArray$1(r)&&{coordDimensions:r}||extend({encodeDefine:a.getEncode()},r);var o=a.getSource(),s=prepareSeriesDataSchema(o,r).dimensions,l=new SeriesData(s,a);return l.initData(o,n),l}var LegendVisualProvider=function(){function a(r,n){this._getDataWithEncodedVisual=r,this._getRawData=n}return a.prototype.getAllNames=function(){var r=this._getRawData();return r.mapArray(r.getName)},a.prototype.containName=function(r){var n=this._getRawData();return n.indexOfName(r)>=0},a.prototype.indexOfName=function(r){var n=this._getDataWithEncodedVisual();return n.indexOfName(r)},a.prototype.getItemVisual=function(r,n){var o=this._getDataWithEncodedVisual();return o.getItemVisual(r,n)},a}(),innerData=makeInner(),PieSeriesModel=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.init=function(n){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(n)},r.prototype.mergeOption=function(){a.prototype.mergeOption.apply(this,arguments)},r.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},r.prototype.getDataParams=function(n){var o=this.getData(),s=innerData(o),l=s.seats;if(!l){var u=[];o.each(o.mapDimension("value"),function(f){u.push(f)}),l=s.seats=getPercentSeats(u,o.hostModel.get("percentPrecision"))}var c=a.prototype.getDataParams.call(this,n);return c.percent=l[n]||0,c.$vars.push("percent"),c},r.prototype._defaultLabelLine=function(n){defaultEmphasis(n,"labelLine",["show"]);var o=n.labelLine,s=n.emphasis.labelLine;o.show=o.show&&n.label.show,s.show=s.show&&n.emphasis.label.show},r.type="series.pie",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"50%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,coordinateSystemUsage:"box",left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:30,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},r}(SeriesModel);registerLayOutOnCoordSysUsage({fullType:PieSeriesModel.type,getCoord2:function(a){return a.getShallow("center")}});function negativeDataFilter(a){return{seriesType:a,reset:function(r,n){var o=r.getData();o.filterSelf(function(s){var l=o.mapDimension("value"),u=o.get(l,s);return!(isNumber(u)&&!isNaN(u)&&u<0)})}}}function install$R(a){a.registerChartView(PieView),a.registerSeriesModel(PieSeriesModel),createLegacyDataSelectAction("pie",a.registerAction),a.registerLayout(curry$1(pieLayout,"pie")),a.registerProcessor(dataFilter$1("pie")),a.registerProcessor(negativeDataFilter("pie"))}var ScatterSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.hasSymbolVisual=!0,n}return r.prototype.getInitialData=function(n,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},r.prototype.getProgressive=function(){var n=this.option.progressive;return n??(this.option.large?5e3:this.get("progressive"))},r.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n??(this.option.large?1e4:this.get("progressiveThreshold"))},r.prototype.brushSelector=function(n,o,s){return s.point(o.getItemLayout(n))},r.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},r.type="series.scatter",r.dependencies=["grid","polar","geo","singleAxis","calendar","matrix"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:tokens.color.primary}},universalTransition:{divideShape:"clone"}},r}(SeriesModel),BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=function(){function a(){}return a}(),LargeSymbolPath=function(a){__extends(r,a);function r(n){var o=a.call(this,n)||this;return o._off=0,o.hoverDataIdx=-1,o}return r.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},r.prototype.reset=function(){this.notClear=!1,this._off=0},r.prototype.buildPath=function(n,o){var s=o.points,l=o.size,u=this.symbolProxy,c=u.shape,f=n.getContext?n.getContext():n,d=f&&l[0]<BOOST_SIZE_THRESHOLD,v=this.softClipShape,g;if(d){this._ctx=f;return}for(this._ctx=null,g=this._off;g<s.length;){var y=s[g++],_=s[g++];isNaN(y)||isNaN(_)||v&&!v.contain(y,_)||(c.x=y-l[0]/2,c.y=_-l[1]/2,c.width=l[0],c.height=l[1],u.buildPath(n,c,!0))}this.incremental&&(this._off=g,this.notClear=!0)},r.prototype.afterBrush=function(){var n=this.shape,o=n.points,s=n.size,l=this._ctx,u=this.softClipShape,c;if(l){for(c=this._off;c<o.length;){var f=o[c++],d=o[c++];isNaN(f)||isNaN(d)||u&&!u.contain(f,d)||l.fillRect(f-s[0]/2,d-s[1]/2,s[0],s[1])}this.incremental&&(this._off=c,this.notClear=!0)}},r.prototype.findDataIndex=function(n,o){for(var s=this.shape,l=s.points,u=s.size,c=Math.max(u[0],4),f=Math.max(u[1],4),d=l.length/2-1;d>=0;d--){var v=d*2,g=l[v]-c/2,y=l[v+1]-f/2;if(n>=g&&o>=y&&n<=g+c&&o<=y+f)return d}return-1},r.prototype.contain=function(n,o){var s=this.transformCoordToLocal(n,o),l=this.getBoundingRect();if(n=s[0],o=s[1],l.contain(n,o)){var u=this.hoverDataIdx=this.findDataIndex(n,o);return u>=0}return this.hoverDataIdx=-1,!1},r.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var o=this.shape,s=o.points,l=o.size,u=l[0],c=l[1],f=1/0,d=1/0,v=-1/0,g=-1/0,y=0;y<s.length;){var _=s[y++],S=s[y++];f=Math.min(_,f),v=Math.max(_,v),d=Math.min(S,d),g=Math.max(S,g)}n=this._rect=new BoundingRect(f-u/2,d-c/2,v-f+u,g-d+c)}return n},r}(Path),LargeSymbolDraw=function(){function a(){this.group=new Group$3}return a.prototype.updateData=function(r,n){this._clear();var o=this._create();o.setShape({points:r.getLayout("points")}),this._setCommon(o,r,n)},a.prototype.updateLayout=function(r){var n=r.getLayout("points");this.group.eachChild(function(o){if(o.startIndex!=null){var s=(o.endIndex-o.startIndex)*2,l=o.startIndex*4*2;n=new Float32Array(n.buffer,l,s)}o.setShape("points",n),o.reset()})},a.prototype.incrementalPrepareUpdate=function(r){this._clear()},a.prototype.incrementalUpdate=function(r,n,o){var s=this._newAdded[0],l=n.getLayout("points"),u=s&&s.shape.points;if(u&&u.length<2e4){var c=u.length,f=new Float32Array(c+l.length);f.set(u),f.set(l,c),s.endIndex=r.end,s.setShape({points:f})}else{this._newAdded=[];var d=this._create();d.startIndex=r.start,d.endIndex=r.end,d.incremental=!0,d.setShape({points:l}),this._setCommon(d,n,o)}},a.prototype.eachRendered=function(r){this._newAdded[0]&&r(this._newAdded[0])},a.prototype._create=function(){var r=new LargeSymbolPath({cursor:"default"});return r.ignoreCoarsePointer=!0,this.group.add(r),this._newAdded.push(r),r},a.prototype._setCommon=function(r,n,o){var s=n.hostModel;o=o||{};var l=n.getVisual("symbolSize");r.setShape("size",l instanceof Array?l:[l,l]),r.softClipShape=o.clipShape||null,r.symbolProxy=createSymbol$1(n.getVisual("symbol"),0,0,0,0),r.setColor=r.symbolProxy.setColor;var u=r.shape.size[0]<BOOST_SIZE_THRESHOLD;r.useStyle(s.getModel("itemStyle").getItemStyle(u?["color","shadowBlur","shadowColor"]:["color"]));var c=n.getVisual("style"),f=c&&c.fill;f&&r.setColor(f);var d=getECData(r);d.seriesIndex=s.seriesIndex,r.on("mousemove",function(v){d.dataIndex=null;var g=r.hoverDataIdx;g>=0&&(d.dataIndex=g+(r.startIndex||0))})},a.prototype.remove=function(){this._clear()},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}(),ScatterView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s){var l=n.getData(),u=this._updateSymbolDraw(l,n);u.updateData(l,{clipShape:this._getClipShape(n)}),this._finished=!0},r.prototype.incrementalPrepareRender=function(n,o,s){var l=n.getData(),u=this._updateSymbolDraw(l,n);u.incrementalPrepareUpdate(l),this._finished=!1},r.prototype.incrementalRender=function(n,o,s){this._symbolDraw.incrementalUpdate(n,o.getData(),{clipShape:this._getClipShape(o)}),this._finished=n.end===o.getData().count()},r.prototype.updateTransform=function(n,o,s){var l=n.getData();if(this.group.dirty(),!this._finished||l.count()>1e4)return{update:!0};var u=pointsLayout("").reset(n,o,s);u.progress&&u.progress({start:0,end:l.count(),count:l.count()},l),this._symbolDraw.updateLayout(l)},r.prototype.eachRendered=function(n){this._symbolDraw&&this._symbolDraw.eachRendered(n)},r.prototype._getClipShape=function(n){if(n.get("clip",!0)){var o=n.coordinateSystem;return o&&o.getArea&&o.getArea(.1)}},r.prototype._updateSymbolDraw=function(n,o){var s=this._symbolDraw,l=o.pipelineContext,u=l.large;return(!s||u!==this._isLargeDraw)&&(s&&s.remove(),s=this._symbolDraw=u?new LargeSymbolDraw:new SymbolDraw,this._isLargeDraw=u,this.group.removeAll()),this.group.add(s.group),s},r.prototype.remove=function(n,o){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},r.prototype.dispose=function(){},r.type="scatter",r}(ChartView),OUTER_BOUNDS_DEFAULT={left:0,right:0,top:0,bottom:0},OUTER_BOUNDS_CLAMP_DEFAULT=["25%","25%"],GridModel=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.mergeDefaultAndTheme=function(n,o){var s=getLayoutParams(n.outerBounds);a.prototype.mergeDefaultAndTheme.apply(this,arguments),s&&n.outerBounds&&mergeLayoutParam(n.outerBounds,s)},r.prototype.mergeOption=function(n,o){a.prototype.mergeOption.apply(this,arguments),this.option.outerBounds&&n.outerBounds&&mergeLayoutParam(this.option.outerBounds,n.outerBounds)},r.type="grid",r.dependencies=["xAxis","yAxis"],r.layoutMode="box",r.defaultOption={show:!1,z:0,left:"15%",top:65,right:"10%",bottom:80,containLabel:!1,outerBoundsMode:"auto",outerBounds:OUTER_BOUNDS_DEFAULT,outerBoundsContain:"all",outerBoundsClampWidth:OUTER_BOUNDS_CLAMP_DEFAULT[0],outerBoundsClampHeight:OUTER_BOUNDS_CLAMP_DEFAULT[1],backgroundColor:tokens.color.transparent,borderWidth:1,borderColor:tokens.color.neutral30},r}(ComponentModel),CartesianAxisModel=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},r.type="cartesian2dAxis",r}(ComponentModel);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:tokens.color.axisLine,width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15],breakLine:!0},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12,color:tokens.color.axisLabel,textMargin:[0,3]},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:tokens.color.axisSplitLine,width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:[tokens.color.backgroundTint,tokens.color.backgroundTransparent]}},breakArea:{show:!0,itemStyle:{color:tokens.color.neutral00,borderColor:tokens.color.border,borderWidth:1,borderType:[3,3],opacity:.6},zigzagAmplitude:4,zigzagMinSpan:4,zigzagMaxSpan:20,zigzagZ:100,expandOnClick:!0},breakLabelLayout:{moveOverlap:"auto"}},categoryAxis=merge({boundaryGap:!0,deduplication:null,jitter:0,jitterOverlap:!0,jitterMargin:2,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto",show:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:tokens.color.axisMinorSplitLine,width:1}}},defaultOption$1),timeAxis=merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),logAxis=defaults({logBase:10},valueAxis);const axisDefault={category:categoryAxis,value:valueAxis,time:timeAxis,log:logAxis};var AXIS_TYPES={value:1,category:1,time:1,log:1},_impl=null;function registerAxisBreakHelperImpl(a){_impl||(_impl=a)}function getAxisBreakHelper(){return _impl}function axisModelCreator(a,r,n,o){each$f(AXIS_TYPES,function(s,l){var u=merge(merge({},axisDefault[l],!0),o,!0),c=function(f){__extends(d,f);function d(){var v=f!==null&&f.apply(this,arguments)||this;return v.type=r+"Axis."+l,v}return d.prototype.mergeDefaultAndTheme=function(v,g){var y=fetchLayoutMode(this),_=y?getLayoutParams(v):{},S=g.getTheme();merge(v,S.get(l+"Axis")),merge(v,this.getDefaultOption()),v.type=getAxisType(v),y&&mergeLayoutParam(v,_,y)},d.prototype.optionUpdated=function(){var v=this.option;v.type==="category"&&(this.__ordinalMeta=OrdinalMeta.createByAxisModel(this))},d.prototype.getCategories=function(v){var g=this.option;if(g.type==="category")return v?g.data:this.__ordinalMeta.categories},d.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},d.prototype.updateAxisBreaks=function(v){var g=getAxisBreakHelper();return g?g.updateModelAxisBreak(this,v):{breaks:[]}},d.type=r+"Axis."+l,d.defaultOption=u,d}(n);a.registerComponentModel(c)}),a.registerSubTypeDefaulter(r+"Axis",getAxisType)}function getAxisType(a){return a.type||(a.data?"category":"value")}var Cartesian=function(){function a(r){this.type="cartesian",this._dimList=[],this._axes={},this.name=r||""}return a.prototype.getAxis=function(r){return this._axes[r]},a.prototype.getAxes=function(){return map$1(this._dimList,function(r){return this._axes[r]},this)},a.prototype.getAxesByScale=function(r){return r=r.toLowerCase(),filter(this.getAxes(),function(n){return n.scale.type===r})},a.prototype.addAxis=function(r){var n=r.dim;this._axes[n]=r,this._dimList.push(n)},a}(),cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(a){return(a.type==="interval"||a.type==="time")&&!a.hasBreaks()}var Cartesian2D=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type="cartesian2d",n.dimensions=cartesian2DDimensions,n}return r.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var n=this.getAxis("x").scale,o=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(n)||!canCalculateAffineTransform(o))){var s=n.getExtent(),l=o.getExtent(),u=this.dataToPoint([s[0],l[0]]),c=this.dataToPoint([s[1],l[1]]),f=s[1]-s[0],d=l[1]-l[0];if(!(!f||!d)){var v=(c[0]-u[0])/f,g=(c[1]-u[1])/d,y=u[0]-s[0]*v,_=u[1]-l[0]*g,S=this._transform=[v,0,0,g,y,_];this._invTransform=invert([],S)}}},r.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},r.prototype.containPoint=function(n){var o=this.getAxis("x"),s=this.getAxis("y");return o.contain(o.toLocalCoord(n[0]))&&s.contain(s.toLocalCoord(n[1]))},r.prototype.containData=function(n){return this.getAxis("x").containData(n[0])&&this.getAxis("y").containData(n[1])},r.prototype.containZone=function(n,o){var s=this.dataToPoint(n),l=this.dataToPoint(o),u=this.getArea(),c=new BoundingRect(s[0],s[1],l[0]-s[0],l[1]-s[1]);return u.intersect(c)},r.prototype.dataToPoint=function(n,o,s){s=s||[];var l=n[0],u=n[1];if(this._transform&&l!=null&&isFinite(l)&&u!=null&&isFinite(u))return applyTransform$1(s,n,this._transform);var c=this.getAxis("x"),f=this.getAxis("y");return s[0]=c.toGlobalCoord(c.dataToCoord(l,o)),s[1]=f.toGlobalCoord(f.dataToCoord(u,o)),s},r.prototype.clampData=function(n,o){var s=this.getAxis("x").scale,l=this.getAxis("y").scale,u=s.getExtent(),c=l.getExtent(),f=s.parse(n[0]),d=l.parse(n[1]);return o=o||[],o[0]=Math.min(Math.max(Math.min(u[0],u[1]),f),Math.max(u[0],u[1])),o[1]=Math.min(Math.max(Math.min(c[0],c[1]),d),Math.max(c[0],c[1])),o},r.prototype.pointToData=function(n,o,s){if(s=s||[],this._invTransform)return applyTransform$1(s,n,this._invTransform);var l=this.getAxis("x"),u=this.getAxis("y");return s[0]=l.coordToData(l.toLocalCoord(n[0]),o),s[1]=u.coordToData(u.toLocalCoord(n[1]),o),s},r.prototype.getOtherAxis=function(n){return this.getAxis(n.dim==="x"?"y":"x")},r.prototype.getArea=function(n){n=n||0;var o=this.getAxis("x").getGlobalExtent(),s=this.getAxis("y").getGlobalExtent(),l=Math.min(o[0],o[1])-n,u=Math.min(s[0],s[1])-n,c=Math.max(o[0],o[1])-l+n,f=Math.max(s[0],s[1])-u+n;return new BoundingRect(l,u,c,f)},r}(Cartesian),Axis2D=function(a){__extends(r,a);function r(n,o,s,l,u){var c=a.call(this,n,o,s)||this;return c.index=0,c.type=l||"value",c.position=u||"bottom",c}return r.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},r.prototype.getGlobalExtent=function(n){var o=this.getExtent();return o[0]=this.toGlobalCoord(o[0]),o[1]=this.toGlobalCoord(o[1]),n&&o[0]>o[1]&&o.reverse(),o},r.prototype.pointToData=function(n,o){return this.coordToData(this.toLocalCoord(n[this.dim==="x"?0:1]),o)},r.prototype.setCategorySortInfo=function(n){if(this.type!=="category")return!1;this.model.option.categorySortInfo=n,this.scale.setSortInfo(n)},r}(Axis),AXIS_BREAK_EXPAND_ACTION_TYPE="expandAxisBreak",AXIS_BREAK_COLLAPSE_ACTION_TYPE="collapseAxisBreak",AXIS_BREAK_TOGGLE_ACTION_TYPE="toggleAxisBreak",AXIS_BREAK_CHANGED_EVENT_TYPE="axisbreakchanged",expandAxisBreakActionInfo={type:AXIS_BREAK_EXPAND_ACTION_TYPE,event:AXIS_BREAK_CHANGED_EVENT_TYPE,update:"update",refineEvent:refineAxisBreakChangeEvent},collapseAxisBreakActionInfo={type:AXIS_BREAK_COLLAPSE_ACTION_TYPE,event:AXIS_BREAK_CHANGED_EVENT_TYPE,update:"update",refineEvent:refineAxisBreakChangeEvent},toggleAxisBreakActionInfo={type:AXIS_BREAK_TOGGLE_ACTION_TYPE,event:AXIS_BREAK_CHANGED_EVENT_TYPE,update:"update",refineEvent:refineAxisBreakChangeEvent};function refineAxisBreakChangeEvent(a,r,n,o){var s=[];return each$f(a,function(l){s=s.concat(l.eventBreaks)}),{eventContent:{breaks:s}}}function registerAction(a){a.registerAction(expandAxisBreakActionInfo,r),a.registerAction(collapseAxisBreakActionInfo,r),a.registerAction(toggleAxisBreakActionInfo,r);function r(n,o){var s=[],l=parseFinder$1(o,n);function u(c,f){each$f(l[c],function(d){var v=d.updateAxisBreaks(n);each$f(v.breaks,function(g){var y;s.push(defaults((y={},y[f]=d.componentIndex,y),g))})})}return u("xAxisModels","xAxisIndex"),u("yAxisModels","yAxisIndex"),u("singleAxisModels","singleAxisIndex"),{eventBreaks:s}}}var PI$3=Math.PI,DEFAULT_CENTER_NAME_MARGIN_LEVELS=[[1,2,1,2],[5,3,5,3],[8,3,8,3]],DEFAULT_ENDS_NAME_MARGIN_LEVELS=[[0,1,0,1],[0,3,0,3],[0,3,0,3]],getLabelInner=makeInner(),getTickInner=makeInner(),AxisBuilderSharedContext=function(){function a(r){this.recordMap={},this.resolveAxisNameOverlap=r}return a.prototype.ensureRecord=function(r){var n=r.axis.dim,o=r.componentIndex,s=this.recordMap,l=s[n]||(s[n]=[]);return l[o]||(l[o]={ready:{}})},a}();function resetOverlapRecordToShared(a,r,n,o){var s=n.axis,l=r.ensureRecord(n),u=[],c,f=hasAxisName(a.axisName)&&isNameLocationCenter(a.nameLocation);each$f(o,function(S){var b=ensureLabelLayoutWithGeometry(S);if(!(!b||b.label.ignore)){u.push(b);var x=l.transGroup;f&&(x.transform?invert(_stTransTmp,x.transform):identity(_stTransTmp),b.transform&&mul(_stTransTmp,_stTransTmp,b.transform),BoundingRect.copy(_stLabelRectTmp,b.localRect),_stLabelRectTmp.applyTransform(_stTransTmp),c?c.union(_stLabelRectTmp):BoundingRect.copy(c=new BoundingRect(0,0,0,0),_stLabelRectTmp))}});var d=Math.abs(l.dirVec.x)>.1?"x":"y",v=l.transGroup[d];if(u.sort(function(S,b){return Math.abs(S.label[d]-v)-Math.abs(b.label[d]-v)}),f&&c){var g=s.getExtent(),y=Math.min(g[0],g[1]),_=Math.max(g[0],g[1])-y;c.union(new BoundingRect(y,0,_,1))}l.stOccupiedRect=c,l.labelInfoList=u}var _stTransTmp=create$1(),_stLabelRectTmp=new BoundingRect(0,0,0,0),resolveAxisNameOverlapDefault=function(a,r,n,o,s,l){if(isNameLocationCenter(a.nameLocation)){var u=l.stOccupiedRect;u&&moveIfOverlap(computeLabelGeometry2({},u,l.transGroup.transform),o,s)}else moveIfOverlapByLinearLabels(l.labelInfoList,l.dirVec,o,s)};function moveIfOverlap(a,r,n){var o=new Point;labelIntersect(a,r,o,{direction:Math.atan2(n.y,n.x),bidirectional:!1,touchThreshold:.05})&&labelLayoutApplyTranslation(r,o)}function moveIfOverlapByLinearLabels(a,r,n,o){for(var s=Point.dot(o,r)>=0,l=0,u=a.length;l<u;l++){var c=a[s?l:u-1-l];c.label.ignore||moveIfOverlap(c,n,o)}}var AxisBuilder=function(){function a(r,n,o,s){this.group=new Group$3,this._axisModel=r,this._api=n,this._local={},this._shared=s||new AxisBuilderSharedContext(resolveAxisNameOverlapDefault),this._resetCfgDetermined(o)}return a.prototype.updateCfg=function(r){var n=this._cfg.raw;n.position=r.position,n.labelOffset=r.labelOffset,this._resetCfgDetermined(n)},a.prototype.__getRawCfg=function(){return this._cfg.raw},a.prototype._resetCfgDetermined=function(r){var n=this._axisModel,o=n.getDefaultOption?n.getDefaultOption():{},s=retrieve2(r.axisName,n.get("name")),l=n.get("nameMoveOverlap");(l==null||l==="auto")&&(l=retrieve2(r.defaultNameMoveOverlap,!0));var u={raw:r,position:r.position,rotation:r.rotation,nameDirection:retrieve2(r.nameDirection,1),tickDirection:retrieve2(r.tickDirection,1),labelDirection:retrieve2(r.labelDirection,1),labelOffset:retrieve2(r.labelOffset,0),silent:retrieve2(r.silent,!0),axisName:s,nameLocation:retrieve3(n.get("nameLocation"),o.nameLocation,"end"),shouldNameMoveOverlap:hasAxisName(s)&&l,optionHideOverlap:n.get(["axisLabel","hideOverlap"]),showMinorTicks:n.get(["minorTick","show"])};this._cfg=u;var c=new Group$3({x:u.position[0],y:u.position[1],rotation:u.rotation});c.updateTransform(),this._transformGroup=c;var f=this._shared.ensureRecord(n);f.transGroup=this._transformGroup,f.dirVec=new Point(Math.cos(-u.rotation),Math.sin(-u.rotation))},a.prototype.build=function(r,n){var o=this;return r||(r={axisLine:!0,axisTickLabelEstimate:!1,axisTickLabelDetermine:!0,axisName:!0}),each$f(AXIS_BUILDER_AXIS_PART_NAMES,function(s){r[s]&&builders[s](o._cfg,o._local,o._shared,o._axisModel,o.group,o._transformGroup,o._api,n||{})}),this},a.innerTextLayout=function(r,n,o){var s=remRadian(n-r),l,u;return isRadianAroundZero(s)?(u=o>0?"top":"bottom",l="center"):isRadianAroundZero(s-PI$3)?(u=o>0?"bottom":"top",l="center"):(u="middle",s>0&&s<PI$3?l=o>0?"right":"left":l=o>0?"left":"right"),{rotation:s,textAlign:l,textVerticalAlign:u}},a.makeAxisEventDataBase=function(r){var n={componentType:r.mainType,componentIndex:r.componentIndex};return n[r.mainType+"Index"]=r.componentIndex,n},a.isLabelSilent=function(r){var n=r.get("tooltip");return r.get("silent")||!(r.get("triggerEvent")||n&&n.show)},a}(),AXIS_BUILDER_AXIS_PART_NAMES=["axisLine","axisTickLabelEstimate","axisTickLabelDetermine","axisName"],builders={axisLine:function(a,r,n,o,s,l,u){var c=o.get(["axisLine","show"]);if(c==="auto"&&(c=!0,a.raw.axisLineAutoShow!=null&&(c=!!a.raw.axisLineAutoShow)),!!c){var f=o.axis.getExtent(),d=l.transform,v=[f[0],0],g=[f[1],0],y=v[0]>g[0];d&&(applyTransform$1(v,v,d),applyTransform$1(g,g,d));var _=extend({lineCap:"round"},o.getModel(["axisLine","lineStyle"]).getLineStyle()),S={strokeContainThreshold:a.raw.strokeContainThreshold||5,silent:!0,z2:1,style:_};if(o.get(["axisLine","breakLine"])&&o.axis.scale.hasBreaks())getAxisBreakHelper().buildAxisBreakLine(o,s,l,S);else{var b=new Line$1(extend({shape:{x1:v[0],y1:v[1],x2:g[0],y2:g[1]}},S));subPixelOptimizeLine(b.shape,b.style.lineWidth),b.anid="line",s.add(b)}var x=o.get(["axisLine","symbol"]);if(x!=null){var T=o.get(["axisLine","symbolSize"]);isString(x)&&(x=[x,x]),(isString(T)||isNumber(T))&&(T=[T,T]);var A=normalizeSymbolOffset(o.get(["axisLine","symbolOffset"])||0,T),w=T[0],C=T[1];each$f([{rotate:a.rotation+Math.PI/2,offset:A[0],r:0},{rotate:a.rotation-Math.PI/2,offset:A[1],r:Math.sqrt((v[0]-g[0])*(v[0]-g[0])+(v[1]-g[1])*(v[1]-g[1]))}],function(E,P){if(x[P]!=="none"&&x[P]!=null){var I=createSymbol$1(x[P],-w/2,-C/2,w,C,_.stroke,!0),M=E.r+E.offset,R=y?g:v;I.attr({rotation:E.rotate,x:R[0]+M*Math.cos(a.rotation),y:R[1]-M*Math.sin(a.rotation),silent:!0,z2:11}),s.add(I)}})}}},axisTickLabelEstimate:function(a,r,n,o,s,l,u,c){var f=dealLastTickLabelResultReusable(r,s,c);f&&layOutAxisTickLabel(a,r,n,o,s,l,u,AxisTickLabelComputingKind.estimate)},axisTickLabelDetermine:function(a,r,n,o,s,l,u,c){var f=dealLastTickLabelResultReusable(r,s,c);f&&layOutAxisTickLabel(a,r,n,o,s,l,u,AxisTickLabelComputingKind.determine);var d=buildAxisMajorTicks(a,s,l,o);syncLabelIgnoreToMajorTicks(a,r.labelLayoutList,d),buildAxisMinorTicks(a,s,l,o,a.tickDirection)},axisName:function(a,r,n,o,s,l,u,c){var f=n.ensureRecord(o);r.nameEl&&(s.remove(r.nameEl),r.nameEl=f.nameLayout=f.nameLocation=null);var d=a.axisName;if(hasAxisName(d)){var v=a.nameLocation,g=a.nameDirection,y=o.getModel("nameTextStyle"),_=o.get("nameGap")||0,S=o.axis.getExtent(),b=o.axis.inverse?-1:1,x=new Point(0,0),T=new Point(0,0);v==="start"?(x.x=S[0]-b*_,T.x=-b):v==="end"?(x.x=S[1]+b*_,T.x=b):(x.x=(S[0]+S[1])/2,x.y=a.labelOffset+g*_,T.y=g);var A=create$1();T.transform(rotate(A,A,a.rotation));var w=o.get("nameRotate");w!=null&&(w=w*PI$3/180);var C,E;isNameLocationCenter(v)?C=AxisBuilder.innerTextLayout(a.rotation,w??a.rotation,g):(C=endTextLayout(a.rotation,v,w||0,S),E=a.raw.axisNameAvailableWidth,E!=null&&(E=Math.abs(E/Math.sin(C.rotation)),!isFinite(E)&&(E=null)));var P=y.getFont(),I=o.get("nameTruncate",!0)||{},M=I.ellipsis,R=retrieve(a.raw.nameTruncateMaxWidth,I.maxWidth,E),O=c.nameMarginLevel||0,$=new ZRText({x:x.x,y:x.y,rotation:C.rotation,silent:AxisBuilder.isLabelSilent(o),style:createTextStyle(y,{text:d,font:P,overflow:"truncate",width:R,ellipsis:M,fill:y.getTextColor()||o.get(["axisLine","lineStyle","color"]),align:y.get("align")||C.textAlign,verticalAlign:y.get("verticalAlign")||C.textVerticalAlign}),z2:1});if(setTooltipConfig({el:$,componentModel:o,itemName:d}),$.__fullText=d,$.anid="name",o.get("triggerEvent")){var B=AxisBuilder.makeAxisEventDataBase(o);B.targetType="axisName",B.name=d,getECData($).eventData=B}l.add($),$.updateTransform(),r.nameEl=$;var F=f.nameLayout=ensureLabelLayoutWithGeometry({label:$,priority:$.z2,defaultAttr:{ignore:$.ignore},marginDefault:isNameLocationCenter(v)?DEFAULT_CENTER_NAME_MARGIN_LEVELS[O]:DEFAULT_ENDS_NAME_MARGIN_LEVELS[O]});if(f.nameLocation=v,s.add($),$.decomposeTransform(),a.shouldNameMoveOverlap&&F){var z=n.ensureRecord(o);n.resolveAxisNameOverlap(a,n,o,F,T,z)}}}};function layOutAxisTickLabel(a,r,n,o,s,l,u,c){axisLabelBuildResultExists(r)||buildAxisLabel(a,r,s,c,o,u);var f=r.labelLayoutList;updateAxisLabelChangableProps(a,o,f,l),adjustBreakLabels(o,a.rotation,f);var d=a.optionHideOverlap;fixMinMaxLabelShow(o,f,d),d&&hideOverlap(filter(f,function(v){return v&&!v.label.ignore})),resetOverlapRecordToShared(a,n,o,f)}function endTextLayout(a,r,n,o){var s=remRadian(n-a),l,u,c=o[0]>o[1],f=r==="start"&&!c||r!=="start"&&c;return isRadianAroundZero(s-PI$3/2)?(u=f?"bottom":"top",l="center"):isRadianAroundZero(s-PI$3*1.5)?(u=f?"top":"bottom",l="center"):(u="middle",s<PI$3*1.5&&s>PI$3/2?l=f?"left":"right":l=f?"right":"left"),{rotation:s,textAlign:l,textVerticalAlign:u}}function fixMinMaxLabelShow(a,r,n){if(shouldShowAllLabels(a.axis))return;function o(c,f,d){var v=ensureLabelLayoutWithGeometry(r[f]),g=ensureLabelLayoutWithGeometry(r[d]);if(!(!v||!g)){if(c===!1||v.suggestIgnore){ignoreEl(v.label);return}if(g.suggestIgnore){ignoreEl(g.label);return}var y=.1;if(!n){var _=[0,0,0,0];v=newLabelLayoutWithGeometry({marginForce:_},v),g=newLabelLayoutWithGeometry({marginForce:_},g)}labelIntersect(v,g,null,{touchThreshold:y})&&ignoreEl(c?g.label:v.label)}}var s=a.get(["axisLabel","showMinLabel"]),l=a.get(["axisLabel","showMaxLabel"]),u=r.length;o(s,0,1),o(l,u-1,u-2)}function syncLabelIgnoreToMajorTicks(a,r,n){a.showMinorTicks||each$f(r,function(o){if(o&&o.label.ignore)for(var s=0;s<n.length;s++){var l=n[s],u=getTickInner(l),c=getLabelInner(o.label);if(u.tickValue!=null&&!u.onBand&&u.tickValue===c.tickValue){ignoreEl(l);return}}})}function ignoreEl(a){a&&(a.ignore=!0)}function createTicks(a,r,n,o,s){for(var l=[],u=[],c=[],f=0;f<a.length;f++){var d=a[f].coord;u[0]=d,u[1]=0,c[0]=d,c[1]=n,r&&(applyTransform$1(u,u,r),applyTransform$1(c,c,r));var v=new Line$1({shape:{x1:u[0],y1:u[1],x2:c[0],y2:c[1]},style:o,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(v.shape,v.style.lineWidth),v.anid=s+"_"+a[f].tickValue,l.push(v);var g=getTickInner(v);g.onBand=!!a[f].onBand,g.tickValue=a[f].tickValue}return l}function buildAxisMajorTicks(a,r,n,o){var s=o.axis,l=o.getModel("axisTick"),u=l.get("show");if(u==="auto"&&(u=!0,a.raw.axisTickAutoShow!=null&&(u=!!a.raw.axisTickAutoShow)),!u||s.scale.isBlank())return[];for(var c=l.getModel("lineStyle"),f=a.tickDirection*l.get("length"),d=s.getTicksCoords(),v=createTicks(d,n.transform,f,defaults(c.getLineStyle(),{stroke:o.get(["axisLine","lineStyle","color"])}),"ticks"),g=0;g<v.length;g++)r.add(v[g]);return v}function buildAxisMinorTicks(a,r,n,o,s){var l=o.axis,u=o.getModel("minorTick");if(!(!a.showMinorTicks||l.scale.isBlank())){var c=l.getMinorTicksCoords();if(c.length)for(var f=u.getModel("lineStyle"),d=s*u.get("length"),v=defaults(f.getLineStyle(),defaults(o.getModel("axisTick").getLineStyle(),{stroke:o.get(["axisLine","lineStyle","color"])})),g=0;g<c.length;g++)for(var y=createTicks(c[g],n.transform,d,v,"minorticks_"+g),_=0;_<y.length;_++)r.add(y[_])}}function dealLastTickLabelResultReusable(a,r,n){if(axisLabelBuildResultExists(a)){var o=a.axisLabelsCreationContext,s=o.out.noPxChangeTryDetermine;if(n.noPxChange){for(var l=!0,u=0;u<s.length;u++)l=l&&s[u]();if(l)return!1}s.length&&(r.remove(a.labelGroup),axisLabelBuildResultSet(a,null,null,null))}return!0}function buildAxisLabel(a,r,n,o,s,l){var u=s.axis,c=retrieve(a.raw.axisLabelShow,s.get(["axisLabel","show"])),f=new Group$3;n.add(f);var d=createAxisLabelsComputingContext(o);if(!c||u.scale.isBlank()){axisLabelBuildResultSet(r,[],f,d);return}var v=s.getModel("axisLabel"),g=u.getViewLabels(d),y=(retrieve(a.raw.labelRotate,v.get("rotate"))||0)*PI$3/180,_=AxisBuilder.innerTextLayout(a.rotation,y,a.labelDirection),S=s.getCategories&&s.getCategories(!0),b=[],x=s.get("triggerEvent"),T=1/0,A=-1/0;each$f(g,function(C,E){var P,I=u.scale.type==="ordinal"?u.scale.getRawOrdinalNumber(C.tickValue):C.tickValue,M=C.formattedLabel,R=C.rawLabel,O=v;if(S&&S[I]){var $=S[I];isObject$3($)&&$.textStyle&&(O=new Model($.textStyle,v,s.ecModel))}var B=O.getTextColor()||s.get(["axisLine","lineStyle","color"]),F=O.getShallow("align",!0)||_.textAlign,z=retrieve2(O.getShallow("alignMinLabel",!0),F),G=retrieve2(O.getShallow("alignMaxLabel",!0),F),D=O.getShallow("verticalAlign",!0)||O.getShallow("baseline",!0)||_.textVerticalAlign,V=retrieve2(O.getShallow("verticalAlignMinLabel",!0),D),L=retrieve2(O.getShallow("verticalAlignMaxLabel",!0),D),N=10+(((P=C.time)===null||P===void 0?void 0:P.level)||0);T=Math.min(T,N),A=Math.max(A,N);var U=new ZRText({x:0,y:0,rotation:0,silent:AxisBuilder.isLabelSilent(s),z2:N,style:createTextStyle(O,{text:M,align:E===0?z:E===g.length-1?G:F,verticalAlign:E===0?V:E===g.length-1?L:D,fill:isFunction(B)?B(u.type==="category"?R:u.type==="value"?I+"":I,E):B})});U.anid="label_"+I;var H=getLabelInner(U);if(H.break=C.break,H.tickValue=I,H.layoutRotation=_.rotation,setTooltipConfig({el:U,componentModel:s,itemName:M,formatterParamsExtra:{isTruncated:function(){return U.isTruncated},value:R,tickIndex:E}}),x){var q=AxisBuilder.makeAxisEventDataBase(s);q.targetType="axisLabel",q.value=R,q.tickIndex=E,C.break&&(q.break={start:C.break.parsedBreak.vmin,end:C.break.parsedBreak.vmax}),u.type==="category"&&(q.dataIndex=I),getECData(U).eventData=q,C.break&&addBreakEventHandler(s,l,U,C.break)}b.push(U),f.add(U)});var w=map$1(b,function(C){return{label:C,priority:getLabelInner(C).break?C.z2+(A-T+1):C.z2,defaultAttr:{ignore:C.ignore}}});axisLabelBuildResultSet(r,w,f,d)}function axisLabelBuildResultExists(a){return!!a.labelLayoutList}function axisLabelBuildResultSet(a,r,n,o){a.labelLayoutList=r,a.labelGroup=n,a.axisLabelsCreationContext=o}function updateAxisLabelChangableProps(a,r,n,o){var s=r.get(["axisLabel","margin"]);each$f(n,function(l,u){var c=ensureLabelLayoutWithGeometry(l);if(c){var f=c.label,d=getLabelInner(f);c.suggestIgnore=f.ignore,f.ignore=!1,copyTransform(_tmpLayoutEl,_tmpLayoutElReset),_tmpLayoutEl.x=r.axis.dataToCoord(d.tickValue),_tmpLayoutEl.y=a.labelOffset+a.labelDirection*s,_tmpLayoutEl.rotation=d.layoutRotation,o.add(_tmpLayoutEl),_tmpLayoutEl.updateTransform(),o.remove(_tmpLayoutEl),_tmpLayoutEl.decomposeTransform(),copyTransform(f,_tmpLayoutEl),f.markRedraw(),setLabelLayoutDirty(c,!0),ensureLabelLayoutWithGeometry(c)}})}var _tmpLayoutEl=new Rect$2,_tmpLayoutElReset=new Rect$2;function hasAxisName(a){return!!a}function addBreakEventHandler(a,r,n,o){n.on("click",function(s){var l={type:AXIS_BREAK_EXPAND_ACTION_TYPE,breaks:[{start:o.parsedBreak.breakOption.start,end:o.parsedBreak.breakOption.end}]};l[a.axis.dim+"AxisIndex"]=a.componentIndex,r.dispatchAction(l)})}function adjustBreakLabels(a,r,n){var o=getScaleBreakHelper();if(o){var s=o.retrieveAxisBreakPairs(n,function(u){return u&&getLabelInner(u.label).break},!0),l=a.get(["breakLabelLayout","moveOverlap"],!0);(l===!0||l==="auto")&&each$f(s,function(u){getAxisBreakHelper().adjustBreakLabelPair(a.axis.inverse,r,[ensureLabelLayoutWithGeometry(n[u[0]]),ensureLabelLayoutWithGeometry(n[u[1]])])})}}function layout$1(a,r,n){n=n||{};var o=r.axis,s={},l=o.getAxesOnZeroOf()[0],u=o.position,c=l?"onZero":u,f=o.dim,d=[a.x,a.x+a.width,a.y,a.y+a.height],v={left:0,right:1,top:0,bottom:1,onZero:2},g=r.get("offset")||0,y=f==="x"?[d[2]-g,d[3]+g]:[d[0]-g,d[1]+g];if(l){var _=l.toGlobalCoord(l.dataToCoord(0));y[v.onZero]=Math.max(Math.min(_,y[1]),y[0])}s.position=[f==="y"?y[v[c]]:d[0],f==="x"?y[v[c]]:d[3]],s.rotation=Math.PI/2*(f==="x"?0:1);var S={top:-1,bottom:1,left:-1,right:1};s.labelDirection=s.tickDirection=s.nameDirection=S[u],s.labelOffset=l?y[v[u]]-y[v.onZero]:0,r.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),retrieve(n.labelInside,r.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var b=r.get(["axisLabel","rotate"]);return s.labelRotate=c==="top"?-b:b,s.z2=1,s}function isCartesian2DInjectedAsDataCoordSys(a){return a.coordinateSystem&&a.coordinateSystem.type==="cartesian2d"}function findAxisModels(a){var r={xAxisModel:null,yAxisModel:null};return each$f(r,function(n,o){var s=o.replace(/Model$/,""),l=a.getReferringComponents(s,SINGLE_REFERRING).models[0];r[o]=l}),r}function createCartesianAxisViewCommonPartBuilder(a,r,n,o,s,l){for(var u=layout$1(a,n),c=!1,f=!1,d=0;d<r.length;d++)isIntervalOrLogScale(r[d].getOtherAxis(n.axis).scale)&&(c=f=!0,n.axis.type==="category"&&n.axis.onBand&&(f=!1));return u.axisLineAutoShow=c,u.axisTickAutoShow=f,u.defaultNameMoveOverlap=l,new AxisBuilder(n,o,u,s)}function updateCartesianAxisViewCommonPartBuilder(a,r,n){var o=layout$1(r,n);a.updateCfg(o)}function alignScaleTicks(a,r,n){var o=IntervalScale.prototype,s=o.getTicks.call(n),l=o.getTicks.call(n,{expandToNicedExtent:!0}),u=s.length-1,c=o.getInterval.call(n),f=getScaleExtent(a,r),d=f.extent,v=f.fixMin,g=f.fixMax;a.type==="log"&&(d=logTransform(a.base,d,!0)),a.setBreaksFromOption(retrieveAxisBreaksOption(r)),a.setExtent(d[0],d[1]),a.calcNiceExtent({splitNumber:u,fixMin:v,fixMax:g});var y=o.getExtent.call(a);v&&(d[0]=y[0]),g&&(d[1]=y[1]);var _=o.getInterval.call(a),S=d[0],b=d[1];if(v&&g)_=(b-S)/u;else if(v)for(b=d[0]+_*u;b<d[1]&&isFinite(b)&&isFinite(d[1]);)_=increaseInterval(_),b=d[0]+_*u;else if(g)for(S=d[1]-_*u;S>d[0]&&isFinite(S)&&isFinite(d[0]);)_=increaseInterval(_),S=d[1]-_*u;else{var x=a.getTicks().length-1;x>u&&(_=increaseInterval(_));var T=_*u;b=Math.ceil(d[1]/_)*_,S=round$4(b-T),S<0&&d[0]>=0?(S=0,b=round$4(T)):b>0&&d[1]<=0&&(b=0,S=-round$4(T))}var A=(s[0].value-l[0].value)/c,w=(s[u].value-l[u].value)/c;o.setExtent.call(a,S+_*A,b+_*w),o.setInterval.call(a,_),(A||w)&&o.setNiceExtent.call(a,S+_,b-_)}var XY_TO_MARGIN_IDX=[[3,1],[0,2]],Grid=function(){function a(r,n,o){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(r,n,o),this.model=r}return a.prototype.getRect=function(){return this._rect},a.prototype.update=function(r,n){var o=this._axesMap;this._updateScale(r,this.model);function s(u){var c,f=keys(u),d=f.length;if(d){for(var v=[],g=d-1;g>=0;g--){var y=+f[g],_=u[y],S=_.model,b=_.scale;isIntervalOrLogScale(b)&&S.get("alignTicks")&&S.get("interval")==null?v.push(_):(niceScaleExtent(b,S),isIntervalOrLogScale(b)&&(c=_))}v.length&&(c||(c=v.pop(),niceScaleExtent(c.scale,c.model)),each$f(v,function(x){alignScaleTicks(x.scale,x.model,c.scale)}))}}s(o.x),s(o.y);var l={};each$f(o.x,function(u){fixAxisOnZero(o,"y",u,l)}),each$f(o.y,function(u){fixAxisOnZero(o,"x",u,l)}),this.resize(this.model,n)},a.prototype.resize=function(r,n,o){var s=createBoxLayoutReference(r,n),l=this._rect=getLayoutRect(r.getBoxLayoutParams(),s.refContainer),u=this._axesMap,c=this._coordsList,f=r.get("containLabel");if(updateAllAxisExtentTransByGridRect(u,l),!o){var d=createAxisBiulders(l,c,u,f,n),v=void 0;if(f)legacyLayOutGridByContainLabel?(legacyLayOutGridByContainLabel(this._axesList,l),updateAllAxisExtentTransByGridRect(u,l)):v=layOutGridByOuterBounds(l.clone(),"axisLabel",null,l,u,d,s);else{var g=prepareOuterBounds(r,l,s),y=g.outerBoundsRect,_=g.parsedOuterBoundsContain,S=g.outerBoundsClamp;y&&(v=layOutGridByOuterBounds(y,_,S,l,u,d,s))}createOrUpdateAxesView(l,u,AxisTickLabelComputingKind.determine,null,v,s)}each$f(this._coordsList,function(b){b.calcAffineTransform()})},a.prototype.getAxis=function(r,n){var o=this._axesMap[r];if(o!=null)return o[n||0]},a.prototype.getAxes=function(){return this._axesList.slice()},a.prototype.getCartesian=function(r,n){if(r!=null&&n!=null){var o="x"+r+"y"+n;return this._coordsMap[o]}isObject$3(r)&&(n=r.yAxisIndex,r=r.xAxisIndex);for(var s=0,l=this._coordsList;s<l.length;s++)if(l[s].getAxis("x").index===r||l[s].getAxis("y").index===n)return l[s]},a.prototype.getCartesians=function(){return this._coordsList.slice()},a.prototype.convertToPixel=function(r,n,o){var s=this._findConvertTarget(n);return s.cartesian?s.cartesian.dataToPoint(o):s.axis?s.axis.toGlobalCoord(s.axis.dataToCoord(o)):null},a.prototype.convertFromPixel=function(r,n,o){var s=this._findConvertTarget(n);return s.cartesian?s.cartesian.pointToData(o):s.axis?s.axis.coordToData(s.axis.toLocalCoord(o)):null},a.prototype._findConvertTarget=function(r){var n=r.seriesModel,o=r.xAxisModel||n&&n.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],s=r.yAxisModel||n&&n.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],l=r.gridModel,u=this._coordsList,c,f;if(n)c=n.coordinateSystem,indexOf(u,c)<0&&(c=null);else if(o&&s)c=this.getCartesian(o.componentIndex,s.componentIndex);else if(o)f=this.getAxis("x",o.componentIndex);else if(s)f=this.getAxis("y",s.componentIndex);else if(l){var d=l.coordinateSystem;d===this&&(c=this._coordsList[0])}return{cartesian:c,axis:f}},a.prototype.containPoint=function(r){var n=this._coordsList[0];if(n)return n.containPoint(r)},a.prototype._initCartesian=function(r,n,o){var s=this,l=this,u={left:!1,right:!1,top:!1,bottom:!1},c={x:{},y:{}},f={x:0,y:0};if(n.eachComponent("xAxis",d("x"),this),n.eachComponent("yAxis",d("y"),this),!f.x||!f.y){this._axesMap={},this._axesList=[];return}this._axesMap=c,each$f(c.x,function(v,g){each$f(c.y,function(y,_){var S="x"+g+"y"+_,b=new Cartesian2D(S);b.master=s,b.model=r,s._coordsMap[S]=b,s._coordsList.push(b),b.addAxis(v),b.addAxis(y)})});function d(v){return function(g,y){if(isAxisUsedInTheGrid(g,r)){var _=g.get("position");v==="x"?_!=="top"&&_!=="bottom"&&(_=u.bottom?"top":"bottom"):_!=="left"&&_!=="right"&&(_=u.left?"right":"left"),u[_]=!0;var S=new Axis2D(v,createScaleByModel$1(g),[0,0],g.get("type"),_),b=S.type==="category";S.onBand=b&&g.get("boundaryGap"),S.inverse=g.get("inverse"),g.axis=S,S.model=g,S.grid=l,S.index=y,l._axesList.push(S),c[v][y]=S,f[v]++}}}},a.prototype._updateScale=function(r,n){each$f(this._axesList,function(s){if(s.scale.setExtent(1/0,-1/0),s.type==="category"){var l=s.model.get("categorySortInfo");s.scale.setSortInfo(l)}}),r.eachSeries(function(s){if(isCartesian2DInjectedAsDataCoordSys(s)){var l=findAxisModels(s),u=l.xAxisModel,c=l.yAxisModel;if(!isAxisUsedInTheGrid(u,n)||!isAxisUsedInTheGrid(c,n))return;var f=this.getCartesian(u.componentIndex,c.componentIndex),d=s.getData(),v=f.getAxis("x"),g=f.getAxis("y");o(d,v),o(d,g)}},this);function o(s,l){each$f(getDataDimensionsOnAxis(s,l.dim),function(u){l.scale.unionExtentFromData(s,u)})}},a.prototype.getTooltipAxes=function(r){var n=[],o=[];return each$f(this.getCartesians(),function(s){var l=r!=null&&r!=="auto"?s.getAxis(r):s.getBaseAxis(),u=s.getOtherAxis(l);indexOf(n,l)<0&&n.push(l),indexOf(o,u)<0&&o.push(u)}),{baseAxes:n,otherAxes:o}},a.create=function(r,n){var o=[];return r.eachComponent("grid",function(s,l){var u=new a(s,r,n);u.name="grid_"+l,u.resize(s,n,!0),s.coordinateSystem=u,o.push(u)}),r.eachSeries(function(s){injectCoordSysByOption({targetModel:s,coordSysType:"cartesian2d",coordSysProvider:l});function l(){var u=findAxisModels(s),c=u.xAxisModel,f=u.yAxisModel,d=c.getCoordSysModel(),v=d.coordinateSystem;return v.getCartesian(c.componentIndex,f.componentIndex)}}),o},a.dimensions=cartesian2DDimensions,a}();function isAxisUsedInTheGrid(a,r){return a.getCoordSysModel()===r}function fixAxisOnZero(a,r,n,o){n.getAxesOnZeroOf=function(){return l?[l]:[]};var s=a[r],l,u=n.model,c=u.get(["axisLine","onZero"]),f=u.get(["axisLine","onZeroAxisIndex"]);if(!c)return;if(f!=null)canOnZeroToAxis(s[f])&&(l=s[f]);else for(var d in s)if(s.hasOwnProperty(d)&&canOnZeroToAxis(s[d])&&!o[v(s[d])]){l=s[d];break}l&&(o[v(l)]=!0);function v(g){return g.dim+"_"+g.index}}function canOnZeroToAxis(a){return a&&a.type!=="category"&&a.type!=="time"&&ifAxisCrossZero(a)}function updateAxisTransform(a,r){var n=a.getExtent(),o=n[0]+n[1];a.toGlobalCoord=a.dim==="x"?function(s){return s+r}:function(s){return o-s+r},a.toLocalCoord=a.dim==="x"?function(s){return s-r}:function(s){return o-s+r}}function updateAllAxisExtentTransByGridRect(a,r){each$f(a.x,function(n){return updateAxisExtentTransByGridRect(n,r.x,r.width)}),each$f(a.y,function(n){return updateAxisExtentTransByGridRect(n,r.y,r.height)})}function updateAxisExtentTransByGridRect(a,r,n){var o=[0,n],s=a.inverse?1:0;a.setExtent(o[s],o[1-s]),updateAxisTransform(a,r)}var legacyLayOutGridByContainLabel;function registerLegacyGridContainLabelImpl(a){legacyLayOutGridByContainLabel=a}function layOutGridByOuterBounds(a,r,n,o,s,l,u){createOrUpdateAxesView(o,s,AxisTickLabelComputingKind.estimate,r,!1,u);var c=[0,0,0,0];d(0),d(1),v(o,0,NaN),v(o,1,NaN);var f=find(c,function(y){return y>0})==null;return expandOrShrinkRect(o,c,!0,!0,n),updateAllAxisExtentTransByGridRect(s,o),f;function d(y){each$f(s[XY$2[y]],function(_){if(shouldAxisShow(_.model)){var S=l.ensureRecord(_.model),b=S.labelInfoList;if(b)for(var x=0;x<b.length;x++){var T=b[x],A=_.scale.normalize(getLabelInner(T.label).tickValue);A=y===1?1-A:A,v(T.rect,y,A),v(T.rect,1-y,NaN)}var w=S.nameLayout;if(w){var A=isNameLocationCenter(S.nameLocation)?.5:NaN;v(w.rect,y,A),v(w.rect,1-y,NaN)}}})}function v(y,_,S){var b=a[XY$2[_]]-y[XY$2[_]],x=y[WH$2[_]]+y[XY$2[_]]-(a[WH$2[_]]+a[XY$2[_]]);b=g(b,1-S),x=g(x,S);var T=XY_TO_MARGIN_IDX[_][0],A=XY_TO_MARGIN_IDX[_][1];c[T]=mathMax$a(c[T],b),c[A]=mathMax$a(c[A],x)}function g(y,_){return y>0&&!eqNaN(_)&&_>1e-4&&(y/=_),y}}function createAxisBiulders(a,r,n,o,s){var l=new AxisBuilderSharedContext(resolveAxisNameOverlapForGrid);return each$f(n,function(u){return each$f(u,function(c){if(shouldAxisShow(c.model)){var f=!o;c.axisBuilder=createCartesianAxisViewCommonPartBuilder(a,r,c.model,s,l,f)}})}),l}function createOrUpdateAxesView(a,r,n,o,s,l){var u=n===AxisTickLabelComputingKind.determine;each$f(r,function(d){return each$f(d,function(v){shouldAxisShow(v.model)&&(updateCartesianAxisViewCommonPartBuilder(v.axisBuilder,a,v.model),v.axisBuilder.build(u?{axisTickLabelDetermine:!0}:{axisTickLabelEstimate:!0},{noPxChange:s}))})});var c={x:0,y:0};f(0),f(1);function f(d){c[XY$2[1-d]]=a[WH$2[d]]<=l.refContainer[WH$2[d]]*.5?0:1-d===1?2:1}each$f(r,function(d,v){return each$f(d,function(g){shouldAxisShow(g.model)&&((o==="all"||u)&&g.axisBuilder.build({axisName:!0},{nameMarginLevel:c[v]}),u&&g.axisBuilder.build({axisLine:!0}))})})}function prepareOuterBounds(a,r,n){var o,s=a.get("outerBoundsMode",!0);s==="same"?o=r.clone():(s==null||s==="auto")&&(o=getLayoutRect(a.get("outerBounds",!0)||OUTER_BOUNDS_DEFAULT,n.refContainer));var l=a.get("outerBoundsContain",!0),u;l==null||l==="auto"||indexOf(["all","axisLabel"],l)<0?u="all":u=l;var c=[parsePositionSizeOption(retrieve2(a.get("outerBoundsClampWidth",!0),OUTER_BOUNDS_CLAMP_DEFAULT[0]),r.width),parsePositionSizeOption(retrieve2(a.get("outerBoundsClampHeight",!0),OUTER_BOUNDS_CLAMP_DEFAULT[1]),r.height)];return{outerBoundsRect:o,parsedOuterBoundsContain:u,outerBoundsClamp:c}}var resolveAxisNameOverlapForGrid=function(a,r,n,o,s,l){var u=n.axis.dim==="x"?"y":"x";resolveAxisNameOverlapDefault(a,r,n,o,s,l),isNameLocationCenter(a.nameLocation)||each$f(r.recordMap[u],function(c){c&&c.labelInfoList&&c.dirVec&&moveIfOverlapByLinearLabels(c.labelInfoList,c.dirVec,o,s)})};function collect(a,r){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(n,a,r),n.seriesInvolved&&collectSeriesInfo(n,a),n}function collectAxesInfo(a,r,n){var o=r.getComponent("tooltip"),s=r.getComponent("axisPointer"),l=s.get("link",!0)||[],u=[];each$f(n.getCoordinateSystems(),function(c){if(!c.axisPointerEnabled)return;var f=makeKey(c.model),d=a.coordSysAxesInfo[f]={};a.coordSysMap[f]=c;var v=c.model,g=v.getModel("tooltip",o);if(each$f(c.getAxes(),curry$1(b,!1,null)),c.getTooltipAxes&&o&&g.get("show")){var y=g.get("trigger")==="axis",_=g.get(["axisPointer","type"])==="cross",S=c.getTooltipAxes(g.get(["axisPointer","axis"]));(y||_)&&each$f(S.baseAxes,curry$1(b,_?"cross":!0,y)),_&&each$f(S.otherAxes,curry$1(b,"cross",!1))}function b(x,T,A){var w=A.model.getModel("axisPointer",s),C=w.get("show");if(!(!C||C==="auto"&&!x&&!isHandleTrigger(w))){T==null&&(T=w.get("triggerTooltip")),w=x?makeAxisPointerModel(A,g,s,r,x,T):w;var E=w.get("snap"),P=w.get("triggerEmphasis"),I=makeKey(A.model),M=T||E||A.type==="category",R=a.axesInfo[I]={key:I,axis:A,coordSys:c,axisPointerModel:w,triggerTooltip:T,triggerEmphasis:P,involveSeries:M,snap:E,useHandle:isHandleTrigger(w),seriesModels:[],linkGroup:null};d[I]=R,a.seriesInvolved=a.seriesInvolved||M;var O=getLinkGroupIndex(l,A);if(O!=null){var $=u[O]||(u[O]={axesInfo:{}});$.axesInfo[I]=R,$.mapper=l[O].mapper,R.linkGroup=$}}}})}function makeAxisPointerModel(a,r,n,o,s,l){var u=r.getModel("axisPointer"),c=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],f={};each$f(c,function(y){f[y]=clone$4(u.get(y))}),f.snap=a.type!=="category"&&!!l,u.get("type")==="cross"&&(f.type="line");var d=f.label||(f.label={});if(d.show==null&&(d.show=!1),s==="cross"){var v=u.get(["label","show"]);if(d.show=v??!0,!l){var g=f.lineStyle=u.get("crossStyle");g&&defaults(d,g.textStyle)}}return a.model.getModel("axisPointer",new Model(f,n,o))}function collectSeriesInfo(a,r){r.eachSeries(function(n){var o=n.coordinateSystem,s=n.get(["tooltip","trigger"],!0),l=n.get(["tooltip","show"],!0);!o||!o.model||s==="none"||s===!1||s==="item"||l===!1||n.get(["axisPointer","show"],!0)===!1||each$f(a.coordSysAxesInfo[makeKey(o.model)],function(u){var c=u.axis;o.getAxis(c.dim)===c&&(u.seriesModels.push(n),u.seriesDataCount==null&&(u.seriesDataCount=0),u.seriesDataCount+=n.getData().count())})})}function getLinkGroupIndex(a,r){for(var n=r.model,o=r.dim,s=0;s<a.length;s++){var l=a[s]||{};if(checkPropInLink(l[o+"AxisId"],n.id)||checkPropInLink(l[o+"AxisIndex"],n.componentIndex)||checkPropInLink(l[o+"AxisName"],n.name))return s}}function checkPropInLink(a,r){return a==="all"||isArray$1(a)&&indexOf(a,r)>=0||a===r}function fixValue(a){var r=getAxisInfo$1(a);if(r){var n=r.axisPointerModel,o=r.axis.scale,s=n.option,l=n.get("status"),u=n.get("value");u!=null&&(u=o.parse(u));var c=isHandleTrigger(n);l==null&&(s.status=c?"show":"hide");var f=o.getExtent().slice();f[0]>f[1]&&f.reverse(),(u==null||u>f[1])&&(u=f[1]),u<f[0]&&(u=f[0]),s.value=u,c&&(s.status=r.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo$1(a){var r=(a.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return r&&r.axesInfo[makeKey(a)]}function getAxisPointerModel(a){var r=getAxisInfo$1(a);return r&&r.axisPointerModel}function isHandleTrigger(a){return!!a.get(["handle","show"])}function makeKey(a){return a.type+"||"+a.id}var axisPointerClazz={},AxisView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s,l){this.axisPointerClass&&fixValue(n),a.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(n,s,!0)},r.prototype.updateAxisPointer=function(n,o,s,l){this._doUpdateAxisPointerClass(n,s,!1)},r.prototype.remove=function(n,o){var s=this._axisPointer;s&&s.remove(o)},r.prototype.dispose=function(n,o){this._disposeAxisPointer(o),a.prototype.dispose.apply(this,arguments)},r.prototype._doUpdateAxisPointerClass=function(n,o,s){var l=r.getAxisPointerClass(this.axisPointerClass);if(l){var u=getAxisPointerModel(n);u?(this._axisPointer||(this._axisPointer=new l)).render(n,u,o,s):this._disposeAxisPointer(o)}},r.prototype._disposeAxisPointer=function(n){this._axisPointer&&this._axisPointer.dispose(n),this._axisPointer=null},r.registerAxisPointerClass=function(n,o){axisPointerClazz[n]=o},r.getAxisPointerClass=function(n){return n&&axisPointerClazz[n]},r.type="axis",r}(ComponentView),inner$i=makeInner();function rectCoordAxisBuildSplitArea(a,r,n,o){var s=n.axis;if(!s.scale.isBlank()){var l=n.getModel("splitArea"),u=l.getModel("areaStyle"),c=u.get("color"),f=o.coordinateSystem.getRect(),d=s.getTicksCoords({tickModel:l,clamp:!0,breakTicks:"none",pruneByBreak:"preserve_extent_bound"});if(d.length){var v=c.length,g=inner$i(a).splitAreaColors,y=createHashMap(),_=0;if(g)for(var S=0;S<d.length;S++){var b=g.get(d[S].tickValue);if(b!=null){_=(b+(v-1)*S)%v;break}}var x=s.toGlobalCoord(d[0].coord),T=u.getAreaStyle();c=isArray$1(c)?c:[c];for(var S=1;S<d.length;S++){var A=s.toGlobalCoord(d[S].coord),w=void 0,C=void 0,E=void 0,P=void 0;s.isHorizontal()?(w=x,C=f.y,E=A-w,P=f.height,x=w+E):(w=f.x,C=x,E=f.width,P=A-C,x=C+P);var I=d[S-1].tickValue;I!=null&&y.set(I,_),r.add(new Rect$2({anid:I!=null?"area_"+I:null,shape:{x:w,y:C,width:E,height:P},style:defaults({fill:c[_]},T),autoBatch:!0,silent:!0})),_=(_+1)%v}inner$i(a).splitAreaColors=y}}}function rectCoordAxisHandleRemove(a){inner$i(a).splitAreaColors=null}var selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine","breakArea"],CartesianAxisView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.axisPointerClass="CartesianAxisPointer",n}return r.prototype.render=function(n,o,s,l){this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!shouldAxisShow(n)){this._axisGroup.add(n.axis.axisBuilder.group),each$f(selfBuilderAttrs$2,function(f){n.get([f,"show"])&&axisElementBuilders$2[f](this,this._axisGroup,n,n.getCoordSysModel(),s)},this);var c=l&&l.type==="changeAxisOrder"&&l.isInitSort;c||groupTransition(u,this._axisGroup,n),a.prototype.render.call(this,n,o,s,l)}},r.prototype.remove=function(){rectCoordAxisHandleRemove(this)},r.type="cartesianAxis",r}(AxisView),axisElementBuilders$2={splitLine:function(a,r,n,o,s){var l=n.axis;if(!l.scale.isBlank()){var u=n.getModel("splitLine"),c=u.getModel("lineStyle"),f=c.get("color"),d=u.get("showMinLine")!==!1,v=u.get("showMaxLine")!==!1;f=isArray$1(f)?f:[f];for(var g=o.coordinateSystem.getRect(),y=l.isHorizontal(),_=0,S=l.getTicksCoords({tickModel:u,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),b=[],x=[],T=c.getLineStyle(),A=0;A<S.length;A++){var w=l.toGlobalCoord(S[A].coord);if(!(A===0&&!d||A===S.length-1&&!v)){var C=S[A].tickValue;y?(b[0]=w,b[1]=g.y,x[0]=w,x[1]=g.y+g.height):(b[0]=g.x,b[1]=w,x[0]=g.x+g.width,x[1]=w);var E=_++%f.length,P=new Line$1({anid:C!=null?"line_"+C:null,autoBatch:!0,shape:{x1:b[0],y1:b[1],x2:x[0],y2:x[1]},style:defaults({stroke:f[E]},T),silent:!0});subPixelOptimizeLine(P.shape,T.lineWidth),r.add(P)}}}},minorSplitLine:function(a,r,n,o,s){var l=n.axis,u=n.getModel("minorSplitLine"),c=u.getModel("lineStyle"),f=o.coordinateSystem.getRect(),d=l.isHorizontal(),v=l.getMinorTicksCoords();if(v.length)for(var g=[],y=[],_=c.getLineStyle(),S=0;S<v.length;S++)for(var b=0;b<v[S].length;b++){var x=l.toGlobalCoord(v[S][b].coord);d?(g[0]=x,g[1]=f.y,y[0]=x,y[1]=f.y+f.height):(g[0]=f.x,g[1]=x,y[0]=f.x+f.width,y[1]=x);var T=new Line$1({anid:"minor_line_"+v[S][b].tickValue,autoBatch:!0,shape:{x1:g[0],y1:g[1],x2:y[0],y2:y[1]},style:_,silent:!0});subPixelOptimizeLine(T.shape,_.lineWidth),r.add(T)}},splitArea:function(a,r,n,o,s){rectCoordAxisBuildSplitArea(a,r,n,o)},breakArea:function(a,r,n,o,s){var l=getAxisBreakHelper(),u=n.axis.scale;l&&u.type!=="ordinal"&&l.rectCoordBuildBreakAxis(r,a,n,o.coordinateSystem.getRect(),s)}},CartesianXAxisView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.type="xAxis",r}(CartesianAxisView),CartesianYAxisView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=CartesianXAxisView.type,n}return r.type="yAxis",r}(CartesianAxisView),GridView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type="grid",n}return r.prototype.render=function(n,o){this.group.removeAll(),n.get("show")&&this.group.add(new Rect$2({shape:n.coordinateSystem.getRect(),style:defaults({fill:n.get("backgroundColor")},n.getItemStyle()),silent:!0,z2:-1}))},r.type="grid",r}(ComponentView),extraOption={offset:0};function install$Q(a){a.registerComponentView(GridView),a.registerComponentModel(GridModel),a.registerCoordinateSystem("cartesian2d",Grid),axisModelCreator(a,"x",CartesianAxisModel,extraOption),axisModelCreator(a,"y",CartesianAxisModel,extraOption),a.registerComponentView(CartesianXAxisView),a.registerComponentView(CartesianYAxisView),a.registerPreprocessor(function(r){r.xAxis&&r.yAxis&&!r.grid&&(r.grid={})})}function needFixJitter(a,r){var n=a.coordinateSystem,o=n&&n.type,s=n&&n.getBaseAxis&&n.getBaseAxis(),l=s&&s.scale&&s.scale.type,u=o==="cartesian2d"&&l==="ordinal"||o==="single",c=r.model.get("jitter")>0;return u&&c}var inner$h=makeInner();function fixJitter(a,r,n,o){if(a instanceof Axis2D){var s=a.scale.type;if(s!=="category"&&s!=="ordinal")return n}var l=a.model,u=l.get("jitter"),c=l.get("jitterOverlap"),f=l.get("jitterMargin")||0,d=a.scale.type==="ordinal"?a.getBandWidth():null;return u>0?c?fixJitterIgnoreOverlaps(n,u,d,o):fixJitterAvoidOverlaps(a,r,n,o,u,f):n}function fixJitterIgnoreOverlaps(a,r,n,o){if(n===null)return a+(Math.random()-.5)*r;var s=n-o*2,l=Math.min(Math.max(0,r),s);return a+(Math.random()-.5)*l}function fixJitterAvoidOverlaps(a,r,n,o,s,l){var u=inner$h(a);u.items||(u.items=[]);var c=u.items,f=placeJitterOnDirection(c,r,n,o,s,l,1),d=placeJitterOnDirection(c,r,n,o,s,l,-1),v=Math.abs(f-n)<Math.abs(d-n)?f:d,g=a.scale.type==="ordinal"?a.getBandWidth():null,y=Math.abs(v-n);return y>s/2||g&&y>g/2-o?fixJitterIgnoreOverlaps(n,s,g,o):(c.push({fixedCoord:r,floatCoord:v,r:o}),v)}function placeJitterOnDirection(a,r,n,o,s,l,u){for(var c=n,f=0;f<a.length;f++){var d=a[f],v=r-d.fixedCoord,g=c-d.floatCoord,y=v*v+g*g,_=o+d.r+l;if(y<_*_){var S=d.floatCoord+Math.sqrt(_*_-v*v)*u;if(Math.abs(S-n)>s/2)return Number.MAX_VALUE;if(u===1&&S>c||u===-1&&S<c){c=S,f=-1;continue}}}return c}function jitterLayout(a){a.eachSeriesByType("scatter",function(r){var n=r.coordinateSystem;if(n&&(n.type==="cartesian2d"||n.type==="single")){var o=n.getBaseAxis?n.getBaseAxis():null,s=o&&needFixJitter(r,o);if(s){var l=r.getData();l.each(function(u){var c=o.dim,f=o.orient,d=f==="horizontal"&&o.type!=="category"||f==="vertical"&&o.type==="category",v=l.getItemLayout(u),g=l.getItemVisual(u,"symbolSize"),y=g instanceof Array?(g[1]+g[0])/2:g;if(c==="y"||c==="single"&&d){var _=fixJitter(o,v[0],v[1],y/2);l.setItemLayout(u,[v[0],_])}else if(c==="x"||c==="single"&&!d){var _=fixJitter(o,v[1],v[0],y/2);l.setItemLayout(u,[_,v[1]])}})}}})}function install$P(a){use(install$Q),a.registerSeriesModel(ScatterSeriesModel),a.registerChartView(ScatterView),a.registerLayout(pointsLayout("scatter"))}function installScatterJitter(a){a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,jitterLayout)}function radarLayout(a){a.eachSeriesByType("radar",function(r){var n=r.getData(),o=[],s=r.coordinateSystem;if(s){var l=s.getIndicatorAxes();each$f(l,function(u,c){n.each(n.mapDimension(l[c].dim),function(f,d){o[d]=o[d]||[];var v=s.dataToPoint(f,c);o[d][c]=isValidPoint(v)?v:getValueMissingPoint(s)})}),n.each(function(u){var c=find(o[u],function(f){return isValidPoint(f)})||getValueMissingPoint(s);o[u].push(c.slice()),n.setItemLayout(u,o[u])})}})}function isValidPoint(a){return!isNaN(a[0])&&!isNaN(a[1])}function getValueMissingPoint(a){return[a.cx,a.cy]}function radarBackwardCompat(a){var r=a.polar;if(r){isArray$1(r)||(r=[r]);var n=[];each$f(r,function(o,s){o.indicator?(o.type&&!o.shape&&(o.shape=o.type),a.radar=a.radar||[],isArray$1(a.radar)||(a.radar=[a.radar]),a.radar.push(o)):n.push(o)}),a.polar=n}each$f(a.series,function(o){o&&o.type==="radar"&&o.polarIndex&&(o.radarIndex=o.polarIndex)})}var RadarView$1=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s){var l=n.coordinateSystem,u=this.group,c=n.getData(),f=this._data;function d(y,_){var S=y.getItemVisual(_,"symbol")||"circle";if(S!=="none"){var b=normalizeSymbolSize(y.getItemVisual(_,"symbolSize")),x=createSymbol$1(S,-1,-1,2,2),T=y.getItemVisual(_,"symbolRotate")||0;return x.attr({style:{strokeNoScale:!0},z2:100,scaleX:b[0]/2,scaleY:b[1]/2,rotation:T*Math.PI/180||0}),x}}function v(y,_,S,b,x,T){S.removeAll();for(var A=0;A<_.length-1;A++){var w=d(b,x);w&&(w.__dimIdx=A,y[A]?(w.setPosition(y[A]),graphic[T?"initProps":"updateProps"](w,{x:_[A][0],y:_[A][1]},n,x)):w.setPosition(_[A]),S.add(w))}}function g(y){return map$1(y,function(_){return[l.cx,l.cy]})}c.diff(f).add(function(y){var _=c.getItemLayout(y);if(_){var S=new Polygon,b=new Polyline$1,x={shape:{points:_}};S.shape.points=g(_),b.shape.points=g(_),initProps(S,x,n,y),initProps(b,x,n,y);var T=new Group$3,A=new Group$3;T.add(b),T.add(S),T.add(A),v(b.shape.points,_,A,c,y,!0),c.setItemGraphicEl(y,T)}}).update(function(y,_){var S=f.getItemGraphicEl(_),b=S.childAt(0),x=S.childAt(1),T=S.childAt(2),A={shape:{points:c.getItemLayout(y)}};A.shape.points&&(v(b.shape.points,A.shape.points,T,c,y,!1),saveOldStyle(x),saveOldStyle(b),updateProps$1(b,A,n),updateProps$1(x,A,n),c.setItemGraphicEl(y,S))}).remove(function(y){u.remove(f.getItemGraphicEl(y))}).execute(),c.eachItemGraphicEl(function(y,_){var S=c.getItemModel(_),b=y.childAt(0),x=y.childAt(1),T=y.childAt(2),A=c.getItemVisual(_,"style"),w=A.fill;u.add(y),b.useStyle(defaults(S.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:w})),setStatesStylesFromModel(b,S,"lineStyle"),setStatesStylesFromModel(x,S,"areaStyle");var C=S.getModel("areaStyle"),E=C.isEmpty()&&C.parentModel.isEmpty();x.ignore=E,each$f(["emphasis","select","blur"],function(I){var M=S.getModel([I,"areaStyle"]),R=M.isEmpty()&&M.parentModel.isEmpty();x.ensureState(I).ignore=R&&E;var O=S.getModel([I,"lineStyle"]).getLineStyle();b.ensureState(I).style=O;var $=M.getAreaStyle();x.ensureState(I).style=$;var B=S.getModel([I,"itemStyle"]).getItemStyle();T.eachChild(function(F){F.ensureState(I).style=clone$4(B)})}),x.useStyle(defaults(S.getModel("areaStyle").getAreaStyle(),{fill:w,opacity:.7,decal:A.decal}));var P=S.getModel("emphasis");T.eachChild(function(I){if(I instanceof ZRImage){var M=I.style;I.useStyle(extend({image:M.image,x:M.x,y:M.y,width:M.width,height:M.height},A))}else I.useStyle(A),I.setColor(w),I.style.strokeNoScale=!0;var R=c.getStore().get(c.getDimensionIndex(I.__dimIdx),_);(R==null||isNaN(R))&&(R=""),setLabelStyle(I,getLabelStatesModels(S),{labelFetcher:c.hostModel,labelDataIndex:_,labelDimIndex:I.__dimIdx,defaultText:R,inheritColor:w,defaultOpacity:A.opacity})}),toggleHoverEmphasis(y,P.get("focus"),P.get("blurScope"),P.get("disabled"))}),this._data=c},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.type="radar",r}(ChartView),RadarSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.hasSymbolVisual=!0,n}return r.prototype.init=function(n){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},r.prototype.getInitialData=function(n,o){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},r.prototype.formatTooltip=function(n,o,s){var l=this.getData(),u=this.coordinateSystem,c=u.getIndicatorAxes(),f=this.getData().getName(n),d=f===""?this.name:f,v=retrieveVisualColorForTooltipMarker(this,n);return createTooltipMarkup("section",{header:d,sortBlocks:!0,blocks:map$1(c,function(g){var y=l.get(l.mapDimension(g.dim),n);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:v,name:g.name,value:y,sortParam:y})})})},r.prototype.getTooltipPosition=function(n){if(n!=null){for(var o=this.getData(),s=this.coordinateSystem,l=o.getValues(map$1(s.dimensions,function(d){return o.mapDimension(d)}),n),u=0,c=l.length;u<c;u++)if(!isNaN(l[u])){var f=s.getIndicatorAxes();return s.coordToPoint(f[u].dataToCoord(l[u]),u)}}},r.type="series.radar",r.dependencies=["radar"],r.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},r}(SeriesModel),valueAxisDefault=axisDefault.value;function defaultsShow(a,r){return defaults({show:r},a)}var RadarModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.optionUpdated=function(){var n=this.get("boundaryGap"),o=this.get("splitNumber"),s=this.get("scale"),l=this.get("axisLine"),u=this.get("axisTick"),c=this.get("axisLabel"),f=this.get("axisName"),d=this.get(["axisName","show"]),v=this.get(["axisName","formatter"]),g=this.get("axisNameGap"),y=this.get("triggerEvent"),_=map$1(this.get("indicator")||[],function(S){S.max!=null&&S.max>0&&!S.min?S.min=0:S.min!=null&&S.min<0&&!S.max&&(S.max=0);var b=f;S.color!=null&&(b=defaults({color:S.color},f));var x=merge(clone$4(S),{boundaryGap:n,splitNumber:o,scale:s,axisLine:l,axisTick:u,axisLabel:c,name:S.text,showName:d,nameLocation:"end",nameGap:g,nameTextStyle:b,triggerEvent:y},!1);if(isString(v)){var T=x.name;x.name=v.replace("{value}",T??"")}else isFunction(v)&&(x.name=v(x.name,x));var A=new Model(x,null,this.ecModel);return mixin(A,AxisModelCommonMixin.prototype),A.mainType="radar",A.componentIndex=this.componentIndex,A},this);this._indicatorModels=_},r.prototype.getIndicatorModels=function(){return this._indicatorModels},r.type="radar",r.defaultOption={z:0,center:["50%","50%"],radius:"50%",startAngle:90,axisName:{show:!0,color:tokens.color.axisLabel},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:tokens.color.neutral20}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},r}(ComponentModel),RadarView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s){var l=this.group;l.removeAll(),this._buildAxes(n,s),this._buildSplitLineAndArea(n)},r.prototype._buildAxes=function(n,o){var s=n.coordinateSystem,l=s.getIndicatorAxes(),u=map$1(l,function(c){var f=c.model.get("showName")?c.name:"",d=new AxisBuilder(c.model,o,{axisName:f,position:[s.cx,s.cy],rotation:c.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return d});each$f(u,function(c){c.build(),this.group.add(c.group)},this)},r.prototype._buildSplitLineAndArea=function(n){var o=n.coordinateSystem,s=o.getIndicatorAxes();if(!s.length)return;var l=n.get("shape"),u=n.getModel("splitLine"),c=n.getModel("splitArea"),f=u.getModel("lineStyle"),d=c.getModel("areaStyle"),v=u.get("show"),g=c.get("show"),y=f.get("color"),_=d.get("color"),S=isArray$1(y)?y:[y],b=isArray$1(_)?_:[_],x=[],T=[];function A(G,D,V){var L=V%D.length;return G[L]=G[L]||[],L}if(l==="circle")for(var w=s[0].getTicksCoords(),C=o.cx,E=o.cy,P=0;P<w.length;P++){if(v){var I=A(x,S,P);x[I].push(new Circle({shape:{cx:C,cy:E,r:w[P].coord}}))}if(g&&P<w.length-1){var I=A(T,b,P);T[I].push(new Ring({shape:{cx:C,cy:E,r0:w[P].coord,r:w[P+1].coord}}))}}else for(var M,R=map$1(s,function(G,D){var V=G.getTicksCoords();return M=M==null?V.length-1:Math.min(V.length-1,M),map$1(V,function(L){return o.coordToPoint(L.coord,D)})}),O=[],P=0;P<=M;P++){for(var $=[],B=0;B<s.length;B++)$.push(R[B][P]);if($[0]&&$.push($[0].slice()),v){var I=A(x,S,P);x[I].push(new Polyline$1({shape:{points:$}}))}if(g&&O){var I=A(T,b,P-1);T[I].push(new Polygon({shape:{points:$.concat(O)}}))}O=$.slice().reverse()}var F=f.getLineStyle(),z=d.getAreaStyle();each$f(T,function(G,D){this.group.add(mergePath(G,{style:defaults({stroke:"none",fill:b[D%b.length]},z),silent:!0}))},this),each$f(x,function(G,D){this.group.add(mergePath(G,{style:defaults({fill:"none",stroke:S[D%S.length]},F),silent:!0}))},this)},r.type="radar",r}(ComponentView),IndicatorAxis=function(a){__extends(r,a);function r(n,o,s){var l=a.call(this,n,o,s)||this;return l.type="value",l.angle=0,l.name="",l}return r}(Axis),Radar=function(){function a(r,n,o){this.dimensions=[],this._model=r,this._indicatorAxes=map$1(r.getIndicatorModels(),function(s,l){var u="indicator_"+l,c=new IndicatorAxis(u,new IntervalScale);return c.name=s.get("name"),c.model=s,s.axis=c,this.dimensions.push(u),c},this),this.resize(r,o)}return a.prototype.getIndicatorAxes=function(){return this._indicatorAxes},a.prototype.dataToPoint=function(r,n){var o=this._indicatorAxes[n];return this.coordToPoint(o.dataToCoord(r),n)},a.prototype.coordToPoint=function(r,n){var o=this._indicatorAxes[n],s=o.angle,l=this.cx+r*Math.cos(s),u=this.cy-r*Math.sin(s);return[l,u]},a.prototype.pointToData=function(r){var n=r[0]-this.cx,o=r[1]-this.cy,s=Math.sqrt(n*n+o*o);n/=s,o/=s;for(var l=Math.atan2(-o,n),u=1/0,c,f=-1,d=0;d<this._indicatorAxes.length;d++){var v=this._indicatorAxes[d],g=Math.abs(l-v.angle);g<u&&(c=v,f=d,u=g)}return[f,+(c&&c.coordToData(s))]},a.prototype.resize=function(r,n){var o=createBoxLayoutReference(r,n).refContainer,s=r.get("center"),l=Math.min(o.width,o.height)/2;this.cx=parsePercent(s[0],o.width)+o.x,this.cy=parsePercent(s[1],o.height)+o.y,this.startAngle=r.get("startAngle")*Math.PI/180;var u=r.get("radius");(isString(u)||isNumber(u))&&(u=[0,u]),this.r0=parsePercent(u[0],l),this.r=parsePercent(u[1],l),each$f(this._indicatorAxes,function(c,f){c.setExtent(this.r0,this.r);var d=this.startAngle+f*Math.PI*2/this._indicatorAxes.length;d=Math.atan2(Math.sin(d),Math.cos(d)),c.angle=d},this)},a.prototype.update=function(r,n){var o=this._indicatorAxes,s=this._model;each$f(o,function(c){c.scale.setExtent(1/0,-1/0)}),r.eachSeriesByType("radar",function(c,f){if(!(c.get("coordinateSystem")!=="radar"||r.getComponent("radar",c.get("radarIndex"))!==s)){var d=c.getData();each$f(o,function(v){v.scale.unionExtentFromData(d,d.mapDimension(v.dim))})}},this);var l=s.get("splitNumber"),u=new IntervalScale;u.setExtent(0,l),u.setInterval(1),each$f(o,function(c,f){alignScaleTicks(c.scale,c.model,u)})},a.prototype.convertToPixel=function(r,n,o){return console.warn("Not implemented."),null},a.prototype.convertFromPixel=function(r,n,o){return console.warn("Not implemented."),null},a.prototype.containPoint=function(r){return console.warn("Not implemented."),!1},a.create=function(r,n){var o=[];return r.eachComponent("radar",function(s){var l=new a(s,r,n);o.push(l),s.coordinateSystem=l}),r.eachSeriesByType("radar",function(s){s.get("coordinateSystem")==="radar"&&(s.coordinateSystem=o[s.get("radarIndex")||0])}),o},a.dimensions=[],a}();function install$O(a){a.registerCoordinateSystem("radar",Radar),a.registerComponentModel(RadarModel),a.registerComponentView(RadarView),a.registerVisual({seriesType:"radar",reset:function(r){var n=r.getData();n.each(function(o){n.setItemVisual(o,"legendIcon","roundRect")}),n.setVisual("legendIcon","roundRect")}})}function install$N(a){use(install$O),a.registerChartView(RadarView$1),a.registerSeriesModel(RadarSeriesModel),a.registerLayout(radarLayout),a.registerProcessor(dataFilter$1("radar")),a.registerPreprocessor(radarBackwardCompat)}var inner$g=makeInner();function take(a,r,n){inner$g(a)[r]=n}function release(a,r,n){var o=inner$g(a),s=o[r];s===n&&(o[r]=null)}function isTaken(a,r){return!!inner$g(a)[r]}registerAction$1({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop);var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(a,r,n){var o=r.getComponentByElement(a.topTarget);if(!o||o===n||IRRELEVANT_EXCLUDES.hasOwnProperty(o.mainType))return!1;var s=o.coordinateSystem;if(!s||s.model===n)return!1;var l=retrieveZInfo(o),u=retrieveZInfo(n);return!((l.zlevel-u.zlevel||l.z-u.z)<=0)}var RoamController=function(a){__extends(r,a);function r(n){var o=a.call(this)||this;o._zr=n;var s=bind$1(o._mousedownHandler,o),l=bind$1(o._mousemoveHandler,o),u=bind$1(o._mouseupHandler,o),c=bind$1(o._mousewheelHandler,o),f=bind$1(o._pinchHandler,o);return o.enable=function(d,v){var g=v.zInfo,y=retrieveZInfo(g.component),_=y.z,S=y.zlevel,b={component:g.component,z:_,zlevel:S,z2:retrieve2(g.z2,-1/0)},x=extend({},v.triggerInfo);this._opt=defaults(extend({},v),{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0,zInfoParsed:b,triggerInfo:x}),d==null&&(d=!0),(!this._enabled||this._controlType!==d)&&(this._enabled=!0,this.disable(),(d===!0||d==="move"||d==="pan")&&(addRoamZrListener(n,"mousedown",s,b),addRoamZrListener(n,"mousemove",l,b),addRoamZrListener(n,"mouseup",u,b)),(d===!0||d==="scale"||d==="zoom")&&(addRoamZrListener(n,"mousewheel",c,b),addRoamZrListener(n,"pinch",f,b)))},o.disable=function(){this._enabled=!1,removeRoamZrListener(n,"mousedown",s),removeRoamZrListener(n,"mousemove",l),removeRoamZrListener(n,"mouseup",u),removeRoamZrListener(n,"mousewheel",c),removeRoamZrListener(n,"pinch",f)},o}return r.prototype.isDragging=function(){return this._dragging},r.prototype.isPinching=function(){return this._pinching},r.prototype._checkPointer=function(n,o,s){var l=this._opt,u=l.zInfoParsed;if(onIrrelevantElement(n,l.api,u.component))return!1;var c=l.triggerInfo,f=c.roamTrigger,d=!1;return f==="global"&&(d=!0),d||(d=c.isInSelf(n,o,s)),d&&c.isInClip&&!c.isInClip(n,o,s)&&(d=!1),d},r.prototype._decideCursorStyle=function(n,o,s,l){var u=n.target;if(!u&&this._checkPointer(n,o,s))return"grab";if(l)return u&&u.cursor||"default"},r.prototype.dispose=function(){this.disable()},r.prototype._mousedownHandler=function(n){if(!(isMiddleOrRightButtonOnMouseUpDown(n)||eventConsumed(n))){for(var o=n.target;o;){if(o.draggable)return;o=o.__hostTarget||o.parent}var s=n.offsetX,l=n.offsetY;this._checkPointer(n,s,l)&&(this._x=s,this._y=l,this._dragging=!0)}},r.prototype._mousemoveHandler=function(n){var o=this._zr;if(!(n.gestureEvent==="pinch"||isTaken(o,"globalPan")||eventConsumed(n))){var s=n.offsetX,l=n.offsetY;if(!this._dragging||!isAvailableBehavior("moveOnMouseMove",n,this._opt)){var u=this._decideCursorStyle(n,s,l,!1);u&&o.setCursorStyle(u);return}o.setCursorStyle("grabbing");var c=this._x,f=this._y,d=s-c,v=l-f;this._x=s,this._y=l,this._opt.preventDefaultMouseMove&&stop(n.event),n.__ecRoamConsumed=!0,trigger$1(this,"pan","moveOnMouseMove",n,{dx:d,dy:v,oldX:c,oldY:f,newX:s,newY:l,isAvailableBehavior:null})}},r.prototype._mouseupHandler=function(n){if(!eventConsumed(n)){var o=this._zr;if(!isMiddleOrRightButtonOnMouseUpDown(n)){this._dragging=!1;var s=this._decideCursorStyle(n,n.offsetX,n.offsetY,!0);s&&o.setCursorStyle(s)}}},r.prototype._mousewheelHandler=function(n){if(!eventConsumed(n)){var o=isAvailableBehavior("zoomOnMouseWheel",n,this._opt),s=isAvailableBehavior("moveOnMouseWheel",n,this._opt),l=n.wheelDelta,u=Math.abs(l),c=n.offsetX,f=n.offsetY;if(!(l===0||!o&&!s)){if(o){var d=u>3?1.4:u>1?1.2:1.1,v=l>0?d:1/d;this._checkTriggerMoveZoom(this,"zoom","zoomOnMouseWheel",n,{scale:v,originX:c,originY:f,isAvailableBehavior:null})}if(s){var g=Math.abs(l),y=(l>0?1:-1)*(g>3?.4:g>1?.15:.05);this._checkTriggerMoveZoom(this,"scrollMove","moveOnMouseWheel",n,{scrollDelta:y,originX:c,originY:f,isAvailableBehavior:null})}}}},r.prototype._pinchHandler=function(n){if(!(isTaken(this._zr,"globalPan")||eventConsumed(n))){var o=n.pinchScale>1?1.1:1/1.1;this._checkTriggerMoveZoom(this,"zoom",null,n,{scale:o,originX:n.pinchX,originY:n.pinchY,isAvailableBehavior:null})}},r.prototype._checkTriggerMoveZoom=function(n,o,s,l,u){n._checkPointer(l,u.originX,u.originY)&&(stop(l.event),l.__ecRoamConsumed=!0,trigger$1(n,o,s,l,u))},r}(Eventful);function eventConsumed(a){return a.__ecRoamConsumed}var innerZrStore=makeInner();function ensureZrStore(a){var r=innerZrStore(a);return r.roam=r.roam||{},r.uniform=r.uniform||{},r}function addRoamZrListener(a,r,n,o){for(var s=ensureZrStore(a),l=s.roam,u=l[r]=l[r]||[],c=0;c<u.length;c++){var f=u[c].zInfoParsed;if((f.zlevel-o.zlevel||f.z-o.z||f.z2-o.z2)<=0)break}u.splice(c,0,{listener:n,zInfoParsed:o}),ensureUniformListener(a,r)}function removeRoamZrListener(a,r,n){for(var o=ensureZrStore(a),s=o.roam[r]||[],l=0;l<s.length;l++)if(s[l].listener===n){s.splice(l,1),s.length||removeUniformListener(a,r);return}}function ensureUniformListener(a,r){var n=ensureZrStore(a);n.uniform[r]||a.on(r,n.uniform[r]=function(o){var s=n.roam[r];if(s)for(var l=0;l<s.length;l++)s[l].listener(o)})}function removeUniformListener(a,r){var n=ensureZrStore(a),o=n.uniform;o[r]&&(a.off(r,o[r]),o[r]=null)}function trigger$1(a,r,n,o,s){s.isAvailableBehavior=bind$1(isAvailableBehavior,null,n,o),a.trigger(r,s)}function isAvailableBehavior(a,r,n){var o=n[a];return!a||o&&(!isString(o)||r.event[o+"Key"])}function updateViewOnPan(a,r,n){var o=a.target;o.x+=r,o.y+=n,o.dirty()}function updateViewOnZoom(a,r,n,o){var s=a.target,l=a.zoomLimit,u=a.zoom=a.zoom||1;u*=r,u=clampByZoomLimit(u,l);var c=u/a.zoom;a.zoom=u,zoomTransformableByOrigin(s,n,o,c),s.dirty()}function updateController(a,r,n,o,s,l){var u=new BoundingRect(0,0,0,0);o.enable(a.get("roam"),{api:r,zInfo:{component:a},triggerInfo:{roamTrigger:a.get("roamTrigger"),isInSelf:function(d,v,g){return u.copy(n.getBoundingRect()),u.applyTransform(n.getComputedTransform()),u.contain(v,g)},isInClip:function(d,v,g){return!l||l.contain(v,g)}}}),s.zoomLimit=a.get("scaleLimit");var c=a.coordinateSystem;s.zoom=c?c.getZoom():1;var f=a.subType+"Roam";o.off("pan").off("zoom").on("pan",function(d){updateViewOnPan(s,d.dx,d.dy),r.dispatchAction({seriesId:a.id,type:f,dx:d.dx,dy:d.dy})}).on("zoom",function(d){updateViewOnZoom(s,d.scale,d.originX,d.originY),r.dispatchAction({seriesId:a.id,type:f,zoom:d.scale,originX:d.originX,originY:d.originY}),r.updateLabelLayout()})}function getCenterCoord(a,r){return a.pointToProjected?a.pointToProjected(r):a.pointToData(r)}function updateCenterAndZoomInAction(a,r,n){var o=a.getZoom(),s=a.getCenter(),l=r.zoom,u=a.projectedToPoint?a.projectedToPoint(s):a.dataToPoint(s);return r.dx!=null&&r.dy!=null&&(u[0]-=r.dx,u[1]-=r.dy,a.setCenter(getCenterCoord(a,u))),l!=null&&(l=clampByZoomLimit(o*l,n)/o,zoomTransformableByOrigin(a,r.originX,r.originY,l),a.updateTransform(),a.setCenter(getCenterCoord(a,u)),a.setZoom(l*o)),{center:a.getCenter(),zoom:a.getZoom()}}function zoomTransformableByOrigin(a,r,n,o){a.x-=(r-a.x)*(o-1),a.y-=(n-a.y)*(o-1),a.scaleX*=o,a.scaleY*=o}function clampByZoomLimit(a,r){if(r){var n=r.min||0,o=r.max||1/0;a=Math.max(Math.min(o,a),n)}return a}function parseXML(a){if(isString(a)){var r=new DOMParser;a=r.parseFromString(a,"text/xml")}var n=a;for(n.nodeType===9&&(n=n.firstChild);n.nodeName.toLowerCase()!=="svg"||n.nodeType!==1;)n=n.nextSibling;return n}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=function(){function a(){this._defs={},this._root=null}return a.prototype.parse=function(r,n){n=n||{};var o=parseXML(r);this._defsUsePending=[];var s=new Group$3;this._root=s;var l=[],u=o.getAttribute("viewBox")||"",c=parseFloat(o.getAttribute("width")||n.width),f=parseFloat(o.getAttribute("height")||n.height);isNaN(c)&&(c=null),isNaN(f)&&(f=null),parseAttributes(o,s,null,!0,!1);for(var d=o.firstChild;d;)this._parseNode(d,s,l,null,!1,!1),d=d.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var v,g;if(u){var y=splitNumberSequence(u);y.length>=4&&(v={x:parseFloat(y[0]||0),y:parseFloat(y[1]||0),width:parseFloat(y[2]),height:parseFloat(y[3])})}if(v&&c!=null&&f!=null&&(g=makeViewBoxTransform(v,{x:0,y:0,width:c,height:f}),!n.ignoreViewBox)){var _=s;s=new Group$3,s.add(_),_.scaleX=_.scaleY=g.scale,_.x=g.x,_.y=g.y}return!n.ignoreRootClip&&c!=null&&f!=null&&s.setClipPath(new Rect$2({shape:{x:0,y:0,width:c,height:f}})),{root:s,width:c,height:f,viewBoxRect:v,viewBoxTransform:g,named:l}},a.prototype._parseNode=function(r,n,o,s,l,u){var c=r.nodeName.toLowerCase(),f,d=s;if(c==="defs"&&(l=!0),c==="text"&&(u=!0),c==="defs"||c==="switch")f=n;else{if(!l){var v=nodeParsers[c];if(v&&hasOwn(nodeParsers,c)){f=v.call(this,r,n);var g=r.getAttribute("name");if(g){var y={name:g,namedFrom:null,svgNodeTagLower:c,el:f};o.push(y),c==="g"&&(d=y)}else s&&o.push({name:s.name,namedFrom:s,svgNodeTagLower:c,el:f});n.add(f)}}var _=paintServerParsers[c];if(_&&hasOwn(paintServerParsers,c)){var S=_.call(this,r),b=r.getAttribute("id");b&&(this._defs[b]=S)}}if(f&&f.isGroup)for(var x=r.firstChild;x;)x.nodeType===1?this._parseNode(x,f,o,d,l,u):x.nodeType===3&&u&&this._parseText(x,f),x=x.nextSibling},a.prototype._parseText=function(r,n){var o=new TSpan({style:{text:r.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(n,o),parseAttributes(r,o,this._defsUsePending,!1,!1),applyTextAlignment(o,n);var s=o.style,l=s.fontSize;l&&l<9&&(s.fontSize=9,o.scaleX*=l/9,o.scaleY*=l/9);var u=(s.fontSize||s.fontFamily)&&[s.fontStyle,s.fontWeight,(s.fontSize||12)+"px",s.fontFamily||"sans-serif"].join(" ");s.font=u;var c=o.getBoundingRect();return this._textX+=c.width,n.add(o),o},a.internalField=function(){nodeParsers={g:function(r,n){var o=new Group$3;return inheritStyle(n,o),parseAttributes(r,o,this._defsUsePending,!1,!1),o},rect:function(r,n){var o=new Rect$2;return inheritStyle(n,o),parseAttributes(r,o,this._defsUsePending,!1,!1),o.setShape({x:parseFloat(r.getAttribute("x")||"0"),y:parseFloat(r.getAttribute("y")||"0"),width:parseFloat(r.getAttribute("width")||"0"),height:parseFloat(r.getAttribute("height")||"0")}),o.silent=!0,o},circle:function(r,n){var o=new Circle;return inheritStyle(n,o),parseAttributes(r,o,this._defsUsePending,!1,!1),o.setShape({cx:parseFloat(r.getAttribute("cx")||"0"),cy:parseFloat(r.getAttribute("cy")||"0"),r:parseFloat(r.getAttribute("r")||"0")}),o.silent=!0,o},line:function(r,n){var o=new Line$1;return inheritStyle(n,o),parseAttributes(r,o,this._defsUsePending,!1,!1),o.setShape({x1:parseFloat(r.getAttribute("x1")||"0"),y1:parseFloat(r.getAttribute("y1")||"0"),x2:parseFloat(r.getAttribute("x2")||"0"),y2:parseFloat(r.getAttribute("y2")||"0")}),o.silent=!0,o},ellipse:function(r,n){var o=new Ellipse;return inheritStyle(n,o),parseAttributes(r,o,this._defsUsePending,!1,!1),o.setShape({cx:parseFloat(r.getAttribute("cx")||"0"),cy:parseFloat(r.getAttribute("cy")||"0"),rx:parseFloat(r.getAttribute("rx")||"0"),ry:parseFloat(r.getAttribute("ry")||"0")}),o.silent=!0,o},polygon:function(r,n){var o=r.getAttribute("points"),s;o&&(s=parsePoints(o));var l=new Polygon({shape:{points:s||[]},silent:!0});return inheritStyle(n,l),parseAttributes(r,l,this._defsUsePending,!1,!1),l},polyline:function(r,n){var o=r.getAttribute("points"),s;o&&(s=parsePoints(o));var l=new Polyline$1({shape:{points:s||[]},silent:!0});return inheritStyle(n,l),parseAttributes(r,l,this._defsUsePending,!1,!1),l},image:function(r,n){var o=new ZRImage;return inheritStyle(n,o),parseAttributes(r,o,this._defsUsePending,!1,!1),o.setStyle({image:r.getAttribute("xlink:href")||r.getAttribute("href"),x:+r.getAttribute("x"),y:+r.getAttribute("y"),width:+r.getAttribute("width"),height:+r.getAttribute("height")}),o.silent=!0,o},text:function(r,n){var o=r.getAttribute("x")||"0",s=r.getAttribute("y")||"0",l=r.getAttribute("dx")||"0",u=r.getAttribute("dy")||"0";this._textX=parseFloat(o)+parseFloat(l),this._textY=parseFloat(s)+parseFloat(u);var c=new Group$3;return inheritStyle(n,c),parseAttributes(r,c,this._defsUsePending,!1,!0),c},tspan:function(r,n){var o=r.getAttribute("x"),s=r.getAttribute("y");o!=null&&(this._textX=parseFloat(o)),s!=null&&(this._textY=parseFloat(s));var l=r.getAttribute("dx")||"0",u=r.getAttribute("dy")||"0",c=new Group$3;return inheritStyle(n,c),parseAttributes(r,c,this._defsUsePending,!1,!0),this._textX+=parseFloat(l),this._textY+=parseFloat(u),c},path:function(r,n){var o=r.getAttribute("d")||"",s=createFromString(o);return inheritStyle(n,s),parseAttributes(r,s,this._defsUsePending,!1,!1),s.silent=!0,s}}}(),a}(),paintServerParsers={lineargradient:function(a){var r=parseInt(a.getAttribute("x1")||"0",10),n=parseInt(a.getAttribute("y1")||"0",10),o=parseInt(a.getAttribute("x2")||"10",10),s=parseInt(a.getAttribute("y2")||"0",10),l=new LinearGradient(r,n,o,s);return parsePaintServerUnit(a,l),parseGradientColorStops(a,l),l},radialgradient:function(a){var r=parseInt(a.getAttribute("cx")||"0",10),n=parseInt(a.getAttribute("cy")||"0",10),o=parseInt(a.getAttribute("r")||"0",10),s=new RadialGradient(r,n,o);return parsePaintServerUnit(a,s),parseGradientColorStops(a,s),s}};function parsePaintServerUnit(a,r){var n=a.getAttribute("gradientUnits");n==="userSpaceOnUse"&&(r.global=!0)}function parseGradientColorStops(a,r){for(var n=a.firstChild;n;){if(n.nodeType===1&&n.nodeName.toLocaleLowerCase()==="stop"){var o=n.getAttribute("offset"),s=void 0;o&&o.indexOf("%")>0?s=parseInt(o,10)/100:o?s=parseFloat(o):s=0;var l={};parseInlineStyle(n,l,l);var u=l.stopColor||n.getAttribute("stop-color")||"#000000",c=l.stopOpacity||n.getAttribute("stop-opacity");if(c){var f=parse(u),d=f&&f[3];d&&(f[3]*=parseCssFloat(c),u=stringify(f,"rgba"))}r.colorStops.push({offset:s,color:u})}n=n.nextSibling}}function inheritStyle(a,r){a&&a.__inheritedStyle&&(r.__inheritedStyle||(r.__inheritedStyle={}),defaults(r.__inheritedStyle,a.__inheritedStyle))}function parsePoints(a){for(var r=splitNumberSequence(a),n=[],o=0;o<r.length;o+=2){var s=parseFloat(r[o]),l=parseFloat(r[o+1]);n.push([s,l])}return n}function parseAttributes(a,r,n,o,s){var l=r,u=l.__inheritedStyle=l.__inheritedStyle||{},c={};a.nodeType===1&&(parseTransformAttribute(a,r),parseInlineStyle(a,u,c),o||parseAttributeStyle(a,u,c)),l.style=l.style||{},u.fill!=null&&(l.style.fill=getFillStrokeStyle(l,"fill",u.fill,n)),u.stroke!=null&&(l.style.stroke=getFillStrokeStyle(l,"stroke",u.stroke,n)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(f){u[f]!=null&&(l.style[f]=parseFloat(u[f]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(f){u[f]!=null&&(l.style[f]=u[f])}),s&&(l.__selfStyle=c),u.lineDash&&(l.style.lineDash=map$1(splitNumberSequence(u.lineDash),function(f){return parseFloat(f)})),(u.visibility==="hidden"||u.visibility==="collapse")&&(l.invisible=!0),u.display==="none"&&(l.ignore=!0)}function applyTextAlignment(a,r){var n=r.__selfStyle;if(n){var o=n.textBaseline,s=o;!o||o==="auto"||o==="baseline"?s="alphabetic":o==="before-edge"||o==="text-before-edge"?s="top":o==="after-edge"||o==="text-after-edge"?s="bottom":(o==="central"||o==="mathematical")&&(s="middle"),a.style.textBaseline=s}var l=r.__inheritedStyle;if(l){var u=l.textAlign,c=u;u&&(u==="middle"&&(c="center"),a.style.textAlign=c)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(a,r,n,o){var s=n&&n.match(urlRegex);if(s){var l=trim$1(s[1]);o.push([a,r,l]);return}return n==="none"&&(n=null),n}function applyDefs(a,r){for(var n=0;n<r.length;n++){var o=r[n];o[0].style[o[1]]=a[o[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(a){return a.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(a,r){var n=a.getAttribute("transform");if(n){n=n.replace(/,/g," ");var o=[],s=null;n.replace(transformRegex,function(g,y,_){return o.push(y,_),""});for(var l=o.length-1;l>0;l-=2){var u=o[l],c=o[l-1],f=splitNumberSequence(u);switch(s=s||create$1(),c){case"translate":translate(s,s,[parseFloat(f[0]),parseFloat(f[1]||"0")]);break;case"scale":scale$1(s,s,[parseFloat(f[0]),parseFloat(f[1]||f[0])]);break;case"rotate":rotate(s,s,-parseFloat(f[0])*DEGREE_TO_ANGLE,[parseFloat(f[1]||"0"),parseFloat(f[2]||"0")]);break;case"skewX":var d=Math.tan(parseFloat(f[0])*DEGREE_TO_ANGLE);mul(s,[1,0,d,1,0,0],s);break;case"skewY":var v=Math.tan(parseFloat(f[0])*DEGREE_TO_ANGLE);mul(s,[1,v,0,1,0,0],s);break;case"matrix":s[0]=parseFloat(f[0]),s[1]=parseFloat(f[1]),s[2]=parseFloat(f[2]),s[3]=parseFloat(f[3]),s[4]=parseFloat(f[4]),s[5]=parseFloat(f[5]);break}}r.setLocalTransform(s)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(a,r,n){var o=a.getAttribute("style");if(o){styleRegex.lastIndex=0;for(var s;(s=styleRegex.exec(o))!=null;){var l=s[1],u=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,l)?INHERITABLE_STYLE_ATTRIBUTES_MAP[l]:null;u&&(r[u]=s[2]);var c=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,l)?SELF_STYLE_ATTRIBUTES_MAP[l]:null;c&&(n[c]=s[2])}}}function parseAttributeStyle(a,r,n){for(var o=0;o<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;o++){var s=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[o],l=a.getAttribute(s);l!=null&&(r[INHERITABLE_STYLE_ATTRIBUTES_MAP[s]]=l)}for(var o=0;o<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;o++){var s=SELF_STYLE_ATTRIBUTES_MAP_KEYS[o],l=a.getAttribute(s);l!=null&&(n[SELF_STYLE_ATTRIBUTES_MAP[s]]=l)}}function makeViewBoxTransform(a,r){var n=r.width/a.width,o=r.height/a.height,s=Math.min(n,o);return{scale:s,x:-(a.x+a.width/2)*s+(r.x+r.width/2),y:-(a.y+a.height/2)*s+(r.y+r.height/2)}}function parseSVG(a,r){var n=new SVGParser;return n.parse(a,r)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=function(){function a(r,n){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=r,this._parsedXML=parseXML(n)}return a.prototype.load=function(){var r=this._firstGraphic;if(!r){r=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(r),this._boundingRect=this._firstGraphic.boundingRect.clone();var n=createRegions(r.named),o=n.regions,s=n.regionsMap;this._regions=o,this._regionsMap=s}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},a.prototype._buildGraphic=function(r){var n,o;try{n=r&&parseSVG(r,{ignoreViewBox:!0,ignoreRootClip:!0})||{},o=n.root,assert(o!=null)}catch(x){throw new Error(`Invalid svg format
`+x.message)}var s=new Group$3;s.add(o),s.isGeoSVGGraphicRoot=!0;var l=n.width,u=n.height,c=n.viewBoxRect,f=this._boundingRect;if(!f){var d=void 0,v=void 0,g=void 0,y=void 0;if(l!=null?(d=0,g=l):c&&(d=c.x,g=c.width),u!=null?(v=0,y=u):c&&(v=c.y,y=c.height),d==null||v==null){var _=o.getBoundingRect();d==null&&(d=_.x,g=_.width),v==null&&(v=_.y,y=_.height)}f=this._boundingRect=new BoundingRect(d,v,g,y)}if(c){var S=makeViewBoxTransform(c,f);o.scaleX=o.scaleY=S.scale,o.x=S.x,o.y=S.y}s.setClipPath(new Rect$2({shape:f.plain()}));var b=[];return each$f(n.named,function(x){REGION_AVAILABLE_SVG_TAG_MAP.get(x.svgNodeTagLower)!=null&&(b.push(x),setSilent(x.el))}),{root:s,boundingRect:f,named:b}},a.prototype.useGraphic=function(r){var n=this._usedGraphicMap,o=n.get(r);return o||(o=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),n.set(r,o),o)},a.prototype.freeGraphic=function(r){var n=this._usedGraphicMap,o=n.get(r);o&&(n.removeKey(r),this._freedGraphics.push(o))},a}();function setSilent(a){a.silent=!1,a.isGroup&&a.traverse(function(r){r.silent=!1})}function createRegions(a){var r=[],n=createHashMap();return each$f(a,function(o){if(o.namedFrom==null){var s=new GeoSVGRegion(o.name,o.el);r.push(s),n.set(o.name,s)}}),{regions:r,regionsMap:n}}var geoCoord=[126,25],nanhaiName="",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i=0;i<points$1.length;i++)for(var k=0;k<points$1[i].length;k++)points$1[i][k][0]/=10.5,points$1[i][k][1]/=-10.5/.75,points$1[i][k][0]+=geoCoord[0],points$1[i][k][1]+=geoCoord[1];function fixNanhai(a,r){if(a==="china"){for(var n=0;n<r.length;n++)if(r[n].name===nanhaiName)return;r.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(o){return{type:"polygon",exterior:o}}),geoCoord))}}var coordsOffsetMap={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function fixTextCoords(a,r){if(a==="china"){var n=coordsOffsetMap[r.name];if(n){var o=r.getCenter();o[0]+=n[0]/10.5,o[1]+=-n[1]/(10.5/.75),r.setCenter(o)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(a,r){a==="china"&&r.name===""&&r.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=function(){function a(r,n,o){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=r,this._specialAreas=o,this._geoJSON=parseInput(n)}return a.prototype.load=function(r,n){n=n||DEFAULT_NAME_PROPERTY;var o=this._parsedMap.get(n);if(!o){var s=this._parseToRegions(n);o=this._parsedMap.set(n,{regions:s,boundingRect:calculateBoundingRect(s)})}var l=createHashMap(),u=[];return each$f(o.regions,function(c){var f=c.name;r&&hasOwn(r,f)&&(c=c.cloneShallow(f=r[f])),u.push(c),l.set(f,c)}),{regions:u,boundingRect:o.boundingRect||new BoundingRect(0,0,0,0),regionsMap:l}},a.prototype._parseToRegions=function(r){var n=this._mapName,o=this._geoJSON,s;try{s=o?parseGeoJSON(o,r):[]}catch(l){throw new Error(`Invalid geoJson format
`+l.message)}return fixNanhai(n,s),each$f(s,function(l){var u=l.name;fixTextCoords(n,l),fixDiaoyuIsland(n,l);var c=this._specialAreas&&this._specialAreas[u];c&&l.transformTo(c.left,c.top,c.width,c.height)},this),s},a.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},a}();function calculateBoundingRect(a){for(var r,n=0;n<a.length;n++){var o=a[n].getBoundingRect();r=r||o.clone(),r.union(o)}return r}function parseInput(a){return isString(a)?typeof JSON<"u"&&JSON.parse?JSON.parse(a):new Function("return ("+a+");")():a}var storage=createHashMap();const geoSourceManager={registerMap:function(a,r,n){if(r.svg){var o=new GeoSVGResource(a,r.svg);storage.set(a,o)}else{var s=r.geoJson||r.geoJSON;s&&!r.features?n=r.specialAreas:s=r;var o=new GeoJSONResource(a,s,n);storage.set(a,o)}},getGeoResource:function(a){return storage.get(a)},getMapForUser:function(a){var r=storage.get(a);return r&&r.type==="geoJSON"&&r.getMapForUser()},load:function(a,r,n){var o=storage.get(a);if(o)return o.load(r,n)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(a){var r=a.getItemStyle(),n=a.get("areaColor");return n!=null&&(r.fill=n),r}function fixLineStyle(a){var r=a.style;r&&(r.stroke=r.stroke||r.fill,r.fill=null)}var MapDraw=function(){function a(r){var n=this.group=new Group$3,o=this._transformGroup=new Group$3;n.add(o),this.uid=getUID("ec_map_draw"),this._controller=new RoamController(r.getZr()),this._controllerHost={target:o},o.add(this._regionsGroup=new Group$3),o.add(this._svgGroup=new Group$3)}return a.prototype.draw=function(r,n,o,s,l){var u=r.mainType==="geo",c=r.getData&&r.getData();u&&n.eachComponent({mainType:"series",subType:"map"},function(w){!c&&w.getHostGeoModel()===r&&(c=w.getData())});var f=r.coordinateSystem,d=this._regionsGroup,v=this._transformGroup,g=f.getTransformInfo(),y=g.raw,_=g.roam,S=!d.childAt(0)||l,b=r.getShallow("clip",!0),x;b?(x=f.getViewRect().clone(),this.group.setClipPath(new Rect$2({shape:x.clone()}))):this.group.removeClipPath(),S?(v.x=_.x,v.y=_.y,v.scaleX=_.scaleX,v.scaleY=_.scaleY,v.dirty()):updateProps$1(v,_,r);var T=c&&c.getVisual("visualMeta")&&c.getVisual("visualMeta").length>0,A={api:o,geo:f,mapOrGeoModel:r,data:c,isVisualEncodedByVisualMap:T,isGeo:u,transformInfoRaw:y};f.resourceType==="geoJSON"?this._buildGeoJSON(A):f.resourceType==="geoSVG"&&this._buildSVG(A),this._updateController(r,x,n,o),this._updateMapSelectHandler(r,d,o,s)},a.prototype._buildGeoJSON=function(r){var n=this._regionsGroupByName=createHashMap(),o=createHashMap(),s=this._regionsGroup,l=r.transformInfoRaw,u=r.mapOrGeoModel,c=r.data,f=r.geo.projection,d=f&&f.stream;function v(_,S){return S&&(_=S(_)),_&&[_[0]*l.scaleX+l.x,_[1]*l.scaleY+l.y]}function g(_){for(var S=[],b=!d&&f&&f.project,x=0;x<_.length;++x){var T=v(_[x],b);T&&S.push(T)}return S}function y(_){return{shape:{points:g(_)}}}s.removeAll(),each$f(r.geo.regions,function(_){var S=_.name,b=n.get(S),x=o.get(S)||{},T=x.dataIdx,A=x.regionModel;if(!b){b=n.set(S,new Group$3),s.add(b),T=c?c.indexOfName(S):null,A=r.isGeo?u.getRegionModel(S):c?c.getItemModel(T):null;var w=A.get("silent",!0);w!=null&&(b.silent=w),o.set(S,{dataIdx:T,regionModel:A})}var C=[],E=[];each$f(_.geometries,function(M){if(M.type==="polygon"){var R=[M.exterior].concat(M.interiors||[]);d&&(R=projectPolys(R,d)),each$f(R,function($){C.push(new Polygon(y($)))})}else{var O=M.points;d&&(O=projectPolys(O,d,!0)),each$f(O,function($){E.push(new Polyline$1(y($)))})}});var P=v(_.getCenter(),f&&f.project);function I(M,R){if(M.length){var O=new CompoundPath({culling:!0,segmentIgnoreThreshold:1,shape:{paths:M}});b.add(O),applyOptionStyleForRegion(r,O,T,A),resetLabelForRegion(r,O,S,A,u,T,P),R&&(fixLineStyle(O),each$f(O.states,fixLineStyle))}}I(C),I(E,!0)}),n.each(function(_,S){var b=o.get(S),x=b.dataIdx,T=b.regionModel;resetEventTriggerForRegion(r,_,S,T,u,x),resetTooltipForRegion(r,_,S,T,u),resetStateTriggerForRegion(r,_,S,T,u)},this)},a.prototype._buildSVG=function(r){var n=r.geo.map,o=r.transformInfoRaw;this._svgGroup.x=o.x,this._svgGroup.y=o.y,this._svgGroup.scaleX=o.scaleX,this._svgGroup.scaleY=o.scaleY,this._svgResourceChanged(n)&&(this._freeSVG(),this._useSVG(n));var s=this._svgDispatcherMap=createHashMap(),l=!1;each$f(this._svgGraphicRecord.named,function(u){var c=u.name,f=r.mapOrGeoModel,d=r.data,v=u.svgNodeTagLower,g=u.el,y=d?d.indexOfName(c):null,_=f.getRegionModel(c);OPTION_STYLE_ENABLED_TAG_MAP.get(v)!=null&&g instanceof Displayable&&applyOptionStyleForRegion(r,g,y,_),g instanceof Displayable&&(g.culling=!0);var S=_.get("silent",!0);if(S!=null&&(g.silent=S),g.z2EmphasisLift=0,!u.namedFrom&&(LABEL_HOST_MAP.get(v)!=null&&resetLabelForRegion(r,g,c,_,f,y,null),resetEventTriggerForRegion(r,g,c,_,f,y),resetTooltipForRegion(r,g,c,_,f),STATE_TRIGGER_TAG_MAP.get(v)!=null)){var b=resetStateTriggerForRegion(r,g,c,_,f);b==="self"&&(l=!0);var x=s.get(c)||s.set(c,[]);x.push(g)}},this),this._enableBlurEntireSVG(l,r)},a.prototype._enableBlurEntireSVG=function(r,n){if(r&&n.isGeo){var o=n.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),s=o.opacity;this._svgGraphicRecord.root.traverse(function(l){if(!l.isGroup){setDefaultStateProxy(l);var u=l.ensureState("blur").style||{};u.opacity==null&&s!=null&&(u.opacity=s),l.ensureState("emphasis")}})}},a.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},a.prototype.findHighDownDispatchers=function(r,n){if(r==null)return[];var o=n.coordinateSystem;if(o.resourceType==="geoJSON"){var s=this._regionsGroupByName;if(s){var l=s.get(r);return l?[l]:[]}}else if(o.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(r)||[]},a.prototype._svgResourceChanged=function(r){return this._svgMapName!==r},a.prototype._useSVG=function(r){var n=geoSourceManager.getGeoResource(r);if(n&&n.type==="geoSVG"){var o=n.useGraphic(this.uid);this._svgGroup.add(o.root),this._svgGraphicRecord=o,this._svgMapName=r}},a.prototype._freeSVG=function(){var r=this._svgMapName;if(r!=null){var n=geoSourceManager.getGeoResource(r);n&&n.type==="geoSVG"&&n.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},a.prototype._updateController=function(r,n,o,s){var l=r.coordinateSystem,u=this._controller,c=this._controllerHost;c.zoomLimit=r.get("scaleLimit"),c.zoom=l.getZoom(),u.enable(r.get("roam")||!1,{api:s,zInfo:{component:r},triggerInfo:{roamTrigger:r.get("roamTrigger"),isInSelf:function(v,g,y){return l.containPoint([g,y])},isInClip:function(v,g,y){return!n||n.contain(g,y)}}});var f=r.mainType;function d(){var v={type:"geoRoam",componentType:f};return v[f+"Id"]=r.id,v}u.off("pan").on("pan",function(v){this._mouseDownFlag=!1,updateViewOnPan(c,v.dx,v.dy),s.dispatchAction(extend(d(),{dx:v.dx,dy:v.dy,animation:{duration:0}}))},this),u.off("zoom").on("zoom",function(v){this._mouseDownFlag=!1,updateViewOnZoom(c,v.scale,v.originX,v.originY),s.dispatchAction(extend(d(),{totalZoom:c.zoom,zoom:v.scale,originX:v.originX,originY:v.originY,animation:{duration:0}}))},this)},a.prototype.resetForLabelLayout=function(){this.group.traverse(function(r){var n=r.getTextContent();n&&(n.ignore=mapLabelRaw(n).ignore)})},a.prototype._updateMapSelectHandler=function(r,n,o,s){var l=this;n.off("mousedown"),n.off("click"),r.get("selectedMode")&&(n.on("mousedown",function(){l._mouseDownFlag=!0}),n.on("click",function(u){l._mouseDownFlag&&(l._mouseDownFlag=!1)}))},a}();function applyOptionStyleForRegion(a,r,n,o){var s=o.getModel("itemStyle"),l=o.getModel(["emphasis","itemStyle"]),u=o.getModel(["blur","itemStyle"]),c=o.getModel(["select","itemStyle"]),f=getFixedItemStyle(s),d=getFixedItemStyle(l),v=getFixedItemStyle(c),g=getFixedItemStyle(u),y=a.data;if(y){var _=y.getItemVisual(n,"style"),S=y.getItemVisual(n,"decal");a.isVisualEncodedByVisualMap&&_.fill&&(f.fill=_.fill),S&&(f.decal=createOrUpdatePatternFromDecal(S,a.api))}r.setStyle(f),r.style.strokeNoScale=!0,r.ensureState("emphasis").style=d,r.ensureState("select").style=v,r.ensureState("blur").style=g,setDefaultStateProxy(r)}function resetLabelForRegion(a,r,n,o,s,l,u){var c=a.data,f=a.isGeo,d=c&&isNaN(c.get(c.mapDimension("value"),l)),v=c&&c.getItemLayout(l);if(f||d||v&&v.showLabel){var g=f?n:l,y=void 0;(!c||l>=0)&&(y=s);var _=u?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(r,getLabelStatesModels(o),{labelFetcher:y,labelDataIndex:g,defaultText:n},_);var S=r.getTextContent();if(S&&(mapLabelRaw(S).ignore=S.ignore,r.textConfig&&u)){var b=r.getBoundingRect().clone();r.textConfig.layoutRect=b,r.textConfig.position=[(u[0]-b.x)/b.width*100+"%",(u[1]-b.y)/b.height*100+"%"]}r.disableLabelAnimation=!0}else r.removeTextContent(),r.removeTextConfig(),r.disableLabelAnimation=null}function resetEventTriggerForRegion(a,r,n,o,s,l){a.data?a.data.setItemGraphicEl(l,r):getECData(r).eventData={componentType:"geo",componentIndex:s.componentIndex,geoIndex:s.componentIndex,name:n,region:o&&o.option||{}}}function resetTooltipForRegion(a,r,n,o,s){a.data||setTooltipConfig({el:r,componentModel:s,itemName:n,itemTooltipOption:o.get("tooltip")})}function resetStateTriggerForRegion(a,r,n,o,s){r.highDownSilentOnTouch=!!s.get("selectedMode");var l=o.getModel("emphasis"),u=l.get("focus");return toggleHoverEmphasis(r,u,l.get("blurScope"),l.get("disabled")),a.isGeo&&enableComponentHighDownFeatures(r,s,n),u}function projectPolys(a,r,n){var o=[],s;function l(){s=[]}function u(){s.length&&(o.push(s),s=[])}var c=r({polygonStart:l,polygonEnd:u,lineStart:l,lineEnd:u,point:function(f,d){isFinite(f)&&isFinite(d)&&s.push([f,d])},sphere:function(){}});return!n&&c.polygonStart(),each$f(a,function(f){c.lineStart();for(var d=0;d<f.length;d++)c.point(f[d][0],f[d][1]);c.lineEnd()}),!n&&c.polygonEnd(),o}var MapView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s,l){if(!(l&&l.type==="mapToggleSelect"&&l.from===this.uid)){var u=this.group;if(u.removeAll(),!n.getHostGeoModel()){if(this._mapDraw&&l&&l.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),l&&l.type==="geoRoam"&&l.componentType==="series"&&l.seriesId===n.id){var c=this._mapDraw;c&&u.add(c.group)}else if(n.needsDrawMap){var c=this._mapDraw||new MapDraw(s);u.add(c.group),c.draw(n,o,s,this,l),this._mapDraw=c}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;n.get("showLegendSymbol")&&o.getComponent("legend")&&this._renderSymbols(n,o,s)}}},r.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},r.prototype._renderSymbols=function(n,o,s){var l=n.originalData,u=this.group;l.each(l.mapDimension("value"),function(c,f){if(!isNaN(c)){var d=l.getItemLayout(f);if(!(!d||!d.point)){var v=d.point,g=d.offset,y=new Circle({style:{fill:n.getData().getVisual("style").fill},shape:{cx:v[0]+g*9,cy:v[1],r:3},silent:!0,z2:8+(g?0:Z2_EMPHASIS_LIFT+1)});if(!g){var _=n.mainSeries.getData(),S=l.getName(f),b=_.indexOfName(S),x=l.getItemModel(f),T=x.getModel("label"),A=_.getItemGraphicEl(b);setLabelStyle(y,getLabelStatesModels(x),{labelFetcher:{getFormattedLabel:function(w,C){return n.getFormattedLabel(b,C)}},defaultText:S}),y.disableLabelAnimation=!0,T.get("position")||y.setTextConfig({position:"bottom"}),A.onHoverStateChange=function(w){setStatesFlag(y,w)}}u.add(y)}}})},r.type="map",r}(ChartView),MapSeries=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.needsDrawMap=!1,n.seriesGroup=[],n.getTooltipPosition=function(o){if(o!=null){var s=this.getData().getName(o),l=this.coordinateSystem,u=l.getRegion(s);return u&&l.dataToPoint(u.getCenter())}},n}return r.prototype.getInitialData=function(n){for(var o=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),s=createHashMap(),l=[],u=0,c=o.count();u<c;u++){var f=o.getName(u);s.set(f,u)}var d=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$f(d.regions,function(v){var g=v.name,y=s.get(g),_=v.properties&&v.properties.echartsStyle,S;y==null?(S={name:g},l.push(S)):S=o.getRawDataItem(y),_&&merge(S,_)}),o.appendData(l),o},r.prototype.getHostGeoModel=function(){if(decideCoordSysUsageKind(this).kind!==CoordinateSystemUsageKind.boxCoordSys)return this.getReferringComponents("geo",{useDefault:!1,enableAll:!1,enableNone:!1}).models[0]},r.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},r.prototype.getRawValue=function(n){var o=this.getData();return o.get(o.mapDimension("value"),n)},r.prototype.getRegionModel=function(n){var o=this.getData();return o.getItemModel(o.indexOfName(n))},r.prototype.formatTooltip=function(n,o,s){for(var l=this.getData(),u=this.getRawValue(n),c=l.getName(n),f=this.seriesGroup,d=[],v=0;v<f.length;v++){var g=f[v].originalData.indexOfName(c),y=l.mapDimension("value");isNaN(f[v].originalData.get(y,g))||d.push(f[v].name)}return createTooltipMarkup("section",{header:d.join(", "),noHeader:!d.length,blocks:[createTooltipMarkup("nameValue",{name:c,value:u})]})},r.prototype.setZoom=function(n){this.option.zoom=n},r.prototype.setCenter=function(n){this.option.center=n},r.prototype.getLegendIcon=function(n){var o=n.icon||"roundRect",s=createSymbol$1(o,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill);return s.setStyle(n.itemStyle),s.style.stroke="none",o.indexOf("empty")>-1&&(s.style.stroke=s.style.fill,s.style.fill=tokens.color.neutral00,s.style.lineWidth=2),s},r.type="series.map",r.dependencies=["geo"],r.layoutMode="box",r.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:tokens.color.tertiary},itemStyle:{borderWidth:.5,borderColor:tokens.color.border,areaColor:tokens.color.background},emphasis:{label:{show:!0,color:tokens.color.primary},itemStyle:{areaColor:tokens.color.highlight}},select:{label:{show:!0,color:tokens.color.primary},itemStyle:{color:tokens.color.highlight}},nameProperty:"name"},r}(SeriesModel);function dataStatistics(a,r){var n={};return each$f(a,function(o){o.each(o.mapDimension("value"),function(s,l){var u="ec-"+o.getName(l);n[u]=n[u]||[],isNaN(s)||n[u].push(s)})}),a[0].map(a[0].mapDimension("value"),function(o,s){for(var l="ec-"+a[0].getName(s),u=0,c=1/0,f=-1/0,d=n[l].length,v=0;v<d;v++)c=Math.min(c,n[l][v]),f=Math.max(f,n[l][v]),u+=n[l][v];var g;return r==="min"?g=c:r==="max"?g=f:r==="average"?g=u/d:g=u,d===0?NaN:g})}function mapDataStatistic(a){var r={};a.eachSeriesByType("map",function(n){var o=n.getHostGeoModel(),s=o?"o"+o.id:"i"+n.getMapType();(r[s]=r[s]||[]).push(n)}),each$f(r,function(n,o){for(var s=dataStatistics(map$1(n,function(u){return u.getData()}),n[0].get("mapValueCalculation")),l=0;l<n.length;l++)n[l].originalData=n[l].getData();for(var l=0;l<n.length;l++)n[l].seriesGroup=n,n[l].needsDrawMap=l===0&&!n[l].getHostGeoModel(),n[l].setData(s.cloneShallow()),n[l].mainSeries=n[0]})}function mapSymbolLayout(a){var r={};a.eachSeriesByType("map",function(n){var o=n.getMapType();if(!(n.getHostGeoModel()||r[o])){var s={};each$f(n.seriesGroup,function(u){var c=u.coordinateSystem,f=u.originalData;u.get("showLegendSymbol")&&a.getComponent("legend")&&f.each(f.mapDimension("value"),function(d,v){var g=f.getName(v),y=c.getRegion(g);if(!(!y||isNaN(d))){var _=s[g]||0,S=c.dataToPoint(y.getCenter());s[g]=_+1,f.setItemLayout(v,{point:S,offset:_})}})});var l=n.getData();l.each(function(u){var c=l.getName(u),f=l.getItemLayout(u)||{};f.showLabel=!s[c],l.setItemLayout(u,f)}),r[o]=!0}})}var v2ApplyTransform=applyTransform$1,View=function(a){__extends(r,a);function r(n,o){var s=a.call(this)||this;return s.type="view",s.dimensions=["x","y"],s._roamTransformable=new Transformable,s._rawTransformable=new Transformable,s.name=n,s._opt=o,s}return r.prototype.setBoundingRect=function(n,o,s,l){return this._rect=new BoundingRect(n,o,s,l),this._updateCenterAndZoom(),this._rect},r.prototype.getBoundingRect=function(){return this._rect},r.prototype.setViewRect=function(n,o,s,l){this._transformTo(n,o,s,l),this._viewRect=new BoundingRect(n,o,s,l)},r.prototype._transformTo=function(n,o,s,l){var u=this.getBoundingRect(),c=this._rawTransformable;c.transform=u.calculateTransform(new BoundingRect(n,o,s,l));var f=c.parent;c.parent=null,c.decomposeTransform(),c.parent=f,this._updateTransform()},r.prototype.setCenter=function(n){var o=this._opt;o&&o.api&&o.ecModel&&o.ecModel.getShallow("legacyViewCoordSysCenterBase")&&n&&(n=[parsePercent(n[0],o.api.getWidth()),parsePercent(n[1],o.api.getWidth())]),this._centerOption=clone$4(n),this._updateCenterAndZoom()},r.prototype.setZoom=function(n){this._zoom=clampByZoomLimit(n||1,this.zoomLimit),this._updateCenterAndZoom()},r.prototype.getDefaultCenter=function(){var n=this.getBoundingRect(),o=n.x+n.width/2,s=n.y+n.height/2;return[o,s]},r.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},r.prototype.getZoom=function(){return this._zoom||1},r.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},r.prototype._updateCenterAndZoom=function(){var n=this._centerOption,o=this._rect;n&&o&&(this._center=[parsePercent(n[0],o.width,o.x),parsePercent(n[1],o.height,o.y)]);var s=this._rawTransformable.getLocalTransform(),l=this._roamTransformable,u=this.getDefaultCenter(),c=this.getCenter(),f=this.getZoom();c=applyTransform$1([],c,s),u=applyTransform$1([],u,s),l.originX=c[0],l.originY=c[1],l.x=u[0]-c[0],l.y=u[1]-c[1],l.scaleX=l.scaleY=f,this._updateTransform()},r.prototype._updateTransform=function(){var n=this._roamTransformable,o=this._rawTransformable;o.parent=n,n.updateTransform(),o.updateTransform(),copy(this.transform||(this.transform=[]),o.transform||create$1()),this._rawTransform=o.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},r.prototype.getTransformInfo=function(){var n=this._rawTransformable,o=this._roamTransformable,s=new Transformable;return s.transform=o.transform,s.decomposeTransform(),{roam:{x:s.x,y:s.y,scaleX:s.scaleX,scaleY:s.scaleY},raw:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY}}},r.prototype.getViewRect=function(){return this._viewRect},r.prototype.getViewRectAfterRoam=function(){var n=this.getBoundingRect().clone();return n.applyTransform(this.transform),n},r.prototype.dataToPoint=function(n,o,s){var l=o?this._rawTransform:this.transform;return s=s||[],l?v2ApplyTransform(s,n,l):copy$1(s,n)},r.prototype.pointToData=function(n,o,s){s=s||[];var l=this.invTransform;return l?v2ApplyTransform(s,n,l):(s[0]=n[0],s[1]=n[1],s)},r.prototype.convertToPixel=function(n,o,s){var l=getCoordSys$5(o);return l===this?l.dataToPoint(s):null},r.prototype.convertFromPixel=function(n,o,s){var l=getCoordSys$5(o);return l===this?l.pointToData(s):null},r.prototype.containPoint=function(n){return this.getViewRectAfterRoam().contain(n[0],n[1])},r.dimensions=["x","y"],r}(Transformable);function getCoordSys$5(a){var r=a.seriesModel;return r?r.coordinateSystem:null}var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=function(a){__extends(r,a);function r(n,o,s){var l=a.call(this,n,{api:s.api,ecModel:s.ecModel})||this;l.dimensions=geo2DDimensions,l.type="geo",l._nameCoordMap=createHashMap(),l.map=o;var u=s.projection,c=geoSourceManager.load(o,s.nameMap,s.nameProperty),f=geoSourceManager.getGeoResource(o);l.resourceType=f?f.type:null;var d=l.regions=c.regions,v=GEO_DEFAULT_PARAMS[f.type];l._regionsMap=c.regionsMap,l.regions=c.regions,l.projection=u;var g;if(u)for(var y=0;y<d.length;y++){var _=d[y].getBoundingRect(u);g=g||_.clone(),g.union(_)}else g=c.boundingRect;return l.setBoundingRect(g.x,g.y,g.width,g.height),l.aspectScale=u?1:retrieve2(s.aspectScale,v.aspectScale),l._invertLongitute=u?!1:v.invertLongitute,l}return r.prototype._transformTo=function(n,o,s,l){var u=this.getBoundingRect(),c=this._invertLongitute;u=u.clone(),c&&(u.y=-u.y-u.height);var f=this._rawTransformable;f.transform=u.calculateTransform(new BoundingRect(n,o,s,l));var d=f.parent;f.parent=null,f.decomposeTransform(),f.parent=d,c&&(f.scaleY=-f.scaleY),this._updateTransform()},r.prototype.getRegion=function(n){return this._regionsMap.get(n)},r.prototype.getRegionByCoord=function(n){for(var o=this.regions,s=0;s<o.length;s++){var l=o[s];if(l.type==="geoJSON"&&l.contain(n))return o[s]}},r.prototype.addGeoCoord=function(n,o){this._nameCoordMap.set(n,o)},r.prototype.getGeoCoord=function(n){var o=this._regionsMap.get(n);return this._nameCoordMap.get(n)||o&&o.getCenter()},r.prototype.dataToPoint=function(n,o,s){if(isString(n)&&(n=this.getGeoCoord(n)),n){var l=this.projection;return l&&(n=l.project(n)),n&&this.projectedToPoint(n,o,s)}},r.prototype.pointToData=function(n,o,s){var l=this.projection;return l&&(n=l.unproject(n)),n&&this.pointToProjected(n,s)},r.prototype.pointToProjected=function(n,o){return a.prototype.pointToData.call(this,n,0,o)},r.prototype.projectedToPoint=function(n,o,s){return a.prototype.dataToPoint.call(this,n,o,s)},r.prototype.convertToPixel=function(n,o,s){var l=getCoordSys$4(o);return l===this?l.dataToPoint(s):null},r.prototype.convertFromPixel=function(n,o,s){var l=getCoordSys$4(o);return l===this?l.pointToData(s):null},r}(View);mixin(Geo,View);function getCoordSys$4(a){var r=a.geoModel,n=a.seriesModel;return r?r.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}function resizeGeo(a,r){var n=a.get("boundingCoords");if(n!=null){var o=n[0],s=n[1];if(isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])){var l=this.projection;if(l){var u=o[0],c=o[1],f=s[0],d=s[1];o=[1/0,1/0],s=[-1/0,-1/0];var v=function(E,P,I,M){for(var R=I-E,O=M-P,$=0;$<=100;$++){var B=$/100,F=l.project([E+R*B,P+O*B]);min$1(o,o,F),max$1(s,s,F)}};v(u,c,f,c),v(f,c,f,d),v(f,d,u,d),v(u,d,f,c)}this.setBoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1])}}var g=this.getBoundingRect(),y=a.get("layoutCenter"),_=a.get("layoutSize"),S=createBoxLayoutReference(a,r).refContainer,b=g.width/g.height*this.aspectScale,x=!1,T,A;y&&_&&(T=[parsePercent(y[0],S.width)+S.x,parsePercent(y[1],S.height)+S.y],A=parsePercent(_,Math.min(S.width,S.height)),!isNaN(T[0])&&!isNaN(T[1])&&!isNaN(A)&&(x=!0));var w;if(x)w={},b>1?(w.width=A,w.height=A/b):(w.height=A,w.width=A*b),w.y=T[1]-w.height/2,w.x=T[0]-w.width/2;else{var C=a.getBoxLayoutParams();C.aspect=b,w=getLayoutRect(C,S),w=applyPreserveAspect(a,w,b)}this.setViewRect(w.x,w.y,w.width,w.height),this.setCenter(a.get("center")),this.setZoom(a.get("zoom"))}function setGeoCoords(a,r){each$f(r.get("geoCoord"),function(n,o){a.addGeoCoord(o,n)})}var GeoCreator=function(){function a(){this.dimensions=geo2DDimensions}return a.prototype.create=function(r,n){var o=[];function s(u){return{nameProperty:u.get("nameProperty"),aspectScale:u.get("aspectScale"),projection:u.get("projection")}}r.eachComponent("geo",function(u,c){var f=u.get("map"),d=new Geo(f+c,f,extend({nameMap:u.get("nameMap"),api:n,ecModel:r},s(u)));d.zoomLimit=u.get("scaleLimit"),o.push(d),u.coordinateSystem=d,d.model=u,d.resize=resizeGeo,d.resize(u,n)}),r.eachSeries(function(u){injectCoordSysByOption({targetModel:u,coordSysType:"geo",coordSysProvider:function(){var c=u.subType==="map"?u.getHostGeoModel():u.getReferringComponents("geo",SINGLE_REFERRING).models[0];return c&&c.coordinateSystem},allowNotFound:!0})});var l={};return r.eachSeriesByType("map",function(u){if(!u.getHostGeoModel()){var c=u.getMapType();l[c]=l[c]||[],l[c].push(u)}}),each$f(l,function(u,c){var f=map$1(u,function(v){return v.get("nameMap")}),d=new Geo(c,c,extend({nameMap:mergeAll(f),api:n,ecModel:r},s(u[0])));d.zoomLimit=retrieve.apply(null,map$1(u,function(v){return v.get("scaleLimit")})),o.push(d),d.resize=resizeGeo,d.resize(u[0],n),each$f(u,function(v){v.coordinateSystem=d,setGeoCoords(d,v)})}),o},a.prototype.getFilledRegions=function(r,n,o,s){for(var l=(r||[]).slice(),u=createHashMap(),c=0;c<l.length;c++)u.set(l[c].name,l[c]);var f=geoSourceManager.load(n,o,s);return each$f(f.regions,function(d){var v=d.name,g=u.get(v),y=d.properties&&d.properties.echartsStyle;g||(g={name:v},l.push(g)),y&&merge(g,y)}),l},a}(),geoCreator=new GeoCreator,GeoModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.init=function(n,o,s){this.mergeDefaultAndTheme(n,s);var l=geoSourceManager.getGeoResource(n.map);if(l&&l.type==="geoJSON"){var u=n.itemStyle=n.itemStyle||{};"color"in u||(u.color=n.defaultItemStyleColor||tokens.color.backgroundTint)}defaultEmphasis(n,"label",["show"])},r.prototype.optionUpdated=function(){var n=this,o=this.option;o.regions=geoCreator.getFilledRegions(o.regions,o.map,o.nameMap,o.nameProperty);var s={};this._optionModelMap=reduce(o.regions||[],function(l,u){var c=u.name;return c&&(l.set(c,new Model(u,n,n.ecModel)),u.selected&&(s[c]=!0)),l},createHashMap()),o.selectedMap||(o.selectedMap=s)},r.prototype.getRegionModel=function(n){return this._optionModelMap.get(n)||new Model(null,this,this.ecModel)},r.prototype.getFormattedLabel=function(n,o){var s=this.getRegionModel(n),l=o==="normal"?s.get(["label","formatter"]):s.get(["emphasis","label","formatter"]),u={name:n};if(isFunction(l))return u.status=o,l(u);if(isString(l))return l.replace("{a}",n??"")},r.prototype.setZoom=function(n){this.option.zoom=n},r.prototype.setCenter=function(n){this.option.center=n},r.prototype.select=function(n){var o=this.option,s=o.selectedMode;if(s){s!=="multiple"&&(o.selectedMap=null);var l=o.selectedMap||(o.selectedMap={});l[n]=!0}},r.prototype.unSelect=function(n){var o=this.option.selectedMap;o&&(o[n]=!1)},r.prototype.toggleSelected=function(n){this[this.isSelected(n)?"unSelect":"select"](n)},r.prototype.isSelected=function(n){var o=this.option.selectedMap;return!!(o&&o[n])},r.type="geo",r.layoutMode="box",r.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:tokens.color.tertiary},itemStyle:{borderWidth:.5,borderColor:tokens.color.border},emphasis:{label:{show:!0,color:tokens.color.primary},itemStyle:{color:tokens.color.highlight}},select:{label:{show:!0,color:tokens.color.primary},itemStyle:{color:tokens.color.highlight}},regions:[]},r}(ComponentModel),GeoView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.focusBlurEnabled=!0,n}return r.prototype.init=function(n,o){this._api=o},r.prototype.render=function(n,o,s,l){if(this._model=n,!n.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw(s));var u=this._mapDraw;u.draw(n,o,s,this,l),u.group.on("click",this._handleRegionClick,this),u.group.silent=n.get("silent"),this.group.add(u.group),this.updateSelectStatus(n,o,s)},r.prototype._handleRegionClick=function(n){var o;findEventDispatcher(n.target,function(s){return(o=getECData(s).eventData)!=null},!0),o&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:o.name})},r.prototype.updateSelectStatus=function(n,o,s){var l=this;this._mapDraw.group.traverse(function(u){var c=getECData(u).eventData;if(c)return l._model.isSelected(c.name)?s.enterSelect(u):s.leaveSelect(u),!0})},r.prototype.findHighDownDispatchers=function(n){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(n,this._model)},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},r.type="geo",r}(ComponentView);function registerMap(a,r,n){geoSourceManager.registerMap(a,r,n)}function install$M(a){a.registerCoordinateSystem("geo",geoCreator),a.registerComponentModel(GeoModel),a.registerComponentView(GeoView),a.registerImpl("registerMap",registerMap),a.registerImpl("getMap",function(n){return geoSourceManager.getMapForUser(n)});function r(n,o){o.update="geo:updateSelectStatus",a.registerAction(o,function(s,l){var u={},c=[];return l.eachComponent({mainType:"geo",query:s},function(f){f[n](s.name);var d=f.coordinateSystem;each$f(d.regions,function(g){u[g.name]=f.isSelected(g.name)||!1});var v=[];each$f(u,function(g,y){u[y]&&v.push(y)}),c.push({geoIndex:f.componentIndex,name:v})}),{selected:u,allSelected:c,name:s.name}})}r("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),r("select",{type:"geoSelect",event:"geoselected"}),r("unSelect",{type:"geoUnSelect",event:"geounselected"}),a.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(n,o,s){var l=n.componentType;l||(n.geoId!=null?l="geo":n.seriesId!=null&&(l="series")),l||(l="series"),o.eachComponent({mainType:l,query:n},function(u){var c=u.coordinateSystem;if(c.type==="geo"){var f=updateCenterAndZoomInAction(c,n,u.get("scaleLimit"));u.setCenter&&u.setCenter(f.center),u.setZoom&&u.setZoom(f.zoom),l==="series"&&each$f(u.seriesGroup,function(d){d.setCenter(f.center),d.setZoom(f.zoom)})}})})}function install$L(a){use(install$M),a.registerChartView(MapView),a.registerSeriesModel(MapSeries),a.registerLayout(mapSymbolLayout),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",a.registerAction)}function init(a){var r=a;r.hierNode={defaultAncestor:null,ancestor:r,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var n=[r],o,s;o=n.pop();)if(s=o.children,o.isExpand&&s.length)for(var l=s.length,u=l-1;u>=0;u--){var c=s[u];c.hierNode={defaultAncestor:null,ancestor:c,prelim:0,modifier:0,change:0,shift:0,i:u,thread:null},n.push(c)}}function firstWalk(a,r){var n=a.isExpand?a.children:[],o=a.parentNode.children,s=a.hierNode.i?o[a.hierNode.i-1]:null;if(n.length){executeShifts(a);var l=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;s?(a.hierNode.prelim=s.hierNode.prelim+r(a,s),a.hierNode.modifier=a.hierNode.prelim-l):a.hierNode.prelim=l}else s&&(a.hierNode.prelim=s.hierNode.prelim+r(a,s));a.parentNode.hierNode.defaultAncestor=apportion(a,s,a.parentNode.hierNode.defaultAncestor||o[0],r)}function secondWalk(a){var r=a.hierNode.prelim+a.parentNode.hierNode.modifier;a.setLayout({x:r},!0),a.hierNode.modifier+=a.parentNode.hierNode.modifier}function separation(a){return arguments.length?a:defaultSeparation}function radialCoordinate(a,r){return a-=Math.PI/2,{x:r*Math.cos(a),y:r*Math.sin(a)}}function executeShifts(a){for(var r=a.children,n=r.length,o=0,s=0;--n>=0;){var l=r[n];l.hierNode.prelim+=o,l.hierNode.modifier+=o,s+=l.hierNode.change,o+=l.hierNode.shift+s}}function apportion(a,r,n,o){if(r){for(var s=a,l=a,u=l.parentNode.children[0],c=r,f=s.hierNode.modifier,d=l.hierNode.modifier,v=u.hierNode.modifier,g=c.hierNode.modifier;c=nextRight(c),l=nextLeft(l),c&&l;){s=nextRight(s),u=nextLeft(u),s.hierNode.ancestor=a;var y=c.hierNode.prelim+g-l.hierNode.prelim-d+o(c,l);y>0&&(moveSubtree(nextAncestor(c,a,n),a,y),d+=y,f+=y),g+=c.hierNode.modifier,d+=l.hierNode.modifier,f+=s.hierNode.modifier,v+=u.hierNode.modifier}c&&!nextRight(s)&&(s.hierNode.thread=c,s.hierNode.modifier+=g-f),l&&!nextLeft(u)&&(u.hierNode.thread=l,u.hierNode.modifier+=d-v,n=a)}return n}function nextRight(a){var r=a.children;return r.length&&a.isExpand?r[r.length-1]:a.hierNode.thread}function nextLeft(a){var r=a.children;return r.length&&a.isExpand?r[0]:a.hierNode.thread}function nextAncestor(a,r,n){return a.hierNode.ancestor.parentNode===r.parentNode?a.hierNode.ancestor:n}function moveSubtree(a,r,n){var o=n/(r.hierNode.i-a.hierNode.i);r.hierNode.change-=o,r.hierNode.shift+=n,r.hierNode.modifier+=n,r.hierNode.prelim+=n,a.hierNode.change+=o}function defaultSeparation(a,r){return a.parentNode===r.parentNode?1:2}var TreeEdgeShape=function(){function a(){this.parentPoint=[],this.childPoints=[]}return a}(),TreePath=function(a){__extends(r,a);function r(n){return a.call(this,n)||this}return r.prototype.getDefaultStyle=function(){return{stroke:tokens.color.neutral99,fill:null}},r.prototype.getDefaultShape=function(){return new TreeEdgeShape},r.prototype.buildPath=function(n,o){var s=o.childPoints,l=s.length,u=o.parentPoint,c=s[0],f=s[l-1];if(l===1){n.moveTo(u[0],u[1]),n.lineTo(c[0],c[1]);return}var d=o.orient,v=d==="TB"||d==="BT"?0:1,g=1-v,y=parsePercent(o.forkPosition,1),_=[];_[v]=u[v],_[g]=u[g]+(f[g]-u[g])*y,n.moveTo(u[0],u[1]),n.lineTo(_[0],_[1]),n.moveTo(c[0],c[1]),_[v]=c[v],n.lineTo(_[0],_[1]),_[v]=f[v],n.lineTo(_[0],_[1]),n.lineTo(f[0],f[1]);for(var S=1;S<l-1;S++){var b=s[S];n.moveTo(b[0],b[1]),_[v]=b[v],n.lineTo(_[0],_[1])}},r}(Path),TreeView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n._mainGroup=new Group$3,n}return r.prototype.init=function(n,o){this._controller=new RoamController(o.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},r.prototype.render=function(n,o,s){var l=n.getData(),u=n.layoutInfo,c=this._mainGroup,f=n.get("layout");f==="radial"?(c.x=u.x+u.width/2,c.y=u.y+u.height/2):(c.x=u.x,c.y=u.y),this._updateViewCoordSys(n,s),this._updateController(n,null,o,s);var d=this._data;l.diff(d).add(function(v){symbolNeedsDraw(l,v)&&updateNode(l,v,null,c,n)}).update(function(v,g){var y=d.getItemGraphicEl(g);if(!symbolNeedsDraw(l,v)){y&&removeNode(d,g,y,c,n);return}updateNode(l,v,y,c,n)}).remove(function(v){var g=d.getItemGraphicEl(v);g&&removeNode(d,v,g,c,n)}).execute(),this._nodeScaleRatio=n.get("nodeScaleRatio"),this._updateNodeAndLinkScale(n),n.get("expandAndCollapse")===!0&&l.eachItemGraphicEl(function(v,g){v.off("click").on("click",function(){s.dispatchAction({type:"treeExpandAndCollapse",seriesId:n.id,dataIndex:g})})}),this._data=l},r.prototype._updateViewCoordSys=function(n,o){var s=n.getData(),l=[];s.each(function(g){var y=s.getItemLayout(g);y&&!isNaN(y.x)&&!isNaN(y.y)&&l.push([+y.x,+y.y])});var u=[],c=[];fromPoints(l,u,c);var f=this._min,d=this._max;c[0]-u[0]===0&&(u[0]=f?f[0]:u[0]-1,c[0]=d?d[0]:c[0]+1),c[1]-u[1]===0&&(u[1]=f?f[1]:u[1]-1,c[1]=d?d[1]:c[1]+1);var v=n.coordinateSystem=new View(null,{api:o,ecModel:n.ecModel});v.zoomLimit=n.get("scaleLimit"),v.setBoundingRect(u[0],u[1],c[0]-u[0],c[1]-u[1]),v.setCenter(n.get("center")),v.setZoom(n.get("zoom")),this.group.attr({x:v.x,y:v.y,scaleX:v.scaleX,scaleY:v.scaleY}),this._min=u,this._max=c},r.prototype._updateController=function(n,o,s,l){var u=this;updateController(n,l,this.group,this._controller,this._controllerHost,o),this._controller.on("zoom",function(c){u._updateNodeAndLinkScale(n)})},r.prototype._updateNodeAndLinkScale=function(n){var o=n.getData(),s=this._getNodeGlobalScale(n);o.eachItemGraphicEl(function(l,u){l.setSymbolScale(s)})},r.prototype._getNodeGlobalScale=function(n){var o=n.coordinateSystem;if(o.type!=="view")return 1;var s=this._nodeScaleRatio,l=o.scaleX||1,u=o.getZoom(),c=(u-1)*s+1;return c/l},r.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},r.type="tree",r}(ChartView);function symbolNeedsDraw(a,r){var n=a.getItemLayout(r);return n&&!isNaN(n.x)&&!isNaN(n.y)}function updateNode(a,r,n,o,s){var l=!n,u=a.tree.getNodeByDataIndex(r),c=u.getModel(),f=u.getVisual("style").fill,d=u.isExpand===!1&&u.children.length!==0?f:tokens.color.neutral00,v=a.tree.root,g=u.parentNode===v?u:u.parentNode||u,y=a.getItemGraphicEl(g.dataIndex),_=g.getLayout(),S=y?{x:y.__oldX,y:y.__oldY,rawX:y.__radialOldRawX,rawY:y.__radialOldRawY}:_,b=u.getLayout();l?(n=new Symbol$1(a,r,null,{symbolInnerColor:d,useNameLabel:!0}),n.x=S.x,n.y=S.y):n.updateData(a,r,null,{symbolInnerColor:d,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=b.rawX,n.__radialRawY=b.rawY,o.add(n),a.setItemGraphicEl(r,n),n.__oldX=n.x,n.__oldY=n.y,updateProps$1(n,{x:b.x,y:b.y},s);var x=n.getSymbolPath();if(s.get("layout")==="radial"){var T=v.children[0],A=T.getLayout(),w=T.children.length,C=void 0,E=void 0;if(b.x===A.x&&u.isExpand===!0&&T.children.length){var P={x:(T.children[0].getLayout().x+T.children[w-1].getLayout().x)/2,y:(T.children[0].getLayout().y+T.children[w-1].getLayout().y)/2};C=Math.atan2(P.y-A.y,P.x-A.x),C<0&&(C=Math.PI*2+C),E=P.x<A.x,E&&(C=C-Math.PI)}else C=Math.atan2(b.y-A.y,b.x-A.x),C<0&&(C=Math.PI*2+C),u.children.length===0||u.children.length!==0&&u.isExpand===!1?(E=b.x<A.x,E&&(C=C-Math.PI)):(E=b.x>A.x,E||(C=C-Math.PI));var I=E?"left":"right",M=c.getModel("label"),R=M.get("rotate"),O=R*(Math.PI/180),$=x.getTextContent();$&&(x.setTextConfig({position:M.get("position")||I,rotation:R==null?-C:O,origin:"center"}),$.setStyle("verticalAlign","middle"))}var B=c.get(["emphasis","focus"]),F=B==="relative"?concatArray(u.getAncestorsIndices(),u.getDescendantIndices()):B==="ancestor"?u.getAncestorsIndices():B==="descendant"?u.getDescendantIndices():null;F&&(getECData(n).focus=F),drawEdge(s,u,v,n,S,_,b,o),n.__edge&&(n.onHoverStateChange=function(z){if(z!=="blur"){var G=u.parentNode&&a.getItemGraphicEl(u.parentNode.dataIndex);G&&G.hoverState===HOVER_STATE_BLUR||setStatesFlag(n.__edge,z)}})}function drawEdge(a,r,n,o,s,l,u,c){var f=r.getModel(),d=a.get("edgeShape"),v=a.get("layout"),g=a.getOrient(),y=a.get(["lineStyle","curveness"]),_=a.get("edgeForkPosition"),S=f.getModel("lineStyle").getLineStyle(),b=o.__edge;if(d==="curve")r.parentNode&&r.parentNode!==n&&(b||(b=o.__edge=new BezierCurve({shape:getEdgeShape(v,g,y,s,s)})),updateProps$1(b,{shape:getEdgeShape(v,g,y,l,u)},a));else if(d==="polyline"&&v==="orthogonal"&&r!==n&&r.children&&r.children.length!==0&&r.isExpand===!0){for(var x=r.children,T=[],A=0;A<x.length;A++){var w=x[A].getLayout();T.push([w.x,w.y])}b||(b=o.__edge=new TreePath({shape:{parentPoint:[u.x,u.y],childPoints:[[u.x,u.y]],orient:g,forkPosition:_}})),updateProps$1(b,{shape:{parentPoint:[u.x,u.y],childPoints:T}},a)}b&&!(d==="polyline"&&!r.isExpand)&&(b.useStyle(defaults({strokeNoScale:!0,fill:null},S)),setStatesStylesFromModel(b,f,"lineStyle"),setDefaultStateProxy(b),c.add(b))}function removeNodeEdge(a,r,n,o,s){var l=r.tree.root,u=getSourceNode(l,a),c=u.source,f=u.sourceLayout,d=r.getItemGraphicEl(a.dataIndex);if(d){var v=r.getItemGraphicEl(c.dataIndex),g=v.__edge,y=d.__edge||(c.isExpand===!1||c.children.length===1?g:void 0),_=o.get("edgeShape"),S=o.get("layout"),b=o.get("orient"),x=o.get(["lineStyle","curveness"]);y&&(_==="curve"?removeElement(y,{shape:getEdgeShape(S,b,x,f,f),style:{opacity:0}},o,{cb:function(){n.remove(y)},removeOpt:s}):_==="polyline"&&o.get("layout")==="orthogonal"&&removeElement(y,{shape:{parentPoint:[f.x,f.y],childPoints:[[f.x,f.y]]},style:{opacity:0}},o,{cb:function(){n.remove(y)},removeOpt:s}))}}function getSourceNode(a,r){for(var n=r.parentNode===a?r:r.parentNode||r,o;o=n.getLayout(),o==null;)n=n.parentNode===a?n:n.parentNode||n;return{source:n,sourceLayout:o}}function removeNode(a,r,n,o,s){var l=a.tree.getNodeByDataIndex(r),u=a.tree.root,c=getSourceNode(u,l).sourceLayout,f={duration:s.get("animationDurationUpdate"),easing:s.get("animationEasingUpdate")};removeElement(n,{x:c.x+1,y:c.y+1},s,{cb:function(){o.remove(n),a.setItemGraphicEl(r,null)},removeOpt:f}),n.fadeOut(null,a.hostModel,{fadeLabel:!0,animation:f}),l.children.forEach(function(d){removeNodeEdge(d,a,o,s,f)}),removeNodeEdge(l,a,o,s,f)}function getEdgeShape(a,r,n,o,s){var l,u,c,f,d,v,g,y;if(a==="radial"){d=o.rawX,g=o.rawY,v=s.rawX,y=s.rawY;var _=radialCoordinate(d,g),S=radialCoordinate(d,g+(y-g)*n),b=radialCoordinate(v,y+(g-y)*n),x=radialCoordinate(v,y);return{x1:_.x||0,y1:_.y||0,x2:x.x||0,y2:x.y||0,cpx1:S.x||0,cpy1:S.y||0,cpx2:b.x||0,cpy2:b.y||0}}else d=o.x,g=o.y,v=s.x,y=s.y,(r==="LR"||r==="RL")&&(l=d+(v-d)*n,u=g,c=v+(d-v)*n,f=y),(r==="TB"||r==="BT")&&(l=d,u=g+(y-g)*n,c=v,f=y+(g-y)*n);return{x1:d,y1:g,x2:v,y2:y,cpx1:l,cpy1:u,cpx2:c,cpy2:f}}var inner$f=makeInner();function linkSeriesData(a){var r=a.mainData,n=a.datas;n||(n={main:r},a.datasAttr={main:"data"}),a.datas=a.mainData=null,linkAll(r,n,a),each$f(n,function(o){each$f(r.TRANSFERABLE_METHODS,function(s){o.wrapMethod(s,curry$1(transferInjection,a))})}),r.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,a)),each$f(r.CHANGABLE_METHODS,function(o){r.wrapMethod(o,curry$1(changeInjection,a))}),assert(n[r.dataType]===r)}function transferInjection(a,r){if(isMainData(this)){var n=extend({},inner$f(this).datas);n[this.dataType]=r,linkAll(r,n,a)}else linkSingle(r,this.dataType,inner$f(this).mainData,a);return r}function changeInjection(a,r){return a.struct&&a.struct.update(),r}function cloneShallowInjection(a,r){return each$f(inner$f(r).datas,function(n,o){n!==r&&linkSingle(n.cloneShallow(),o,r,a)}),r}function getLinkedData(a){var r=inner$f(this).mainData;return a==null||r==null?r:inner$f(r).datas[a]}function getLinkedDataAll(){var a=inner$f(this).mainData;return a==null?[{data:a}]:map$1(keys(inner$f(a).datas),function(r){return{type:r,data:inner$f(a).datas[r]}})}function isMainData(a){return inner$f(a).mainData===a}function linkAll(a,r,n){inner$f(a).datas={},each$f(r,function(o,s){linkSingle(o,s,a,n)})}function linkSingle(a,r,n,o){inner$f(n).datas[r]=a,inner$f(a).mainData=n,a.dataType=r,o.struct&&(a[o.structAttr]=o.struct,o.struct[o.datasAttr[r]]=a),a.getLinkedData=getLinkedData,a.getLinkedDataAll=getLinkedDataAll}var TreeNode=function(){function a(r,n){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=r||"",this.hostTree=n}return a.prototype.isRemoved=function(){return this.dataIndex<0},a.prototype.eachNode=function(r,n,o){isFunction(r)&&(o=n,n=r,r=null),r=r||{},isString(r)&&(r={order:r});var s=r.order||"preorder",l=this[r.attr||"children"],u;s==="preorder"&&(u=n.call(o,this));for(var c=0;!u&&c<l.length;c++)l[c].eachNode(r,n,o);s==="postorder"&&n.call(o,this)},a.prototype.updateDepthAndHeight=function(r){var n=0;this.depth=r;for(var o=0;o<this.children.length;o++){var s=this.children[o];s.updateDepthAndHeight(r+1),s.height>n&&(n=s.height)}this.height=n+1},a.prototype.getNodeById=function(r){if(this.getId()===r)return this;for(var n=0,o=this.children,s=o.length;n<s;n++){var l=o[n].getNodeById(r);if(l)return l}},a.prototype.contains=function(r){if(r===this)return!0;for(var n=0,o=this.children,s=o.length;n<s;n++){var l=o[n].contains(r);if(l)return l}},a.prototype.getAncestors=function(r){for(var n=[],o=r?this:this.parentNode;o;)n.push(o),o=o.parentNode;return n.reverse(),n},a.prototype.getAncestorsIndices=function(){for(var r=[],n=this;n;)r.push(n.dataIndex),n=n.parentNode;return r.reverse(),r},a.prototype.getDescendantIndices=function(){var r=[];return this.eachNode(function(n){r.push(n.dataIndex)}),r},a.prototype.getValue=function(r){var n=this.hostTree.data;return n.getStore().get(n.getDimensionIndex(r||"value"),this.dataIndex)},a.prototype.setLayout=function(r,n){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,r,n)},a.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},a.prototype.getModel=function(r){if(!(this.dataIndex<0)){var n=this.hostTree,o=n.data.getItemModel(this.dataIndex);return o.getModel(r)}},a.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},a.prototype.setVisual=function(r,n){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,r,n)},a.prototype.getVisual=function(r){return this.hostTree.data.getItemVisual(this.dataIndex,r)},a.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},a.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},a.prototype.getChildIndex=function(){if(this.parentNode){for(var r=this.parentNode.children,n=0;n<r.length;++n)if(r[n]===this)return n;return-1}return-1},a.prototype.isAncestorOf=function(r){for(var n=r.parentNode;n;){if(n===this)return!0;n=n.parentNode}return!1},a.prototype.isDescendantOf=function(r){return r!==this&&r.isAncestorOf(this)},a}(),Tree=function(){function a(r){this.type="tree",this._nodes=[],this.hostModel=r}return a.prototype.eachNode=function(r,n,o){this.root.eachNode(r,n,o)},a.prototype.getNodeByDataIndex=function(r){var n=this.data.getRawIndex(r);return this._nodes[n]},a.prototype.getNodeById=function(r){return this.root.getNodeById(r)},a.prototype.update=function(){for(var r=this.data,n=this._nodes,o=0,s=n.length;o<s;o++)n[o].dataIndex=-1;for(var o=0,s=r.count();o<s;o++)n[r.getRawIndex(o)].dataIndex=o},a.prototype.clearLayouts=function(){this.data.clearItemLayouts()},a.createTree=function(r,n,o){var s=new a(n),l=[],u=1;c(r);function c(v,g){var y=v.value;u=Math.max(u,isArray$1(y)?y.length:1),l.push(v);var _=new TreeNode(convertOptionIdName(v.name,""),s);g?addChild(_,g):s.root=_,s._nodes.push(_);var S=v.children;if(S)for(var b=0;b<S.length;b++)c(S[b],_)}s.root.updateDepthAndHeight(0);var f=prepareSeriesDataSchema(l,{coordDimensions:["value"],dimensionsCount:u}).dimensions,d=new SeriesData(f,n);return d.initData(l),o&&o(d),linkSeriesData({mainData:d,struct:s,structAttr:"tree"}),s.update(),s},a}();function addChild(a,r){var n=r.children;a.parentNode!==r&&(n.push(a),a.parentNode=r)}function retrieveTargetInfo(a,r,n){if(a&&indexOf(r,a.type)>=0){var o=n.getData().tree.root,s=a.targetNode;if(isString(s)&&(s=o.getNodeById(s)),s&&o.contains(s))return{node:s};var l=a.targetNodeId;if(l!=null&&(s=o.getNodeById(l)))return{node:s}}}function getPathToRoot(a){for(var r=[];a;)a=a.parentNode,a&&r.push(a);return r.reverse()}function aboveViewRoot(a,r){var n=getPathToRoot(a);return indexOf(n,r)>=0}function wrapTreePathInfo(a,r){for(var n=[];a;){var o=a.dataIndex;n.push({name:a.name,dataIndex:o,value:r.getRawValue(o)}),a=a.parentNode}return n.reverse(),n}var TreeSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.hasSymbolVisual=!0,n.ignoreStyleOnData=!0,n}return r.prototype.getInitialData=function(n){var o={name:n.name,children:n.data},s=n.leaves||{},l=new Model(s,this,this.ecModel),u=Tree.createTree(o,this,c);function c(g){g.wrapMethod("getItemModel",function(y,_){var S=u.getNodeByDataIndex(_);return S&&S.children.length&&S.isExpand||(y.parentModel=l),y})}var f=0;u.eachNode("preorder",function(g){g.depth>f&&(f=g.depth)});var d=n.expandAndCollapse,v=d&&n.initialTreeDepth>=0?n.initialTreeDepth:f;return u.root.eachNode("preorder",function(g){var y=g.hostTree.data.getRawDataItem(g.dataIndex);g.isExpand=y&&y.collapsed!=null?!y.collapsed:g.depth<=v}),u.data},r.prototype.getOrient=function(){var n=this.get("orient");return n==="horizontal"?n="LR":n==="vertical"&&(n="TB"),n},r.prototype.setZoom=function(n){this.option.zoom=n},r.prototype.setCenter=function(n){this.option.center=n},r.prototype.formatTooltip=function(n,o,s){for(var l=this.getData().tree,u=l.root.children[0],c=l.getNodeByDataIndex(n),f=c.getValue(),d=c.name;c&&c!==u;)d=c.parentNode.name+"."+d,c=c.parentNode;return createTooltipMarkup("nameValue",{name:d,value:f,noValue:isNaN(f)||f==null})},r.prototype.getDataParams=function(n){var o=a.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(n);return o.treeAncestors=wrapTreePathInfo(s,this),o.collapsed=!s.isExpand,o},r.type="series.tree",r.layoutMode="box",r.defaultOption={z:2,coordinateSystemUsage:"box",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,roamTrigger:"global",nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:tokens.color.borderTint,width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},r}(SeriesModel);function eachAfter(a,r,n){for(var o=[a],s=[],l;l=o.pop();)if(s.push(l),l.isExpand){var u=l.children;if(u.length)for(var c=0;c<u.length;c++)o.push(u[c])}for(;l=s.pop();)r(l,n)}function eachBefore(a,r){for(var n=[a],o;o=n.pop();)if(r(o),o.isExpand){var s=o.children;if(s.length)for(var l=s.length-1;l>=0;l--)n.push(s[l])}}function treeLayout(a,r){a.eachSeriesByType("tree",function(n){commonLayout(n,r)})}function commonLayout(a,r){var n=createBoxLayoutReference(a,r).refContainer,o=getLayoutRect(a.getBoxLayoutParams(),n);a.layoutInfo=o;var s=a.get("layout"),l=0,u=0,c=null;s==="radial"?(l=2*Math.PI,u=Math.min(o.height,o.width)/2,c=separation(function(C,E){return(C.parentNode===E.parentNode?1:2)/C.depth})):(l=o.width,u=o.height,c=separation());var f=a.getData().tree.root,d=f.children[0];if(d){init(f),eachAfter(d,firstWalk,c),f.hierNode.modifier=-d.hierNode.prelim,eachBefore(d,secondWalk);var v=d,g=d,y=d;eachBefore(d,function(C){var E=C.getLayout().x;E<v.getLayout().x&&(v=C),E>g.getLayout().x&&(g=C),C.depth>y.depth&&(y=C)});var _=v===g?1:c(v,g)/2,S=_-v.getLayout().x,b=0,x=0,T=0,A=0;if(s==="radial")b=l/(g.getLayout().x+_+S),x=u/(y.depth-1||1),eachBefore(d,function(C){T=(C.getLayout().x+S)*b,A=(C.depth-1)*x;var E=radialCoordinate(T,A);C.setLayout({x:E.x,y:E.y,rawX:T,rawY:A},!0)});else{var w=a.getOrient();w==="RL"||w==="LR"?(x=u/(g.getLayout().x+_+S),b=l/(y.depth-1||1),eachBefore(d,function(C){A=(C.getLayout().x+S)*x,T=w==="LR"?(C.depth-1)*b:l-(C.depth-1)*b,C.setLayout({x:T,y:A},!0)})):(w==="TB"||w==="BT")&&(b=l/(g.getLayout().x+_+S),x=u/(y.depth-1||1),eachBefore(d,function(C){T=(C.getLayout().x+S)*b,A=w==="TB"?(C.depth-1)*x:u-(C.depth-1)*x,C.setLayout({x:T,y:A},!0)}))}}}function treeVisual(a){a.eachSeriesByType("tree",function(r){var n=r.getData(),o=n.tree;o.eachNode(function(s){var l=s.getModel(),u=l.getModel("itemStyle").getItemStyle(),c=n.ensureUniqueItemVisual(s.dataIndex,"style");extend(c,u)})})}function installTreeAction(a){a.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(r,n){n.eachComponent({mainType:"series",subType:"tree",query:r},function(o){var s=r.dataIndex,l=o.getData().tree,u=l.getNodeByDataIndex(s);u.isExpand=!u.isExpand})}),a.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(r,n,o){n.eachComponent({mainType:"series",subType:"tree",query:r},function(s){var l=s.coordinateSystem,u=updateCenterAndZoomInAction(l,r,s.get("scaleLimit"));s.setCenter(u.center),s.setZoom(u.zoom)})})}function install$K(a){a.registerChartView(TreeView),a.registerSeriesModel(TreeSeriesModel),a.registerLayout(treeLayout),a.registerVisual(treeVisual),installTreeAction(a)}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function installTreemapAction(a){for(var r=0;r<actionTypes.length;r++)a.registerAction({type:actionTypes[r],update:"updateView"},noop);a.registerAction({type:"treemapRootToNode",update:"updateView"},function(n,o){o.eachComponent({mainType:"series",subType:"treemap",query:n},s);function s(l,u){var c=["treemapZoomToNode","treemapRootToNode"],f=retrieveTargetInfo(n,c,l);if(f){var d=l.getViewRoot();d&&(n.direction=aboveViewRoot(d,f.node)?"rollUp":"drillDown"),l.resetViewRoot(f.node)}}})}function enableAriaDecalForTree(a){var r=a.getData(),n=r.tree,o={};n.eachNode(function(s){for(var l=s;l&&l.depth>1;)l=l.parentNode;var u=getDecalFromPalette(a.ecModel,l.name||l.dataIndex+"",o);s.setVisual("decal",u)})}var TreemapSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.preventUsingHoverLayer=!0,n}return r.prototype.getInitialData=function(n,o){var s={name:n.name,children:n.data};completeTreeValue$1(s);var l=n.levels||[],u=this.designatedVisualItemStyle={},c=new Model({itemStyle:u},this,o);l=n.levels=setDefault(l,o);var f=map$1(l||[],function(g){return new Model(g,c,o)},this),d=Tree.createTree(s,this,v);function v(g){g.wrapMethod("getItemModel",function(y,_){var S=d.getNodeByDataIndex(_),b=S?f[S.depth]:null;return y.parentModel=b||c,y})}return d.data},r.prototype.optionUpdated=function(){this.resetViewRoot()},r.prototype.formatTooltip=function(n,o,s){var l=this.getData(),u=this.getRawValue(n),c=l.getName(n);return createTooltipMarkup("nameValue",{name:c,value:u})},r.prototype.getDataParams=function(n){var o=a.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(n);return o.treeAncestors=wrapTreePathInfo(s,this),o.treePathInfo=o.treeAncestors,o},r.prototype.setLayoutInfo=function(n){this.layoutInfo=this.layoutInfo||{},extend(this.layoutInfo,n)},r.prototype.mapIdToIndex=function(n){var o=this._idIndexMap;o||(o=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var s=o.get(n);return s==null&&o.set(n,s=this._idIndexMapCount++),s},r.prototype.getViewRoot=function(){return this._viewRoot},r.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var o=this.getRawData().tree.root;(!n||n!==o&&!o.contains(n))&&(this._viewRoot=o)},r.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},r.type="series.treemap",r.layoutMode="box",r.defaultOption={progressive:0,coordinateSystemUsage:"box",left:tokens.size.l,top:tokens.size.xxxl,right:tokens.size.l,bottom:tokens.size.xxxl,sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:{max:5,min:.2},roam:!0,roamTrigger:"global",nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",bottom:tokens.size.m,emptyItemWidth:25,itemStyle:{color:tokens.color.backgroundShade,textStyle:{color:tokens.color.secondary}},emphasis:{itemStyle:{color:tokens.color.background}}},label:{show:!0,distance:0,padding:5,position:"inside",color:tokens.color.neutral00,overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:tokens.color.neutral00,borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},r}(SeriesModel);function completeTreeValue$1(a){var r=0;each$f(a.children,function(o){completeTreeValue$1(o);var s=o.value;isArray$1(s)&&(s=s[0]),r+=s});var n=a.value;isArray$1(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=r),n<0&&(n=0),isArray$1(a.value)?a.value[0]=n:a.value=n}function setDefault(a,r){var n=normalizeToArray(r.get("color")),o=normalizeToArray(r.get(["aria","decal","decals"]));if(n){a=a||[];var s,l;each$f(a,function(c){var f=new Model(c),d=f.get("color"),v=f.get("decal");(f.get(["itemStyle","color"])||d&&d!=="none")&&(s=!0),(f.get(["itemStyle","decal"])||v&&v!=="none")&&(l=!0)});var u=a[0]||(a[0]={});return s||(u.color=n.slice()),!l&&o&&(u.decal=o.slice()),a}}var TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5,Breadcrumb=function(){function a(r){this.group=new Group$3,r.add(this.group)}return a.prototype.render=function(r,n,o,s){var l=r.getModel("breadcrumb"),u=this.group;if(u.removeAll(),!(!l.get("show")||!o)){var c=l.getModel("itemStyle"),f=l.getModel("emphasis"),d=c.getModel("textStyle"),v=f.getModel(["itemStyle","textStyle"]),g=createBoxLayoutReference(r,n).refContainer,y={left:l.get("left"),right:l.get("right"),top:l.get("top"),bottom:l.get("bottom")},_={emptyItemWidth:l.get("emptyItemWidth"),totalWidth:0,renderList:[]},S=getLayoutRect(y,g);this._prepare(o,_,d),this._renderContent(r,_,S,c,f,d,v,s),positionElement(u,y,g)}},a.prototype._prepare=function(r,n,o){for(var s=r;s;s=s.parentNode){var l=convertOptionIdName(s.getModel().get("name"),""),u=o.getTextRect(l),c=Math.max(u.width+TEXT_PADDING*2,n.emptyItemWidth);n.totalWidth+=c+ITEM_GAP,n.renderList.push({node:s,text:l,width:c})}},a.prototype._renderContent=function(r,n,o,s,l,u,c,f){for(var d=0,v=n.emptyItemWidth,g=r.get(["breadcrumb","height"]),y=n.totalWidth,_=n.renderList,S=l.getModel("itemStyle").getItemStyle(),b=_.length-1;b>=0;b--){var x=_[b],T=x.node,A=x.width,w=x.text;y>o.width&&(y-=A-v,A=v,w=null);var C=new Polygon({shape:{points:makeItemPoints(d,0,A,g,b===_.length-1,b===0)},style:defaults(s.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText({style:createTextStyle(u,{text:w})}),textConfig:{position:"inside"},z2:Z2_EMPHASIS_LIFT*1e4,onclick:curry$1(f,T)});C.disableLabelAnimation=!0,C.getTextContent().ensureState("emphasis").style=createTextStyle(c,{text:w}),C.ensureState("emphasis").style=S,toggleHoverEmphasis(C,l.get("focus"),l.get("blurScope"),l.get("disabled")),this.group.add(C),packEventData(C,r,T),d+=A+ITEM_GAP}},a.prototype.remove=function(){this.group.removeAll()},a}();function makeItemPoints(a,r,n,o,s,l){var u=[[s?a:a-ARRAY_LENGTH,r],[a+n,r],[a+n,r+o],[s?a:a-ARRAY_LENGTH,r+o]];return!l&&u.splice(2,0,[a+n+ARRAY_LENGTH,r+o/2]),!s&&u.push([a,r+o/2]),u}function packEventData(a,r,n){getECData(a).eventData={componentType:"series",componentSubType:"treemap",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&wrapTreePathInfo(n,r)}}var AnimationWrap=function(){function a(){this._storage=[],this._elExistsMap={}}return a.prototype.add=function(r,n,o,s,l){return this._elExistsMap[r.id]?!1:(this._elExistsMap[r.id]=!0,this._storage.push({el:r,target:n,duration:o,delay:s,easing:l}),!0)},a.prototype.finished=function(r){return this._finishedCallback=r,this},a.prototype.start=function(){for(var r=this,n=this._storage.length,o=function(){n--,n<=0&&(r._storage.length=0,r._elExistsMap={},r._finishedCallback&&r._finishedCallback())},s=0,l=this._storage.length;s<l;s++){var u=this._storage[s];u.el.animateTo(u.target,{duration:u.duration,delay:u.delay,easing:u.easing,setToFinal:!0,done:o,aborted:o})}return this},a}();function createWrap(){return new AnimationWrap}var Group$2=Group$3,Rect$1=Rect$2,DRAG_THRESHOLD=3,PATH_LABEL_NOAMAL="label",PATH_UPPERLABEL_NORMAL="upperLabel",Z2_BASE=Z2_EMPHASIS_LIFT*10,Z2_BG=Z2_EMPHASIS_LIFT*2,Z2_CONTENT=Z2_EMPHASIS_LIFT*3,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(a){var r=getStateItemStyle(a);return r.stroke=r.fill=r.lineWidth=null,r},inner$e=makeInner(),TreemapView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n._state="ready",n._storage=createStorage(),n}return r.prototype.render=function(n,o,s,l){var u=o.findComponents({mainType:"series",subType:"treemap",query:l});if(!(indexOf(u,n)<0)){this.seriesModel=n,this.api=s,this.ecModel=o;var c=["treemapZoomToNode","treemapRootToNode"],f=retrieveTargetInfo(l,c,n),d=l&&l.type,v=n.layoutInfo,g=!this._oldTree,y=this._storage,_=d==="treemapRootToNode"&&f&&y?{rootNodeGroup:y.nodeGroup[f.node.getRawIndex()],direction:l.direction}:null,S=this._giveContainerGroup(v),b=n.get("animation"),x=this._doRender(S,n,_);b&&!g&&(!d||d==="treemapZoomToNode"||d==="treemapRootToNode")?this._doAnimation(S,x,n,_):x.renderFinally(),this._resetController(s),this._renderBreadcrumb(n,s,f)}},r.prototype._giveContainerGroup=function(n){var o=this._containerGroup;return o||(o=this._containerGroup=new Group$2,this._initEvents(o),this.group.add(o)),o.x=n.x,o.y=n.y,o},r.prototype._doRender=function(n,o,s){var l=o.getData().tree,u=this._oldTree,c=createStorage(),f=createStorage(),d=this._storage,v=[];function g(A,w,C,E){return renderNode(o,f,d,s,c,v,A,w,C,E)}b(l.root?[l.root]:[],u&&u.root?[u.root]:[],n,l===u||!u,0);var y=x(d);if(this._oldTree=l,this._storage=f,this._controllerHost){var _=this.seriesModel.layoutInfo,S=l.root.getLayout();S.width===_.width&&S.height===_.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:c,willDeleteEls:y,renderFinally:T};function b(A,w,C,E,P){E?(w=A,each$f(A,function(R,O){!R.isRemoved()&&M(O,O)})):new DataDiffer(w,A,I,I).add(M).update(M).remove(curry$1(M,null)).execute();function I(R){return R.getId()}function M(R,O){var $=R!=null?A[R]:null,B=O!=null?w[O]:null,F=g($,B,C,P);F&&b($&&$.viewChildren||[],B&&B.viewChildren||[],F,E,P+1)}}function x(A){var w=createStorage();return A&&each$f(A,function(C,E){var P=w[E];each$f(C,function(I){I&&(P.push(I),inner$e(I).willDelete=!0)})}),w}function T(){each$f(y,function(A){each$f(A,function(w){w.parent&&w.parent.remove(w)})}),each$f(v,function(A){A.invisible=!0,A.dirty()})}},r.prototype._doAnimation=function(n,o,s,l){var u=s.get("animationDurationUpdate"),c=s.get("animationEasing"),f=(isFunction(u)?0:u)||0,d=(isFunction(c)?null:c)||"cubicOut",v=createWrap();each$f(o.willDeleteEls,function(g,y){each$f(g,function(_,S){if(!_.invisible){var b=_.parent,x,T=inner$e(b);if(l&&l.direction==="drillDown")x=b===l.rootNodeGroup?{shape:{x:0,y:0,width:T.nodeWidth,height:T.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var A=0,w=0;T.willDelete||(A=T.nodeWidth/2,w=T.nodeHeight/2),x=y==="nodeGroup"?{x:A,y:w,style:{opacity:0}}:{shape:{x:A,y:w,width:0,height:0},style:{opacity:0}}}x&&v.add(_,x,f,0,d)}})}),each$f(this._storage,function(g,y){each$f(g,function(_,S){var b=o.lastsForAnimation[y][S],x={};b&&(_ instanceof Group$3?b.oldX!=null&&(x.x=_.x,x.y=_.y,_.x=b.oldX,_.y=b.oldY):(b.oldShape&&(x.shape=extend({},_.shape),_.setShape(b.oldShape)),b.fadein?(_.setStyle("opacity",0),x.style={opacity:1}):_.style.opacity!==1&&(x.style={opacity:1})),v.add(_,x,f,0,d))})},this),this._state="animating",v.finished(bind$1(function(){this._state="ready",o.renderFinally()},this)).start()},r.prototype._resetController=function(n){var o=this,s=this._controller,l=this._controllerHost;l||(this._controllerHost={target:this.group},l=this._controllerHost);var u=this.seriesModel;s||(s=this._controller=new RoamController(n.getZr()),s.on("pan",bind$1(this._onPan,this)),s.on("zoom",bind$1(this._onZoom,this))),s.enable(u.get("roam"),{api:n,zInfo:{component:u},triggerInfo:{roamTrigger:u.get("roamTrigger"),isInSelf:function(c,f,d){var v=o._containerGroup;return v?v.getBoundingRect().contain(f-v.x,d-v.y):!1}}}),l.zoomLimit=u.get("scaleLimit"),l.zoom=u.get("zoom")},r.prototype._clearController=function(){var n=this._controller;this._controllerHost=null,n&&(n.dispose(),n=null)},r.prototype._onPan=function(n){if(this._state!=="animating"&&(Math.abs(n.dx)>DRAG_THRESHOLD||Math.abs(n.dy)>DRAG_THRESHOLD)){var o=this.seriesModel.getData().tree.root;if(!o)return;var s=o.getLayout();if(!s)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:s.x+n.dx,y:s.y+n.dy,width:s.width,height:s.height}})}},r.prototype._onZoom=function(n){var o=n.originX,s=n.originY,l=n.scale;if(this._state!=="animating"){var u=this.seriesModel.getData().tree.root;if(!u)return;var c=u.getLayout();if(!c)return;var f=new BoundingRect(c.x,c.y,c.width,c.height),d=null,v=this._controllerHost;d=v.zoomLimit;var g=v.zoom=v.zoom||1;if(g*=l,d){var y=d.min||0,_=d.max||1/0;g=Math.max(Math.min(_,g),y)}var S=g/v.zoom;v.zoom=g;var b=this.seriesModel.layoutInfo;o-=b.x,s-=b.y;var x=create$1();translate(x,x,[-o,-s]),scale$1(x,x,[S,S]),translate(x,x,[o,s]),f.applyTransform(x),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:f.x,y:f.y,width:f.width,height:f.height}})}},r.prototype._initEvents=function(n){var o=this;n.on("click",function(s){if(o._state==="ready"){var l=o.seriesModel.get("nodeClick",!0);if(l){var u=o.findTarget(s.offsetX,s.offsetY);if(u){var c=u.node;if(c.getLayout().isLeafRoot)o._rootToNode(u);else if(l==="zoomToNode")o._zoomToNode(u);else if(l==="link"){var f=c.hostTree.data.getItemModel(c.dataIndex),d=f.get("link",!0),v=f.get("target",!0)||"blank";d&&windowOpen(d,v)}}}}},this)},r.prototype._renderBreadcrumb=function(n,o,s){var l=this;s||(s=n.get("leafDepth",!0)!=null?{node:n.getViewRoot()}:this.findTarget(o.getWidth()/2,o.getHeight()/2),s||(s={node:n.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(n,o,s.node,function(u){l._state!=="animating"&&(aboveViewRoot(n.getViewRoot(),u)?l._rootToNode({node:u}):l._zoomToNode({node:u}))})},r.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},r.prototype.dispose=function(){this._clearController()},r.prototype._zoomToNode=function(n){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},r.prototype._rootToNode=function(n){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},r.prototype.findTarget=function(n,o){var s,l=this.seriesModel.getViewRoot();return l.eachNode({attr:"viewChildren",order:"preorder"},function(u){var c=this._storage.background[u.getRawIndex()];if(c){var f=c.transformCoordToLocal(n,o),d=c.shape;if(d.x<=f[0]&&f[0]<=d.x+d.width&&d.y<=f[1]&&f[1]<=d.y+d.height)s={node:u,offsetX:f[0],offsetY:f[1]};else return!1}},this),s},r.type="treemap",r}(ChartView);function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(a,r,n,o,s,l,u,c,f,d){if(!u)return;var v=u.getLayout(),g=a.getData(),y=u.getModel();if(g.setItemGraphicEl(u.dataIndex,null),!v||!v.isInView)return;var _=v.width,S=v.height,b=v.borderWidth,x=v.invisible,T=u.getRawIndex(),A=c&&c.getRawIndex(),w=u.viewChildren,C=v.upperHeight,E=w&&w.length,P=y.getModel("itemStyle"),I=y.getModel(["emphasis","itemStyle"]),M=y.getModel(["blur","itemStyle"]),R=y.getModel(["select","itemStyle"]),O=P.get("borderRadius")||0,$=ne("nodeGroup",Group$2);if(!$)return;if(f.add($),$.x=v.x||0,$.y=v.y||0,$.markRedraw(),inner$e($).nodeWidth=_,inner$e($).nodeHeight=S,v.isAboveViewRoot)return $;var B=ne("background",Rect$1,d,Z2_BG);B&&U($,B,E&&v.upperLabelHeight);var F=y.getModel("emphasis"),z=F.get("focus"),G=F.get("blurScope"),D=F.get("disabled"),V=z==="ancestor"?u.getAncestorsIndices():z==="descendant"?u.getDescendantIndices():z;if(E)isHighDownDispatcher($)&&setAsHighDownDispatcher($,!1),B&&(setAsHighDownDispatcher(B,!D),g.setItemGraphicEl(u.dataIndex,B),enableHoverFocus(B,V,G));else{var L=ne("content",Rect$1,d,Z2_CONTENT);L&&H($,L),B.disableMorphing=!0,B&&isHighDownDispatcher(B)&&setAsHighDownDispatcher(B,!1),setAsHighDownDispatcher($,!D),g.setItemGraphicEl(u.dataIndex,$);var N=y.getShallow("cursor");N&&L.attr("cursor",N),enableHoverFocus($,V,G)}return $;function U(J,X,ie){var te=getECData(X);if(te.dataIndex=u.dataIndex,te.seriesIndex=a.seriesIndex,X.setShape({x:0,y:0,width:_,height:S,r:O}),x)q(X);else{X.invisible=!1;var W=u.getVisual("style"),Y=W.stroke,j=getItemStyleNormal(P);j.fill=Y;var Q=getStateItemStyle(I);Q.fill=I.get("borderColor");var re=getStateItemStyle(M);re.fill=M.get("borderColor");var ae=getStateItemStyle(R);if(ae.fill=R.get("borderColor"),ie){var le=_-2*b;Z(X,Y,W.opacity,{x:b,y:0,width:le,height:C})}else X.removeTextContent();X.setStyle(j),X.ensureState("emphasis").style=Q,X.ensureState("blur").style=re,X.ensureState("select").style=ae,setDefaultStateProxy(X)}J.add(X)}function H(J,X){var ie=getECData(X);ie.dataIndex=u.dataIndex,ie.seriesIndex=a.seriesIndex;var te=Math.max(_-2*b,0),W=Math.max(S-2*b,0);if(X.culling=!0,X.setShape({x:b,y:b,width:te,height:W,r:O}),x)q(X);else{X.invisible=!1;var Y=u.getVisual("style"),j=Y.fill,Q=getItemStyleNormal(P);Q.fill=j,Q.decal=Y.decal;var re=getStateItemStyle(I),ae=getStateItemStyle(M),le=getStateItemStyle(R);Z(X,j,Y.opacity,null),X.setStyle(Q),X.ensureState("emphasis").style=re,X.ensureState("blur").style=ae,X.ensureState("select").style=le,setDefaultStateProxy(X)}J.add(X)}function q(J){!J.invisible&&l.push(J)}function Z(J,X,ie,te){var W=y.getModel(te?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),Y=convertOptionIdName(y.get("name"),null),j=W.getShallow("show");setLabelStyle(J,getLabelStatesModels(y,te?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),{defaultText:j?Y:null,inheritColor:X,defaultOpacity:ie,labelFetcher:a,labelDataIndex:u.dataIndex});var Q=J.getTextContent();if(Q){var re=Q.style,ae=normalizeCssArray$1(re.padding||0);te&&(J.setTextConfig({layoutRect:te}),Q.disableLabelLayout=!0),Q.beforeUpdate=function(){var se=Math.max((te?te.width:J.shape.width)-ae[1]-ae[3],0),ce=Math.max((te?te.height:J.shape.height)-ae[0]-ae[2],0);(re.width!==se||re.height!==ce)&&Q.setStyle({width:se,height:ce})},re.truncateMinChar=2,re.lineOverflow="truncate",ee(re,te,v);var le=Q.getState("emphasis");ee(le?le.style:null,te,v)}}function ee(J,X,ie){var te=J?J.text:null;if(!X&&ie.isLeafRoot&&te!=null){var W=a.get("drillDownIcon",!0);J.text=W?W+" "+te:te}}function ne(J,X,ie,te){var W=A!=null&&n[J][A],Y=s[J];return W?(n[J][A]=null,ue(Y,W)):x||(W=new X,W instanceof Displayable&&(W.z2=calculateZ2(ie,te)),K(Y,W)),r[J][T]=W}function ue(J,X){var ie=J[T]={};X instanceof Group$2?(ie.oldX=X.x,ie.oldY=X.y):ie.oldShape=extend({},X.shape)}function K(J,X){var ie=J[T]={},te=u.parentNode,W=X instanceof Group$3;if(te&&(!o||o.direction==="drillDown")){var Y=0,j=0,Q=s.background[te.getRawIndex()];!o&&Q&&Q.oldShape&&(Y=Q.oldShape.width,j=Q.oldShape.height),W?(ie.oldX=0,ie.oldY=j):ie.oldShape={x:Y,y:j,width:0,height:0}}ie.fadein=!W}}function calculateZ2(a,r){return a*Z2_BASE+r}var each$c=each$f,isObject=isObject$3,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(){function a(r){var n=r.mappingMethod,o=r.type,s=this.option=clone$4(r);this.type=o,this.mappingMethod=n,this._normalizeData=normalizers[n];var l=a.visualHandlers[o];this.applyVisual=l.applyVisual,this.getColorMapper=l.getColorMapper,this._normalizedToVisual=l._normalizedToVisual[n],n==="piecewise"?(normalizeVisualRange(s),preprocessForPiecewise(s)):n==="category"?s.categories?preprocessForSpecifiedCategory(s):normalizeVisualRange(s,!0):(assert(n!=="linear"||s.dataExtent),normalizeVisualRange(s))}return a.prototype.mapValueToVisual=function(r){var n=this._normalizeData(r);return this._normalizedToVisual(n,r)},a.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},a.listVisualTypes=function(){return keys(a.visualHandlers)},a.isValidType=function(r){return a.visualHandlers.hasOwnProperty(r)},a.eachVisual=function(r,n,o){isObject$3(r)?each$f(r,n,o):n.call(o,r)},a.mapVisual=function(r,n,o){var s,l=isArray$1(r)?[]:isObject$3(r)?{}:(s=!0,null);return a.eachVisual(r,function(u,c){var f=n.call(o,u,c);s?l=f:l[c]=f}),l},a.retrieveVisuals=function(r){var n={},o;return r&&each$c(a.visualHandlers,function(s,l){r.hasOwnProperty(l)&&(n[l]=r[l],o=!0)}),o?n:null},a.prepareVisualTypes=function(r){if(isArray$1(r))r=r.slice();else if(isObject(r)){var n=[];each$c(r,function(o,s){n.push(s)}),r=n}else return[];return r.sort(function(o,s){return s==="color"&&o!=="color"&&o.indexOf("color")===0?1:-1}),r},a.dependsOn=function(r,n){return n==="color"?!!(r&&r.indexOf(n)===0):r===n},a.findPieceIndex=function(r,n,o){for(var s,l=1/0,u=0,c=n.length;u<c;u++){var f=n[u].value;if(f!=null){if(f===r||isString(f)&&f===r+"")return u;o&&y(f,u)}}for(var u=0,c=n.length;u<c;u++){var d=n[u],v=d.interval,g=d.close;if(v){if(v[0]===-1/0){if(littleThan(g[1],r,v[1]))return u}else if(v[1]===1/0){if(littleThan(g[0],v[0],r))return u}else if(littleThan(g[0],v[0],r)&&littleThan(g[1],r,v[1]))return u;o&&y(v[0],u),o&&y(v[1],u)}}if(o)return r===1/0?n.length-1:r===-1/0?0:s;function y(_,S){var b=Math.abs(_-r);b<l&&(l=b,s=S)}},a.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var r=this.option;return bind$1(r.mappingMethod==="category"?function(n,o){return!o&&(n=this._normalizeData(n)),doMapCategory.call(this,n)}:function(n,o,s){var l=!!s;return!o&&(n=this._normalizeData(n)),s=fastLerp(n,r.parsedVisual,s),l?s:stringify(s,"rgba")},this)},_normalizedToVisual:{linear:function(r){return stringify(fastLerp(r,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(r,n){var o=getSpecifiedVisual.call(this,n);return o==null&&(o=stringify(fastLerp(r,this.option.parsedVisual),"rgba")),o},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(r,n){return modifyHSL(r,n)}),colorSaturation:makePartialColorVisualHandler(function(r,n){return modifyHSL(r,null,n)}),colorLightness:makePartialColorVisualHandler(function(r,n){return modifyHSL(r,null,null,n)}),colorAlpha:makePartialColorVisualHandler(function(r,n){return modifyAlpha(r,n)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(r,n,o){var s=this.mapValueToVisual(r);o("symbol",s)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(r,n){var o=getSpecifiedVisual.call(this,n);return o==null&&(o=doMapToArray.call(this,r)),o},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},a}();function preprocessForPiecewise(a){var r=a.pieceList;a.hasSpecialVisual=!1,each$f(r,function(n,o){n.originIndex=o,n.visual!=null&&(a.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(a){var r=a.categories,n=a.categoryMap={},o=a.visual;if(each$c(r,function(u,c){n[u]=c}),!isArray$1(o)){var s=[];isObject$3(o)?each$c(o,function(u,c){var f=n[c];s[f??CATEGORY_DEFAULT_VISUAL_INDEX]=u}):s[CATEGORY_DEFAULT_VISUAL_INDEX]=o,o=setVisualToOption(a,s)}for(var l=r.length-1;l>=0;l--)o[l]==null&&(delete n[r[l]],r.pop())}function normalizeVisualRange(a,r){var n=a.visual,o=[];isObject$3(n)?each$c(n,function(l){o.push(l)}):n!=null&&o.push(n);var s={color:1,symbol:1};!r&&o.length===1&&!s.hasOwnProperty(a.type)&&(o[1]=o[0]),setVisualToOption(a,o)}function makePartialColorVisualHandler(a){return{applyVisual:function(r,n,o){var s=this.mapValueToVisual(r);o("color",a(n("color"),s))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(a){var r=this.option.visual;return r[Math.round(linearMap$2(a,[0,1],[0,r.length-1],!0))]||{}}function makeApplyVisual(a){return function(r,n,o){o(a,this.mapValueToVisual(r))}}function doMapCategory(a){var r=this.option.visual;return r[this.option.loop&&a!==CATEGORY_DEFAULT_VISUAL_INDEX?a%r.length:a]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(a){return{linear:function(r){return linearMap$2(r,a,this.option.visual,!0)},category:doMapCategory,piecewise:function(r,n){var o=getSpecifiedVisual.call(this,n);return o==null&&(o=linearMap$2(r,a,this.option.visual,!0)),o},fixed:doMapFixed}}function getSpecifiedVisual(a){var r=this.option,n=r.pieceList;if(r.hasSpecialVisual){var o=VisualMapping.findPieceIndex(a,n),s=n[o];if(s&&s.visual)return s.visual[this.type]}}function setVisualToOption(a,r){return a.visual=r,a.type==="color"&&(a.parsedVisual=map$1(r,function(n){var o=parse(n);return o||[0,0,0,1]})),r}var normalizers={linear:function(a){return linearMap$2(a,this.option.dataExtent,[0,1],!0)},piecewise:function(a){var r=this.option.pieceList,n=VisualMapping.findPieceIndex(a,r,!0);if(n!=null)return linearMap$2(n,[0,r.length-1],[0,1],!0)},category:function(a){var r=this.option.categories?this.option.categoryMap[a]:a;return r??CATEGORY_DEFAULT_VISUAL_INDEX},fixed:noop};function littleThan(a,r,n){return a?r<=n:r<n}var ITEM_STYLE_NORMAL="itemStyle",inner$d=makeInner();const treemapVisual={seriesType:"treemap",reset:function(a){var r=a.getData().tree,n=r.root;n.isRemoved()||travelTree(n,{},a.getViewRoot().getAncestors(),a)}};function travelTree(a,r,n,o){var s=a.getModel(),l=a.getLayout(),u=a.hostTree.data;if(!(!l||l.invisible||!l.isInView)){var c=s.getModel(ITEM_STYLE_NORMAL),f=buildVisuals(c,r,o),d=u.ensureUniqueItemVisual(a.dataIndex,"style"),v=c.get("borderColor"),g=c.get("borderColorSaturation"),y;g!=null&&(y=calculateColor(f),v=calculateBorderColor(g,y)),d.stroke=v;var _=a.viewChildren;if(!_||!_.length)y=calculateColor(f),d.fill=y;else{var S=buildVisualMapping(a,s,l,c,f,_);each$f(_,function(b,x){if(b.depth>=n.length||b===n[b.depth]){var T=mapVisual$1(s,f,b,x,S,o);travelTree(b,T,n,o)}})}}}function buildVisuals(a,r,n){var o=extend({},r),s=n.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(l){s[l]=r[l];var u=a.get(l);s[l]=null,u!=null&&(o[l]=u)}),o}function calculateColor(a){var r=getValueVisualDefine(a,"color");if(r){var n=getValueVisualDefine(a,"colorAlpha"),o=getValueVisualDefine(a,"colorSaturation");return o&&(r=modifyHSL(r,null,null,o)),n&&(r=modifyAlpha(r,n)),r}}function calculateBorderColor(a,r){return r!=null?modifyHSL(r,null,null,a):null}function getValueVisualDefine(a,r){var n=a[r];if(n!=null&&n!=="none")return n}function buildVisualMapping(a,r,n,o,s,l){if(!(!l||!l.length)){var u=getRangeVisual(r,"color")||s.color!=null&&s.color!=="none"&&(getRangeVisual(r,"colorAlpha")||getRangeVisual(r,"colorSaturation"));if(u){var c=r.get("visualMin"),f=r.get("visualMax"),d=n.dataExtent.slice();c!=null&&c<d[0]&&(d[0]=c),f!=null&&f>d[1]&&(d[1]=f);var v=r.get("colorMappingBy"),g={type:u.name,dataExtent:d,visual:u.range};g.type==="color"&&(v==="index"||v==="id")?(g.mappingMethod="category",g.loop=!0):g.mappingMethod="linear";var y=new VisualMapping(g);return inner$d(y).drColorMappingBy=v,y}}}function getRangeVisual(a,r){var n=a.get(r);return isArray$1(n)&&n.length?{name:r,range:n}:null}function mapVisual$1(a,r,n,o,s,l){var u=extend({},r);if(s){var c=s.type,f=c==="color"&&inner$d(s).drColorMappingBy,d=f==="index"?o:f==="id"?l.mapIdToIndex(n.getId()):n.getValue(a.get("visualDimension"));u[c]=s.mapValueToVisual(d)}return u}var mathMax$3=Math.max,mathMin$3=Math.min,retrieveValue=retrieve,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(a,r,n,o){var s=a.option,l=createBoxLayoutReference(a,n).refContainer,u=getLayoutRect(a.getBoxLayoutParams(),l),c=s.size||[],f=parsePercent(retrieveValue(u.width,c[0]),l.width),d=parsePercent(retrieveValue(u.height,c[1]),l.height),v=o&&o.type,g=["treemapZoomToNode","treemapRootToNode"],y=retrieveTargetInfo(o,g,a),_=v==="treemapRender"||v==="treemapMove"?o.rootRect:null,S=a.getViewRoot(),b=getPathToRoot(S);if(v!=="treemapMove"){var x=v==="treemapZoomToNode"?estimateRootSize(a,y,S,f,d):_?[_.width,_.height]:[f,d],T=s.sort;T&&T!=="asc"&&T!=="desc"&&(T="desc");var A={squareRatio:s.squareRatio,sort:T,leafDepth:s.leafDepth};S.hostTree.clearLayouts();var w={x:0,y:0,width:x[0],height:x[1],area:x[0]*x[1]};S.setLayout(w),squarify(S,A,!1,0),w=S.getLayout(),each$b(b,function(E,P){var I=(b[P+1]||S).getValue();E.setLayout(extend({dataExtent:[I,I],borderWidth:0,upperHeight:0},w))})}var C=a.getData().tree.root;C.setLayout(calculateRootPosition(u,_,y),!0),a.setLayoutInfo(u),prunning(C,new BoundingRect(-u.x,-u.y,n.getWidth(),n.getHeight()),b,S,0)}};function squarify(a,r,n,o){var s,l;if(!a.isRemoved()){var u=a.getLayout();s=u.width,l=u.height;var c=a.getModel(),f=c.get(PATH_BORDER_WIDTH),d=c.get(PATH_GAP_WIDTH)/2,v=getUpperLabelHeight(c),g=Math.max(f,v),y=f-d,_=g-d;a.setLayout({borderWidth:f,upperHeight:g,upperLabelHeight:v},!0),s=mathMax$3(s-2*y,0),l=mathMax$3(l-y-_,0);var S=s*l,b=initChildren$1(a,c,S,r,n,o);if(b.length){var x={x:y,y:_,width:s,height:l},T=mathMin$3(s,l),A=1/0,w=[];w.area=0;for(var C=0,E=b.length;C<E;){var P=b[C];w.push(P),w.area+=P.getLayout().area;var I=worst(w,T,r.squareRatio);I<=A?(C++,A=I):(w.area-=w.pop().getLayout().area,position(w,T,x,d,!1),T=mathMin$3(x.width,x.height),w.length=w.area=0,A=1/0)}if(w.length&&position(w,T,x,d,!0),!n){var M=c.get("childrenVisibleMin");M!=null&&S<M&&(n=!0)}for(var C=0,E=b.length;C<E;C++)squarify(b[C],r,n,o+1)}}}function initChildren$1(a,r,n,o,s,l){var u=a.children||[],c=o.sort;c!=="asc"&&c!=="desc"&&(c=null);var f=o.leafDepth!=null&&o.leafDepth<=l;if(s&&!f)return a.viewChildren=[];u=filter(u,function(_){return!_.isRemoved()}),sort$1(u,c);var d=statistic(r,u,c);if(d.sum===0)return a.viewChildren=[];if(d.sum=filterByThreshold(r,n,d.sum,c,u),d.sum===0)return a.viewChildren=[];for(var v=0,g=u.length;v<g;v++){var y=u[v].getValue()/d.sum*n;u[v].setLayout({area:y})}return f&&(u.length&&a.setLayout({isLeafRoot:!0},!0),u.length=0),a.viewChildren=u,a.setLayout({dataExtent:d.dataExtent},!0),u}function filterByThreshold(a,r,n,o,s){if(!o)return n;for(var l=a.get("visibleMin"),u=s.length,c=u,f=u-1;f>=0;f--){var d=s[o==="asc"?u-f-1:f].getValue();d/n*r<l&&(c=f,n-=d)}return o==="asc"?s.splice(0,u-c):s.splice(c,u-c),n}function sort$1(a,r){return r&&a.sort(function(n,o){var s=r==="asc"?n.getValue()-o.getValue():o.getValue()-n.getValue();return s===0?r==="asc"?n.dataIndex-o.dataIndex:o.dataIndex-n.dataIndex:s}),a}function statistic(a,r,n){for(var o=0,s=0,l=r.length;s<l;s++)o+=r[s].getValue();var u=a.get("visualDimension"),c;return!r||!r.length?c=[NaN,NaN]:u==="value"&&n?(c=[r[r.length-1].getValue(),r[0].getValue()],n==="asc"&&c.reverse()):(c=[1/0,-1/0],each$b(r,function(f){var d=f.getValue(u);d<c[0]&&(c[0]=d),d>c[1]&&(c[1]=d)})),{sum:o,dataExtent:c}}function worst(a,r,n){for(var o=0,s=1/0,l=0,u=void 0,c=a.length;l<c;l++)u=a[l].getLayout().area,u&&(u<s&&(s=u),u>o&&(o=u));var f=a.area*a.area,d=r*r*n;return f?mathMax$3(d*o/f,f/(d*s)):1/0}function position(a,r,n,o,s){var l=r===n.width?0:1,u=1-l,c=["x","y"],f=["width","height"],d=n[c[l]],v=r?a.area/r:0;(s||v>n[f[u]])&&(v=n[f[u]]);for(var g=0,y=a.length;g<y;g++){var _=a[g],S={},b=v?_.getLayout().area/v:0,x=S[f[u]]=mathMax$3(v-2*o,0),T=n[c[l]]+n[f[l]]-d,A=g===y-1||T<b?T:b,w=S[f[l]]=mathMax$3(A-2*o,0);S[c[u]]=n[c[u]]+mathMin$3(o,x/2),S[c[l]]=d+mathMin$3(o,w/2),d+=A,_.setLayout(S,!0)}n[c[u]]+=v,n[f[u]]-=v}function estimateRootSize(a,r,n,o,s){var l=(r||{}).node,u=[o,s];if(!l||l===n)return u;for(var c,f=o*s,d=f*a.option.zoomToNodeRatio;c=l.parentNode;){for(var v=0,g=c.children,y=0,_=g.length;y<_;y++)v+=g[y].getValue();var S=l.getValue();if(S===0)return u;d*=v/S;var b=c.getModel(),x=b.get(PATH_BORDER_WIDTH),T=Math.max(x,getUpperLabelHeight(b));d+=4*x*x+(3*x+T)*Math.pow(d,.5),d>MAX_SAFE_INTEGER&&(d=MAX_SAFE_INTEGER),l=c}d<f&&(d=f);var A=Math.pow(d/f,.5);return[o*A,s*A]}function calculateRootPosition(a,r,n){if(r)return{x:r.x,y:r.y};var o={x:0,y:0};if(!n)return o;var s=n.node,l=s.getLayout();if(!l)return o;for(var u=[l.width/2,l.height/2],c=s;c;){var f=c.getLayout();u[0]+=f.x,u[1]+=f.y,c=c.parentNode}return{x:a.width/2-u[0],y:a.height/2-u[1]}}function prunning(a,r,n,o,s){var l=a.getLayout(),u=n[s],c=u&&u===a;if(!(u&&!c||s===n.length&&a!==o)){a.setLayout({isInView:!0,invisible:!c&&!r.intersect(l),isAboveViewRoot:c},!0);var f=new BoundingRect(r.x-l.x,r.y-l.y,r.width,r.height);each$b(a.viewChildren||[],function(d){prunning(d,f,n,o,s+1)})}}function getUpperLabelHeight(a){return a.get(PATH_UPPER_LABEL_SHOW)?a.get(PATH_UPPER_LABEL_HEIGHT):0}function install$J(a){a.registerSeriesModel(TreemapSeriesModel),a.registerChartView(TreemapView),a.registerVisual(treemapVisual),a.registerLayout(treemapLayout),installTreemapAction(a)}function categoryFilter(a){var r=a.findComponents({mainType:"legend"});!r||!r.length||a.eachSeriesByType("graph",function(n){var o=n.getCategoriesData(),s=n.getGraph(),l=s.data,u=o.mapArray(o.getName);l.filterSelf(function(c){var f=l.getItemModel(c),d=f.getShallow("category");if(d!=null){isNumber(d)&&(d=u[d]);for(var v=0;v<r.length;v++)if(!r[v].isSelected(d))return!1}return!0})})}function categoryVisual(a){var r={};a.eachSeriesByType("graph",function(n){var o=n.getCategoriesData(),s=n.getData(),l={};o.each(function(u){var c=o.getName(u);l["ec-"+c]=u;var f=o.getItemModel(u),d=f.getModel("itemStyle").getItemStyle();d.fill||(d.fill=n.getColorFromPalette(c,r)),o.setItemVisual(u,"style",d);for(var v=["symbol","symbolSize","symbolKeepAspect"],g=0;g<v.length;g++){var y=f.getShallow(v[g],!0);y!=null&&o.setItemVisual(u,v[g],y)}}),o.count()&&s.each(function(u){var c=s.getItemModel(u),f=c.getShallow("category");if(f!=null){isString(f)&&(f=l["ec-"+f]);var d=o.getItemVisual(f,"style"),v=s.ensureUniqueItemVisual(u,"style");extend(v,d);for(var g=["symbol","symbolSize","symbolKeepAspect"],y=0;y<g.length;y++)s.setItemVisual(u,g[y],o.getItemVisual(f,g[y]))}})})}function normalize$1(a){return a instanceof Array||(a=[a,a]),a}function graphEdgeVisual(a){a.eachSeriesByType("graph",function(r){var n=r.getGraph(),o=r.getEdgeData(),s=normalize$1(r.get("edgeSymbol")),l=normalize$1(r.get("edgeSymbolSize"));o.setVisual("fromSymbol",s&&s[0]),o.setVisual("toSymbol",s&&s[1]),o.setVisual("fromSymbolSize",l&&l[0]),o.setVisual("toSymbolSize",l&&l[1]),o.setVisual("style",r.getModel("lineStyle").getLineStyle()),o.each(function(u){var c=o.getItemModel(u),f=n.getEdgeByIndex(u),d=normalize$1(c.getShallow("symbol",!0)),v=normalize$1(c.getShallow("symbolSize",!0)),g=c.getModel("lineStyle").getLineStyle(),y=o.ensureUniqueItemVisual(u,"style");switch(extend(y,g),y.stroke){case"source":{var _=f.node1.getVisual("style");y.stroke=_&&_.fill;break}case"target":{var _=f.node2.getVisual("style");y.stroke=_&&_.fill;break}}d[0]&&f.setVisual("fromSymbol",d[0]),d[1]&&f.setVisual("toSymbol",d[1]),v[0]&&f.setVisual("fromSymbolSize",v[0]),v[1]&&f.setVisual("toSymbolSize",v[1])})})}var KEY_DELIMITER="-->",getAutoCurvenessParams=function(a){return a.get("autoCurveness")||null},createCurveness=function(a,r){var n=getAutoCurvenessParams(a),o=20,s=[];if(isNumber(n))o=n;else if(isArray$1(n)){a.__curvenessList=n;return}r>o&&(o=r);var l=o%2?o+2:o+3;s=[];for(var u=0;u<l;u++)s.push((u%2?u+1:u)/10*(u%2?-1:1));a.__curvenessList=s},getKeyOfEdges=function(a,r,n){var o=[a.id,a.dataIndex].join("."),s=[r.id,r.dataIndex].join(".");return[n.uid,o,s].join(KEY_DELIMITER)},getOppositeKey=function(a){var r=a.split(KEY_DELIMITER);return[r[0],r[2],r[1]].join(KEY_DELIMITER)},getEdgeFromMap=function(a,r){var n=getKeyOfEdges(a.node1,a.node2,r);return r.__edgeMap[n]},getTotalLengthBetweenNodes=function(a,r){var n=getEdgeMapLengthWithKey(getKeyOfEdges(a.node1,a.node2,r),r),o=getEdgeMapLengthWithKey(getKeyOfEdges(a.node2,a.node1,r),r);return n+o},getEdgeMapLengthWithKey=function(a,r){var n=r.__edgeMap;return n[a]?n[a].length:0};function initCurvenessList(a){getAutoCurvenessParams(a)&&(a.__curvenessList=[],a.__edgeMap={},createCurveness(a))}function createEdgeMapForCurveness(a,r,n,o){if(getAutoCurvenessParams(n)){var s=getKeyOfEdges(a,r,n),l=n.__edgeMap,u=l[getOppositeKey(s)];l[s]&&!u?l[s].isForward=!0:u&&l[s]&&(u.isForward=!0,l[s].isForward=!1),l[s]=l[s]||[],l[s].push(o)}}function getCurvenessForEdge(a,r,n,o){var s=getAutoCurvenessParams(r),l=isArray$1(s);if(!s)return null;var u=getEdgeFromMap(a,r);if(!u)return null;for(var c=-1,f=0;f<u.length;f++)if(u[f]===n){c=f;break}var d=getTotalLengthBetweenNodes(a,r);createCurveness(r,d),a.lineStyle=a.lineStyle||{};var v=getKeyOfEdges(a.node1,a.node2,r),g=r.__curvenessList,y=l||d%2?0:1;if(u.isForward)return g[y+c];var _=getOppositeKey(v),S=getEdgeMapLengthWithKey(_,r),b=g[c+S+y];return o?l?s&&s[0]===0?(S+y)%2?b:-b:((S%2?0:1)+y)%2?b:-b:(S+y)%2?b:-b:g[c+S+y]}function simpleLayout(a){var r=a.coordinateSystem;if(!(r&&r.type!=="view")){var n=a.getGraph();n.eachNode(function(o){var s=o.getModel();o.setLayout([+s.get("x"),+s.get("y")])}),simpleLayoutEdge(n,a)}}function simpleLayoutEdge(a,r){a.eachEdge(function(n,o){var s=retrieve3(n.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(n,r,o,!0),0),l=clone$3(n.node1.getLayout()),u=clone$3(n.node2.getLayout()),c=[l,u];+s&&c.push([(l[0]+u[0])/2-(l[1]-u[1])*s,(l[1]+u[1])/2-(u[0]-l[0])*s]),n.setLayout(c)})}function graphSimpleLayout(a,r){a.eachSeriesByType("graph",function(n){var o=n.get("layout"),s=n.coordinateSystem;if(s&&s.type!=="view"){var l=n.getData(),u=[];each$f(s.dimensions,function(y){u=u.concat(l.mapDimensionsAll(y))});for(var c=0;c<l.count();c++){for(var f=[],d=!1,v=0;v<u.length;v++){var g=l.get(u[v],c);isNaN(g)||(d=!0),f.push(g)}d?l.setItemLayout(c,s.dataToPoint(f)):l.setItemLayout(c,[NaN,NaN])}simpleLayoutEdge(l.graph,n)}else(!o||o==="none")&&simpleLayout(n)})}function getNodeGlobalScale(a){var r=a.coordinateSystem;if(r.type!=="view")return 1;var n=a.option.nodeScaleRatio,o=r.scaleX,s=r.getZoom(),l=(s-1)*n+1;return l/o}function getSymbolSize(a){var r=a.getVisual("symbolSize");return r instanceof Array&&(r=(r[0]+r[1])/2),+r}var PI$2=Math.PI,_symbolRadiansHalf=[];function circularLayout(a,r,n,o){var s=a.coordinateSystem;if(!(s&&s.type!=="view")){var l=s.getBoundingRect(),u=a.getData(),c=u.graph,f=l.width/2+l.x,d=l.height/2+l.y,v=Math.min(l.width,l.height)/2,g=u.count();if(u.setLayout({cx:f,cy:d}),!!g){if(n){var y=s.pointToData(o),_=y[0],S=y[1],b=[_-f,S-d];normalize$3(b,b),scale$2(b,b,v),n.setLayout([f+b[0],d+b[1]],!0);var x=a.get(["circular","rotateLabel"]);rotateNodeLabel(n,x,f,d)}_layoutNodesBasedOn[r](a,c,u,v,f,d,g),c.eachEdge(function(T,A){var w=retrieve3(T.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(T,a,A),0),C=clone$3(T.node1.getLayout()),E=clone$3(T.node2.getLayout()),P,I=(C[0]+E[0])/2,M=(C[1]+E[1])/2;+w&&(w*=3,P=[f*w+I*(1-w),d*w+M*(1-w)]),T.setLayout([C,E,P])})}}}var _layoutNodesBasedOn={value:function(a,r,n,o,s,l,u){var c=0,f=n.getSum("value"),d=Math.PI*2/(f||u);r.eachNode(function(v){var g=v.getValue("value"),y=d*(f?g:1)/2;c+=y,v.setLayout([o*Math.cos(c)+s,o*Math.sin(c)+l]),c+=y})},symbolSize:function(a,r,n,o,s,l,u){var c=0;_symbolRadiansHalf.length=u;var f=getNodeGlobalScale(a);r.eachNode(function(g){var y=getSymbolSize(g);isNaN(y)&&(y=2),y<0&&(y=0),y*=f;var _=Math.asin(y/2/o);isNaN(_)&&(_=PI$2/2),_symbolRadiansHalf[g.dataIndex]=_,c+=_*2});var d=(2*PI$2-c)/u/2,v=0;r.eachNode(function(g){var y=d+_symbolRadiansHalf[g.dataIndex];v+=y,(!g.getLayout()||!g.getLayout().fixed)&&g.setLayout([o*Math.cos(v)+s,o*Math.sin(v)+l]),v+=y})}};function rotateNodeLabel(a,r,n,o){var s=a.getGraphicEl();if(s){var l=a.getModel(),u=l.get(["label","rotate"])||0,c=s.getSymbolPath();if(r){var f=a.getLayout(),d=Math.atan2(f[1]-o,f[0]-n);d<0&&(d=Math.PI*2+d);var v=f[0]<n;v&&(d=d-Math.PI);var g=v?"left":"right";c.setTextConfig({rotation:-d,position:g,origin:"center"});var y=c.ensureState("emphasis");extend(y.textConfig||(y.textConfig={}),{position:g})}else c.setTextConfig({rotation:u*=Math.PI/180})}}function graphCircularLayout(a){a.eachSeriesByType("graph",function(r){r.get("layout")==="circular"&&circularLayout(r,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function forceLayout(a,r,n){for(var o=a,s=r,l=n.rect,u=l.width,c=l.height,f=[l.x+u/2,l.y+c/2],d=n.gravity==null?.1:n.gravity,v=0;v<o.length;v++){var g=o[v];g.p||(g.p=create$2(u*(Math.random()-.5)+f[0],c*(Math.random()-.5)+f[1])),g.pp=clone$3(g.p),g.edges=null}var y=n.friction==null?.6:n.friction,_=y,S,b;return{warmUp:function(){_=y*.8},setFixed:function(x){o[x].fixed=!0},setUnfixed:function(x){o[x].fixed=!1},beforeStep:function(x){S=x},afterStep:function(x){b=x},step:function(x){S&&S(o,s);for(var T=[],A=o.length,w=0;w<s.length;w++){var C=s[w];if(!C.ignoreForceLayout){var E=C.n1,P=C.n2;sub(T,P.p,E.p);var I=len(T)-C.d,M=P.w/(E.w+P.w);isNaN(M)&&(M=0),normalize$3(T,T),!E.fixed&&scaleAndAdd(E.p,E.p,T,M*I*_),!P.fixed&&scaleAndAdd(P.p,P.p,T,-(1-M)*I*_)}}for(var w=0;w<A;w++){var R=o[w];R.fixed||(sub(T,f,R.p),scaleAndAdd(R.p,R.p,T,d*_))}for(var w=0;w<A;w++)for(var E=o[w],O=w+1;O<A;O++){var P=o[O];sub(T,P.p,E.p);var I=len(T);I===0&&(set$1(T,Math.random()-.5,Math.random()-.5),I=1);var $=(E.rep+P.rep)/I/I;!E.fixed&&scaleAndAdd(E.pp,E.pp,T,$),!P.fixed&&scaleAndAdd(P.pp,P.pp,T,-$)}for(var B=[],w=0;w<A;w++){var R=o[w];R.fixed||(sub(B,R.p,R.pp),scaleAndAdd(R.p,R.p,B,_),copy$1(R.pp,R.p))}_=_*.992;var F=_<.01;b&&b(o,s,F),x&&x(F)}}}function graphForceLayout(a){a.eachSeriesByType("graph",function(r){var n=r.coordinateSystem;if(!(n&&n.type!=="view"))if(r.get("layout")==="force"){var o=r.preservedPoints||{},s=r.getGraph(),l=s.data,u=s.edgeData,c=r.getModel("force"),f=c.get("initLayout");r.preservedPoints?l.each(function(w){var C=l.getId(w);l.setItemLayout(w,o[C]||[NaN,NaN])}):!f||f==="none"?simpleLayout(r):f==="circular"&&circularLayout(r,"value");var d=l.getDataExtent("value"),v=u.getDataExtent("value"),g=c.get("repulsion"),y=c.get("edgeLength"),_=isArray$1(g)?g:[g,g],S=isArray$1(y)?y:[y,y];S=[S[1],S[0]];var b=l.mapArray("value",function(w,C){var E=l.getItemLayout(C),P=linearMap$2(w,d,_);return isNaN(P)&&(P=(_[0]+_[1])/2),{w:P,rep:P,fixed:l.getItemModel(C).get("fixed"),p:!E||isNaN(E[0])||isNaN(E[1])?null:E}}),x=u.mapArray("value",function(w,C){var E=s.getEdgeByIndex(C),P=linearMap$2(w,v,S);isNaN(P)&&(P=(S[0]+S[1])/2);var I=E.getModel(),M=retrieve3(E.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(E,r,C,!0),0);return{n1:b[E.node1.dataIndex],n2:b[E.node2.dataIndex],d:P,curveness:M,ignoreForceLayout:I.get("ignoreForceLayout")}}),T=n.getBoundingRect(),A=forceLayout(b,x,{rect:T,gravity:c.get("gravity"),friction:c.get("friction")});A.beforeStep(function(w,C){for(var E=0,P=w.length;E<P;E++)w[E].fixed&&copy$1(w[E].p,s.getNodeByIndex(E).getLayout())}),A.afterStep(function(w,C,E){for(var P=0,I=w.length;P<I;P++)w[P].fixed||s.getNodeByIndex(P).setLayout(w[P].p),o[l.getId(P)]=w[P].p;for(var P=0,I=C.length;P<I;P++){var M=C[P],R=s.getEdgeByIndex(P),O=M.n1.p,$=M.n2.p,B=R.getLayout();B=B?B.slice():[],B[0]=B[0]||[],B[1]=B[1]||[],copy$1(B[0],O),copy$1(B[1],$),+M.curveness&&(B[2]=[(O[0]+$[0])/2-(O[1]-$[1])*M.curveness,(O[1]+$[1])/2-($[0]-O[0])*M.curveness]),R.setLayout(B)}}),r.forceLayout=A,r.preservedPoints=o,A.step()}else r.forceLayout=null})}function getViewRect$1(a,r,n){var o=createBoxLayoutReference(a,r),s=extend(a.getBoxLayoutParams(),{aspect:n}),l=getLayoutRect(s,o.refContainer);return applyPreserveAspect(a,l,n)}function createViewCoordSys(a,r){var n=[];return a.eachSeriesByType("graph",function(o){injectCoordSysByOption({targetModel:o,coordSysType:"view",coordSysProvider:s,isDefaultDataCoordSys:!0});function s(){var l=o.getData(),u=l.mapArray(function(S){var b=l.getItemModel(S);return[+b.get("x"),+b.get("y")]}),c=[],f=[];fromPoints(u,c,f),f[0]-c[0]===0&&(f[0]+=1,c[0]-=1),f[1]-c[1]===0&&(f[1]+=1,c[1]-=1);var d=(f[0]-c[0])/(f[1]-c[1]),v=getViewRect$1(o,r,d);isNaN(d)&&(c=[v.x,v.y],f=[v.x+v.width,v.y+v.height]);var g=f[0]-c[0],y=f[1]-c[1],_=new View(null,{api:r,ecModel:a});return _.zoomLimit=o.get("scaleLimit"),_.setBoundingRect(c[0],c[1],g,y),_.setViewRect(v.x,v.y,v.width,v.height),_.setCenter(o.get("center")),_.setZoom(o.get("zoom")),n.push(_),_}}),n}var straightLineProto=Line$1.prototype,bezierCurveProto=BezierCurve.prototype,StraightLineShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}();(function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r})(StraightLineShape);function isStraightLine(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var ECLinePath=function(a){__extends(r,a);function r(n){var o=a.call(this,n)||this;return o.type="ec-line",o}return r.prototype.getDefaultStyle=function(){return{stroke:tokens.color.neutral99,fill:null}},r.prototype.getDefaultShape=function(){return new StraightLineShape},r.prototype.buildPath=function(n,o){isStraightLine(o)?straightLineProto.buildPath.call(this,n,o):bezierCurveProto.buildPath.call(this,n,o)},r.prototype.pointAt=function(n){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,n):bezierCurveProto.pointAt.call(this,n)},r.prototype.tangentAt=function(n){var o=this.shape,s=isStraightLine(o)?[o.x2-o.x1,o.y2-o.y1]:bezierCurveProto.tangentAt.call(this,n);return normalize$3(s,s)},r}(Path),SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(a){return"_"+a+"Type"}function makeSymbolTypeValue(a,r,n){var o=r.getItemVisual(n,a);if(!o||o==="none")return o;var s=r.getItemVisual(n,a+"Size"),l=r.getItemVisual(n,a+"Rotate"),u=r.getItemVisual(n,a+"Offset"),c=r.getItemVisual(n,a+"KeepAspect"),f=normalizeSymbolSize(s),d=normalizeSymbolOffset(u||0,f);return o+f+d+(l||"")+(c||"")}function createSymbol(a,r,n){var o=r.getItemVisual(n,a);if(!(!o||o==="none")){var s=r.getItemVisual(n,a+"Size"),l=r.getItemVisual(n,a+"Rotate"),u=r.getItemVisual(n,a+"Offset"),c=r.getItemVisual(n,a+"KeepAspect"),f=normalizeSymbolSize(s),d=normalizeSymbolOffset(u||0,f),v=createSymbol$1(o,-f[0]/2+d[0],-f[1]/2+d[1],f[0],f[1],null,c);return v.__specifiedRotation=l==null||isNaN(l)?void 0:+l*Math.PI/180||0,v.name=a,v}}function createLine(a){var r=new ECLinePath({name:"line",subPixelOptimize:!0});return setLinePoints(r.shape,a),r}function setLinePoints(a,r){a.x1=r[0][0],a.y1=r[0][1],a.x2=r[1][0],a.y2=r[1][1],a.percent=1;var n=r[2];n?(a.cpx1=n[0],a.cpy1=n[1]):(a.cpx1=NaN,a.cpy1=NaN)}var Line=function(a){__extends(r,a);function r(n,o,s){var l=a.call(this)||this;return l._createLine(n,o,s),l}return r.prototype._createLine=function(n,o,s){var l=n.hostModel,u=n.getItemLayout(o),c=n.getItemVisual(o,"z2"),f=createLine(u);f.shape.percent=0,initProps(f,{z2:retrieve2(c,0),shape:{percent:1}},l,o),this.add(f),each$f(SYMBOL_CATEGORIES,function(d){var v=createSymbol(d,n,o);this.add(v),this[makeSymbolTypeKey(d)]=makeSymbolTypeValue(d,n,o)},this),this._updateCommonStl(n,o,s)},r.prototype.updateData=function(n,o,s){var l=n.hostModel,u=this.childOfName("line"),c=n.getItemLayout(o),f={shape:{}};setLinePoints(f.shape,c),updateProps$1(u,f,l,o),each$f(SYMBOL_CATEGORIES,function(d){var v=makeSymbolTypeValue(d,n,o),g=makeSymbolTypeKey(d);if(this[g]!==v){this.remove(this.childOfName(d));var y=createSymbol(d,n,o);this.add(y)}this[g]=v},this),this._updateCommonStl(n,o,s)},r.prototype.getLinePath=function(){return this.childAt(0)},r.prototype._updateCommonStl=function(n,o,s){var l=n.hostModel,u=this.childOfName("line"),c=s&&s.emphasisLineStyle,f=s&&s.blurLineStyle,d=s&&s.selectLineStyle,v=s&&s.labelStatesModels,g=s&&s.emphasisDisabled,y=s&&s.focus,_=s&&s.blurScope;if(!s||n.hasItemOption){var S=n.getItemModel(o),b=S.getModel("emphasis");c=b.getModel("lineStyle").getLineStyle(),f=S.getModel(["blur","lineStyle"]).getLineStyle(),d=S.getModel(["select","lineStyle"]).getLineStyle(),g=b.get("disabled"),y=b.get("focus"),_=b.get("blurScope"),v=getLabelStatesModels(S)}var x=n.getItemVisual(o,"style"),T=x.stroke;u.useStyle(x),u.style.fill=null,u.style.strokeNoScale=!0,u.ensureState("emphasis").style=c,u.ensureState("blur").style=f,u.ensureState("select").style=d,each$f(SYMBOL_CATEGORIES,function(P){var I=this.childOfName(P);if(I){I.setColor(T),I.style.opacity=x.opacity;for(var M=0;M<SPECIAL_STATES.length;M++){var R=SPECIAL_STATES[M],O=u.getState(R);if(O){var $=O.style||{},B=I.ensureState(R),F=B.style||(B.style={});$.stroke!=null&&(F[I.__isEmptyBrush?"stroke":"fill"]=$.stroke),$.opacity!=null&&(F.opacity=$.opacity)}}I.markRedraw()}},this);var A=l.getRawValue(o);setLabelStyle(this,v,{labelDataIndex:o,labelFetcher:{getFormattedLabel:function(P,I){return l.getFormattedLabel(P,I,n.dataType)}},inheritColor:T||tokens.color.neutral99,defaultOpacity:x.opacity,defaultText:(A==null?n.getName(o):isFinite(A)?round$4(A):A)+""});var w=this.getTextContent();if(w){var C=v.normal;w.__align=w.style.align,w.__verticalAlign=w.style.verticalAlign,w.__position=C.get("position")||"middle";var E=C.get("distance");isArray$1(E)||(E=[E,E]),w.__labelDistance=E}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,y,_,g)},r.prototype.highlight=function(){enterEmphasis(this)},r.prototype.downplay=function(){leaveEmphasis(this)},r.prototype.updateLayout=function(n,o){this.setLinePoints(n.getItemLayout(o))},r.prototype.setLinePoints=function(n){var o=this.childOfName("line");setLinePoints(o.shape,n),o.dirty()},r.prototype.beforeUpdate=function(){var n=this,o=n.childOfName("fromSymbol"),s=n.childOfName("toSymbol"),l=n.getTextContent();if(!o&&!s&&(!l||l.ignore))return;for(var u=1,c=this.parent;c;)c.scaleX&&(u/=c.scaleX),c=c.parent;var f=n.childOfName("line");if(!this.__dirty&&!f.__dirty)return;var d=f.shape.percent,v=f.pointAt(0),g=f.pointAt(d),y=sub([],g,v);normalize$3(y,y);function _(O,$){var B=O.__specifiedRotation;if(B==null){var F=f.tangentAt($);O.attr("rotation",($===1?-1:1)*Math.PI/2-Math.atan2(F[1],F[0]))}else O.attr("rotation",B)}if(o&&(o.setPosition(v),_(o,0),o.scaleX=o.scaleY=u*d,o.markRedraw()),s&&(s.setPosition(g),_(s,1),s.scaleX=s.scaleY=u*d,s.markRedraw()),l&&!l.ignore){l.x=l.y=0,l.originX=l.originY=0;var S=void 0,b=void 0,x=l.__labelDistance,T=x[0]*u,A=x[1]*u,w=d/2,C=f.tangentAt(w),E=[C[1],-C[0]],P=f.pointAt(w);E[1]>0&&(E[0]=-E[0],E[1]=-E[1]);var I=C[0]<0?-1:1;if(l.__position!=="start"&&l.__position!=="end"){var M=-Math.atan2(C[1],C[0]);g[0]<v[0]&&(M=Math.PI+M),l.rotation=M}var R=void 0;switch(l.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":R=-A,b="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":R=A,b="top";break;default:R=0,b="middle"}switch(l.__position){case"end":l.x=y[0]*T+g[0],l.y=y[1]*A+g[1],S=y[0]>.8?"left":y[0]<-.8?"right":"center",b=y[1]>.8?"top":y[1]<-.8?"bottom":"middle";break;case"start":l.x=-y[0]*T+v[0],l.y=-y[1]*A+v[1],S=y[0]>.8?"right":y[0]<-.8?"left":"center",b=y[1]>.8?"bottom":y[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":l.x=T*I+v[0],l.y=v[1]+R,S=C[0]<0?"right":"left",l.originX=-T*I,l.originY=-R;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":l.x=P[0],l.y=P[1]+R,S="center",l.originY=-R;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":l.x=-T*I+g[0],l.y=g[1]+R,S=C[0]>=0?"right":"left",l.originX=T*I,l.originY=-R;break}l.scaleX=l.scaleY=u,l.setStyle({verticalAlign:l.__verticalAlign||b,align:l.__align||S})}},r}(Group$3),LineDraw=function(){function a(r){this.group=new Group$3,this._LineCtor=r||Line}return a.prototype.updateData=function(r){var n=this;this._progressiveEls=null;var o=this,s=o.group,l=o._lineData;o._lineData=r,l||s.removeAll();var u=makeSeriesScope$1(r);r.diff(l).add(function(c){n._doAdd(r,c,u)}).update(function(c,f){n._doUpdate(l,r,f,c,u)}).remove(function(c){s.remove(l.getItemGraphicEl(c))}).execute()},a.prototype.updateLayout=function(){var r=this._lineData;r&&r.eachItemGraphicEl(function(n,o){n.updateLayout(r,o)},this)},a.prototype.incrementalPrepareUpdate=function(r){this._seriesScope=makeSeriesScope$1(r),this._lineData=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(r,n){this._progressiveEls=[];function o(c){!c.isGroup&&!isEffectObject(c)&&(c.incremental=!0,c.ensureState("emphasis").hoverLayer=!0)}for(var s=r.start;s<r.end;s++){var l=n.getItemLayout(s);if(lineNeedsDraw(l)){var u=new this._LineCtor(n,s,this._seriesScope);u.traverse(o),this.group.add(u),n.setItemGraphicEl(s,u),this._progressiveEls.push(u)}}},a.prototype.remove=function(){this.group.removeAll()},a.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},a.prototype._doAdd=function(r,n,o){var s=r.getItemLayout(n);if(lineNeedsDraw(s)){var l=new this._LineCtor(r,n,o);r.setItemGraphicEl(n,l),this.group.add(l)}},a.prototype._doUpdate=function(r,n,o,s,l){var u=r.getItemGraphicEl(o);if(!lineNeedsDraw(n.getItemLayout(s))){this.group.remove(u);return}u?u.updateData(n,s,l):u=new this._LineCtor(n,s,l),n.setItemGraphicEl(s,u),this.group.add(u)},a}();function isEffectObject(a){return a.animators&&a.animators.length>0}function makeSeriesScope$1(a){var r=a.hostModel,n=r.getModel("emphasis");return{lineStyle:r.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:r.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:r.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:getLabelStatesModels(r)}}function isPointNaN(a){return isNaN(a[0])||isNaN(a[1])}function lineNeedsDraw(a){return a&&!isPointNaN(a[0])&&!isPointNaN(a[1])}var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(a,r,n){for(var o=a[0],s=a[1],l=a[2],u=1/0,c,f=n*n,d=.1,v=.1;v<=.9;v+=.1){v1[0]=quadraticAt(o[0],s[0],l[0],v),v1[1]=quadraticAt(o[1],s[1],l[1],v);var g=mathAbs(v2DistSquare(v1,r)-f);g<u&&(u=g,c=v)}for(var y=0;y<32;y++){var _=c+d;v2[0]=quadraticAt(o[0],s[0],l[0],c),v2[1]=quadraticAt(o[1],s[1],l[1],c),v3[0]=quadraticAt(o[0],s[0],l[0],_),v3[1]=quadraticAt(o[1],s[1],l[1],_);var g=v2DistSquare(v2,r)-f;if(mathAbs(g)<.01)break;var S=v2DistSquare(v3,r)-f;d/=2,g<0?S>=0?c=c+d:c=c-d:S>=0?c=c-d:c=c+d}return c}function adjustEdge(a,r){var n=[],o=quadraticSubdivide,s=[[],[],[]],l=[[],[]],u=[];r/=2,a.eachEdge(function(c,f){var d=c.getLayout(),v=c.getVisual("fromSymbol"),g=c.getVisual("toSymbol");d.__original||(d.__original=[clone$3(d[0]),clone$3(d[1])],d[2]&&d.__original.push(clone$3(d[2])));var y=d.__original;if(d[2]!=null){if(copy$1(s[0],y[0]),copy$1(s[1],y[2]),copy$1(s[2],y[1]),v&&v!=="none"){var _=getSymbolSize(c.node1),S=intersectCurveCircle(s,y[0],_*r);o(s[0][0],s[1][0],s[2][0],S,n),s[0][0]=n[3],s[1][0]=n[4],o(s[0][1],s[1][1],s[2][1],S,n),s[0][1]=n[3],s[1][1]=n[4]}if(g&&g!=="none"){var _=getSymbolSize(c.node2),S=intersectCurveCircle(s,y[1],_*r);o(s[0][0],s[1][0],s[2][0],S,n),s[1][0]=n[1],s[2][0]=n[2],o(s[0][1],s[1][1],s[2][1],S,n),s[1][1]=n[1],s[2][1]=n[2]}copy$1(d[0],s[0]),copy$1(d[1],s[2]),copy$1(d[2],s[1])}else{if(copy$1(l[0],y[0]),copy$1(l[1],y[1]),sub(u,l[1],l[0]),normalize$3(u,u),v&&v!=="none"){var _=getSymbolSize(c.node1);scaleAndAdd$1(l[0],l[0],u,_*r)}if(g&&g!=="none"){var _=getSymbolSize(c.node2);scaleAndAdd$1(l[1],l[1],u,-_*r)}copy$1(d[0],l[0]),copy$1(d[1],l[1])}})}var inner$c=makeInner();function getThumbnailBridge(a){if(a)return inner$c(a).bridge}function injectThumbnailBridge(a,r){a&&(inner$c(a).bridge=r)}function isViewCoordSys(a){return a.type==="view"}var GraphView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.init=function(n,o){var s=new SymbolDraw,l=new LineDraw,u=this.group,c=new Group$3;this._controller=new RoamController(o.getZr()),this._controllerHost={target:c},c.add(s.group),c.add(l.group),u.add(c),this._symbolDraw=s,this._lineDraw=l,this._mainGroup=c,this._firstRender=!0},r.prototype.render=function(n,o,s){var l=this,u=n.coordinateSystem,c=!1;this._model=n,this._api=s,this._active=!0;var f=this._getThumbnailInfo();f&&f.bridge.reset(s);var d=this._symbolDraw,v=this._lineDraw;if(isViewCoordSys(u)){var g={x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY};this._firstRender?this._mainGroup.attr(g):updateProps$1(this._mainGroup,g,n)}adjustEdge(n.getGraph(),getNodeGlobalScale(n));var y=n.getData();d.updateData(y);var _=n.getEdgeData();v.updateData(_),this._updateNodeAndLinkScale(),this._updateController(null,n,s),clearTimeout(this._layoutTimeout);var S=n.forceLayout,b=n.get(["force","layoutAnimation"]);S&&(c=!0,this._startForceLayoutIteration(S,s,b));var x=n.get("layout");y.graph.eachNode(function(C){var E=C.dataIndex,P=C.getGraphicEl(),I=C.getModel();if(P){P.off("drag").off("dragend");var M=I.get("draggable");M&&P.on("drag",function(O){switch(x){case"force":S.warmUp(),!l._layouting&&l._startForceLayoutIteration(S,s,b),S.setFixed(E),y.setItemLayout(E,[P.x,P.y]);break;case"circular":y.setItemLayout(E,[P.x,P.y]),C.setLayout({fixed:!0},!0),circularLayout(n,"symbolSize",C,[O.offsetX,O.offsetY]),l.updateLayout(n);break;case"none":default:y.setItemLayout(E,[P.x,P.y]),simpleLayoutEdge(n.getGraph(),n),l.updateLayout(n);break}}).on("dragend",function(){S&&S.setUnfixed(E)}),P.setDraggable(M,!!I.get("cursor"));var R=I.get(["emphasis","focus"]);R==="adjacency"&&(getECData(P).focus=C.getAdjacentDataIndices())}}),y.graph.eachEdge(function(C){var E=C.getGraphicEl(),P=C.getModel().get(["emphasis","focus"]);E&&P==="adjacency"&&(getECData(E).focus={edge:[C.dataIndex],node:[C.node1.dataIndex,C.node2.dataIndex]})});var T=n.get("layout")==="circular"&&n.get(["circular","rotateLabel"]),A=y.getLayout("cx"),w=y.getLayout("cy");y.graph.eachNode(function(C){rotateNodeLabel(C,T,A,w)}),this._firstRender=!1,c||this._renderThumbnail(n,s,this._symbolDraw,this._lineDraw)},r.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype._startForceLayoutIteration=function(n,o,s){var l=this,u=!1;(function c(){n.step(function(f){l.updateLayout(l._model),(f||!u)&&(u=!0,l._renderThumbnail(l._model,o,l._symbolDraw,l._lineDraw)),(l._layouting=!f)&&(s?l._layoutTimeout=setTimeout(c,16):c())})})()},r.prototype._updateController=function(n,o,s){var l=this._controller,u=this._controllerHost,c=o.coordinateSystem;if(!isViewCoordSys(c)){l.disable();return}l.enable(o.get("roam"),{api:s,zInfo:{component:o},triggerInfo:{roamTrigger:o.get("roamTrigger"),isInSelf:function(f,d,v){return c.containPoint([d,v])},isInClip:function(f,d,v){return!n||n.contain(d,v)}}}),u.zoomLimit=o.get("scaleLimit"),u.zoom=c.getZoom(),l.off("pan").off("zoom").on("pan",function(f){s.dispatchAction({seriesId:o.id,type:"graphRoam",dx:f.dx,dy:f.dy})}).on("zoom",function(f){s.dispatchAction({seriesId:o.id,type:"graphRoam",zoom:f.scale,originX:f.originX,originY:f.originY})})},r.prototype.updateViewOnPan=function(n,o,s){this._active&&(updateViewOnPan(this._controllerHost,s.dx,s.dy),this._updateThumbnailWindow())},r.prototype.updateViewOnZoom=function(n,o,s){this._active&&(updateViewOnZoom(this._controllerHost,s.zoom,s.originX,s.originY),this._updateNodeAndLinkScale(),adjustEdge(n.getGraph(),getNodeGlobalScale(n)),this._lineDraw.updateLayout(),o.updateLabelLayout(),this._updateThumbnailWindow())},r.prototype._updateNodeAndLinkScale=function(){var n=this._model,o=n.getData(),s=getNodeGlobalScale(n);o.eachItemGraphicEl(function(l,u){l&&l.setSymbolScale(s)})},r.prototype.updateLayout=function(n){this._active&&(adjustEdge(n.getGraph(),getNodeGlobalScale(n)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout())},r.prototype.remove=function(){this._active=!1,clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove(),this._controller&&this._controller.disable()},r.prototype._getThumbnailInfo=function(){var n=this._model,o=n.coordinateSystem;if(o.type==="view"){var s=getThumbnailBridge(n);if(s)return{bridge:s,coordSys:o}}},r.prototype._updateThumbnailWindow=function(){var n=this._getThumbnailInfo();n&&n.bridge.updateWindow(n.coordSys.transform,this._api)},r.prototype._renderThumbnail=function(n,o,s,l){var u=this._getThumbnailInfo();if(u){var c=new Group$3,f=s.group.children(),d=l.group.children(),v=new Group$3,g=new Group$3;c.add(g),c.add(v);for(var y=0;y<f.length;y++){var _=f[y],S=_.children()[0],b=_.x,x=_.y,T=clone$4(S.shape),A=extend(T,{width:S.scaleX,height:S.scaleY,x:b-S.scaleX/2,y:x-S.scaleY/2}),w=clone$4(S.style),C=new S.constructor({shape:A,style:w,z2:151});g.add(C)}for(var y=0;y<d.length;y++){var _=d[y],E=_.children()[0],w=clone$4(E.style),A=clone$4(E.shape),P=new ECLinePath({style:w,shape:A,z2:151});v.add(P)}u.bridge.renderContent({api:o,roamType:n.get("roam"),viewportRect:null,group:c,targetTrans:u.coordSys.transform})}},r.type="graph",r}(ChartView);function generateNodeKey(a){return"_EC_"+a}var Graph=function(){function a(r){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=r||!1}return a.prototype.isDirected=function(){return this._directed},a.prototype.addNode=function(r,n){r=r==null?""+n:""+r;var o=this._nodesMap;if(!o[generateNodeKey(r)]){var s=new GraphNode(r,n);return s.hostGraph=this,this.nodes.push(s),o[generateNodeKey(r)]=s,s}},a.prototype.getNodeByIndex=function(r){var n=this.data.getRawIndex(r);return this.nodes[n]},a.prototype.getNodeById=function(r){return this._nodesMap[generateNodeKey(r)]},a.prototype.addEdge=function(r,n,o){var s=this._nodesMap,l=this._edgesMap;if(isNumber(r)&&(r=this.nodes[r]),isNumber(n)&&(n=this.nodes[n]),r instanceof GraphNode||(r=s[generateNodeKey(r)]),n instanceof GraphNode||(n=s[generateNodeKey(n)]),!(!r||!n)){var u=r.id+"-"+n.id,c=new GraphEdge(r,n,o);return c.hostGraph=this,this._directed&&(r.outEdges.push(c),n.inEdges.push(c)),r.edges.push(c),r!==n&&n.edges.push(c),this.edges.push(c),l[u]=c,c}},a.prototype.getEdgeByIndex=function(r){var n=this.edgeData.getRawIndex(r);return this.edges[n]},a.prototype.getEdge=function(r,n){r instanceof GraphNode&&(r=r.id),n instanceof GraphNode&&(n=n.id);var o=this._edgesMap;return this._directed?o[r+"-"+n]:o[r+"-"+n]||o[n+"-"+r]},a.prototype.eachNode=function(r,n){for(var o=this.nodes,s=o.length,l=0;l<s;l++)o[l].dataIndex>=0&&r.call(n,o[l],l)},a.prototype.eachEdge=function(r,n){for(var o=this.edges,s=o.length,l=0;l<s;l++)o[l].dataIndex>=0&&o[l].node1.dataIndex>=0&&o[l].node2.dataIndex>=0&&r.call(n,o[l],l)},a.prototype.breadthFirstTraverse=function(r,n,o,s){if(n instanceof GraphNode||(n=this._nodesMap[generateNodeKey(n)]),!!n){for(var l=o==="out"?"outEdges":o==="in"?"inEdges":"edges",u=0;u<this.nodes.length;u++)this.nodes[u].__visited=!1;if(!r.call(s,n,null))for(var c=[n];c.length;)for(var f=c.shift(),d=f[l],u=0;u<d.length;u++){var v=d[u],g=v.node1===f?v.node2:v.node1;if(!g.__visited){if(r.call(s,g,f))return;c.push(g),g.__visited=!0}}}},a.prototype.update=function(){for(var r=this.data,n=this.edgeData,o=this.nodes,s=this.edges,l=0,u=o.length;l<u;l++)o[l].dataIndex=-1;for(var l=0,u=r.count();l<u;l++)o[r.getRawIndex(l)].dataIndex=l;n.filterSelf(function(c){var f=s[n.getRawIndex(c)];return f.node1.dataIndex>=0&&f.node2.dataIndex>=0});for(var l=0,u=s.length;l<u;l++)s[l].dataIndex=-1;for(var l=0,u=n.count();l<u;l++)s[n.getRawIndex(l)].dataIndex=l},a.prototype.clone=function(){for(var r=new a(this._directed),n=this.nodes,o=this.edges,s=0;s<n.length;s++)r.addNode(n[s].id,n[s].dataIndex);for(var s=0;s<o.length;s++){var l=o[s];r.addEdge(l.node1.id,l.node2.id,l.dataIndex)}return r},a}(),GraphNode=function(){function a(r,n){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=r??"",this.dataIndex=n??-1}return a.prototype.degree=function(){return this.edges.length},a.prototype.inDegree=function(){return this.inEdges.length},a.prototype.outDegree=function(){return this.outEdges.length},a.prototype.getModel=function(r){if(!(this.dataIndex<0)){var n=this.hostGraph,o=n.data.getItemModel(this.dataIndex);return o.getModel(r)}},a.prototype.getAdjacentDataIndices=function(){for(var r={edge:[],node:[]},n=0;n<this.edges.length;n++){var o=this.edges[n];o.dataIndex<0||(r.edge.push(o.dataIndex),r.node.push(o.node1.dataIndex,o.node2.dataIndex))}return r},a.prototype.getTrajectoryDataIndices=function(){for(var r=createHashMap(),n=createHashMap(),o=0,s=this.edges.length;o<s;o++){var l=this.edges[o];if(!(l.dataIndex<0)){r.set(l.dataIndex,!0);for(var u=[l.node1],c=[l.node2],f=0;f<u.length;){var d=u[f];f++,n.set(d.dataIndex,!0);for(var v=d.inEdges,g=0,y=v.length,_=void 0,S=void 0;g<y;g++)_=v[g],S=_.dataIndex,S>=0&&!r.hasKey(S)&&(r.set(S,!0),u.push(_.node1))}for(f=0;f<c.length;){var b=c[f];f++,n.set(b.dataIndex,!0);for(var x=b.outEdges,g=0,T=x.length,A=void 0,w=void 0;g<T;g++)A=x[g],w=A.dataIndex,w>=0&&!r.hasKey(w)&&(r.set(w,!0),c.push(A.node2))}}}return{edge:r.keys(),node:n.keys()}},a}(),GraphEdge=function(){function a(r,n,o){this.dataIndex=-1,this.node1=r,this.node2=n,this.dataIndex=o??-1}return a.prototype.getModel=function(r){if(!(this.dataIndex<0)){var n=this.hostGraph,o=n.edgeData.getItemModel(this.dataIndex);return o.getModel(r)}},a.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},a.prototype.getTrajectoryDataIndices=function(){var r=createHashMap(),n=createHashMap();r.set(this.dataIndex,!0);for(var o=[this.node1],s=[this.node2],l=0;l<o.length;){var u=o[l];l++,n.set(u.dataIndex,!0);for(var c=u.inEdges,f=0,d=c.length,v=void 0,g=void 0;f<d;f++)v=u.inEdges[f],g=v.dataIndex,g>=0&&!r.hasKey(g)&&(r.set(g,!0),o.push(v.node1))}for(l=0;l<s.length;){var y=s[l];l++,n.set(y.dataIndex,!0);for(var _=y.outEdges,f=0,d=_.length,S=void 0,b=void 0;f<d;f++)S=y.outEdges[f],b=S.dataIndex,b>=0&&!r.hasKey(b)&&(r.set(b,!0),s.push(S.node2))}return{edge:r.keys(),node:n.keys()}},a}();function createGraphDataProxyMixin(a,r){return{getValue:function(n){var o=this[a][r];return o.getStore().get(o.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,o){this.dataIndex>=0&&this[a][r].setItemVisual(this.dataIndex,n,o)},getVisual:function(n){return this[a][r].getItemVisual(this.dataIndex,n)},setLayout:function(n,o){this.dataIndex>=0&&this[a][r].setItemLayout(this.dataIndex,n,o)},getLayout:function(){return this[a][r].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[a][r].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[a][r].getRawIndex(this.dataIndex)}}}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data"));mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));function createGraphFromNodeEdge(a,r,n,o,s){for(var l=new Graph(o),u=0;u<a.length;u++)l.addNode(retrieve(a[u].id,a[u].name,u),u);for(var c=[],f=[],d=0,u=0;u<r.length;u++){var v=r[u],g=v.source,y=v.target;l.addEdge(g,y,d)&&(f.push(v),c.push(retrieve(convertOptionIdName(v.id,null),g+" > "+y)),d++)}var _=n.get("coordinateSystem"),S;if(_==="cartesian2d"||_==="polar"||_==="matrix")S=createSeriesData(a,n);else{var b=CoordinateSystemManager.get(_),x=b?b.dimensions||[]:[];indexOf(x,"value")<0&&x.concat(["value"]);var T=prepareSeriesDataSchema(a,{coordDimensions:x,encodeDefine:n.getEncode()}).dimensions;S=new SeriesData(T,n),S.initData(a)}var A=new SeriesData(["value"],n);return A.initData(f,c),s&&s(S,A),linkSeriesData({mainData:S,struct:l,structAttr:"graph",datas:{node:S,edge:A},datasAttr:{node:"data",edge:"edgeData"}}),l.update(),l}var GraphSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.hasSymbolVisual=!0,n}return r.prototype.init=function(n){a.prototype.init.apply(this,arguments);var o=this;function s(){return o._categoriesData}this.legendVisualProvider=new LegendVisualProvider(s,s),this.fillDataTextStyle(n.edges||n.links),this._updateCategoriesData()},r.prototype.mergeOption=function(n){a.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(n.edges||n.links),this._updateCategoriesData()},r.prototype.mergeDefaultAndTheme=function(n){a.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(n,"edgeLabel",["show"])},r.prototype.getInitialData=function(n,o){var s=n.edges||n.links||[],l=n.data||n.nodes||[],u=this;if(l&&s){initCurvenessList(this);var c=createGraphFromNodeEdge(l,s,this,!0,f);return each$f(c.edges,function(d){createEdgeMapForCurveness(d.node1,d.node2,this,d.dataIndex)},this),c.data}function f(d,v){d.wrapMethod("getItemModel",function(S){var b=u._categoriesModels,x=S.getShallow("category"),T=b[x];return T&&(T.parentModel=S.parentModel,S.parentModel=T),S});var g=Model.prototype.getModel;function y(S,b){var x=g.call(this,S,b);return x.resolveParentPath=_,x}v.wrapMethod("getItemModel",function(S){return S.resolveParentPath=_,S.getModel=y,S});function _(S){if(S&&(S[0]==="label"||S[1]==="label")){var b=S.slice();return S[0]==="label"?b[0]="edgeLabel":S[1]==="label"&&(b[1]="edgeLabel"),b}return S}}},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.getCategoriesData=function(){return this._categoriesData},r.prototype.formatTooltip=function(n,o,s){if(s==="edge"){var l=this.getData(),u=this.getDataParams(n,s),c=l.graph.getEdgeByIndex(n),f=l.getName(c.node1.dataIndex),d=l.getName(c.node2.dataIndex),v=[];return f!=null&&v.push(f),d!=null&&v.push(d),createTooltipMarkup("nameValue",{name:v.join(" > "),value:u.value,noValue:u.value==null})}var g=defaultSeriesFormatTooltip({series:this,dataIndex:n,multipleSeries:o});return g},r.prototype._updateCategoriesData=function(){var n=map$1(this.option.categories||[],function(s){return s.value!=null?s:extend({value:0},s)}),o=new SeriesData(["value"],this);o.initData(n),this._categoriesData=o,this._categoriesModels=o.mapArray(function(s){return o.getItemModel(s)})},r.prototype.setZoom=function(n){this.option.zoom=n},r.prototype.setCenter=function(n){this.option.center=n},r.prototype.isAnimationEnabled=function(){return a.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},r.type="series.graph",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:tokens.color.neutral50,width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:tokens.color.primary}}},r}(SeriesModel);function install$I(a){a.registerChartView(GraphView),a.registerSeriesModel(GraphSeriesModel),a.registerProcessor(categoryFilter),a.registerVisual(categoryVisual),a.registerVisual(graphEdgeVisual),a.registerLayout(graphSimpleLayout),a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),a.registerLayout(graphForceLayout),a.registerCoordinateSystem("graphView",{dimensions:View.dimensions,create:createViewCoordSys}),a.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop),a.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop),a.registerAction({type:"graphRoam",event:"graphRoam",update:"none"},function(r,n,o){n.eachComponent({mainType:"series",query:r},function(s){var l=o.getViewOfSeriesModel(s);l&&(r.dx!=null&&r.dy!=null&&l.updateViewOnPan(s,o,r),r.zoom!=null&&r.originX!=null&&r.originY!=null&&l.updateViewOnZoom(s,o,r));var u=s.coordinateSystem,c=updateCenterAndZoomInAction(u,r,s.get("scaleLimit"));s.setCenter&&s.setCenter(c.center),s.setZoom&&s.setZoom(c.zoom)})})}var ChordPiece=function(a){__extends(r,a);function r(n,o,s){var l=a.call(this)||this;getECData(l).dataType="node",l.z2=2;var u=new ZRText;return l.setTextContent(u),l.updateData(n,o,s,!0),l}return r.prototype.updateData=function(n,o,s,l){var u=this,c=n.graph.getNodeByIndex(o),f=n.hostModel,d=c.getModel(),v=d.getModel("emphasis"),g=n.getItemLayout(o),y=extend(getSectorCornerRadius(d.getModel("itemStyle"),g,!0),g),_=this;if(isNaN(y.startAngle)){_.setShape(y);return}l?_.setShape(y):updateProps$1(_,{shape:y},f,o);var S=extend(getSectorCornerRadius(d.getModel("itemStyle"),g,!0),g);u.setShape(S),u.useStyle(n.getItemVisual(o,"style")),setStatesStylesFromModel(u,d),this._updateLabel(f,d,c),n.setItemGraphicEl(o,_),setStatesStylesFromModel(_,d,"itemStyle");var b=v.get("focus");toggleHoverEmphasis(this,b==="adjacency"?c.getAdjacentDataIndices():b,v.get("blurScope"),v.get("disabled"))},r.prototype._updateLabel=function(n,o,s){var l=this.getTextContent(),u=s.getLayout(),c=(u.startAngle+u.endAngle)/2,f=Math.cos(c),d=Math.sin(c),v=o.getModel("label");l.ignore=!v.get("show");var g=getLabelStatesModels(o),y=s.getVisual("style");setLabelStyle(l,g,{labelFetcher:{getFormattedLabel:function(A,w,C,E,P,I){return n.getFormattedLabel(A,w,"node",E,retrieve3(P,g.normal&&g.normal.get("formatter"),o.get("name")),I)}},labelDataIndex:s.dataIndex,defaultText:s.dataIndex+"",inheritColor:y.fill,defaultOpacity:y.opacity,defaultOutsidePosition:"startArc"});var _=v.get("position")||"outside",S=v.get("distance")||0,b;_==="outside"?b=u.r+S:b=(u.r+u.r0)/2,this.textConfig={inside:_!=="outside"};var x=_!=="outside"?v.get("align")||"center":f>0?"left":"right",T=_!=="outside"?v.get("verticalAlign")||"middle":d>0?"top":"bottom";l.attr({x:f*b+u.cx,y:d*b+u.cy,rotation:0,style:{align:x,verticalAlign:T}})},r}(Sector),ChordEdge=function(a){__extends(r,a);function r(n,o,s,l){var u=a.call(this)||this;return getECData(u).dataType="edge",u.updateData(n,o,s,l,!0),u}return r.prototype.buildPath=function(n,o){n.moveTo(o.s1[0],o.s1[1]);var s=.7,l=o.clockwise;n.arc(o.cx,o.cy,o.r,o.sStartAngle,o.sEndAngle,!l),n.bezierCurveTo((o.cx-o.s2[0])*s+o.s2[0],(o.cy-o.s2[1])*s+o.s2[1],(o.cx-o.t1[0])*s+o.t1[0],(o.cy-o.t1[1])*s+o.t1[1],o.t1[0],o.t1[1]),n.arc(o.cx,o.cy,o.r,o.tStartAngle,o.tEndAngle,!l),n.bezierCurveTo((o.cx-o.t2[0])*s+o.t2[0],(o.cy-o.t2[1])*s+o.t2[1],(o.cx-o.s1[0])*s+o.s1[0],(o.cy-o.s1[1])*s+o.s1[1],o.s1[0],o.s1[1]),n.closePath()},r.prototype.updateData=function(n,o,s,l,u){var c=n.hostModel,f=o.graph.getEdgeByIndex(s),d=f.getLayout(),v=f.node1.getModel(),g=o.getItemModel(f.dataIndex),y=g.getModel("lineStyle"),_=g.getModel("emphasis"),S=_.get("focus"),b=extend(getSectorCornerRadius(v.getModel("itemStyle"),d,!0),d),x=this;if(isNaN(b.sStartAngle)||isNaN(b.tStartAngle)){x.setShape(b);return}u?(x.setShape(b),applyEdgeFill(x,f,n,y)):(saveOldStyle(x),applyEdgeFill(x,f,n,y),updateProps$1(x,{shape:b},c,s)),toggleHoverEmphasis(this,S==="adjacency"?f.getAdjacentDataIndices():S,_.get("blurScope"),_.get("disabled")),setStatesStylesFromModel(x,g,"lineStyle"),o.setItemGraphicEl(f.dataIndex,x)},r}(Path);function applyEdgeFill(a,r,n,o){var s=r.node1,l=r.node2,u=a.style;a.setStyle(o.getLineStyle());var c=o.get("color");switch(c){case"source":u.fill=n.getItemVisual(s.dataIndex,"style").fill,u.decal=s.getVisual("style").decal;break;case"target":u.fill=n.getItemVisual(l.dataIndex,"style").fill,u.decal=l.getVisual("style").decal;break;case"gradient":var f=n.getItemVisual(s.dataIndex,"style").fill,d=n.getItemVisual(l.dataIndex,"style").fill;if(isString(f)&&isString(d)){var v=a.shape,g=(v.s1[0]+v.s2[0])/2,y=(v.s1[1]+v.s2[1])/2,_=(v.t1[0]+v.t2[0])/2,S=(v.t1[1]+v.t2[1])/2;u.fill=new LinearGradient(g,y,_,S,[{offset:0,color:f},{offset:1,color:d}],!0)}break}}var RADIAN$2=Math.PI/180,ChordView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.init=function(n,o){},r.prototype.render=function(n,o,s){var l=n.getData(),u=this._data,c=this.group,f=-n.get("startAngle")*RADIAN$2;if(l.diff(u).add(function(v){var g=l.getItemLayout(v);if(g){var y=new ChordPiece(l,v,f);getECData(y).dataIndex=v,c.add(y)}}).update(function(v,g){var y=u.getItemGraphicEl(g),_=l.getItemLayout(v);if(!_){y&&removeElementWithFadeOut(y,n,g);return}y?y.updateData(l,v,f):y=new ChordPiece(l,v,f),c.add(y)}).remove(function(v){var g=u.getItemGraphicEl(v);g&&removeElementWithFadeOut(g,n,v)}).execute(),!u){var d=n.get("center");this.group.scaleX=.01,this.group.scaleY=.01,this.group.originX=parsePercent(d[0],s.getWidth()),this.group.originY=parsePercent(d[1],s.getHeight()),initProps(this.group,{scaleX:1,scaleY:1},n)}this._data=l,this.renderEdges(n,f)},r.prototype.renderEdges=function(n,o){var s=n.getData(),l=n.getEdgeData(),u=this._edgeData,c=this.group;l.diff(u).add(function(f){var d=new ChordEdge(s,l,f,o);getECData(d).dataIndex=f,c.add(d)}).update(function(f,d){var v=u.getItemGraphicEl(d);v.updateData(s,l,f,o),c.add(v)}).remove(function(f){var d=u.getItemGraphicEl(f);d&&removeElementWithFadeOut(d,n,f)}).execute(),this._edgeData=l},r.prototype.dispose=function(){},r.type="chord",r}(ChartView),ChordSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.init=function(n){a.prototype.init.apply(this,arguments),this.fillDataTextStyle(n.edges||n.links),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},r.prototype.mergeOption=function(n){a.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(n.edges||n.links)},r.prototype.getInitialData=function(n,o){var s=n.edges||n.links||[],l=n.data||n.nodes||[];if(l&&s){var u=createGraphFromNodeEdge(l,s,this,!0,c);return u.data}function c(f,d){var v=Model.prototype.getModel;function g(_,S){var b=v.call(this,_,S);return b.resolveParentPath=y,b}d.wrapMethod("getItemModel",function(_){return _.resolveParentPath=y,_.getModel=g,_});function y(_){if(_&&(_[0]==="label"||_[1]==="label")){var S=_.slice();return _[0]==="label"?S[0]="edgeLabel":_[1]==="label"&&(S[1]="edgeLabel"),S}return _}}},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.formatTooltip=function(n,o,s){var l=this.getDataParams(n,s);if(s==="edge"){var u=this.getData(),c=u.graph.getEdgeByIndex(n),f=u.getName(c.node1.dataIndex),d=u.getName(c.node2.dataIndex),v=[];return f!=null&&v.push(f),d!=null&&v.push(d),createTooltipMarkup("nameValue",{name:v.join(" > "),value:l.value,noValue:l.value==null})}return createTooltipMarkup("nameValue",{name:l.name,value:l.value,noValue:l.value==null})},r.prototype.getDataParams=function(n,o){var s=a.prototype.getDataParams.call(this,n,o);if(o==="node"){var l=this.getData(),u=this.getGraph().getNodeByIndex(n);if(s.name==null&&(s.name=l.getName(n)),s.value==null){var c=u.getLayout().value;s.value=c}}return s},r.type="series.chord",r.defaultOption={z:2,coordinateSystem:"none",legendHoverLink:!0,colorBy:"data",left:0,top:0,right:0,bottom:0,width:null,height:null,center:["50%","50%"],radius:["70%","80%"],clockwise:!0,startAngle:90,endAngle:"auto",minAngle:0,padAngle:3,itemStyle:{borderRadius:[0,0,5,5]},lineStyle:{width:0,color:"source",opacity:.2},label:{show:!0,position:"outside",distance:5},emphasis:{focus:"adjacency",lineStyle:{opacity:.5}}},r}(SeriesModel),RADIAN$1=Math.PI/180;function chordCircularLayout(a,r){a.eachSeriesByType("chord",function(n){chordLayout(n,r)})}function chordLayout(a,r){var n=a.getData(),o=n.graph,s=a.getEdgeData(),l=s.count();if(l){var u=getCircleLayout(a,r),c=u.cx,f=u.cy,d=u.r,v=u.r0,g=Math.max((a.get("padAngle")||0)*RADIAN$1,0),y=Math.max((a.get("minAngle")||0)*RADIAN$1,0),_=-a.get("startAngle")*RADIAN$1,S=_+Math.PI*2,b=a.get("clockwise"),x=b?1:-1,T=[_,S];normalizeArcAngles(T,!b);var A=T[0],w=T[1],C=w-A,E=n.getSum("value")===0&&s.getSum("value")===0,P=[],I=0;o.eachEdge(function(L){var N=E?1:L.getValue("value");E&&(N>0||y)&&(I+=2);var U=L.node1.dataIndex,H=L.node2.dataIndex;P[U]=(P[U]||0)+N,P[H]=(P[H]||0)+N});var M=0;if(o.eachNode(function(L){var N=L.getValue("value");isNaN(N)||(P[L.dataIndex]=Math.max(N,P[L.dataIndex]||0)),!E&&(P[L.dataIndex]>0||y)&&I++,M+=P[L.dataIndex]||0}),!(I===0||M===0)){g*I>=Math.abs(C)&&(g=Math.max(0,(Math.abs(C)-y*I)/I)),(g+y)*I>=Math.abs(C)&&(y=(Math.abs(C)-g*I)/I);var R=(C-g*I*x)/M,O=0,$=0,B=0;o.eachNode(function(L){var N=P[L.dataIndex]||0,U=R*(M?N:1)*x;Math.abs(U)<y?O+=y-Math.abs(U):($+=Math.abs(U)-y,B+=Math.abs(U)),L.setLayout({angle:U,value:N})});var F=!1;if(O>$){var z=O/$;o.eachNode(function(L){var N=L.getLayout().angle;Math.abs(N)>=y?L.setLayout({angle:N*z,ratio:z},!0):L.setLayout({angle:y,ratio:y===0?1:N/y},!0)})}else o.eachNode(function(L){if(!F){var N=L.getLayout().angle,U=Math.min(N/B,1),H=U*O;N-H<y&&(F=!0)}});var G=O;o.eachNode(function(L){if(!(G<=0)){var N=L.getLayout().angle;if(N>y&&y>0){var U=F?1:Math.min(N/B,1),H=N-y,q=Math.min(H,Math.min(G,O*U));G-=q,L.setLayout({angle:N-q,ratio:(N-q)/N},!0)}else y>0&&L.setLayout({angle:y,ratio:N===0?1:y/N},!0)}});var D=A,V=[];o.eachNode(function(L){var N=Math.max(L.getLayout().angle,y);L.setLayout({cx:c,cy:f,r0:v,r:d,startAngle:D,endAngle:D+N*x,clockwise:b},!0),V[L.dataIndex]=D,D+=(N+g)*x}),o.eachEdge(function(L){var N=E?1:L.getValue("value"),U=R*(M?N:1)*x,H=L.node1.dataIndex,q=V[H]||0,Z=Math.abs((L.node1.getLayout().ratio||1)*U),ee=q+Z*x,ne=[c+v*Math.cos(q),f+v*Math.sin(q)],ue=[c+v*Math.cos(ee),f+v*Math.sin(ee)],K=L.node2.dataIndex,J=V[K]||0,X=Math.abs((L.node2.getLayout().ratio||1)*U),ie=J+X*x,te=[c+v*Math.cos(J),f+v*Math.sin(J)],W=[c+v*Math.cos(ie),f+v*Math.sin(ie)];L.setLayout({s1:ne,s2:ue,sStartAngle:q,sEndAngle:ee,t1:te,t2:W,tStartAngle:J,tEndAngle:ie,cx:c,cy:f,r:v,value:N,clockwise:b}),V[H]=ee,V[K]=ie})}}}function install$H(a){a.registerChartView(ChordView),a.registerSeriesModel(ChordSeriesModel),a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,chordCircularLayout),a.registerProcessor(dataFilter$1("chord"))}var PointerShape=function(){function a(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return a}(),PointerPath=function(a){__extends(r,a);function r(n){var o=a.call(this,n)||this;return o.type="pointer",o}return r.prototype.getDefaultShape=function(){return new PointerShape},r.prototype.buildPath=function(n,o){var s=Math.cos,l=Math.sin,u=o.r,c=o.width,f=o.angle,d=o.x-s(f)*c*(c>=u/3?1:2),v=o.y-l(f)*c*(c>=u/3?1:2);f=o.angle-Math.PI/2,n.moveTo(d,v),n.lineTo(o.x+s(f)*c,o.y+l(f)*c),n.lineTo(o.x+s(o.angle)*u,o.y+l(o.angle)*u),n.lineTo(o.x-s(f)*c,o.y-l(f)*c),n.lineTo(d,v)},r}(Path);function parsePosition(a,r){var n=a.get("center"),o=r.getWidth(),s=r.getHeight(),l=Math.min(o,s),u=parsePercent(n[0],r.getWidth()),c=parsePercent(n[1],r.getHeight()),f=parsePercent(a.get("radius"),l/2);return{cx:u,cy:c,r:f}}function formatLabel(a,r){var n=a==null?"":a+"";return r&&(isString(r)?n=r.replace("{value}",n):isFunction(r)&&(n=r(a))),n}var GaugeView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s){this.group.removeAll();var l=n.get(["axisLine","lineStyle","color"]),u=parsePosition(n,s);this._renderMain(n,o,s,l,u),this._data=n.getData()},r.prototype.dispose=function(){},r.prototype._renderMain=function(n,o,s,l,u){var c=this.group,f=n.get("clockwise"),d=-n.get("startAngle")/180*Math.PI,v=-n.get("endAngle")/180*Math.PI,g=n.getModel("axisLine"),y=g.get("roundCap"),_=y?SausagePath:Sector,S=g.get("show"),b=g.getModel("lineStyle"),x=b.get("width"),T=[d,v];normalizeArcAngles(T,!f),d=T[0],v=T[1];for(var A=v-d,w=d,C=[],E=0;S&&E<l.length;E++){var P=Math.min(Math.max(l[E][0],0),1);v=d+A*P;var I=new _({shape:{startAngle:w,endAngle:v,cx:u.cx,cy:u.cy,clockwise:f,r0:u.r-x,r:u.r},silent:!0});I.setStyle({fill:l[E][1]}),I.setStyle(b.getLineStyle(["color","width"])),C.push(I),w=v}C.reverse(),each$f(C,function(R){return c.add(R)});var M=function(R){if(R<=0)return l[0][1];var O;for(O=0;O<l.length;O++)if(l[O][0]>=R&&(O===0?0:l[O-1][0])<R)return l[O][1];return l[O-1][1]};this._renderTicks(n,o,s,M,u,d,v,f,x),this._renderTitleAndDetail(n,o,s,M,u),this._renderAnchor(n,u),this._renderPointer(n,o,s,M,u,d,v,f,x)},r.prototype._renderTicks=function(n,o,s,l,u,c,f,d,v){for(var g=this.group,y=u.cx,_=u.cy,S=u.r,b=+n.get("min"),x=+n.get("max"),T=n.getModel("splitLine"),A=n.getModel("axisTick"),w=n.getModel("axisLabel"),C=n.get("splitNumber"),E=A.get("splitNumber"),P=parsePercent(T.get("length"),S),I=parsePercent(A.get("length"),S),M=c,R=(f-c)/C,O=R/E,$=T.getModel("lineStyle").getLineStyle(),B=A.getModel("lineStyle").getLineStyle(),F=T.get("distance"),z,G,D=0;D<=C;D++){if(z=Math.cos(M),G=Math.sin(M),T.get("show")){var V=F?F+v:v,L=new Line$1({shape:{x1:z*(S-V)+y,y1:G*(S-V)+_,x2:z*(S-P-V)+y,y2:G*(S-P-V)+_},style:$,silent:!0});$.stroke==="auto"&&L.setStyle({stroke:l(D/C)}),g.add(L)}if(w.get("show")){var V=w.get("distance")+F,N=formatLabel(round$4(D/C*(x-b)+b),w.get("formatter")),U=l(D/C),H=z*(S-P-V)+y,q=G*(S-P-V)+_,Z=w.get("rotate"),ee=0;Z==="radial"?(ee=-M+2*Math.PI,ee>Math.PI/2&&(ee+=Math.PI)):Z==="tangential"?ee=-M-Math.PI/2:isNumber(Z)&&(ee=Z*Math.PI/180),ee===0?g.add(new ZRText({style:createTextStyle(w,{text:N,x:H,y:q,verticalAlign:G<-.8?"top":G>.8?"bottom":"middle",align:z<-.4?"left":z>.4?"right":"center"},{inheritColor:U}),silent:!0})):g.add(new ZRText({style:createTextStyle(w,{text:N,x:H,y:q,verticalAlign:"middle",align:"center"},{inheritColor:U}),silent:!0,originX:H,originY:q,rotation:ee}))}if(A.get("show")&&D!==C){var V=A.get("distance");V=V?V+v:v;for(var ne=0;ne<=E;ne++){z=Math.cos(M),G=Math.sin(M);var ue=new Line$1({shape:{x1:z*(S-V)+y,y1:G*(S-V)+_,x2:z*(S-I-V)+y,y2:G*(S-I-V)+_},silent:!0,style:B});B.stroke==="auto"&&ue.setStyle({stroke:l((D+ne/E)/C)}),g.add(ue),M+=O}M-=O}else M+=R}},r.prototype._renderPointer=function(n,o,s,l,u,c,f,d,v){var g=this.group,y=this._data,_=this._progressEls,S=[],b=n.get(["pointer","show"]),x=n.getModel("progress"),T=x.get("show"),A=n.getData(),w=A.mapDimension("value"),C=+n.get("min"),E=+n.get("max"),P=[C,E],I=[c,f];function M(O,$){var B=A.getItemModel(O),F=B.getModel("pointer"),z=parsePercent(F.get("width"),u.r),G=parsePercent(F.get("length"),u.r),D=n.get(["pointer","icon"]),V=F.get("offsetCenter"),L=parsePercent(V[0],u.r),N=parsePercent(V[1],u.r),U=F.get("keepAspect"),H;return D?H=createSymbol$1(D,L-z/2,N-G,z,G,null,U):H=new PointerPath({shape:{angle:-Math.PI/2,width:z,r:G,x:L,y:N}}),H.rotation=-($+Math.PI/2),H.x=u.cx,H.y=u.cy,H}function R(O,$){var B=x.get("roundCap"),F=B?SausagePath:Sector,z=x.get("overlap"),G=z?x.get("width"):v/A.count(),D=z?u.r-G:u.r-(O+1)*G,V=z?u.r:u.r-O*G,L=new F({shape:{startAngle:c,endAngle:$,cx:u.cx,cy:u.cy,clockwise:d,r0:D,r:V}});return z&&(L.z2=linearMap$2(A.get(w,O),[C,E],[100,0],!0)),L}(T||b)&&(A.diff(y).add(function(O){var $=A.get(w,O);if(b){var B=M(O,c);initProps(B,{rotation:-((isNaN(+$)?I[0]:linearMap$2($,P,I,!0))+Math.PI/2)},n),g.add(B),A.setItemGraphicEl(O,B)}if(T){var F=R(O,c),z=x.get("clip");initProps(F,{shape:{endAngle:linearMap$2($,P,I,z)}},n),g.add(F),setCommonECData(n.seriesIndex,A.dataType,O,F),S[O]=F}}).update(function(O,$){var B=A.get(w,O);if(b){var F=y.getItemGraphicEl($),z=F?F.rotation:c,G=M(O,z);G.rotation=z,updateProps$1(G,{rotation:-((isNaN(+B)?I[0]:linearMap$2(B,P,I,!0))+Math.PI/2)},n),g.add(G),A.setItemGraphicEl(O,G)}if(T){var D=_[$],V=D?D.shape.endAngle:c,L=R(O,V),N=x.get("clip");updateProps$1(L,{shape:{endAngle:linearMap$2(B,P,I,N)}},n),g.add(L),setCommonECData(n.seriesIndex,A.dataType,O,L),S[O]=L}}).execute(),A.each(function(O){var $=A.getItemModel(O),B=$.getModel("emphasis"),F=B.get("focus"),z=B.get("blurScope"),G=B.get("disabled");if(b){var D=A.getItemGraphicEl(O),V=A.getItemVisual(O,"style"),L=V.fill;if(D instanceof ZRImage){var N=D.style;D.useStyle(extend({image:N.image,x:N.x,y:N.y,width:N.width,height:N.height},V))}else D.useStyle(V),D.type!=="pointer"&&D.setColor(L);D.setStyle($.getModel(["pointer","itemStyle"]).getItemStyle()),D.style.fill==="auto"&&D.setStyle("fill",l(linearMap$2(A.get(w,O),P,[0,1],!0))),D.z2EmphasisLift=0,setStatesStylesFromModel(D,$),toggleHoverEmphasis(D,F,z,G)}if(T){var U=S[O];U.useStyle(A.getItemVisual(O,"style")),U.setStyle($.getModel(["progress","itemStyle"]).getItemStyle()),U.z2EmphasisLift=0,setStatesStylesFromModel(U,$),toggleHoverEmphasis(U,F,z,G)}}),this._progressEls=S)},r.prototype._renderAnchor=function(n,o){var s=n.getModel("anchor"),l=s.get("show");if(l){var u=s.get("size"),c=s.get("icon"),f=s.get("offsetCenter"),d=s.get("keepAspect"),v=createSymbol$1(c,o.cx-u/2+parsePercent(f[0],o.r),o.cy-u/2+parsePercent(f[1],o.r),u,u,null,d);v.z2=s.get("showAbove")?1:0,v.setStyle(s.getModel("itemStyle").getItemStyle()),this.group.add(v)}},r.prototype._renderTitleAndDetail=function(n,o,s,l,u){var c=this,f=n.getData(),d=f.mapDimension("value"),v=+n.get("min"),g=+n.get("max"),y=new Group$3,_=[],S=[],b=n.isAnimationEnabled(),x=n.get(["pointer","showAbove"]);f.diff(this._data).add(function(T){_[T]=new ZRText({silent:!0}),S[T]=new ZRText({silent:!0})}).update(function(T,A){_[T]=c._titleEls[A],S[T]=c._detailEls[A]}).execute(),f.each(function(T){var A=f.getItemModel(T),w=f.get(d,T),C=new Group$3,E=l(linearMap$2(w,[v,g],[0,1],!0)),P=A.getModel("title");if(P.get("show")){var I=P.get("offsetCenter"),M=u.cx+parsePercent(I[0],u.r),R=u.cy+parsePercent(I[1],u.r),O=_[T];O.attr({z2:x?0:2,style:createTextStyle(P,{x:M,y:R,text:f.getName(T),align:"center",verticalAlign:"middle"},{inheritColor:E})}),C.add(O)}var $=A.getModel("detail");if($.get("show")){var B=$.get("offsetCenter"),F=u.cx+parsePercent(B[0],u.r),z=u.cy+parsePercent(B[1],u.r),G=parsePercent($.get("width"),u.r),D=parsePercent($.get("height"),u.r),V=n.get(["progress","show"])?f.getItemVisual(T,"style").fill:E,O=S[T],L=$.get("formatter");O.attr({z2:x?0:2,style:createTextStyle($,{x:F,y:z,text:formatLabel(w,L),width:isNaN(G)?null:G,height:isNaN(D)?null:D,align:"center",verticalAlign:"middle"},{inheritColor:V})}),setLabelValueAnimation(O,{normal:$},w,function(U){return formatLabel(U,L)}),b&&animateLabelValue(O,T,f,n,{getFormattedLabel:function(U,H,q,Z,ee,ne){return formatLabel(ne?ne.interpolatedValue:w,L)}}),C.add(O)}y.add(C)}),this.group.add(y),this._titleEls=_,this._detailEls=S},r.type="gauge",r}(ChartView),GaugeSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.visualStyleAccessPath="itemStyle",n}return r.prototype.getInitialData=function(n,o){return createSeriesDataSimply(this,["value"])},r.type="series.gauge",r.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,tokens.color.neutral10]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:tokens.color.axisTick,width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:tokens.color.axisTickMinor,width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:tokens.color.axisLabel,fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:tokens.color.neutral00,borderWidth:0,borderColor:tokens.color.theme[0]}},title:{show:!0,offsetCenter:[0,"20%"],color:tokens.color.secondary,fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:tokens.color.transparent,borderWidth:0,borderColor:tokens.color.neutral40,width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:tokens.color.primary,fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},r}(SeriesModel);function install$G(a){a.registerChartView(GaugeView),a.registerSeriesModel(GaugeSeriesModel)}var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=function(a){__extends(r,a);function r(n,o){var s=a.call(this)||this,l=s,u=new Polyline$1,c=new ZRText;return l.setTextContent(c),s.setTextGuideLine(u),s.updateData(n,o,!0),s}return r.prototype.updateData=function(n,o,s){var l=this,u=n.hostModel,c=n.getItemModel(o),f=n.getItemLayout(o),d=c.getModel("emphasis"),v=c.get(opacityAccessPath$1);v=v??1,s||saveOldStyle(l),l.useStyle(n.getItemVisual(o,"style")),l.style.lineJoin="round",s?(l.setShape({points:f.points}),l.style.opacity=0,initProps(l,{style:{opacity:v}},u,o)):updateProps$1(l,{style:{opacity:v},shape:{points:f.points}},u,o),setStatesStylesFromModel(l,c),this._updateLabel(n,o),toggleHoverEmphasis(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},r.prototype._updateLabel=function(n,o){var s=this,l=this.getTextGuideLine(),u=s.getTextContent(),c=n.hostModel,f=n.getItemModel(o),d=n.getItemLayout(o),v=d.label,g=n.getItemVisual(o,"style"),y=g.fill;setLabelStyle(u,getLabelStatesModels(f),{labelFetcher:n.hostModel,labelDataIndex:o,defaultOpacity:g.opacity,defaultText:n.getName(o)},{normal:{align:v.textAlign,verticalAlign:v.verticalAlign}});var _=f.getModel("label"),S=_.get("color"),b=S==="inherit"?y:null;s.setTextConfig({local:!0,inside:!!v.inside,insideStroke:b,outsideFill:b});var x=v.linePoints;l.setShape({points:x}),s.textGuideLineConfig={anchor:x?new Point(x[0][0],x[0][1]):null},updateProps$1(u,{style:{x:v.x,y:v.y}},c,o),u.attr({rotation:v.rotation,originX:v.x,originY:v.y,z2:10}),setLabelLineStyle(s,getLabelLineStatesModels(f),{stroke:y})},r}(Polygon),FunnelView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.ignoreLabelLineUpdate=!0,n}return r.prototype.render=function(n,o,s){var l=n.getData(),u=this._data,c=this.group;l.diff(u).add(function(f){var d=new FunnelPiece(l,f);l.setItemGraphicEl(f,d),c.add(d)}).update(function(f,d){var v=u.getItemGraphicEl(d);v.updateData(l,f),c.add(v),l.setItemGraphicEl(f,v)}).remove(function(f){var d=u.getItemGraphicEl(f);removeElementWithFadeOut(d,n,f)}).execute(),this._data=l},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.prototype.dispose=function(){},r.type="funnel",r}(ChartView),FunnelSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.init=function(n){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(n)},r.prototype.getInitialData=function(n,o){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},r.prototype._defaultLabelLine=function(n){defaultEmphasis(n,"labelLine",["show"]);var o=n.labelLine,s=n.emphasis.labelLine;o.show=o.show&&n.label.show,s.show=s.show&&n.emphasis.label.show},r.prototype.getDataParams=function(n){var o=this.getData(),s=a.prototype.getDataParams.call(this,n),l=o.mapDimension("value"),u=o.getSum(l);return s.percent=u?+(o.get(l,n)/u*100).toFixed(2):0,s.$vars.push("percent"),s},r.type="series.funnel",r.defaultOption={coordinateSystemUsage:"box",z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:65,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:tokens.color.neutral00,borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:tokens.color.primary}}},r}(SeriesModel);function getSortedIndices(a,r){for(var n=a.mapDimension("value"),o=a.mapArray(n,function(f){return f}),s=[],l=r==="ascending",u=0,c=a.count();u<c;u++)s[u]=u;return isFunction(r)?s.sort(r):r!=="none"&&s.sort(function(f,d){return l?o[f]-o[d]:o[d]-o[f]}),s}function labelLayout(a){var r=a.hostModel,n=r.get("orient");a.each(function(o){var s=a.getItemModel(o),l=s.getModel("label"),u=l.get("position"),c=s.getModel("labelLine"),f=a.getItemLayout(o),d=f.points,v=u==="inner"||u==="inside"||u==="center"||u==="insideLeft"||u==="insideRight",g,y,_,S;if(v)u==="insideLeft"?(y=(d[0][0]+d[3][0])/2+5,_=(d[0][1]+d[3][1])/2,g="left"):u==="insideRight"?(y=(d[1][0]+d[2][0])/2-5,_=(d[1][1]+d[2][1])/2,g="right"):(y=(d[0][0]+d[1][0]+d[2][0]+d[3][0])/4,_=(d[0][1]+d[1][1]+d[2][1]+d[3][1])/4,g="center"),S=[[y,_],[y,_]];else{var b=void 0,x=void 0,T=void 0,A=void 0,w=c.get("length");u==="left"?(b=(d[3][0]+d[0][0])/2,x=(d[3][1]+d[0][1])/2,T=b-w,y=T-5,g="right"):u==="right"?(b=(d[1][0]+d[2][0])/2,x=(d[1][1]+d[2][1])/2,T=b+w,y=T+5,g="left"):u==="top"?(b=(d[3][0]+d[0][0])/2,x=(d[3][1]+d[0][1])/2,A=x-w,_=A-5,g="center"):u==="bottom"?(b=(d[1][0]+d[2][0])/2,x=(d[1][1]+d[2][1])/2,A=x+w,_=A+5,g="center"):u==="rightTop"?(b=n==="horizontal"?d[3][0]:d[1][0],x=n==="horizontal"?d[3][1]:d[1][1],n==="horizontal"?(A=x-w,_=A-5,g="center"):(T=b+w,y=T+5,g="top")):u==="rightBottom"?(b=d[2][0],x=d[2][1],n==="horizontal"?(A=x+w,_=A+5,g="center"):(T=b+w,y=T+5,g="bottom")):u==="leftTop"?(b=d[0][0],x=n==="horizontal"?d[0][1]:d[1][1],n==="horizontal"?(A=x-w,_=A-5,g="center"):(T=b-w,y=T-5,g="right")):u==="leftBottom"?(b=n==="horizontal"?d[1][0]:d[3][0],x=n==="horizontal"?d[1][1]:d[2][1],n==="horizontal"?(A=x+w,_=A+5,g="center"):(T=b-w,y=T-5,g="right")):(b=(d[1][0]+d[2][0])/2,x=(d[1][1]+d[2][1])/2,n==="horizontal"?(A=x+w,_=A+5,g="center"):(T=b+w,y=T+5,g="left")),n==="horizontal"?(T=b,y=T):(A=x,_=A),S=[[b,x],[T,A]]}f.label={linePoints:S,x:y,y:_,verticalAlign:"middle",textAlign:g,inside:v}})}function funnelLayout(a,r){a.eachSeriesByType("funnel",function(n){var o=n.getData(),s=o.mapDimension("value"),l=n.get("sort"),u=createBoxLayoutReference(n,r),c=getLayoutRect(n.getBoxLayoutParams(),u.refContainer),f=n.get("orient"),d=c.width,v=c.height,g=getSortedIndices(o,l),y=c.x,_=c.y,S=f==="horizontal"?[parsePercent(n.get("minSize"),v),parsePercent(n.get("maxSize"),v)]:[parsePercent(n.get("minSize"),d),parsePercent(n.get("maxSize"),d)],b=o.getDataExtent(s),x=n.get("min"),T=n.get("max");x==null&&(x=Math.min(b[0],0)),T==null&&(T=b[1]);var A=n.get("funnelAlign"),w=n.get("gap"),C=f==="horizontal"?d:v,E=(C-w*(o.count()-1))/o.count(),P=function(G,D){if(f==="horizontal"){var V=o.get(s,G)||0,L=linearMap$2(V,[x,T],S,!0),N=void 0;switch(A){case"top":N=_;break;case"center":N=_+(v-L)/2;break;case"bottom":N=_+(v-L);break}return[[D,N],[D,N+L]]}var U=o.get(s,G)||0,H=linearMap$2(U,[x,T],S,!0),q;switch(A){case"left":q=y;break;case"center":q=y+(d-H)/2;break;case"right":q=y+d-H;break}return[[q,D],[q+H,D]]};l==="ascending"&&(E=-E,w=-w,f==="horizontal"?y+=d:_+=v,g=g.reverse());for(var I=0;I<g.length;I++){var M=g[I],R=g[I+1],O=o.getItemModel(M);if(f==="horizontal"){var $=O.get(["itemStyle","width"]);$==null?$=E:($=parsePercent($,d),l==="ascending"&&($=-$));var B=P(M,y),F=P(R,y+$);y+=$+w,o.setItemLayout(M,{points:B.concat(F.slice().reverse())})}else{var z=O.get(["itemStyle","height"]);z==null?z=E:(z=parsePercent(z,v),l==="ascending"&&(z=-z));var B=P(M,_),F=P(R,_+z);_+=z+w,o.setItemLayout(M,{points:B.concat(F.slice().reverse())})}}labelLayout(o)})}function install$F(a){a.registerChartView(FunnelView),a.registerSeriesModel(FunnelSeriesModel),a.registerLayout(funnelLayout),a.registerProcessor(dataFilter$1("funnel"))}var DEFAULT_SMOOTH=.3,ParallelView$1=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n._dataGroup=new Group$3,n._initialized=!1,n}return r.prototype.init=function(){this.group.add(this._dataGroup)},r.prototype.render=function(n,o,s,l){this._progressiveEls=null;var u=this._dataGroup,c=n.getData(),f=this._data,d=n.coordinateSystem,v=d.dimensions,g=makeSeriesScope(n);c.diff(f).add(y).update(_).remove(S).execute();function y(x){var T=addEl(c,u,x,v,d);updateElCommon(T,c,x,g)}function _(x,T){var A=f.getItemGraphicEl(T),w=createLinePoints(c,x,v,d);c.setItemGraphicEl(x,A),updateProps$1(A,{shape:{points:w}},n,x),saveOldStyle(A),updateElCommon(A,c,x,g)}function S(x){var T=f.getItemGraphicEl(x);u.remove(T)}if(!this._initialized){this._initialized=!0;var b=createGridClipShape$2(d,n,function(){setTimeout(function(){u.removeClipPath()})});u.setClipPath(b)}this._data=c},r.prototype.incrementalPrepareRender=function(n,o,s){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},r.prototype.incrementalRender=function(n,o,s){for(var l=o.getData(),u=o.coordinateSystem,c=u.dimensions,f=makeSeriesScope(o),d=this._progressiveEls=[],v=n.start;v<n.end;v++){var g=addEl(l,this._dataGroup,v,c,u);g.incremental=!0,updateElCommon(g,l,v,f),d.push(g)}},r.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},r.type="parallel",r}(ChartView);function createGridClipShape$2(a,r,n){var o=a.model,s=a.getRect(),l=new Rect$2({shape:{x:s.x,y:s.y,width:s.width,height:s.height}}),u=o.get("layout")==="horizontal"?"width":"height";return l.setShape(u,0),initProps(l,{shape:{width:s.width,height:s.height}},r,n),l}function createLinePoints(a,r,n,o){for(var s=[],l=0;l<n.length;l++){var u=n[l],c=a.get(a.mapDimension(u),r);isEmptyValue(c,o.getAxis(u).type)||s.push(o.dataToPoint(c,u))}return s}function addEl(a,r,n,o,s){var l=createLinePoints(a,n,o,s),u=new Polyline$1({shape:{points:l},z2:10});return r.add(u),a.setItemGraphicEl(n,u),u}function makeSeriesScope(a){var r=a.get("smooth",!0);return r===!0&&(r=DEFAULT_SMOOTH),r=numericToNumber(r),eqNaN(r)&&(r=0),{smooth:r}}function updateElCommon(a,r,n,o){a.useStyle(r.getItemVisual(n,"style")),a.style.fill=null,a.setShape("smooth",o.smooth);var s=r.getItemModel(n),l=s.getModel("emphasis");setStatesStylesFromModel(a,s,"lineStyle"),toggleHoverEmphasis(a,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function isEmptyValue(a,r){return r==="category"?a==null:a==null||isNaN(a)}var ParallelSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return r.prototype.getInitialData=function(n,o){return createSeriesData(null,this,{useEncodeDefaulter:bind$1(makeDefaultEncode,null,this)})},r.prototype.getRawIndicesByActiveState=function(n){var o=this.coordinateSystem,s=this.getData(),l=[];return o.eachActiveState(s,function(u,c){n===u&&l.push(s.getRawIndex(c))}),l},r.type="series.parallel",r.dependencies=["parallel"],r.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},r}(SeriesModel);function makeDefaultEncode(a){var r=a.ecModel.getComponent("parallel",a.get("parallelIndex"));if(r){var n={};return each$f(r.dimensions,function(o){var s=convertDimNameToNumber(o);n[o]=s}),n}}function convertDimNameToNumber(a){return+a.replace("dim","")}var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(a,r){var n=a.coordinateSystem,o={normal:a.get(["lineStyle","opacity"]),active:a.get("activeOpacity"),inactive:a.get("inactiveOpacity")};return{progress:function(s,l){n.eachActiveState(l,function(u,c){var f=o[u];if(u==="normal"&&l.hasItemOption){var d=l.getItemModel(c).get(opacityAccessPath,!0);d!=null&&(f=d)}var v=l.ensureUniqueItemVisual(c,"style");v.opacity=f},s.start,s.end)}}}};function parallelPreprocessor(a){createParallelIfNeeded(a),mergeAxisOptionFromParallel(a)}function createParallelIfNeeded(a){if(!a.parallel){var r=!1;each$f(a.series,function(n){n&&n.type==="parallel"&&(r=!0)}),r&&(a.parallel=[{}])}}function mergeAxisOptionFromParallel(a){var r=normalizeToArray(a.parallelAxis);each$f(r,function(n){if(isObject$3(n)){var o=n.parallelIndex||0,s=normalizeToArray(a.parallel)[o];s&&s.parallelAxisDefault&&merge(n,s.parallelAxisDefault,!1)}})}var CLICK_THRESHOLD=5,ParallelView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s){this._model=n,this._api=s,this._handlers||(this._handlers={},each$f(handlers$1,function(l,u){s.getZr().on(u,this._handlers[u]=bind$1(l,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",n.get("axisExpandRate"),"fixRate")},r.prototype.dispose=function(n,o){clear$1(this,"_throttledDispatchExpand"),each$f(this._handlers,function(s,l){o.getZr().off(l,s)}),this._handlers=null},r.prototype._throttledDispatchExpand=function(n){this._dispatchExpand(n)},r.prototype._dispatchExpand=function(n){n&&this._api.dispatchAction(extend({type:"parallelAxisExpand"},n))},r.type="parallel",r}(ComponentView),handlers$1={mousedown:function(a){checkTrigger(this,"click")&&(this._mouseDownPoint=[a.offsetX,a.offsetY])},mouseup:function(a){var r=this._mouseDownPoint;if(checkTrigger(this,"click")&&r){var n=[a.offsetX,a.offsetY],o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2);if(o>CLICK_THRESHOLD)return;var s=this._model.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]);s.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:s.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(a){if(!(this._mouseDownPoint||!checkTrigger(this,"mousemove"))){var r=this._model,n=r.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]),o=n.behavior;o==="jump"&&this._throttledDispatchExpand.debounceNextCall(r.get("axisExpandDebounce")),this._throttledDispatchExpand(o==="none"?null:{axisExpandWindow:n.axisExpandWindow,animation:o==="jump"?null:{duration:0}})}}};function checkTrigger(a,r){var n=a._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===r}var ParallelModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.init=function(){a.prototype.init.apply(this,arguments),this.mergeOption({})},r.prototype.mergeOption=function(n){var o=this.option;n&&merge(o,n,!0),this._initDimensions()},r.prototype.contains=function(n,o){var s=n.get("parallelIndex");return s!=null&&o.getComponent("parallel",s)===this},r.prototype.setAxisExpand=function(n){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(o){n.hasOwnProperty(o)&&(this.option[o]=n[o])},this)},r.prototype._initDimensions=function(){var n=this.dimensions=[],o=this.parallelAxisIndex=[],s=filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(l){return(l.get("parallelIndex")||0)===this.componentIndex},this);each$f(s,function(l){n.push("dim"+l.get("dim")),o.push(l.componentIndex)})},r.type="parallel",r.dependencies=["parallelAxis"],r.layoutMode="box",r.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},r}(ComponentModel),ParallelAxis=function(a){__extends(r,a);function r(n,o,s,l,u){var c=a.call(this,n,o,s)||this;return c.type=l||"value",c.axisIndex=u,c}return r.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},r}(Axis);function sliderMove(a,r,n,o,s,l){a=a||0;var u=n[1]-n[0];if(s!=null&&(s=restrict$1(s,[0,u])),l!=null&&(l=Math.max(l,s??0)),o==="all"){var c=Math.abs(r[1]-r[0]);c=restrict$1(c,[0,u]),s=l=restrict$1(c,[s,l]),o=0}r[0]=restrict$1(r[0],n),r[1]=restrict$1(r[1],n);var f=getSpanSign(r,o);r[o]+=a;var d=s||0,v=n.slice();f.sign<0?v[0]+=d:v[1]-=d,r[o]=restrict$1(r[o],v);var g;return g=getSpanSign(r,o),s!=null&&(g.sign!==f.sign||g.span<s)&&(r[1-o]=r[o]+f.sign*s),g=getSpanSign(r,o),l!=null&&g.span>l&&(r[1-o]=r[o]+g.sign*l),r}function getSpanSign(a,r){var n=a[r]-a[1-r];return{span:Math.abs(n),sign:n>0?-1:n<0?1:r?-1:1}}function restrict$1(a,r){return Math.min(r[1]!=null?r[1]:1/0,Math.max(r[0]!=null?r[0]:-1/0,a))}var each$a=each$f,mathMin$2=Math.min,mathMax$2=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round$1=round$4,PI$1=Math.PI,Parallel=function(){function a(r,n,o){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=r.dimensions,this._model=r,this._init(r,n,o)}return a.prototype._init=function(r,n,o){var s=r.dimensions,l=r.parallelAxisIndex;each$a(s,function(u,c){var f=l[c],d=n.getComponent("parallelAxis",f),v=this._axesMap.set(u,new ParallelAxis(u,createScaleByModel$1(d),[0,0],d.get("type"),f)),g=v.type==="category";v.onBand=g&&d.get("boundaryGap"),v.inverse=d.get("inverse"),d.axis=v,v.model=d,v.coordinateSystem=d.coordinateSystem=this},this)},a.prototype.update=function(r,n){this._updateAxesFromSeries(this._model,r)},a.prototype.containPoint=function(r){var n=this._makeLayoutInfo(),o=n.axisBase,s=n.layoutBase,l=n.pixelDimIndex,u=r[1-l],c=r[l];return u>=o&&u<=o+n.axisLength&&c>=s&&c<=s+n.layoutLength},a.prototype.getModel=function(){return this._model},a.prototype._updateAxesFromSeries=function(r,n){n.eachSeries(function(o){if(r.contains(o,n)){var s=o.getData();each$a(this.dimensions,function(l){var u=this._axesMap.get(l);u.scale.unionExtentFromData(s,s.mapDimension(l)),niceScaleExtent(u.scale,u.model)},this)}},this)},a.prototype.resize=function(r,n){var o=createBoxLayoutReference(r,n).refContainer;this._rect=getLayoutRect(r.getBoxLayoutParams(),o),this._layoutAxes()},a.prototype.getRect=function(){return this._rect},a.prototype._makeLayoutInfo=function(){var r=this._model,n=this._rect,o=["x","y"],s=["width","height"],l=r.get("layout"),u=l==="horizontal"?0:1,c=n[s[u]],f=[0,c],d=this.dimensions.length,v=restrict(r.get("axisExpandWidth"),f),g=restrict(r.get("axisExpandCount")||0,[0,d]),y=r.get("axisExpandable")&&d>3&&d>g&&g>1&&v>0&&c>0,_=r.get("axisExpandWindow"),S;if(_)S=restrict(_[1]-_[0],f),_[1]=_[0]+S;else{S=restrict(v*(g-1),f);var b=r.get("axisExpandCenter")||mathFloor(d/2);_=[v*b-S/2],_[1]=_[0]+S}var x=(c-S)/(d-g);x<3&&(x=0);var T=[mathFloor(round$1(_[0]/v,1))+1,mathCeil(round$1(_[1]/v,1))-1],A=x/v*_[0];return{layout:l,pixelDimIndex:u,layoutBase:n[o[u]],layoutLength:c,axisBase:n[o[1-u]],axisLength:n[s[1-u]],axisExpandable:y,axisExpandWidth:v,axisCollapseWidth:x,axisExpandWindow:_,axisCount:d,winInnerIndices:T,axisExpandWindow0Pos:A}},a.prototype._layoutAxes=function(){var r=this._rect,n=this._axesMap,o=this.dimensions,s=this._makeLayoutInfo(),l=s.layout;n.each(function(u){var c=[0,s.axisLength],f=u.inverse?1:0;u.setExtent(c[f],c[1-f])}),each$a(o,function(u,c){var f=(s.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(c,s),d={horizontal:{x:f.position,y:s.axisLength},vertical:{x:0,y:f.position}},v={horizontal:PI$1/2,vertical:0},g=[d[l].x+r.x,d[l].y+r.y],y=v[l],_=create$1();rotate(_,_,y),translate(_,_,g),this._axesLayout[u]={position:g,rotation:y,transform:_,axisNameAvailableWidth:f.axisNameAvailableWidth,axisLabelShow:f.axisLabelShow,nameTruncateMaxWidth:f.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},a.prototype.getAxis=function(r){return this._axesMap.get(r)},a.prototype.dataToPoint=function(r,n){return this.axisCoordToPoint(this._axesMap.get(n).dataToCoord(r),n)},a.prototype.eachActiveState=function(r,n,o,s){o==null&&(o=0),s==null&&(s=r.count());var l=this._axesMap,u=this.dimensions,c=[],f=[];each$f(u,function(x){c.push(r.mapDimension(x)),f.push(l.get(x).model)});for(var d=this.hasAxisBrushed(),v=o;v<s;v++){var g=void 0;if(!d)g="normal";else{g="active";for(var y=r.getValues(c,v),_=0,S=u.length;_<S;_++){var b=f[_].getActiveState(y[_]);if(b==="inactive"){g="inactive";break}}}n(g,v)}},a.prototype.hasAxisBrushed=function(){for(var r=this.dimensions,n=this._axesMap,o=!1,s=0,l=r.length;s<l;s++)n.get(r[s]).model.getActiveState()!=="normal"&&(o=!0);return o},a.prototype.axisCoordToPoint=function(r,n){var o=this._axesLayout[n];return applyTransform([r,0],o.transform)},a.prototype.getAxisLayout=function(r){return clone$4(this._axesLayout[r])},a.prototype.getSlidedAxisExpandWindow=function(r){var n=this._makeLayoutInfo(),o=n.pixelDimIndex,s=n.axisExpandWindow.slice(),l=s[1]-s[0],u=[0,n.axisExpandWidth*(n.axisCount-1)];if(!this.containPoint(r))return{behavior:"none",axisExpandWindow:s};var c=r[o]-n.layoutBase-n.axisExpandWindow0Pos,f,d="slide",v=n.axisCollapseWidth,g=this._model.get("axisExpandSlideTriggerArea"),y=g[0]!=null;if(v)y&&v&&c<l*g[0]?(d="jump",f=c-l*g[2]):y&&v&&c>l*(1-g[0])?(d="jump",f=c-l*(1-g[2])):(f=c-l*g[1])>=0&&(f=c-l*(1-g[1]))<=0&&(f=0),f*=n.axisExpandWidth/v,f?sliderMove(f,s,u,"all"):d="none";else{var _=s[1]-s[0],S=u[1]*c/_;s=[mathMax$2(0,S-_/2)],s[1]=mathMin$2(u[1],s[0]+_),s[0]=s[1]-_}return{axisExpandWindow:s,behavior:d}},a}();function restrict(a,r){return mathMin$2(mathMax$2(a,r[0]),r[1])}function layoutAxisWithoutExpand(a,r){var n=r.layoutLength/(r.axisCount-1);return{position:n*a,axisNameAvailableWidth:n,axisLabelShow:!0}}function layoutAxisWithExpand(a,r){var n=r.layoutLength,o=r.axisExpandWidth,s=r.axisCount,l=r.axisCollapseWidth,u=r.winInnerIndices,c,f=l,d=!1,v;return a<u[0]?(c=a*l,v=l):a<=u[1]?(c=r.axisExpandWindow0Pos+a*o-r.axisExpandWindow[0],f=o,d=!0):(c=n-(s-1-a)*l,v=l),{position:c,axisNameAvailableWidth:f,axisLabelShow:d,nameTruncateMaxWidth:v}}function createParallelCoordSys(a,r){var n=[];return a.eachComponent("parallel",function(o,s){var l=new Parallel(o,a,r);l.name="parallel_"+s,l.resize(o,r),o.coordinateSystem=l,l.model=o,n.push(l)}),a.eachSeries(function(o){if(o.get("coordinateSystem")==="parallel"){var s=o.getReferringComponents("parallel",SINGLE_REFERRING).models[0];o.coordinateSystem=s.coordinateSystem}}),n}var parallelCoordSysCreator={create:createParallelCoordSys},ParallelAxisModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.activeIntervals=[],n}return r.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},r.prototype.setActiveIntervals=function(n){var o=this.activeIntervals=clone$4(n);if(o)for(var s=o.length-1;s>=0;s--)asc$2(o[s])},r.prototype.getActiveState=function(n){var o=this.activeIntervals;if(!o.length)return"normal";if(n==null||isNaN(+n))return"inactive";if(o.length===1){var s=o[0];if(s[0]<=n&&n<=s[1])return"active"}else for(var l=0,u=o.length;l<u;l++)if(o[l][0]<=n&&n<=o[l][1])return"active";return"inactive"},r}(ComponentModel);mixin(ParallelAxisModel,AxisModelCommonMixin);var BRUSH_PANEL_GLOBAL=!0,mathMin$1=Math.min,mathMax$1=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:tokens.color.backgroundTint,fill:tokens.color.borderTint},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=function(a){__extends(r,a);function r(n){var o=a.call(this)||this;return o._track=[],o._covers=[],o._handlers={},o._zr=n,o.group=new Group$3,o._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(s,l){this._handlers[l]=bind$1(s,this)},o),o}return r.prototype.enableBrush=function(n){return this._brushType&&this._doDisableBrush(),n.brushType&&this._doEnableBrush(n),this},r.prototype._doEnableBrush=function(n){var o=this._zr;this._enableGlobalPan||take(o,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(s,l){o.on(l,s)}),this._brushType=n.brushType,this._brushOption=merge(clone$4(DEFAULT_BRUSH_OPT),n,!0)},r.prototype._doDisableBrush=function(){var n=this._zr;release(n,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(o,s){n.off(s,o)}),this._brushType=this._brushOption=null},r.prototype.setPanels=function(n){if(n&&n.length){var o=this._panels={};each$f(n,function(s){o[s.panelId]=clone$4(s)})}else this._panels=null;return this},r.prototype.mount=function(n){n=n||{},this._enableGlobalPan=n.enableGlobalPan;var o=this.group;return this._zr.add(o),o.attr({x:n.x||0,y:n.y||0,rotation:n.rotation||0,scaleX:n.scaleX||1,scaleY:n.scaleY||1}),this._transform=o.getLocalTransform(),this},r.prototype.updateCovers=function(n){n=map$1(n,function(y){return merge(clone$4(DEFAULT_BRUSH_OPT),y,!0)});var o="\0-brush-index-",s=this._covers,l=this._covers=[],u=this,c=this._creatingCover;return new DataDiffer(s,n,d,f).add(v).update(v).remove(g).execute(),this;function f(y,_){return(y.id!=null?y.id:o+_)+"-"+y.brushType}function d(y,_){return f(y.__brushOption,_)}function v(y,_){var S=n[y];if(_!=null&&s[_]===c)l[y]=s[_];else{var b=l[y]=_!=null?(s[_].__brushOption=S,s[_]):endCreating(u,createCover(u,S));updateCoverAfterCreation(u,b)}}function g(y){s[y]!==c&&u.group.remove(s[y])}},r.prototype.unmount=function(){return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),this},r.prototype.dispose=function(){this.unmount(),this.off()},r}(Eventful);function createCover(a,r){var n=coverRenderers[r.brushType].createCover(a,r);return n.__brushOption=r,updateZ$3(n,r),a.group.add(n),n}function endCreating(a,r){var n=getCoverRenderer(r);return n.endCreating&&(n.endCreating(a,r),updateZ$3(r,r.__brushOption)),r}function updateCoverShape(a,r){var n=r.__brushOption;getCoverRenderer(r).updateCoverShape(a,r,n.range,n)}function updateZ$3(a,r){var n=r.z;n==null&&(n=COVER_Z),a.traverse(function(o){o.z=n,o.z2=n})}function updateCoverAfterCreation(a,r){getCoverRenderer(r).updateCommon(a,r),updateCoverShape(a,r)}function getCoverRenderer(a){return coverRenderers[a.__brushOption.brushType]}function getPanelByPoint(a,r,n){var o=a._panels;if(!o)return BRUSH_PANEL_GLOBAL;var s,l=a._transform;return each$f(o,function(u){u.isTargetByCursor(r,n,l)&&(s=u)}),s}function getPanelByCover(a,r){var n=a._panels;if(!n)return BRUSH_PANEL_GLOBAL;var o=r.__brushOption.panelId;return o!=null?n[o]:BRUSH_PANEL_GLOBAL}function clearCovers(a){var r=a._covers,n=r.length;return each$f(r,function(o){a.group.remove(o)},a),r.length=0,!!n}function trigger(a,r){var n=map$1(a._covers,function(o){var s=o.__brushOption,l=clone$4(s.range);return{brushType:s.brushType,panelId:s.panelId,range:l}});a.trigger("brush",{areas:n,isEnd:!!r.isEnd,removeOnClick:!!r.removeOnClick})}function shouldShowCover(a){var r=a._track;if(!r.length)return!1;var n=r[r.length-1],o=r[0],s=n[0]-o[0],l=n[1]-o[1],u=mathPow(s*s+l*l,.5);return u>UNSELECT_THRESHOLD}function getTrackEnds(a){var r=a.length-1;return r<0&&(r=0),[a[0],a[r]]}function createBaseRectCover(a,r,n,o){var s=new Group$3;return s.add(new Rect$2({name:"main",style:makeStyle(n),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,a,r,s,["n","s","w","e"]),ondragend:curry$1(trigger,r,{isEnd:!0})})),each$f(o,function(l){s.add(new Rect$2({name:l.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,a,r,s,l),ondragend:curry$1(trigger,r,{isEnd:!0})}))}),s}function updateBaseRect(a,r,n,o){var s=o.brushStyle.lineWidth||0,l=mathMax$1(s,MIN_RESIZE_LINE_WIDTH),u=n[0][0],c=n[1][0],f=u-s/2,d=c-s/2,v=n[0][1],g=n[1][1],y=v-l+s/2,_=g-l+s/2,S=v-u,b=g-c,x=S+s,T=b+s;updateRectShape(a,r,"main",u,c,S,b),o.transformable&&(updateRectShape(a,r,"w",f,d,l,T),updateRectShape(a,r,"e",y,d,l,T),updateRectShape(a,r,"n",f,d,x,l),updateRectShape(a,r,"s",f,_,x,l),updateRectShape(a,r,"nw",f,d,l,l),updateRectShape(a,r,"ne",y,d,l,l),updateRectShape(a,r,"sw",f,_,l,l),updateRectShape(a,r,"se",y,_,l,l))}function updateCommon$1(a,r){var n=r.__brushOption,o=n.transformable,s=r.childAt(0);s.useStyle(makeStyle(n)),s.attr({silent:!o,cursor:o?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(l){var u=r.childOfName(l.join("")),c=l.length===1?getGlobalDirection1(a,l[0]):getGlobalDirection2(a,l);u&&u.attr({silent:!o,invisible:!o,cursor:o?CURSOR_MAP[c]+"-resize":null})})}function updateRectShape(a,r,n,o,s,l,u){var c=r.childOfName(n);c&&c.setShape(pointsToRect(clipByPanel(a,r,[[o,s],[o+l,s+u]])))}function makeStyle(a){return defaults({strokeNoScale:!0},a.brushStyle)}function formatRectRange(a,r,n,o){var s=[mathMin$1(a,n),mathMin$1(r,o)],l=[mathMax$1(a,n),mathMax$1(r,o)];return[[s[0],l[0]],[s[1],l[1]]]}function getTransform(a){return getTransform$1(a.group)}function getGlobalDirection1(a,r){var n={w:"left",e:"right",n:"top",s:"bottom"},o={left:"w",right:"e",top:"n",bottom:"s"},s=transformDirection(n[r],getTransform(a));return o[s]}function getGlobalDirection2(a,r){var n=[getGlobalDirection1(a,r[0]),getGlobalDirection1(a,r[1])];return(n[0]==="e"||n[0]==="w")&&n.reverse(),n.join("")}function driftRect(a,r,n,o,s,l){var u=n.__brushOption,c=a.toRectRange(u.range),f=toLocalDelta(r,s,l);each$f(o,function(d){var v=DIRECTION_MAP[d];c[v[0]][v[1]]+=f[v[0]]}),u.range=a.fromRectRange(formatRectRange(c[0][0],c[1][0],c[0][1],c[1][1])),updateCoverAfterCreation(r,n),trigger(r,{isEnd:!1})}function driftPolygon(a,r,n,o){var s=r.__brushOption.range,l=toLocalDelta(a,n,o);each$f(s,function(u){u[0]+=l[0],u[1]+=l[1]}),updateCoverAfterCreation(a,r),trigger(a,{isEnd:!1})}function toLocalDelta(a,r,n){var o=a.group,s=o.transformCoordToLocal(r,n),l=o.transformCoordToLocal(0,0);return[s[0]-l[0],s[1]-l[1]]}function clipByPanel(a,r,n){var o=getPanelByCover(a,r);return o&&o!==BRUSH_PANEL_GLOBAL?o.clipPath(n,a._transform):clone$4(n)}function pointsToRect(a){var r=mathMin$1(a[0][0],a[1][0]),n=mathMin$1(a[0][1],a[1][1]),o=mathMax$1(a[0][0],a[1][0]),s=mathMax$1(a[0][1],a[1][1]);return{x:r,y:n,width:o-r,height:s-n}}function resetCursor(a,r,n){if(!(!a._brushType||isOutsideZrArea(a,r.offsetX,r.offsetY))){var o=a._zr,s=a._covers,l=getPanelByPoint(a,r,n);if(!a._dragging)for(var u=0;u<s.length;u++){var c=s[u].__brushOption;if(l&&(l===BRUSH_PANEL_GLOBAL||c.panelId===l.panelId)&&coverRenderers[c.brushType].contain(s[u],n[0],n[1]))return}l&&o.setCursorStyle("crosshair")}}function preventDefault(a){var r=a.event;r.preventDefault&&r.preventDefault()}function mainShapeContain(a,r,n){return a.childOfName("main").contain(r,n)}function updateCoverByMouse(a,r,n,o){var s=a._creatingCover,l=a._creatingPanel,u=a._brushOption,c;if(a._track.push(n.slice()),shouldShowCover(a)||s){if(l&&!s){u.brushMode==="single"&&clearCovers(a);var f=clone$4(u);f.brushType=determineBrushType(f.brushType,l),f.panelId=l===BRUSH_PANEL_GLOBAL?null:l.panelId,s=a._creatingCover=createCover(a,f),a._covers.push(s)}if(s){var d=coverRenderers[determineBrushType(a._brushType,l)],v=s.__brushOption;v.range=d.getCreatingRange(clipByPanel(a,s,a._track)),o&&(endCreating(a,s),d.updateCommon(a,s)),updateCoverShape(a,s),c={isEnd:o}}}else o&&u.brushMode==="single"&&u.removeOnClick&&getPanelByPoint(a,r,n)&&clearCovers(a)&&(c={isEnd:o,removeOnClick:!0});return c}function determineBrushType(a,r){return a==="auto"?r.defaultBrushType:a}var pointerHandlers={mousedown:function(a){if(this._dragging)handleDragEnd(this,a);else if(!a.target||!a.target.draggable){preventDefault(a);var r=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null;var n=this._creatingPanel=getPanelByPoint(this,a,r);n&&(this._dragging=!0,this._track=[r.slice()])}},mousemove:function(a){var r=a.offsetX,n=a.offsetY,o=this.group.transformCoordToLocal(r,n);if(resetCursor(this,a,o),this._dragging){preventDefault(a);var s=updateCoverByMouse(this,a,o,!1);s&&trigger(this,s)}},mouseup:function(a){handleDragEnd(this,a)}};function handleDragEnd(a,r){if(a._dragging){preventDefault(r);var n=r.offsetX,o=r.offsetY,s=a.group.transformCoordToLocal(n,o),l=updateCoverByMouse(a,r,s,!0);a._dragging=!1,a._track=[],a._creatingCover=null,l&&trigger(a,l)}}function isOutsideZrArea(a,r,n){var o=a._zr;return r<0||r>o.getWidth()||n<0||n>o.getHeight()}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(a,r){function n(o){return o}return createBaseRectCover({toRectRange:n,fromRectRange:n},a,r,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(a){var r=getTrackEnds(a);return formatRectRange(r[1][0],r[1][1],r[0][0],r[0][1])},updateCoverShape:function(a,r,n,o){updateBaseRect(a,r,n,o)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(a,r){var n=new Group$3;return n.add(new Polyline$1({name:"main",style:makeStyle(r),silent:!0})),n},getCreatingRange:function(a){return a},endCreating:function(a,r){r.remove(r.childAt(0)),r.add(new Polygon({name:"main",draggable:!0,drift:curry$1(driftPolygon,a,r),ondragend:curry$1(trigger,a,{isEnd:!0})}))},updateCoverShape:function(a,r,n,o){r.childAt(0).setShape({points:clipByPanel(a,r,n)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(a){return{createCover:function(r,n){return createBaseRectCover({toRectRange:function(o){var s=[o,[0,100]];return a&&s.reverse(),s},fromRectRange:function(o){return o[a]}},r,n,[[["w"],["e"]],[["n"],["s"]]][a])},getCreatingRange:function(r){var n=getTrackEnds(r),o=mathMin$1(n[0][a],n[1][a]),s=mathMax$1(n[0][a],n[1][a]);return[o,s]},updateCoverShape:function(r,n,o,s){var l,u=getPanelByCover(r,n);if(u!==BRUSH_PANEL_GLOBAL&&u.getLinearBrushOtherExtent)l=u.getLinearBrushOtherExtent(a);else{var c=r._zr;l=[0,[c.getWidth(),c.getHeight()][1-a]]}var f=[o,l];a&&f.reverse(),updateBaseRect(r,n,f,s)},updateCommon:updateCommon$1,contain:mainShapeContain}}function makeRectPanelClipPath(a){return a=normalizeRect(a),function(r){return clipPointsByRect(r,a)}}function makeLinearBrushOtherExtent(a,r){return a=normalizeRect(a),function(n){var o=r??n,s=o?a.width:a.height,l=o?a.x:a.y;return[l,l+(s||0)]}}function makeRectIsTargetByCursor(a,r,n){var o=normalizeRect(a);return function(s,l){return o.contain(l[0],l[1])&&!onIrrelevantElement(s,r,n)}}function normalizeRect(a){return BoundingRect.create(a)}var ParallelAxisView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.init=function(n,o){a.prototype.init.apply(this,arguments),(this._brushController=new BrushController(o.getZr())).on("brush",bind$1(this._onBrush,this))},r.prototype.render=function(n,o,s,l){if(!fromAxisAreaSelect(n,o,l)){this.axisModel=n,this.api=s,this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!n.get("show")){var c=getCoordSysModel(n,o),f=c.coordinateSystem,d=n.getAreaSelectStyle(),v=d.width,g=n.axis.dim,y=f.getAxisLayout(g),_=extend({strokeContainThreshold:v},y),S=new AxisBuilder(n,s,_);S.build(),this._axisGroup.add(S.group),this._refreshBrushController(_,d,n,c,v,s),groupTransition(u,this._axisGroup,n)}}},r.prototype._refreshBrushController=function(n,o,s,l,u,c){var f=s.axis.getExtent(),d=f[1]-f[0],v=Math.min(30,Math.abs(d)*.1),g=BoundingRect.create({x:f[0],y:-u/2,width:d,height:u});g.x-=v,g.width+=2*v,this._brushController.mount({enableGlobalPan:!0,rotation:n.rotation,x:n.position[0],y:n.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(g),isTargetByCursor:makeRectIsTargetByCursor(g,c,l),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(g,0)}]).enableBrush({brushType:"lineX",brushStyle:o,removeOnClick:!0}).updateCovers(getCoverInfoList(s))},r.prototype._onBrush=function(n){var o=n.areas,s=this.axisModel,l=s.axis,u=map$1(o,function(c){return[l.coordToData(c.range[0],!0),l.coordToData(c.range[1],!0)]});(!s.option.realtime===n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:s.id,intervals:u})},r.prototype.dispose=function(){this._brushController.dispose()},r.type="parallelAxis",r}(ComponentView);function fromAxisAreaSelect(a,r,n){return n&&n.type==="axisAreaSelect"&&r.findComponents({mainType:"parallelAxis",query:n})[0]===a}function getCoverInfoList(a){var r=a.axis;return map$1(a.activeIntervals,function(n){return{brushType:"lineX",panelId:"pl",range:[r.dataToCoord(n[0],!0),r.dataToCoord(n[1],!0)]}})}function getCoordSysModel(a,r){return r.getComponent("parallel",a.get("parallelIndex"))}var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};function installParallelActions(a){a.registerAction(actionInfo,function(r,n){n.eachComponent({mainType:"parallelAxis",query:r},function(o){o.axis.model.setActiveIntervals(r.intervals)})}),a.registerAction("parallelAxisExpand",function(r,n){n.eachComponent({mainType:"parallel",query:r},function(o){o.setAxisExpand(r)})})}var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$E(a){a.registerComponentView(ParallelView),a.registerComponentModel(ParallelModel),a.registerCoordinateSystem("parallel",parallelCoordSysCreator),a.registerPreprocessor(parallelPreprocessor),a.registerComponentModel(ParallelAxisModel),a.registerComponentView(ParallelAxisView),axisModelCreator(a,"parallel",ParallelAxisModel,defaultAxisOption),installParallelActions(a)}function install$D(a){use(install$E),a.registerChartView(ParallelView$1),a.registerSeriesModel(ParallelSeriesModel),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,parallelVisual)}var SankeyPathShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return a}(),SankeyPath=function(a){__extends(r,a);function r(n){return a.call(this,n)||this}return r.prototype.getDefaultShape=function(){return new SankeyPathShape},r.prototype.buildPath=function(n,o){var s=o.extent;n.moveTo(o.x1,o.y1),n.bezierCurveTo(o.cpx1,o.cpy1,o.cpx2,o.cpy2,o.x2,o.y2),o.orient==="vertical"?(n.lineTo(o.x2+s,o.y2),n.bezierCurveTo(o.cpx2+s,o.cpy2,o.cpx1+s,o.cpy1,o.x1+s,o.y1)):(n.lineTo(o.x2,o.y2+s),n.bezierCurveTo(o.cpx2,o.cpy2+s,o.cpx1,o.cpy1+s,o.x1,o.y1+s)),n.closePath()},r.prototype.highlight=function(){enterEmphasis(this)},r.prototype.downplay=function(){leaveEmphasis(this)},r}(Path),SankeyView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n._mainGroup=new Group$3,n._focusAdjacencyDisabled=!1,n}return r.prototype.init=function(n,o){this._controller=new RoamController(o.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},r.prototype.render=function(n,o,s){var l=this,u=n.getGraph(),c=this._mainGroup,f=n.layoutInfo,d=f.width,v=f.height,g=n.getData(),y=n.getData("edge"),_=n.get("orient");this._model=n,c.removeAll(),c.x=f.x,c.y=f.y,this._updateViewCoordSys(n,s),updateController(n,s,c,this._controller,this._controllerHost,null),u.eachEdge(function(S){var b=new SankeyPath,x=getECData(b);x.dataIndex=S.dataIndex,x.seriesIndex=n.seriesIndex,x.dataType="edge";var T=S.getModel(),A=T.getModel("lineStyle"),w=A.get("curveness"),C=S.node1.getLayout(),E=S.node1.getModel(),P=E.get("localX"),I=E.get("localY"),M=S.node2.getLayout(),R=S.node2.getModel(),O=R.get("localX"),$=R.get("localY"),B=S.getLayout(),F,z,G,D,V,L,N,U;b.shape.extent=Math.max(1,B.dy),b.shape.orient=_,_==="vertical"?(F=(P!=null?P*d:C.x)+B.sy,z=(I!=null?I*v:C.y)+C.dy,G=(O!=null?O*d:M.x)+B.ty,D=$!=null?$*v:M.y,V=F,L=z*(1-w)+D*w,N=G,U=z*w+D*(1-w)):(F=(P!=null?P*d:C.x)+C.dx,z=(I!=null?I*v:C.y)+B.sy,G=O!=null?O*d:M.x,D=($!=null?$*v:M.y)+B.ty,V=F*(1-w)+G*w,L=z,N=F*w+G*(1-w),U=D),b.setShape({x1:F,y1:z,x2:G,y2:D,cpx1:V,cpy1:L,cpx2:N,cpy2:U}),b.useStyle(A.getItemStyle()),applyCurveStyle(b.style,_,S);var H=""+T.get("value"),q=getLabelStatesModels(T,"edgeLabel");setLabelStyle(b,q,{labelFetcher:{getFormattedLabel:function(ne,ue,K,J,X,ie){return n.getFormattedLabel(ne,ue,"edge",J,retrieve3(X,q.normal&&q.normal.get("formatter"),H),ie)}},labelDataIndex:S.dataIndex,defaultText:H}),b.setTextConfig({position:"inside"});var Z=T.getModel("emphasis");setStatesStylesFromModel(b,T,"lineStyle",function(ne){var ue=ne.getItemStyle();return applyCurveStyle(ue,_,S),ue}),c.add(b),y.setItemGraphicEl(S.dataIndex,b);var ee=Z.get("focus");toggleHoverEmphasis(b,ee==="adjacency"?S.getAdjacentDataIndices():ee==="trajectory"?S.getTrajectoryDataIndices():ee,Z.get("blurScope"),Z.get("disabled"))}),u.eachNode(function(S){var b=S.getLayout(),x=S.getModel(),T=x.get("localX"),A=x.get("localY"),w=x.getModel("emphasis"),C=x.get(["itemStyle","borderRadius"])||0,E=new Rect$2({shape:{x:T!=null?T*d:b.x,y:A!=null?A*v:b.y,width:b.dx,height:b.dy,r:C},style:x.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(E,getLabelStatesModels(x),{labelFetcher:{getFormattedLabel:function(I,M){return n.getFormattedLabel(I,M,"node")}},labelDataIndex:S.dataIndex,defaultText:S.id}),E.disableLabelAnimation=!0,E.setStyle("fill",S.getVisual("color")),E.setStyle("decal",S.getVisual("style").decal),setStatesStylesFromModel(E,x),c.add(E),g.setItemGraphicEl(S.dataIndex,E),getECData(E).dataType="node";var P=w.get("focus");toggleHoverEmphasis(E,P==="adjacency"?S.getAdjacentDataIndices():P==="trajectory"?S.getTrajectoryDataIndices():P,w.get("blurScope"),w.get("disabled"))}),g.eachItemGraphicEl(function(S,b){var x=g.getItemModel(b);x.get("draggable")&&(S.drift=function(T,A){l._focusAdjacencyDisabled=!0,this.shape.x+=T,this.shape.y+=A,this.dirty(),s.dispatchAction({type:"dragNode",seriesId:n.id,dataIndex:g.getRawIndex(b),localX:this.shape.x/d,localY:this.shape.y/v})},S.ondragend=function(){l._focusAdjacencyDisabled=!1},S.draggable=!0,S.cursor="move")}),!this._data&&n.isAnimationEnabled()&&c.setClipPath(createGridClipShape$1(c.getBoundingRect(),n,function(){c.removeClipPath()})),this._data=n.getData()},r.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype._updateViewCoordSys=function(n,o){var s=n.layoutInfo,l=s.width,u=s.height,c=n.coordinateSystem=new View(null,{api:o,ecModel:n.ecModel});c.zoomLimit=n.get("scaleLimit"),c.setBoundingRect(0,0,l,u),c.setCenter(n.get("center")),c.setZoom(n.get("zoom")),this._controllerHost.target.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY})},r.type="sankey",r}(ChartView);function applyCurveStyle(a,r,n){switch(a.fill){case"source":a.fill=n.node1.getVisual("color"),a.decal=n.node1.getVisual("style").decal;break;case"target":a.fill=n.node2.getVisual("color"),a.decal=n.node2.getVisual("style").decal;break;case"gradient":var o=n.node1.getVisual("color"),s=n.node2.getVisual("color");isString(o)&&isString(s)&&(a.fill=new LinearGradient(0,0,+(r==="horizontal"),+(r==="vertical"),[{color:o,offset:0},{color:s,offset:1}]))}}function createGridClipShape$1(a,r,n){var o=new Rect$2({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return initProps(o,{shape:{width:a.width+20}},r,n),o}var SankeySeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.getInitialData=function(n,o){var s=n.edges||n.links||[],l=n.data||n.nodes||[],u=n.levels||[];this.levelModels=[];for(var c=this.levelModels,f=0;f<u.length;f++)u[f].depth!=null&&u[f].depth>=0&&(c[u[f].depth]=new Model(u[f],this,o));var d=createGraphFromNodeEdge(l,s,this,!0,v);return d.data;function v(g,y){g.wrapMethod("getItemModel",function(_,S){var b=_.parentModel,x=b.getData().getItemLayout(S);if(x){var T=x.depth,A=b.levelModels[T];A&&(_.parentModel=A)}return _}),y.wrapMethod("getItemModel",function(_,S){var b=_.parentModel,x=b.getGraph().getEdgeByIndex(S),T=x.node1.getLayout();if(T){var A=T.depth,w=b.levelModels[A];w&&(_.parentModel=w)}return _})}},r.prototype.setNodePosition=function(n,o){var s=this.option.data||this.option.nodes,l=s[n];l.localX=o[0],l.localY=o[1]},r.prototype.setCenter=function(n){this.option.center=n},r.prototype.setZoom=function(n){this.option.zoom=n},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.formatTooltip=function(n,o,s){function l(_){return isNaN(_)||_==null}if(s==="edge"){var u=this.getDataParams(n,s),c=u.data,f=u.value,d=c.source+" -- "+c.target;return createTooltipMarkup("nameValue",{name:d,value:f,noValue:l(f)})}else{var v=this.getGraph().getNodeByIndex(n),g=v.getLayout().value,y=this.getDataParams(n,s).data.name;return createTooltipMarkup("nameValue",{name:y!=null?y+"":null,value:g,noValue:l(g)})}},r.prototype.optionUpdated=function(){},r.prototype.getDataParams=function(n,o){var s=a.prototype.getDataParams.call(this,n,o);if(s.value==null&&o==="node"){var l=this.getGraph().getNodeByIndex(n),u=l.getLayout().value;s.value=u}return s},r.type="series.sankey",r.layoutMode="box",r.defaultOption={z:2,coordinateSystemUsage:"box",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,roam:!1,roamTrigger:"global",center:null,zoom:1,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:tokens.color.neutral50,opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:tokens.color.primary}},animationEasing:"linear",animationDuration:1e3},r}(SeriesModel);function sankeyLayout(a,r){a.eachSeriesByType("sankey",function(n){var o=n.get("nodeWidth"),s=n.get("nodeGap"),l=createBoxLayoutReference(n,r).refContainer,u=getLayoutRect(n.getBoxLayoutParams(),l);n.layoutInfo=u;var c=u.width,f=u.height,d=n.getGraph(),v=d.nodes,g=d.edges;computeNodeValues(v);var y=filter(v,function(x){return x.getLayout().value===0}),_=y.length!==0?0:n.get("layoutIterations"),S=n.get("orient"),b=n.get("nodeAlign");layoutSankey(v,g,o,s,c,f,_,S,b)})}function layoutSankey(a,r,n,o,s,l,u,c,f){computeNodeBreadths(a,r,n,s,l,c,f),computeNodeDepths(a,r,l,s,o,u,c),computeEdgeDepths(a,c)}function computeNodeValues(a){each$f(a,function(r){var n=sum(r.outEdges,getEdgeValue),o=sum(r.inEdges,getEdgeValue),s=r.getValue()||0,l=Math.max(n,o,s);r.setLayout({value:l},!0)})}function computeNodeBreadths(a,r,n,o,s,l,u){for(var c=[],f=[],d=[],v=[],g=0,y=0;y<r.length;y++)c[y]=1;for(var y=0;y<a.length;y++)f[y]=a[y].inEdges.length,f[y]===0&&d.push(a[y]);for(var _=-1;d.length;){for(var S=0;S<d.length;S++){var b=d[S],x=b.hostGraph.data.getRawDataItem(b.dataIndex),T=x.depth!=null&&x.depth>=0;T&&x.depth>_&&(_=x.depth),b.setLayout({depth:T?x.depth:g},!0),l==="vertical"?b.setLayout({dy:n},!0):b.setLayout({dx:n},!0);for(var A=0;A<b.outEdges.length;A++){var w=b.outEdges[A],C=r.indexOf(w);c[C]=0;var E=w.node2,P=a.indexOf(E);--f[P]===0&&v.indexOf(E)<0&&v.push(E)}}++g,d=v,v=[]}for(var y=0;y<c.length;y++)if(c[y]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var I=_>g-1?_:g-1;u&&u!=="left"&&adjustNodeWithNodeAlign(a,u,l,I);var M=l==="vertical"?(s-n)/I:(o-n)/I;scaleNodeBreadths(a,M,l)}function isNodeDepth(a){var r=a.hostGraph.data.getRawDataItem(a.dataIndex);return r.depth!=null&&r.depth>=0}function adjustNodeWithNodeAlign(a,r,n,o){if(r==="right"){for(var s=[],l=a,u=0;l.length;){for(var c=0;c<l.length;c++){var f=l[c];f.setLayout({skNodeHeight:u},!0);for(var d=0;d<f.inEdges.length;d++){var v=f.inEdges[d];s.indexOf(v.node1)<0&&s.push(v.node1)}}l=s,s=[],++u}each$f(a,function(g){isNodeDepth(g)||g.setLayout({depth:Math.max(0,o-g.getLayout().skNodeHeight)},!0)})}else r==="justify"&&moveSinksRight(a,o)}function moveSinksRight(a,r){each$f(a,function(n){!isNodeDepth(n)&&!n.outEdges.length&&n.setLayout({depth:r},!0)})}function scaleNodeBreadths(a,r,n){each$f(a,function(o){var s=o.getLayout().depth*r;n==="vertical"?o.setLayout({y:s},!0):o.setLayout({x:s},!0)})}function computeNodeDepths(a,r,n,o,s,l,u){var c=prepareNodesByBreadth(a,u);initializeNodeDepth(c,r,n,o,s,u),resolveCollisions(c,s,n,o,u);for(var f=1;l>0;l--)f*=.99,relaxRightToLeft(c,f,u),resolveCollisions(c,s,n,o,u),relaxLeftToRight(c,f,u),resolveCollisions(c,s,n,o,u)}function prepareNodesByBreadth(a,r){var n=[],o=r==="vertical"?"y":"x",s=groupData(a,function(l){return l.getLayout()[o]});return s.keys.sort(function(l,u){return l-u}),each$f(s.keys,function(l){n.push(s.buckets.get(l))}),n}function initializeNodeDepth(a,r,n,o,s,l){var u=1/0;each$f(a,function(c){var f=c.length,d=0;each$f(c,function(g){d+=g.getLayout().value});var v=l==="vertical"?(o-(f-1)*s)/d:(n-(f-1)*s)/d;v<u&&(u=v)}),each$f(a,function(c){each$f(c,function(f,d){var v=f.getLayout().value*u;l==="vertical"?(f.setLayout({x:d},!0),f.setLayout({dx:v},!0)):(f.setLayout({y:d},!0),f.setLayout({dy:v},!0))})}),each$f(r,function(c){var f=+c.getValue()*u;c.setLayout({dy:f},!0)})}function resolveCollisions(a,r,n,o,s){var l=s==="vertical"?"x":"y";each$f(a,function(u){u.sort(function(b,x){return b.getLayout()[l]-x.getLayout()[l]});for(var c,f,d,v=0,g=u.length,y=s==="vertical"?"dx":"dy",_=0;_<g;_++)f=u[_],d=v-f.getLayout()[l],d>0&&(c=f.getLayout()[l]+d,s==="vertical"?f.setLayout({x:c},!0):f.setLayout({y:c},!0)),v=f.getLayout()[l]+f.getLayout()[y]+r;var S=s==="vertical"?o:n;if(d=v-r-S,d>0){c=f.getLayout()[l]-d,s==="vertical"?f.setLayout({x:c},!0):f.setLayout({y:c},!0),v=c;for(var _=g-2;_>=0;--_)f=u[_],d=f.getLayout()[l]+f.getLayout()[y]+r-v,d>0&&(c=f.getLayout()[l]-d,s==="vertical"?f.setLayout({x:c},!0):f.setLayout({y:c},!0)),v=f.getLayout()[l]}})}function relaxRightToLeft(a,r,n){each$f(a.slice().reverse(),function(o){each$f(o,function(s){if(s.outEdges.length){var l=sum(s.outEdges,weightedTarget,n)/sum(s.outEdges,getEdgeValue);if(isNaN(l)){var u=s.outEdges.length;l=u?sum(s.outEdges,centerTarget,n)/u:0}if(n==="vertical"){var c=s.getLayout().x+(l-center(s,n))*r;s.setLayout({x:c},!0)}else{var f=s.getLayout().y+(l-center(s,n))*r;s.setLayout({y:f},!0)}}})})}function weightedTarget(a,r){return center(a.node2,r)*a.getValue()}function centerTarget(a,r){return center(a.node2,r)}function weightedSource(a,r){return center(a.node1,r)*a.getValue()}function centerSource(a,r){return center(a.node1,r)}function center(a,r){return r==="vertical"?a.getLayout().x+a.getLayout().dx/2:a.getLayout().y+a.getLayout().dy/2}function getEdgeValue(a){return a.getValue()}function sum(a,r,n){for(var o=0,s=a.length,l=-1;++l<s;){var u=+r(a[l],n);isNaN(u)||(o+=u)}return o}function relaxLeftToRight(a,r,n){each$f(a,function(o){each$f(o,function(s){if(s.inEdges.length){var l=sum(s.inEdges,weightedSource,n)/sum(s.inEdges,getEdgeValue);if(isNaN(l)){var u=s.inEdges.length;l=u?sum(s.inEdges,centerSource,n)/u:0}if(n==="vertical"){var c=s.getLayout().x+(l-center(s,n))*r;s.setLayout({x:c},!0)}else{var f=s.getLayout().y+(l-center(s,n))*r;s.setLayout({y:f},!0)}}})})}function computeEdgeDepths(a,r){var n=r==="vertical"?"x":"y";each$f(a,function(o){o.outEdges.sort(function(s,l){return s.node2.getLayout()[n]-l.node2.getLayout()[n]}),o.inEdges.sort(function(s,l){return s.node1.getLayout()[n]-l.node1.getLayout()[n]})}),each$f(a,function(o){var s=0,l=0;each$f(o.outEdges,function(u){u.setLayout({sy:s},!0),s+=u.getLayout().dy}),each$f(o.inEdges,function(u){u.setLayout({ty:l},!0),l+=u.getLayout().dy})})}function sankeyVisual(a){a.eachSeriesByType("sankey",function(r){var n=r.getGraph(),o=n.nodes,s=n.edges;if(o.length){var l=1/0,u=-1/0;each$f(o,function(c){var f=c.getLayout().value;f<l&&(l=f),f>u&&(u=f)}),each$f(o,function(c){var f=new VisualMapping({type:"color",mappingMethod:"linear",dataExtent:[l,u],visual:r.get("color")}),d=f.mapValueToVisual(c.getLayout().value),v=c.getModel().get(["itemStyle","color"]);v!=null?(c.setVisual("color",v),c.setVisual("style",{fill:v})):(c.setVisual("color",d),c.setVisual("style",{fill:d}))})}s.length&&each$f(s,function(c){var f=c.getModel().get("lineStyle");c.setVisual("style",f)})})}function install$C(a){a.registerChartView(SankeyView),a.registerSeriesModel(SankeySeriesModel),a.registerLayout(sankeyLayout),a.registerVisual(sankeyVisual),a.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(r,n){n.eachComponent({mainType:"series",subType:"sankey",query:r},function(o){o.setNodePosition(r.dataIndex,[r.localX,r.localY])})}),a.registerAction({type:"sankeyRoam",event:"sankeyRoam",update:"none"},function(r,n,o){n.eachComponent({mainType:"series",subType:"sankey",query:r},function(s){var l=s.coordinateSystem,u=updateCenterAndZoomInAction(l,r,s.get("scaleLimit"));s.setCenter(u.center),s.setZoom(u.zoom)})})}var WhiskerBoxCommonMixin=function(){function a(){}return a.prototype._hasEncodeRule=function(r){var n=this.getEncode();return n&&n.get(r)!=null},a.prototype.getInitialData=function(r,n){var o,s=n.getComponent("xAxis",this.get("xAxisIndex")),l=n.getComponent("yAxis",this.get("yAxisIndex")),u=s.get("type"),c=l.get("type"),f;u==="category"?(r.layout="horizontal",o=s.getOrdinalMeta(),f=!this._hasEncodeRule("x")):c==="category"?(r.layout="vertical",o=l.getOrdinalMeta(),f=!this._hasEncodeRule("y")):r.layout=r.layout||"horizontal";var d=["x","y"],v=r.layout==="horizontal"?0:1,g=this._baseAxisDim=d[v],y=d[1-v],_=[s,l],S=_[v].get("type"),b=_[1-v].get("type"),x=r.data;if(x&&f){var T=[];each$f(x,function(C,E){var P;isArray$1(C)?(P=C.slice(),C.unshift(E)):isArray$1(C.value)?(P=extend({},C),P.value=P.value.slice(),C.value.unshift(E)):P=C,T.push(P)}),r.data=T}var A=this.defaultValueDimensions,w=[{name:g,type:getDimensionTypeByAxis(S),ordinalMeta:o,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:y,type:getDimensionTypeByAxis(b),dimsDef:A.slice()}];return createSeriesDataSimply(this,{coordDimensions:w,dimensionsCount:A.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,w,this)})},a.prototype.getBaseAxis=function(){var r=this._baseAxisDim;return this.ecModel.getComponent(r+"Axis",this.get(r+"AxisIndex")).axis},a}(),BoxplotSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return r.type="series.boxplot",r.dependencies=["xAxis","yAxis","grid"],r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:tokens.color.neutral00,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:tokens.color.shadow}},animationDuration:800},r}(SeriesModel);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);var BoxplotView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s){var l=n.getData(),u=this.group,c=this._data;this._data||u.removeAll();var f=n.get("layout")==="horizontal"?1:0;l.diff(c).add(function(d){if(l.hasValue(d)){var v=l.getItemLayout(d),g=createNormalBox$1(v,l,d,f,!0);l.setItemGraphicEl(d,g),u.add(g)}}).update(function(d,v){var g=c.getItemGraphicEl(v);if(!l.hasValue(d)){u.remove(g);return}var y=l.getItemLayout(d);g?(saveOldStyle(g),updateNormalBoxData(y,g,l,d)):g=createNormalBox$1(y,l,d,f),u.add(g),l.setItemGraphicEl(d,g)}).remove(function(d){var v=c.getItemGraphicEl(d);v&&u.remove(v)}).execute(),this._data=l},r.prototype.remove=function(n){var o=this.group,s=this._data;this._data=null,s&&s.eachItemGraphicEl(function(l){l&&o.remove(l)})},r.type="boxplot",r}(ChartView),BoxPathShape=function(){function a(){}return a}(),BoxPath=function(a){__extends(r,a);function r(n){var o=a.call(this,n)||this;return o.type="boxplotBoxPath",o}return r.prototype.getDefaultShape=function(){return new BoxPathShape},r.prototype.buildPath=function(n,o){var s=o.points,l=0;for(n.moveTo(s[l][0],s[l][1]),l++;l<4;l++)n.lineTo(s[l][0],s[l][1]);for(n.closePath();l<s.length;l++)n.moveTo(s[l][0],s[l][1]),l++,n.lineTo(s[l][0],s[l][1])},r}(Path);function createNormalBox$1(a,r,n,o,s){var l=a.ends,u=new BoxPath({shape:{points:s?transInit$1(l,o,a):l}});return updateNormalBoxData(a,u,r,n,s),u}function updateNormalBoxData(a,r,n,o,s){var l=n.hostModel,u=graphic[s?"initProps":"updateProps"];u(r,{shape:{points:a.ends}},l,o),r.useStyle(n.getItemVisual(o,"style")),r.style.strokeNoScale=!0,r.z2=100;var c=n.getItemModel(o),f=c.getModel("emphasis");setStatesStylesFromModel(r,c),toggleHoverEmphasis(r,f.get("focus"),f.get("blurScope"),f.get("disabled"))}function transInit$1(a,r,n){return map$1(a,function(o){return o=o.slice(),o[r]=n.initBaseline,o})}var each$9=each$f;function boxplotLayout(a){var r=groupSeriesByAxis(a);each$9(r,function(n){var o=n.seriesModels;o.length&&(calculateBase(n),each$9(o,function(s,l){layoutSingleSeries(s,n.boxOffsetList[l],n.boxWidthList[l])}))})}function groupSeriesByAxis(a){var r=[],n=[];return a.eachSeriesByType("boxplot",function(o){var s=o.getBaseAxis(),l=indexOf(n,s);l<0&&(l=n.length,n[l]=s,r[l]={axis:s,seriesModels:[]}),r[l].seriesModels.push(o)}),r}function calculateBase(a){var r=a.axis,n=a.seriesModels,o=n.length,s=a.boxWidthList=[],l=a.boxOffsetList=[],u=[],c;if(r.type==="category")c=r.getBandWidth();else{var f=0;each$9(n,function(S){f=Math.max(f,S.getData().count())});var d=r.getExtent();c=Math.abs(d[1]-d[0])/f}each$9(n,function(S){var b=S.get("boxWidth");isArray$1(b)||(b=[b,b]),u.push([parsePercent(b[0],c)||0,parsePercent(b[1],c)||0])});var v=c*.8-2,g=v/o*.3,y=(v-g*(o-1))/o,_=y/2-v/2;each$9(n,function(S,b){l.push(_),_+=g+y,s.push(Math.min(Math.max(y,u[b][0]),u[b][1]))})}function layoutSingleSeries(a,r,n){var o=a.coordinateSystem,s=a.getData(),l=n/2,u=a.get("layout")==="horizontal"?0:1,c=1-u,f=["x","y"],d=s.mapDimension(f[u]),v=s.mapDimensionsAll(f[c]);if(d==null||v.length<5)return;for(var g=0;g<s.count();g++){var y=s.get(d,g),_=w(y,v[2],g),S=w(y,v[0],g),b=w(y,v[1],g),x=w(y,v[3],g),T=w(y,v[4],g),A=[];C(A,b,!1),C(A,x,!0),A.push(S,b,T,x),E(A,S),E(A,T),E(A,_),s.setItemLayout(g,{initBaseline:_[c],ends:A})}function w(P,I,M){var R=s.get(I,M),O=[];O[u]=P,O[c]=R;var $;return isNaN(P)||isNaN(R)?$=[NaN,NaN]:($=o.dataToPoint(O),$[u]+=r),$}function C(P,I,M){var R=I.slice(),O=I.slice();R[u]+=l,O[u]-=l,M?P.push(R,O):P.push(O,R)}function E(P,I){var M=I.slice(),R=I.slice();M[u]-=l,R[u]+=l,P.push(M,R)}}function prepareBoxplotData(a,r){r=r||{};for(var n=[],o=[],s=r.boundIQR,l=s==="none"||s===0,u=0;u<a.length;u++){var c=asc$2(a[u].slice()),f=quantile(c,.25),d=quantile(c,.5),v=quantile(c,.75),g=c[0],y=c[c.length-1],_=(s??1.5)*(v-f),S=l?g:Math.max(g,f-_),b=l?y:Math.min(y,v+_),x=r.itemNameFormatter,T=isFunction(x)?x({value:u}):isString(x)?x.replace("{value}",u+""):u+"";n.push([T,S,f,d,v,b]);for(var A=0;A<c.length;A++){var w=c[A];if(w<S||w>b){var C=[T,w];o.push(C)}}}return{boxData:n,outliers:o}}var boxplotTransform={type:"echarts:boxplot",transform:function(r){var n=r.upstream;if(n.sourceFormat!==SOURCE_FORMAT_ARRAY_ROWS){var o="";throwError(o)}var s=prepareBoxplotData(n.getRawData(),r.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:s.boxData},{data:s.outliers}]}};function install$B(a){a.registerSeriesModel(BoxplotSeriesModel),a.registerChartView(BoxplotView),a.registerLayout(boxplotLayout),a.registerTransform(boxplotTransform)}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"];function getColor(a,r){return r.get(a>0?positiveColorQuery:negativeColorQuery)}function getBorderColor(a,r){return r.get(a===0?dojiBorderColorQuery:a>0?positiveBorderColorQuery:negativeBorderColorQuery)}var candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(a,r){if(!r.isSeriesFiltered(a)){var n=a.pipelineContext.large;return!n&&{progress:function(o,s){for(var l;(l=o.next())!=null;){var u=s.getItemModel(l),c=s.getItemLayout(l).sign,f=u.getItemStyle();f.fill=getColor(c,u),f.stroke=getBorderColor(c,u)||f.fill;var d=s.ensureUniqueItemVisual(l,"style");extend(d,f)}}}}}},SKIP_PROPS=["color","borderColor"],CandlestickView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(n),this._isLargeDraw?this._renderLarge(n):this._renderNormal(n)},r.prototype.incrementalPrepareRender=function(n,o,s){this._clear(),this._updateDrawMode(n)},r.prototype.incrementalRender=function(n,o,s,l){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(n,o):this._incrementalRenderNormal(n,o)},r.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},r.prototype._updateDrawMode=function(n){var o=n.pipelineContext.large;(this._isLargeDraw==null||o!==this._isLargeDraw)&&(this._isLargeDraw=o,this._clear())},r.prototype._renderNormal=function(n){var o=n.getData(),s=this._data,l=this.group,u=o.getLayout("isSimpleBox"),c=n.get("clip",!0),f=n.coordinateSystem,d=f.getArea&&f.getArea();this._data||l.removeAll(),o.diff(s).add(function(v){if(o.hasValue(v)){var g=o.getItemLayout(v);if(c&&isNormalBoxClipped(d,g))return;var y=createNormalBox(g,v,!0);initProps(y,{shape:{points:g.ends}},n,v),setBoxCommon(y,o,v,u),l.add(y),o.setItemGraphicEl(v,y)}}).update(function(v,g){var y=s.getItemGraphicEl(g);if(!o.hasValue(v)){l.remove(y);return}var _=o.getItemLayout(v);if(c&&isNormalBoxClipped(d,_)){l.remove(y);return}y?(updateProps$1(y,{shape:{points:_.ends}},n,v),saveOldStyle(y)):y=createNormalBox(_),setBoxCommon(y,o,v,u),l.add(y),o.setItemGraphicEl(v,y)}).remove(function(v){var g=s.getItemGraphicEl(v);g&&l.remove(g)}).execute(),this._data=o},r.prototype._renderLarge=function(n){this._clear(),createLarge(n,this.group);var o=n.get("clip",!0)?createClipPath(n.coordinateSystem,!1,n):null;o?this.group.setClipPath(o):this.group.removeClipPath()},r.prototype._incrementalRenderNormal=function(n,o){for(var s=o.getData(),l=s.getLayout("isSimpleBox"),u;(u=n.next())!=null;){var c=s.getItemLayout(u),f=createNormalBox(c);setBoxCommon(f,s,u,l),f.incremental=!0,this.group.add(f),this._progressiveEls.push(f)}},r.prototype._incrementalRenderLarge=function(n,o){createLarge(o,this.group,this._progressiveEls,!0)},r.prototype.remove=function(n){this._clear()},r.prototype._clear=function(){this.group.removeAll(),this._data=null},r.type="candlestick",r}(ChartView),NormalBoxPathShape=function(){function a(){}return a}(),NormalBoxPath=function(a){__extends(r,a);function r(n){var o=a.call(this,n)||this;return o.type="normalCandlestickBox",o}return r.prototype.getDefaultShape=function(){return new NormalBoxPathShape},r.prototype.buildPath=function(n,o){var s=o.points;this.__simpleBox?(n.moveTo(s[4][0],s[4][1]),n.lineTo(s[6][0],s[6][1])):(n.moveTo(s[0][0],s[0][1]),n.lineTo(s[1][0],s[1][1]),n.lineTo(s[2][0],s[2][1]),n.lineTo(s[3][0],s[3][1]),n.closePath(),n.moveTo(s[4][0],s[4][1]),n.lineTo(s[5][0],s[5][1]),n.moveTo(s[6][0],s[6][1]),n.lineTo(s[7][0],s[7][1]))},r}(Path);function createNormalBox(a,r,n){var o=a.ends;return new NormalBoxPath({shape:{points:n?transInit(o,a):o},z2:100})}function isNormalBoxClipped(a,r){for(var n=!0,o=0;o<r.ends.length;o++)if(a.contain(r.ends[o][0],r.ends[o][1])){n=!1;break}return n}function setBoxCommon(a,r,n,o){var s=r.getItemModel(n);a.useStyle(r.getItemVisual(n,"style")),a.style.strokeNoScale=!0,a.__simpleBox=o,setStatesStylesFromModel(a,s);var l=r.getItemLayout(n).sign;each$f(a.states,function(c,f){var d=s.getModel(f),v=getColor(l,d),g=getBorderColor(l,d)||v,y=c.style||(c.style={});v&&(y.fill=v),g&&(y.stroke=g)});var u=s.getModel("emphasis");toggleHoverEmphasis(a,u.get("focus"),u.get("blurScope"),u.get("disabled"))}function transInit(a,r){return map$1(a,function(n){return n=n.slice(),n[1]=r.initBaseline,n})}var LargeBoxPathShape=function(){function a(){}return a}(),LargeBoxPath=function(a){__extends(r,a);function r(n){var o=a.call(this,n)||this;return o.type="largeCandlestickBox",o}return r.prototype.getDefaultShape=function(){return new LargeBoxPathShape},r.prototype.buildPath=function(n,o){for(var s=o.points,l=0;l<s.length;)if(this.__sign===s[l++]){var u=s[l++];n.moveTo(u,s[l++]),n.lineTo(u,s[l++])}else l+=3},r}(Path);function createLarge(a,r,n,o){var s=a.getData(),l=s.getLayout("largePoints"),u=new LargeBoxPath({shape:{points:l},__sign:1,ignoreCoarsePointer:!0});r.add(u);var c=new LargeBoxPath({shape:{points:l},__sign:-1,ignoreCoarsePointer:!0});r.add(c);var f=new LargeBoxPath({shape:{points:l},__sign:0,ignoreCoarsePointer:!0});r.add(f),setLargeStyle(1,u,a),setLargeStyle(-1,c,a),setLargeStyle(0,f,a),o&&(u.incremental=!0,c.incremental=!0),n&&n.push(u,c)}function setLargeStyle(a,r,n,o){var s=getBorderColor(a,n)||getColor(a,n),l=n.getModel("itemStyle").getItemStyle(SKIP_PROPS);r.useStyle(l),r.style.fill=null,r.style.stroke=s}var CandlestickSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return r.prototype.getShadowDim=function(){return"open"},r.prototype.brushSelector=function(n,o,s){var l=o.getItemLayout(n);return l&&s.rect(l.brushRect)},r.type="series.candlestick",r.dependencies=["xAxis","yAxis","grid"],r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},r}(SeriesModel);mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);function candlestickPreprocessor(a){!a||!isArray$1(a.series)||each$f(a.series,function(r){isObject$3(r)&&r.type==="k"&&(r.type="candlestick")})}var candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(a){var r=a.coordinateSystem,n=a.getData(),o=calculateCandleWidth(a,n),s=0,l=1,u=["x","y"],c=n.getDimensionIndex(n.mapDimension(u[s])),f=map$1(n.mapDimensionsAll(u[l]),n.getDimensionIndex,n),d=f[0],v=f[1],g=f[2],y=f[3];if(n.setLayout({candleWidth:o,isSimpleBox:o<=1.3}),c<0||f.length<4)return;return{progress:a.pipelineContext.large?S:_};function _(b,x){for(var T,A=x.getStore();(T=b.next())!=null;){var w=A.get(c,T),C=A.get(d,T),E=A.get(v,T),P=A.get(g,T),I=A.get(y,T),M=Math.min(C,E),R=Math.max(C,E),O=V(M,w),$=V(R,w),B=V(P,w),F=V(I,w),z=[];L(z,$,0),L(z,O,1),z.push(U(F),U($),U(B),U(O));var G=x.getItemModel(T),D=!!G.get(["itemStyle","borderColorDoji"]);x.setItemLayout(T,{sign:getSign(A,T,C,E,v,D),initBaseline:C>E?$[l]:O[l],ends:z,brushRect:N(P,I,w)})}function V(H,q){var Z=[];return Z[s]=q,Z[l]=H,isNaN(q)||isNaN(H)?[NaN,NaN]:r.dataToPoint(Z)}function L(H,q,Z){var ee=q.slice(),ne=q.slice();ee[s]=subPixelOptimize(ee[s]+o/2,1,!1),ne[s]=subPixelOptimize(ne[s]-o/2,1,!0),Z?H.push(ee,ne):H.push(ne,ee)}function N(H,q,Z){var ee=V(H,Z),ne=V(q,Z);return ee[s]-=o/2,ne[s]-=o/2,{x:ee[0],y:ee[1],width:o,height:ne[1]-ee[1]}}function U(H){return H[s]=subPixelOptimize(H[s],1),H}}function S(b,x){for(var T=createFloat32Array(b.count*4),A=0,w,C=[],E=[],P,I=x.getStore(),M=!!a.get(["itemStyle","borderColorDoji"]);(P=b.next())!=null;){var R=I.get(c,P),O=I.get(d,P),$=I.get(v,P),B=I.get(g,P),F=I.get(y,P);if(isNaN(R)||isNaN(B)||isNaN(F)){T[A++]=NaN,A+=3;continue}T[A++]=getSign(I,P,O,$,v,M),C[s]=R,C[l]=B,w=r.dataToPoint(C,null,E),T[A++]=w?w[0]:NaN,T[A++]=w?w[1]:NaN,C[l]=F,w=r.dataToPoint(C,null,E),T[A++]=w?w[1]:NaN}x.setLayout("largePoints",T)}}};function getSign(a,r,n,o,s,l){var u;return n>o?u=-1:n<o?u=1:u=l?0:r>0?a.get(s,r-1)<=o?1:-1:1,u}function calculateCandleWidth(a,r){var n=a.getBaseAxis(),o,s=n.type==="category"?n.getBandWidth():(o=n.getExtent(),Math.abs(o[1]-o[0])/r.count()),l=parsePercent(retrieve2(a.get("barMaxWidth"),s),s),u=parsePercent(retrieve2(a.get("barMinWidth"),1),s),c=a.get("barWidth");return c!=null?parsePercent(c,s):Math.max(Math.min(s/2,l),u)}function install$A(a){a.registerChartView(CandlestickView),a.registerSeriesModel(CandlestickSeriesModel),a.registerPreprocessor(candlestickPreprocessor),a.registerVisual(candlestickVisual),a.registerLayout(candlestickLayout)}function updateRipplePath(a,r){var n=r.rippleEffectColor||r.color;a.eachChild(function(o){o.attr({z:r.z,zlevel:r.zlevel,style:{stroke:r.brushType==="stroke"?n:null,fill:r.brushType==="fill"?n:null}})})}var EffectSymbol=function(a){__extends(r,a);function r(n,o){var s=a.call(this)||this,l=new Symbol$1(n,o),u=new Group$3;return s.add(l),s.add(u),s.updateData(n,o),s}return r.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},r.prototype.startEffectAnimation=function(n){for(var o=n.symbolType,s=n.color,l=n.rippleNumber,u=this.childAt(1),c=0;c<l;c++){var f=createSymbol$1(o,-1,-1,2,2,s);f.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var d=-c/l*n.period+n.effectOffset;f.animate("",!0).when(n.period,{scaleX:n.rippleScale/2,scaleY:n.rippleScale/2}).delay(d).start(),f.animateStyle(!0).when(n.period,{opacity:0}).delay(d).start(),u.add(f)}updateRipplePath(u,n)},r.prototype.updateEffectAnimation=function(n){for(var o=this._effectCfg,s=this.childAt(1),l=["symbolType","period","rippleScale","rippleNumber"],u=0;u<l.length;u++){var c=l[u];if(o[c]!==n[c]){this.stopEffectAnimation(),this.startEffectAnimation(n);return}}updateRipplePath(s,n)},r.prototype.highlight=function(){enterEmphasis(this)},r.prototype.downplay=function(){leaveEmphasis(this)},r.prototype.getSymbolType=function(){var n=this.childAt(0);return n&&n.getSymbolType()},r.prototype.updateData=function(n,o){var s=this,l=n.hostModel;this.childAt(0).updateData(n,o);var u=this.childAt(1),c=n.getItemModel(o),f=n.getItemVisual(o,"symbol"),d=normalizeSymbolSize(n.getItemVisual(o,"symbolSize")),v=n.getItemVisual(o,"style"),g=v&&v.fill,y=c.getModel("emphasis");u.setScale(d),u.traverse(function(x){x.setStyle("fill",g)});var _=normalizeSymbolOffset(n.getItemVisual(o,"symbolOffset"),d);_&&(u.x=_[0],u.y=_[1]);var S=n.getItemVisual(o,"symbolRotate");u.rotation=(S||0)*Math.PI/180||0;var b={};b.showEffectOn=l.get("showEffectOn"),b.rippleScale=c.get(["rippleEffect","scale"]),b.brushType=c.get(["rippleEffect","brushType"]),b.period=c.get(["rippleEffect","period"])*1e3,b.effectOffset=o/n.count(),b.z=l.getShallow("z")||0,b.zlevel=l.getShallow("zlevel")||0,b.symbolType=f,b.color=g,b.rippleEffectColor=c.get(["rippleEffect","color"]),b.rippleNumber=c.get(["rippleEffect","number"]),b.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(b):this.startEffectAnimation(b),this._effectCfg=b):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(x){x==="emphasis"?b.showEffectOn!=="render"&&s.startEffectAnimation(b):x==="normal"&&b.showEffectOn!=="render"&&s.stopEffectAnimation()}),this._effectCfg=b,toggleHoverEmphasis(this,y.get("focus"),y.get("blurScope"),y.get("disabled"))},r.prototype.fadeOut=function(n){n&&n()},r}(Group$3),EffectScatterView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.init=function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},r.prototype.render=function(n,o,s){var l=n.getData(),u=this._symbolDraw;u.updateData(l,{clipShape:this._getClipShape(n)}),this.group.add(u.group)},r.prototype._getClipShape=function(n){var o=n.coordinateSystem,s=o&&o.getArea&&o.getArea();return n.get("clip",!0)?s:null},r.prototype.updateTransform=function(n,o,s){var l=n.getData();this.group.dirty();var u=pointsLayout("").reset(n,o,s);u.progress&&u.progress({start:0,end:l.count(),count:l.count()},l),this._symbolDraw.updateLayout()},r.prototype._updateGroupTransform=function(n){var o=n.coordinateSystem;o&&o.getRoamTransform&&(this.group.transform=clone$2(o.getRoamTransform()),this.group.decomposeTransform())},r.prototype.remove=function(n,o){this._symbolDraw&&this._symbolDraw.remove(!0)},r.type="effectScatter",r}(ChartView),EffectScatterSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.hasSymbolVisual=!0,n}return r.prototype.getInitialData=function(n,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},r.prototype.brushSelector=function(n,o,s){return s.point(o.getItemLayout(n))},r.type="series.effectScatter",r.dependencies=["grid","polar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},r}(SeriesModel);function install$z(a){a.registerChartView(EffectScatterView),a.registerSeriesModel(EffectScatterSeriesModel),a.registerLayout(pointsLayout("effectScatter"))}var EffectLine=function(a){__extends(r,a);function r(n,o,s){var l=a.call(this)||this;return l.add(l.createLine(n,o,s)),l._updateEffectSymbol(n,o),l}return r.prototype.createLine=function(n,o,s){return new Line(n,o,s)},r.prototype._updateEffectSymbol=function(n,o){var s=n.getItemModel(o),l=s.getModel("effect"),u=l.get("symbolSize"),c=l.get("symbol");isArray$1(u)||(u=[u,u]);var f=n.getItemVisual(o,"style"),d=l.get("color")||f&&f.stroke,v=this.childAt(1);this._symbolType!==c&&(this.remove(v),v=createSymbol$1(c,-.5,-.5,1,1,d),v.z2=100,v.culling=!0,this.add(v)),v&&(v.setStyle("shadowColor",d),v.setStyle(l.getItemStyle(["color"])),v.scaleX=u[0],v.scaleY=u[1],v.setColor(d),this._symbolType=c,this._symbolScale=u,this._updateEffectAnimation(n,l,o))},r.prototype._updateEffectAnimation=function(n,o,s){var l=this.childAt(1);if(l){var u=n.getItemLayout(s),c=o.get("period")*1e3,f=o.get("loop"),d=o.get("roundTrip"),v=o.get("constantSpeed"),g=retrieve(o.get("delay"),function(_){return _/n.count()*c/3});if(l.ignore=!0,this._updateAnimationPoints(l,u),v>0&&(c=this._getLineLength(l)/v*1e3),c!==this._period||f!==this._loop||d!==this._roundTrip){l.stopAnimation();var y=void 0;isFunction(g)?y=g(s):y=g,l.__t>0&&(y=-c*l.__t),this._animateSymbol(l,c,y,f,d)}this._period=c,this._loop=f,this._roundTrip=d}},r.prototype._animateSymbol=function(n,o,s,l,u){if(o>0){n.__t=0;var c=this,f=n.animate("",l).when(u?o*2:o,{__t:u?2:1}).delay(s).during(function(){c._updateSymbolPosition(n)});l||f.done(function(){c.remove(n)}),f.start()}},r.prototype._getLineLength=function(n){return dist$1(n.__p1,n.__cp1)+dist$1(n.__cp1,n.__p2)},r.prototype._updateAnimationPoints=function(n,o){n.__p1=o[0],n.__p2=o[1],n.__cp1=o[2]||[(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]},r.prototype.updateData=function(n,o,s){this.childAt(0).updateData(n,o,s),this._updateEffectSymbol(n,o)},r.prototype._updateSymbolPosition=function(n){var o=n.__p1,s=n.__p2,l=n.__cp1,u=n.__t<1?n.__t:2-n.__t,c=[n.x,n.y],f=c.slice(),d=quadraticAt$1,v=quadraticDerivativeAt;c[0]=d(o[0],l[0],s[0],u),c[1]=d(o[1],l[1],s[1],u);var g=n.__t<1?v(o[0],l[0],s[0],u):v(s[0],l[0],o[0],1-u),y=n.__t<1?v(o[1],l[1],s[1],u):v(s[1],l[1],o[1],1-u);n.rotation=-Math.atan2(y,g)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(n.__lastT!==void 0&&n.__lastT<n.__t?(n.scaleY=dist$1(f,c)*1.05,u===1&&(c[0]=f[0]+(c[0]-f[0])/2,c[1]=f[1]+(c[1]-f[1])/2)):n.__lastT===1?n.scaleY=2*dist$1(o,c):n.scaleY=this._symbolScale[1]),n.__lastT=n.__t,n.ignore=!1,n.x=c[0],n.y=c[1]},r.prototype.updateLayout=function(n,o){this.childAt(0).updateLayout(n,o);var s=n.getItemModel(o).getModel("effect");this._updateEffectAnimation(n,s,o)},r}(Group$3),Polyline=function(a){__extends(r,a);function r(n,o,s){var l=a.call(this)||this;return l._createPolyline(n,o,s),l}return r.prototype._createPolyline=function(n,o,s){var l=n.getItemLayout(o),u=new Polyline$1({shape:{points:l}});this.add(u),this._updateCommonStl(n,o,s)},r.prototype.updateData=function(n,o,s){var l=n.hostModel,u=this.childAt(0),c={shape:{points:n.getItemLayout(o)}};updateProps$1(u,c,l,o),this._updateCommonStl(n,o,s)},r.prototype._updateCommonStl=function(n,o,s){var l=this.childAt(0),u=n.getItemModel(o),c=s&&s.emphasisLineStyle,f=s&&s.focus,d=s&&s.blurScope,v=s&&s.emphasisDisabled;if(!s||n.hasItemOption){var g=u.getModel("emphasis");c=g.getModel("lineStyle").getLineStyle(),v=g.get("disabled"),f=g.get("focus"),d=g.get("blurScope")}l.useStyle(n.getItemVisual(o,"style")),l.style.fill=null,l.style.strokeNoScale=!0;var y=l.ensureState("emphasis");y.style=c,toggleHoverEmphasis(this,f,d,v)},r.prototype.updateLayout=function(n,o){var s=this.childAt(0);s.setShape("points",n.getItemLayout(o))},r}(Group$3),EffectPolyline=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n._lastFrame=0,n._lastFramePercent=0,n}return r.prototype.createLine=function(n,o,s){return new Polyline(n,o,s)},r.prototype._updateAnimationPoints=function(n,o){this._points=o;for(var s=[0],l=0,u=1;u<o.length;u++){var c=o[u-1],f=o[u];l+=dist$1(c,f),s.push(l)}if(l===0){this._length=0;return}for(var u=0;u<s.length;u++)s[u]/=l;this._offsets=s,this._length=l},r.prototype._getLineLength=function(){return this._length},r.prototype._updateSymbolPosition=function(n){var o=n.__t<1?n.__t:2-n.__t,s=this._points,l=this._offsets,u=s.length;if(l){var c=this._lastFrame,f;if(o<this._lastFramePercent){var d=Math.min(c+1,u-1);for(f=d;f>=0&&!(l[f]<=o);f--);f=Math.min(f,u-2)}else{for(f=c;f<u&&!(l[f]>o);f++);f=Math.min(f-1,u-2)}var v=(o-l[f])/(l[f+1]-l[f]),g=s[f],y=s[f+1];n.x=g[0]*(1-v)+v*y[0],n.y=g[1]*(1-v)+v*y[1];var _=n.__t<1?y[0]-g[0]:g[0]-y[0],S=n.__t<1?y[1]-g[1]:g[1]-y[1];n.rotation=-Math.atan2(S,_)-Math.PI/2,this._lastFrame=f,this._lastFramePercent=o,n.ignore=!1}},r}(EffectLine),LargeLinesPathShape=function(){function a(){this.polyline=!1,this.curveness=0,this.segs=[]}return a}(),LargeLinesPath=function(a){__extends(r,a);function r(n){var o=a.call(this,n)||this;return o._off=0,o.hoverDataIdx=-1,o}return r.prototype.reset=function(){this.notClear=!1,this._off=0},r.prototype.getDefaultStyle=function(){return{stroke:tokens.color.neutral99,fill:null}},r.prototype.getDefaultShape=function(){return new LargeLinesPathShape},r.prototype.buildPath=function(n,o){var s=o.segs,l=o.curveness,u;if(o.polyline)for(u=this._off;u<s.length;){var c=s[u++];if(c>0){n.moveTo(s[u++],s[u++]);for(var f=1;f<c;f++)n.lineTo(s[u++],s[u++])}}else for(u=this._off;u<s.length;){var d=s[u++],v=s[u++],g=s[u++],y=s[u++];if(n.moveTo(d,v),l>0){var _=(d+g)/2-(v-y)*l,S=(v+y)/2-(g-d)*l;n.quadraticCurveTo(_,S,g,y)}else n.lineTo(g,y)}this.incremental&&(this._off=u,this.notClear=!0)},r.prototype.findDataIndex=function(n,o){var s=this.shape,l=s.segs,u=s.curveness,c=this.style.lineWidth;if(s.polyline)for(var f=0,d=0;d<l.length;){var v=l[d++];if(v>0)for(var g=l[d++],y=l[d++],_=1;_<v;_++){var S=l[d++],b=l[d++];if(containStroke$4(g,y,S,b,c,n,o))return f}f++}else for(var f=0,d=0;d<l.length;){var g=l[d++],y=l[d++],S=l[d++],b=l[d++];if(u>0){var x=(g+S)/2-(y-b)*u,T=(y+b)/2-(S-g)*u;if(containStroke$2(g,y,x,T,S,b,c,n,o))return f}else if(containStroke$4(g,y,S,b,c,n,o))return f;f++}return-1},r.prototype.contain=function(n,o){var s=this.transformCoordToLocal(n,o),l=this.getBoundingRect();if(n=s[0],o=s[1],l.contain(n,o)){var u=this.hoverDataIdx=this.findDataIndex(n,o);return u>=0}return this.hoverDataIdx=-1,!1},r.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var o=this.shape,s=o.segs,l=1/0,u=1/0,c=-1/0,f=-1/0,d=0;d<s.length;){var v=s[d++],g=s[d++];l=Math.min(v,l),c=Math.max(v,c),u=Math.min(g,u),f=Math.max(g,f)}n=this._rect=new BoundingRect(l,u,c,f)}return n},r}(Path),LargeLineDraw=function(){function a(){this.group=new Group$3}return a.prototype.updateData=function(r){this._clear();var n=this._create();n.setShape({segs:r.getLayout("linesPoints")}),this._setCommon(n,r)},a.prototype.incrementalPrepareUpdate=function(r){this.group.removeAll(),this._clear()},a.prototype.incrementalUpdate=function(r,n){var o=this._newAdded[0],s=n.getLayout("linesPoints"),l=o&&o.shape.segs;if(l&&l.length<2e4){var u=l.length,c=new Float32Array(u+s.length);c.set(l),c.set(s,u),o.setShape({segs:c})}else{this._newAdded=[];var f=this._create();f.incremental=!0,f.setShape({segs:s}),this._setCommon(f,n),f.__startIndex=r.start}},a.prototype.remove=function(){this._clear()},a.prototype.eachRendered=function(r){this._newAdded[0]&&r(this._newAdded[0])},a.prototype._create=function(){var r=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(r),this.group.add(r),r},a.prototype._setCommon=function(r,n,o){var s=n.hostModel;r.setShape({polyline:s.get("polyline"),curveness:s.get(["lineStyle","curveness"])}),r.useStyle(s.getModel("lineStyle").getLineStyle()),r.style.strokeNoScale=!0;var l=n.getVisual("style");l&&l.stroke&&r.setStyle("stroke",l.stroke),r.setStyle("fill",null);var u=getECData(r);u.seriesIndex=s.seriesIndex,r.on("mousemove",function(c){u.dataIndex=null;var f=r.hoverDataIdx;f>0&&(u.dataIndex=f+r.__startIndex)})},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}(),linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(a){var r=a.coordinateSystem;if(r){var n=a.get("polyline"),o=a.pipelineContext.large;return{progress:function(s,l){var u=[];if(o){var c=void 0,f=s.end-s.start;if(n){for(var d=0,v=s.start;v<s.end;v++)d+=a.getLineCoordsCount(v);c=new Float32Array(f+d*2)}else c=new Float32Array(f*4);for(var g=0,y=[],v=s.start;v<s.end;v++){var _=a.getLineCoords(v,u);n&&(c[g++]=_);for(var S=0;S<_;S++)y=r.dataToPoint(u[S],!1,y),c[g++]=y[0],c[g++]=y[1]}l.setLayout("linesPoints",c)}else for(var v=s.start;v<s.end;v++){var b=l.getItemModel(v),_=a.getLineCoords(v,u),x=[];if(n)for(var T=0;T<_;T++)x.push(r.dataToPoint(u[T]));else{x[0]=r.dataToPoint(u[0]),x[1]=r.dataToPoint(u[1]);var A=b.get(["lineStyle","curveness"]);+A&&(x[2]=[(x[0][0]+x[1][0])/2-(x[0][1]-x[1][1])*A,(x[0][1]+x[1][1])/2-(x[1][0]-x[0][0])*A])}l.setItemLayout(v,x)}}}}}},LinesView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s){var l=n.getData(),u=this._updateLineDraw(l,n),c=n.get("zlevel"),f=n.get(["effect","trailLength"]),d=s.getZr(),v=d.painter.getType()==="svg";v||d.painter.getLayer(c).clear(!0),this._lastZlevel!=null&&!v&&d.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(n)&&f>0&&(v||d.configLayer(c,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(f/10+.9,1),0)})),u.updateData(l);var g=n.get("clip",!0)&&createClipPath(n.coordinateSystem,!1,n);g?this.group.setClipPath(g):this.group.removeClipPath(),this._lastZlevel=c,this._finished=!0},r.prototype.incrementalPrepareRender=function(n,o,s){var l=n.getData(),u=this._updateLineDraw(l,n);u.incrementalPrepareUpdate(l),this._clearLayer(s),this._finished=!1},r.prototype.incrementalRender=function(n,o,s){this._lineDraw.incrementalUpdate(n,o.getData()),this._finished=n.end===o.getData().count()},r.prototype.eachRendered=function(n){this._lineDraw&&this._lineDraw.eachRendered(n)},r.prototype.updateTransform=function(n,o,s){var l=n.getData(),u=n.pipelineContext;if(!this._finished||u.large||u.progressiveRender)return{update:!0};var c=linesLayout.reset(n,o,s);c.progress&&c.progress({start:0,end:l.count(),count:l.count()},l),this._lineDraw.updateLayout(),this._clearLayer(s)},r.prototype._updateLineDraw=function(n,o){var s=this._lineDraw,l=this._showEffect(o),u=!!o.get("polyline"),c=o.pipelineContext,f=c.large;return(!s||l!==this._hasEffet||u!==this._isPolyline||f!==this._isLargeDraw)&&(s&&s.remove(),s=this._lineDraw=f?new LargeLineDraw:new LineDraw(u?l?EffectPolyline:Polyline:l?EffectLine:Line),this._hasEffet=l,this._isPolyline=u,this._isLargeDraw=f),this.group.add(s.group),s},r.prototype._showEffect=function(n){return!!n.get(["effect","show"])},r.prototype._clearLayer=function(n){var o=n.getZr(),s=o.painter.getType()==="svg";!s&&this._lastZlevel!=null&&o.painter.getLayer(this._lastZlevel).clear(!0)},r.prototype.remove=function(n,o){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(o)},r.prototype.dispose=function(n,o){this.remove(n,o)},r.type="lines",r}(ChartView),Uint32Arr=typeof Uint32Array>"u"?Array:Uint32Array,Float64Arr=typeof Float64Array>"u"?Array:Float64Array;function compatEc2(a){var r=a.data;r&&r[0]&&r[0][0]&&r[0][0].coord&&(a.data=map$1(r,function(n){var o=[n[0].coord,n[1].coord],s={coords:o};return n[0].name&&(s.fromName=n[0].name),n[1].name&&(s.toName=n[1].name),mergeAll([s,n[0],n[1]])}))}var LinesSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return r.prototype.init=function(n){n.data=n.data||[],compatEc2(n);var o=this._processFlatCoordsArray(n.data);this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset,o.flatCoords&&(n.data=new Float32Array(o.count)),a.prototype.init.apply(this,arguments)},r.prototype.mergeOption=function(n){if(compatEc2(n),n.data){var o=this._processFlatCoordsArray(n.data);this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset,o.flatCoords&&(n.data=new Float32Array(o.count))}a.prototype.mergeOption.apply(this,arguments)},r.prototype.appendData=function(n){var o=this._processFlatCoordsArray(n.data);o.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,o.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,o.flatCoordsOffset)):(this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset),n.data=new Float32Array(o.count)),this.getRawData().appendData(n.data)},r.prototype._getCoordsFromItemModel=function(n){var o=this.getData().getItemModel(n),s=o.option instanceof Array?o.option:o.getShallow("coords");return s},r.prototype.getLineCoordsCount=function(n){return this._flatCoordsOffset?this._flatCoordsOffset[n*2+1]:this._getCoordsFromItemModel(n).length},r.prototype.getLineCoords=function(n,o){if(this._flatCoordsOffset){for(var s=this._flatCoordsOffset[n*2],l=this._flatCoordsOffset[n*2+1],u=0;u<l;u++)o[u]=o[u]||[],o[u][0]=this._flatCoords[s+u*2],o[u][1]=this._flatCoords[s+u*2+1];return l}else{for(var c=this._getCoordsFromItemModel(n),u=0;u<c.length;u++)o[u]=o[u]||[],o[u][0]=c[u][0],o[u][1]=c[u][1];return c.length}},r.prototype._processFlatCoordsArray=function(n){var o=0;if(this._flatCoords&&(o=this._flatCoords.length),isNumber(n[0])){for(var s=n.length,l=new Uint32Arr(s),u=new Float64Arr(s),c=0,f=0,d=0,v=0;v<s;){d++;var g=n[v++];l[f++]=c+o,l[f++]=g;for(var y=0;y<g;y++){var _=n[v++],S=n[v++];u[c++]=_,u[c++]=S}}return{flatCoordsOffset:new Uint32Array(l.buffer,0,f),flatCoords:u,count:d}}return{flatCoordsOffset:null,flatCoords:null,count:n.length}},r.prototype.getInitialData=function(n,o){var s=new SeriesData(["value"],this);return s.hasItemOption=!1,s.initData(n.data,[],function(l,u,c,f){if(l instanceof Array)return NaN;s.hasItemOption=!0;var d=l.value;if(d!=null)return d instanceof Array?d[f]:d}),s},r.prototype.formatTooltip=function(n,o,s){var l=this.getData(),u=l.getItemModel(n),c=u.get("name");if(c)return c;var f=u.get("fromName"),d=u.get("toName"),v=[];return f!=null&&v.push(f),d!=null&&v.push(d),createTooltipMarkup("nameValue",{name:v.join(" > ")})},r.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},r.prototype.getProgressive=function(){var n=this.option.progressive;return n??(this.option.large?1e4:this.get("progressive"))},r.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n??(this.option.large?2e4:this.get("progressiveThreshold"))},r.prototype.getZLevelKey=function(){var n=this.getModel("effect"),o=n.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:n.get("show")&&o>0?o+"":""},r.type="series.lines",r.dependencies=["grid","polar","geo","calendar"],r.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},r}(SeriesModel);function normalize(a){return a instanceof Array||(a=[a,a]),a}var linesVisual={seriesType:"lines",reset:function(a){var r=normalize(a.get("symbol")),n=normalize(a.get("symbolSize")),o=a.getData();o.setVisual("fromSymbol",r&&r[0]),o.setVisual("toSymbol",r&&r[1]),o.setVisual("fromSymbolSize",n&&n[0]),o.setVisual("toSymbolSize",n&&n[1]);function s(l,u){var c=l.getItemModel(u),f=normalize(c.getShallow("symbol",!0)),d=normalize(c.getShallow("symbolSize",!0));f[0]&&l.setItemVisual(u,"fromSymbol",f[0]),f[1]&&l.setItemVisual(u,"toSymbol",f[1]),d[0]&&l.setItemVisual(u,"fromSymbolSize",d[0]),d[1]&&l.setItemVisual(u,"toSymbolSize",d[1])}return{dataEach:o.hasItemOption?s:null}}};function install$y(a){a.registerChartView(LinesView),a.registerSeriesModel(LinesSeriesModel),a.registerLayout(linesLayout),a.registerVisual(linesVisual)}var GRADIENT_LEVELS=256,HeatmapLayer=function(){function a(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var r=platformApi.createCanvas();this.canvas=r}return a.prototype.update=function(r,n,o,s,l,u){var c=this._getBrush(),f=this._getGradient(l,"inRange"),d=this._getGradient(l,"outOfRange"),v=this.pointSize+this.blurSize,g=this.canvas,y=g.getContext("2d"),_=r.length;g.width=n,g.height=o;for(var S=0;S<_;++S){var b=r[S],x=b[0],T=b[1],A=b[2],w=s(A);y.globalAlpha=w,y.drawImage(c,x-v,T-v)}if(!g.width||!g.height)return g;for(var C=y.getImageData(0,0,g.width,g.height),E=C.data,P=0,I=E.length,M=this.minOpacity,R=this.maxOpacity,O=R-M;P<I;){var w=E[P+3]/256,$=Math.floor(w*(GRADIENT_LEVELS-1))*4;if(w>0){var B=u(w)?f:d;w>0&&(w=w*O+M),E[P++]=B[$],E[P++]=B[$+1],E[P++]=B[$+2],E[P++]=B[$+3]*w*256}else P+=4}return y.putImageData(C,0,0),g},a.prototype._getBrush=function(){var r=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),n=this.pointSize+this.blurSize,o=n*2;r.width=o,r.height=o;var s=r.getContext("2d");return s.clearRect(0,0,o,o),s.shadowOffsetX=o,s.shadowBlur=this.blurSize,s.shadowColor=tokens.color.neutral99,s.beginPath(),s.arc(-n,n,this.pointSize,0,Math.PI*2,!0),s.closePath(),s.fill(),r},a.prototype._getGradient=function(r,n){for(var o=this._gradientPixels,s=o[n]||(o[n]=new Uint8ClampedArray(256*4)),l=[0,0,0,0],u=0,c=0;c<256;c++)r[n](c/255,!0,l),s[u++]=l[0],s[u++]=l[1],s[u++]=l[2],s[u++]=l[3];return s},a}();function getIsInPiecewiseRange(a,r,n){var o=a[1]-a[0];r=map$1(r,function(u){return{interval:[(u.interval[0]-a[0])/o,(u.interval[1]-a[0])/o]}});var s=r.length,l=0;return function(u){var c;for(c=l;c<s;c++){var f=r[c].interval;if(f[0]<=u&&u<=f[1]){l=c;break}}if(c===s)for(c=l-1;c>=0;c--){var f=r[c].interval;if(f[0]<=u&&u<=f[1]){l=c;break}}return c>=0&&c<s&&n[c]}}function getIsInContinuousRange(a,r){var n=a[1]-a[0];return r=[(r[0]-a[0])/n,(r[1]-a[0])/n],function(o){return o>=r[0]&&o<=r[1]}}function isGeoCoordSys(a){var r=a.dimensions;return r[0]==="lng"&&r[1]==="lat"}var HeatmapView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s){var l;o.eachComponent("visualMap",function(c){c.eachTargetSeries(function(f){f===n&&(l=c)})}),this._progressiveEls=null,this.group.removeAll();var u=n.coordinateSystem;u.type==="cartesian2d"||u.type==="calendar"||u.type==="matrix"?this._renderOnGridLike(n,s,0,n.getData().count()):isGeoCoordSys(u)&&this._renderOnGeo(u,n,l,s)},r.prototype.incrementalPrepareRender=function(n,o,s){this.group.removeAll()},r.prototype.incrementalRender=function(n,o,s,l){var u=o.coordinateSystem;u&&(isGeoCoordSys(u)?this.render(o,s,l):(this._progressiveEls=[],this._renderOnGridLike(o,l,n.start,n.end,!0)))},r.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},r.prototype._renderOnGridLike=function(n,o,s,l,u){var c=n.coordinateSystem,f=isCoordinateSystemType(c,"cartesian2d"),d=isCoordinateSystemType(c,"matrix"),v,g,y,_;if(f){var S=c.getAxis("x"),b=c.getAxis("y");v=S.getBandWidth()+.5,g=b.getBandWidth()+.5,y=S.scale.getExtent(),_=b.scale.getExtent()}for(var x=this.group,T=n.getData(),A=n.getModel(["emphasis","itemStyle"]).getItemStyle(),w=n.getModel(["blur","itemStyle"]).getItemStyle(),C=n.getModel(["select","itemStyle"]).getItemStyle(),E=n.get(["itemStyle","borderRadius"]),P=getLabelStatesModels(n),I=n.getModel("emphasis"),M=I.get("focus"),R=I.get("blurScope"),O=I.get("disabled"),$=f||d?[T.mapDimension("x"),T.mapDimension("y"),T.mapDimension("value")]:[T.mapDimension("time"),T.mapDimension("value")],B=s;B<l;B++){var F=void 0,z=T.getItemVisual(B,"style");if(f){var G=T.get($[0],B),D=T.get($[1],B);if(isNaN(T.get($[2],B))||isNaN(G)||isNaN(D)||G<y[0]||G>y[1]||D<_[0]||D>_[1])continue;var V=c.dataToPoint([G,D]);F=new Rect$2({shape:{x:V[0]-v/2,y:V[1]-g/2,width:v,height:g},style:z})}else if(d){var L=c.dataToLayout([T.get($[0],B),T.get($[1],B)]).rect;if(eqNaN(L.x))continue;F=new Rect$2({z2:1,shape:L,style:z})}else{if(isNaN(T.get($[1],B)))continue;var N=c.dataToLayout([T.get($[0],B)]),L=N.contentRect||N.rect;if(eqNaN(L.x)||eqNaN(L.y))continue;F=new Rect$2({z2:1,shape:L,style:z})}if(T.hasItemOption){var U=T.getItemModel(B),H=U.getModel("emphasis");A=H.getModel("itemStyle").getItemStyle(),w=U.getModel(["blur","itemStyle"]).getItemStyle(),C=U.getModel(["select","itemStyle"]).getItemStyle(),E=U.get(["itemStyle","borderRadius"]),M=H.get("focus"),R=H.get("blurScope"),O=H.get("disabled"),P=getLabelStatesModels(U)}F.shape.r=E;var q=n.getRawValue(B),Z="-";q&&q[2]!=null&&(Z=q[2]+""),setLabelStyle(F,P,{labelFetcher:n,labelDataIndex:B,defaultOpacity:z.opacity,defaultText:Z}),F.ensureState("emphasis").style=A,F.ensureState("blur").style=w,F.ensureState("select").style=C,toggleHoverEmphasis(F,M,R,O),F.incremental=u,u&&(F.states.emphasis.hoverLayer=!0),x.add(F),T.setItemGraphicEl(B,F),this._progressiveEls&&this._progressiveEls.push(F)}},r.prototype._renderOnGeo=function(n,o,s,l){var u=s.targetVisuals.inRange,c=s.targetVisuals.outOfRange,f=o.getData(),d=this._hmLayer||this._hmLayer||new HeatmapLayer;d.blurSize=o.get("blurSize"),d.pointSize=o.get("pointSize"),d.minOpacity=o.get("minOpacity"),d.maxOpacity=o.get("maxOpacity");var v=n.getViewRect().clone(),g=n.getRoamTransform();v.applyTransform(g);var y=Math.max(v.x,0),_=Math.max(v.y,0),S=Math.min(v.width+v.x,l.getWidth()),b=Math.min(v.height+v.y,l.getHeight()),x=S-y,T=b-_,A=[f.mapDimension("lng"),f.mapDimension("lat"),f.mapDimension("value")],w=f.mapArray(A,function(I,M,R){var O=n.dataToPoint([I,M]);return O[0]-=y,O[1]-=_,O.push(R),O}),C=s.getExtent(),E=s.type==="visualMap.continuous"?getIsInContinuousRange(C,s.option.range):getIsInPiecewiseRange(C,s.getPieceList(),s.option.selected);d.update(w,x,T,u.color.getNormalizer(),{inRange:u.color.getColorMapper(),outOfRange:c.color.getColorMapper()},E);var P=new ZRImage({style:{width:x,height:T,x:y,y:_,image:d.canvas},silent:!0});this.group.add(P)},r.type="heatmap",r}(ChartView),HeatmapSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.getInitialData=function(n,o){return createSeriesData(null,this,{generateCoord:"value"})},r.prototype.preventIncremental=function(){var n=CoordinateSystemManager.get(this.get("coordinateSystem"));if(n&&n.dimensions)return n.dimensions[0]==="lng"&&n.dimensions[1]==="lat"},r.type="series.heatmap",r.dependencies=["grid","geo","calendar","matrix"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:tokens.color.primary}}},r}(SeriesModel);function install$x(a){a.registerChartView(HeatmapView),a.registerSeriesModel(HeatmapSeriesModel)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle,PictorialBarView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s){var l=this.group,u=n.getData(),c=this._data,f=n.coordinateSystem,d=f.getBaseAxis(),v=d.isHorizontal(),g=f.master.getRect(),y={ecSize:{width:s.getWidth(),height:s.getHeight()},seriesModel:n,coordSys:f,coordSysExtent:[[g.x,g.x+g.width],[g.y,g.y+g.height]],isHorizontal:v,valueDim:LAYOUT_ATTRS[+v],categoryDim:LAYOUT_ATTRS[1-+v]};u.diff(c).add(function(S){if(u.hasValue(S)){var b=getItemModel(u,S),x=getSymbolMeta(u,S,b,y),T=createBar(u,y,x);u.setItemGraphicEl(S,T),l.add(T),updateCommon(T,y,x)}}).update(function(S,b){var x=c.getItemGraphicEl(b);if(!u.hasValue(S)){l.remove(x);return}var T=getItemModel(u,S),A=getSymbolMeta(u,S,T,y),w=getShapeStr(u,A);x&&w!==x.__pictorialShapeStr&&(l.remove(x),u.setItemGraphicEl(S,null),x=null),x?updateBar(x,y,A):x=createBar(u,y,A,!0),u.setItemGraphicEl(S,x),x.__pictorialSymbolMeta=A,l.add(x),updateCommon(x,y,A)}).remove(function(S){var b=c.getItemGraphicEl(S);b&&removeBar(c,S,b.__pictorialSymbolMeta.animationModel,b)}).execute();var _=n.get("clip",!0)?createClipPath(n.coordinateSystem,!1,n):null;return _?l.setClipPath(_):l.removeClipPath(),this._data=u,this.group},r.prototype.remove=function(n,o){var s=this.group,l=this._data;n.get("animation")?l&&l.eachItemGraphicEl(function(u){removeBar(l,getECData(u).dataIndex,n,u)}):s.removeAll()},r.type="pictorialBar",r}(ChartView);function getSymbolMeta(a,r,n,o){var s=a.getItemLayout(r),l=n.get("symbolRepeat"),u=n.get("symbolClip"),c=n.get("symbolPosition")||"start",f=n.get("symbolRotate"),d=(f||0)*Math.PI/180||0,v=n.get("symbolPatternSize")||2,g=n.isAnimationEnabled(),y={dataIndex:r,layout:s,itemModel:n,symbolType:a.getItemVisual(r,"symbol")||"circle",style:a.getItemVisual(r,"style"),symbolClip:u,symbolRepeat:l,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:v,rotation:d,animationModel:g?n:null,hoverScale:g&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};prepareBarLength(n,l,s,o,y),prepareSymbolSize(a,r,s,l,u,y.boundingLength,y.pxSign,v,o,y),prepareLineWidth(n,y.symbolScale,d,o,y);var _=y.symbolSize,S=normalizeSymbolOffset(n.get("symbolOffset"),_);return prepareLayoutInfo(n,_,s,l,u,S,c,y.valueLineWidth,y.boundingLength,y.repeatCutLength,o,y),y}function prepareBarLength(a,r,n,o,s){var l=o.valueDim,u=a.get("symbolBoundingData"),c=o.coordSys.getOtherAxis(o.coordSys.getBaseAxis()),f=c.toGlobalCoord(c.dataToCoord(0)),d=1-+(n[l.wh]<=0),v;if(isArray$1(u)){var g=[convertToCoordOnAxis(c,u[0])-f,convertToCoordOnAxis(c,u[1])-f];g[1]<g[0]&&g.reverse(),v=g[d]}else u!=null?v=convertToCoordOnAxis(c,u)-f:r?v=o.coordSysExtent[l.index][d]-f:v=n[l.wh];s.boundingLength=v,r&&(s.repeatCutLength=n[l.wh]);var y=l.xy==="x",_=c.inverse;s.pxSign=y&&!_||!y&&_?v>=0?1:-1:v>0?1:-1}function convertToCoordOnAxis(a,r){return a.toGlobalCoord(a.dataToCoord(a.scale.parse(r)))}function prepareSymbolSize(a,r,n,o,s,l,u,c,f,d){var v=f.valueDim,g=f.categoryDim,y=Math.abs(n[g.wh]),_=a.getItemVisual(r,"symbolSize"),S;isArray$1(_)?S=_.slice():_==null?S=["100%","100%"]:S=[_,_],S[g.index]=parsePercent(S[g.index],y),S[v.index]=parsePercent(S[v.index],o?y:Math.abs(l)),d.symbolSize=S;var b=d.symbolScale=[S[0]/c,S[1]/c];b[v.index]*=(f.isHorizontal?-1:1)*u}function prepareLineWidth(a,r,n,o,s){var l=a.get(BAR_BORDER_WIDTH_QUERY)||0;l&&(pathForLineWidth.attr({scaleX:r[0],scaleY:r[1],rotation:n}),pathForLineWidth.updateTransform(),l/=pathForLineWidth.getLineScale(),l*=r[o.valueDim.index]),s.valueLineWidth=l||0}function prepareLayoutInfo(a,r,n,o,s,l,u,c,f,d,v,g){var y=v.categoryDim,_=v.valueDim,S=g.pxSign,b=Math.max(r[_.index]+c,0),x=b;if(o){var T=Math.abs(f),A=retrieve(a.get("symbolMargin"),"15%")+"",w=!1;A.lastIndexOf("!")===A.length-1&&(w=!0,A=A.slice(0,A.length-1));var C=parsePercent(A,r[_.index]),E=Math.max(b+C*2,0),P=w?0:C*2,I=isNumeric(o),M=I?o:toIntTimes((T+P)/E),R=T-M*b;C=R/2/(w?M:Math.max(M-1,1)),E=b+C*2,P=w?0:C*2,!I&&o!=="fixed"&&(M=d?toIntTimes((Math.abs(d)+P)/E):0),x=M*E-P,g.repeatTimes=M,g.symbolMargin=C}var O=S*(x/2),$=g.pathPosition=[];$[y.index]=n[y.wh]/2,$[_.index]=u==="start"?O:u==="end"?f-O:f/2,l&&($[0]+=l[0],$[1]+=l[1]);var B=g.bundlePosition=[];B[y.index]=n[y.xy],B[_.index]=n[_.xy];var F=g.barRectShape=extend({},n);F[_.wh]=S*Math.max(Math.abs(n[_.wh]),Math.abs($[_.index]+O)),F[y.wh]=n[y.wh];var z=g.clipShape={};z[y.xy]=-n[y.xy],z[y.wh]=v.ecSize[y.wh],z[_.xy]=0,z[_.wh]=n[_.wh]}function createPath(a){var r=a.symbolPatternSize,n=createSymbol$1(a.symbolType,-r/2,-r/2,r,r);return n.attr({culling:!0}),n.type!=="image"&&n.setStyle({strokeNoScale:!0}),n}function createOrUpdateRepeatSymbols(a,r,n,o){var s=a.__pictorialBundle,l=n.symbolSize,u=n.valueLineWidth,c=n.pathPosition,f=r.valueDim,d=n.repeatTimes||0,v=0,g=l[r.valueDim.index]+u+n.symbolMargin*2;for(eachPath(a,function(b){b.__pictorialAnimationIndex=v,b.__pictorialRepeatTimes=d,v<d?updateAttr(b,null,S(v),n,o):updateAttr(b,null,{scaleX:0,scaleY:0},n,o,function(){s.remove(b)}),v++});v<d;v++){var y=createPath(n);y.__pictorialAnimationIndex=v,y.__pictorialRepeatTimes=d,s.add(y);var _=S(v);updateAttr(y,{x:_.x,y:_.y,scaleX:0,scaleY:0},{scaleX:_.scaleX,scaleY:_.scaleY,rotation:_.rotation},n,o)}function S(b){var x=c.slice(),T=n.pxSign,A=b;return(n.symbolRepeatDirection==="start"?T>0:T<0)&&(A=d-1-b),x[f.index]=g*(A-d/2+.5)+c[f.index],{x:x[0],y:x[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function createOrUpdateSingleSymbol(a,r,n,o){var s=a.__pictorialBundle,l=a.__pictorialMainPath;l?updateAttr(l,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,o):(l=a.__pictorialMainPath=createPath(n),s.add(l),updateAttr(l,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,o))}function createOrUpdateBarRect(a,r,n){var o=extend({},r.barRectShape),s=a.__pictorialBarRect;s?updateAttr(s,null,{shape:o},r,n):(s=a.__pictorialBarRect=new Rect$2({z2:2,shape:o,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),s.disableMorphing=!0,a.add(s))}function createOrUpdateClip(a,r,n,o){if(n.symbolClip){var s=a.__pictorialClipPath,l=extend({},n.clipShape),u=r.valueDim,c=n.animationModel,f=n.dataIndex;if(s)updateProps$1(s,{shape:l},c,f);else{l[u.wh]=0,s=new Rect$2({shape:l}),a.__pictorialBundle.setClipPath(s),a.__pictorialClipPath=s;var d={};d[u.wh]=n.clipShape[u.wh],graphic[o?"updateProps":"initProps"](s,{shape:d},c,f)}}}function getItemModel(a,r){var n=a.getItemModel(r);return n.getAnimationDelayParams=getAnimationDelayParams,n.isAnimationEnabled=isAnimationEnabled,n}function getAnimationDelayParams(a){return{index:a.__pictorialAnimationIndex,count:a.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(a,r,n,o){var s=new Group$3,l=new Group$3;return s.add(l),s.__pictorialBundle=l,l.x=n.bundlePosition[0],l.y=n.bundlePosition[1],n.symbolRepeat?createOrUpdateRepeatSymbols(s,r,n):createOrUpdateSingleSymbol(s,r,n),createOrUpdateBarRect(s,n,o),createOrUpdateClip(s,r,n,o),s.__pictorialShapeStr=getShapeStr(a,n),s.__pictorialSymbolMeta=n,s}function updateBar(a,r,n){var o=n.animationModel,s=n.dataIndex,l=a.__pictorialBundle;updateProps$1(l,{x:n.bundlePosition[0],y:n.bundlePosition[1]},o,s),n.symbolRepeat?createOrUpdateRepeatSymbols(a,r,n,!0):createOrUpdateSingleSymbol(a,r,n,!0),createOrUpdateBarRect(a,n,!0),createOrUpdateClip(a,r,n,!0)}function removeBar(a,r,n,o){var s=o.__pictorialBarRect;s&&s.removeTextContent();var l=[];eachPath(o,function(u){l.push(u)}),o.__pictorialMainPath&&l.push(o.__pictorialMainPath),o.__pictorialClipPath&&(n=null),each$f(l,function(u){removeElement(u,{scaleX:0,scaleY:0},n,r,function(){o.parent&&o.parent.remove(o)})}),a.setItemGraphicEl(r,null)}function getShapeStr(a,r){return[a.getItemVisual(r.dataIndex,"symbol")||"none",!!r.symbolRepeat,!!r.symbolClip].join(":")}function eachPath(a,r,n){each$f(a.__pictorialBundle.children(),function(o){o!==a.__pictorialBarRect&&r.call(n,o)})}function updateAttr(a,r,n,o,s,l){r&&a.attr(r),o.symbolClip&&!s?n&&a.attr(n):n&&graphic[s?"updateProps":"initProps"](a,n,o.animationModel,o.dataIndex,l)}function updateCommon(a,r,n){var o=n.dataIndex,s=n.itemModel,l=s.getModel("emphasis"),u=l.getModel("itemStyle").getItemStyle(),c=s.getModel(["blur","itemStyle"]).getItemStyle(),f=s.getModel(["select","itemStyle"]).getItemStyle(),d=s.getShallow("cursor"),v=l.get("focus"),g=l.get("blurScope"),y=l.get("scale");eachPath(a,function(b){if(b instanceof ZRImage){var x=b.style;b.useStyle(extend({image:x.image,x:x.x,y:x.y,width:x.width,height:x.height},n.style))}else b.useStyle(n.style);var T=b.ensureState("emphasis");T.style=u,y&&(T.scaleX=b.scaleX*1.1,T.scaleY=b.scaleY*1.1),b.ensureState("blur").style=c,b.ensureState("select").style=f,d&&(b.cursor=d),b.z2=n.z2});var _=r.valueDim.posDesc[+(n.boundingLength>0)],S=a.__pictorialBarRect;S.ignoreClip=!0,setLabelStyle(S,getLabelStatesModels(s),{labelFetcher:r.seriesModel,labelDataIndex:o,defaultText:getDefaultLabel(r.seriesModel.getData(),o),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:_}),toggleHoverEmphasis(a,v,g,l.get("disabled"))}function toIntTimes(a){var r=Math.round(a);return Math.abs(a-r)<1e-4?r:Math.ceil(a)}var PictorialBarSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}return r.prototype.getInitialData=function(n){return n.stack=null,a.prototype.getInitialData.apply(this,arguments)},r.type="series.pictorialBar",r.dependencies=["grid"],r.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:tokens.color.primary}}}),r}(BaseBarSeriesModel);function install$w(a){a.registerChartView(PictorialBarView),a.registerSeriesModel(PictorialBarSeriesModel),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,curry$1(layout$2,"pictorialBar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))}var ThemeRiverView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n._layers=[],n}return r.prototype.render=function(n,o,s){var l=n.getData(),u=this,c=this.group,f=n.getLayerSeries(),d=l.getLayout("layoutInfo"),v=d.rect,g=d.boundaryGap;c.x=0,c.y=v.y+g[0];function y(x){return x.name}var _=new DataDiffer(this._layersSeries||[],f,y,y),S=[];_.add(bind$1(b,this,"add")).update(bind$1(b,this,"update")).remove(bind$1(b,this,"remove")).execute();function b(x,T,A){var w=u._layers;if(x==="remove"){c.remove(w[T]);return}for(var C=[],E=[],P,I=f[T].indices,M=0;M<I.length;M++){var R=l.getItemLayout(I[M]),O=R.x,$=R.y0,B=R.y;C.push(O,$),E.push(O,$+B),P=l.getItemVisual(I[M],"style")}var F,z=l.getItemLayout(I[0]),G=n.getModel("label"),D=G.get("margin"),V=n.getModel("emphasis");if(x==="add"){var L=S[T]=new Group$3;F=new ECPolygon({shape:{points:C,stackedOnPoints:E,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),L.add(F),c.add(L),n.isAnimationEnabled()&&F.setClipPath(createGridClipShape(F.getBoundingRect(),n,function(){F.removeClipPath()}))}else{var L=w[A];F=L.childAt(0),c.add(L),S[T]=L,updateProps$1(F,{shape:{points:C,stackedOnPoints:E}},n),saveOldStyle(F)}setLabelStyle(F,getLabelStatesModels(n),{labelDataIndex:I[M-1],defaultText:l.getName(I[M-1]),inheritColor:P.fill},{normal:{verticalAlign:"middle"}}),F.setTextConfig({position:null,local:!0});var N=F.getTextContent();N&&(N.x=z.x-D,N.y=z.y0+z.y/2),F.useStyle(P),l.setItemGraphicEl(T,F),setStatesStylesFromModel(F,n),toggleHoverEmphasis(F,V.get("focus"),V.get("blurScope"),V.get("disabled"))}this._layersSeries=f,this._layers=S},r.type="themeRiver",r}(ChartView);function createGridClipShape(a,r,n){var o=new Rect$2({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return initProps(o,{shape:{x:a.x-50,width:a.width+100,height:a.height+20}},r,n),o}var DATA_NAME_INDEX=2,ThemeRiverSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.init=function(n){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},r.prototype.fixData=function(n){var o=n.length,s={},l=groupData(n,function(y){return s.hasOwnProperty(y[0]+"")||(s[y[0]+""]=-1),y[2]}),u=[];l.buckets.each(function(y,_){u.push({name:_,dataList:y})});for(var c=u.length,f=0;f<c;++f){for(var d=u[f].name,v=0;v<u[f].dataList.length;++v){var g=u[f].dataList[v][0]+"";s[g]=f}for(var g in s)s.hasOwnProperty(g)&&s[g]!==f&&(s[g]=f,n[o]=[g,0,d],o++)}return n},r.prototype.getInitialData=function(n,o){for(var s=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0],l=s.get("type"),u=filter(n.data,function(S){return S[2]!==void 0}),c=this.fixData(u||[]),f=[],d=this.nameMap=createHashMap(),v=0,g=0;g<c.length;++g)f.push(c[g][DATA_NAME_INDEX]),d.get(c[g][DATA_NAME_INDEX])||(d.set(c[g][DATA_NAME_INDEX],v),v++);var y=prepareSeriesDataSchema(c,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(l)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,_=new SeriesData(y,this);return _.initData(c),_},r.prototype.getLayerSeries=function(){for(var n=this.getData(),o=n.count(),s=[],l=0;l<o;++l)s[l]=l;var u=n.mapDimension("single"),c=groupData(s,function(d){return n.get("name",d)}),f=[];return c.buckets.each(function(d,v){d.sort(function(g,y){return n.get(u,g)-n.get(u,y)}),f.push({name:v,indices:d})}),f},r.prototype.getAxisTooltipData=function(n,o,s){isArray$1(n)||(n=n?[n]:[]);for(var l=this.getData(),u=this.getLayerSeries(),c=[],f=u.length,d,v=0;v<f;++v){for(var g=Number.MAX_VALUE,y=-1,_=u[v].indices.length,S=0;S<_;++S){var b=l.get(n[0],u[v].indices[S]),x=Math.abs(b-o);x<=g&&(d=b,g=x,y=u[v].indices[S])}c.push(y)}return{dataIndices:c,nestestValue:d}},r.prototype.formatTooltip=function(n,o,s){var l=this.getData(),u=l.getName(n),c=l.get(l.mapDimension("value"),n);return createTooltipMarkup("nameValue",{name:u,value:c})},r.type="series.themeRiver",r.dependencies=["singleAxis"],r.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},r}(SeriesModel);function themeRiverLayout(a,r){a.eachSeriesByType("themeRiver",function(n){var o=n.getData(),s=n.coordinateSystem,l={},u=s.getRect();l.rect=u;var c=n.get("boundaryGap"),f=s.getAxis();if(l.boundaryGap=c,f.orient==="horizontal"){c[0]=parsePercent(c[0],u.height),c[1]=parsePercent(c[1],u.height);var d=u.height-c[0]-c[1];doThemeRiverLayout(o,n,d)}else{c[0]=parsePercent(c[0],u.width),c[1]=parsePercent(c[1],u.width);var v=u.width-c[0]-c[1];doThemeRiverLayout(o,n,v)}o.setLayout("layoutInfo",l)})}function doThemeRiverLayout(a,r,n){if(a.count())for(var o=r.coordinateSystem,s=r.getLayerSeries(),l=a.mapDimension("single"),u=a.mapDimension("value"),c=map$1(s,function(x){return map$1(x.indices,function(T){var A=o.dataToPoint(a.get(l,T));return A[1]=a.get(u,T),A})}),f=computeBaseline(c),d=f.y0,v=n/f.max,g=s.length,y=s[0].indices.length,_,S=0;S<y;++S){_=d[S]*v,a.setItemLayout(s[0].indices[S],{layerIndex:0,x:c[0][S][0],y0:_,y:c[0][S][1]*v});for(var b=1;b<g;++b)_+=c[b-1][S][1]*v,a.setItemLayout(s[b].indices[S],{layerIndex:b,x:c[b][S][0],y0:_,y:c[b][S][1]*v})}}function computeBaseline(a){for(var r=a.length,n=a[0].length,o=[],s=[],l=0,u=0;u<n;++u){for(var c=0,f=0;f<r;++f)c+=a[f][u][1];c>l&&(l=c),o.push(c)}for(var d=0;d<n;++d)s[d]=(l-o[d])/2;l=0;for(var v=0;v<n;++v){var g=o[v]+s[v];g>l&&(l=g)}return{y0:s,max:l}}function install$v(a){a.registerChartView(ThemeRiverView),a.registerSeriesModel(ThemeRiverSeriesModel),a.registerLayout(themeRiverLayout),a.registerProcessor(dataFilter$1("themeRiver"))}var DEFAULT_SECTOR_Z=2,DEFAULT_TEXT_Z=4,SunburstPiece=function(a){__extends(r,a);function r(n,o,s,l){var u=a.call(this)||this;u.z2=DEFAULT_SECTOR_Z,u.textConfig={inside:!0},getECData(u).seriesIndex=o.seriesIndex;var c=new ZRText({z2:DEFAULT_TEXT_Z,silent:n.getModel().get(["label","silent"])});return u.setTextContent(c),u.updateData(!0,n,o,s,l),u}return r.prototype.updateData=function(n,o,s,l,u){this.node=o,o.piece=this,s=s||this._seriesModel,l=l||this._ecModel;var c=this;getECData(c).dataIndex=o.dataIndex;var f=o.getModel(),d=f.getModel("emphasis"),v=o.getLayout(),g=extend({},v);g.label=null;var y=o.getVisual("style");y.lineJoin="bevel";var _=o.getVisual("decal");_&&(y.decal=createOrUpdatePatternFromDecal(_,u));var S=getSectorCornerRadius(f.getModel("itemStyle"),g,!0);extend(g,S),each$f(SPECIAL_STATES,function(A){var w=c.ensureState(A),C=f.getModel([A,"itemStyle"]);w.style=C.getItemStyle();var E=getSectorCornerRadius(C,g);E&&(w.shape=E)}),n?(c.setShape(g),c.shape.r=v.r0,initProps(c,{shape:{r:v.r}},s,o.dataIndex)):(updateProps$1(c,{shape:g},s),saveOldStyle(c)),c.useStyle(y),this._updateLabel(s);var b=f.getShallow("cursor");b&&c.attr("cursor",b),this._seriesModel=s||this._seriesModel,this._ecModel=l||this._ecModel;var x=d.get("focus"),T=x==="relative"?concatArray(o.getAncestorsIndices(),o.getDescendantIndices()):x==="ancestor"?o.getAncestorsIndices():x==="descendant"?o.getDescendantIndices():x;toggleHoverEmphasis(this,T,d.get("blurScope"),d.get("disabled"))},r.prototype._updateLabel=function(n){var o=this,s=this.node.getModel(),l=s.getModel("label"),u=this.node.getLayout(),c=u.endAngle-u.startAngle,f=(u.startAngle+u.endAngle)/2,d=Math.cos(f),v=Math.sin(f),g=this,y=g.getTextContent(),_=this.node.dataIndex,S=l.get("minAngle")/180*Math.PI,b=l.get("show")&&!(S!=null&&Math.abs(c)<S);y.ignore=!b,each$f(DISPLAY_STATES,function(T){var A=T==="normal"?s.getModel("label"):s.getModel([T,"label"]),w=T==="normal",C=w?y:y.ensureState(T),E=n.getFormattedLabel(_,T);w&&(E=E||o.node.name),C.style=createTextStyle(A,{},null,T!=="normal",!0),E&&(C.style.text=E);var P=A.get("show");P!=null&&!w&&(C.ignore=!P);var I=x(A,"position"),M=w?g:g.states[T],R=M.style.fill;M.textConfig={outsideFill:A.get("color")==="inherit"?R:null,inside:I!=="outside"};var O,$=x(A,"distance")||0,B=x(A,"align"),F=x(A,"rotate"),z=Math.PI*.5,G=Math.PI*1.5,D=normalizeRadian(F==="tangential"?Math.PI/2-f:f),V=D>z&&!isRadianAroundZero(D-z)&&D<G;I==="outside"?(O=u.r+$,B=V?"right":"left"):!B||B==="center"?(c===2*Math.PI&&u.r0===0?O=0:O=(u.r+u.r0)/2,B="center"):B==="left"?(O=u.r0+$,B=V?"right":"left"):B==="right"&&(O=u.r-$,B=V?"left":"right"),C.style.align=B,C.style.verticalAlign=x(A,"verticalAlign")||"middle",C.x=O*d+u.cx,C.y=O*v+u.cy;var L=0;F==="radial"?L=normalizeRadian(-f)+(V?Math.PI:0):F==="tangential"?L=normalizeRadian(Math.PI/2-f)+(V?Math.PI:0):isNumber(F)&&(L=F*Math.PI/180),C.rotation=normalizeRadian(L)});function x(T,A){var w=T.get(A);return w??l.get(A)}y.dirtyStyle()},r}(Sector),ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";function installSunburstAction(a){a.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},function(r,n){n.eachComponent({mainType:"series",subType:"sunburst",query:r},o);function o(s,l){var u=retrieveTargetInfo(r,[ROOT_TO_NODE_ACTION],s);if(u){var c=s.getViewRoot();c&&(r.direction=aboveViewRoot(c,u.node)?"rollUp":"drillDown"),s.resetViewRoot(u.node)}}}),a.registerAction({type:HIGHLIGHT_ACTION,update:"none"},function(r,n,o){r=extend({},r),n.eachComponent({mainType:"series",subType:"sunburst",query:r},s);function s(l){var u=retrieveTargetInfo(r,[HIGHLIGHT_ACTION],l);u&&(r.dataIndex=u.node.dataIndex)}o.dispatchAction(extend(r,{type:"highlight"}))}),a.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(r,n,o){r=extend({},r),o.dispatchAction(extend(r,{type:"downplay"}))})}var SunburstView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s,l){var u=this;this.seriesModel=n,this.api=s,this.ecModel=o;var c=n.getData(),f=c.tree.root,d=n.getViewRoot(),v=this.group,g=n.get("renderLabelForZeroData"),y=[];d.eachNode(function(A){y.push(A)});var _=this._oldChildren||[];S(y,_),T(f,d),this._initEvents(),this._oldChildren=y;function S(A,w){if(A.length===0&&w.length===0)return;new DataDiffer(w,A,C,C).add(E).update(E).remove(curry$1(E,null)).execute();function C(P){return P.getId()}function E(P,I){var M=P==null?null:A[P],R=I==null?null:w[I];b(M,R)}}function b(A,w){if(!g&&A&&!A.getValue()&&(A=null),A!==f&&w!==f){if(w&&w.piece)A?(w.piece.updateData(!1,A,n,o,s),c.setItemGraphicEl(A.dataIndex,w.piece)):x(w);else if(A){var C=new SunburstPiece(A,n,o,s);v.add(C),c.setItemGraphicEl(A.dataIndex,C)}}}function x(A){A&&A.piece&&(v.remove(A.piece),A.piece=null)}function T(A,w){w.depth>0?(u.virtualPiece?u.virtualPiece.updateData(!1,A,n,o,s):(u.virtualPiece=new SunburstPiece(A,n,o,s),v.add(u.virtualPiece)),w.piece.off("click"),u.virtualPiece.on("click",function(C){u._rootToNode(w.parentNode)})):u.virtualPiece&&(v.remove(u.virtualPiece),u.virtualPiece=null)}},r.prototype._initEvents=function(){var n=this;this.group.off("click"),this.group.on("click",function(o){var s=!1,l=n.seriesModel.getViewRoot();l.eachNode(function(u){if(!s&&u.piece&&u.piece===o.target){var c=u.getModel().get("nodeClick");if(c==="rootToNode")n._rootToNode(u);else if(c==="link"){var f=u.getModel(),d=f.get("link");if(d){var v=f.get("target",!0)||"_blank";windowOpen(d,v)}}s=!0}})})},r.prototype._rootToNode=function(n){n!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:n})},r.prototype.containPoint=function(n,o){var s=o.getData(),l=s.getItemLayout(0);if(l){var u=n[0]-l.cx,c=n[1]-l.cy,f=Math.sqrt(u*u+c*c);return f<=l.r&&f>=l.r0}},r.type="sunburst",r}(ChartView),SunburstSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.ignoreStyleOnData=!0,n}return r.prototype.getInitialData=function(n,o){var s={name:n.name,children:n.data};completeTreeValue(s);var l=this._levelModels=map$1(n.levels||[],function(f){return new Model(f,this,o)},this),u=Tree.createTree(s,this,c);function c(f){f.wrapMethod("getItemModel",function(d,v){var g=u.getNodeByDataIndex(v),y=l[g.depth];return y&&(d.parentModel=y),d})}return u.data},r.prototype.optionUpdated=function(){this.resetViewRoot()},r.prototype.getDataParams=function(n){var o=a.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(n);return o.treePathInfo=wrapTreePathInfo(s,this),o},r.prototype.getLevelModel=function(n){return this._levelModels&&this._levelModels[n.depth]},r.prototype.getViewRoot=function(){return this._viewRoot},r.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var o=this.getRawData().tree.root;(!n||n!==o&&!o.contains(n))&&(this._viewRoot=o)},r.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},r.type="series.sunburst",r.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},r}(SeriesModel);function completeTreeValue(a){var r=0;each$f(a.children,function(o){completeTreeValue(o);var s=o.value;isArray$1(s)&&(s=s[0]),r+=s});var n=a.value;isArray$1(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=r),n<0&&(n=0),isArray$1(a.value)?a.value[0]=n:a.value=n}var RADIAN=Math.PI/180;function sunburstLayout(a,r,n){r.eachSeriesByType(a,function(o){var s=o.get("center"),l=o.get("radius");isArray$1(l)||(l=[0,l]),isArray$1(s)||(s=[s,s]);var u=n.getWidth(),c=n.getHeight(),f=Math.min(u,c),d=parsePercent(s[0],u),v=parsePercent(s[1],c),g=parsePercent(l[0],f/2),y=parsePercent(l[1],f/2),_=-o.get("startAngle")*RADIAN,S=o.get("minAngle")*RADIAN,b=o.getData().tree.root,x=o.getViewRoot(),T=x.depth,A=o.get("sort");A!=null&&initChildren(x,A);var w=0;each$f(x.children,function(D){!isNaN(D.getValue())&&w++});var C=x.getValue(),E=Math.PI/(C||w)*2,P=x.depth>0,I=x.height-(P?-1:1),M=(y-g)/(I||1),R=o.get("clockwise"),O=o.get("stillShowZeroSum"),$=R?1:-1,B=function(D,V){if(D){var L=V;if(D!==b){var N=D.getValue(),U=C===0&&O?E:N*E;U<S&&(U=S),L=V+$*U;var H=D.depth-T-(P?-1:1),q=g+M*H,Z=g+M*(H+1),ee=o.getLevelModel(D);if(ee){var ne=ee.get("r0",!0),ue=ee.get("r",!0),K=ee.get("radius",!0);K!=null&&(ne=K[0],ue=K[1]),ne!=null&&(q=parsePercent(ne,f/2)),ue!=null&&(Z=parsePercent(ue,f/2))}D.setLayout({angle:U,startAngle:V,endAngle:L,clockwise:R,cx:d,cy:v,r0:q,r:Z})}if(D.children&&D.children.length){var J=0;each$f(D.children,function(X){J+=B(X,V+J)})}return L-V}};if(P){var F=g,z=g+M,G=Math.PI*2;b.setLayout({angle:G,startAngle:_,endAngle:_+G,clockwise:R,cx:d,cy:v,r0:F,r:z})}B(x,_)})}function initChildren(a,r){var n=a.children||[];a.children=sort(n,r),n.length&&each$f(a.children,function(o){initChildren(o,r)})}function sort(a,r){if(isFunction(r)){var n=map$1(a,function(s,l){var u=s.getValue();return{params:{depth:s.depth,height:s.height,dataIndex:s.dataIndex,getValue:function(){return u}},index:l}});return n.sort(function(s,l){return r(s.params,l.params)}),map$1(n,function(s){return a[s.index]})}else{var o=r==="asc";return a.sort(function(s,l){var u=(s.getValue()-l.getValue())*(o?1:-1);return u===0?(s.dataIndex-l.dataIndex)*(o?-1:1):u})}}function sunburstVisual(a){var r={};function n(o,s,l){if(o.depth===0)return tokens.color.neutral50;for(var u=o;u&&u.depth>1;)u=u.parentNode;var c=s.getColorFromPalette(u.name||u.dataIndex+"",r);return o.depth>1&&isString(c)&&(c=lift(c,(o.depth-1)/(l-1)*.5)),c}a.eachSeriesByType("sunburst",function(o){var s=o.getData(),l=s.tree;l.eachNode(function(u){var c=u.getModel(),f=c.getModel("itemStyle").getItemStyle();f.fill||(f.fill=n(u,o,l.root.height));var d=s.ensureUniqueItemVisual(u.dataIndex,"style");extend(d,f)})})}function install$u(a){a.registerChartView(SunburstView),a.registerSeriesModel(SunburstSeriesModel),a.registerLayout(curry$1(sunburstLayout,"sunburst")),a.registerProcessor(curry$1(dataFilter$1,"sunburst")),a.registerVisual(sunburstVisual),installSunburstAction(a)}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},r.prototype.getInitialData=function(n,o){return createSeriesData(null,this)},r.prototype.getDataParams=function(n,o,s){var l=a.prototype.getDataParams.call(this,n,o);return s&&(l.info=customInnerStore(s).info),l},r.type="series.custom",r.dependencies=["grid","polar","geo","singleAxis","calendar","matrix"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},r}(SeriesModel);function dataToCoordSize$3(a,r){return r=r||[0,0],map$1(["x","y"],function(n,o){var s=this.getAxis(n),l=r[o],u=a[o]/2;return s.type==="category"?s.getBandWidth():Math.abs(s.dataToCoord(l-u)-s.dataToCoord(l+u))},this)}function cartesianPrepareCustom(a){var r=a.master.getRect();return{coordSys:{type:"cartesian2d",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(n){return a.dataToPoint(n)},size:bind$1(dataToCoordSize$3,a)}}}function dataToCoordSize$2(a,r){return r=r||[0,0],map$1([0,1],function(n){var o=r[n],s=a[n]/2,l=[],u=[];return l[n]=o-s,u[n]=o+s,l[1-n]=u[1-n]=r[1-n],Math.abs(this.dataToPoint(l)[n]-this.dataToPoint(u)[n])},this)}function geoPrepareCustom(a){var r=a.getBoundingRect();return{coordSys:{type:"geo",x:r.x,y:r.y,width:r.width,height:r.height,zoom:a.getZoom()},api:{coord:function(n){return a.dataToPoint(n)},size:bind$1(dataToCoordSize$2,a)}}}function dataToCoordSize$1(a,r){var n=this.getAxis(),o=r instanceof Array?r[0]:r,s=(a instanceof Array?a[0]:a)/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(o-s)-n.dataToCoord(o+s))}function singlePrepareCustom(a){var r=a.getRect();return{coordSys:{type:"singleAxis",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(n){return a.dataToPoint(n)},size:bind$1(dataToCoordSize$1,a)}}}function dataToCoordSize(a,r){return r=r||[0,0],map$1(["Radius","Angle"],function(n,o){var s="get"+n+"Axis",l=this[s](),u=r[o],c=a[o]/2,f=l.type==="category"?l.getBandWidth():Math.abs(l.dataToCoord(u-c)-l.dataToCoord(u+c));return n==="Angle"&&(f=f*Math.PI/180),f},this)}function polarPrepareCustom(a){var r=a.getRadiusAxis(),n=a.getAngleAxis(),o=r.getExtent();return o[0]>o[1]&&o.reverse(),{coordSys:{type:"polar",cx:a.cx,cy:a.cy,r:o[1],r0:o[0]},api:{coord:function(s){var l=r.dataToRadius(s[0]),u=n.dataToAngle(s[1]),c=a.coordToPoint([l,u]);return c.push(l,u*Math.PI/180),c},size:bind$1(dataToCoordSize,a)}}}function calendarPrepareCustom(a){var r=a.getRect(),n=a.getRangeInfo();return{coordSys:{type:"calendar",x:r.x,y:r.y,width:r.width,height:r.height,cellWidth:a.getCellWidth(),cellHeight:a.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(o,s){return a.dataToPoint(o,s)},layout:function(o,s){return a.dataToLayout(o,s)}}}}function matrixPrepareCustom(a){var r=a.getRect();return{coordSys:{type:"matrix",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(n,o){return a.dataToPoint(n,o)},layout:function(n,o){return a.dataToLayout(n,o)}}}}function isEC4CompatibleStyle(a,r,n,o){return a&&(a.legacy||a.legacy!==!1&&!n&&!o&&r!=="tspan"&&(r==="text"||hasOwn(a,"text")))}function convertFromEC4CompatibleStyle(a,r,n){var o=a,s,l,u;if(r==="text")u=o;else{u={},hasOwn(o,"text")&&(u.text=o.text),hasOwn(o,"rich")&&(u.rich=o.rich),hasOwn(o,"textFill")&&(u.fill=o.textFill),hasOwn(o,"textStroke")&&(u.stroke=o.textStroke),hasOwn(o,"fontFamily")&&(u.fontFamily=o.fontFamily),hasOwn(o,"fontSize")&&(u.fontSize=o.fontSize),hasOwn(o,"fontStyle")&&(u.fontStyle=o.fontStyle),hasOwn(o,"fontWeight")&&(u.fontWeight=o.fontWeight),l={type:"text",style:u,silent:!0},s={};var c=hasOwn(o,"textPosition");n?s.position=c?o.textPosition:"inside":c&&(s.position=o.textPosition),hasOwn(o,"textPosition")&&(s.position=o.textPosition),hasOwn(o,"textOffset")&&(s.offset=o.textOffset),hasOwn(o,"textRotation")&&(s.rotation=o.textRotation),hasOwn(o,"textDistance")&&(s.distance=o.textDistance)}return convertEC4CompatibleRichItem(u,a),each$f(u.rich,function(f){convertEC4CompatibleRichItem(f,f)}),{textConfig:s,textContent:l}}function convertEC4CompatibleRichItem(a,r){r&&(r.font=r.textFont||r.font,hasOwn(r,"textStrokeWidth")&&(a.lineWidth=r.textStrokeWidth),hasOwn(r,"textAlign")&&(a.align=r.textAlign),hasOwn(r,"textVerticalAlign")&&(a.verticalAlign=r.textVerticalAlign),hasOwn(r,"textLineHeight")&&(a.lineHeight=r.textLineHeight),hasOwn(r,"textWidth")&&(a.width=r.textWidth),hasOwn(r,"textHeight")&&(a.height=r.textHeight),hasOwn(r,"textBackgroundColor")&&(a.backgroundColor=r.textBackgroundColor),hasOwn(r,"textPadding")&&(a.padding=r.textPadding),hasOwn(r,"textBorderColor")&&(a.borderColor=r.textBorderColor),hasOwn(r,"textBorderWidth")&&(a.borderWidth=r.textBorderWidth),hasOwn(r,"textBorderRadius")&&(a.borderRadius=r.textBorderRadius),hasOwn(r,"textBoxShadowColor")&&(a.shadowColor=r.textBoxShadowColor),hasOwn(r,"textBoxShadowBlur")&&(a.shadowBlur=r.textBoxShadowBlur),hasOwn(r,"textBoxShadowOffsetX")&&(a.shadowOffsetX=r.textBoxShadowOffsetX),hasOwn(r,"textBoxShadowOffsetY")&&(a.shadowOffsetY=r.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(a,r,n){var o=a;o.textPosition=o.textPosition||n.position||"inside",n.offset!=null&&(o.textOffset=n.offset),n.rotation!=null&&(o.textRotation=n.rotation),n.distance!=null&&(o.textDistance=n.distance);var s=o.textPosition.indexOf("inside")>=0,l=a.fill||tokens.color.neutral99;convertToEC4RichItem(o,r);var u=o.textFill==null;return s?u&&(o.textFill=n.insideFill||tokens.color.neutral00,!o.textStroke&&n.insideStroke&&(o.textStroke=n.insideStroke),!o.textStroke&&(o.textStroke=l),o.textStrokeWidth==null&&(o.textStrokeWidth=2)):(u&&(o.textFill=a.fill||n.outsideFill||tokens.color.neutral00),!o.textStroke&&n.outsideStroke&&(o.textStroke=n.outsideStroke)),o.text=r.text,o.rich=r.rich,each$f(r.rich,function(c){convertToEC4RichItem(c,c)}),o}function convertToEC4RichItem(a,r){r&&(hasOwn(r,"fill")&&(a.textFill=r.fill),hasOwn(r,"stroke")&&(a.textStroke=r.fill),hasOwn(r,"lineWidth")&&(a.textStrokeWidth=r.lineWidth),hasOwn(r,"font")&&(a.font=r.font),hasOwn(r,"fontStyle")&&(a.fontStyle=r.fontStyle),hasOwn(r,"fontWeight")&&(a.fontWeight=r.fontWeight),hasOwn(r,"fontSize")&&(a.fontSize=r.fontSize),hasOwn(r,"fontFamily")&&(a.fontFamily=r.fontFamily),hasOwn(r,"align")&&(a.textAlign=r.align),hasOwn(r,"verticalAlign")&&(a.textVerticalAlign=r.verticalAlign),hasOwn(r,"lineHeight")&&(a.textLineHeight=r.lineHeight),hasOwn(r,"width")&&(a.textWidth=r.width),hasOwn(r,"height")&&(a.textHeight=r.height),hasOwn(r,"backgroundColor")&&(a.textBackgroundColor=r.backgroundColor),hasOwn(r,"padding")&&(a.textPadding=r.padding),hasOwn(r,"borderColor")&&(a.textBorderColor=r.borderColor),hasOwn(r,"borderWidth")&&(a.textBorderWidth=r.borderWidth),hasOwn(r,"borderRadius")&&(a.textBorderRadius=r.borderRadius),hasOwn(r,"shadowColor")&&(a.textBoxShadowColor=r.shadowColor),hasOwn(r,"shadowBlur")&&(a.textBoxShadowBlur=r.shadowBlur),hasOwn(r,"shadowOffsetX")&&(a.textBoxShadowOffsetX=r.shadowOffsetX),hasOwn(r,"shadowOffsetY")&&(a.textBoxShadowOffsetY=r.shadowOffsetY),hasOwn(r,"textShadowColor")&&(a.textShadowColor=r.textShadowColor),hasOwn(r,"textShadowBlur")&&(a.textShadowBlur=r.textShadowBlur),hasOwn(r,"textShadowOffsetX")&&(a.textShadowOffsetX=r.textShadowOffsetX),hasOwn(r,"textShadowOffsetY")&&(a.textShadowOffsetY=r.textShadowOffsetY))}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys(LEGACY_TRANSFORM_PROPS_MAP);reduce(TRANSFORMABLE_PROPS,function(a,r){return a[r]=1,a},{});TRANSFORMABLE_PROPS.join(", ");var ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(a,r,n,o,s){var l=a+"Animation",u=getAnimationConfig(a,o,s)||{},c=transitionInnerStore(r).userDuring;return u.duration>0&&(u.during=c?bind$1(duringCall,{el:r,userDuring:c}):null,u.setToFinal=!0,u.scope=a),extend(u,n[l]),u}function applyUpdateTransition(a,r,n,o){o=o||{};var s=o.dataIndex,l=o.isInit,u=o.clearStyle,c=n.isAnimationEnabled(),f=transitionInnerStore(a),d=r.style;f.userDuring=r.during;var v={},g={};if(prepareTransformAllPropsFinal(a,r,g),a.type==="compound")for(var y=a.shape.paths,_=r.shape.paths,S=0;S<_.length;S++){var b=_[S];prepareShapeOrExtraAllPropsFinal("shape",b,y[S])}else prepareShapeOrExtraAllPropsFinal("shape",r,g),prepareShapeOrExtraAllPropsFinal("extra",r,g);if(!l&&c&&(prepareTransformTransitionFrom(a,r,v),prepareShapeOrExtraTransitionFrom("shape",a,r,v),prepareShapeOrExtraTransitionFrom("extra",a,r,v),prepareStyleTransitionFrom(a,r,d,v)),g.style=d,applyPropsDirectly(a,g,u),applyMiscProps(a,r),c)if(l){var x={};each$f(ELEMENT_ANIMATABLE_PROPS,function(A){var w=A?r[A]:r;w&&w.enterFrom&&(A&&(x[A]=x[A]||{}),extend(A?x[A]:x,w.enterFrom))});var T=getElementAnimationConfig("enter",a,r,n,s);T.duration>0&&a.animateFrom(x,T)}else applyPropsTransition(a,r,s||0,n,v);updateLeaveTo(a,r),d?a.dirty():a.markRedraw()}function updateLeaveTo(a,r){for(var n=transitionInnerStore(a).leaveToProps,o=0;o<ELEMENT_ANIMATABLE_PROPS.length;o++){var s=ELEMENT_ANIMATABLE_PROPS[o],l=s?r[s]:r;l&&l.leaveTo&&(n||(n=transitionInnerStore(a).leaveToProps={}),s&&(n[s]=n[s]||{}),extend(s?n[s]:n,l.leaveTo))}}function applyLeaveTransition(a,r,n,o){if(a){var s=a.parent,l=transitionInnerStore(a).leaveToProps;if(l){var u=getElementAnimationConfig("update",a,r,n,0);u.done=function(){s&&s.remove(a)},a.animateTo(l,u)}else s&&s.remove(a)}}function isTransitionAll(a){return a==="all"}function applyPropsDirectly(a,r,n){var o=r.style;if(!a.isGroup&&o){if(n){a.useStyle({});for(var s=a.animators,l=0;l<s.length;l++){var u=s[l];u.targetName==="style"&&u.changeTarget(a.style)}}a.setStyle(o)}r&&(r.style=null,r&&a.attr(r),r.style=o)}function applyPropsTransition(a,r,n,o,s){if(s){var l=getElementAnimationConfig("update",a,r,o,n);l.duration>0&&a.animateFrom(s,l)}}function applyMiscProps(a,r){hasOwn(r,"silent")&&(a.silent=r.silent),hasOwn(r,"ignore")&&(a.ignore=r.ignore),a instanceof Displayable&&hasOwn(r,"invisible")&&(a.invisible=r.invisible),a instanceof Path&&hasOwn(r,"autoBatch")&&(a.autoBatch=r.autoBatch)}var tmpDuringScope={},transitionDuringAPI={setTransform:function(a,r){return tmpDuringScope.el[a]=r,this},getTransform:function(a){return tmpDuringScope.el[a]},setShape:function(a,r){var n=tmpDuringScope.el,o=n.shape||(n.shape={});return o[a]=r,n.dirtyShape&&n.dirtyShape(),this},getShape:function(a){var r=tmpDuringScope.el.shape;if(r)return r[a]},setStyle:function(a,r){var n=tmpDuringScope.el,o=n.style;return o&&(o[a]=r,n.dirtyStyle&&n.dirtyStyle()),this},getStyle:function(a){var r=tmpDuringScope.el.style;if(r)return r[a]},setExtra:function(a,r){var n=tmpDuringScope.el.extra||(tmpDuringScope.el.extra={});return n[a]=r,this},getExtra:function(a){var r=tmpDuringScope.el.extra;if(r)return r[a]}};function duringCall(){var a=this,r=a.el;if(r){var n=transitionInnerStore(r).userDuring,o=a.userDuring;if(n!==o){a.el=a.userDuring=null;return}tmpDuringScope.el=r,o(transitionDuringAPI)}}function prepareShapeOrExtraTransitionFrom(a,r,n,o){var s=n[a];if(s){var l=r[a],u;if(l){var c=n.transition,f=s.transition;if(f)if(!u&&(u=o[a]={}),isTransitionAll(f))extend(u,l);else for(var d=normalizeToArray(f),v=0;v<d.length;v++){var g=d[v],y=l[g];u[g]=y}else if(isTransitionAll(c)||indexOf(c,a)>=0){!u&&(u=o[a]={});for(var _=keys(l),v=0;v<_.length;v++){var g=_[v],y=l[g];isNonStyleTransitionEnabled(s[g],y)&&(u[g]=y)}}}}}function prepareShapeOrExtraAllPropsFinal(a,r,n){var o=r[a];if(o)for(var s=n[a]={},l=keys(o),u=0;u<l.length;u++){var c=l[u];s[c]=cloneValue(o[c])}}function prepareTransformTransitionFrom(a,r,n){for(var o=r.transition,s=isTransitionAll(o)?TRANSFORMABLE_PROPS:normalizeToArray(o||[]),l=0;l<s.length;l++){var u=s[l];if(!(u==="style"||u==="shape"||u==="extra")){var c=a[u];n[u]=c}}}function prepareTransformAllPropsFinal(a,r,n){for(var o=0;o<LEGACY_TRANSFORM_PROPS.length;o++){var s=LEGACY_TRANSFORM_PROPS[o],l=LEGACY_TRANSFORM_PROPS_MAP[s],u=r[s];u&&(n[l[0]]=u[0],n[l[1]]=u[1])}for(var o=0;o<TRANSFORMABLE_PROPS.length;o++){var c=TRANSFORMABLE_PROPS[o];r[c]!=null&&(n[c]=r[c])}}function prepareStyleTransitionFrom(a,r,n,o){if(n){var s=a.style,l;if(s){var u=n.transition,c=r.transition;if(u&&!isTransitionAll(u)){var f=normalizeToArray(u);!l&&(l=o.style={});for(var d=0;d<f.length;d++){var v=f[d],g=s[v];l[v]=g}}else if(a.getAnimationStyleProps&&(isTransitionAll(c)||isTransitionAll(u)||indexOf(c,"style")>=0)){var y=a.getAnimationStyleProps(),_=y?y.style:null;if(_){!l&&(l=o.style={});for(var S=keys(n),d=0;d<S.length;d++){var v=S[d];if(_[v]){var g=s[v];l[v]=g}}}}}}}function isNonStyleTransitionEnabled(a,r){return isArrayLike(a)?a!==r:a!=null&&isFinite(a)}var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(a){a.stopAnimation("keyframe"),a.attr(getStateToRestore(a))}function applyKeyframeAnimation(a,r,n){if(!(!n.isAnimationEnabled()||!r)){if(isArray$1(r)){each$f(r,function(c){applyKeyframeAnimation(a,c,n)});return}var o=r.keyframes,s=r.duration;if(n&&s==null){var l=getAnimationConfig("enter",n,0);s=l&&l.duration}if(!(!o||!s)){var u=getStateToRestore(a);each$f(ELEMENT_ANIMATABLE_PROPS,function(c){if(!(c&&!a[c])){var f;o.sort(function(d,v){return d.percent-v.percent}),each$f(o,function(d){var v=a.animators,g=c?d[c]:d;if(g){var y=keys(g);if(c||(y=filter(y,function(b){return indexOf(KEYFRAME_EXCLUDE_KEYS,b)<0})),!!y.length){f||(f=a.animate(c,r.loop,!0),f.scope="keyframe");for(var _=0;_<v.length;_++)v[_]!==f&&v[_].targetName===f.targetName&&v[_].stopTracks(y);c&&(u[c]=u[c]||{});var S=c?u[c]:u;each$f(y,function(b){S[b]=((c?a[c]:a)||{})[b]}),f.whenWithKeys(s*d.percent,g,y,d.easing)}}}),f&&f.delay(r.delay||0).duration(s).start(r.easing)}})}}}var EMPHASIS="emphasis",NORMAL="normal",BLUR="blur",SELECT="select",STATES=[NORMAL,EMPHASIS,BLUR,SELECT],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:[BLUR,"itemStyle"],select:[SELECT,"itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:[BLUR,"label"],select:[SELECT,"label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:cartesianPrepareCustom,geo:geoPrepareCustom,single:singlePrepareCustom,polar:polarPrepareCustom,calendar:calendarPrepareCustom,matrix:matrixPrepareCustom};function isPath(a){return a instanceof Path}function isDisplayable(a){return a instanceof Displayable}function copyElement(a,r){r.copyTransform(a),isDisplayable(r)&&isDisplayable(a)&&(r.setStyle(a.style),r.z=a.z,r.z2=a.z2,r.zlevel=a.zlevel,r.invisible=a.invisible,r.ignore=a.ignore,isPath(r)&&isPath(a)&&r.setShape(a.shape))}var CustomChartView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s,l){this._progressiveEls=null;var u=this._data,c=n.getData(),f=this.group,d=makeRenderItem(n,c,o,s);u||f.removeAll(),c.diff(u).add(function(g){createOrUpdateItem(s,null,g,d(g,l),n,f,c)}).remove(function(g){var y=u.getItemGraphicEl(g);y&&applyLeaveTransition(y,customInnerStore(y).option,n)}).update(function(g,y){var _=u.getItemGraphicEl(y);createOrUpdateItem(s,_,g,d(g,l),n,f,c)}).execute();var v=n.get("clip",!0)?createClipPath(n.coordinateSystem,!1,n):null;v?f.setClipPath(v):f.removeClipPath(),this._data=c},r.prototype.incrementalPrepareRender=function(n,o,s){this.group.removeAll(),this._data=null},r.prototype.incrementalRender=function(n,o,s,l,u){var c=o.getData(),f=makeRenderItem(o,c,s,l),d=this._progressiveEls=[];function v(_){_.isGroup||(_.incremental=!0,_.ensureState("emphasis").hoverLayer=!0)}for(var g=n.start;g<n.end;g++){var y=createOrUpdateItem(null,null,g,f(g,u),o,this.group,c);y&&(y.traverse(v),d.push(y))}},r.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},r.prototype.filterForExposedEvent=function(n,o,s,l){var u=o.element;if(u==null||s.name===u)return!0;for(;(s=s.__hostTarget||s.parent)&&s!==this.group;)if(s.name===u)return!0;return!1},r.type="custom",r}(ChartView);function createEl$1(a){var r=a.type,n;if(r==="path"){var o=a.shape,s=o.width!=null&&o.height!=null?{x:o.x||0,y:o.y||0,width:o.width,height:o.height}:null,l=getPathData(o);n=makePath(l,null,s,o.layout||"center"),customInnerStore(n).customPathData=l}else if(r==="image")n=new ZRImage({}),customInnerStore(n).customImagePath=a.style.image;else if(r==="text")n=new ZRText({});else if(r==="group")n=new Group$3;else if(r==="compoundPath"){var o=a.shape;if(!o||!o.paths){var u="";throwError(u)}var c=map$1(o.paths,function(v){if(v.type==="path")return makePath(v.shape.pathData,v,null);var g=getShapeClass(v.type);if(!g){var y="";throwError(y)}return new g});n=new CompoundPath({shape:{paths:c}})}else{var f=getShapeClass(r);if(!f){var u="";throwError(u)}n=new f}return customInnerStore(n).customGraphicType=r,n.name=a.name,n.z2EmphasisLift=1,n.z2SelectLift=1,n}function updateElNormal(a,r,n,o,s,l,u){stopPreviousKeyframeAnimationAndRestore(r);var c=s&&s.normal.cfg;c&&r.setTextConfig(c),o&&o.transition==null&&(o.transition=DEFAULT_TRANSITION);var f=o&&o.style;if(f){if(r.type==="text"){var d=f;hasOwn(d,"textFill")&&(d.fill=d.textFill),hasOwn(d,"textStroke")&&(d.stroke=d.textStroke)}var v=void 0,g=isPath(r)?f.decal:null;a&&g&&(g.dirty=!0,v=createOrUpdatePatternFromDecal(g,a)),f.__decalPattern=v}if(isDisplayable(r)&&f){var v=f.__decalPattern;v&&(f.decal=v)}applyUpdateTransition(r,o,l,{dataIndex:n,isInit:u,clearStyle:!0}),applyKeyframeAnimation(r,o.keyframeAnimation,l)}function updateElOnState(a,r,n,o,s){var l=r.isGroup?null:r,u=s&&s[a].cfg;if(l){var c=l.ensureState(a);if(o===!1){var f=l.getState(a);f&&(f.style=null)}else c.style=o||null;u&&(c.textConfig=u),setDefaultStateProxy(l)}}function updateZ$2(a,r,n){if(!a.isGroup){var o=a,s=n.currentZ,l=n.currentZLevel;o.z=s,o.zlevel=l;var u=r.z2;u!=null&&(o.z2=u||0);for(var c=0;c<STATES.length;c++)updateZForEachState(o,r,STATES[c])}}function updateZForEachState(a,r,n){var o=n===NORMAL,s=o?r:retrieveStateOption(r,n),l=s?s.z2:null,u;l!=null&&(u=o?a:a.ensureState(n),u.z2=l||0)}function makeRenderItem(a,r,n,o){var s=a.get("renderItem");if(typeof s=="string"){var l=getCustomSeries(s);l&&(s=l)}var u=a.coordinateSystem,c={};u&&(c=u.prepareCustoms?u.prepareCustoms(u):prepareCustoms[u.type](u));for(var f=defaults({getWidth:o.getWidth,getHeight:o.getHeight,getZr:o.getZr,getDevicePixelRatio:o.getDevicePixelRatio,value:E,style:I,ordinalRawValue:P,styleEmphasis:M,visual:$,barLayout:B,currentSeriesIndices:F,font:z},c.api||{}),d={context:{},seriesId:a.id,seriesName:a.name,seriesIndex:a.seriesIndex,coordSys:c.coordSys,dataInsideLength:r.count(),encode:wrapEncodeDef(a.getData()),itemPayload:a.get("itemPayload")||{}},v,g,y={},_={},S={},b={},x=0;x<STATES.length;x++){var T=STATES[x];S[T]=a.getModel(PATH_ITEM_STYLE[T]),b[T]=a.getModel(PATH_LABEL[T])}function A(G){return G===v?g||(g=r.getItemModel(G)):r.getItemModel(G)}function w(G,D){return r.hasItemOption?G===v?y[D]||(y[D]=A(G).getModel(PATH_ITEM_STYLE[D])):A(G).getModel(PATH_ITEM_STYLE[D]):S[D]}function C(G,D){return r.hasItemOption?G===v?_[D]||(_[D]=A(G).getModel(PATH_LABEL[D])):A(G).getModel(PATH_LABEL[D]):b[D]}return function(G,D){return v=G,g=null,y={},_={},s&&s(defaults({dataIndexInside:G,dataIndex:r.getRawIndex(G),actionType:D?D.type:null},d),f)};function E(G,D){return D==null&&(D=v),r.getStore().get(r.getDimensionIndex(G||0),D)}function P(G,D){D==null&&(D=v),G=G||0;var V=r.getDimensionInfo(G);if(!V){var L=r.getDimensionIndex(G);return L>=0?r.getStore().get(L,D):void 0}var N=r.get(V.name,D),U=V&&V.ordinalMeta;return U?U.categories[N]:N}function I(G,D){D==null&&(D=v);var V=r.getItemVisual(D,"style"),L=V&&V.fill,N=V&&V.opacity,U=w(D,NORMAL).getItemStyle();L!=null&&(U.fill=L),N!=null&&(U.opacity=N);var H={inheritColor:isString(L)?L:tokens.color.neutral99},q=C(D,NORMAL),Z=createTextStyle(q,null,H,!1,!0);Z.text=q.getShallow("show")?retrieve2(a.getFormattedLabel(D,NORMAL),getDefaultLabel(r,D)):null;var ee=createTextConfig(q,H,!1);return O(G,U),U=convertToEC4StyleForCustomSerise(U,Z,ee),G&&R(U,G),U.legacy=!0,U}function M(G,D){D==null&&(D=v);var V=w(D,EMPHASIS).getItemStyle(),L=C(D,EMPHASIS),N=createTextStyle(L,null,null,!0,!0);N.text=L.getShallow("show")?retrieve3(a.getFormattedLabel(D,EMPHASIS),a.getFormattedLabel(D,NORMAL),getDefaultLabel(r,D)):null;var U=createTextConfig(L,null,!0);return O(G,V),V=convertToEC4StyleForCustomSerise(V,N,U),G&&R(V,G),V.legacy=!0,V}function R(G,D){for(var V in D)hasOwn(D,V)&&(G[V]=D[V])}function O(G,D){G&&(G.textFill&&(D.textFill=G.textFill),G.textPosition&&(D.textPosition=G.textPosition))}function $(G,D){if(D==null&&(D=v),hasOwn(STYLE_VISUAL_TYPE,G)){var V=r.getItemVisual(D,"style");return V?V[STYLE_VISUAL_TYPE[G]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,G))return r.getItemVisual(D,G)}function B(G){if(u.type==="cartesian2d"){var D=u.getBaseAxis();return getLayoutOnAxis(defaults({axis:D},G))}}function F(){return n.getCurrentSeriesIndices()}function z(G){return getFont(G,n)}}function wrapEncodeDef(a){var r={};return each$f(a.dimensions,function(n){var o=a.getDimensionInfo(n);if(!o.isExtraCoord){var s=o.coordDim,l=r[s]=r[s]||[];l[o.coordDimIndex]=a.getDimensionIndex(n)}}),r}function createOrUpdateItem(a,r,n,o,s,l,u){if(!o){l.remove(r);return}var c=doCreateOrUpdateEl(a,r,n,o,s,l);return c&&u.setItemGraphicEl(n,c),c&&toggleHoverEmphasis(c,o.focus,o.blurScope,o.emphasisDisabled),c}function doCreateOrUpdateEl(a,r,n,o,s,l){var u=-1,c=r;r&&doesElNeedRecreate(r,o,s)&&(u=indexOf(l.childrenRef(),r),r=null);var f=!r,d=r;d?d.clearStates():(d=createEl$1(o),c&&copyElement(c,d)),o.morph===!1?d.disableMorphing=!0:d.disableMorphing&&(d.disableMorphing=!1),o.tooltipDisabled&&(d.tooltipDisabled=!0),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,doCreateOrUpdateAttachedTx(d,n,o,s,f,attachedTxInfoTmp),doCreateOrUpdateClipPath(d,n,o,s,f),updateElNormal(a,d,n,o,attachedTxInfoTmp,s,f),hasOwn(o,"info")&&(customInnerStore(d).info=o.info);for(var v=0;v<STATES.length;v++){var g=STATES[v];if(g!==NORMAL){var y=retrieveStateOption(o,g),_=retrieveStyleOptionOnState(o,y,g);updateElOnState(g,d,y,_,attachedTxInfoTmp)}}return updateZ$2(d,o,s),o.type==="group"&&mergeChildren(a,d,n,o,s),u>=0?l.replaceAt(d,u):l.add(d),d}function doesElNeedRecreate(a,r,n){var o=customInnerStore(a),s=r.type,l=r.shape,u=r.style;return n.isUniversalTransitionEnabled()||s!=null&&s!==o.customGraphicType||s==="path"&&hasOwnPathData(l)&&getPathData(l)!==o.customPathData||s==="image"&&hasOwn(u,"image")&&u.image!==o.customImagePath}function doCreateOrUpdateClipPath(a,r,n,o,s){var l=n.clipPath;if(l===!1)a&&a.getClipPath()&&a.removeClipPath();else if(l){var u=a.getClipPath();u&&doesElNeedRecreate(u,l,o)&&(u=null),u||(u=createEl$1(l),a.setClipPath(u)),updateElNormal(null,u,r,l,null,o,s)}}function doCreateOrUpdateAttachedTx(a,r,n,o,s,l){if(!(a.isGroup||a.type==="compoundPath")){processTxInfo(n,null,l),processTxInfo(n,EMPHASIS,l);var u=l.normal.conOpt,c=l.emphasis.conOpt,f=l.blur.conOpt,d=l.select.conOpt;if(u!=null||c!=null||d!=null||f!=null){var v=a.getTextContent();if(u===!1)v&&a.removeTextContent();else{u=l.normal.conOpt=u||{type:"text"},v?v.clearStates():(v=createEl$1(u),a.setTextContent(v)),updateElNormal(null,v,r,u,null,o,s);for(var g=u&&u.style,y=0;y<STATES.length;y++){var _=STATES[y];if(_!==NORMAL){var S=l[_].conOpt;updateElOnState(_,v,S,retrieveStyleOptionOnState(u,S,_),null)}}g?v.dirty():v.markRedraw()}}}}function processTxInfo(a,r,n){var o=r?retrieveStateOption(a,r):a,s=r?retrieveStyleOptionOnState(a,o,EMPHASIS):a.style,l=a.type,u=o?o.textConfig:null,c=a.textContent,f=c?r?retrieveStateOption(c,r):c:null;if(s&&(n.isLegacy||isEC4CompatibleStyle(s,l,!!u,!!f))){n.isLegacy=!0;var d=convertFromEC4CompatibleStyle(s,l,!r);!u&&d.textConfig&&(u=d.textConfig),!f&&d.textContent&&(f=d.textContent)}if(!r&&f){var v=f;!v.type&&(v.type="text")}var g=r?n[r]:n.normal;g.cfg=u,g.conOpt=f}function retrieveStateOption(a,r){return r?a?a[r]:null:a}function retrieveStyleOptionOnState(a,r,n){var o=r&&r.style;return o==null&&n===EMPHASIS&&a&&(o=a.styleEmphasis),o}function mergeChildren(a,r,n,o,s){var l=o.children,u=l?l.length:0,c=o.$mergeChildren,f=c==="byName"||o.diffChildrenByName,d=c===!1;if(!(!u&&!f&&!d)){if(f){diffGroupChildren({api:a,oldChildren:r.children()||[],newChildren:l||[],dataIndex:n,seriesModel:s,group:r});return}d&&r.removeAll();for(var v=0;v<u;v++){var g=l[v],y=r.childAt(v);g?(g.ignore==null&&(g.ignore=!1),doCreateOrUpdateEl(a,y,n,g,s,r)):y.ignore=!0}for(var _=r.childCount()-1;_>=v;_--){var S=r.childAt(_);removeChildFromGroup(r,S,s)}}}function removeChildFromGroup(a,r,n){r&&applyLeaveTransition(r,customInnerStore(a).option,n)}function diffGroupChildren(a){new DataDiffer(a.oldChildren,a.newChildren,getKey,getKey,a).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(a,r){var n=a&&a.name;return n??GROUP_DIFF_PREFIX+r}function processAddUpdate(a,r){var n=this.context,o=a!=null?n.newChildren[a]:null,s=r!=null?n.oldChildren[r]:null;doCreateOrUpdateEl(n.api,s,n.dataIndex,o,n.seriesModel,n.group)}function processRemove(a){var r=this.context,n=r.oldChildren[a];n&&applyLeaveTransition(n,customInnerStore(n).option,r.seriesModel)}function getPathData(a){return a&&(a.pathData||a.d)}function hasOwnPathData(a){return a&&(hasOwn(a,"pathData")||hasOwn(a,"d"))}function install$t(a){a.registerChartView(CustomChartView),a.registerSeriesModel(CustomSeriesModel)}var inner$b=makeInner(),clone$1=clone$4,bind=bind$1,BaseAxisPointer=function(){function a(){this._dragging=!1,this.animationThreshold=15}return a.prototype.render=function(r,n,o,s){var l=n.get("value"),u=n.get("status");if(this._axisModel=r,this._axisPointerModel=n,this._api=o,!(!s&&this._lastValue===l&&this._lastStatus===u)){this._lastValue=l,this._lastStatus=u;var c=this._group,f=this._handle;if(!u||u==="hide"){c&&c.hide(),f&&f.hide();return}c&&c.show(),f&&f.show();var d={};this.makeElOption(d,l,r,n,o);var v=d.graphicKey;v!==this._lastGraphicKey&&this.clear(o),this._lastGraphicKey=v;var g=this._moveAnimation=this.determineAnimation(r,n);if(!c)c=this._group=new Group$3,this.createPointerEl(c,d,r,n),this.createLabelEl(c,d,r,n),o.getZr().add(c);else{var y=curry$1(updateProps,n,g);this.updatePointerEl(c,d,y),this.updateLabelEl(c,d,y,n)}updateMandatoryProps(c,n,!0),this._renderHandle(l)}},a.prototype.remove=function(r){this.clear(r)},a.prototype.dispose=function(r){this.clear(r)},a.prototype.determineAnimation=function(r,n){var o=n.get("animation"),s=r.axis,l=s.type==="category",u=n.get("snap");if(!u&&!l)return!1;if(o==="auto"||o==null){var c=this.animationThreshold;if(l&&s.getBandWidth()>c)return!0;if(u){var f=getAxisInfo$1(r).seriesDataCount,d=s.getExtent();return Math.abs(d[0]-d[1])/f>c}return!1}return o===!0},a.prototype.makeElOption=function(r,n,o,s,l){},a.prototype.createPointerEl=function(r,n,o,s){var l=n.pointer;if(l){var u=inner$b(r).pointerEl=new graphic[l.type](clone$1(n.pointer));r.add(u)}},a.prototype.createLabelEl=function(r,n,o,s){if(n.label){var l=inner$b(r).labelEl=new ZRText(clone$1(n.label));r.add(l),updateLabelShowHide(l,s)}},a.prototype.updatePointerEl=function(r,n,o){var s=inner$b(r).pointerEl;s&&n.pointer&&(s.setStyle(n.pointer.style),o(s,{shape:n.pointer.shape}))},a.prototype.updateLabelEl=function(r,n,o,s){var l=inner$b(r).labelEl;l&&(l.setStyle(n.label.style),o(l,{x:n.label.x,y:n.label.y}),updateLabelShowHide(l,s))},a.prototype._renderHandle=function(r){if(!(this._dragging||!this.updateHandleTransform)){var n=this._axisPointerModel,o=this._api.getZr(),s=this._handle,l=n.getModel("handle"),u=n.get("status");if(!l.get("show")||!u||u==="hide"){s&&o.remove(s),this._handle=null;return}var c;this._handle||(c=!0,s=this._handle=createIcon(l.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(d){stop(d.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),o.add(s)),updateMandatoryProps(s,n,!1),s.setStyle(l.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var f=l.get("size");isArray$1(f)||(f=[f,f]),s.scaleX=f[0]/2,s.scaleY=f[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",l.get("throttle")||0,"fixRate"),this._moveHandleToValue(r,c)}},a.prototype._moveHandleToValue=function(r,n){updateProps(this._axisPointerModel,!n&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(r,this._axisModel,this._axisPointerModel)))},a.prototype._onHandleDragMove=function(r,n){var o=this._handle;if(o){this._dragging=!0;var s=this.updateHandleTransform(getHandleTransProps(o),[r,n],this._axisModel,this._axisPointerModel);this._payloadInfo=s,o.stopAnimation(),o.attr(getHandleTransProps(s)),inner$b(o).lastProp=null,this._doDispatchAxisPointer()}},a.prototype._doDispatchAxisPointer=function(){var r=this._handle;if(r){var n=this._payloadInfo,o=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:n.cursorPoint[0],y:n.cursorPoint[1],tooltipOption:n.tooltipOption,axesInfo:[{axisDim:o.axis.dim,axisIndex:o.componentIndex}]})}},a.prototype._onHandleDragEnd=function(){this._dragging=!1;var r=this._handle;if(r){var n=this._axisPointerModel.get("value");this._moveHandleToValue(n),this._api.dispatchAction({type:"hideTip"})}},a.prototype.clear=function(r){this._lastValue=null,this._lastStatus=null;var n=r.getZr(),o=this._group,s=this._handle;n&&o&&(this._lastGraphicKey=null,o&&n.remove(o),s&&n.remove(s),this._group=null,this._handle=null,this._payloadInfo=null),clear$1(this,"_doDispatchAxisPointer")},a.prototype.doClear=function(){},a.prototype.buildLabel=function(r,n,o){return o=o||0,{x:r[o],y:r[1-o],width:n[o],height:n[1-o]}},a}();function updateProps(a,r,n,o){propsEqual(inner$b(n).lastProp,o)||(inner$b(n).lastProp=o,r?updateProps$1(n,o,a):(n.stopAnimation(),n.attr(o)))}function propsEqual(a,r){if(isObject$3(a)&&isObject$3(r)){var n=!0;return each$f(r,function(o,s){n=n&&propsEqual(a[s],o)}),!!n}else return a===r}function updateLabelShowHide(a,r){a[r.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(a){return{x:a.x||0,y:a.y||0,rotation:a.rotation||0}}function updateMandatoryProps(a,r,n){var o=r.get("z"),s=r.get("zlevel");a&&a.traverse(function(l){l.type!=="group"&&(o!=null&&(l.z=o),s!=null&&(l.zlevel=s),l.silent=n)})}function buildElStyle(a){var r=a.get("type"),n=a.getModel(r+"Style"),o;return r==="line"?(o=n.getLineStyle(),o.fill=null):r==="shadow"&&(o=n.getAreaStyle(),o.stroke=null),o}function buildLabelElOption(a,r,n,o,s){var l=n.get("value"),u=getValueLabel(l,r.axis,r.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),c=n.getModel("label"),f=normalizeCssArray(c.get("padding")||0),d=c.getFont(),v=getBoundingRect(u,d),g=s.position,y=v.width+f[1]+f[3],_=v.height+f[0]+f[2],S=s.align;S==="right"&&(g[0]-=y),S==="center"&&(g[0]-=y/2);var b=s.verticalAlign;b==="bottom"&&(g[1]-=_),b==="middle"&&(g[1]-=_/2),confineInContainer(g,y,_,o);var x=c.get("backgroundColor");(!x||x==="auto")&&(x=r.get(["axisLine","lineStyle","color"])),a.label={x:g[0],y:g[1],style:createTextStyle(c,{text:u,font:d,fill:c.getTextColor(),padding:f,backgroundColor:x}),z2:10}}function confineInContainer(a,r,n,o){var s=o.getWidth(),l=o.getHeight();a[0]=Math.min(a[0]+r,s)-r,a[1]=Math.min(a[1]+n,l)-n,a[0]=Math.max(a[0],0),a[1]=Math.max(a[1],0)}function getValueLabel(a,r,n,o,s){a=r.scale.parse(a);var l=r.scale.getLabel({value:a},{precision:s.precision}),u=s.formatter;if(u){var c={value:getAxisRawValue(r,{value:a}),axisDimension:r.dim,axisIndex:r.index,seriesData:[]};each$f(o,function(f){var d=n.getSeriesByIndex(f.seriesIndex),v=f.dataIndexInside,g=d&&d.getDataParams(v);g&&c.seriesData.push(g)}),isString(u)?l=u.replace("{value}",l):isFunction(u)&&(l=u(c))}return l}function getTransformedPosition(a,r,n){var o=create$1();return rotate(o,o,n.rotation),translate(o,o,n.position),applyTransform([a.dataToCoord(r),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],o)}function buildCartesianSingleLabelElOption(a,r,n,o,s,l){var u=AxisBuilder.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=s.get(["label","margin"]),buildLabelElOption(r,o,s,l,{position:getTransformedPosition(o.axis,a,n),align:u.textAlign,verticalAlign:u.textVerticalAlign})}function makeLineShape(a,r,n){return n=n||0,{x1:a[n],y1:a[1-n],x2:r[n],y2:r[1-n]}}function makeRectShape(a,r,n){return n=n||0,{x:a[n],y:a[1-n],width:r[n],height:r[1-n]}}function makeSectorShape(a,r,n,o,s,l){return{cx:a,cy:r,r0:n,r:o,startAngle:s,endAngle:l,clockwise:!0}}var CartesianAxisPointer=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.makeElOption=function(n,o,s,l,u){var c=s.axis,f=c.grid,d=l.get("type"),v=getCartesian(f,c).getOtherAxis(c).getGlobalExtent(),g=c.toGlobalCoord(c.dataToCoord(o,!0));if(d&&d!=="none"){var y=buildElStyle(l),_=pointerShapeBuilder$2[d](c,g,v);_.style=y,n.graphicKey=_.type,n.pointer=_}var S=layout$1(f.getRect(),s);buildCartesianSingleLabelElOption(o,n,S,s,l,u)},r.prototype.getHandleTransform=function(n,o,s){var l=layout$1(o.axis.grid.getRect(),o,{labelInside:!1});l.labelMargin=s.get(["handle","margin"]);var u=getTransformedPosition(o.axis,n,l);return{x:u[0],y:u[1],rotation:l.rotation+(l.labelDirection<0?Math.PI:0)}},r.prototype.updateHandleTransform=function(n,o,s,l){var u=s.axis,c=u.grid,f=u.getGlobalExtent(!0),d=getCartesian(c,u).getOtherAxis(u).getGlobalExtent(),v=u.dim==="x"?0:1,g=[n.x,n.y];g[v]+=o[v],g[v]=Math.min(f[1],g[v]),g[v]=Math.max(f[0],g[v]);var y=(d[1]+d[0])/2,_=[y,y];_[v]=g[v];var S=[{verticalAlign:"middle"},{align:"center"}];return{x:g[0],y:g[1],rotation:n.rotation,cursorPoint:_,tooltipOption:S[v]}},r}(BaseAxisPointer);function getCartesian(a,r){var n={};return n[r.dim+"AxisIndex"]=r.index,a.getCartesian(n)}var pointerShapeBuilder$2={line:function(a,r,n){var o=makeLineShape([r,n[0]],[r,n[1]],getAxisDimIndex(a));return{type:"Line",subPixelOptimize:!0,shape:o}},shadow:function(a,r,n){var o=Math.max(1,a.getBandWidth()),s=n[1]-n[0];return{type:"Rect",shape:makeRectShape([r-o/2,n[0]],[o,s],getAxisDimIndex(a))}}};function getAxisDimIndex(a){return a.dim==="x"?0:1}var AxisPointerModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.type="axisPointer",r.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:tokens.color.border,width:1,type:"dashed"},shadowStyle:{color:tokens.color.shadowTint},label:{show:!0,formatter:null,precision:"auto",margin:3,color:tokens.color.neutral00,padding:[5,7,5,7],backgroundColor:tokens.color.accent60,borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:tokens.color.accent40,throttle:40}},r}(ComponentModel),inner$a=makeInner(),each$8=each$f;function register(a,r,n){if(!env.node){var o=r.getZr();inner$a(o).records||(inner$a(o).records={}),initGlobalListeners(o,r);var s=inner$a(o).records[a]||(inner$a(o).records[a]={});s.handler=n}}function initGlobalListeners(a,r){if(inner$a(a).initialized)return;inner$a(a).initialized=!0,n("click",curry$1(doEnter,"click")),n("mousemove",curry$1(doEnter,"mousemove")),n("globalout",onLeave);function n(o,s){a.on(o,function(l){var u=makeDispatchAction$1(r);each$8(inner$a(a).records,function(c){c&&s(c,l,u.dispatchAction)}),dispatchTooltipFinally(u.pendings,r)})}}function dispatchTooltipFinally(a,r){var n=a.showTip.length,o=a.hideTip.length,s;n?s=a.showTip[n-1]:o&&(s=a.hideTip[o-1]),s&&(s.dispatchAction=null,r.dispatchAction(s))}function onLeave(a,r,n){a.handler("leave",null,n)}function doEnter(a,r,n,o){r.handler(a,n,o)}function makeDispatchAction$1(a){var r={showTip:[],hideTip:[]},n=function(o){var s=r[o.type];s?s.push(o):(o.dispatchAction=n,a.dispatchAction(o))};return{dispatchAction:n,pendings:r}}function unregister(a,r){if(!env.node){var n=r.getZr(),o=(inner$a(n).records||{})[a];o&&(inner$a(n).records[a]=null)}}var AxisPointerView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s){var l=o.getComponent("tooltip"),u=n.get("triggerOn")||l&&l.get("triggerOn")||"mousemove|click";register("axisPointer",s,function(c,f,d){u!=="none"&&(c==="leave"||u.indexOf(c)>=0)&&d({type:"updateAxisPointer",currTrigger:c,x:f&&f.offsetX,y:f&&f.offsetY})})},r.prototype.remove=function(n,o){unregister("axisPointer",o)},r.prototype.dispose=function(n,o){unregister("axisPointer",o)},r.type="axisPointer",r}(ComponentView);function findPointFromSeries(a,r){var n=[],o=a.seriesIndex,s;if(o==null||!(s=r.getSeriesByIndex(o)))return{point:[]};var l=s.getData(),u=queryDataIndex(l,a);if(u==null||u<0||isArray$1(u))return{point:[]};var c=l.getItemGraphicEl(u),f=s.coordinateSystem;if(s.getTooltipPosition)n=s.getTooltipPosition(u)||[];else if(f&&f.dataToPoint)if(a.isStacked){var d=f.getBaseAxis(),v=f.getOtherAxis(d),g=v.dim,y=d.dim,_=g==="x"||g==="radius"?1:0,S=l.mapDimension(y),b=[];b[_]=l.get(S,u),b[1-_]=l.get(l.getCalculationInfo("stackResultDimension"),u),n=f.dataToPoint(b)||[]}else n=f.dataToPoint(l.getValues(map$1(f.dimensions,function(T){return l.mapDimension(T)}),u))||[];else if(c){var x=c.getBoundingRect().clone();x.applyTransform(c.transform),n=[x.x+x.width/2,x.y+x.height/2]}return{point:n,el:c}}var inner$9=makeInner();function axisTrigger(a,r,n){var o=a.currTrigger,s=[a.x,a.y],l=a,u=a.dispatchAction||bind$1(n.dispatchAction,n),c=r.getComponent("axisPointer").coordSysAxesInfo;if(c){illegalPoint(s)&&(s=findPointFromSeries({seriesIndex:l.seriesIndex,dataIndex:l.dataIndex},r).point);var f=illegalPoint(s),d=l.axesInfo,v=c.axesInfo,g=o==="leave"||illegalPoint(s),y={},_={},S={list:[],map:{}},b={showPointer:curry$1(showPointer,_),showTooltip:curry$1(showTooltip,S)};each$f(c.coordSysMap,function(T,A){var w=f||T.containPoint(s);each$f(c.coordSysAxesInfo[A],function(C,E){var P=C.axis,I=findInputAxisInfo(d,C);if(!g&&w&&(!d||I)){var M=I&&I.value;M==null&&!f&&(M=P.pointToData(s)),M!=null&&processOnAxis(C,M,b,!1,y)}})});var x={};return each$f(v,function(T,A){var w=T.linkGroup;w&&!_[A]&&each$f(w.axesInfo,function(C,E){var P=_[E];if(C!==T&&P){var I=P.value;w.mapper&&(I=T.axis.scale.parse(w.mapper(I,makeMapperParam(C),makeMapperParam(T)))),x[T.key]=I}})}),each$f(x,function(T,A){processOnAxis(v[A],T,b,!0,y)}),updateModelActually(_,v,y),dispatchTooltipActually(S,s,a,u),dispatchHighDownActually(v,u,n),y}}function processOnAxis(a,r,n,o,s){var l=a.axis;if(!(l.scale.isBlank()||!l.containData(r))){if(!a.involveSeries){n.showPointer(a,r);return}var u=buildPayloadsBySeries(r,a),c=u.payloadBatch,f=u.snapToValue;c[0]&&s.seriesIndex==null&&extend(s,c[0]),!o&&a.snap&&l.containData(f)&&f!=null&&(r=f),n.showPointer(a,r,c),n.showTooltip(a,u,f)}}function buildPayloadsBySeries(a,r){var n=r.axis,o=n.dim,s=a,l=[],u=Number.MAX_VALUE,c=-1;return each$f(r.seriesModels,function(f,d){var v=f.getData().mapDimensionsAll(o),g,y;if(f.getAxisTooltipData){var _=f.getAxisTooltipData(v,a,n);y=_.dataIndices,g=_.nestestValue}else{if(y=f.indicesOfNearest(o,v[0],a,n.type==="category"?.5:null),!y.length)return;g=f.getData().get(v[0],y[0])}if(!(g==null||!isFinite(g))){var S=a-g,b=Math.abs(S);b<=u&&((b<u||S>=0&&c<0)&&(u=b,c=S,s=g,l.length=0),each$f(y,function(x){l.push({seriesIndex:f.seriesIndex,dataIndexInside:x,dataIndex:f.getData().getRawIndex(x)})}))}}),{payloadBatch:l,snapToValue:s}}function showPointer(a,r,n,o){a[r.key]={value:n,payloadBatch:o}}function showTooltip(a,r,n,o){var s=n.payloadBatch,l=r.axis,u=l.model,c=r.axisPointerModel;if(!(!r.triggerTooltip||!s.length)){var f=r.coordSys.model,d=makeKey(f),v=a.map[d];v||(v=a.map[d]={coordSysId:f.id,coordSysIndex:f.componentIndex,coordSysType:f.type,coordSysMainType:f.mainType,dataByAxis:[]},a.list.push(v)),v.dataByAxis.push({axisDim:l.dim,axisIndex:u.componentIndex,axisType:u.type,axisId:u.id,value:o,valueLabelOpt:{precision:c.get(["label","precision"]),formatter:c.get(["label","formatter"])},seriesDataIndices:s.slice()})}}function updateModelActually(a,r,n){var o=n.axesInfo=[];each$f(r,function(s,l){var u=s.axisPointerModel.option,c=a[l];c?(!s.useHandle&&(u.status="show"),u.value=c.value,u.seriesDataIndices=(c.payloadBatch||[]).slice()):!s.useHandle&&(u.status="hide"),u.status==="show"&&o.push({axisDim:s.axis.dim,axisIndex:s.axis.model.componentIndex,value:u.value})})}function dispatchTooltipActually(a,r,n,o){if(illegalPoint(r)||!a.list.length){o({type:"hideTip"});return}var s=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};o({type:"showTip",escapeConnect:!0,x:r[0],y:r[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:s.dataIndexInside,dataIndex:s.dataIndex,seriesIndex:s.seriesIndex,dataByCoordSys:a.list})}function dispatchHighDownActually(a,r,n){var o=n.getZr(),s="axisPointerLastHighlights",l=inner$9(o)[s]||{},u=inner$9(o)[s]={};each$f(a,function(d,v){var g=d.axisPointerModel.option;g.status==="show"&&d.triggerEmphasis&&each$f(g.seriesDataIndices,function(y){var _=y.seriesIndex+" | "+y.dataIndex;u[_]=y})});var c=[],f=[];each$f(l,function(d,v){!u[v]&&f.push(d)}),each$f(u,function(d,v){!l[v]&&c.push(d)}),f.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:f}),c.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:c})}function findInputAxisInfo(a,r){for(var n=0;n<(a||[]).length;n++){var o=a[n];if(r.axis.dim===o.axisDim&&r.axis.model.componentIndex===o.axisIndex)return o}}function makeMapperParam(a){var r=a.axis.model,n={},o=n.axisDim=a.axis.dim;return n.axisIndex=n[o+"AxisIndex"]=r.componentIndex,n.axisName=n[o+"AxisName"]=r.name,n.axisId=n[o+"AxisId"]=r.id,n}function illegalPoint(a){return!a||a[0]==null||isNaN(a[0])||a[1]==null||isNaN(a[1])}function install$s(a){AxisView.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer),a.registerComponentModel(AxisPointerModel),a.registerComponentView(AxisPointerView),a.registerPreprocessor(function(r){if(r){(!r.axisPointer||r.axisPointer.length===0)&&(r.axisPointer={});var n=r.axisPointer.link;n&&!isArray$1(n)&&(r.axisPointer.link=[n])}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,function(r,n){r.getComponent("axisPointer").coordSysAxesInfo=collect(r,n)}),a.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$r(a){use(install$Q),use(install$s)}var PolarAxisPointer=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.makeElOption=function(n,o,s,l,u){var c=s.axis;c.dim==="angle"&&(this.animationThreshold=Math.PI/18);var f=c.polar,d=f.getOtherAxis(c),v=d.getExtent(),g=c.dataToCoord(o),y=l.get("type");if(y&&y!=="none"){var _=buildElStyle(l),S=pointerShapeBuilder$1[y](c,f,g,v);S.style=_,n.graphicKey=S.type,n.pointer=S}var b=l.get(["label","margin"]),x=getLabelPosition(o,s,l,f,b);buildLabelElOption(n,s,l,u,x)},r}(BaseAxisPointer);function getLabelPosition(a,r,n,o,s){var l=r.axis,u=l.dataToCoord(a),c=o.getAngleAxis().getExtent()[0];c=c/180*Math.PI;var f=o.getRadiusAxis().getExtent(),d,v,g;if(l.dim==="radius"){var y=create$1();rotate(y,y,c),translate(y,y,[o.cx,o.cy]),d=applyTransform([u,-s],y);var _=r.getModel("axisLabel").get("rotate")||0,S=AxisBuilder.innerTextLayout(c,_*Math.PI/180,-1);v=S.textAlign,g=S.textVerticalAlign}else{var b=f[1];d=o.coordToPoint([b+s,u]);var x=o.cx,T=o.cy;v=Math.abs(d[0]-x)/b<.3?"center":d[0]>x?"left":"right",g=Math.abs(d[1]-T)/b<.3?"middle":d[1]>T?"top":"bottom"}return{position:d,align:v,verticalAlign:g}}var pointerShapeBuilder$1={line:function(a,r,n,o){return a.dim==="angle"?{type:"Line",shape:makeLineShape(r.coordToPoint([o[0],n]),r.coordToPoint([o[1],n]))}:{type:"Circle",shape:{cx:r.cx,cy:r.cy,r:n}}},shadow:function(a,r,n,o){var s=Math.max(1,a.getBandWidth()),l=Math.PI/180;return a.dim==="angle"?{type:"Sector",shape:makeSectorShape(r.cx,r.cy,o[0],o[1],(-n-s/2)*l,(-n+s/2)*l)}:{type:"Sector",shape:makeSectorShape(r.cx,r.cy,n-s/2,n+s/2,0,Math.PI*2)}}},PolarModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.findAxisModel=function(n){var o,s=this.ecModel;return s.eachComponent(n,function(l){l.getCoordSysModel()===this&&(o=l)},this),o},r.type="polar",r.dependencies=["radiusAxis","angleAxis"],r.defaultOption={z:0,center:["50%","50%"],radius:"80%"},r}(ComponentModel),PolarAxisModel=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},r.type="polarAxis",r}(ComponentModel);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.type="angleAxis",r}(PolarAxisModel),RadiusAxisModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.type="radiusAxis",r}(PolarAxisModel),RadiusAxis=function(a){__extends(r,a);function r(n,o){return a.call(this,"radius",n,o)||this}return r.prototype.pointToData=function(n,o){return this.polar.pointToData(n,o)[this.dim==="radius"?0:1]},r}(Axis);RadiusAxis.prototype.dataToRadius=Axis.prototype.dataToCoord;RadiusAxis.prototype.radiusToData=Axis.prototype.coordToData;var inner$8=makeInner(),AngleAxis=function(a){__extends(r,a);function r(n,o){return a.call(this,"angle",n,o||[0,360])||this}return r.prototype.pointToData=function(n,o){return this.polar.pointToData(n,o)[this.dim==="radius"?0:1]},r.prototype.calculateCategoryInterval=function(){var n=this,o=n.getLabelModel(),s=n.scale,l=s.getExtent(),u=s.count();if(l[1]-l[0]<1)return 0;var c=l[0],f=n.dataToCoord(c+1)-n.dataToCoord(c),d=Math.abs(f),v=getBoundingRect(c==null?"":c+"",o.getFont(),"center","top"),g=Math.max(v.height,7),y=g/d;isNaN(y)&&(y=1/0);var _=Math.max(0,Math.floor(y)),S=inner$8(n.model),b=S.lastAutoInterval,x=S.lastTickCount;return b!=null&&x!=null&&Math.abs(b-_)<=1&&Math.abs(x-u)<=1&&b>_?_=b:(S.lastTickCount=u,S.lastAutoInterval=_),_},r}(Axis);AngleAxis.prototype.dataToAngle=Axis.prototype.dataToCoord;AngleAxis.prototype.angleToData=Axis.prototype.coordToData;var polarDimensions=["radius","angle"],Polar=function(){function a(r){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis,this._angleAxis=new AngleAxis,this.axisPointerEnabled=!0,this.name=r||"",this._radiusAxis.polar=this._angleAxis.polar=this}return a.prototype.containPoint=function(r){var n=this.pointToCoord(r);return this._radiusAxis.contain(n[0])&&this._angleAxis.contain(n[1])},a.prototype.containData=function(r){return this._radiusAxis.containData(r[0])&&this._angleAxis.containData(r[1])},a.prototype.getAxis=function(r){var n="_"+r+"Axis";return this[n]},a.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},a.prototype.getAxesByScale=function(r){var n=[],o=this._angleAxis,s=this._radiusAxis;return o.scale.type===r&&n.push(o),s.scale.type===r&&n.push(s),n},a.prototype.getAngleAxis=function(){return this._angleAxis},a.prototype.getRadiusAxis=function(){return this._radiusAxis},a.prototype.getOtherAxis=function(r){var n=this._angleAxis;return r===n?this._radiusAxis:n},a.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},a.prototype.getTooltipAxes=function(r){var n=r!=null&&r!=="auto"?this.getAxis(r):this.getBaseAxis();return{baseAxes:[n],otherAxes:[this.getOtherAxis(n)]}},a.prototype.dataToPoint=function(r,n,o){return this.coordToPoint([this._radiusAxis.dataToRadius(r[0],n),this._angleAxis.dataToAngle(r[1],n)],o)},a.prototype.pointToData=function(r,n,o){o=o||[];var s=this.pointToCoord(r);return o[0]=this._radiusAxis.radiusToData(s[0],n),o[1]=this._angleAxis.angleToData(s[1],n),o},a.prototype.pointToCoord=function(r){var n=r[0]-this.cx,o=r[1]-this.cy,s=this.getAngleAxis(),l=s.getExtent(),u=Math.min(l[0],l[1]),c=Math.max(l[0],l[1]);s.inverse?u=c-360:c=u+360;var f=Math.sqrt(n*n+o*o);n/=f,o/=f;for(var d=Math.atan2(-o,n)/Math.PI*180,v=d<u?1:-1;d<u||d>c;)d+=v*360;return[f,d]},a.prototype.coordToPoint=function(r,n){n=n||[];var o=r[0],s=r[1]/180*Math.PI;return n[0]=Math.cos(s)*o+this.cx,n[1]=-Math.sin(s)*o+this.cy,n},a.prototype.getArea=function(){var r=this.getAngleAxis(),n=this.getRadiusAxis(),o=n.getExtent().slice();o[0]>o[1]&&o.reverse();var s=r.getExtent(),l=Math.PI/180,u=1e-4;return{cx:this.cx,cy:this.cy,r0:o[0],r:o[1],startAngle:-s[0]*l,endAngle:-s[1]*l,clockwise:r.inverse,contain:function(c,f){var d=c-this.cx,v=f-this.cy,g=d*d+v*v,y=this.r,_=this.r0;return y!==_&&g-u<=y*y&&g+u>=_*_},x:this.cx-o[1],y:this.cy-o[1],width:o[1]*2,height:o[1]*2}},a.prototype.convertToPixel=function(r,n,o){var s=getCoordSys$3(n);return s===this?this.dataToPoint(o):null},a.prototype.convertFromPixel=function(r,n,o){var s=getCoordSys$3(n);return s===this?this.pointToData(o):null},a}();function getCoordSys$3(a){var r=a.seriesModel,n=a.polarModel;return n&&n.coordinateSystem||r&&r.coordinateSystem}function resizePolar(a,r,n){var o=r.get("center"),s=createBoxLayoutReference(r,n).refContainer;a.cx=parsePercent(o[0],s.width)+s.x,a.cy=parsePercent(o[1],s.height)+s.y;var l=a.getRadiusAxis(),u=Math.min(s.width,s.height)/2,c=r.get("radius");c==null?c=[0,"100%"]:isArray$1(c)||(c=[0,c]);var f=[parsePercent(c[0],u),parsePercent(c[1],u)];l.inverse?l.setExtent(f[1],f[0]):l.setExtent(f[0],f[1])}function updatePolarScale(a,r){var n=this,o=n.getAngleAxis(),s=n.getRadiusAxis();if(o.scale.setExtent(1/0,-1/0),s.scale.setExtent(1/0,-1/0),a.eachSeries(function(c){if(c.coordinateSystem===n){var f=c.getData();each$f(getDataDimensionsOnAxis(f,"radius"),function(d){s.scale.unionExtentFromData(f,d)}),each$f(getDataDimensionsOnAxis(f,"angle"),function(d){o.scale.unionExtentFromData(f,d)})}}),niceScaleExtent(o.scale,o.model),niceScaleExtent(s.scale,s.model),o.type==="category"&&!o.onBand){var l=o.getExtent(),u=360/o.scale.count();o.inverse?l[1]+=u:l[1]-=u,o.setExtent(l[0],l[1])}}function isAngleAxisModel(a){return a.mainType==="angleAxis"}function setAxis(a,r){var n;if(a.type=r.get("type"),a.scale=createScaleByModel$1(r),a.onBand=r.get("boundaryGap")&&a.type==="category",a.inverse=r.get("inverse"),isAngleAxisModel(r)){a.inverse=a.inverse!==r.get("clockwise");var o=r.get("startAngle"),s=(n=r.get("endAngle"))!==null&&n!==void 0?n:o+(a.inverse?-360:360);a.setExtent(o,s)}r.axis=a,a.model=r}var polarCreator={dimensions:polarDimensions,create:function(a,r){var n=[];return a.eachComponent("polar",function(o,s){var l=new Polar(s+"");l.update=updatePolarScale;var u=l.getRadiusAxis(),c=l.getAngleAxis(),f=o.findAxisModel("radiusAxis"),d=o.findAxisModel("angleAxis");setAxis(u,f),setAxis(c,d),resizePolar(l,o,r),n.push(l),o.coordinateSystem=l,l.model=o}),a.eachSeries(function(o){if(o.get("coordinateSystem")==="polar"){var s=o.getReferringComponents("polar",SINGLE_REFERRING).models[0];o.coordinateSystem=s.coordinateSystem}}),n}},elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(a,r,n){r[1]>r[0]&&(r=r.slice().reverse());var o=a.coordToPoint([r[0],n]),s=a.coordToPoint([r[1],n]);return{x1:o[0],y1:o[1],x2:s[0],y2:s[1]}}function getRadiusIdx(a){var r=a.getRadiusAxis();return r.inverse?0:1}function fixAngleOverlap(a){var r=a[0],n=a[a.length-1];r&&n&&Math.abs(Math.abs(r.coord-n.coord)-360)<1e-4&&a.pop()}var AngleAxisView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.axisPointerClass="PolarAxisPointer",n}return r.prototype.render=function(n,o){if(this.group.removeAll(),!!n.get("show")){var s=n.axis,l=s.polar,u=l.getRadiusAxis().getExtent(),c=s.getTicksCoords({breakTicks:"none"}),f=s.getMinorTicksCoords(),d=map$1(s.getViewLabels(),function(v){v=clone$4(v);var g=s.scale,y=g.type==="ordinal"?g.getRawOrdinalNumber(v.tickValue):v.tickValue;return v.coord=s.dataToCoord(y),v});fixAngleOverlap(d),fixAngleOverlap(c),each$f(elementList,function(v){n.get([v,"show"])&&(!s.scale.isBlank()||v==="axisLine")&&angelAxisElementsBuilders[v](this.group,n,l,c,f,u,d)},this)}},r.type="angleAxis",r}(AxisView),angelAxisElementsBuilders={axisLine:function(a,r,n,o,s,l){var u=r.getModel(["axisLine","lineStyle"]),c=n.getAngleAxis(),f=Math.PI/180,d=c.getExtent(),v=getRadiusIdx(n),g=v?0:1,y,_=Math.abs(d[1]-d[0])===360?"Circle":"Arc";l[g]===0?y=new graphic[_]({shape:{cx:n.cx,cy:n.cy,r:l[v],startAngle:-d[0]*f,endAngle:-d[1]*f,clockwise:c.inverse},style:u.getLineStyle(),z2:1,silent:!0}):y=new Ring({shape:{cx:n.cx,cy:n.cy,r:l[v],r0:l[g]},style:u.getLineStyle(),z2:1,silent:!0}),y.style.fill=null,a.add(y)},axisTick:function(a,r,n,o,s,l){var u=r.getModel("axisTick"),c=(u.get("inside")?-1:1)*u.get("length"),f=l[getRadiusIdx(n)],d=map$1(o,function(v){return new Line$1({shape:getAxisLineShape(n,[f,f+c],v.coord)})});a.add(mergePath(d,{style:defaults(u.getModel("lineStyle").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})}))},minorTick:function(a,r,n,o,s,l){if(s.length){for(var u=r.getModel("axisTick"),c=r.getModel("minorTick"),f=(u.get("inside")?-1:1)*c.get("length"),d=l[getRadiusIdx(n)],v=[],g=0;g<s.length;g++)for(var y=0;y<s[g].length;y++)v.push(new Line$1({shape:getAxisLineShape(n,[d,d+f],s[g][y].coord)}));a.add(mergePath(v,{style:defaults(c.getModel("lineStyle").getLineStyle(),defaults(u.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(a,r,n,o,s,l,u){var c=r.getCategories(!0),f=r.getModel("axisLabel"),d=f.get("margin"),v=r.get("triggerEvent");each$f(u,function(g,y){var _=f,S=g.tickValue,b=l[getRadiusIdx(n)],x=n.coordToPoint([b+d,g.coord]),T=n.cx,A=n.cy,w=Math.abs(x[0]-T)/b<.3?"center":x[0]>T?"left":"right",C=Math.abs(x[1]-A)/b<.3?"middle":x[1]>A?"top":"bottom";if(c&&c[S]){var E=c[S];isObject$3(E)&&E.textStyle&&(_=new Model(E.textStyle,f,f.ecModel))}var P=new ZRText({silent:AxisBuilder.isLabelSilent(r),style:createTextStyle(_,{x:x[0],y:x[1],fill:_.getTextColor()||r.get(["axisLine","lineStyle","color"]),text:g.formattedLabel,align:w,verticalAlign:C})});if(a.add(P),setTooltipConfig({el:P,componentModel:r,itemName:g.formattedLabel,formatterParamsExtra:{isTruncated:function(){return P.isTruncated},value:g.rawLabel,tickIndex:y}}),v){var I=AxisBuilder.makeAxisEventDataBase(r);I.targetType="axisLabel",I.value=g.rawLabel,getECData(P).eventData=I}},this)},splitLine:function(a,r,n,o,s,l){var u=r.getModel("splitLine"),c=u.getModel("lineStyle"),f=c.get("color"),d=0;f=f instanceof Array?f:[f];for(var v=[],g=0;g<o.length;g++){var y=d++%f.length;v[y]=v[y]||[],v[y].push(new Line$1({shape:getAxisLineShape(n,l,o[g].coord)}))}for(var g=0;g<v.length;g++)a.add(mergePath(v[g],{style:defaults({stroke:f[g%f.length]},c.getLineStyle()),silent:!0,z:r.get("z")}))},minorSplitLine:function(a,r,n,o,s,l){if(s.length){for(var u=r.getModel("minorSplitLine"),c=u.getModel("lineStyle"),f=[],d=0;d<s.length;d++)for(var v=0;v<s[d].length;v++)f.push(new Line$1({shape:getAxisLineShape(n,l,s[d][v].coord)}));a.add(mergePath(f,{style:c.getLineStyle(),silent:!0,z:r.get("z")}))}},splitArea:function(a,r,n,o,s,l){if(o.length){var u=r.getModel("splitArea"),c=u.getModel("areaStyle"),f=c.get("color"),d=0;f=f instanceof Array?f:[f];for(var v=[],g=Math.PI/180,y=-o[0].coord*g,_=Math.min(l[0],l[1]),S=Math.max(l[0],l[1]),b=r.get("clockwise"),x=1,T=o.length;x<=T;x++){var A=x===T?o[0].coord:o[x].coord,w=d++%f.length;v[w]=v[w]||[],v[w].push(new Sector({shape:{cx:n.cx,cy:n.cy,r0:_,r:S,startAngle:y,endAngle:-A*g,clockwise:b},silent:!0})),y=-A*g}for(var x=0;x<v.length;x++)a.add(mergePath(v[x],{style:defaults({fill:f[x%f.length]},c.getAreaStyle()),silent:!0}))}}},selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.axisPointerClass="PolarAxisPointer",n}return r.prototype.render=function(n,o,s){if(this.group.removeAll(),!!n.get("show")){var l=this._axisGroup,u=this._axisGroup=new Group$3;this.group.add(u);var c=n.axis,f=c.polar,d=f.getAngleAxis(),v=c.getTicksCoords(),g=c.getMinorTicksCoords(),y=d.getExtent()[0],_=c.getExtent(),S=layoutAxis(f,n,y),b=new AxisBuilder(n,s,S);b.build(),u.add(b.group),groupTransition(l,u,n),each$f(selfBuilderAttrs$1,function(x){n.get([x,"show"])&&!c.scale.isBlank()&&axisElementBuilders$1[x](this.group,n,f,y,_,v,g)},this)}},r.type="radiusAxis",r}(AxisView),axisElementBuilders$1={splitLine:function(a,r,n,o,s,l){var u=r.getModel("splitLine"),c=u.getModel("lineStyle"),f=c.get("color"),d=0,v=n.getAngleAxis(),g=Math.PI/180,y=v.getExtent(),_=Math.abs(y[1]-y[0])===360?"Circle":"Arc";f=f instanceof Array?f:[f];for(var S=[],b=0;b<l.length;b++){var x=d++%f.length;S[x]=S[x]||[],S[x].push(new graphic[_]({shape:{cx:n.cx,cy:n.cy,r:Math.max(l[b].coord,0),startAngle:-y[0]*g,endAngle:-y[1]*g,clockwise:v.inverse}}))}for(var b=0;b<S.length;b++)a.add(mergePath(S[b],{style:defaults({stroke:f[b%f.length],fill:null},c.getLineStyle()),silent:!0}))},minorSplitLine:function(a,r,n,o,s,l,u){if(u.length){for(var c=r.getModel("minorSplitLine"),f=c.getModel("lineStyle"),d=[],v=0;v<u.length;v++)for(var g=0;g<u[v].length;g++)d.push(new Circle({shape:{cx:n.cx,cy:n.cy,r:u[v][g].coord}}));a.add(mergePath(d,{style:defaults({fill:null},f.getLineStyle()),silent:!0}))}},splitArea:function(a,r,n,o,s,l){if(l.length){var u=r.getModel("splitArea"),c=u.getModel("areaStyle"),f=c.get("color"),d=0;f=f instanceof Array?f:[f];for(var v=[],g=l[0].coord,y=1;y<l.length;y++){var _=d++%f.length;v[_]=v[_]||[],v[_].push(new Sector({shape:{cx:n.cx,cy:n.cy,r0:g,r:l[y].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),g=l[y].coord}for(var y=0;y<v.length;y++)a.add(mergePath(v[y],{style:defaults({fill:f[y%f.length]},c.getAreaStyle()),silent:!0}))}}};function layoutAxis(a,r,n){return{position:[a.cx,a.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:r.getModel("axisLabel").get("rotate"),z2:1}}function getSeriesStackId(a){return a.get("stack")||"__ec_stack_"+a.seriesIndex}function getAxisKey(a,r){return r.dim+a.model.componentIndex}function barLayoutPolar(a,r,n){var o={},s=calRadialBar(filter(r.getSeriesByType(a),function(l){return!r.isSeriesFiltered(l)&&l.coordinateSystem&&l.coordinateSystem.type==="polar"}));r.eachSeriesByType(a,function(l){if(l.coordinateSystem.type==="polar"){var u=l.getData(),c=l.coordinateSystem,f=c.getBaseAxis(),d=getAxisKey(c,f),v=getSeriesStackId(l),g=s[d][v],y=g.offset,_=g.width,S=c.getOtherAxis(f),b=l.coordinateSystem.cx,x=l.coordinateSystem.cy,T=l.get("barMinHeight")||0,A=l.get("barMinAngle")||0;o[v]=o[v]||[];for(var w=u.mapDimension(S.dim),C=u.mapDimension(f.dim),E=isDimensionStacked(u,w),P=f.dim!=="radius"||!l.get("roundCap",!0),I=S.model,M=I.get("startValue"),R=S.dataToCoord(M||0),O=0,$=u.count();O<$;O++){var B=u.get(w,O),F=u.get(C,O),z=B>=0?"p":"n",G=R;E&&(o[v][F]||(o[v][F]={p:R,n:R}),G=o[v][F][z]);var D=void 0,V=void 0,L=void 0,N=void 0;if(S.dim==="radius"){var U=S.dataToCoord(B)-R,H=f.dataToCoord(F);Math.abs(U)<T&&(U=(U<0?-1:1)*T),D=G,V=G+U,L=H-y,N=L-_,E&&(o[v][F][z]=V)}else{var q=S.dataToCoord(B,P)-R,Z=f.dataToCoord(F);Math.abs(q)<A&&(q=(q<0?-1:1)*A),D=Z+y,V=D+_,L=G,N=G+q,E&&(o[v][F][z]=N)}u.setItemLayout(O,{cx:b,cy:x,r0:D,r:V,startAngle:-L*Math.PI/180,endAngle:-N*Math.PI/180,clockwise:L>=N})}}})}function calRadialBar(a){var r={};each$f(a,function(o,s){var l=o.getData(),u=o.coordinateSystem,c=u.getBaseAxis(),f=getAxisKey(u,c),d=c.getExtent(),v=c.type==="category"?c.getBandWidth():Math.abs(d[1]-d[0])/l.count(),g=r[f]||{bandWidth:v,remainedWidth:v,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},y=g.stacks;r[f]=g;var _=getSeriesStackId(o);y[_]||g.autoWidthCount++,y[_]=y[_]||{width:0,maxWidth:0};var S=parsePercent(o.get("barWidth"),v),b=parsePercent(o.get("barMaxWidth"),v),x=o.get("barGap"),T=o.get("barCategoryGap");S&&!y[_].width&&(S=Math.min(g.remainedWidth,S),y[_].width=S,g.remainedWidth-=S),b&&(y[_].maxWidth=b),x!=null&&(g.gap=x),T!=null&&(g.categoryGap=T)});var n={};return each$f(r,function(o,s){n[s]={};var l=o.stacks,u=o.bandWidth,c=parsePercent(o.categoryGap,u),f=parsePercent(o.gap,1),d=o.remainedWidth,v=o.autoWidthCount,g=(d-c)/(v+(v-1)*f);g=Math.max(g,0),each$f(l,function(b,x){var T=b.maxWidth;T&&T<g&&(T=Math.min(T,d),b.width&&(T=Math.min(T,b.width)),d-=T,b.width=T,v--)}),g=(d-c)/(v+(v-1)*f),g=Math.max(g,0);var y=0,_;each$f(l,function(b,x){b.width||(b.width=g),_=b,y+=b.width*(1+f)}),_&&(y-=_.width*f);var S=-y/2;each$f(l,function(b,x){n[s][x]=n[s][x]||{offset:S,width:b.width},S+=b.width*(1+f)})}),n}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.type="polar",r}(ComponentView);function install$q(a){use(install$s),AxisView.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer),a.registerCoordinateSystem("polar",polarCreator),a.registerComponentModel(PolarModel),a.registerComponentView(PolarView),axisModelCreator(a,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(a,"radius",RadiusAxisModel,radiusAxisExtraOption),a.registerComponentView(AngleAxisView),a.registerComponentView(RadiusAxisView),a.registerLayout(curry$1(barLayoutPolar,"bar"))}function layout(a,r){r=r||{};var n=a.coordinateSystem,o=a.axis,s={},l=o.position,u=o.orient,c=n.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],d={horizontal:{top:f[2],bottom:f[3]},vertical:{left:f[0],right:f[1]}};s.position=[u==="vertical"?d.vertical[l]:f[0],u==="horizontal"?d.horizontal[l]:f[3]];var v={horizontal:0,vertical:1};s.rotation=Math.PI/2*v[u];var g={top:-1,bottom:1,right:1,left:-1};s.labelDirection=s.tickDirection=s.nameDirection=g[l],a.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),retrieve(r.labelInside,a.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var y=a.get(["axisLabel","rotate"]);return s.labelRotate=l==="top"?-y:y,s.z2=1,s}var selfBuilderAttrs=["splitArea","splitLine","breakArea"],SingleAxisView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.axisPointerClass="SingleAxisPointer",n}return r.prototype.render=function(n,o,s,l){var u=this.group;u.removeAll();var c=this._axisGroup;this._axisGroup=new Group$3;var f=layout(n),d=new AxisBuilder(n,s,f);d.build(),u.add(this._axisGroup),u.add(d.group),each$f(selfBuilderAttrs,function(v){n.get([v,"show"])&&axisElementBuilders[v](this,this.group,this._axisGroup,n,s)},this),groupTransition(c,this._axisGroup,n),a.prototype.render.call(this,n,o,s,l)},r.prototype.remove=function(){rectCoordAxisHandleRemove(this)},r.type="singleAxis",r}(AxisView),axisElementBuilders={splitLine:function(a,r,n,o,s){var l=o.axis;if(!l.scale.isBlank()){var u=o.getModel("splitLine"),c=u.getModel("lineStyle"),f=c.get("color");f=f instanceof Array?f:[f];for(var d=c.get("width"),v=o.coordinateSystem.getRect(),g=l.isHorizontal(),y=[],_=0,S=l.getTicksCoords({tickModel:u,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),b=[],x=[],T=0;T<S.length;++T){var A=l.toGlobalCoord(S[T].coord);g?(b[0]=A,b[1]=v.y,x[0]=A,x[1]=v.y+v.height):(b[0]=v.x,b[1]=A,x[0]=v.x+v.width,x[1]=A);var w=new Line$1({shape:{x1:b[0],y1:b[1],x2:x[0],y2:x[1]},silent:!0});subPixelOptimizeLine(w.shape,d);var C=_++%f.length;y[C]=y[C]||[],y[C].push(w)}for(var E=c.getLineStyle(["color"]),T=0;T<y.length;++T)r.add(mergePath(y[T],{style:defaults({stroke:f[T%f.length]},E),silent:!0}))}},splitArea:function(a,r,n,o,s){rectCoordAxisBuildSplitArea(a,n,o,o)},breakArea:function(a,r,n,o,s){var l=getAxisBreakHelper(),u=o.axis.scale;l&&u.type!=="ordinal"&&l.rectCoordBuildBreakAxis(r,a,o,o.coordinateSystem.getRect(),s)}},SingleAxisModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.getCoordSysModel=function(){return this},r.type="singleAxis",r.layoutMode="box",r.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}},jitter:0,jitterOverlap:!0,jitterMargin:2},r}(ComponentModel);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);var SingleAxis=function(a){__extends(r,a);function r(n,o,s,l,u){var c=a.call(this,n,o,s)||this;return c.type=l||"value",c.position=u||"bottom",c}return r.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},r.prototype.pointToData=function(n,o){return this.coordinateSystem.pointToData(n)[0]},r}(Axis),singleDimensions=["single"],Single=function(){function a(r,n,o){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=r,this._init(r,n,o)}return a.prototype._init=function(r,n,o){var s=this.dimension,l=new SingleAxis(s,createScaleByModel$1(r),[0,0],r.get("type"),r.get("position")),u=l.type==="category";l.onBand=u&&r.get("boundaryGap"),l.inverse=r.get("inverse"),l.orient=r.get("orient"),r.axis=l,l.model=r,l.coordinateSystem=this,this._axis=l},a.prototype.update=function(r,n){r.eachSeries(function(o){if(o.coordinateSystem===this){var s=o.getData();each$f(s.mapDimensionsAll(this.dimension),function(l){this._axis.scale.unionExtentFromData(s,l)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},a.prototype.resize=function(r,n){var o=createBoxLayoutReference(r,n).refContainer;this._rect=getLayoutRect(r.getBoxLayoutParams(),o),this._adjustAxis()},a.prototype.getRect=function(){return this._rect},a.prototype._adjustAxis=function(){var r=this._rect,n=this._axis,o=n.isHorizontal(),s=o?[0,r.width]:[0,r.height],l=n.inverse?1:0;n.setExtent(s[l],s[1-l]),this._updateAxisTransform(n,o?r.x:r.y)},a.prototype._updateAxisTransform=function(r,n){var o=r.getExtent(),s=o[0]+o[1],l=r.isHorizontal();r.toGlobalCoord=l?function(u){return u+n}:function(u){return s-u+n},r.toLocalCoord=l?function(u){return u-n}:function(u){return s-u+n}},a.prototype.getAxis=function(){return this._axis},a.prototype.getBaseAxis=function(){return this._axis},a.prototype.getAxes=function(){return[this._axis]},a.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},a.prototype.containPoint=function(r){var n=this.getRect(),o=this.getAxis(),s=o.orient;return s==="horizontal"?o.contain(o.toLocalCoord(r[0]))&&r[1]>=n.y&&r[1]<=n.y+n.height:o.contain(o.toLocalCoord(r[1]))&&r[0]>=n.y&&r[0]<=n.y+n.height},a.prototype.pointToData=function(r,n,o){o=o||[];var s=this.getAxis();return o[0]=s.coordToData(s.toLocalCoord(r[s.orient==="horizontal"?0:1])),o},a.prototype.dataToPoint=function(r,n,o){var s=this.getAxis(),l=this.getRect();o=o||[];var u=s.orient==="horizontal"?0:1;return r instanceof Array&&(r=r[0]),o[u]=s.toGlobalCoord(s.dataToCoord(+r)),o[1-u]=u===0?l.y+l.height/2:l.x+l.width/2,o},a.prototype.convertToPixel=function(r,n,o){var s=getCoordSys$2(n);return s===this?this.dataToPoint(o):null},a.prototype.convertFromPixel=function(r,n,o){var s=getCoordSys$2(n);return s===this?this.pointToData(o):null},a}();function getCoordSys$2(a){var r=a.seriesModel,n=a.singleAxisModel;return n&&n.coordinateSystem||r&&r.coordinateSystem}function create(a,r){var n=[];return a.eachComponent("singleAxis",function(o,s){var l=new Single(o,a,r);l.name="single_"+s,l.resize(o,r),o.coordinateSystem=l,n.push(l)}),a.eachSeries(function(o){if(o.get("coordinateSystem")==="singleAxis"){var s=o.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];o.coordinateSystem=s&&s.coordinateSystem}}),n}var singleCreator={create,dimensions:singleDimensions},XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.makeElOption=function(n,o,s,l,u){var c=s.axis,f=c.coordinateSystem,d=getGlobalExtent(f,1-getPointDimIndex(c)),v=f.dataToPoint(o)[0],g=l.get("type");if(g&&g!=="none"){var y=buildElStyle(l),_=pointerShapeBuilder[g](c,v,d);_.style=y,n.graphicKey=_.type,n.pointer=_}var S=layout(s);buildCartesianSingleLabelElOption(o,n,S,s,l,u)},r.prototype.getHandleTransform=function(n,o,s){var l=layout(o,{labelInside:!1});l.labelMargin=s.get(["handle","margin"]);var u=getTransformedPosition(o.axis,n,l);return{x:u[0],y:u[1],rotation:l.rotation+(l.labelDirection<0?Math.PI:0)}},r.prototype.updateHandleTransform=function(n,o,s,l){var u=s.axis,c=u.coordinateSystem,f=getPointDimIndex(u),d=getGlobalExtent(c,f),v=[n.x,n.y];v[f]+=o[f],v[f]=Math.min(d[1],v[f]),v[f]=Math.max(d[0],v[f]);var g=getGlobalExtent(c,1-f),y=(g[1]+g[0])/2,_=[y,y];return _[f]=v[f],{x:v[0],y:v[1],rotation:n.rotation,cursorPoint:_,tooltipOption:{verticalAlign:"middle"}}},r}(BaseAxisPointer),pointerShapeBuilder={line:function(a,r,n){var o=makeLineShape([r,n[0]],[r,n[1]],getPointDimIndex(a));return{type:"Line",subPixelOptimize:!0,shape:o}},shadow:function(a,r,n){var o=a.getBandWidth(),s=n[1]-n[0];return{type:"Rect",shape:makeRectShape([r-o/2,n[0]],[o,s],getPointDimIndex(a))}}};function getPointDimIndex(a){return a.isHorizontal()?0:1}function getGlobalExtent(a,r){var n=a.getRect();return[n[XY$1[r]],n[XY$1[r]]+n[WH$1[r]]]}var SingleView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.type="single",r}(ComponentView);function install$p(a){use(install$s),AxisView.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer),a.registerComponentView(SingleView),a.registerComponentView(SingleAxisView),a.registerComponentModel(SingleAxisModel),axisModelCreator(a,"single",SingleAxisModel,SingleAxisModel.defaultOption),a.registerCoordinateSystem("single",singleCreator)}var CalendarModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.init=function(n,o,s){var l=getLayoutParams(n);a.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(n,l)},r.prototype.mergeOption=function(n){a.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,n)},r.prototype.getCellSize=function(){return this.option.cellSize},r.type="calendar",r.layoutMode="box",r.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:tokens.color.axisLine,width:1,type:"solid"}},itemStyle:{color:tokens.color.neutral00,borderWidth:1,borderColor:tokens.color.neutral10},dayLabel:{show:!0,firstDay:0,position:"start",margin:tokens.size.s,color:tokens.color.secondary},monthLabel:{show:!0,position:"start",margin:tokens.size.s,align:"center",formatter:null,color:tokens.color.secondary},yearLabel:{show:!0,position:null,margin:tokens.size.xl,formatter:null,color:tokens.color.quaternary,fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},r}(ComponentModel);function mergeAndNormalizeLayoutParams$1(a,r){var n=a.cellSize,o;isArray$1(n)?o=n:o=a.cellSize=[n,n],o.length===1&&(o[1]=o[0]);var s=map$1([0,1],function(l){return sizeCalculable(r,l)&&(o[l]="auto"),o[l]!=null&&o[l]!=="auto"});mergeLayoutParam(a,r,{type:"box",ignoreSize:s})}var CalendarView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s){var l=this.group;l.removeAll();var u=n.coordinateSystem,c=u.getRangeInfo(),f=u.getOrient(),d=o.getLocaleModel();this._renderDayRect(n,c,l),this._renderLines(n,c,f,l),this._renderYearText(n,c,f,l),this._renderMonthText(n,d,f,l),this._renderWeekText(n,d,c,f,l)},r.prototype._renderDayRect=function(n,o,s){for(var l=n.coordinateSystem,u=n.getModel("itemStyle").getItemStyle(),c=l.getCellWidth(),f=l.getCellHeight(),d=o.start.time;d<=o.end.time;d=l.getNextNDay(d,1).time){var v=l.dataToCalendarLayout([d],!1).tl,g=new Rect$2({shape:{x:v[0],y:v[1],width:c,height:f},cursor:"default",style:u});s.add(g)}},r.prototype._renderLines=function(n,o,s,l){var u=this,c=n.coordinateSystem,f=n.getModel(["splitLine","lineStyle"]).getLineStyle(),d=n.get(["splitLine","show"]),v=f.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var g=o.start,y=0;g.time<=o.end.time;y++){S(g.formatedDate),y===0&&(g=c.getDateInfo(o.start.y+"-"+o.start.m));var _=g.date;_.setMonth(_.getMonth()+1),g=c.getDateInfo(_)}S(c.getNextNDay(o.end.time,1).formatedDate);function S(b){u._firstDayOfMonth.push(c.getDateInfo(b)),u._firstDayPoints.push(c.dataToCalendarLayout([b],!1).tl);var x=u._getLinePointsOfOneWeek(n,b,s);u._tlpoints.push(x[0]),u._blpoints.push(x[x.length-1]),d&&u._drawSplitline(x,f,l)}d&&this._drawSplitline(u._getEdgesPoints(u._tlpoints,v,s),f,l),d&&this._drawSplitline(u._getEdgesPoints(u._blpoints,v,s),f,l)},r.prototype._getEdgesPoints=function(n,o,s){var l=[n[0].slice(),n[n.length-1].slice()],u=s==="horizontal"?0:1;return l[0][u]=l[0][u]-o/2,l[1][u]=l[1][u]+o/2,l},r.prototype._drawSplitline=function(n,o,s){var l=new Polyline$1({z2:20,shape:{points:n},style:o});s.add(l)},r.prototype._getLinePointsOfOneWeek=function(n,o,s){for(var l=n.coordinateSystem,u=l.getDateInfo(o),c=[],f=0;f<7;f++){var d=l.getNextNDay(u.time,f),v=l.dataToCalendarLayout([d.time],!1);c[2*d.day]=v.tl,c[2*d.day+1]=v[s==="horizontal"?"bl":"tr"]}return c},r.prototype._formatterLabel=function(n,o){return isString(n)&&n?formatTplSimple(n,o):isFunction(n)?n(o):o.nameMap},r.prototype._yearTextPositionControl=function(n,o,s,l,u){var c=o[0],f=o[1],d=["center","bottom"];l==="bottom"?(f+=u,d=["center","top"]):l==="left"?c-=u:l==="right"?(c+=u,d=["center","top"]):f-=u;var v=0;return(l==="left"||l==="right")&&(v=Math.PI/2),{rotation:v,x:c,y:f,style:{align:d[0],verticalAlign:d[1]}}},r.prototype._renderYearText=function(n,o,s,l){var u=n.getModel("yearLabel");if(u.get("show")){var c=u.get("margin"),f=u.get("position");f||(f=s!=="horizontal"?"top":"left");var d=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],v=(d[0][0]+d[1][0])/2,g=(d[0][1]+d[1][1])/2,y=s==="horizontal"?0:1,_={top:[v,d[y][1]],bottom:[v,d[1-y][1]],left:[d[1-y][0],g],right:[d[y][0],g]},S=o.start.y;+o.end.y>+o.start.y&&(S=S+"-"+o.end.y);var b=u.get("formatter"),x={start:o.start.y,end:o.end.y,nameMap:S},T=this._formatterLabel(b,x),A=new ZRText({z2:30,style:createTextStyle(u,{text:T}),silent:u.get("silent")});A.attr(this._yearTextPositionControl(A,_[f],s,f,c)),l.add(A)}},r.prototype._monthTextPositionControl=function(n,o,s,l,u){var c="left",f="top",d=n[0],v=n[1];return s==="horizontal"?(v=v+u,o&&(c="center"),l==="start"&&(f="bottom")):(d=d+u,o&&(f="middle"),l==="start"&&(c="right")),{x:d,y:v,align:c,verticalAlign:f}},r.prototype._renderMonthText=function(n,o,s,l){var u=n.getModel("monthLabel");if(u.get("show")){var c=u.get("nameMap"),f=u.get("margin"),d=u.get("position"),v=u.get("align"),g=[this._tlpoints,this._blpoints];(!c||isString(c))&&(c&&(o=getLocaleModel(c)||o),c=o.get(["time","monthAbbr"])||[]);var y=d==="start"?0:1,_=s==="horizontal"?0:1;f=d==="start"?-f:f;for(var S=v==="center",b=u.get("silent"),x=0;x<g[y].length-1;x++){var T=g[y][x].slice(),A=this._firstDayOfMonth[x];if(S){var w=this._firstDayPoints[x];T[_]=(w[_]+g[0][x+1][_])/2}var C=u.get("formatter"),E=c[+A.m-1],P={yyyy:A.y,yy:(A.y+"").slice(2),MM:A.m,M:+A.m,nameMap:E},I=this._formatterLabel(C,P),M=new ZRText({z2:30,style:extend(createTextStyle(u,{text:I}),this._monthTextPositionControl(T,S,s,d,f)),silent:b});l.add(M)}}},r.prototype._weekTextPositionControl=function(n,o,s,l,u){var c="center",f="middle",d=n[0],v=n[1],g=s==="start";return o==="horizontal"?(d=d+l+(g?1:-1)*u[0]/2,c=g?"right":"left"):(v=v+l+(g?1:-1)*u[1]/2,f=g?"bottom":"top"),{x:d,y:v,align:c,verticalAlign:f}},r.prototype._renderWeekText=function(n,o,s,l,u){var c=n.getModel("dayLabel");if(c.get("show")){var f=n.coordinateSystem,d=c.get("position"),v=c.get("nameMap"),g=c.get("margin"),y=f.getFirstDayOfWeek();if(!v||isString(v)){v&&(o=getLocaleModel(v)||o);var _=o.get(["time","dayOfWeekShort"]);v=_||map$1(o.get(["time","dayOfWeekAbbr"]),function(P){return P[0]})}var S=f.getNextNDay(s.end.time,7-s.lweek).time,b=[f.getCellWidth(),f.getCellHeight()];g=parsePercent(g,Math.min(b[1],b[0])),d==="start"&&(S=f.getNextNDay(s.start.time,-(7+s.fweek)).time,g=-g);for(var x=c.get("silent"),T=0;T<7;T++){var A=f.getNextNDay(S,T),w=f.dataToCalendarLayout([A.time],!1).center,C=T;C=Math.abs((T+y)%7);var E=new ZRText({z2:30,style:extend(createTextStyle(c,{text:v[C]}),this._weekTextPositionControl(w,l,d,g,b)),silent:x});u.add(E)}}},r.type="calendar",r}(ComponentView),PROXIMATE_ONE_DAY=864e5,Calendar=function(){function a(r,n,o){this.type="calendar",this.dimensions=a.dimensions,this.getDimensionsInfo=a.getDimensionsInfo,this._model=r,this._update(n,o)}return a.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},a.prototype.getRangeInfo=function(){return this._rangeInfo},a.prototype.getModel=function(){return this._model},a.prototype.getRect=function(){return this._rect},a.prototype.getCellWidth=function(){return this._sw},a.prototype.getCellHeight=function(){return this._sh},a.prototype.getOrient=function(){return this._orient},a.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},a.prototype.getDateInfo=function(r){r=parseDate(r);var n=r.getFullYear(),o=r.getMonth()+1,s=o<10?"0"+o:""+o,l=r.getDate(),u=l<10?"0"+l:""+l,c=r.getDay();return c=Math.abs((c+7-this.getFirstDayOfWeek())%7),{y:n+"",m:s,d:u,day:c,time:r.getTime(),formatedDate:n+"-"+s+"-"+u,date:r}},a.prototype.getNextNDay=function(r,n){return n=n||0,n===0?this.getDateInfo(r):(r=new Date(this.getDateInfo(r).time),r.setDate(r.getDate()+n),this.getDateInfo(r))},a.prototype._update=function(r,n){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var o=this._rangeInfo.weeks||1,s=["width","height"],l=this._model.getCellSize().slice(),u=this._model.getBoxLayoutParams(),c=this._orient==="horizontal"?[o,7]:[7,o];each$f([0,1],function(g){v(l,g)&&(u[s[g]]=l[g]*c[g])});var f={width:n.getWidth(),height:n.getHeight()},d=this._rect=getLayoutRect(u,f);each$f([0,1],function(g){v(l,g)||(l[g]=d[s[g]]/c[g])});function v(g,y){return g[y]!=null&&g[y]!=="auto"}this._sw=l[0],this._sh=l[1]},a.prototype.dataToPoint=function(r,n,o){o=o||[],isArray$1(r)&&(r=r[0]),n==null&&(n=!0);var s=this.getDateInfo(r),l=this._rangeInfo,u=s.formatedDate;if(n&&!(s.time>=l.start.time&&s.time<l.end.time+PROXIMATE_ONE_DAY))return o[0]=o[1]=NaN,o;var c=s.day,f=this._getRangeInfo([l.start.time,u]).nthWeek;return this._orient==="vertical"?(o[0]=this._rect.x+c*this._sw+this._sw/2,o[1]=this._rect.y+f*this._sh+this._sh/2):(o[0]=this._rect.x+f*this._sw+this._sw/2,o[1]=this._rect.y+c*this._sh+this._sh/2),o},a.prototype.pointToData=function(r){var n=this.pointToDate(r);return n&&n.time},a.prototype.dataToLayout=function(r,n,o){o=o||{};var s=o.rect=o.rect||{},l=o.contentRect=o.contentRect||{},u=this.dataToPoint(r,n);return s.x=u[0]-this._sw/2,s.y=u[1]-this._sh/2,s.width=this._sw,s.height=this._sh,BoundingRect.copy(l,s),expandOrShrinkRect(l,this._lineWidth/2,!0,!0),o},a.prototype.dataToCalendarLayout=function(r,n){var o=this.dataToPoint(r,n);return{center:o,tl:[o[0]-this._sw/2,o[1]-this._sh/2],tr:[o[0]+this._sw/2,o[1]-this._sh/2],br:[o[0]+this._sw/2,o[1]+this._sh/2],bl:[o[0]-this._sw/2,o[1]+this._sh/2]}},a.prototype.pointToDate=function(r){var n=Math.floor((r[0]-this._rect.x)/this._sw)+1,o=Math.floor((r[1]-this._rect.y)/this._sh)+1,s=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(o,n-1,s):this._getDateByWeeksAndDay(n,o-1,s)},a.prototype.convertToPixel=function(r,n,o){var s=getCoordSys$1(n);return s===this?s.dataToPoint(o):null},a.prototype.convertToLayout=function(r,n,o){var s=getCoordSys$1(n);return s===this?s.dataToLayout(o):null},a.prototype.convertFromPixel=function(r,n,o){var s=getCoordSys$1(n);return s===this?s.pointToData(o):null},a.prototype.containPoint=function(r){return console.warn("Not implemented."),!1},a.prototype._initRangeOption=function(){var r=this._model.get("range"),n;if(isArray$1(r)&&r.length===1&&(r=r[0]),isArray$1(r))n=r;else{var o=r.toString();if(/^\d{4}$/.test(o)&&(n=[o+"-01-01",o+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(o)){var s=this.getDateInfo(o),l=s.date;l.setMonth(l.getMonth()+1);var u=this.getNextNDay(l,-1);n=[s.formatedDate,u.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(o)&&(n=[o,o])}if(!n)return r;var c=this._getRangeInfo(n);return c.start.time>c.end.time&&n.reverse(),n},a.prototype._getRangeInfo=function(r){var n=[this.getDateInfo(r[0]),this.getDateInfo(r[1])],o;n[0].time>n[1].time&&(o=!0,n.reverse());var s=Math.floor(n[1].time/PROXIMATE_ONE_DAY)-Math.floor(n[0].time/PROXIMATE_ONE_DAY)+1,l=new Date(n[0].time),u=l.getDate(),c=n[1].date.getDate();l.setDate(u+s-1);var f=l.getDate();if(f!==c)for(var d=l.getTime()-n[1].time>0?1:-1;(f=l.getDate())!==c&&(l.getTime()-n[1].time)*d>0;)s-=d,l.setDate(f-d);var v=Math.floor((s+n[0].day+6)/7),g=o?-v+1:v-1;return o&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:s,weeks:v,nthWeek:g,fweek:n[0].day,lweek:n[1].day}},a.prototype._getDateByWeeksAndDay=function(r,n,o){var s=this._getRangeInfo(o);if(r>s.weeks||r===0&&n<s.fweek||r===s.weeks&&n>s.lweek)return null;var l=(r-1)*7-s.fweek+n,u=new Date(s.start.time);return u.setDate(+s.start.d+l),this.getDateInfo(u)},a.create=function(r,n){var o=[];return r.eachComponent("calendar",function(s){var l=new a(s,r,n);o.push(l),s.coordinateSystem=l}),r.eachComponent(function(s,l){injectCoordSysByOption({targetModel:l,coordSysType:"calendar",coordSysProvider:simpleCoordSysInjectionProvider})}),o},a.dimensions=["time","value"],a}();function getCoordSys$1(a){var r=a.calendarModel,n=a.seriesModel,o=r?r.coordinateSystem:n?n.coordinateSystem:null;return o}function install$o(a){a.registerComponentModel(CalendarModel),a.registerComponentView(CalendarView),a.registerCoordinateSystem("calendar",Calendar)}var MatrixCellLayoutInfoType={level:1,leaf:2,nonLeaf:3},MatrixClampOption={none:0,all:1,body:2,corner:3};function coordDataToAllCellLevelLayout(a,r,n){var o=r[XY$2[n]].getCell(a);return!o&&isNumber(a)&&a<0&&(o=r[XY$2[1-n]].getUnitLayoutInfo(n,Math.round(a))),o}function resetXYLocatorRange(a){var r=a||[];return r[0]=r[0]||[],r[1]=r[1]||[],r[0][0]=r[0][1]=r[1][0]=r[1][1]=NaN,r}function parseCoordRangeOption(a,r,n,o,s){parseCoordRangeOptionOnOneDim(a[0],r,s,n,o,0),parseCoordRangeOptionOnOneDim(a[1],r,s,n,o,1)}function parseCoordRangeOptionOnOneDim(a,r,n,o,s,l){a[0]=1/0,a[1]=-1/0;var u=o[l],c=isArray$1(u)?u:[u],f=c.length,d=!!n;if(f>=1?(parseCoordRangeOptionOnOneDimOnePart(a,r,c,d,s,l,0),f>1&&parseCoordRangeOptionOnOneDimOnePart(a,r,c,d,s,l,f-1)):a[0]=a[1]=NaN,d){var v=-s[XY$2[1-l]].getLocatorCount(l),g=s[XY$2[l]].getLocatorCount(l)-1;n===MatrixClampOption.body?v=mathMax$a(0,v):n===MatrixClampOption.corner&&(g=mathMin$a(-1,g)),g<v&&(v=g=NaN),eqNaN(a[0])&&(a[0]=v),eqNaN(a[1])&&(a[1]=g),a[0]=mathMax$a(mathMin$a(a[0],g),v),a[1]=mathMax$a(mathMin$a(a[1],g),v)}}function parseCoordRangeOptionOnOneDimOnePart(a,r,n,o,s,l,u){var c=coordDataToAllCellLevelLayout(n[u],s,l);if(!c){a[0]=a[1]=NaN;return}var f=c.id[XY$2[l]],d=f,v=cellLayoutInfoToDimCell(c);v&&(d+=v.span[XY$2[l]]-1),a[0]=mathMin$a(a[0],f,d),a[1]=mathMax$a(a[1],f,d)}function isXYLocatorRangeInvalidOnDim(a,r){return eqNaN(a[r][0])||eqNaN(a[r][1])}function resolveXYLocatorRangeByCellMerge(a,r,n,o){r=r||_tmpOutMergedMarkList;for(var s=0;s<o;s++)r[s]=!1;for(;;){for(var l=!1,s=0;s<o;s++){var u=n[s];!r[s]&&u.cellMergeOwner&&expandXYLocatorRangeIfIntersect(a,u.locatorRange)&&(r[s]=!0,l=!0)}if(!l)break}}var _tmpOutMergedMarkList=[];function expandXYLocatorRangeIfIntersect(a,r){return!locatorRangeIntersectOneDim(a[0],r[0])||!locatorRangeIntersectOneDim(a[1],r[1])?!1:(a[0][0]=mathMin$a(a[0][0],r[0][0]),a[0][1]=mathMax$a(a[0][1],r[0][1]),a[1][0]=mathMin$a(a[1][0],r[1][0]),a[1][1]=mathMax$a(a[1][1],r[1][1]),!0)}function locatorRangeIntersectOneDim(a,r){return a[1]>=r[0]&&a[0]<=r[1]}function fillIdSpanFromLocatorRange(a,r){a.id.set(r[0][0],r[1][0]),a.span.set(r[0][1]-a.id.x+1,r[1][1]-a.id.y+1)}function cloneXYLocatorRange(a,r){a[0][0]=r[0][0],a[0][1]=r[0][1],a[1][0]=r[1][0],a[1][1]=r[1][1]}function xyLocatorRangeToRectOneDim(a,r,n,o){var s=coordDataToAllCellLevelLayout(r[o][0],n,o),l=coordDataToAllCellLevelLayout(r[o][1],n,o);a[XY$2[o]]=a[WH$2[o]]=NaN,s&&l&&(a[XY$2[o]]=s.xy,a[WH$2[o]]=l.xy+l.wh-s.xy)}function setDimXYValue(a,r,n,o){return a[XY$2[r]]=n,a[XY$2[1-r]]=o,a}function cellLayoutInfoToDimCell(a){return a&&(a.type===MatrixCellLayoutInfoType.leaf||a.type===MatrixCellLayoutInfoType.nonLeaf)?a:null}function createNaNRectLike(){return{x:NaN,y:NaN,width:NaN,height:NaN}}var MatrixDim=function(){function a(r,n){this._cells=[],this._levels=[],this.dim=r,this.dimIdx=r==="x"?0:1,this._model=n,this._uniqueValueGen=createUniqueValueGenerator(r);var o=n.get("data",!0);o!=null&&!isArray$1(o)&&(o=[]),o?this._initByDimModelData(o):this._initBySeriesData()}return a.prototype._initByDimModelData=function(r){var n=this,o=n._cells,s=n._levels,l=[],u=0;n._leavesCount=c(r,0,0),f();return;function c(d,v,g){var y=0;return d&&each$f(d,function(_,S){var b;isString(_)?b={value:_}:isObject$3(_)?(b=_,_.value!=null&&!isString(_.value)&&(b={value:null})):b={value:null};var x={type:MatrixCellLayoutInfoType.nonLeaf,ordinal:NaN,level:g,firstLeafLocator:v,id:new Point,span:setDimXYValue(new Point,n.dimIdx,1,1),option:b,xy:NaN,wh:NaN,dim:n,rect:createNaNRectLike()};u++,(l[v]||(l[v]=[])).push(x),s[g]||(s[g]={type:MatrixCellLayoutInfoType.level,xy:NaN,wh:NaN,option:null,id:new Point,dim:n});var T=c(b.children,v,g+1),A=Math.max(1,T);x.span[XY$2[n.dimIdx]]=A,y+=A,v+=A}),y}function f(){for(var d=[];o.length<u;)for(var v=0;v<l.length;v++){var g=l[v].pop();if(g){g.ordinal=d.length;var y=g.option.value;d.push(y),o.push(g),n._uniqueValueGen.calcDupBase(y)}}n._uniqueValueGen.ensureValueUnique(d,o);var _=n._ordinalMeta=new OrdinalMeta({categories:d,needCollect:!1,deduplication:!1});n._scale=new OrdinalScale({ordinalMeta:_});for(var S=0;S<n._leavesCount;S++){var b=n._cells[S];b.type=MatrixCellLayoutInfoType.leaf,b.span[XY$2[1-n.dimIdx]]=n._levels.length-b.level}n._initCellsId(),n._initLevelIdOptions()}},a.prototype._initBySeriesData=function(){var r=this;r._leavesCount=0,r._levels=[{type:MatrixCellLayoutInfoType.level,xy:NaN,wh:NaN,option:null,id:new Point,dim:r}],r._initLevelIdOptions();var n=r._ordinalMeta=new OrdinalMeta({needCollect:!0,deduplication:!0,onCollect:function(o,s){var l=r._cells[s]={type:MatrixCellLayoutInfoType.leaf,ordinal:s,level:0,firstLeafLocator:s,id:new Point,span:setDimXYValue(new Point,r.dimIdx,1,1),option:{value:o+""},xy:NaN,wh:NaN,dim:r,rect:createNaNRectLike()};r._leavesCount++,r._setCellId(l)}});r._scale=new OrdinalScale({ordinalMeta:n})},a.prototype._setCellId=function(r){var n=this._levels.length,o=this.dimIdx;setDimXYValue(r.id,o,r.firstLeafLocator,r.level-n)},a.prototype._initCellsId=function(){var r=this._levels.length,n=this.dimIdx;each$f(this._cells,function(o){setDimXYValue(o.id,n,o.firstLeafLocator,o.level-r)})},a.prototype._initLevelIdOptions=function(){var r=this._levels.length,n=this.dimIdx,o=this._model.get("levels",!0);o=isArray$1(o)?o:[],each$f(this._levels,function(s,l){setDimXYValue(s.id,n,0,l-r),s.option=o[l]})},a.prototype.shouldShow=function(){return!!this._model.getShallow("show",!0)},a.prototype.resetLayoutIterator=function(r,n,o,s){if(r=r||new ListIterator,n===this.dimIdx){var l=this._leavesCount,u=o!=null?Math.max(0,o):0;s=s!=null?Math.min(s,l):l,r.reset(this._cells,u,u+s)}else{var l=this._levels.length,u=o!=null?Math.max(0,o+l):0;s=s!=null?Math.min(s,l):l,r.reset(this._levels,u,u+s)}return r},a.prototype.resetCellIterator=function(r){return(r||new ListIterator).reset(this._cells,0)},a.prototype.resetLevelIterator=function(r){return(r||new ListIterator).reset(this._levels,0)},a.prototype.getLayout=function(r,n,o){var s=this.getUnitLayoutInfo(n,o);r[XY$2[n]]=s?s.xy:NaN,r[WH$2[n]]=s?s.wh:NaN},a.prototype.getUnitLayoutInfo=function(r,n){return r===this.dimIdx?n<this._leavesCount?this._cells[n]:void 0:this._levels[n+this._levels.length]},a.prototype.getCell=function(r){var n=this._scale.parse(r);return eqNaN(n)?void 0:this._cells[n]},a.prototype.getLocatorCount=function(r){return r===this.dimIdx?this._leavesCount:this._levels.length},a.prototype.getOrdinalMeta=function(){return this._ordinalMeta},a}();function createUniqueValueGenerator(a){var r=a.toUpperCase(),n=new RegExp("^"+r+"([0-9]+)$"),o=0;function s(c){var f;c!=null&&(f=c.match(n))&&(o=mathMax$a(o,+f[1]+1))}function l(){return""+r+o++}function u(c,f){for(var d=createHashMap(),v=0;v<c.length;v++){var g=c[v];(g==null||d.get(g)!=null)&&(c[v]=g=l(),f[v].option=defaults({value:g},f[v].option)),d.set(g,!0)}}return{calcDupBase:s,ensureValueUnique:u}}var MatrixBodyCorner=function(){function a(r,n,o){this._model=n,this._dims=o,this._kind=r,this._cellMergeOwnerList=[]}return a.prototype._ensureCellMap=function(){var r=this,n=r._cellMap;return n||(n=r._cellMap=createHashMap(),o()),n;function o(){var l=[],u=r._model.getShallow("data");u&&!isArray$1(u)&&(u=null),each$f(u,function(S,b){if(!(!isObject$3(S)||!isArray$1(S.coord))){var x=resetXYLocatorRange([]),T=null;if(parseCoordRangeOption(x,T,S.coord,r._dims,S.coordClamp?MatrixClampOption[r._kind]:MatrixClampOption.none),!(isXYLocatorRangeInvalidOnDim(x,0)||isXYLocatorRangeInvalidOnDim(x,1))){var A=S&&S.mergeCells,w={id:new Point,span:new Point,locatorRange:x,option:S,cellMergeOwner:A};fillIdSpanFromLocatorRange(w,x),l.push(w)}}});for(var c=[],f=0;f<l.length;f++){var d=l[f];if(d.cellMergeOwner){var v=d.locatorRange;resolveXYLocatorRangeByCellMerge(v,c,l,f);for(var g=0;g<f;g++)c[g]&&(l[g].cellMergeOwner=!1);if(v[0][0]!==d.id.x||v[1][0]!==d.id.y){d.cellMergeOwner=!1;var y=extend({},d.option);y.coord=null;var _={id:new Point,span:new Point,locatorRange:v,option:y,cellMergeOwner:!0};fillIdSpanFromLocatorRange(_,v),l.push(_)}}}each$f(l,function(S){var b=s(S.id.x,S.id.y);if(S.cellMergeOwner&&(b.cellMergeOwner=!0,b.span=S.span,b.locatorRange=S.locatorRange,b.spanRect=createNaNRectLike(),r._cellMergeOwnerList.push(b)),!(!S.cellMergeOwner&&!S.option))for(var x=0;x<S.span.y;x++)for(var T=0;T<S.span.x;T++){var A=s(S.id.x+T,S.id.y+x);A.option=S.option,S.cellMergeOwner&&(A.inSpanOf=b)}})}function s(l,u){var c=makeCellMapKey(l,u),f=n.get(c);return f||(f=n.set(c,{id:new Point(l,u),option:null,inSpanOf:null,span:null,spanRect:null,locatorRange:null,cellMergeOwner:!1})),f}},a.prototype.getCell=function(r){return this._ensureCellMap().get(makeCellMapKey(r[0],r[1]))},a.prototype.travelExistingCells=function(r){this._ensureCellMap().each(r)},a.prototype.expandRangeByCellMerge=function(r){if(!isXYLocatorRangeInvalidOnDim(r,0)&&!isXYLocatorRangeInvalidOnDim(r,1)&&r[0][0]===r[0][1]&&r[1][0]===r[1][1]){_tmpERBCMLocator[0]=r[0][0],_tmpERBCMLocator[1]=r[1][0];var n=this.getCell(_tmpERBCMLocator),o=n&&n.inSpanOf;if(o){cloneXYLocatorRange(r,o.locatorRange);return}}var s=this._cellMergeOwnerList;resolveXYLocatorRangeByCellMerge(r,null,s,s.length)},a}(),_tmpERBCMLocator=[];function makeCellMapKey(a,r){return a+"|"+r}var defaultLabelOption={show:!0,color:tokens.color.secondary,overflow:"break",lineOverflow:"truncate",padding:[2,3,2,3],distance:0};function makeDefaultCellItemStyleOption(a){return{color:"none",borderWidth:1,borderColor:a?"none":tokens.color.borderTint}}var defaultDimOption={show:!0,label:defaultLabelOption,itemStyle:makeDefaultCellItemStyleOption(!1),silent:void 0,dividerLineStyle:{width:1,color:tokens.color.border}},defaultBodyOption={label:defaultLabelOption,itemStyle:makeDefaultCellItemStyleOption(!1),silent:void 0},defaultCornerOption={label:defaultLabelOption,itemStyle:makeDefaultCellItemStyleOption(!0),silent:void 0},defaultMatrixOption={z:-50,left:"10%",top:"10%",right:"10%",bottom:"10%",x:defaultDimOption,y:defaultDimOption,body:defaultBodyOption,corner:defaultCornerOption,backgroundStyle:{color:"none",borderColor:tokens.color.axisLine,borderWidth:1}},MatrixModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.optionUpdated=function(){var n=this._dimModels={x:new MatrixDimensionModel(this.get("x",!0)||{}),y:new MatrixDimensionModel(this.get("y",!0)||{})};n.x.option.type=n.y.option.type="category";var o=n.x.dim=new MatrixDim("x",n.x),s=n.y.dim=new MatrixDim("y",n.y),l={x:o,y:s};this._body=new MatrixBodyCorner("body",new Model(this.getShallow("body")),l),this._corner=new MatrixBodyCorner("corner",new Model(this.getShallow("corner")),l)},r.prototype.getDimensionModel=function(n){return this._dimModels[n]},r.prototype.getBody=function(){return this._body},r.prototype.getCorner=function(){return this._corner},r.type="matrix",r.layoutMode="box",r.defaultOption=defaultMatrixOption,r}(ComponentModel),MatrixDimensionModel=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getOrdinalMeta=function(){return this.dim.getOrdinalMeta()},r}(Model),round=Math.round,Z2_BACKGROUND=0,Z2_OUTER_BORDER=99,Z2_BODY_CORNER_CELL_DEFAULT={normal:25,special:100},Z2_DIMENSION_CELL_DEFAULT={normal:50,special:125},MatrixView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o){this.group.removeAll();var s=this.group,l=n.coordinateSystem,u=l.getRect(),c=n.getDimensionModel("x"),f=n.getDimensionModel("y"),d=c.dim,v=f.dim;renderDimensionCells(s,n,o),createBodyAndCorner(s,n,d,v,o);var g=n.getShallow("borderZ2",!0),y=retrieve2(g,Z2_OUTER_BORDER),_=y-1,S=n.getModel("backgroundStyle").getItemStyle(["borderWidth"]);S.lineWidth=0;var b=n.getModel("backgroundStyle").getItemStyle(["color","decal","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]);b.fill="none";var x=createMatrixRect(u.clone(),S,Z2_BACKGROUND),T=createMatrixRect(u.clone(),b,y);x.silent=!0,T.silent=!0,s.add(x),s.add(T);var A=d.getUnitLayoutInfo(0,0),w=v.getUnitLayoutInfo(1,0);A&&w&&(d.shouldShow()&&s.add(createMatrixLine({x1:u.x,y1:w.xy,x2:u.x+u.width,y2:w.xy},c.getModel("dividerLineStyle").getLineStyle(),_)),v.shouldShow()&&s.add(createMatrixLine({x1:A.xy,y1:u.y,x2:A.xy,y2:u.y+u.height},f.getModel("dividerLineStyle").getLineStyle(),_)))},r.type="matrix",r}(ComponentView);function renderDimensionCells(a,r,n){o(0),o(1);function o(s){var l=r.getDimensionModel(XY$2[s]),u=l.dim;if(u.shouldShow())for(var c=l.getModel("itemStyle"),f=l.getModel("label"),d=r.getShallow("tooltip",!0),v=[],g=u.resetCellIterator();g.next();){var y=g.item,_={};BoundingRect.copy(_,y.rect),set$1(v,y.id.x,y.id.y),createMatrixCell(v,r,a,n,y.option,c,f,l,_,y.option.value,Z2_DIMENSION_CELL_DEFAULT,d)}}}function createBodyAndCorner(a,r,n,o,s){l("body",r.getBody(),n,o),n.shouldShow()&&o.shouldShow()&&l("corner",r.getCorner(),o,n);function l(u,c,f,d){var v=new Model(r.getShallow(u,!0)),g=v.getModel("itemStyle"),y=v.getModel("label"),_=new ListIterator,S=new ListIterator,b=[],x=r.getShallow("tooltip",!0);for(d.resetLayoutIterator(S,1);S.next();)for(f.resetLayoutIterator(_,0);_.next();){var T=_.item,A=S.item;set$1(b,T.id.x,A.id.y);var w=c.getCell(b);if(!(w&&w.inSpanOf&&w.inSpanOf!==w)){var C={};w&&w.span?BoundingRect.copy(C,w.spanRect):(T.dim.getLayout(C,0,b[0]),A.dim.getLayout(C,1,b[1]));var E=w?w.option:null;createMatrixCell(b,r,a,s,E,g,y,v,C,E?E.value:null,Z2_BODY_CORNER_CELL_DEFAULT,x)}}}}function createMatrixCell(a,r,n,o,s,l,u,c,f,d,v,g){var y;_tmpCellItemStyleModel.option=s?s.itemStyle:null,_tmpCellItemStyleModel.parentModel=l,_tmpCellModel.option=s,_tmpCellModel.parentModel=c;var _=retrieve2(_tmpCellModel.getShallow("z2"),s&&s.itemStyle?v.special:v.normal),S=g&&g.show,b=createMatrixRect(f,_tmpCellItemStyleModel.getItemStyle(),_);n.add(b);var x=_tmpCellModel.get("cursor");x!=null&&b.attr("cursor",x);var T;if(d!=null){var A=d+"";if(_tmpCellLabelModel.option=s?s.label:null,_tmpCellLabelModel.parentModel=u,_tmpCellLabelModel.ecModel=o,setLabelStyle(b,{normal:_tmpCellLabelModel},{defaultText:A,autoOverflowArea:!0,layoutRect:clone$4(b.shape)}),T=b.getTextContent(),T){T.z2=_+1;var w=T.style;if(w&&w.overflow&&w.overflow!=="none"&&w.lineOverflow){var C={};BoundingRect.copy(C,f),expandOrShrinkRect(C,(((y=b.style)===null||y===void 0?void 0:y.lineWidth)||0)/2,!0,!0),b.updateInnerText(),T.getLocalTransform(_tmpInnerTextTrans),invert(_tmpInnerTextTrans,_tmpInnerTextTrans),BoundingRect.applyTransform(C,C,_tmpInnerTextTrans),T.setClipPath(new Rect$2({shape:C}))}}setTooltipConfig({el:b,componentModel:r,itemName:A,itemTooltipOption:g,formatterParamsExtra:{xyLocator:a.slice()}})}if(T){var E=_tmpCellLabelModel.get("silent");E==null&&(E=!S),T.silent=E,T.ignoreHostSilent=!0}var P=_tmpCellModel.get("silent");P==null&&(P=!b.style||b.style.fill==="none"||!b.style.fill),b.silent=P,clearTmpModel(_tmpCellModel),clearTmpModel(_tmpCellItemStyleModel),clearTmpModel(_tmpCellLabelModel)}var _tmpCellModel=new Model,_tmpCellItemStyleModel=new Model,_tmpCellLabelModel=new Model,_tmpInnerTextTrans=[];function createMatrixRect(a,r,n){var o=r.lineWidth;if(o){var s=a.x+a.width,l=a.y+a.height;a.x=subPixelOptimize$1(a.x,o,!0),a.y=subPixelOptimize$1(a.y,o,!0),a.width=subPixelOptimize$1(s,o,!0)-a.x,a.height=subPixelOptimize$1(l,o,!0)-a.y}return new Rect$2({shape:a,style:r,z2:n})}function createMatrixLine(a,r,n){var o=r.lineWidth;return o&&(round(a.x1*2)===round(a.x2*2)&&(a.x1=a.x2=subPixelOptimize$1(a.x1,o,!0)),round(a.y1*2)===round(a.y2*2)&&(a.y1=a.y2=subPixelOptimize$1(a.y1,o,!0))),new Line$1({shape:a,style:r,silent:!0,z2:n})}var Matrix=function(){function a(r,n,o){this.dimensions=a.dimensions,this.type="matrix",this._model=r;var s=this._dimModels={x:r.getDimensionModel("x"),y:r.getDimensionModel("y")};this._dims={x:s.x.dim,y:s.y.dim},this._resize(r,o)}return a.getDimensionsInfo=function(){return[{name:"x",type:"ordinal"},{name:"y",type:"ordinal"},{name:"value"}]},a.create=function(r,n){var o=[];return r.eachComponent("matrix",function(s){var l=new a(s,r,n);o.push(l),s.coordinateSystem=l}),r.eachComponent(function(s,l){injectCoordSysByOption({targetModel:l,coordSysType:"matrix",coordSysProvider:simpleCoordSysInjectionProvider})}),o},a.prototype.getRect=function(){return this._rect},a.prototype._resize=function(r,n){var o=this._dims,s=this._dimModels,l=this._rect=getLayoutRect(r.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()});layOutUnitsOnDimension(s,o,l,0),layOutUnitsOnDimension(s,o,l,1),layOutDimCellsRestInfoByUnit(0,o),layOutDimCellsRestInfoByUnit(1,o),layOutBodyCornerCellMerge(this._model.getBody(),o),layOutBodyCornerCellMerge(this._model.getCorner(),o)},a.prototype.dataToPoint=function(r,n,o){return o=o||[],this.dataToLayout(r,n,_dtpOutDataToLayout),o[0]=_dtpOutDataToLayout.rect.x+_dtpOutDataToLayout.rect.width/2,o[1]=_dtpOutDataToLayout.rect.y+_dtpOutDataToLayout.rect.height/2,o},a.prototype.dataToLayout=function(r,n,o){var s=this._dims;o=o||{};var l=o.rect=o.rect||{};l.x=l.y=l.width=l.height=NaN;var u=o.matrixXYLocatorRange=resetXYLocatorRange(o.matrixXYLocatorRange);return isArray$1(r)&&(parseCoordRangeOption(u,null,r,s,retrieve2(n&&n.clamp,MatrixClampOption.none)),(!n||!n.ignoreMergeCells)&&((!n||n.clamp!==MatrixClampOption.corner)&&this._model.getBody().expandRangeByCellMerge(u),(!n||n.clamp!==MatrixClampOption.body)&&this._model.getCorner().expandRangeByCellMerge(u)),xyLocatorRangeToRectOneDim(l,u,s,0),xyLocatorRangeToRectOneDim(l,u,s,1)),o},a.prototype.pointToData=function(r,n,o){var s=this._dims;return pointToDataOneDimPrepareCtx(_tmpCtxPointToData,0,s,r,n&&n.clamp),pointToDataOneDimPrepareCtx(_tmpCtxPointToData,1,s,r,n&&n.clamp),o=o||[],o[0]=o[1]=NaN,_tmpCtxPointToData.y===CtxPointToDataAreaType.inCorner&&_tmpCtxPointToData.x===CtxPointToDataAreaType.inBody?pointToDataOnlyHeaderFillOut(_tmpCtxPointToData,o,0,s):_tmpCtxPointToData.x===CtxPointToDataAreaType.inCorner&&_tmpCtxPointToData.y===CtxPointToDataAreaType.inBody?pointToDataOnlyHeaderFillOut(_tmpCtxPointToData,o,1,s):(pointToDataBodyCornerFillOut(_tmpCtxPointToData,o,0,s),pointToDataBodyCornerFillOut(_tmpCtxPointToData,o,1,s)),o},a.prototype.convertToPixel=function(r,n,o,s){var l=getCoordSys(n);return l===this?l.dataToPoint(o,s):void 0},a.prototype.convertToLayout=function(r,n,o,s){var l=getCoordSys(n);return l===this?l.dataToLayout(o,s):void 0},a.prototype.convertFromPixel=function(r,n,o,s){var l=getCoordSys(n);return l===this?l.pointToData(o,s):void 0},a.prototype.containPoint=function(r){return this._rect.contain(r[0],r[1])},a.dimensions=["x","y","value"],a}(),_dtpOutDataToLayout={rect:createNaNRectLike()},_ptdLevelIt=new ListIterator,_ptdDimCellIt=new ListIterator;function layOutUnitsOnDimension(a,r,n,o){for(var s=1-o,l=r[XY$2[o]],u=r[XY$2[s]],c=u.shouldShow(),f=l.resetCellIterator();f.next();)f.item.wh=f.item.xy=NaN;for(var d=u.resetLayoutIterator(null,o);d.next();)d.item.wh=d.item.xy=NaN;for(var v=n[WH$2[o]],g=l.getLocatorCount(o)+u.getLocatorCount(o),y=new Model,_=u.resetLevelIterator();_.next();)y.option=_.item.option,y.parentModel=a[XY$2[s]],x(_.item,c?y.get("levelSize"):0);for(var S=new Model,b=l.resetCellIterator();b.next();)b.item.type===MatrixCellLayoutInfoType.leaf&&(S.option=b.item.option,S.parentModel=void 0,x(b.item,S.get("size")));function x(I,M){var R=parseSizeOption(M,o,n);eqNaN(R)||(I.wh=confineSize(R,v),v=confineSize(v-I.wh),g--)}var T=g?v/g:0,A=!g&&v>=1,w=n[XY$2[o]],C=l.getLocatorCount(o)-1,E=new ListIterator;for(u.resetLayoutIterator(E,o);E.next();)P(E.item);for(l.resetLayoutIterator(E,o);E.next();)P(E.item);function P(I){eqNaN(I.wh)&&(I.wh=T),I.xy=w,I.id[XY$2[o]]===C&&!A&&(I.wh=n[XY$2[o]]+n[WH$2[o]]-I.xy),w+=I.wh}}function layOutDimCellsRestInfoByUnit(a,r){for(var n=r[XY$2[a]].resetCellIterator();n.next();){var o=n.item;layOutRectOneDimBasedOnUnit(o.rect,a,o.id,o.span,r),layOutRectOneDimBasedOnUnit(o.rect,1-a,o.id,o.span,r),o.type===MatrixCellLayoutInfoType.nonLeaf&&(o.xy=o.rect[XY$2[a]],o.wh=o.rect[WH$2[a]])}}function layOutBodyCornerCellMerge(a,r){a.travelExistingCells(function(n){var o=n.span;if(o){var s=n.spanRect,l=n.id;layOutRectOneDimBasedOnUnit(s,0,l,o,r),layOutRectOneDimBasedOnUnit(s,1,l,o,r)}})}function layOutRectOneDimBasedOnUnit(a,r,n,o,s){a[WH$2[r]]=0;var l=n[XY$2[r]],u=l<0?s[XY$2[1-r]]:s[XY$2[r]],c=u.getUnitLayoutInfo(r,n[XY$2[r]]);if(a[XY$2[r]]=c.xy,a[WH$2[r]]=c.wh,o[XY$2[r]]>1){var f=u.getUnitLayoutInfo(r,n[XY$2[r]]+o[XY$2[r]]-1);a[WH$2[r]]=f.xy+f.wh-c.xy}}function parseSizeOption(a,r,n){var o=parsePositionSizeOption(a,n[WH$2[r]]);return confineSize(o,n[WH$2[r]])}function confineSize(a,r){return Math.max(Math.min(a,retrieve2(r,1/0)),0)}function getCoordSys(a){var r=a.matrixModel,n=a.seriesModel,o=r?r.coordinateSystem:n?n.coordinateSystem:null;return o}var CtxPointToDataAreaType={inBody:1,inCorner:2,outside:3},_tmpCtxPointToData={x:null,y:null,point:[]};function pointToDataOneDimPrepareCtx(a,r,n,o,s){var l=n[XY$2[r]],u=n[XY$2[1-r]],c=l.getUnitLayoutInfo(r,l.getLocatorCount(r)-1),f=l.getUnitLayoutInfo(r,0),d=u.getUnitLayoutInfo(r,-u.getLocatorCount(r)),v=u.shouldShow()?u.getUnitLayoutInfo(r,-1):null,g=a.point[r]=o[r];if(!f&&!v){a[XY$2[r]]=CtxPointToDataAreaType.outside;return}if(s===MatrixClampOption.body){f?(a[XY$2[r]]=CtxPointToDataAreaType.inBody,g=mathMin$a(c.xy+c.wh,mathMax$a(f.xy,g)),a.point[r]=g):a[XY$2[r]]=CtxPointToDataAreaType.outside;return}else if(s===MatrixClampOption.corner){v?(a[XY$2[r]]=CtxPointToDataAreaType.inCorner,g=mathMin$a(v.xy+v.wh,mathMax$a(d.xy,g)),a.point[r]=g):a[XY$2[r]]=CtxPointToDataAreaType.outside;return}var y=f?f.xy:v?v.xy+v.wh:NaN,_=d?d.xy:y,S=c?c.xy+c.wh:y;if(g<_){if(!s){a[XY$2[r]]=CtxPointToDataAreaType.outside;return}g=_}else if(g>S){if(!s){a[XY$2[r]]=CtxPointToDataAreaType.outside;return}g=S}a.point[r]=g,a[XY$2[r]]=y<=g&&g<=S?CtxPointToDataAreaType.inBody:_<=g&&g<=y?CtxPointToDataAreaType.inCorner:CtxPointToDataAreaType.outside}function pointToDataOnlyHeaderFillOut(a,r,n,o){var s=1-n;if(a[XY$2[n]]!==CtxPointToDataAreaType.outside)for(o[XY$2[n]].resetCellIterator(_ptdDimCellIt);_ptdDimCellIt.next();){var l=_ptdDimCellIt.item;if(isCoordInRect(a.point[n],l.rect,n)&&isCoordInRect(a.point[s],l.rect,s)){r[n]=l.ordinal,r[s]=l.id[XY$2[s]];return}}}function pointToDataBodyCornerFillOut(a,r,n,o){if(a[XY$2[n]]!==CtxPointToDataAreaType.outside){var s=a[XY$2[n]]===CtxPointToDataAreaType.inCorner?o[XY$2[1-n]]:o[XY$2[n]];for(s.resetLayoutIterator(_ptdLevelIt,n);_ptdLevelIt.next();)if(isCoordInLayoutInfo(a.point[n],_ptdLevelIt.item)){r[n]=_ptdLevelIt.item.id[XY$2[n]];return}}}function isCoordInLayoutInfo(a,r){return r.xy<=a&&a<=r.xy+r.wh}function isCoordInRect(a,r,n){return r[XY$2[n]]<=a&&a<=r[XY$2[n]]+r[WH$2[n]]}function install$n(a){a.registerComponentModel(MatrixModel),a.registerComponentView(MatrixView),a.registerCoordinateSystem("matrix",Matrix)}function setKeyInfoToNewElOption(a,r){var n=a.existing;if(r.id=a.keyInfo.id,!r.type&&n&&(r.type=n.type),r.parentId==null){var o=r.parentOption;o?r.parentId=o.id:n&&(r.parentId=n.parentId)}r.parentOption=null}function isSetLoc(a,r){var n;return each$f(r,function(o){a[o]!=null&&a[o]!=="auto"&&(n=!0)}),n}function mergeNewElOptionToExist(a,r,n){var o=extend({},n),s=a[r],l=n.$action||"merge";l==="merge"?s?(merge(s,o,!0),mergeLayoutParam(s,o,{ignoreSize:!0}),copyLayoutParams(n,s),copyTransitionInfo(n,s),copyTransitionInfo(n,s,"shape"),copyTransitionInfo(n,s,"style"),copyTransitionInfo(n,s,"extra"),n.clipPath=s.clipPath):a[r]=o:l==="replace"?a[r]=o:l==="remove"&&s&&(a[r]=null)}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(a,r,n){if(n&&(!a[n]&&r[n]&&(a[n]={}),a=a[n],r=r[n]),!(!a||!r))for(var o=n?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,s=0;s<o.length;s++){var l=o[s];a[l]==null&&r[l]!=null&&(a[l]=r[l])}}function setLayoutInfoToExist(a,r){if(a&&(a.hv=r.hv=[isSetLoc(r,["left","right"]),isSetLoc(r,["top","bottom"])],a.type==="group")){var n=a,o=r;n.width==null&&(n.width=o.width=0),n.height==null&&(n.height=o.height=0)}}var GraphicComponentModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.preventAutoZ=!0,n}return r.prototype.mergeOption=function(n,o){var s=this.option.elements;this.option.elements=null,a.prototype.mergeOption.call(this,n,o),this.option.elements=s},r.prototype.optionUpdated=function(n,o){var s=this.option,l=(o?s:n).elements,u=s.elements=o?[]:s.elements,c=[];this._flatten(l,c,null);var f=mappingToExists(u,c,"normalMerge"),d=this._elOptionsToUpdate=[];each$f(f,function(v,g){var y=v.newOption;y&&(d.push(y),setKeyInfoToNewElOption(v,y),mergeNewElOptionToExist(u,g,y),setLayoutInfoToExist(u[g],y))},this),s.elements=filter(u,function(v){return v&&delete v.$action,v!=null})},r.prototype._flatten=function(n,o,s){each$f(n,function(l){if(l){s&&(l.parentOption=s),o.push(l);var u=l.children;u&&u.length&&this._flatten(u,o,l),delete l.children}},this)},r.prototype.useElOptionsToUpdate=function(){var n=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,n},r.type="graphic",r.defaultOption={elements:[]},r}(ComponentModel),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$3,image:ZRImage,text:ZRText},inner$7=makeInner(),GraphicComponentView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.init=function(){this._elMap=createHashMap()},r.prototype.render=function(n,o,s){n!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=n,this._updateElements(n),this._relocate(n,s)},r.prototype._updateElements=function(n){var o=n.useElOptionsToUpdate();if(o){var s=this._elMap,l=this.group,u=n.get("z"),c=n.get("zlevel");each$f(o,function(f){var d=convertOptionIdName(f.id,null),v=d!=null?s.get(d):null,g=convertOptionIdName(f.parentId,null),y=g!=null?s.get(g):l,_=f.type,S=f.style;_==="text"&&S&&f.hv&&f.hv[1]&&(S.textVerticalAlign=S.textBaseline=S.verticalAlign=S.align=null);var b=f.textContent,x=f.textConfig;if(S&&isEC4CompatibleStyle(S,_,!!x,!!b)){var T=convertFromEC4CompatibleStyle(S,_,!0);!x&&T.textConfig&&(x=f.textConfig=T.textConfig),!b&&T.textContent&&(b=T.textContent)}var A=getCleanedElOption(f),w=f.$action||"merge",C=w==="merge",E=w==="replace";if(C){var P=!v,I=v;P?I=createEl(d,y,f.type,s):(I&&(inner$7(I).isNew=!1),stopPreviousKeyframeAnimationAndRestore(I)),I&&(applyUpdateTransition(I,A,n,{isInit:P}),updateCommonAttrs(I,f,u,c))}else if(E){removeEl$1(v,f,s,n);var M=createEl(d,y,f.type,s);M&&(applyUpdateTransition(M,A,n,{isInit:!0}),updateCommonAttrs(M,f,u,c))}else w==="remove"&&(updateLeaveTo(v,f),removeEl$1(v,f,s,n));var R=s.get(d);if(R&&b)if(C){var O=R.getTextContent();O?O.attr(b):R.setTextContent(new ZRText(b))}else E&&R.setTextContent(new ZRText(b));if(R){var $=f.clipPath;if($){var B=$.type,F=void 0,P=!1;if(C){var z=R.getClipPath();P=!z||inner$7(z).type!==B,F=P?newEl(B):z}else E&&(P=!0,F=newEl(B));R.setClipPath(F),applyUpdateTransition(F,$,n,{isInit:P}),applyKeyframeAnimation(F,$.keyframeAnimation,n)}var G=inner$7(R);R.setTextConfig(x),G.option=f,setEventData(R,n,f),setTooltipConfig({el:R,componentModel:n,itemName:R.name,itemTooltipOption:f.tooltip}),applyKeyframeAnimation(R,f.keyframeAnimation,n)}})}},r.prototype._relocate=function(n,o){for(var s=n.option.elements,l=this.group,u=this._elMap,c=o.getWidth(),f=o.getHeight(),d=["x","y"],v=0;v<s.length;v++){var g=s[v],y=convertOptionIdName(g.id,null),_=y!=null?u.get(y):null;if(!(!_||!_.isGroup)){var S=_.parent,b=S===l,x=inner$7(_),T=inner$7(S);x.width=parsePercent(x.option.width,b?c:T.width)||0,x.height=parsePercent(x.option.height,b?f:T.height)||0}}for(var v=s.length-1;v>=0;v--){var g=s[v],y=convertOptionIdName(g.id,null),_=y!=null?u.get(y):null;if(_){var S=_.parent,T=inner$7(S),A=S===l?{width:c,height:f}:{width:T.width,height:T.height},w={},C=positionElement(_,g,A,null,{hv:g.hv,boundingMode:g.bounding},w);if(!inner$7(_).isNew&&C){for(var E=g.transition,P={},I=0;I<d.length;I++){var M=d[I],R=w[M];E&&(isTransitionAll(E)||indexOf(E,M)>=0)?P[M]=R:_[M]=R}updateProps$1(_,P,n,0)}else _.attr(w)}}},r.prototype._clear=function(){var n=this,o=this._elMap;o.each(function(s){removeEl$1(s,inner$7(s).option,o,n._lastGraphicModel)}),this._elMap=createHashMap()},r.prototype.dispose=function(){this._clear()},r.type="graphic",r}(ComponentView);function newEl(a){var r=hasOwn(nonShapeGraphicElements,a)?nonShapeGraphicElements[a]:getShapeClass(a),n=new r({});return inner$7(n).type=a,n}function createEl(a,r,n,o){var s=newEl(n);return r.add(s),o.set(a,s),inner$7(s).id=a,inner$7(s).isNew=!0,s}function removeEl$1(a,r,n,o){var s=a&&a.parent;s&&(a.type==="group"&&a.traverse(function(l){removeEl$1(l,r,n,o)}),applyLeaveTransition(a,r,o),n.removeKey(inner$7(a).id))}function updateCommonAttrs(a,r,n,o){a.isGroup||each$f([["cursor",Displayable.prototype.cursor],["zlevel",o||0],["z",n||0],["z2",0]],function(s){var l=s[0];hasOwn(r,l)?a[l]=retrieve2(r[l],s[1]):a[l]==null&&(a[l]=s[1])}),each$f(keys(r),function(s){if(s.indexOf("on")===0){var l=r[s];a[s]=isFunction(l)?l:null}}),hasOwn(r,"draggable")&&(a.draggable=r.draggable),r.name!=null&&(a.name=r.name),r.id!=null&&(a.id=r.id)}function getCleanedElOption(a){return a=extend({},a),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(r){delete a[r]}),a}function setEventData(a,r,n){var o=getECData(a).eventData;!a.silent&&!a.ignore&&!o&&(o=getECData(a).eventData={componentType:"graphic",componentIndex:r.componentIndex,name:a.name}),o&&(o.info=n.info)}function install$m(a){a.registerComponentModel(GraphicComponentModel),a.registerComponentView(GraphicComponentView),a.registerPreprocessor(function(r){var n=r.graphic;isArray$1(n)?!n[0]||!n[0].elements?r.graphic=[{elements:n}]:r.graphic=[r.graphic[0]]:n&&!n.elements&&(r.graphic=[{elements:[n]}])})}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(a){var r=a.get("coordinateSystem");return indexOf(SERIES_COORDS,r)>=0}function getAxisMainType(a){return a+"Axis"}function findEffectedDataZooms(a,r){var n=createHashMap(),o=[],s=createHashMap();a.eachComponent({mainType:"dataZoom",query:r},function(v){s.get(v.uid)||c(v)});var l;do l=!1,a.eachComponent("dataZoom",u);while(l);function u(v){!s.get(v.uid)&&f(v)&&(c(v),l=!0)}function c(v){s.set(v.uid,!0),o.push(v),d(v)}function f(v){var g=!1;return v.eachTargetAxis(function(y,_){var S=n.get(y);S&&S[_]&&(g=!0)}),g}function d(v){v.eachTargetAxis(function(g,y){(n.get(g)||n.set(g,[]))[y]=!0})}return o}function collectReferCoordSysModelInfo(a){var r=a.ecModel,n={infoList:[],infoMap:createHashMap()};return a.eachTargetAxis(function(o,s){var l=r.getComponent(getAxisMainType(o),s);if(l){var u=l.getCoordSysModel();if(u){var c=u.uid,f=n.infoMap.get(c);f||(f={model:u,axisModels:[]},n.infoList.push(f),n.infoMap.set(c,f)),f.axisModels.push(l)}}}),n}var DataZoomAxisInfo=function(){function a(){this.indexList=[],this.indexMap=[]}return a.prototype.add=function(r){this.indexMap[r]||(this.indexList.push(r),this.indexMap[r]=!0)},a}(),DataZoomModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return r.prototype.init=function(n,o,s){var l=retrieveRawOption(n);this.settledOption=l,this.mergeDefaultAndTheme(n,s),this._doInit(l)},r.prototype.mergeOption=function(n){var o=retrieveRawOption(n);merge(this.option,n,!0),merge(this.settledOption,o,!0),this._doInit(o)},r.prototype._doInit=function(n){var o=this.option;this._setDefaultThrottle(n),this._updateRangeUse(n);var s=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(l,u){this._rangePropMode[u]==="value"&&(o[l[0]]=s[l[0]]=null)},this),this._resetTarget()},r.prototype._resetTarget=function(){var n=this.get("orient",!0),o=this._targetAxisInfoMap=createHashMap(),s=this._fillSpecifiedTargetAxis(o);s?this._orient=n||this._makeAutoOrientByTargetAxis():(this._orient=n||"horizontal",this._fillAutoTargetAxisByOrient(o,this._orient)),this._noTarget=!0,o.each(function(l){l.indexList.length&&(this._noTarget=!1)},this)},r.prototype._fillSpecifiedTargetAxis=function(n){var o=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(s){var l=this.getReferringComponents(getAxisMainType(s),MULTIPLE_REFERRING);if(l.specified){o=!0;var u=new DataZoomAxisInfo;each$f(l.models,function(c){u.add(c.componentIndex)}),n.set(s,u)}},this),o},r.prototype._fillAutoTargetAxisByOrient=function(n,o){var s=this.ecModel,l=!0;if(l){var u=o==="vertical"?"y":"x",c=s.findComponents({mainType:u+"Axis"});f(c,u)}if(l){var c=s.findComponents({mainType:"singleAxis",filter:function(v){return v.get("orient",!0)===o}});f(c,"single")}function f(d,v){var g=d[0];if(g){var y=new DataZoomAxisInfo;if(y.add(g.componentIndex),n.set(v,y),l=!1,v==="x"||v==="y"){var _=g.getReferringComponents("grid",SINGLE_REFERRING).models[0];_&&each$f(d,function(S){g.componentIndex!==S.componentIndex&&_===S.getReferringComponents("grid",SINGLE_REFERRING).models[0]&&y.add(S.componentIndex)})}}}l&&each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(d){if(l){var v=s.findComponents({mainType:getAxisMainType(d),filter:function(y){return y.get("type",!0)==="category"}});if(v[0]){var g=new DataZoomAxisInfo;g.add(v[0].componentIndex),n.set(d,g),l=!1}}},this)},r.prototype._makeAutoOrientByTargetAxis=function(){var n;return this.eachTargetAxis(function(o){!n&&(n=o)},this),n==="y"?"vertical":"horizontal"},r.prototype._setDefaultThrottle=function(n){if(n.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var o=this.ecModel.option;this.option.throttle=o.animation&&o.animationDurationUpdate>0?100:20}},r.prototype._updateRangeUse=function(n){var o=this._rangePropMode,s=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(l,u){var c=n[l[0]]!=null,f=n[l[1]]!=null;c&&!f?o[u]="percent":!c&&f?o[u]="value":s?o[u]=s[u]:c&&(o[u]="percent")})},r.prototype.noTarget=function(){return this._noTarget},r.prototype.getFirstTargetAxisModel=function(){var n;return this.eachTargetAxis(function(o,s){n==null&&(n=this.ecModel.getComponent(getAxisMainType(o),s))},this),n},r.prototype.eachTargetAxis=function(n,o){this._targetAxisInfoMap.each(function(s,l){each$f(s.indexList,function(u){n.call(o,l,u)})})},r.prototype.getAxisProxy=function(n,o){var s=this.getAxisModel(n,o);if(s)return s.__dzAxisProxy},r.prototype.getAxisModel=function(n,o){var s=this._targetAxisInfoMap.get(n);if(s&&s.indexMap[o])return this.ecModel.getComponent(getAxisMainType(n),o)},r.prototype.setRawRange=function(n){var o=this.option,s=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(l){(n[l[0]]!=null||n[l[1]]!=null)&&(o[l[0]]=s[l[0]]=n[l[0]],o[l[1]]=s[l[1]]=n[l[1]])},this),this._updateRangeUse(n)},r.prototype.setCalculatedRange=function(n){var o=this.option;each$f(["start","startValue","end","endValue"],function(s){o[s]=n[s]})},r.prototype.getPercentRange=function(){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataPercentWindow()},r.prototype.getValueRange=function(n,o){if(n==null&&o==null){var s=this.findRepresentativeAxisProxy();if(s)return s.getDataValueWindow()}else return this.getAxisProxy(n,o).getDataValueWindow()},r.prototype.findRepresentativeAxisProxy=function(n){if(n)return n.__dzAxisProxy;for(var o,s=this._targetAxisInfoMap.keys(),l=0;l<s.length;l++)for(var u=s[l],c=this._targetAxisInfoMap.get(u),f=0;f<c.indexList.length;f++){var d=this.getAxisProxy(u,c.indexList[f]);if(d.hostedBy(this))return d;o||(o=d)}return o},r.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},r.prototype.getOrient=function(){return this._orient},r.type="dataZoom",r.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],r.defaultOption={z:4,filterMode:"filter",start:0,end:100},r}(ComponentModel);function retrieveRawOption(a){var r={};return each$f(["start","end","startValue","endValue","throttle"],function(n){a.hasOwnProperty(n)&&(r[n]=a[n])}),r}var SelectDataZoomModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.type="dataZoom.select",r}(DataZoomModel),DataZoomView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s,l){this.dataZoomModel=n,this.ecModel=o,this.api=s},r.type="dataZoom",r}(ComponentView),SelectDataZoomView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.type="dataZoom.select",r}(DataZoomView),each$7=each$f,asc$1=asc$2,AxisProxy=function(){function a(r,n,o,s){this._dimName=r,this._axisIndex=n,this.ecModel=s,this._dataZoomModel=o}return a.prototype.hostedBy=function(r){return this._dataZoomModel===r},a.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},a.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},a.prototype.getTargetSeriesModels=function(){var r=[];return this.ecModel.eachSeries(function(n){if(isCoordSupported(n)){var o=getAxisMainType(this._dimName),s=n.getReferringComponents(o,SINGLE_REFERRING).models[0];s&&this._axisIndex===s.componentIndex&&r.push(n)}},this),r},a.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},a.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},a.prototype.calculateDataWindow=function(r){var n=this._dataExtent,o=this.getAxisModel(),s=o.axis.scale,l=this._dataZoomModel.getRangePropMode(),u=[0,100],c=[],f=[],d;each$7(["start","end"],function(y,_){var S=r[y],b=r[y+"Value"];l[_]==="percent"?(S==null&&(S=u[_]),b=s.parse(linearMap$2(S,u,n))):(d=!0,b=b==null?n[_]:s.parse(b),S=linearMap$2(b,n,u)),f[_]=b==null||isNaN(b)?n[_]:b,c[_]=S==null||isNaN(S)?u[_]:S}),asc$1(f),asc$1(c);var v=this._minMaxSpan;d?g(f,c,n,u,!1):g(c,f,u,n,!0);function g(y,_,S,b,x){var T=x?"Span":"ValueSpan";sliderMove(0,y,S,"all",v["min"+T],v["max"+T]);for(var A=0;A<2;A++)_[A]=linearMap$2(y[A],S,b,!0),x&&(_[A]=s.parse(_[A]))}return{valueWindow:f,percentWindow:c}},a.prototype.reset=function(r){if(r===this._dataZoomModel){var n=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,n),this._updateMinMaxSpan();var o=this.calculateDataWindow(r.settledOption);this._valueWindow=o.valueWindow,this._percentWindow=o.percentWindow,this._setAxisModel()}},a.prototype.filterData=function(r,n){if(r!==this._dataZoomModel)return;var o=this._dimName,s=this.getTargetSeriesModels(),l=r.get("filterMode"),u=this._valueWindow;if(l==="none")return;each$7(s,function(f){var d=f.getData(),v=d.mapDimensionsAll(o);if(v.length){if(l==="weakFilter"){var g=d.getStore(),y=map$1(v,function(_){return d.getDimensionIndex(_)},d);d.filterSelf(function(_){for(var S,b,x,T=0;T<v.length;T++){var A=g.get(y[T],_),w=!isNaN(A),C=A<u[0],E=A>u[1];if(w&&!C&&!E)return!0;w&&(x=!0),C&&(S=!0),E&&(b=!0)}return x&&S&&b})}else each$7(v,function(_){if(l==="empty")f.setData(d=d.map(_,function(b){return c(b)?b:NaN}));else{var S={};S[_]=u,d.selectRange(S)}});each$7(v,function(_){d.setApproximateExtent(u,_)})}});function c(f){return f>=u[0]&&f<=u[1]}},a.prototype._updateMinMaxSpan=function(){var r=this._minMaxSpan={},n=this._dataZoomModel,o=this._dataExtent;each$7(["min","max"],function(s){var l=n.get(s+"Span"),u=n.get(s+"ValueSpan");u!=null&&(u=this.getAxisModel().axis.scale.parse(u)),u!=null?l=linearMap$2(o[0]+u,o,[0,100],!0):l!=null&&(u=linearMap$2(l,[0,100],o,!0)-o[0]),r[s+"Span"]=l,r[s+"ValueSpan"]=u},this)},a.prototype._setAxisModel=function(){var r=this.getAxisModel(),n=this._percentWindow,o=this._valueWindow;if(n){var s=getPixelPrecision(o,[0,500]);s=Math.min(s,20);var l=r.axis.scale.rawExtentInfo;n[0]!==0&&l.setDeterminedMinMax("min",+o[0].toFixed(s)),n[1]!==100&&l.setDeterminedMinMax("max",+o[1].toFixed(s)),l.freeze()}},a}();function calculateDataExtent(a,r,n){var o=[1/0,-1/0];each$7(n,function(u){unionAxisExtentFromData(o,u.getData(),r)});var s=a.getAxisModel(),l=ensureScaleRawExtentInfo(s.axis.scale,s,o).calculate();return[l.min,l.max]}var dataZoomProcessor={getTargetSeries:function(a){function r(s){a.eachComponent("dataZoom",function(l){l.eachTargetAxis(function(u,c){var f=a.getComponent(getAxisMainType(u),c);s(u,c,f,l)})})}r(function(s,l,u,c){u.__dzAxisProxy=null});var n=[];r(function(s,l,u,c){u.__dzAxisProxy||(u.__dzAxisProxy=new AxisProxy(s,l,c,a),n.push(u.__dzAxisProxy))});var o=createHashMap();return each$f(n,function(s){each$f(s.getTargetSeriesModels(),function(l){o.set(l.uid,l)})}),o},overallReset:function(a,r){a.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(o,s){n.getAxisProxy(o,s).reset(n)}),n.eachTargetAxis(function(o,s){n.getAxisProxy(o,s).filterData(n,r)})}),a.eachComponent("dataZoom",function(n){var o=n.findRepresentativeAxisProxy();if(o){var s=o.getDataPercentWindow(),l=o.getDataValueWindow();n.setCalculatedRange({start:s[0],end:s[1],startValue:l[0],endValue:l[1]})}})}};function installDataZoomAction(a){a.registerAction("dataZoom",function(r,n){var o=findEffectedDataZooms(n,r);each$f(o,function(s){s.setRawRange({start:r.start,end:r.end,startValue:r.startValue,endValue:r.endValue})})})}var installed$1=!1;function installCommon$1(a){installed$1||(installed$1=!0,a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor),installDataZoomAction(a),a.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$l(a){a.registerComponentModel(SelectDataZoomModel),a.registerComponentView(SelectDataZoomView),installCommon$1(a)}var ToolboxFeature=function(){function a(){}return a}(),features={};function registerFeature(a,r){features[a]=r}function getFeature(a){return features[a]}var ToolboxModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.optionUpdated=function(){a.prototype.optionUpdated.apply(this,arguments);var n=this.ecModel;each$f(this.option.feature,function(o,s){var l=getFeature(s);l&&(l.getDefaultOption&&(l.defaultOption=l.getDefaultOption(n)),merge(o,l.defaultOption))})},r.type="toolbox",r.layoutMode={type:"box",ignoreSize:!0},r.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:tokens.color.border,borderRadius:0,borderWidth:0,padding:tokens.size.m,itemSize:15,itemGap:tokens.size.s,showTitle:!0,iconStyle:{borderColor:tokens.color.accent50,color:"none"},emphasis:{iconStyle:{borderColor:tokens.color.accent50}},tooltip:{show:!1,position:"bottom"}},r}(ComponentModel);function makeBackground(a,r){var n=normalizeCssArray(r.get("padding")),o=r.getItemStyle(["color","opacity"]);o.fill=r.get("backgroundColor");var s=new Rect$2({shape:{x:a.x-n[3],y:a.y-n[0],width:a.width+n[1]+n[3],height:a.height+n[0]+n[2],r:r.get("borderRadius")},style:o,silent:!0,z2:-1});return s}var ToolboxView=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(n,o,s,l){var u=this.group;if(u.removeAll(),!n.get("show"))return;var c=+n.get("itemSize"),f=n.get("orient")==="vertical",d=n.get("feature")||{},v=this._features||(this._features={}),g=[];each$f(d,function(A,w){g.push(w)}),new DataDiffer(this._featureNames||[],g).add(y).update(y).remove(curry$1(y,null)).execute(),this._featureNames=g;function y(A,w){var C=g[A],E=g[w],P=d[C],I=new Model(P,n,n.ecModel),M;if(l&&l.newTitle!=null&&l.featureName===C&&(P.title=l.newTitle),C&&!E){if(isUserFeatureName(C))M={onclick:I.option.onclick,featureName:C};else{var R=getFeature(C);if(!R)return;M=new R}v[C]=M}else if(M=v[E],!M)return;M.uid=getUID("toolbox-feature"),M.model=I,M.ecModel=o,M.api=s;var O=M instanceof ToolboxFeature;if(!C&&E){O&&M.dispose&&M.dispose(o,s);return}if(!I.get("show")||O&&M.unusable){O&&M.remove&&M.remove(o,s);return}_(I,M,C),I.setIconStatus=function($,B){var F=this.option,z=this.iconPaths;F.iconStatus=F.iconStatus||{},F.iconStatus[$]=B,z[$]&&(B==="emphasis"?enterEmphasis:leaveEmphasis)(z[$])},M instanceof ToolboxFeature&&M.render&&M.render(I,o,s,l)}function _(A,w,C){var E=A.getModel("iconStyle"),P=A.getModel(["emphasis","iconStyle"]),I=w instanceof ToolboxFeature&&w.getIcons?w.getIcons():A.get("icon"),M=A.get("title")||{},R,O;isString(I)?(R={},R[C]=I):R=I,isString(M)?(O={},O[C]=M):O=M;var $=A.iconPaths={};each$f(R,function(B,F){var z=createIcon(B,{},{x:-c/2,y:-c/2,width:c,height:c});z.setStyle(E.getItemStyle());var G=z.ensureState("emphasis");G.style=P.getItemStyle();var D=new ZRText({style:{text:O[F],align:P.get("textAlign"),borderRadius:P.get("textBorderRadius"),padding:P.get("textPadding"),fill:null,font:getFont({fontStyle:P.get("textFontStyle"),fontFamily:P.get("textFontFamily"),fontSize:P.get("textFontSize"),fontWeight:P.get("textFontWeight")},o)},ignore:!0});z.setTextContent(D),setTooltipConfig({el:z,componentModel:n,itemName:F,formatterParamsExtra:{title:O[F]}}),z.__title=O[F],z.on("mouseover",function(){var V=P.getItemStyle(),L=f?n.get("right")==null&&n.get("left")!=="right"?"right":"left":n.get("bottom")==null&&n.get("top")!=="bottom"?"bottom":"top";D.setStyle({fill:P.get("textFill")||V.fill||V.stroke||tokens.color.neutral99,backgroundColor:P.get("textBackgroundColor")}),z.setTextConfig({position:P.get("textPosition")||L}),D.ignore=!n.get("showTitle"),s.enterEmphasis(this)}).on("mouseout",function(){A.get(["iconStatus",F])!=="emphasis"&&s.leaveEmphasis(this),D.hide()}),(A.get(["iconStatus",F])==="emphasis"?enterEmphasis:leaveEmphasis)(z),u.add(z),z.on("click",bind$1(w.onclick,w,o,s,F)),$[F]=z})}var S=createBoxLayoutReference(n,s).refContainer,b=n.getBoxLayoutParams(),x=n.get("padding"),T=getLayoutRect(b,S,x);box(n.get("orient"),u,n.get("itemGap"),T.width,T.height),positionElement(u,b,S,x),u.add(makeBackground(u.getBoundingRect(),n)),f||u.eachChild(function(A){var w=A.__title,C=A.ensureState("emphasis"),E=C.textConfig||(C.textConfig={}),P=A.getTextContent(),I=P&&P.ensureState("emphasis");if(I&&!isFunction(I)&&w){var M=I.style||(I.style={}),R=getBoundingRect(w,ZRText.makeFont(M)),O=A.x+u.x,$=A.y+u.y+c,B=!1;$+R.height>s.getHeight()&&(E.position="top",B=!0);var F=B?-5-R.height:c+10;O+R.width/2>s.getWidth()?(E.position=["100%",F],M.align="right"):O-R.width/2<0&&(E.position=[0,F],M.align="left")}})},r.prototype.updateView=function(n,o,s,l){each$f(this._features,function(u){u instanceof ToolboxFeature&&u.updateView&&u.updateView(u.model,o,s,l)})},r.prototype.remove=function(n,o){each$f(this._features,function(s){s instanceof ToolboxFeature&&s.remove&&s.remove(n,o)}),this.group.removeAll()},r.prototype.dispose=function(n,o){each$f(this._features,function(s){s instanceof ToolboxFeature&&s.dispose&&s.dispose(n,o)})},r.type="toolbox",r}(ComponentView);function isUserFeatureName(a){return a.indexOf("my")===0}var SaveAsImage=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.onclick=function(n,o){var s=this.model,l=s.get("name")||n.get("title.0.text")||"echarts",u=o.getZr().painter.getType()==="svg",c=u?"svg":s.get("type",!0)||"png",f=o.getConnectedDataURL({type:c,backgroundColor:s.get("backgroundColor",!0)||n.get("backgroundColor")||tokens.color.neutral00,connectedBackgroundColor:s.get("connectedBackgroundColor"),excludeComponents:s.get("excludeComponents"),pixelRatio:s.get("pixelRatio")}),d=env.browser;if(typeof MouseEvent=="function"&&(d.newEdge||!d.ie&&!d.edge)){var v=document.createElement("a");v.download=l+"."+c,v.target="_blank",v.href=f;var g=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});v.dispatchEvent(g)}else if(window.navigator.msSaveOrOpenBlob||u){var y=f.split(","),_=y[0].indexOf("base64")>-1,S=u?decodeURIComponent(y[1]):y[1];_&&(S=window.atob(S));var b=l+"."+c;if(window.navigator.msSaveOrOpenBlob){for(var x=S.length,T=new Uint8Array(x);x--;)T[x]=S.charCodeAt(x);var A=new Blob([T]);window.navigator.msSaveOrOpenBlob(A,b)}else{var w=document.createElement("iframe");document.body.appendChild(w);var C=w.contentWindow,E=C.document;E.open("image/svg+xml","replace"),E.write(S),E.close(),C.focus(),E.execCommand("SaveAs",!0,b),document.body.removeChild(w)}}else{var P=s.get("lang"),I='<body style="margin:0;"><img src="'+f+'" style="max-width:100%;" title="'+(P&&P[0]||"")+'" /></body>',M=window.open();M.document.write(I),M.document.title=l}},r.getDefaultOption=function(n){var o={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:n.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:tokens.color.neutral00,name:"",excludeComponents:["toolbox"],lang:n.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return o},r}(ToolboxFeature),INNER_STACK_KEYWORD="__ec_magicType_stack__",radioTypes=[["line","bar"],["stack"]],MagicType=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getIcons=function(){var n=this.model,o=n.get("icon"),s={};return each$f(n.get("type"),function(l){o[l]&&(s[l]=o[l])}),s},r.getDefaultOption=function(n){var o={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:n.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return o},r.prototype.onclick=function(n,o,s){var l=this.model,u=l.get(["seriesIndex",s]);if(seriesOptGenreator[s]){var c={series:[]},f=function(g){var y=g.subType,_=g.id,S=seriesOptGenreator[s](y,_,g,l);S&&(defaults(S,g.option),c.series.push(S));var b=g.coordinateSystem;if(b&&b.type==="cartesian2d"&&(s==="line"||s==="bar")){var x=b.getAxesByScale("ordinal")[0];if(x){var T=x.dim,A=T+"Axis",w=g.getReferringComponents(A,SINGLE_REFERRING).models[0],C=w.componentIndex;c[A]=c[A]||[];for(var E=0;E<=C;E++)c[A][C]=c[A][C]||{};c[A][C].boundaryGap=s==="bar"}}};each$f(radioTypes,function(g){indexOf(g,s)>=0&&each$f(g,function(y){l.setIconStatus(y,"normal")})}),l.setIconStatus(s,"emphasis"),n.eachComponent({mainType:"series",query:u==null?null:{seriesIndex:u}},f);var d,v=s;s==="stack"&&(d=merge({stack:l.option.title.tiled,tiled:l.option.title.stack},l.option.title),l.get(["iconStatus",s])!=="emphasis"&&(v="tiled")),o.dispatchAction({type:"changeMagicType",currentType:v,newOption:c,newTitle:d,featureName:"magicType"})}},r}(ToolboxFeature),seriesOptGenreator={line:function(a,r,n,o){if(a==="bar")return merge({id:r,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(a,r,n,o){if(a==="line")return merge({id:r,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(a,r,n,o){var s=n.get("stack")===INNER_STACK_KEYWORD;if(a==="line"||a==="bar")return o.setIconStatus("stack",s?"normal":"emphasis"),merge({id:r,stack:s?"":INNER_STACK_KEYWORD},o.get(["option","stack"])||{},!0)}};registerAction$1({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(a,r){r.mergeOption(a.newOption)});var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="	";function groupSeries(a){var r={},n=[],o=[];return a.eachRawSeries(function(s){var l=s.coordinateSystem;if(l&&(l.type==="cartesian2d"||l.type==="polar")){var u=l.getBaseAxis();if(u.type==="category"){var c=u.dim+"_"+u.index;r[c]||(r[c]={categoryAxis:u,valueAxis:l.getOtherAxis(u),series:[]},o.push({axisDim:u.dim,axisIndex:u.index})),r[c].series.push(s)}else n.push(s)}else n.push(s)}),{seriesGroupByCategoryAxis:r,other:n,meta:o}}function assembleSeriesWithCategoryAxis(a){var r=[];return each$f(a,function(n,o){var s=n.categoryAxis,l=n.valueAxis,u=l.dim,c=[" "].concat(map$1(n.series,function(_){return _.name})),f=[s.model.getCategories()];each$f(n.series,function(_){var S=_.getRawData();f.push(_.getRawData().mapArray(S.mapDimension(u),function(b){return b}))});for(var d=[c.join(ITEM_SPLITER)],v=0;v<f[0].length;v++){for(var g=[],y=0;y<f.length;y++)g.push(f[y][v]);d.push(g.join(ITEM_SPLITER))}r.push(d.join(`
`))}),r.join(`

`+BLOCK_SPLITER+`

`)}function assembleOtherSeries(a){return map$1(a,function(r){var n=r.getRawData(),o=[r.name],s=[];return n.each(n.dimensions,function(){for(var l=arguments.length,u=arguments[l-1],c=n.getName(u),f=0;f<l-1;f++)s[f]=arguments[f];o.push((c?c+ITEM_SPLITER:"")+s.join(ITEM_SPLITER))}),o.join(`
`)}).join(`

`+BLOCK_SPLITER+`

`)}function getContentFromModel(a){var r=groupSeries(a);return{value:filter([assembleSeriesWithCategoryAxis(r.seriesGroupByCategoryAxis),assembleOtherSeries(r.other)],function(n){return!!n.replace(/[\n\t\s]/g,"")}).join(`

`+BLOCK_SPLITER+`

`),meta:r.meta}}function trim(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(a){var r=a.slice(0,a.indexOf(`
`));if(r.indexOf(ITEM_SPLITER)>=0)return!0}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(a){for(var r=a.split(/\n+/g),n=trim(r.shift()).split(itemSplitRegex),o=[],s=map$1(n,function(f){return{name:f,data:[]}}),l=0;l<r.length;l++){var u=trim(r[l]).split(itemSplitRegex);o.push(u.shift());for(var c=0;c<u.length;c++)s[c]&&(s[c].data[l]=u[c])}return{series:s,categories:o}}function parseListContents(a){for(var r=a.split(/\n+/g),n=trim(r.shift()),o=[],s=0;s<r.length;s++){var l=trim(r[s]);if(l){var u=l.split(itemSplitRegex),c="",f=void 0,d=!1;isNaN(u[0])?(d=!0,c=u[0],u=u.slice(1),o[s]={name:c,value:[]},f=o[s].value):f=o[s]=[];for(var v=0;v<u.length;v++)f.push(+u[v]);f.length===1&&(d?o[s].value=f[0]:o[s]=f[0])}}return{name:n,data:o}}function parseContents(a,r){var n=a.split(new RegExp(`
*`+BLOCK_SPLITER+`
*`,"g")),o={series:[]};return each$f(n,function(s,l){if(isTSVFormat(s)){var u=parseTSVContents(s),c=r[l],f=c.axisDim+"Axis";c&&(o[f]=o[f]||[],o[f][c.axisIndex]={data:u.categories},o.series=o.series.concat(u.series))}else{var u=parseListContents(s);o.series.push(u)}}),o}var DataView$1=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.onclick=function(n,o){setTimeout(function(){o.dispatchAction({type:"hideTip"})});var s=o.getDom(),l=this.model;this._dom&&s.removeChild(this._dom);var u=document.createElement("div");u.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",u.style.backgroundColor=l.get("backgroundColor")||tokens.color.neutral00;var c=document.createElement("h4"),f=l.get("lang")||[];c.innerHTML=f[0]||l.get("title"),c.style.cssText="margin:10px 20px",c.style.color=l.get("textColor");var d=document.createElement("div"),v=document.createElement("textarea");d.style.cssText="overflow:auto";var g=l.get("optionToContent"),y=l.get("contentToOption"),_=getContentFromModel(n);if(isFunction(g)){var S=g(o.getOption());isString(S)?d.innerHTML=S:isDom(S)&&d.appendChild(S)}else{v.readOnly=l.get("readOnly");var b=v.style;b.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",b.color=l.get("textColor"),b.borderColor=l.get("textareaBorderColor"),b.backgroundColor=l.get("textareaColor"),v.value=_.value,d.appendChild(v)}var x=_.meta,T=document.createElement("div");T.style.cssText="position:absolute;bottom:5px;left:0;right:0";var A="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",w=document.createElement("div"),C=document.createElement("div");A+=";background-color:"+l.get("buttonColor"),A+=";color:"+l.get("buttonTextColor");var E=this;function P(){s.removeChild(u),E._dom=null}addEventListener(w,"click",P),addEventListener(C,"click",function(){if(y==null&&g!=null||y!=null&&g==null){P();return}var I;try{isFunction(y)?I=y(d,o.getOption()):I=parseContents(v.value,x)}catch(M){throw P(),new Error("Data view format error "+M)}I&&o.dispatchAction({type:"changeDataView",newOption:I}),P()}),w.innerHTML=f[1],C.innerHTML=f[2],C.style.cssText=w.style.cssText=A,!l.get("readOnly")&&T.appendChild(C),T.appendChild(w),u.appendChild(c),u.appendChild(d),u.appendChild(T),d.style.height=s.clientHeight-80+"px",s.appendChild(u),this._dom=u},r.prototype.remove=function(n,o){this._dom&&o.getDom().removeChild(this._dom)},r.prototype.dispose=function(n,o){this.remove(n,o)},r.getDefaultOption=function(n){var o={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:n.getLocaleModel().get(["toolbox","dataView","title"]),lang:n.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:tokens.color.background,textColor:tokens.color.primary,textareaColor:tokens.color.background,textareaBorderColor:tokens.color.border,buttonColor:tokens.color.accent50,buttonTextColor:tokens.color.neutral00};return o},r}(ToolboxFeature);function tryMergeDataOption(a,r){return map$1(a,function(n,o){var s=r&&r[o];if(isObject$3(s)&&!isArray$1(s)){var l=isObject$3(n)&&!isArray$1(n);l||(n={value:n});var u=s.name!=null&&n.name==null;return n=defaults(n,s),u&&delete n.name,n}else return n})}registerAction$1({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(a,r){var n=[];each$f(a.newOption.series,function(o){var s=r.getSeriesByName(o.name)[0];if(!s)n.push(extend({type:"scatter"},o));else{var l=s.get("data");n.push({name:o.name,data:tryMergeDataOption(o.data,l)})}}),r.mergeOption(defaults({series:n},a.newOption))});var each$6=each$f,inner$6=makeInner();function push(a,r){var n=getStoreSnapshots(a);each$6(r,function(o,s){for(var l=n.length-1;l>=0;l--){var u=n[l];if(u[s])break}if(l<0){var c=a.queryComponents({mainType:"dataZoom",subType:"select",id:s})[0];if(c){var f=c.getPercentRange();n[0][s]={dataZoomId:s,start:f[0],end:f[1]}}}}),n.push(r)}function pop(a){var r=getStoreSnapshots(a),n=r[r.length-1];r.length>1&&r.pop();var o={};return each$6(n,function(s,l){for(var u=r.length-1;u>=0;u--)if(s=r[u][l],s){o[l]=s;break}}),o}function clear(a){inner$6(a).snapshots=null}function count(a){return getStoreSnapshots(a).length}function getStoreSnapshots(a){var r=inner$6(a);return r.snapshots||(r.snapshots=[{}]),r.snapshots}var RestoreOption=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.onclick=function(n,o){clear(n),o.dispatchAction({type:"restore",from:this.uid})},r.getDefaultOption=function(n){var o={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:n.getLocaleModel().get(["toolbox","restore","title"])};return o},r}(ToolboxFeature);registerAction$1({type:"restore",event:"restore",update:"prepareAndUpdate"},function(a,r){r.resetOption("recreate")});var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=function(){function a(r,n,o){var s=this;this._targetInfoList=[];var l=parseFinder(n,r);each$f(targetInfoBuilders,function(u,c){(!o||!o.include||indexOf(o.include,c)>=0)&&u(l,s._targetInfoList)})}return a.prototype.setOutputRanges=function(r,n){return this.matchOutputRanges(r,n,function(o,s,l){if((o.coordRanges||(o.coordRanges=[])).push(s),!o.coordRange){o.coordRange=s;var u=coordConvert[o.brushType](0,l,s);o.__rangeOffset={offset:diffProcessor[o.brushType](u.values,o.range,[1,1]),xyMinMax:u.xyMinMax}}}),r},a.prototype.matchOutputRanges=function(r,n,o){each$f(r,function(s){var l=this.findTargetInfo(s,n);l&&l!==!0&&each$f(l.coordSyses,function(u){var c=coordConvert[s.brushType](1,u,s.range,!0);o(s,c.values,u,n)})},this)},a.prototype.setInputRanges=function(r,n){each$f(r,function(o){var s=this.findTargetInfo(o,n);if(o.range=o.range||[],s&&s!==!0){o.panelId=s.panelId;var l=coordConvert[o.brushType](0,s.coordSys,o.coordRange),u=o.__rangeOffset;o.range=u?diffProcessor[o.brushType](l.values,u.offset,getScales(l.xyMinMax,u.xyMinMax)):l.values}},this)},a.prototype.makePanelOpts=function(r,n){return map$1(this._targetInfoList,function(o){var s=o.getPanelRect();return{panelId:o.panelId,defaultBrushType:n?n(o):null,clipPath:makeRectPanelClipPath(s),isTargetByCursor:makeRectIsTargetByCursor(s,r,o.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(s)}})},a.prototype.controlSeries=function(r,n,o){var s=this.findTargetInfo(r,o);return s===!0||s&&indexOf(s.coordSyses,n.coordinateSystem)>=0},a.prototype.findTargetInfo=function(r,n){for(var o=this._targetInfoList,s=parseFinder(n,r),l=0;l<o.length;l++){var u=o[l],c=r.panelId;if(c){if(u.panelId===c)return u}else for(var f=0;f<targetInfoMatchers.length;f++)if(targetInfoMatchers[f](s,u))return u}return!0},a}();function formatMinMax(a){return a[0]>a[1]&&a.reverse(),a}function parseFinder(a,r){return parseFinder$1(a,r,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(a,r){var n=a.xAxisModels,o=a.yAxisModels,s=a.gridModels,l=createHashMap(),u={},c={};!n&&!o&&!s||(each$f(n,function(f){var d=f.axis.grid.model;l.set(d.id,d),u[d.id]=!0}),each$f(o,function(f){var d=f.axis.grid.model;l.set(d.id,d),c[d.id]=!0}),each$f(s,function(f){l.set(f.id,f),u[f.id]=!0,c[f.id]=!0}),l.each(function(f){var d=f.coordinateSystem,v=[];each$f(d.getCartesians(),function(g,y){(indexOf(n,g.getAxis("x").model)>=0||indexOf(o,g.getAxis("y").model)>=0)&&v.push(g)}),r.push({panelId:"grid--"+f.id,gridModel:f,coordSysModel:f,coordSys:v[0],coordSyses:v,getPanelRect:panelRectBuilders.grid,xAxisDeclared:u[f.id],yAxisDeclared:c[f.id]})}))},geo:function(a,r){each$f(a.geoModels,function(n){var o=n.coordinateSystem;r.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:o,coordSyses:[o],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(a,r){var n=a.xAxisModel,o=a.yAxisModel,s=a.gridModel;return!s&&n&&(s=n.axis.grid.model),!s&&o&&(s=o.axis.grid.model),s&&s===r.gridModel},function(a,r){var n=a.geoModel;return n&&n===r.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var a=this.coordSys,r=a.getBoundingRect().clone();return r.applyTransform(getTransform$1(a)),r}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(a,r,n,o){var s=a?r.pointToData([n[0][0],n[1][0]],o):r.dataToPoint([n[0][0],n[1][0]],o),l=a?r.pointToData([n[0][1],n[1][1]],o):r.dataToPoint([n[0][1],n[1][1]],o),u=[formatMinMax([s[0],l[0]]),formatMinMax([s[1],l[1]])];return{values:u,xyMinMax:u}},polygon:function(a,r,n,o){var s=[[1/0,-1/0],[1/0,-1/0]],l=map$1(n,function(u){var c=a?r.pointToData(u,o):r.dataToPoint(u,o);return s[0][0]=Math.min(s[0][0],c[0]),s[1][0]=Math.min(s[1][0],c[1]),s[0][1]=Math.max(s[0][1],c[0]),s[1][1]=Math.max(s[1][1],c[1]),c});return{values:l,xyMinMax:s}}};function axisConvert(a,r,n,o){var s=n.getAxis(["x","y"][a]),l=formatMinMax(map$1([0,1],function(c){return r?s.coordToData(s.toLocalCoord(o[c]),!0):s.toGlobalCoord(s.dataToCoord(o[c]))})),u=[];return u[a]=l,u[1-a]=[NaN,NaN],{values:l,xyMinMax:u}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(a,r,n){return[[a[0][0]-n[0]*r[0][0],a[0][1]-n[0]*r[0][1]],[a[1][0]-n[1]*r[1][0],a[1][1]-n[1]*r[1][1]]]},polygon:function(a,r,n){return map$1(a,function(o,s){return[o[0]-n[0]*r[s][0],o[1]-n[1]*r[s][1]]})}};function axisDiffProcessor(a,r,n,o){return[r[0]-o[a]*n[0],r[1]-o[a]*n[1]]}function getScales(a,r){var n=getSize(a),o=getSize(r),s=[n[0]/o[0],n[1]/o[1]];return isNaN(s[0])&&(s[0]=1),isNaN(s[1])&&(s[1]=1),s}function getSize(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}var each$5=each$f,DATA_ZOOM_ID_BASE=makeInternalComponentId("toolbox-dataZoom_"),DataZoomFeature=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(n,o,s,l){this._brushController||(this._brushController=new BrushController(s.getZr()),this._brushController.on("brush",bind$1(this._onBrush,this)).mount()),updateZoomBtnStatus(n,o,this,l,s),updateBackBtnStatus(n,o)},r.prototype.onclick=function(n,o,s){handlers[s].call(this)},r.prototype.remove=function(n,o){this._brushController&&this._brushController.unmount()},r.prototype.dispose=function(n,o){this._brushController&&this._brushController.dispose()},r.prototype._onBrush=function(n){var o=n.areas;if(!n.isEnd||!o.length)return;var s={},l=this.ecModel;this._brushController.updateCovers([]);var u=new BrushTargetManager(makeAxisFinder(this.model),l,{include:["grid"]});u.matchOutputRanges(o,l,function(d,v,g){if(g.type==="cartesian2d"){var y=d.brushType;y==="rect"?(c("x",g,v[0]),c("y",g,v[1])):c({lineX:"x",lineY:"y"}[y],g,v)}}),push(l,s),this._dispatchZoomAction(s);function c(d,v,g){var y=v.getAxis(d),_=y.model,S=f(d,_,l),b=S.findRepresentativeAxisProxy(_).getMinMaxSpan();(b.minValueSpan!=null||b.maxValueSpan!=null)&&(g=sliderMove(0,g.slice(),y.scale.getExtent(),0,b.minValueSpan,b.maxValueSpan)),S&&(s[S.id]={dataZoomId:S.id,startValue:g[0],endValue:g[1]})}function f(d,v,g){var y;return g.eachComponent({mainType:"dataZoom",subType:"select"},function(_){var S=_.getAxisModel(d,v.componentIndex);S&&(y=_)}),y}},r.prototype._dispatchZoomAction=function(n){var o=[];each$5(n,function(s,l){o.push(clone$4(s))}),o.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:o})},r.getDefaultOption=function(n){var o={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:n.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:tokens.color.backgroundTint}};return o},r}(ToolboxFeature),handlers={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};function makeAxisFinder(a){var r={xAxisIndex:a.get("xAxisIndex",!0),yAxisIndex:a.get("yAxisIndex",!0),xAxisId:a.get("xAxisId",!0),yAxisId:a.get("yAxisId",!0)};return r.xAxisIndex==null&&r.xAxisId==null&&(r.xAxisIndex="all"),r.yAxisIndex==null&&r.yAxisId==null&&(r.yAxisIndex="all"),r}function updateBackBtnStatus(a,r){a.setIconStatus("back",count(r)>1?"emphasis":"normal")}function updateZoomBtnStatus(a,r,n,o,s){var l=n._isZoomActive;o&&o.type==="takeGlobalCursor"&&(l=o.key==="dataZoomSelect"?o.dataZoomSelectActive:!1),n._isZoomActive=l,a.setIconStatus("zoom",l?"emphasis":"normal");var u=new BrushTargetManager(makeAxisFinder(a),r,{include:["grid"]}),c=u.makePanelOpts(s,function(f){return f.xAxisDeclared&&!f.yAxisDeclared?"lineX":!f.xAxisDeclared&&f.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(c).enableBrush(l&&c.length?{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()}:!1)}registerInternalOptionCreator("dataZoom",function(a){var r=a.getComponent("toolbox",0),n=["feature","dataZoom"];if(!r||r.get(n)==null)return;var o=r.getModel(n),s=[],l=makeAxisFinder(o),u=parseFinder$1(a,l);each$5(u.xAxisModels,function(f){return c(f,"xAxis","xAxisIndex")}),each$5(u.yAxisModels,function(f){return c(f,"yAxis","yAxisIndex")});function c(f,d,v){var g=f.componentIndex,y={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+d+g};y[v]=g,s.push(y)}return s});function install$k(a){a.registerComponentModel(ToolboxModel),a.registerComponentView(ToolboxView),registerFeature("saveAsImage",SaveAsImage),registerFeature("magicType",MagicType),registerFeature("dataView",DataView$1),registerFeature("dataZoom",DataZoomFeature),registerFeature("restore",RestoreOption),use(install$l)}var TooltipModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.type="tooltip",r.dependencies=["axisPointer"],r.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,displayTransition:!0,enterable:!1,backgroundColor:tokens.color.neutral00,shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,defaultBorderColor:tokens.color.border,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:tokens.color.borderShade,width:1,type:"dashed",textStyle:{}}},textStyle:{color:tokens.color.tertiary,fontSize:14}},r}(ComponentModel);function shouldTooltipConfine(a){var r=a.get("confine");return r!=null?!!r:a.get("renderMode")==="richText"}function testStyle(a){if(env.domSupported){for(var r=document.documentElement.style,n=0,o=a.length;n<o;n++)if(a[n]in r)return a[n]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(a,r){if(!a)return r;r=toCamelCase(r,!0);var n=a.indexOf(r);return a=n===-1?r:"-"+a.slice(0,n)+"-"+r,a.toLowerCase()}function getComputedStyle(a,r){var n=a.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(a);return n?n[r]:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env.transform3dSupported?"will-change:transform;":"");function mirrorPos(a){return a=a==="left"?"right":a==="right"?"left":a==="top"?"bottom":"top",a}function assembleArrow(a,r,n){if(!isString(n)||n==="inside")return"";var o=a.get("backgroundColor"),s=a.get("borderWidth");r=convertToColorString(r);var l=mirrorPos(n),u=Math.max(Math.round(s)*1.5,6),c="",f=CSS_TRANSFORM_VENDOR+":",d;indexOf(["left","right"],l)>-1?(c+="top:50%",f+="translateY(-50%) rotate("+(d=l==="left"?-225:-45)+"deg)"):(c+="left:50%",f+="translateX(-50%) rotate("+(d=l==="top"?225:45)+"deg)");var v=d*Math.PI/180,g=u+s,y=g*Math.abs(Math.cos(v))+g*Math.abs(Math.sin(v)),_=Math.round(((y-Math.SQRT2*s)/2+Math.SQRT2*s-(y-g)/2)*100)/100;c+=";"+l+":-"+_+"px";var S=r+" solid "+s+"px;",b=["position:absolute;width:"+u+"px;height:"+u+"px;z-index:-1;",c+";"+f+";","border-bottom:"+S,"border-right:"+S,"background-color:"+o+";"];return'<div style="'+b.join("")+'"></div>'}function assembleTransition(a,r,n){var o="cubic-bezier(0.23,1,0.32,1)",s="",l="";return n&&(s=" "+a/2+"s "+o,l="opacity"+s+",visibility"+s),r||(s=" "+a+"s "+o,l+=(l.length?",":"")+(env.transformSupported?""+CSS_TRANSFORM_VENDOR+s:",left"+s+",top"+s)),CSS_TRANSITION_VENDOR+":"+l}function assembleTransform(a,r,n){var o=a.toFixed(0)+"px",s=r.toFixed(0)+"px";if(!env.transformSupported)return n?"top:"+s+";left:"+o+";":[["top",s],["left",o]];var l=env.transform3dSupported,u="translate"+(l?"3d":"")+"("+o+","+s+(l?",0":"")+")";return n?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+u+";":[["top",0],["left",0],[TRANSFORM_VENDOR,u]]}function assembleFont(a){var r=[],n=a.get("fontSize"),o=a.getTextColor();o&&r.push("color:"+o),r.push("font:"+a.getFont());var s=retrieve2(a.get("lineHeight"),Math.round(n*3/2));n&&r.push("line-height:"+s+"px");var l=a.get("textShadowColor"),u=a.get("textShadowBlur")||0,c=a.get("textShadowOffsetX")||0,f=a.get("textShadowOffsetY")||0;return l&&u&&r.push("text-shadow:"+c+"px "+f+"px "+u+"px "+l),each$f(["decoration","align"],function(d){var v=a.get(d);v&&r.push("text-"+d+":"+v)}),r.join(";")}function assembleCssText(a,r,n,o){var s=[],l=a.get("transitionDuration"),u=a.get("backgroundColor"),c=a.get("shadowBlur"),f=a.get("shadowColor"),d=a.get("shadowOffsetX"),v=a.get("shadowOffsetY"),g=a.getModel("textStyle"),y=getPaddingFromTooltipModel(a,"html"),_=d+"px "+v+"px "+c+"px "+f;return s.push("box-shadow:"+_),r&&l>0&&s.push(assembleTransition(l,n,o)),u&&s.push("background-color:"+u),each$f(["width","color","radius"],function(S){var b="border-"+S,x=toCamelCase(b),T=a.get(x);T!=null&&s.push(b+":"+T+(S==="color"?"":"px"))}),s.push(assembleFont(g)),y!=null&&s.push("padding:"+normalizeCssArray(y).join("px ")+"px"),s.join(";")+";"}function makeStyleCoord$1(a,r,n,o,s){var l=r&&r.painter;if(n){var u=l&&l.getViewportRoot();u&&transformLocalCoord(a,u,n,o,s)}else{a[0]=o,a[1]=s;var c=l&&l.getViewportRootOffset();c&&(a[0]+=c.offsetLeft,a[1]+=c.offsetTop)}a[2]=a[0]/r.getWidth(),a[3]=a[1]/r.getHeight()}var TooltipHTMLContent=function(){function a(r,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env.wxa)return null;var o=document.createElement("div");o.domBelongToZr=!0,this.el=o;var s=this._zr=r.getZr(),l=n.appendTo,u=l&&(isString(l)?document.querySelector(l):isDom(l)?l:isFunction(l)&&l(r.getDom()));makeStyleCoord$1(this._styleCoord,s,u,r.getWidth()/2,r.getHeight()/2),(u||r.getDom()).appendChild(o),this._api=r,this._container=u;var c=this;o.onmouseenter=function(){c._enterable&&(clearTimeout(c._hideTimeout),c._show=!0),c._inContent=!0},o.onmousemove=function(f){if(f=f||window.event,!c._enterable){var d=s.handler,v=s.painter.getViewportRoot();normalizeEvent(v,f,!0),d.dispatch("mousemove",f)}},o.onmouseleave=function(){c._inContent=!1,c._enterable&&c._show&&c.hideLater(c._hideDelay)}}return a.prototype.update=function(r){if(!this._container){var n=this._api.getDom(),o=getComputedStyle(n,"position"),s=n.style;s.position!=="absolute"&&o!=="absolute"&&(s.position="relative")}var l=r.get("alwaysShowContent");l&&this._moveIfResized(),this._alwaysShowContent=l,this._enableDisplayTransition=r.get("displayTransition")&&r.get("transitionDuration")>0,this.el.className=r.get("className")||""},a.prototype.show=function(r,n){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var o=this.el,s=o.style,l=this._styleCoord;o.innerHTML?s.cssText=gCssText+assembleCssText(r,!this._firstShow,this._longHide,this._enableDisplayTransition)+assembleTransform(l[0],l[1],!0)+("border-color:"+convertToColorString(n)+";")+(r.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):s.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},a.prototype.setContent=function(r,n,o,s,l){var u=this.el;if(r==null){u.innerHTML="";return}var c="";if(isString(l)&&o.get("trigger")==="item"&&!shouldTooltipConfine(o)&&(c=assembleArrow(o,s,l)),isString(r))u.innerHTML=r+c;else if(r){u.innerHTML="",isArray$1(r)||(r=[r]);for(var f=0;f<r.length;f++)isDom(r[f])&&r[f].parentNode!==u&&u.appendChild(r[f]);if(c&&u.childNodes.length){var d=document.createElement("div");d.innerHTML=c,u.appendChild(d)}}},a.prototype.setEnterable=function(r){this._enterable=r},a.prototype.getSize=function(){var r=this.el;return r?[r.offsetWidth,r.offsetHeight]:[0,0]},a.prototype.moveTo=function(r,n){if(this.el){var o=this._styleCoord;if(makeStyleCoord$1(o,this._zr,this._container,r,n),o[0]!=null&&o[1]!=null){var s=this.el.style,l=assembleTransform(o[0],o[1]);each$f(l,function(u){s[u[0]]=u[1]})}}},a.prototype._moveIfResized=function(){var r=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(r*this._zr.getWidth(),n*this._zr.getHeight())},a.prototype.hide=function(){var r=this,n=this.el.style;this._enableDisplayTransition?(n.visibility="hidden",n.opacity="0"):n.display="none",env.transform3dSupported&&(n.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return r._longHide=!0},500)},a.prototype.hideLater=function(r){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(r?(this._hideDelay=r,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),r)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this._zr;transformLocalCoordClear(r&&r.painter&&r.painter.getViewportRoot(),this._container);var n=this.el;if(n){n.onmouseenter=n.onmousemove=n.onmouseleave=null;var o=n.parentNode;o&&o.removeChild(n)}this.el=this._container=null},a}(),TooltipRichContent=function(){function a(r){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=r.getZr(),makeStyleCoord(this._styleCoord,this._zr,r.getWidth()/2,r.getHeight()/2)}return a.prototype.update=function(r){var n=r.get("alwaysShowContent");n&&this._moveIfResized(),this._alwaysShowContent=n},a.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},a.prototype.setContent=function(r,n,o,s,l){var u=this;isObject$3(r)&&throwError(""),this.el&&this._zr.remove(this.el);var c=o.getModel("textStyle");this.el=new ZRText({style:{rich:n.richTextStyles,text:r,lineHeight:22,borderWidth:1,borderColor:s,textShadowColor:c.get("textShadowColor"),fill:o.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(o,"richText"),verticalAlign:"top",align:"left"},z:o.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(d){u.el.style[d]=o.get(d)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(d){u.el.style[d]=c.get(d)||0}),this._zr.add(this.el);var f=this;this.el.on("mouseover",function(){f._enterable&&(clearTimeout(f._hideTimeout),f._show=!0),f._inContent=!0}),this.el.on("mouseout",function(){f._enterable&&f._show&&f.hideLater(f._hideDelay),f._inContent=!1})},a.prototype.setEnterable=function(r){this._enterable=r},a.prototype.getSize=function(){var r=this.el,n=this.el.getBoundingRect(),o=calcShadowOuterSize(r.style);return[n.width+o.left+o.right,n.height+o.top+o.bottom]},a.prototype.moveTo=function(r,n){var o=this.el;if(o){var s=this._styleCoord;makeStyleCoord(s,this._zr,r,n),r=s[0],n=s[1];var l=o.style,u=mathMaxWith0(l.borderWidth||0),c=calcShadowOuterSize(l);o.x=r+u+c.left,o.y=n+u+c.top,o.markRedraw()}},a.prototype._moveIfResized=function(){var r=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(r*this._zr.getWidth(),n*this._zr.getHeight())},a.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},a.prototype.hideLater=function(r){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(r?(this._hideDelay=r,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),r)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){this._zr.remove(this.el)},a}();function mathMaxWith0(a){return Math.max(0,a)}function calcShadowOuterSize(a){var r=mathMaxWith0(a.shadowBlur||0),n=mathMaxWith0(a.shadowOffsetX||0),o=mathMaxWith0(a.shadowOffsetY||0);return{left:mathMaxWith0(r-n),right:mathMaxWith0(r+n),top:mathMaxWith0(r-o),bottom:mathMaxWith0(r+o)}}function makeStyleCoord(a,r,n,o){a[0]=n,a[1]=o,a[2]=a[0]/r.getWidth(),a[3]=a[1]/r.getHeight()}var proxyRect=new Rect$2({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.init=function(n,o){if(!(env.node||!o.getDom())){var s=n.getComponent("tooltip"),l=this._renderMode=getTooltipRenderMode(s.get("renderMode"));this._tooltipContent=l==="richText"?new TooltipRichContent(o):new TooltipHTMLContent(o,{appendTo:s.get("appendToBody",!0)?"body":s.get("appendTo",!0)})}},r.prototype.render=function(n,o,s){if(!(env.node||!s.getDom())){this.group.removeAll(),this._tooltipModel=n,this._ecModel=o,this._api=s;var l=this._tooltipContent;l.update(n),l.setEnterable(n.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&n.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$1(this,"_updatePosition")}},r.prototype._initGlobalListener=function(){var n=this._tooltipModel,o=n.get("triggerOn");register("itemTooltip",this._api,bind$1(function(s,l,u){o!=="none"&&(o.indexOf(s)>=0?this._tryShow(l,u):s==="leave"&&this._hide(u))},this))},r.prototype._keepShow=function(){var n=this._tooltipModel,o=this._ecModel,s=this._api,l=n.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&l!=="none"&&l!=="click"){var u=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!s.isDisposed()&&u.manuallyShowTip(n,o,s,{x:u._lastX,y:u._lastY,dataByCoordSys:u._lastDataByCoordSys})})}},r.prototype.manuallyShowTip=function(n,o,s,l){if(!(l.from===this.uid||env.node||!s.getDom())){var u=makeDispatchAction(l,s);this._ticket="";var c=l.dataByCoordSys,f=findComponentReference(l,o,s);if(f){var d=f.el.getBoundingRect().clone();d.applyTransform(f.el.transform),this._tryShow({offsetX:d.x+d.width/2,offsetY:d.y+d.height/2,target:f.el,position:l.position,positionDefault:"bottom"},u)}else if(l.tooltip&&l.x!=null&&l.y!=null){var v=proxyRect;v.x=l.x,v.y=l.y,v.update(),getECData(v).tooltipConfig={name:null,option:l.tooltip},this._tryShow({offsetX:l.x,offsetY:l.y,target:v},u)}else if(c)this._tryShow({offsetX:l.x,offsetY:l.y,position:l.position,dataByCoordSys:c,tooltipOption:l.tooltipOption},u);else if(l.seriesIndex!=null){if(this._manuallyAxisShowTip(n,o,s,l))return;var g=findPointFromSeries(l,o),y=g.point[0],_=g.point[1];y!=null&&_!=null&&this._tryShow({offsetX:y,offsetY:_,target:g.el,position:l.position,positionDefault:"bottom"},u)}else l.x!=null&&l.y!=null&&(s.dispatchAction({type:"updateAxisPointer",x:l.x,y:l.y}),this._tryShow({offsetX:l.x,offsetY:l.y,position:l.position,target:s.getZr().findHover(l.x,l.y).target},u))}},r.prototype.manuallyHideTip=function(n,o,s,l){var u=this._tooltipContent;this._tooltipModel&&u.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,l.from!==this.uid&&this._hide(makeDispatchAction(l,s))},r.prototype._manuallyAxisShowTip=function(n,o,s,l){var u=l.seriesIndex,c=l.dataIndex,f=o.getComponent("axisPointer").coordSysAxesInfo;if(!(u==null||c==null||f==null)){var d=o.getSeriesByIndex(u);if(d){var v=d.getData(),g=buildTooltipModel([v.getItemModel(c),d,(d.coordinateSystem||{}).model],this._tooltipModel);if(g.get("trigger")==="axis")return s.dispatchAction({type:"updateAxisPointer",seriesIndex:u,dataIndex:c,position:l.position}),!0}}},r.prototype._tryShow=function(n,o){var s=n.target,l=this._tooltipModel;if(l){this._lastX=n.offsetX,this._lastY=n.offsetY;var u=n.dataByCoordSys;if(u&&u.length)this._showAxisTooltip(u,n);else if(s){var c=getECData(s);if(c.ssrType==="legend")return;this._lastDataByCoordSys=null;var f,d;findEventDispatcher(s,function(v){if(v.tooltipDisabled)return f=d=null,!0;f||d||(getECData(v).dataIndex!=null?f=v:getECData(v).tooltipConfig!=null&&(d=v))},!0),f?this._showSeriesItemTooltip(n,f,o):d?this._showComponentItemTooltip(n,d,o):this._hide(o)}else this._lastDataByCoordSys=null,this._hide(o)}},r.prototype._showOrMove=function(n,o){var s=n.get("showDelay");o=bind$1(o,this),clearTimeout(this._showTimout),s>0?this._showTimout=setTimeout(o,s):o()},r.prototype._showAxisTooltip=function(n,o){var s=this._ecModel,l=this._tooltipModel,u=[o.offsetX,o.offsetY],c=buildTooltipModel([o.tooltipOption],l),f=this._renderMode,d=[],v=createTooltipMarkup("section",{blocks:[],noHeader:!0}),g=[],y=new TooltipMarkupStyleCreator;each$f(n,function(A){each$f(A.dataByAxis,function(w){var C=s.getComponent(w.axisDim+"Axis",w.axisIndex),E=w.value;if(!(!C||E==null)){var P=getValueLabel(E,C.axis,s,w.seriesDataIndices,w.valueLabelOpt),I=createTooltipMarkup("section",{header:P,noHeader:!trim$1(P),sortBlocks:!0,blocks:[]});v.blocks.push(I),each$f(w.seriesDataIndices,function(M){var R=s.getSeriesByIndex(M.seriesIndex),O=M.dataIndexInside,$=R.getDataParams(O);if(!($.dataIndex<0)){$.axisDim=w.axisDim,$.axisIndex=w.axisIndex,$.axisType=w.axisType,$.axisId=w.axisId,$.axisValue=getAxisRawValue(C.axis,{value:E}),$.axisValueLabel=P,$.marker=y.makeTooltipMarker("item",convertToColorString($.color),f);var B=normalizeTooltipFormatResult(R.formatTooltip(O,!0,null)),F=B.frag;if(F){var z=buildTooltipModel([R],l).get("valueFormatter");I.blocks.push(z?extend({valueFormatter:z},F):F)}B.text&&g.push(B.text),d.push($)}})}})}),v.blocks.reverse(),g.reverse();var _=o.position,S=c.get("order"),b=buildTooltipMarkup(v,y,f,S,s.get("useUTC"),c.get("textStyle"));b&&g.unshift(b);var x=f==="richText"?`

`:"<br/>",T=g.join(x);this._showOrMove(c,function(){this._updateContentNotChangedOnAxis(n,d)?this._updatePosition(c,_,u[0],u[1],this._tooltipContent,d):this._showTooltipContent(c,T,d,Math.random()+"",u[0],u[1],_,null,y)})},r.prototype._showSeriesItemTooltip=function(n,o,s){var l=this._ecModel,u=getECData(o),c=u.seriesIndex,f=l.getSeriesByIndex(c),d=u.dataModel||f,v=u.dataIndex,g=u.dataType,y=d.getData(g),_=this._renderMode,S=n.positionDefault,b=buildTooltipModel([y.getItemModel(v),d,f&&(f.coordinateSystem||{}).model],this._tooltipModel,S?{position:S}:null),x=b.get("trigger");if(!(x!=null&&x!=="item")){var T=d.getDataParams(v,g),A=new TooltipMarkupStyleCreator;T.marker=A.makeTooltipMarker("item",convertToColorString(T.color),_);var w=normalizeTooltipFormatResult(d.formatTooltip(v,!1,g)),C=b.get("order"),E=b.get("valueFormatter"),P=w.frag,I=P?buildTooltipMarkup(E?extend({valueFormatter:E},P):P,A,_,C,l.get("useUTC"),b.get("textStyle")):w.text,M="item_"+d.name+"_"+v;this._showOrMove(b,function(){this._showTooltipContent(b,I,T,M,n.offsetX,n.offsetY,n.position,n.target,A)}),s({type:"showTip",dataIndexInside:v,dataIndex:y.getRawIndex(v),seriesIndex:c,from:this.uid})}},r.prototype._showComponentItemTooltip=function(n,o,s){var l=this._renderMode==="html",u=getECData(o),c=u.tooltipConfig,f=c.option||{},d=f.encodeHTMLContent;if(isString(f)){var v=f;f={content:v,formatter:v},d=!0}d&&l&&f.content&&(f=clone$4(f),f.content=encodeHTML(f.content));var g=[f],y=this._ecModel.getComponent(u.componentMainType,u.componentIndex);y&&g.push(y),g.push({formatter:f.content});var _=n.positionDefault,S=buildTooltipModel(g,this._tooltipModel,_?{position:_}:null),b=S.get("content"),x=Math.random()+"",T=new TooltipMarkupStyleCreator;this._showOrMove(S,function(){var A=clone$4(S.get("formatterParams")||{});this._showTooltipContent(S,b,A,x,n.offsetX,n.offsetY,n.position,o,T)}),s({type:"showTip",from:this.uid})},r.prototype._showTooltipContent=function(n,o,s,l,u,c,f,d,v){if(this._ticket="",!(!n.get("showContent")||!n.get("show"))){var g=this._tooltipContent;g.setEnterable(n.get("enterable"));var y=n.get("formatter");f=f||n.get("position");var _=o,S=this._getNearestPoint([u,c],s,n.get("trigger"),n.get("borderColor"),n.get("defaultBorderColor",!0)),b=S.color;if(y)if(isString(y)){var x=n.ecModel.get("useUTC"),T=isArray$1(s)?s[0]:s,A=T&&T.axisType&&T.axisType.indexOf("time")>=0;_=y,A&&(_=format(T.axisValue,_,x)),_=formatTpl(_,s,!0)}else if(isFunction(y)){var w=bind$1(function(C,E){C===this._ticket&&(g.setContent(E,v,n,b,f),this._updatePosition(n,f,u,c,g,s,d))},this);this._ticket=l,_=y(s,l,w)}else _=y;g.setContent(_,v,n,b,f),g.show(n,b),this._updatePosition(n,f,u,c,g,s,d)}},r.prototype._getNearestPoint=function(n,o,s,l,u){if(s==="axis"||isArray$1(o))return{color:l||u};if(!isArray$1(o))return{color:l||o.color||o.borderColor}},r.prototype._updatePosition=function(n,o,s,l,u,c,f){var d=this._api.getWidth(),v=this._api.getHeight();o=o||n.get("position");var g=u.getSize(),y=n.get("align"),_=n.get("verticalAlign"),S=f&&f.getBoundingRect().clone();if(f&&S.applyTransform(f.transform),isFunction(o)&&(o=o([s,l],c,u.el,S,{viewSize:[d,v],contentSize:g.slice()})),isArray$1(o))s=parsePercent(o[0],d),l=parsePercent(o[1],v);else if(isObject$3(o)){var b=o;b.width=g[0],b.height=g[1];var x=getLayoutRect(b,{width:d,height:v});s=x.x,l=x.y,y=null,_=null}else if(isString(o)&&f){var T=calcTooltipPosition(o,S,g,n.get("borderWidth"));s=T[0],l=T[1]}else{var T=refixTooltipPosition(s,l,u,d,v,y?null:20,_?null:20);s=T[0],l=T[1]}if(y&&(s-=isCenterAlign(y)?g[0]/2:y==="right"?g[0]:0),_&&(l-=isCenterAlign(_)?g[1]/2:_==="bottom"?g[1]:0),shouldTooltipConfine(n)){var T=confineTooltipPosition(s,l,u,d,v);s=T[0],l=T[1]}u.moveTo(s,l)},r.prototype._updateContentNotChangedOnAxis=function(n,o){var s=this._lastDataByCoordSys,l=this._cbParamsList,u=!!s&&s.length===n.length;return u&&each$f(s,function(c,f){var d=c.dataByAxis||[],v=n[f]||{},g=v.dataByAxis||[];u=u&&d.length===g.length,u&&each$f(d,function(y,_){var S=g[_]||{},b=y.seriesDataIndices||[],x=S.seriesDataIndices||[];u=u&&y.value===S.value&&y.axisType===S.axisType&&y.axisId===S.axisId&&b.length===x.length,u&&each$f(b,function(T,A){var w=x[A];u=u&&T.seriesIndex===w.seriesIndex&&T.dataIndex===w.dataIndex}),l&&each$f(y.seriesDataIndices,function(T){var A=T.seriesIndex,w=o[A],C=l[A];w&&C&&C.data!==w.data&&(u=!1)})})}),this._lastDataByCoordSys=n,this._cbParamsList=o,!!u},r.prototype._hide=function(n){this._lastDataByCoordSys=null,n({type:"hideTip",from:this.uid})},r.prototype.dispose=function(n,o){env.node||!o.getDom()||(clear$1(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",o))},r.type="tooltip",r}(ComponentView);function buildTooltipModel(a,r,n){var o=r.ecModel,s;n?(s=new Model(n,o,o),s=new Model(r.option,s,o)):s=r;for(var l=a.length-1;l>=0;l--){var u=a[l];u&&(u instanceof Model&&(u=u.get("tooltip",!0)),isString(u)&&(u={formatter:u}),u&&(s=new Model(u,s,o)))}return s}function makeDispatchAction(a,r){return a.dispatchAction||bind$1(r.dispatchAction,r)}function refixTooltipPosition(a,r,n,o,s,l,u){var c=n.getSize(),f=c[0],d=c[1];return l!=null&&(a+f+l+2>o?a-=f+l:a+=l),u!=null&&(r+d+u>s?r-=d+u:r+=u),[a,r]}function confineTooltipPosition(a,r,n,o,s){var l=n.getSize(),u=l[0],c=l[1];return a=Math.min(a+u,o)-u,r=Math.min(r+c,s)-c,a=Math.max(a,0),r=Math.max(r,0),[a,r]}function calcTooltipPosition(a,r,n,o){var s=n[0],l=n[1],u=Math.ceil(Math.SQRT2*o)+8,c=0,f=0,d=r.width,v=r.height;switch(a){case"inside":c=r.x+d/2-s/2,f=r.y+v/2-l/2;break;case"top":c=r.x+d/2-s/2,f=r.y-l-u;break;case"bottom":c=r.x+d/2-s/2,f=r.y+v+u;break;case"left":c=r.x-s-u,f=r.y+v/2-l/2;break;case"right":c=r.x+d+u,f=r.y+v/2-l/2}return[c,f]}function isCenterAlign(a){return a==="center"||a==="middle"}function findComponentReference(a,r,n){var o=preParseFinder(a).queryOptionMap,s=o.keys()[0];if(!(!s||s==="series")){var l=queryReferringComponents(r,s,o.get(s),{useDefault:!1,enableAll:!1,enableNone:!1}),u=l.models[0];if(u){var c=n.getViewOfComponentModel(u),f;if(c.group.traverse(function(d){var v=getECData(d).tooltipConfig;if(v&&v.name===a.name)return f=d,!0}),f)return{componentMainType:s,componentIndex:u.componentIndex,el:f}}}}function install$j(a){use(install$s),a.registerComponentModel(TooltipModel),a.registerComponentView(TooltipView),a.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop),a.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(a,r){var n=normalizeToArray(a?a.brush:[]);if(n.length){var o=[];each$f(n,function(f){var d=f.hasOwnProperty("toolbox")?f.toolbox:[];d instanceof Array&&(o=o.concat(d))});var s=a&&a.toolbox;isArray$1(s)&&(s=s[0]),s||(s={feature:{}},a.toolbox=[s]);var l=s.feature||(s.feature={}),u=l.brush||(l.brush={}),c=u.type||(u.type=[]);c.push.apply(c,o),removeDuplicate(c),r&&!c.length&&c.push.apply(c,DEFAULT_TOOLBOX_BTNS)}}function removeDuplicate(a){var r={};each$f(a,function(n){r[n]=1}),a.length=0,each$f(r,function(n,o){a.push(o)})}var each$4=each$f;function hasKeys(a){if(a){for(var r in a)if(a.hasOwnProperty(r))return!0}}function createVisualMappings(a,r,n){var o={};return each$4(r,function(l){var u=o[l]=s();each$4(a[l],function(c,f){if(VisualMapping.isValidType(f)){var d={type:f,visual:c};n&&n(d,l),u[f]=new VisualMapping(d),f==="opacity"&&(d=clone$4(d),d.type="colorAlpha",u.__hidden.__alphaForOpacity=new VisualMapping(d))}})}),o;function s(){var l=function(){};l.prototype.__hidden=l.prototype;var u=new l;return u}}function replaceVisualOption(a,r,n){var o;each$f(n,function(s){r.hasOwnProperty(s)&&hasKeys(r[s])&&(o=!0)}),o&&each$f(n,function(s){r.hasOwnProperty(s)&&hasKeys(r[s])?a[s]=clone$4(r[s]):delete a[s]})}function applyVisual(a,r,n,o,s,l){var u={};each$f(a,function(g){var y=VisualMapping.prepareVisualTypes(r[g]);u[g]=y});var c;function f(g){return getItemVisualFromData(n,c,g)}function d(g,y){setItemVisualFromData(n,c,g,y)}n.each(v);function v(g,y){c=g;var _=n.getRawDataItem(c);if(!(_&&_.visualMap===!1))for(var S=o.call(s,g),b=r[S],x=u[S],T=0,A=x.length;T<A;T++){var w=x[T];b[w]&&b[w].applyVisual(g,f,d)}}}function incrementalApplyVisual(a,r,n,o){var s={};return each$f(a,function(l){var u=VisualMapping.prepareVisualTypes(r[l]);s[l]=u}),{progress:function(u,c){var f;o!=null&&(f=c.getDimensionIndex(o));function d(E){return getItemVisualFromData(c,g,E)}function v(E,P){setItemVisualFromData(c,g,E,P)}for(var g,y=c.getStore();(g=u.next())!=null;){var _=c.getRawDataItem(g);if(!(_&&_.visualMap===!1))for(var S=o!=null?y.get(f,g):g,b=n(S),x=r[b],T=s[b],A=0,w=T.length;A<w;A++){var C=T[A];x[C]&&x[C].applyVisual(S,d,v)}}}}}function makeBrushCommonSelectorForSeries(a){var r=a.brushType,n={point:function(o){return selector[r].point(o,n,a)},rect:function(o){return selector[r].rect(o,n,a)}};return n}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(a,r,n){return a&&n.boundingRect.contain(a[0],a[1])},rect:function(a,r,n){return a&&n.boundingRect.intersect(a)}},polygon:{point:function(a,r,n){return a&&n.boundingRect.contain(a[0],a[1])&&contain(n.range,a[0],a[1])},rect:function(a,r,n){var o=n.range;if(!a||o.length<=1)return!1;var s=a.x,l=a.y,u=a.width,c=a.height,f=o[0];if(contain(o,s,l)||contain(o,s+u,l)||contain(o,s,l+c)||contain(o,s+u,l+c)||BoundingRect.create(a).contain(f[0],f[1])||linePolygonIntersect(s,l,s+u,l,o)||linePolygonIntersect(s,l,s,l+c,o)||linePolygonIntersect(s+u,l,s+u,l+c,o)||linePolygonIntersect(s,l+c,s+u,l+c,o))return!0}}};function getLineSelectors(a){var r=["x","y"],n=["width","height"];return{point:function(o,s,l){if(o){var u=l.range,c=o[a];return inLineRange(c,u)}},rect:function(o,s,l){if(o){var u=l.range,c=[o[r[a]],o[r[a]]+o[n[a]]];return c[1]<c[0]&&c.reverse(),inLineRange(c[0],u)||inLineRange(c[1],u)||inLineRange(u[0],c)||inLineRange(u[1],c)}}}}function inLineRange(a,r){return r[0]<=a&&a<=r[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(a){a.eachComponent({mainType:"brush"},function(r){var n=r.brushTargetManager=new BrushTargetManager(r.option,a);n.setInputRanges(r.areas,a)})}function brushVisual(a,r,n){var o=[],s,l;a.eachComponent({mainType:"brush"},function(u){n&&n.type==="takeGlobalCursor"&&u.setBrushOption(n.key==="brush"?n.brushOption:{brushType:!1})}),layoutCovers(a),a.eachComponent({mainType:"brush"},function(u,c){var f={brushId:u.id,brushIndex:c,brushName:u.name,areas:clone$4(u.areas),selected:[]};o.push(f);var d=u.option,v=d.brushLink,g=[],y=[],_=[],S=!1;c||(s=d.throttleType,l=d.throttleDelay);var b=map$1(u.areas,function(E){var P=boundingRectBuilders[E.brushType],I=defaults({boundingRect:P?P(E):void 0},E);return I.selectors=makeBrushCommonSelectorForSeries(I),I}),x=createVisualMappings(u.option,STATE_LIST,function(E){E.mappingMethod="fixed"});isArray$1(v)&&each$f(v,function(E){g[E]=1});function T(E){return v==="all"||!!g[E]}function A(E){return!!E.length}a.eachSeries(function(E,P){var I=_[P]=[];E.subType==="parallel"?w(E,P):C(E,P,I)});function w(E,P){var I=E.coordinateSystem;S=S||I.hasAxisBrushed(),T(P)&&I.eachActiveState(E.getData(),function(M,R){M==="active"&&(y[R]=1)})}function C(E,P,I){if(!(!E.brushSelector||brushModelNotControll(u,P))&&(each$f(b,function(R){u.brushTargetManager.controlSeries(R,E,a)&&I.push(R),S=S||A(I)}),T(P)&&A(I))){var M=E.getData();M.each(function(R){checkInRange(E,I,M,R)&&(y[R]=1)})}}a.eachSeries(function(E,P){var I={seriesId:E.id,seriesIndex:P,seriesName:E.name,dataIndex:[]};f.selected.push(I);var M=_[P],R=E.getData(),O=T(P)?function($){return y[$]?(I.dataIndex.push(R.getRawIndex($)),"inBrush"):"outOfBrush"}:function($){return checkInRange(E,M,R,$)?(I.dataIndex.push(R.getRawIndex($)),"inBrush"):"outOfBrush"};(T(P)?S:A(M))&&applyVisual(STATE_LIST,x,R,O)})}),dispatchAction$1(r,s,l,o,n)}function dispatchAction$1(a,r,n,o,s){if(s){var l=a.getZr();if(!l[DISPATCH_FLAG]){l[DISPATCH_METHOD]||(l[DISPATCH_METHOD]=doDispatch);var u=createOrUpdate(l,DISPATCH_METHOD,n,r);u(a,o)}}}function doDispatch(a,r){if(!a.isDisposed()){var n=a.getZr();n[DISPATCH_FLAG]=!0,a.dispatchAction({type:"brushSelect",batch:r}),n[DISPATCH_FLAG]=!1}}function checkInRange(a,r,n,o){for(var s=0,l=r.length;s<l;s++){var u=r[s];if(a.brushSelector(o,n,u.selectors,u))return!0}}function brushModelNotControll(a,r){var n=a.option.seriesIndex;return n!=null&&n!=="all"&&(isArray$1(n)?indexOf(n,r)<0:r!==n)}var boundingRectBuilders={rect:function(a){return getBoundingRectFromMinMax(a.range)},polygon:function(a){for(var r,n=a.range,o=0,s=n.length;o<s;o++){r=r||[[1/0,-1/0],[1/0,-1/0]];var l=n[o];l[0]<r[0][0]&&(r[0][0]=l[0]),l[0]>r[0][1]&&(r[0][1]=l[0]),l[1]<r[1][0]&&(r[1][0]=l[1]),l[1]>r[1][1]&&(r[1][1]=l[1])}return r&&getBoundingRectFromMinMax(r)}};function getBoundingRectFromMinMax(a){return new BoundingRect(a[0][0],a[1][0],a[0][1]-a[0][0],a[1][1]-a[1][0])}var BrushView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.init=function(n,o){this.ecModel=n,this.api=o,this.model,(this._brushController=new BrushController(o.getZr())).on("brush",bind$1(this._onBrush,this)).mount()},r.prototype.render=function(n,o,s,l){this.model=n,this._updateController(n,o,s,l)},r.prototype.updateTransform=function(n,o,s,l){layoutCovers(o),this._updateController(n,o,s,l)},r.prototype.updateVisual=function(n,o,s,l){this.updateTransform(n,o,s,l)},r.prototype.updateView=function(n,o,s,l){this._updateController(n,o,s,l)},r.prototype._updateController=function(n,o,s,l){(!l||l.$from!==n.id)&&this._brushController.setPanels(n.brushTargetManager.makePanelOpts(s)).enableBrush(n.brushOption).updateCovers(n.areas.slice())},r.prototype.dispose=function(){this._brushController.dispose()},r.prototype._onBrush=function(n){var o=this.model.id,s=this.model.brushTargetManager.setOutputRanges(n.areas,this.ecModel);(!n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:o,areas:clone$4(s),$from:o}),n.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:o,areas:clone$4(s),$from:o})},r.type="brush",r}(ComponentView),BrushModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.areas=[],n.brushOption={},n}return r.prototype.optionUpdated=function(n,o){var s=this.option;!o&&replaceVisualOption(s,n,["inBrush","outOfBrush"]);var l=s.inBrush=s.inBrush||{};s.outOfBrush=s.outOfBrush||{color:this.option.defaultOutOfBrushColor},l.hasOwnProperty("liftZ")||(l.liftZ=5)},r.prototype.setAreas=function(n){n&&(this.areas=map$1(n,function(o){return generateBrushOption(this.option,o)},this))},r.prototype.setBrushOption=function(n){this.brushOption=generateBrushOption(this.option,n),this.brushType=this.brushOption.brushType},r.type="brush",r.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],r.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:tokens.color.backgroundTint,borderColor:tokens.color.borderTint},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4,defaultOutOfBrushColor:tokens.color.disabled},r}(ComponentModel);function generateBrushOption(a,r){return merge({brushType:a.brushType,brushMode:a.brushMode,transformable:a.transformable,brushStyle:new Model(a.brushStyle).getItemStyle(),removeOnClick:a.removeOnClick,z:a.z},r,!0)}var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=function(a){__extends(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(n,o,s){var l,u,c;o.eachComponent({mainType:"brush"},function(f){l=f.brushType,u=f.brushOption.brushMode||"single",c=c||!!f.areas.length}),this._brushType=l,this._brushMode=u,each$f(n.get("type",!0),function(f){n.setIconStatus(f,(f==="keep"?u==="multiple":f==="clear"?c:f===l)?"emphasis":"normal")})},r.prototype.updateView=function(n,o,s){this.render(n,o,s)},r.prototype.getIcons=function(){var n=this.model,o=n.get("icon",!0),s={};return each$f(n.get("type",!0),function(l){o[l]&&(s[l]=o[l])}),s},r.prototype.onclick=function(n,o,s){var l=this._brushType,u=this._brushMode;s==="clear"?(o.dispatchAction({type:"axisAreaSelect",intervals:[]}),o.dispatchAction({type:"brush",command:"clear",areas:[]})):o.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:s==="keep"?l:l===s?!1:s,brushMode:s==="keep"?u==="multiple"?"single":"multiple":u}})},r.getDefaultOption=function(n){var o={show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:n.getLocaleModel().get(["toolbox","brush","title"])};return o},r}(ToolboxFeature);function install$i(a){a.registerComponentView(BrushView),a.registerComponentModel(BrushModel),a.registerPreprocessor(brushPreprocessor),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,brushVisual),a.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(r,n){n.eachComponent({mainType:"brush",query:r},function(o){o.setAreas(r.areas)})}),a.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop),a.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop),registerFeature("brush",BrushFeature)}var TitleModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.layoutMode={type:"box",ignoreSize:!0},n}return r.type="title",r.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:"center",top:tokens.size.m,backgroundColor:tokens.color.transparent,borderColor:tokens.color.primary,borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:tokens.color.primary},subtextStyle:{fontSize:12,color:tokens.color.quaternary}},r}(ComponentModel),TitleView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s){if(this.group.removeAll(),!!n.get("show")){var l=this.group,u=n.getModel("textStyle"),c=n.getModel("subtextStyle"),f=n.get("textAlign"),d=retrieve2(n.get("textBaseline"),n.get("textVerticalAlign")),v=new ZRText({style:createTextStyle(u,{text:n.get("text"),fill:u.getTextColor()},{disableBox:!0}),z2:10}),g=v.getBoundingRect(),y=n.get("subtext"),_=new ZRText({style:createTextStyle(c,{text:y,fill:c.getTextColor(),y:g.height+n.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),S=n.get("link"),b=n.get("sublink"),x=n.get("triggerEvent",!0);v.silent=!S&&!x,_.silent=!b&&!x,S&&v.on("click",function(){windowOpen(S,"_"+n.get("target"))}),b&&_.on("click",function(){windowOpen(b,"_"+n.get("subtarget"))}),getECData(v).eventData=getECData(_).eventData=x?{componentType:"title",componentIndex:n.componentIndex}:null,l.add(v),y&&l.add(_);var T=l.getBoundingRect(),A=n.getBoxLayoutParams();A.width=T.width,A.height=T.height;var w=createBoxLayoutReference(n,s),C=getLayoutRect(A,w.refContainer,n.get("padding"));f||(f=n.get("left")||n.get("right"),f==="middle"&&(f="center"),f==="right"?C.x+=C.width:f==="center"&&(C.x+=C.width/2)),d||(d=n.get("top")||n.get("bottom"),d==="center"&&(d="middle"),d==="bottom"?C.y+=C.height:d==="middle"&&(C.y+=C.height/2),d=d||"top"),l.x=C.x,l.y=C.y,l.markRedraw();var E={align:f,verticalAlign:d};v.setStyle(E),_.setStyle(E),T=l.getBoundingRect();var P=C.margin,I=n.getItemStyle(["color","opacity"]);I.fill=n.get("backgroundColor");var M=new Rect$2({shape:{x:T.x-P[3],y:T.y-P[0],width:T.width+P[1]+P[3],height:T.height+P[0]+P[2],r:n.get("borderRadius")},style:I,subPixelOptimize:!0,silent:!0});l.add(M)}},r.type="title",r}(ComponentView);function install$h(a){a.registerComponentModel(TitleModel),a.registerComponentView(TitleView)}var TimelineModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.layoutMode="box",n}return r.prototype.init=function(n,o,s){this.mergeDefaultAndTheme(n,s),this._initData()},r.prototype.mergeOption=function(n){a.prototype.mergeOption.apply(this,arguments),this._initData()},r.prototype.setCurrentIndex=function(n){n==null&&(n=this.option.currentIndex);var o=this._data.count();this.option.loop?n=(n%o+o)%o:(n>=o&&(n=o-1),n<0&&(n=0)),this.option.currentIndex=n},r.prototype.getCurrentIndex=function(){return this.option.currentIndex},r.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},r.prototype.setPlayState=function(n){this.option.autoPlay=!!n},r.prototype.getPlayState=function(){return!!this.option.autoPlay},r.prototype._initData=function(){var n=this.option,o=n.data||[],s=n.axisType,l=this._names=[],u;s==="category"?(u=[],each$f(o,function(d,v){var g=convertOptionIdName(getDataItemValue(d),""),y;isObject$3(d)?(y=clone$4(d),y.value=v):y=v,u.push(y),l.push(g)})):u=o;var c={category:"ordinal",time:"time",value:"number"}[s]||"number",f=this._data=new SeriesData([{name:"value",type:c}],this);f.initData(u,l)},r.prototype.getData=function(){return this._data},r.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},r.type="timeline",r.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:tokens.size.m,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:tokens.color.secondary},data:[]},r}(ComponentModel),SliderTimelineModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.type="timeline.slider",r.defaultOption=inheritDefaultOption(TimelineModel.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:tokens.color.border,borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:tokens.color.accent10},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:tokens.color.tertiary},itemStyle:{color:tokens.color.accent20,borderWidth:0},checkpointStyle:{symbol:"circle",symbolSize:15,color:tokens.color.accent50,borderColor:tokens.color.accent50,borderWidth:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0, 0, 0, 0)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0ZM15 3C8.37258 3 3 8.37258 3 15C3 21.6274 8.37258 27 15 27C21.6274 27 27 21.6274 27 15C27 8.37258 21.6274 3 15 3ZM11.5 10.6699C11.5 9.90014 12.3333 9.41887 13 9.80371L20.5 14.1338C21.1667 14.5187 21.1667 15.4813 20.5 15.8662L13 20.1963C12.3333 20.5811 11.5 20.0999 11.5 19.3301V10.6699Z",stopIcon:"path://M15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0ZM15 3C8.37258 3 3 8.37258 3 15C3 21.6274 8.37258 27 15 27C21.6274 27 27 21.6274 27 15C27 8.37258 21.6274 3 15 3ZM11.5 10C12.3284 10 13 10.6716 13 11.5V18.5C13 19.3284 12.3284 20 11.5 20C10.6716 20 10 19.3284 10 18.5V11.5C10 10.6716 10.6716 10 11.5 10ZM18.5 10C19.3284 10 20 10.6716 20 11.5V18.5C20 19.3284 19.3284 20 18.5 20C17.6716 20 17 19.3284 17 18.5V11.5C17 10.6716 17.6716 10 18.5 10Z",nextIcon:"path://M0.838834 18.7383C0.253048 18.1525 0.253048 17.2028 0.838834 16.617L7.55635 9.89949L0.838834 3.18198C0.253048 2.59619 0.253048 1.64645 0.838834 1.06066C1.42462 0.474874 2.37437 0.474874 2.96015 1.06066L10.7383 8.83883L10.8412 8.95277C11.2897 9.50267 11.2897 10.2963 10.8412 10.8462L10.7383 10.9602L2.96015 18.7383C2.37437 19.3241 1.42462 19.3241 0.838834 18.7383Z",prevIcon:"path://M10.9602 1.06066C11.5459 1.64645 11.5459 2.59619 10.9602 3.18198L4.24264 9.89949L10.9602 16.617C11.5459 17.2028 11.5459 18.1525 10.9602 18.7383C10.3744 19.3241 9.42462 19.3241 8.83883 18.7383L1.06066 10.9602L0.957771 10.8462C0.509245 10.2963 0.509245 9.50267 0.957771 8.95277L1.06066 8.83883L8.83883 1.06066C9.42462 0.474874 10.3744 0.474874 10.9602 1.06066Z",prevBtnSize:18,nextBtnSize:18,color:tokens.color.accent50,borderColor:tokens.color.accent50,borderWidth:0},emphasis:{label:{show:!0,color:tokens.color.accent60},itemStyle:{color:tokens.color.accent60,borderColor:tokens.color.accent60},controlStyle:{color:tokens.color.accent70,borderColor:tokens.color.accent70}},progress:{lineStyle:{color:tokens.color.accent30},itemStyle:{color:tokens.color.accent40}},data:[]}),r}(TimelineModel);mixin(SliderTimelineModel,DataFormatMixin.prototype);var TimelineView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.type="timeline",r}(ComponentView),TimelineAxis=function(a){__extends(r,a);function r(n,o,s,l){var u=a.call(this,n,o,s)||this;return u.type=l||"value",u}return r.prototype.getLabelModel=function(){return this.model.getModel("label")},r.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},r}(Axis),PI=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.init=function(n,o){this.api=o},r.prototype.render=function(n,o,s){if(this.model=n,this.api=s,this.ecModel=o,this.group.removeAll(),n.get("show",!0)){var l=this._layout(n,s),u=this._createGroup("_mainGroup"),c=this._createGroup("_labelGroup"),f=this._axis=this._createAxis(l,n);n.formatTooltip=function(d){var v=f.scale.getLabel({value:d});return createTooltipMarkup("nameValue",{noName:!0,value:v})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(d){this["_render"+d](l,u,f,n)},this),this._renderAxisLabel(l,c,f,n),this._position(l,n)}this._doPlayStop(),this._updateTicksStatus()},r.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},r.prototype.dispose=function(){this._clearTimer()},r.prototype._layout=function(n,o){var s=n.get(["label","position"]),l=n.get("orient"),u=getViewRect(n,o),c;s==null||s==="auto"?c=l==="horizontal"?u.y+u.height/2<o.getHeight()/2?"-":"+":u.x+u.width/2<o.getWidth()/2?"+":"-":isString(s)?c={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[l][s]:c=s;var f={horizontal:"center",vertical:c>=0||c==="+"?"left":"right"},d={horizontal:c>=0||c==="+"?"top":"bottom",vertical:"middle"},v={horizontal:0,vertical:PI/2},g=l==="vertical"?u.height:u.width,y=n.getModel("controlStyle"),_=y.get("show",!0),S=_?y.get("itemSize"):0,b=_?y.get("itemGap"):0,x=S+b,T=n.get(["label","rotate"])||0;T=T*PI/180;var A,w,C,E=y.get("position",!0),P=_&&y.get("showPlayBtn",!0),I=_&&y.get("showPrevBtn",!0),M=_&&y.get("showNextBtn",!0),R=0,O=g;E==="left"||E==="bottom"?(P&&(A=[0,0],R+=x),I&&(w=[R,0],R+=x),M&&(C=[O-S,0],O-=x)):(P&&(A=[O-S,0],O-=x),I&&(w=[0,0],R+=x),M&&(C=[O-S,0],O-=x));var $=[R,O];return n.get("inverse")&&$.reverse(),{viewRect:u,mainLength:g,orient:l,rotation:v[l],labelRotation:T,labelPosOpt:c,labelAlign:n.get(["label","align"])||f[l],labelBaseline:n.get(["label","verticalAlign"])||n.get(["label","baseline"])||d[l],playPosition:A,prevBtnPosition:w,nextBtnPosition:C,axisExtent:$,controlSize:S,controlGap:b}},r.prototype._position=function(n,o){var s=this._mainGroup,l=this._labelGroup,u=n.viewRect;if(n.orient==="vertical"){var c=create$1(),f=u.x,d=u.y+u.height;translate(c,c,[-f,-d]),rotate(c,c,-PI/2),translate(c,c,[f,d]),u=u.clone(),u.applyTransform(c)}var v=A(u),g=A(s.getBoundingRect()),y=A(l.getBoundingRect()),_=[s.x,s.y],S=[l.x,l.y];S[0]=_[0]=v[0][0];var b=n.labelPosOpt;if(b==null||isString(b)){var x=b==="+"?0:1;w(_,g,v,1,x),w(S,y,v,1,1-x)}else{var x=b>=0?0:1;w(_,g,v,1,x),S[1]=_[1]+b}s.setPosition(_),l.setPosition(S),s.rotation=l.rotation=n.rotation,T(s),T(l);function T(C){C.originX=v[0][0]-C.x,C.originY=v[1][0]-C.y}function A(C){return[[C.x,C.x+C.width],[C.y,C.y+C.height]]}function w(C,E,P,I,M){C[I]+=P[I][M]-E[I][M]}},r.prototype._createAxis=function(n,o){var s=o.getData(),l=o.get("axisType"),u=createScaleByModel(o,l);u.getTicks=function(){return s.mapArray(["value"],function(d){return{value:d}})};var c=s.getDataExtent("value");u.setExtent(c[0],c[1]),u.calcNiceTicks();var f=new TimelineAxis("value",u,n.axisExtent,l);return f.model=o,f},r.prototype._createGroup=function(n){var o=this[n]=new Group$3;return this.group.add(o),o},r.prototype._renderAxisLine=function(n,o,s,l){var u=s.getExtent();if(l.get(["lineStyle","show"])){var c=new Line$1({shape:{x1:u[0],y1:0,x2:u[1],y2:0},style:extend({lineCap:"round"},l.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});o.add(c);var f=this._progressLine=new Line$1({shape:{x1:u[0],x2:this._currentPointer?this._currentPointer.x:u[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:c.style.lineWidth},l.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});o.add(f)}},r.prototype._renderAxisTick=function(n,o,s,l){var u=this,c=l.getData(),f=s.scale.getTicks();this._tickSymbols=[],each$f(f,function(d){var v=s.dataToCoord(d.value),g=c.getItemModel(d.value),y=g.getModel("itemStyle"),_=g.getModel(["emphasis","itemStyle"]),S=g.getModel(["progress","itemStyle"]),b={x:v,y:0,onclick:bind$1(u._changeTimeline,u,d.value)},x=giveSymbol(g,y,o,b);x.ensureState("emphasis").style=_.getItemStyle(),x.ensureState("progress").style=S.getItemStyle(),enableHoverEmphasis(x);var T=getECData(x);g.get("tooltip")?(T.dataIndex=d.value,T.dataModel=l):T.dataIndex=T.dataModel=null,u._tickSymbols.push(x)})},r.prototype._renderAxisLabel=function(n,o,s,l){var u=this,c=s.getLabelModel();if(c.get("show")){var f=l.getData(),d=s.getViewLabels();this._tickLabels=[],each$f(d,function(v){var g=v.tickValue,y=f.getItemModel(g),_=y.getModel("label"),S=y.getModel(["emphasis","label"]),b=y.getModel(["progress","label"]),x=s.dataToCoord(v.tickValue),T=new ZRText({x,y:0,rotation:n.labelRotation-n.rotation,onclick:bind$1(u._changeTimeline,u,g),silent:!1,style:createTextStyle(_,{text:v.formattedLabel,align:n.labelAlign,verticalAlign:n.labelBaseline})});T.ensureState("emphasis").style=createTextStyle(S),T.ensureState("progress").style=createTextStyle(b),o.add(T),enableHoverEmphasis(T),labelDataIndexStore(T).dataIndex=g,u._tickLabels.push(T)})}},r.prototype._renderControl=function(n,o,s,l){var u=n.controlSize,c=n.rotation,f=l.getModel("controlStyle").getItemStyle(),d=l.getModel(["emphasis","controlStyle"]).getItemStyle(),v=l.getPlayState(),g=l.get("inverse",!0);y(n.nextBtnPosition,"next",bind$1(this._changeTimeline,this,g?"-":"+")),y(n.prevBtnPosition,"prev",bind$1(this._changeTimeline,this,g?"+":"-")),y(n.playPosition,v?"stop":"play",bind$1(this._handlePlayClick,this,!v),!0);function y(_,S,b,x){if(_){var T=parsePercent$1(retrieve2(l.get(["controlStyle",S+"BtnSize"]),u),u),A=[0,-T/2,T,T],w=makeControlIcon(l,S+"Icon",A,{x:_[0],y:_[1],originX:u/2,originY:0,rotation:x?-c:0,rectHover:!0,style:f,onclick:b});w.ensureState("emphasis").style=d,o.add(w),enableHoverEmphasis(w)}}},r.prototype._renderCurrentPointer=function(n,o,s,l){var u=l.getData(),c=l.getCurrentIndex(),f=u.getItemModel(c).getModel("checkpointStyle"),d=this,v={onCreate:function(g){g.draggable=!0,g.drift=bind$1(d._handlePointerDrag,d),g.ondragend=bind$1(d._handlePointerDragend,d),pointerMoveTo(g,d._progressLine,c,s,l,!0)},onUpdate:function(g){pointerMoveTo(g,d._progressLine,c,s,l)}};this._currentPointer=giveSymbol(f,f,this._mainGroup,{},this._currentPointer,v)},r.prototype._handlePlayClick=function(n){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:n,from:this.uid})},r.prototype._handlePointerDrag=function(n,o,s){this._clearTimer(),this._pointerChangeTimeline([s.offsetX,s.offsetY])},r.prototype._handlePointerDragend=function(n){this._pointerChangeTimeline([n.offsetX,n.offsetY],!0)},r.prototype._pointerChangeTimeline=function(n,o){var s=this._toAxisCoord(n)[0],l=this._axis,u=asc$2(l.getExtent().slice());s>u[1]&&(s=u[1]),s<u[0]&&(s=u[0]),this._currentPointer.x=s,this._currentPointer.markRedraw();var c=this._progressLine;c&&(c.shape.x2=s,c.dirty());var f=this._findNearestTick(s),d=this.model;(o||f!==d.getCurrentIndex()&&d.get("realtime"))&&this._changeTimeline(f)},r.prototype._doPlayStop=function(){var n=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var o=n.model;n._changeTimeline(o.getCurrentIndex()+(o.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},r.prototype._toAxisCoord=function(n){var o=this._mainGroup.getLocalTransform();return applyTransform(n,o,!0)},r.prototype._findNearestTick=function(n){var o=this.model.getData(),s=1/0,l,u=this._axis;return o.each(["value"],function(c,f){var d=u.dataToCoord(c),v=Math.abs(d-n);v<s&&(s=v,l=f)}),l},r.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},r.prototype._changeTimeline=function(n){var o=this.model.getCurrentIndex();n==="+"?n=o+1:n==="-"&&(n=o-1),this.api.dispatchAction({type:"timelineChange",currentIndex:n,from:this.uid})},r.prototype._updateTicksStatus=function(){var n=this.model.getCurrentIndex(),o=this._tickSymbols,s=this._tickLabels;if(o)for(var l=0;l<o.length;l++)o&&o[l]&&o[l].toggleState("progress",l<n);if(s)for(var l=0;l<s.length;l++)s&&s[l]&&s[l].toggleState("progress",labelDataIndexStore(s[l]).dataIndex<=n)},r.type="timeline.slider",r}(TimelineView);function createScaleByModel(a,r){if(r=r||a.get("type"),r)switch(r){case"category":return new OrdinalScale({ordinalMeta:a.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new IntervalScale}}function getViewRect(a,r){return getLayoutRect(a.getBoxLayoutParams(),createBoxLayoutReference(a,r).refContainer,a.get("padding"))}function makeControlIcon(a,r,n,o){var s=o.style,l=createIcon(a.get(["controlStyle",r]),o||{},new BoundingRect(n[0],n[1],n[2],n[3]));return s&&l.setStyle(s),l}function giveSymbol(a,r,n,o,s,l){var u=r.get("color");if(s)s.setColor(u),n.add(s),l&&l.onUpdate(s);else{var c=a.get("symbol");s=createSymbol$1(c,-1,-1,2,2,u),s.setStyle("strokeNoScale",!0),n.add(s),l&&l.onCreate(s)}var f=r.getItemStyle(["color"]);s.setStyle(f),o=merge({rectHover:!0,z2:100},o,!0);var d=normalizeSymbolSize(a.get("symbolSize"));o.scaleX=d[0]/2,o.scaleY=d[1]/2;var v=normalizeSymbolOffset(a.get("symbolOffset"),d);v&&(o.x=(o.x||0)+v[0],o.y=(o.y||0)+v[1]);var g=a.get("symbolRotate");return o.rotation=(g||0)*Math.PI/180||0,s.attr(o),s.updateTransform(),s}function pointerMoveTo(a,r,n,o,s,l){if(!a.dragging){var u=s.getModel("checkpointStyle"),c=o.dataToCoord(s.getData().get("value",n));if(l||!u.get("animation",!0))a.attr({x:c,y:0}),r&&r.attr({shape:{x2:c}});else{var f={duration:u.get("animationDuration",!0),easing:u.get("animationEasing",!0)};a.stopAnimation(null,!0),a.animateTo({x:c,y:0},f),r&&r.animateTo({shape:{x2:c}},f)}}}function installTimelineAction(a){a.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(r,n,o){var s=n.getComponent("timeline");return s&&r.currentIndex!=null&&(s.setCurrentIndex(r.currentIndex),!s.get("loop",!0)&&s.isIndexMax()&&s.getPlayState()&&(s.setPlayState(!1),o.dispatchAction({type:"timelinePlayChange",playState:!1,from:r.from}))),n.resetOption("timeline",{replaceMerge:s.get("replaceMerge",!0)}),defaults({currentIndex:s.option.currentIndex},r)}),a.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(r,n){var o=n.getComponent("timeline");o&&r.playState!=null&&o.setPlayState(r.playState)})}function timelinePreprocessor(a){var r=a&&a.timeline;isArray$1(r)||(r=r?[r]:[]),each$f(r,function(n){n&&compatibleEC2(n)})}function compatibleEC2(a){var r=a.type,n={number:"value",time:"time"};if(n[r]&&(a.axisType=n[r],delete a.type),transferItem(a),has$1(a,"controlPosition")){var o=a.controlStyle||(a.controlStyle={});has$1(o,"position")||(o.position=a.controlPosition),o.position==="none"&&!has$1(o,"show")&&(o.show=!1,delete o.position),delete a.controlPosition}each$f(a.data||[],function(s){isObject$3(s)&&!isArray$1(s)&&(!has$1(s,"value")&&has$1(s,"name")&&(s.value=s.name),transferItem(s))})}function transferItem(a){var r=a.itemStyle||(a.itemStyle={}),n=r.emphasis||(r.emphasis={}),o=a.label||a.label||{},s=o.normal||(o.normal={}),l={normal:1,emphasis:1};each$f(o,function(u,c){!l[c]&&!has$1(s,c)&&(s[c]=u)}),n.label&&!has$1(o,"emphasis")&&(o.emphasis=n.label,delete n.label)}function has$1(a,r){return a.hasOwnProperty(r)}function install$g(a){a.registerComponentModel(SliderTimelineModel),a.registerComponentView(SliderTimelineView),a.registerSubTypeDefaulter("timeline",function(){return"slider"}),installTimelineAction(a),a.registerPreprocessor(timelinePreprocessor)}function checkMarkerInSeries(a,r){if(!a)return!1;for(var n=isArray$1(a)?a:[a],o=0;o<n.length;o++)if(n[o]&&n[o][r])return!0;return!1}function fillLabel(a){defaultEmphasis(a,"label",["show"])}var inner$5=makeInner(),MarkerModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.createdBySelf=!1,n.preventAutoZ=!0,n}return r.prototype.init=function(n,o,s){this.mergeDefaultAndTheme(n,s),this._mergeOption(n,s,!1,!0)},r.prototype.isAnimationEnabled=function(){if(env.node)return!1;var n=this.__hostSeries;return this.getShallow("animation")&&n&&n.isAnimationEnabled()},r.prototype.mergeOption=function(n,o){this._mergeOption(n,o,!1,!1)},r.prototype._mergeOption=function(n,o,s,l){var u=this.mainType;s||o.eachSeries(function(c){var f=c.get(this.mainType,!0),d=inner$5(c)[u];if(!f||!f.data){inner$5(c)[u]=null;return}d?d._mergeOption(f,o,!0):(l&&fillLabel(f),each$f(f.data,function(v){v instanceof Array?(fillLabel(v[0]),fillLabel(v[1])):fillLabel(v)}),d=this.createMarkerModelFromSeries(f,this,o),extend(d,{mainType:this.mainType,seriesIndex:c.seriesIndex,name:c.name,createdBySelf:!0}),d.__hostSeries=c),inner$5(c)[u]=d},this)},r.prototype.formatTooltip=function(n,o,s){var l=this.getData(),u=this.getRawValue(n),c=l.getName(n);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:c,value:u,noName:!c,noValue:u==null})]})},r.prototype.getData=function(){return this._data},r.prototype.setData=function(n){this._data=n},r.prototype.getDataParams=function(n,o){var s=DataFormatMixin.prototype.getDataParams.call(this,n,o),l=this.__hostSeries;return l&&(s.seriesId=l.id,s.seriesName=l.name,s.seriesType=l.subType),s},r.getMarkerModelFromSeries=function(n,o){return inner$5(n)[o]},r.type="marker",r.dependencies=["series","grid","polar","geo"],r}(ComponentModel);mixin(MarkerModel,DataFormatMixin.prototype);var MarkPointModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.createMarkerModelFromSeries=function(n,o,s){return new r(n,o,s)},r.type="markPoint",r.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},r}(MarkerModel);function hasXOrY(a){return!(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}function hasXAndY(a){return!isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}function markerTypeCalculatorWithExtent(a,r,n,o,s,l,u){var c=[],f=isDimensionStacked(r,s),d=f?r.getCalculationInfo("stackResultDimension"):s,v=numCalculate(r,d,a),g=r.hostModel,y=g.indicesOfNearest(n,d,v)[0];c[l]=r.get(o,y),c[u]=r.get(d,y);var _=r.get(s,y),S=getPrecision(r.get(s,y));return S=Math.min(S,20),S>=0&&(c[u]=+c[u].toFixed(S)),[c,_]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(a,r){if(r){var n=a.getData(),o=a.coordinateSystem,s=o&&o.dimensions;if(!hasXAndY(r)&&!isArray$1(r.coord)&&isArray$1(s)){var l=getAxisInfo(r,n,o,a);if(r=clone$4(r),r.type&&markerTypeCalculator[r.type]&&l.baseAxis&&l.valueAxis){var u=indexOf(s,l.baseAxis.dim),c=indexOf(s,l.valueAxis.dim),f=markerTypeCalculator[r.type](n,l.valueAxis.dim,l.baseDataDim,l.valueDataDim,u,c);r.coord=f[0],r.value=f[1]}else r.coord=[r.xAxis!=null?r.xAxis:r.radiusAxis,r.yAxis!=null?r.yAxis:r.angleAxis]}if(r.coord==null||!isArray$1(s)){r.coord=[];var d=a.getBaseAxis();if(d&&r.type&&markerTypeCalculator[r.type]){var v=o.getOtherAxis(d);v&&(r.value=numCalculate(n,n.mapDimension(v.dim),r.type))}}else for(var g=r.coord,y=0;y<2;y++)markerTypeCalculator[g[y]]&&(g[y]=numCalculate(n,n.mapDimension(s[y]),g[y]));return r}}function getAxisInfo(a,r,n,o){var s={};return a.valueIndex!=null||a.valueDim!=null?(s.valueDataDim=a.valueIndex!=null?r.getDimension(a.valueIndex):a.valueDim,s.valueAxis=n.getAxis(dataDimToCoordDim(o,s.valueDataDim)),s.baseAxis=n.getOtherAxis(s.valueAxis),s.baseDataDim=r.mapDimension(s.baseAxis.dim)):(s.baseAxis=o.getBaseAxis(),s.valueAxis=n.getOtherAxis(s.baseAxis),s.baseDataDim=r.mapDimension(s.baseAxis.dim),s.valueDataDim=r.mapDimension(s.valueAxis.dim)),s}function dataDimToCoordDim(a,r){var n=a.getData().getDimensionInfo(r);return n&&n.coordDim}function dataFilter(a,r){return a&&a.containData&&r.coord&&!hasXOrY(r)?a.containData(r.coord):!0}function zoneFilter(a,r,n){return a&&a.containZone&&r.coord&&n.coord&&!hasXOrY(r)&&!hasXOrY(n)?a.containZone(r.coord,n.coord):!0}function createMarkerDimValueGetter(a,r){return a?function(n,o,s,l){var u=l<2?n.coord&&n.coord[l]:n.value;return parseDataValue(u,r[l])}:function(n,o,s,l){return parseDataValue(n.value,r[l])}}function numCalculate(a,r,n){if(n==="average"){var o=0,s=0;return a.each(r,function(l,u){isNaN(l)||(o+=l,s++)}),o/s}else return n==="median"?a.getMedian(r):a.getDataExtent(r)[n==="max"?1:0]}var inner$4=makeInner(),MarkerView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.init=function(){this.markerGroupMap=createHashMap()},r.prototype.render=function(n,o,s){var l=this,u=this.markerGroupMap;u.each(function(c){inner$4(c).keep=!1}),o.eachSeries(function(c){var f=MarkerModel.getMarkerModelFromSeries(c,l.type);f&&l.renderSeries(c,f,o,s)}),u.each(function(c){!inner$4(c).keep&&l.group.remove(c.group)}),updateZ$1(o,u,this.type)},r.prototype.markKeep=function(n){inner$4(n).keep=!0},r.prototype.toggleBlurSeries=function(n,o){var s=this;each$f(n,function(l){var u=MarkerModel.getMarkerModelFromSeries(l,s.type);if(u){var c=u.getData();c.eachItemGraphicEl(function(f){f&&(o?enterBlur(f):leaveBlur(f))})}})},r.type="marker",r}(ComponentView);function updateZ$1(a,r,n){a.eachSeries(function(o){var s=MarkerModel.getMarkerModelFromSeries(o,n),l=r.get(o.id);if(s&&l&&l.group){var u=retrieveZInfo(s),c=u.z,f=u.zlevel;traverseUpdateZ(l.group,c,f)}})}function updateMarkerLayout(a,r,n){var o=r.coordinateSystem,s=n.getWidth(),l=n.getHeight(),u=o&&o.getArea&&o.getArea();a.each(function(c){var f=a.getItemModel(c),d=f.get("relativeTo")==="coordinate",v=d?u?u.width:0:s,g=d?u?u.height:0:l,y=d&&u?u.x:0,_=d&&u?u.y:0,S,b=parsePercent(f.get("x"),v)+y,x=parsePercent(f.get("y"),g)+_;if(!isNaN(b)&&!isNaN(x))S=[b,x];else if(r.getMarkerPosition)S=r.getMarkerPosition(a.getValues(a.dimensions,c));else if(o){var T=a.get(o.dimensions[0],c),A=a.get(o.dimensions[1],c);S=o.dataToPoint([T,A])}isNaN(b)||(S[0]=b),isNaN(x)||(S[1]=x),a.setItemLayout(c,S)})}var MarkPointView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.updateTransform=function(n,o,s){o.eachSeries(function(l){var u=MarkerModel.getMarkerModelFromSeries(l,"markPoint");u&&(updateMarkerLayout(u.getData(),l,s),this.markerGroupMap.get(l.id).updateLayout())},this)},r.prototype.renderSeries=function(n,o,s,l){var u=n.coordinateSystem,c=n.id,f=n.getData(),d=this.markerGroupMap,v=d.get(c)||d.set(c,new SymbolDraw),g=createData(u,n,o);o.setData(g),updateMarkerLayout(o.getData(),n,l),g.each(function(y){var _=g.getItemModel(y),S=_.getShallow("symbol"),b=_.getShallow("symbolSize"),x=_.getShallow("symbolRotate"),T=_.getShallow("symbolOffset"),A=_.getShallow("symbolKeepAspect");if(isFunction(S)||isFunction(b)||isFunction(x)||isFunction(T)){var w=o.getRawValue(y),C=o.getDataParams(y);isFunction(S)&&(S=S(w,C)),isFunction(b)&&(b=b(w,C)),isFunction(x)&&(x=x(w,C)),isFunction(T)&&(T=T(w,C))}var E=_.getModel("itemStyle").getItemStyle(),P=_.get("z2"),I=getVisualFromData(f,"color");E.fill||(E.fill=I),g.setItemVisual(y,{z2:retrieve2(P,0),symbol:S,symbolSize:b,symbolRotate:x,symbolOffset:T,symbolKeepAspect:A,style:E})}),v.updateData(g),this.group.add(v.group),g.eachItemGraphicEl(function(y){y.traverse(function(_){getECData(_).dataModel=o})}),this.markKeep(v),v.group.silent=o.get("silent")||n.get("silent")},r.type="markPoint",r}(MarkerView);function createData(a,r,n){var o;a?o=map$1(a&&a.dimensions,function(c){var f=r.getData().getDimensionInfo(r.getData().mapDimension(c))||{};return extend(extend({},f),{name:c,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var s=new SeriesData(o,n),l=map$1(n.get("data"),curry$1(dataTransform,r));a&&(l=filter(l,curry$1(dataFilter,a)));var u=createMarkerDimValueGetter(!!a,o);return s.initData(l,null,u),s}function install$f(a){a.registerComponentModel(MarkPointModel),a.registerComponentView(MarkPointView),a.registerPreprocessor(function(r){checkMarkerInSeries(r.series,"markPoint")&&(r.markPoint=r.markPoint||{})})}var MarkLineModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.createMarkerModelFromSeries=function(n,o,s){return new r(n,o,s)},r.type="markLine",r.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},r}(MarkerModel),inner$3=makeInner(),markLineTransform=function(a,r,n,o){var s=a.getData(),l;if(isArray$1(o))l=o;else{var u=o.type;if(u==="min"||u==="max"||u==="average"||u==="median"||o.xAxis!=null||o.yAxis!=null){var c=void 0,f=void 0;if(o.yAxis!=null||o.xAxis!=null)c=r.getAxis(o.yAxis!=null?"y":"x"),f=retrieve(o.yAxis,o.xAxis);else{var d=getAxisInfo(o,s,r,a);c=d.valueAxis;var v=getStackedDimension(s,d.valueDataDim);f=numCalculate(s,v,u)}var g=c.dim==="x"?0:1,y=1-g,_=clone$4(o),S={coord:[]};_.type=null,_.coord=[],_.coord[y]=-1/0,S.coord[y]=1/0;var b=n.get("precision");b>=0&&isNumber(f)&&(f=+f.toFixed(Math.min(b,20))),_.coord[g]=S.coord[g]=f,l=[_,S,{type:u,valueIndex:o.valueIndex,value:f}]}else l=[]}var x=[dataTransform(a,l[0]),dataTransform(a,l[1]),extend({},l[2])];return x[2].type=x[2].type||null,merge(x[2],x[0]),merge(x[2],x[1]),x};function isInfinity$1(a){return!isNaN(a)&&!isFinite(a)}function ifMarkLineHasOnlyDim(a,r,n,o){var s=1-a,l=o.dimensions[a];return isInfinity$1(r[s])&&isInfinity$1(n[s])&&r[a]===n[a]&&o.getAxis(l).containData(r[a])}function markLineFilter(a,r){if(a.type==="cartesian2d"){var n=r[0].coord,o=r[1].coord;if(n&&o&&(ifMarkLineHasOnlyDim(1,n,o,a)||ifMarkLineHasOnlyDim(0,n,o,a)))return!0}return dataFilter(a,r[0])&&dataFilter(a,r[1])}function updateSingleMarkerEndLayout(a,r,n,o,s){var l=o.coordinateSystem,u=a.getItemModel(r),c,f=parsePercent(u.get("x"),s.getWidth()),d=parsePercent(u.get("y"),s.getHeight());if(!isNaN(f)&&!isNaN(d))c=[f,d];else{if(o.getMarkerPosition)c=o.getMarkerPosition(a.getValues(a.dimensions,r));else{var v=l.dimensions,g=a.get(v[0],r),y=a.get(v[1],r);c=l.dataToPoint([g,y])}if(isCoordinateSystemType(l,"cartesian2d")){var _=l.getAxis("x"),S=l.getAxis("y"),v=l.dimensions;isInfinity$1(a.get(v[0],r))?c[0]=_.toGlobalCoord(_.getExtent()[n?0:1]):isInfinity$1(a.get(v[1],r))&&(c[1]=S.toGlobalCoord(S.getExtent()[n?0:1]))}isNaN(f)||(c[0]=f),isNaN(d)||(c[1]=d)}a.setItemLayout(r,c)}var MarkLineView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.updateTransform=function(n,o,s){o.eachSeries(function(l){var u=MarkerModel.getMarkerModelFromSeries(l,"markLine");if(u){var c=u.getData(),f=inner$3(u).from,d=inner$3(u).to;f.each(function(v){updateSingleMarkerEndLayout(f,v,!0,l,s),updateSingleMarkerEndLayout(d,v,!1,l,s)}),c.each(function(v){c.setItemLayout(v,[f.getItemLayout(v),d.getItemLayout(v)])}),this.markerGroupMap.get(l.id).updateLayout()}},this)},r.prototype.renderSeries=function(n,o,s,l){var u=n.coordinateSystem,c=n.id,f=n.getData(),d=this.markerGroupMap,v=d.get(c)||d.set(c,new LineDraw);this.group.add(v.group);var g=createList$1(u,n,o),y=g.from,_=g.to,S=g.line;inner$3(o).from=y,inner$3(o).to=_,o.setData(S);var b=o.get("symbol"),x=o.get("symbolSize"),T=o.get("symbolRotate"),A=o.get("symbolOffset");isArray$1(b)||(b=[b,b]),isArray$1(x)||(x=[x,x]),isArray$1(T)||(T=[T,T]),isArray$1(A)||(A=[A,A]),g.from.each(function(C){w(y,C,!0),w(_,C,!1)}),S.each(function(C){var E=S.getItemModel(C),P=E.getModel("lineStyle").getLineStyle();S.setItemLayout(C,[y.getItemLayout(C),_.getItemLayout(C)]);var I=E.get("z2");P.stroke==null&&(P.stroke=y.getItemVisual(C,"style").fill),S.setItemVisual(C,{z2:retrieve2(I,0),fromSymbolKeepAspect:y.getItemVisual(C,"symbolKeepAspect"),fromSymbolOffset:y.getItemVisual(C,"symbolOffset"),fromSymbolRotate:y.getItemVisual(C,"symbolRotate"),fromSymbolSize:y.getItemVisual(C,"symbolSize"),fromSymbol:y.getItemVisual(C,"symbol"),toSymbolKeepAspect:_.getItemVisual(C,"symbolKeepAspect"),toSymbolOffset:_.getItemVisual(C,"symbolOffset"),toSymbolRotate:_.getItemVisual(C,"symbolRotate"),toSymbolSize:_.getItemVisual(C,"symbolSize"),toSymbol:_.getItemVisual(C,"symbol"),style:P})}),v.updateData(S),g.line.eachItemGraphicEl(function(C){getECData(C).dataModel=o,C.traverse(function(E){getECData(E).dataModel=o})});function w(C,E,P){var I=C.getItemModel(E);updateSingleMarkerEndLayout(C,E,P,n,l);var M=I.getModel("itemStyle").getItemStyle();M.fill==null&&(M.fill=getVisualFromData(f,"color")),C.setItemVisual(E,{symbolKeepAspect:I.get("symbolKeepAspect"),symbolOffset:retrieve2(I.get("symbolOffset",!0),A[P?0:1]),symbolRotate:retrieve2(I.get("symbolRotate",!0),T[P?0:1]),symbolSize:retrieve2(I.get("symbolSize"),x[P?0:1]),symbol:retrieve2(I.get("symbol",!0),b[P?0:1]),style:M})}this.markKeep(v),v.group.silent=o.get("silent")||n.get("silent")},r.type="markLine",r}(MarkerView);function createList$1(a,r,n){var o;a?o=map$1(a&&a.dimensions,function(d){var v=r.getData().getDimensionInfo(r.getData().mapDimension(d))||{};return extend(extend({},v),{name:d,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var s=new SeriesData(o,n),l=new SeriesData(o,n),u=new SeriesData([],n),c=map$1(n.get("data"),curry$1(markLineTransform,r,a,n));a&&(c=filter(c,curry$1(markLineFilter,a)));var f=createMarkerDimValueGetter(!!a,o);return s.initData(map$1(c,function(d){return d[0]}),null,f),l.initData(map$1(c,function(d){return d[1]}),null,f),u.initData(map$1(c,function(d){return d[2]})),u.hasItemOption=!0,{from:s,to:l,line:u}}function install$e(a){a.registerComponentModel(MarkLineModel),a.registerComponentView(MarkLineView),a.registerPreprocessor(function(r){checkMarkerInSeries(r.series,"markLine")&&(r.markLine=r.markLine||{})})}var MarkAreaModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.createMarkerModelFromSeries=function(n,o,s){return new r(n,o,s)},r.type="markArea",r.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},r}(MarkerModel),inner$2=makeInner(),markAreaTransform=function(a,r,n,o){var s=o[0],l=o[1];if(!(!s||!l)){var u=dataTransform(a,s),c=dataTransform(a,l),f=u.coord,d=c.coord;f[0]=retrieve(f[0],-1/0),f[1]=retrieve(f[1],-1/0),d[0]=retrieve(d[0],1/0),d[1]=retrieve(d[1],1/0);var v=mergeAll([{},u,c]);return v.coord=[u.coord,c.coord],v.x0=u.x,v.y0=u.y,v.x1=c.x,v.y1=c.y,v}};function isInfinity(a){return!isNaN(a)&&!isFinite(a)}function ifMarkAreaHasOnlyDim(a,r,n,o){var s=1-a;return isInfinity(r[s])&&isInfinity(n[s])}function markAreaFilter(a,r){var n=r.coord[0],o=r.coord[1],s={coord:n,x:r.x0,y:r.y0},l={coord:o,x:r.x1,y:r.y1};return isCoordinateSystemType(a,"cartesian2d")?n&&o&&(ifMarkAreaHasOnlyDim(1,n,o)||ifMarkAreaHasOnlyDim(0,n,o))?!0:zoneFilter(a,s,l):dataFilter(a,s)||dataFilter(a,l)}function getSingleMarkerEndPoint(a,r,n,o,s){var l=o.coordinateSystem,u=a.getItemModel(r),c,f=parsePercent(u.get(n[0]),s.getWidth()),d=parsePercent(u.get(n[1]),s.getHeight());if(!isNaN(f)&&!isNaN(d))c=[f,d];else{if(o.getMarkerPosition){var v=a.getValues(["x0","y0"],r),g=a.getValues(["x1","y1"],r),y=l.clampData(v),_=l.clampData(g),S=[];n[0]==="x0"?S[0]=y[0]>_[0]?g[0]:v[0]:S[0]=y[0]>_[0]?v[0]:g[0],n[1]==="y0"?S[1]=y[1]>_[1]?g[1]:v[1]:S[1]=y[1]>_[1]?v[1]:g[1],c=o.getMarkerPosition(S,n,!0)}else{var b=a.get(n[0],r),x=a.get(n[1],r),T=[b,x];l.clampData&&l.clampData(T,T),c=l.dataToPoint(T,!0)}if(isCoordinateSystemType(l,"cartesian2d")){var A=l.getAxis("x"),w=l.getAxis("y"),b=a.get(n[0],r),x=a.get(n[1],r);isInfinity(b)?c[0]=A.toGlobalCoord(A.getExtent()[n[0]==="x0"?0:1]):isInfinity(x)&&(c[1]=w.toGlobalCoord(w.getExtent()[n[1]==="y0"?0:1]))}isNaN(f)||(c[0]=f),isNaN(d)||(c[1]=d)}return c}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.updateTransform=function(n,o,s){o.eachSeries(function(l){var u=MarkerModel.getMarkerModelFromSeries(l,"markArea");if(u){var c=u.getData();c.each(function(f){var d=map$1(dimPermutations,function(g){return getSingleMarkerEndPoint(c,f,g,l,s)});c.setItemLayout(f,d);var v=c.getItemGraphicEl(f);v.setShape("points",d)})}},this)},r.prototype.renderSeries=function(n,o,s,l){var u=n.coordinateSystem,c=n.id,f=n.getData(),d=this.markerGroupMap,v=d.get(c)||d.set(c,{group:new Group$3});this.group.add(v.group),this.markKeep(v);var g=createList(u,n,o);o.setData(g),g.each(function(y){var _=map$1(dimPermutations,function(O){return getSingleMarkerEndPoint(g,y,O,n,l)}),S=u.getAxis("x").scale,b=u.getAxis("y").scale,x=S.getExtent(),T=b.getExtent(),A=[S.parse(g.get("x0",y)),S.parse(g.get("x1",y))],w=[b.parse(g.get("y0",y)),b.parse(g.get("y1",y))];asc$2(A),asc$2(w);var C=!(x[0]>A[1]||x[1]<A[0]||T[0]>w[1]||T[1]<w[0]),E=!C;g.setItemLayout(y,{points:_,allClipped:E});var P=g.getItemModel(y),I=P.getModel("itemStyle").getItemStyle(),M=P.get("z2"),R=getVisualFromData(f,"color");I.fill||(I.fill=R,isString(I.fill)&&(I.fill=modifyAlpha(I.fill,.4))),I.stroke||(I.stroke=R),g.setItemVisual(y,"style",I),g.setItemVisual(y,"z2",retrieve2(M,0))}),g.diff(inner$2(v).data).add(function(y){var _=g.getItemLayout(y),S=g.getItemVisual(y,"z2");if(!_.allClipped){var b=new Polygon({z2:retrieve2(S,0),shape:{points:_.points}});g.setItemGraphicEl(y,b),v.group.add(b)}}).update(function(y,_){var S=inner$2(v).data.getItemGraphicEl(_),b=g.getItemLayout(y),x=g.getItemVisual(y,"z2");b.allClipped?S&&v.group.remove(S):(S?updateProps$1(S,{z2:retrieve2(x,0),shape:{points:b.points}},o,y):S=new Polygon({shape:{points:b.points}}),g.setItemGraphicEl(y,S),v.group.add(S))}).remove(function(y){var _=inner$2(v).data.getItemGraphicEl(y);v.group.remove(_)}).execute(),g.eachItemGraphicEl(function(y,_){var S=g.getItemModel(_),b=g.getItemVisual(_,"style");y.useStyle(g.getItemVisual(_,"style")),setLabelStyle(y,getLabelStatesModels(S),{labelFetcher:o,labelDataIndex:_,defaultText:g.getName(_)||"",inheritColor:isString(b.fill)?modifyAlpha(b.fill,1):tokens.color.neutral99}),setStatesStylesFromModel(y,S),toggleHoverEmphasis(y,null,null,S.get(["emphasis","disabled"])),getECData(y).dataModel=o}),inner$2(v).data=g,v.group.silent=o.get("silent")||n.get("silent")},r.type="markArea",r}(MarkerView);function createList(a,r,n){var o,s,l=["x0","y0","x1","y1"];if(a){var u=map$1(a&&a.dimensions,function(d){var v=r.getData(),g=v.getDimensionInfo(v.mapDimension(d))||{};return extend(extend({},g),{name:d,ordinalMeta:null})});s=map$1(l,function(d,v){return{name:d,type:u[v%2].type}}),o=new SeriesData(s,n)}else s=[{name:"value",type:"float"}],o=new SeriesData(s,n);var c=map$1(n.get("data"),curry$1(markAreaTransform,r,a,n));a&&(c=filter(c,curry$1(markAreaFilter,a)));var f=a?function(d,v,g,y){var _=d.coord[Math.floor(y/2)][y%2];return parseDataValue(_,s[y])}:function(d,v,g,y){return parseDataValue(d.value,s[y])};return o.initData(c,null,f),o.hasItemOption=!0,o}function install$d(a){a.registerComponentModel(MarkAreaModel),a.registerComponentView(MarkAreaView),a.registerPreprocessor(function(r){checkMarkerInSeries(r.series,"markArea")&&(r.markArea=r.markArea||{})})}var getDefaultSelectorOptions=function(a,r){if(r==="all")return{type:"all",title:a.getLocaleModel().get(["legend","selector","all"])};if(r==="inverse")return{type:"inverse",title:a.getLocaleModel().get(["legend","selector","inverse"])}},LegendModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.layoutMode={type:"box",ignoreSize:!0},n}return r.prototype.init=function(n,o,s){this.mergeDefaultAndTheme(n,s),n.selected=n.selected||{},this._updateSelector(n)},r.prototype.mergeOption=function(n,o){a.prototype.mergeOption.call(this,n,o),this._updateSelector(n)},r.prototype._updateSelector=function(n){var o=n.selector,s=this.ecModel;o===!0&&(o=n.selector=["all","inverse"]),isArray$1(o)&&each$f(o,function(l,u){isString(l)&&(l={type:l}),o[u]=merge(l,getDefaultSelectorOptions(s,l.type))})},r.prototype.optionUpdated=function(){this._updateData(this.ecModel);var n=this._data;if(n[0]&&this.get("selectedMode")==="single"){for(var o=!1,s=0;s<n.length;s++){var l=n[s].get("name");if(this.isSelected(l)){this.select(l),o=!0;break}}!o&&this.select(n[0].get("name"))}},r.prototype._updateData=function(n){var o=[],s=[];n.eachRawSeries(function(f){var d=f.name;s.push(d);var v;if(f.legendVisualProvider){var g=f.legendVisualProvider,y=g.getAllNames();n.isSeriesFiltered(f)||(s=s.concat(y)),y.length?o=o.concat(y):v=!0}else v=!0;v&&isNameSpecified(f)&&o.push(f.name)}),this._availableNames=s;var l=this.get("data")||o,u=createHashMap(),c=map$1(l,function(f){return(isString(f)||isNumber(f))&&(f={name:f}),u.get(f.name)?null:(u.set(f.name,!0),new Model(f,this,this.ecModel))},this);this._data=filter(c,function(f){return!!f})},r.prototype.getData=function(){return this._data},r.prototype.select=function(n){var o=this.option.selected,s=this.get("selectedMode");if(s==="single"){var l=this._data;each$f(l,function(u){o[u.get("name")]=!1})}o[n]=!0},r.prototype.unSelect=function(n){this.get("selectedMode")!=="single"&&(this.option.selected[n]=!1)},r.prototype.toggleSelected=function(n){var o=this.option.selected;o.hasOwnProperty(n)||(o[n]=!0),this[o[n]?"unSelect":"select"](n)},r.prototype.allSelect=function(){var n=this._data,o=this.option.selected;each$f(n,function(s){o[s.get("name",!0)]=!0})},r.prototype.inverseSelect=function(){var n=this._data,o=this.option.selected;each$f(n,function(s){var l=s.get("name",!0);o.hasOwnProperty(l)||(o[l]=!0),o[l]=!o[l]})},r.prototype.isSelected=function(n){var o=this.option.selected;return!(o.hasOwnProperty(n)&&!o[n])&&indexOf(this._availableNames,n)>=0},r.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},r.type="legend.plain",r.dependencies=["series"],r.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",bottom:tokens.size.m,align:"auto",backgroundColor:tokens.color.transparent,borderColor:tokens.color.border,borderRadius:0,borderWidth:0,padding:5,itemGap:8,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:tokens.color.disabled,inactiveBorderColor:tokens.color.disabled,inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:tokens.color.disabled,inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:tokens.color.secondary},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:tokens.color.tertiary,borderWidth:1,borderColor:tokens.color.border},emphasis:{selectorLabel:{show:!0,color:tokens.color.quaternary}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1},triggerEvent:!1},r}(ComponentModel),curry=curry$1,each$3=each$f,Group$1=Group$3,LegendView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.newlineDisabled=!1,n}return r.prototype.init=function(){this.group.add(this._contentGroup=new Group$1),this.group.add(this._selectorGroup=new Group$1),this._isFirstRender=!0},r.prototype.getContentGroup=function(){return this._contentGroup},r.prototype.getSelectorGroup=function(){return this._selectorGroup},r.prototype.render=function(n,o,s){var l=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!n.get("show",!0)){var u=n.get("align"),c=n.get("orient");(!u||u==="auto")&&(u=n.get("left")==="right"&&c==="vertical"?"right":"left");var f=n.get("selector",!0),d=n.get("selectorPosition",!0);f&&(!d||d==="auto")&&(d=c==="horizontal"?"end":"start"),this.renderInner(u,n,o,s,f,c,d);var v=createBoxLayoutReference(n,s).refContainer,g=n.getBoxLayoutParams(),y=n.get("padding"),_=getLayoutRect(g,v,y),S=this.layoutInner(n,u,_,l,f,d),b=getLayoutRect(defaults({width:S.width,height:S.height},g),v,y);this.group.x=b.x-S.x,this.group.y=b.y-S.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(S,n))}},r.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},r.prototype.renderInner=function(n,o,s,l,u,c,f){var d=this.getContentGroup(),v=createHashMap(),g=o.get("selectedMode"),y=o.get("triggerEvent"),_=[];s.eachRawSeries(function(S){!S.get("legendHoverLink")&&_.push(S.id)}),each$3(o.getData(),function(S,b){var x=this,T=S.get("name");if(!this.newlineDisabled&&(T===""||T===`
`)){var A=new Group$1;A.newline=!0,d.add(A);return}var w=s.getSeriesByName(T)[0];if(!v.get(T))if(w){var C=w.getData(),E=C.getVisual("legendLineStyle")||{},P=C.getVisual("legendIcon"),I=C.getVisual("style"),M=this._createItem(w,T,b,S,o,n,E,I,P,g,l);M.on("click",curry(dispatchSelectAction,T,null,l,_)).on("mouseover",curry(dispatchHighlightAction,w.name,null,l,_)).on("mouseout",curry(dispatchDownplayAction,w.name,null,l,_)),s.ssr&&M.eachChild(function(R){var O=getECData(R);O.seriesIndex=w.seriesIndex,O.dataIndex=b,O.ssrType="legend"}),y&&M.eachChild(function(R){x.packEventData(R,o,w,b,T)}),v.set(T,!0)}else s.eachRawSeries(function(R){var O=this;if(!v.get(T)&&R.legendVisualProvider){var $=R.legendVisualProvider;if(!$.containName(T))return;var B=$.indexOfName(T),F=$.getItemVisual(B,"style"),z=$.getItemVisual(B,"legendIcon"),G=parse(F.fill);G&&G[3]===0&&(G[3]=.2,F=extend(extend({},F),{fill:stringify(G,"rgba")}));var D=this._createItem(R,T,b,S,o,n,{},F,z,g,l);D.on("click",curry(dispatchSelectAction,null,T,l,_)).on("mouseover",curry(dispatchHighlightAction,null,T,l,_)).on("mouseout",curry(dispatchDownplayAction,null,T,l,_)),s.ssr&&D.eachChild(function(V){var L=getECData(V);L.seriesIndex=R.seriesIndex,L.dataIndex=b,L.ssrType="legend"}),y&&D.eachChild(function(V){O.packEventData(V,o,R,b,T)}),v.set(T,!0)}},this)},this),u&&this._createSelector(u,o,l,c,f)},r.prototype.packEventData=function(n,o,s,l,u){var c={componentType:"legend",componentIndex:o.componentIndex,dataIndex:l,value:u,seriesIndex:s.seriesIndex};getECData(n).eventData=c},r.prototype._createSelector=function(n,o,s,l,u){var c=this.getSelectorGroup();each$3(n,function(d){var v=d.type,g=new ZRText({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){s.dispatchAction({type:v==="all"?"legendAllSelect":"legendInverseSelect",legendId:o.id})}});c.add(g);var y=o.getModel("selectorLabel"),_=o.getModel(["emphasis","selectorLabel"]);setLabelStyle(g,{normal:y,emphasis:_},{defaultText:d.title}),enableHoverEmphasis(g)})},r.prototype._createItem=function(n,o,s,l,u,c,f,d,v,g,y){var _=n.visualDrawType,S=u.get("itemWidth"),b=u.get("itemHeight"),x=u.isSelected(o),T=l.get("symbolRotate"),A=l.get("symbolKeepAspect"),w=l.get("icon");v=w||v||"roundRect";var C=getLegendStyle(v,l,f,d,_,x,y),E=new Group$1,P=l.getModel("textStyle");if(isFunction(n.getLegendIcon)&&(!w||w==="inherit"))E.add(n.getLegendIcon({itemWidth:S,itemHeight:b,icon:v,iconRotate:T,itemStyle:C.itemStyle,lineStyle:C.lineStyle,symbolKeepAspect:A}));else{var I=w==="inherit"&&n.getData().getVisual("symbol")?T==="inherit"?n.getData().getVisual("symbolRotate"):T:0;E.add(getDefaultLegendIcon({itemWidth:S,itemHeight:b,icon:v,iconRotate:I,itemStyle:C.itemStyle,symbolKeepAspect:A}))}var M=c==="left"?S+5:-5,R=c,O=u.get("formatter"),$=o;isString(O)&&O?$=O.replace("{name}",o??""):isFunction(O)&&($=O(o));var B=x?P.getTextColor():l.get("inactiveColor");E.add(new ZRText({style:createTextStyle(P,{text:$,x:M,y:b/2,fill:B,align:R,verticalAlign:"middle"},{inheritColor:B})}));var F=new Rect$2({shape:E.getBoundingRect(),style:{fill:"transparent"}}),z=l.getModel("tooltip");return z.get("show")&&setTooltipConfig({el:F,componentModel:u,itemName:o,itemTooltipOption:z.option}),E.add(F),E.eachChild(function(G){G.silent=!0}),F.silent=!g,this.getContentGroup().add(E),enableHoverEmphasis(E),E.__legendDataIndex=s,E},r.prototype.layoutInner=function(n,o,s,l,u,c){var f=this.getContentGroup(),d=this.getSelectorGroup();box(n.get("orient"),f,n.get("itemGap"),s.width,s.height);var v=f.getBoundingRect(),g=[-v.x,-v.y];if(d.markRedraw(),f.markRedraw(),u){box("horizontal",d,n.get("selectorItemGap",!0));var y=d.getBoundingRect(),_=[-y.x,-y.y],S=n.get("selectorButtonGap",!0),b=n.getOrient().index,x=b===0?"width":"height",T=b===0?"height":"width",A=b===0?"y":"x";c==="end"?_[b]+=v[x]+S:g[b]+=y[x]+S,_[1-b]+=v[T]/2-y[T]/2,d.x=_[0],d.y=_[1],f.x=g[0],f.y=g[1];var w={x:0,y:0};return w[x]=v[x]+S+y[x],w[T]=Math.max(v[T],y[T]),w[A]=Math.min(0,y[A]+_[1-b]),w}else return f.x=g[0],f.y=g[1],this.group.getBoundingRect()},r.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},r.type="legend.plain",r}(ComponentView);function getLegendStyle(a,r,n,o,s,l,u){function c(x,T){x.lineWidth==="auto"&&(x.lineWidth=T.lineWidth>0?2:0),each$3(x,function(A,w){x[w]==="inherit"&&(x[w]=T[w])})}var f=r.getModel("itemStyle"),d=f.getItemStyle(),v=a.lastIndexOf("empty",0)===0?"fill":"stroke",g=f.getShallow("decal");d.decal=!g||g==="inherit"?o.decal:createOrUpdatePatternFromDecal(g,u),d.fill==="inherit"&&(d.fill=o[s]),d.stroke==="inherit"&&(d.stroke=o[v]),d.opacity==="inherit"&&(d.opacity=(s==="fill"?o:n).opacity),c(d,o);var y=r.getModel("lineStyle"),_=y.getLineStyle();if(c(_,n),d.fill==="auto"&&(d.fill=o.fill),d.stroke==="auto"&&(d.stroke=o.fill),_.stroke==="auto"&&(_.stroke=o.fill),!l){var S=r.get("inactiveBorderWidth"),b=d[v];d.lineWidth=S==="auto"?o.lineWidth>0&&b?2:0:d.lineWidth,d.fill=r.get("inactiveColor"),d.stroke=r.get("inactiveBorderColor"),_.stroke=y.get("inactiveColor"),_.lineWidth=y.get("inactiveWidth")}return{itemStyle:d,lineStyle:_}}function getDefaultLegendIcon(a){var r=a.icon||"roundRect",n=createSymbol$1(r,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill,a.symbolKeepAspect);return n.setStyle(a.itemStyle),n.rotation=(a.iconRotate||0)*Math.PI/180,n.setOrigin([a.itemWidth/2,a.itemHeight/2]),r.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill=tokens.color.neutral00,n.style.lineWidth=2),n}function dispatchSelectAction(a,r,n,o){dispatchDownplayAction(a,r,n,o),n.dispatchAction({type:"legendToggleSelect",name:a??r}),dispatchHighlightAction(a,r,n,o)}function isUseHoverLayer(a){for(var r=a.getZr().storage.getDisplayList(),n,o=0,s=r.length;o<s&&!(n=r[o].states.emphasis);)o++;return n&&n.hoverLayer}function dispatchHighlightAction(a,r,n,o){isUseHoverLayer(n)||n.dispatchAction({type:"highlight",seriesName:a,name:r,excludeSeriesId:o})}function dispatchDownplayAction(a,r,n,o){isUseHoverLayer(n)||n.dispatchAction({type:"downplay",seriesName:a,name:r,excludeSeriesId:o})}function legendFilter(a){var r=a.findComponents({mainType:"legend"});r&&r.length&&a.filterSeries(function(n){for(var o=0;o<r.length;o++)if(!r[o].isSelected(n.name))return!1;return!0})}function legendSelectActionHandler(a,r,n){var o=a==="allSelect"||a==="inverseSelect",s={},l=[];n.eachComponent({mainType:"legend",query:r},function(c){o?c[a]():c[a](r.name),makeSelectedMap(c,s),l.push(c.componentIndex)});var u={};return n.eachComponent("legend",function(c){each$f(s,function(f,d){c[f?"select":"unSelect"](d)}),makeSelectedMap(c,u)}),o?{selected:u,legendIndex:l}:{name:r.name,selected:u}}function makeSelectedMap(a,r){var n=r||{};return each$f(a.getData(),function(o){var s=o.get("name");if(!(s===`
`||s==="")){var l=a.isSelected(s);hasOwn(n,s)?n[s]=n[s]&&l:n[s]=l}}),n}function installLegendAction(a){a.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),a.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),a.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),a.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),a.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}function install$c(a){a.registerComponentModel(LegendModel),a.registerComponentView(LegendView),a.registerProcessor(a.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),a.registerSubTypeDefaulter("legend",function(){return"plain"}),installLegendAction(a)}var ScrollableLegendModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.setScrollDataIndex=function(n){this.option.scrollDataIndex=n},r.prototype.init=function(n,o,s){var l=getLayoutParams(n);a.prototype.init.call(this,n,o,s),mergeAndNormalizeLayoutParams(this,n,l)},r.prototype.mergeOption=function(n,o){a.prototype.mergeOption.call(this,n,o),mergeAndNormalizeLayoutParams(this,this.option,n)},r.type="legend.scroll",r.defaultOption=inheritDefaultOption(LegendModel.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:tokens.color.accent50,pageIconInactiveColor:tokens.color.accent10,pageIconSize:15,pageTextStyle:{color:tokens.color.tertiary},animationDurationUpdate:800}),r}(LegendModel);function mergeAndNormalizeLayoutParams(a,r,n){var o=a.getOrient(),s=[1,1];s[o.index]=0,mergeLayoutParam(r,n,{type:"box",ignoreSize:!!s})}var Group=Group$3,WH=["width","height"],XY=["x","y"],ScrollableLegendView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.newlineDisabled=!0,n._currentIndex=0,n}return r.prototype.init=function(){a.prototype.init.call(this),this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group)},r.prototype.resetInner=function(){a.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},r.prototype.renderInner=function(n,o,s,l,u,c,f){var d=this;a.prototype.renderInner.call(this,n,o,s,l,u,c,f);var v=this._controllerGroup,g=o.get("pageIconSize",!0),y=isArray$1(g)?g:[g,g];S("pagePrev",0);var _=o.getModel("pageTextStyle");v.add(new ZRText({name:"pageText",style:{text:"xx/xx",fill:_.getTextColor(),font:_.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),S("pageNext",1);function S(b,x){var T=b+"DataIndex",A=createIcon(o.get("pageIcons",!0)[o.getOrient().name][x],{onclick:bind$1(d._pageGo,d,T,o,l)},{x:-y[0]/2,y:-y[1]/2,width:y[0],height:y[1]});A.name=b,v.add(A)}},r.prototype.layoutInner=function(n,o,s,l,u,c){var f=this.getSelectorGroup(),d=n.getOrient().index,v=WH[d],g=XY[d],y=WH[1-d],_=XY[1-d];u&&box("horizontal",f,n.get("selectorItemGap",!0));var S=n.get("selectorButtonGap",!0),b=f.getBoundingRect(),x=[-b.x,-b.y],T=clone$4(s);u&&(T[v]=s[v]-b[v]-S);var A=this._layoutContentAndController(n,l,T,d,v,y,_,g);if(u){if(c==="end")x[d]+=A[v]+S;else{var w=b[v]+S;x[d]-=w,A[g]-=w}A[v]+=b[v]+S,x[1-d]+=A[_]+A[y]/2-b[y]/2,A[y]=Math.max(A[y],b[y]),A[_]=Math.min(A[_],b[_]+x[1-d]),f.x=x[0],f.y=x[1],f.markRedraw()}return A},r.prototype._layoutContentAndController=function(n,o,s,l,u,c,f,d){var v=this.getContentGroup(),g=this._containerGroup,y=this._controllerGroup;box(n.get("orient"),v,n.get("itemGap"),l?s.width:null,l?null:s.height),box("horizontal",y,n.get("pageButtonItemGap",!0));var _=v.getBoundingRect(),S=y.getBoundingRect(),b=this._showController=_[u]>s[u],x=[-_.x,-_.y];o||(x[l]=v[d]);var T=[0,0],A=[-S.x,-S.y],w=retrieve2(n.get("pageButtonGap",!0),n.get("itemGap",!0));if(b){var C=n.get("pageButtonPosition",!0);C==="end"?A[l]+=s[u]-S[u]:T[l]+=S[u]+w}A[1-l]+=_[c]/2-S[c]/2,v.setPosition(x),g.setPosition(T),y.setPosition(A);var E={x:0,y:0};if(E[u]=b?s[u]:_[u],E[c]=Math.max(_[c],S[c]),E[f]=Math.min(0,S[f]+A[1-l]),g.__rectSize=s[u],b){var P={x:0,y:0};P[u]=Math.max(s[u]-S[u]-w,0),P[c]=E[c],g.setClipPath(new Rect$2({shape:P})),g.__rectSize=P[u]}else y.eachChild(function(M){M.attr({invisible:!0,silent:!0})});var I=this._getPageInfo(n);return I.pageIndex!=null&&updateProps$1(v,{x:I.contentPosition[0],y:I.contentPosition[1]},b?n:null),this._updatePageInfoView(n,I),E},r.prototype._pageGo=function(n,o,s){var l=this._getPageInfo(o)[n];l!=null&&s.dispatchAction({type:"legendScroll",scrollDataIndex:l,legendId:o.id})},r.prototype._updatePageInfoView=function(n,o){var s=this._controllerGroup;each$f(["pagePrev","pageNext"],function(v){var g=v+"DataIndex",y=o[g]!=null,_=s.childOfName(v);_&&(_.setStyle("fill",y?n.get("pageIconColor",!0):n.get("pageIconInactiveColor",!0)),_.cursor=y?"pointer":"default")});var l=s.childOfName("pageText"),u=n.get("pageFormatter"),c=o.pageIndex,f=c!=null?c+1:0,d=o.pageCount;l&&u&&l.setStyle("text",isString(u)?u.replace("{current}",f==null?"":f+"").replace("{total}",d==null?"":d+""):u({current:f,total:d}))},r.prototype._getPageInfo=function(n){var o=n.get("scrollDataIndex",!0),s=this.getContentGroup(),l=this._containerGroup.__rectSize,u=n.getOrient().index,c=WH[u],f=XY[u],d=this._findTargetItemIndex(o),v=s.children(),g=v[d],y=v.length,_=y?1:0,S={contentPosition:[s.x,s.y],pageCount:_,pageIndex:_-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!g)return S;var b=C(g);S.contentPosition[u]=-b.s;for(var x=d+1,T=b,A=b,w=null;x<=y;++x)w=C(v[x]),(!w&&A.e>T.s+l||w&&!E(w,T.s))&&(A.i>T.i?T=A:T=w,T&&(S.pageNextDataIndex==null&&(S.pageNextDataIndex=T.i),++S.pageCount)),A=w;for(var x=d-1,T=b,A=b,w=null;x>=-1;--x)w=C(v[x]),(!w||!E(A,w.s))&&T.i<A.i&&(A=T,S.pagePrevDataIndex==null&&(S.pagePrevDataIndex=T.i),++S.pageCount,++S.pageIndex),T=w;return S;function C(P){if(P){var I=P.getBoundingRect(),M=I[f]+P[f];return{s:M,e:M+I[c],i:P.__legendDataIndex}}}function E(P,I){return P.e>=I&&P.s<=I+l}},r.prototype._findTargetItemIndex=function(n){if(!this._showController)return 0;var o,s=this.getContentGroup(),l;return s.eachChild(function(u,c){var f=u.__legendDataIndex;l==null&&f!=null&&(l=c),f===n&&(o=c)}),o??l},r.type="legend.scroll",r}(LegendView);function installScrollableLegendAction(a){a.registerAction("legendScroll","legendscroll",function(r,n){var o=r.scrollDataIndex;o!=null&&n.eachComponent({mainType:"legend",subType:"scroll",query:r},function(s){s.setScrollDataIndex(o)})})}function install$b(a){use(install$c),a.registerComponentModel(ScrollableLegendModel),a.registerComponentView(ScrollableLegendView),installScrollableLegendAction(a)}function install$a(a){use(install$c),use(install$b)}var InsideZoomModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.type="dataZoom.inside",r.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),r}(DataZoomModel),inner$1=makeInner();function setViewInfoToCoordSysRecord(a,r,n){inner$1(a).coordSysRecordMap.each(function(o){var s=o.dataZoomInfoMap.get(r.uid);s&&(s.getRange=n)})}function disposeCoordSysRecordIfNeeded(a,r){for(var n=inner$1(a).coordSysRecordMap,o=n.keys(),s=0;s<o.length;s++){var l=o[s],u=n.get(l),c=u.dataZoomInfoMap;if(c){var f=r.uid,d=c.get(f);d&&(c.removeKey(f),c.keys().length||disposeCoordSysRecord(n,u))}}}function disposeCoordSysRecord(a,r){if(r){a.removeKey(r.model.uid);var n=r.controller;n&&n.dispose()}}function createCoordSysRecord(a,r){var n={model:r,containsPoint:curry$1(containsPoint,r),dispatchAction:curry$1(dispatchAction,a),dataZoomInfoMap:null,controller:null},o=n.controller=new RoamController(a.getZr());return each$f(["pan","zoom","scrollMove"],function(s){o.on(s,function(l){var u=[];n.dataZoomInfoMap.each(function(c){if(l.isAvailableBehavior(c.model.option)){var f=(c.getRange||{})[s],d=f&&f(c.dzReferCoordSysInfo,n.model.mainType,n.controller,l);!c.model.get("disabled",!0)&&d&&u.push({dataZoomId:c.model.id,start:d[0],end:d[1]})}}),u.length&&n.dispatchAction(u)})}),n}function dispatchAction(a,r){a.isDisposed()||a.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:r})}function containsPoint(a,r,n,o){return a.coordinateSystem.containPoint([n,o])}function mergeControllerParams(a,r,n){var o,s="type_",l={type_true:2,type_move:1,type_false:0,type_undefined:-1},u=!0;return a.each(function(c){var f=c.model,d=f.get("disabled",!0)?!1:f.get("zoomLock",!0)?"move":!0;l[s+d]>l[s+o]&&(o=d),u=u&&f.get("preventDefaultMouseMove",!0)}),{controlType:o,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!u,api:n,zInfo:{component:r.model},triggerInfo:{roamTrigger:null,isInSelf:r.containsPoint}}}}function installDataZoomRoamProcessor(a){a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,function(r,n){var o=inner$1(n),s=o.coordSysRecordMap||(o.coordSysRecordMap=createHashMap());s.each(function(l){l.dataZoomInfoMap=null}),r.eachComponent({mainType:"dataZoom",subType:"inside"},function(l){var u=collectReferCoordSysModelInfo(l);each$f(u.infoList,function(c){var f=c.model.uid,d=s.get(f)||s.set(f,createCoordSysRecord(n,c.model)),v=d.dataZoomInfoMap||(d.dataZoomInfoMap=createHashMap());v.set(l.uid,{dzReferCoordSysInfo:c,model:l,getRange:null})})}),s.each(function(l){var u=l.controller,c,f=l.dataZoomInfoMap;if(f){var d=f.keys()[0];d!=null&&(c=f.get(d))}if(!c){disposeCoordSysRecord(s,l);return}var v=mergeControllerParams(f,l,n);u.enable(v.controlType,v.opt),createOrUpdate(l,"dispatchAction",c.model.get("throttle",!0),"fixRate")})})}var InsideZoomView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type="dataZoom.inside",n}return r.prototype.render=function(n,o,s){if(a.prototype.render.apply(this,arguments),n.noTarget()){this._clear();return}this.range=n.getPercentRange(),setViewInfoToCoordSysRecord(s,n,{pan:bind$1(getRangeHandlers.pan,this),zoom:bind$1(getRangeHandlers.zoom,this),scrollMove:bind$1(getRangeHandlers.scrollMove,this)})},r.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){disposeCoordSysRecordIfNeeded(this.api,this.dataZoomModel),this.range=null},r.type="dataZoom.inside",r}(DataZoomView),getRangeHandlers={zoom:function(a,r,n,o){var s=this.range,l=s.slice(),u=a.axisModels[0];if(u){var c=getDirectionInfo[r](null,[o.originX,o.originY],u,n,a),f=(c.signal>0?c.pixelStart+c.pixelLength-c.pixel:c.pixel-c.pixelStart)/c.pixelLength*(l[1]-l[0])+l[0],d=Math.max(1/o.scale,0);l[0]=(l[0]-f)*d+f,l[1]=(l[1]-f)*d+f;var v=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(sliderMove(0,l,[0,100],0,v.minSpan,v.maxSpan),this.range=l,s[0]!==l[0]||s[1]!==l[1])return l}},pan:makeMover(function(a,r,n,o,s,l){var u=getDirectionInfo[o]([l.oldX,l.oldY],[l.newX,l.newY],r,s,n);return u.signal*(a[1]-a[0])*u.pixel/u.pixelLength}),scrollMove:makeMover(function(a,r,n,o,s,l){var u=getDirectionInfo[o]([0,0],[l.scrollDelta,l.scrollDelta],r,s,n);return u.signal*(a[1]-a[0])*l.scrollDelta})};function makeMover(a){return function(r,n,o,s){var l=this.range,u=l.slice(),c=r.axisModels[0];if(c){var f=a(u,c,r,n,o,s);if(sliderMove(f,u,[0,100],"all"),this.range=u,l[0]!==u[0]||l[1]!==u[1])return u}}}var getDirectionInfo={grid:function(a,r,n,o,s){var l=n.axis,u={},c=s.model.coordinateSystem.getRect();return a=a||[0,0],l.dim==="x"?(u.pixel=r[0]-a[0],u.pixelLength=c.width,u.pixelStart=c.x,u.signal=l.inverse?1:-1):(u.pixel=r[1]-a[1],u.pixelLength=c.height,u.pixelStart=c.y,u.signal=l.inverse?-1:1),u},polar:function(a,r,n,o,s){var l=n.axis,u={},c=s.model.coordinateSystem,f=c.getRadiusAxis().getExtent(),d=c.getAngleAxis().getExtent();return a=a?c.pointToCoord(a):[0,0],r=c.pointToCoord(r),n.mainType==="radiusAxis"?(u.pixel=r[0]-a[0],u.pixelLength=f[1]-f[0],u.pixelStart=f[0],u.signal=l.inverse?1:-1):(u.pixel=r[1]-a[1],u.pixelLength=d[1]-d[0],u.pixelStart=d[0],u.signal=l.inverse?-1:1),u},singleAxis:function(a,r,n,o,s){var l=n.axis,u=s.model.coordinateSystem.getRect(),c={};return a=a||[0,0],l.orient==="horizontal"?(c.pixel=r[0]-a[0],c.pixelLength=u.width,c.pixelStart=u.x,c.signal=l.inverse?1:-1):(c.pixel=r[1]-a[1],c.pixelLength=u.height,c.pixelStart=u.y,c.signal=l.inverse?-1:1),c}};function install$9(a){installCommon$1(a),a.registerComponentModel(InsideZoomModel),a.registerComponentView(InsideZoomView),installDataZoomRoamProcessor(a)}var SliderZoomModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.type="dataZoom.slider",r.layoutMode="box",r.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:tokens.color.accent10,borderRadius:0,backgroundColor:tokens.color.transparent,dataBackground:{lineStyle:{color:tokens.color.accent30,width:.5},areaStyle:{color:tokens.color.accent20,opacity:.2}},selectedDataBackground:{lineStyle:{color:tokens.color.accent40,width:.5},areaStyle:{color:tokens.color.accent20,opacity:.3}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:tokens.color.neutral00,borderColor:tokens.color.accent20},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:tokens.color.accent40,opacity:.5},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:tokens.color.tertiary},brushSelect:!0,brushStyle:{color:tokens.color.accent30,opacity:.3},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:tokens.color.accent40},moveHandleStyle:{opacity:.8}},defaultLocationEdgeGap:15}),r}(DataZoomModel),Rect=Rect$2,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,DEFAULT_MOVE_HANDLE_SIZE=7,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n._displayables={},n}return r.prototype.init=function(n,o){this.api=o,this._onBrush=bind$1(this._onBrush,this),this._onBrushEnd=bind$1(this._onBrushEnd,this)},r.prototype.render=function(n,o,s,l){if(a.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",n.get("throttle"),"fixRate"),this._orient=n.getOrient(),n.get("show")===!1){this.group.removeAll();return}if(n.noTarget()){this._clear(),this.group.removeAll();return}(!l||l.type!=="dataZoom"||l.from!==this.uid)&&this._buildView(),this._updateView()},r.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){clear$1(this,"_dispatchZoomAction");var n=this.api.getZr();n.off("mousemove",this._onBrush),n.off("mouseup",this._onBrushEnd)},r.prototype._buildView=function(){var n=this.group;n.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var o=this._displayables.sliderGroup=new Group$3;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),n.add(o),this._positionGroup()},r.prototype._resetLocation=function(){var n=this.dataZoomModel,o=this.api,s=n.get("brushSelect"),l=s?DEFAULT_MOVE_HANDLE_SIZE:0,u=createBoxLayoutReference(n,o).refContainer,c=this._findCoordRect(),f=n.get("defaultLocationEdgeGap",!0)||0,d=this._orient===HORIZONTAL?{right:u.width-c.x-c.width,top:u.height-DEFAULT_FILLER_SIZE-f-l,width:c.width,height:DEFAULT_FILLER_SIZE}:{right:f,top:c.y,width:DEFAULT_FILLER_SIZE,height:c.height},v=getLayoutParams(n.option);each$f(["right","top","width","height"],function(y){v[y]==="ph"&&(v[y]=d[y])});var g=getLayoutRect(v,u);this._location={x:g.x,y:g.y},this._size=[g.width,g.height],this._orient===VERTICAL&&this._size.reverse()},r.prototype._positionGroup=function(){var n=this.group,o=this._location,s=this._orient,l=this.dataZoomModel.getFirstTargetAxisModel(),u=l&&l.get("inverse"),c=this._displayables.sliderGroup,f=(this._dataShadowInfo||{}).otherAxisInverse;c.attr(s===HORIZONTAL&&!u?{scaleY:f?1:-1,scaleX:1}:s===HORIZONTAL&&u?{scaleY:f?1:-1,scaleX:-1}:s===VERTICAL&&!u?{scaleY:f?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:f?-1:1,scaleX:-1,rotation:Math.PI/2});var d=n.getBoundingRect([c]);n.x=o.x-d.x,n.y=o.y-d.y,n.markRedraw()},r.prototype._getViewExtent=function(){return[0,this._size[0]]},r.prototype._renderBackground=function(){var n=this.dataZoomModel,o=this._size,s=this._displayables.sliderGroup,l=n.get("brushSelect");s.add(new Rect({silent:!0,shape:{x:0,y:0,width:o[0],height:o[1]},style:{fill:n.get("backgroundColor")},z2:-40}));var u=new Rect({shape:{x:0,y:0,width:o[0],height:o[1]},style:{fill:"transparent"},z2:0,onclick:bind$1(this._onClickPanel,this)}),c=this.api.getZr();l?(u.on("mousedown",this._onBrushStart,this),u.cursor="crosshair",c.on("mousemove",this._onBrush),c.on("mouseup",this._onBrushEnd)):(c.off("mousemove",this._onBrush),c.off("mouseup",this._onBrushEnd)),s.add(u)},r.prototype._renderDataShadow=function(){var n=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!n)return;var o=this._size,s=this._shadowSize||[],l=n.series,u=l.getRawData(),c=l.getShadowDim&&l.getShadowDim(),f=c&&u.getDimensionInfo(c)?l.getShadowDim():n.otherDim;if(f==null)return;var d=this._shadowPolygonPts,v=this._shadowPolylinePts;if(u!==this._shadowData||f!==this._shadowDim||o[0]!==s[0]||o[1]!==s[1]){var g=u.getDataExtent(n.thisDim),y=u.getDataExtent(f),_=(y[1]-y[0])*.3;y=[y[0]-_,y[1]+_];var S=[0,o[1]],b=[0,o[0]],x=[[o[0],0],[0,0]],T=[],A=b[1]/Math.max(1,u.count()-1),w=o[0]/(g[1]-g[0]),C=n.thisAxis.type==="time",E=-A,P=Math.round(u.count()/o[0]),I;u.each([n.thisDim,f],function(B,F,z){if(P>0&&z%P){C||(E+=A);return}E=C?(+B-g[0])*w:E+A;var G=F==null||isNaN(F)||F==="",D=G?0:linearMap$2(F,y,S,!0);G&&!I&&z?(x.push([x[x.length-1][0],0]),T.push([T[T.length-1][0],0])):!G&&I&&(x.push([E,0]),T.push([E,0])),G||(x.push([E,D]),T.push([E,D])),I=G}),d=this._shadowPolygonPts=x,v=this._shadowPolylinePts=T}this._shadowData=u,this._shadowDim=f,this._shadowSize=[o[0],o[1]];var M=this.dataZoomModel;function R(B){var F=M.getModel(B?"selectedDataBackground":"dataBackground"),z=new Group$3,G=new Polygon({shape:{points:d},segmentIgnoreThreshold:1,style:F.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),D=new Polyline$1({shape:{points:v},segmentIgnoreThreshold:1,style:F.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return z.add(G),z.add(D),z}for(var O=0;O<3;O++){var $=R(O===1);this._displayables.sliderGroup.add($),this._displayables.dataShadowSegs.push($)}},r.prototype._prepareDataShadowInfo=function(){var n=this.dataZoomModel,o=n.get("showDataShadow");if(o!==!1){var s,l=this.ecModel;return n.eachTargetAxis(function(u,c){var f=n.getAxisProxy(u,c).getTargetSeriesModels();each$f(f,function(d){if(!s&&!(o!==!0&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,d.get("type"))<0)){var v=l.getComponent(getAxisMainType(u),c).axis,g=getOtherDim(u),y,_=d.coordinateSystem;g!=null&&_.getOtherAxis&&(y=_.getOtherAxis(v).inverse),g=d.getData().mapDimension(g);var S=d.getData().mapDimension(u);s={thisAxis:v,series:d,thisDim:S,otherDim:g,otherAxisInverse:y}}},this)},this),s}},r.prototype._renderHandle=function(){var n=this.group,o=this._displayables,s=o.handles=[null,null],l=o.handleLabels=[null,null],u=this._displayables.sliderGroup,c=this._size,f=this.dataZoomModel,d=this.api,v=f.get("borderRadius")||0,g=f.get("brushSelect"),y=o.filler=new Rect({silent:g,style:{fill:f.get("fillerColor")},textConfig:{position:"inside"}});u.add(y),u.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:c[0],height:c[1],r:v},style:{stroke:f.get("dataBackgroundColor")||f.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:tokens.color.transparent}})),each$f([0,1],function(w){var C=f.get("handleIcon");!symbolBuildProxies[C]&&C.indexOf("path://")<0&&C.indexOf("image://")<0&&(C="path://"+C);var E=createSymbol$1(C,-1,0,2,2,null,!0);E.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$1(this._onDragMove,this,w),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1),z2:5});var P=E.getBoundingRect(),I=f.get("handleSize");this._handleHeight=parsePercent(I,this._size[1]),this._handleWidth=P.width/P.height*this._handleHeight,E.setStyle(f.getModel("handleStyle").getItemStyle()),E.style.strokeNoScale=!0,E.rectHover=!0,E.ensureState("emphasis").style=f.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(E);var M=f.get("handleColor");M!=null&&(E.style.fill=M),u.add(s[w]=E);var R=f.getModel("textStyle"),O=f.get("handleLabel")||{},$=O.show||!1;n.add(l[w]=new ZRText({silent:!0,invisible:!$,style:createTextStyle(R,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:R.getTextColor(),font:R.getFont()}),z2:10}))},this);var _=y;if(g){var S=parsePercent(f.get("moveHandleSize"),c[1]),b=o.moveHandle=new Rect$2({style:f.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:c[1]-.5,height:S}}),x=S*.8,T=o.moveHandleIcon=createSymbol$1(f.get("moveHandleIcon"),-x/2,-x/2,x,x,tokens.color.neutral00,!0);T.silent=!0,T.y=c[1]+S/2-.5,b.ensureState("emphasis").style=f.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var A=Math.min(c[1]/2,Math.max(S,10));_=o.moveZone=new Rect$2({invisible:!0,shape:{y:c[1]-A,height:S+A}}),_.on("mouseover",function(){d.enterEmphasis(b)}).on("mouseout",function(){d.leaveEmphasis(b)}),u.add(b),u.add(T),u.add(_)}_.attr({draggable:!0,cursor:"default",drift:bind$1(this._onDragMove,this,"all"),ondragstart:bind$1(this._showDataInfo,this,!0),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1)})},r.prototype._resetInterval=function(){var n=this._range=this.dataZoomModel.getPercentRange(),o=this._getViewExtent();this._handleEnds=[linearMap$2(n[0],[0,100],o,!0),linearMap$2(n[1],[0,100],o,!0)]},r.prototype._updateInterval=function(n,o){var s=this.dataZoomModel,l=this._handleEnds,u=this._getViewExtent(),c=s.findRepresentativeAxisProxy().getMinMaxSpan(),f=[0,100];sliderMove(o,l,u,s.get("zoomLock")?"all":n,c.minSpan!=null?linearMap$2(c.minSpan,f,u,!0):null,c.maxSpan!=null?linearMap$2(c.maxSpan,f,u,!0):null);var d=this._range,v=this._range=asc$2([linearMap$2(l[0],u,f,!0),linearMap$2(l[1],u,f,!0)]);return!d||d[0]!==v[0]||d[1]!==v[1]},r.prototype._updateView=function(n){var o=this._displayables,s=this._handleEnds,l=asc$2(s.slice()),u=this._size;each$f([0,1],function(_){var S=o.handles[_],b=this._handleHeight;S.attr({scaleX:b/2,scaleY:b/2,x:s[_]+(_?-1:1),y:u[1]/2-b/2})},this),o.filler.setShape({x:l[0],y:0,width:l[1]-l[0],height:u[1]});var c={x:l[0],width:l[1]-l[0]};o.moveHandle&&(o.moveHandle.setShape(c),o.moveZone.setShape(c),o.moveZone.getBoundingRect(),o.moveHandleIcon&&o.moveHandleIcon.attr("x",c.x+c.width/2));for(var f=o.dataShadowSegs,d=[0,l[0],l[1],u[0]],v=0;v<f.length;v++){var g=f[v],y=g.getClipPath();y||(y=new Rect$2,g.setClipPath(y)),y.setShape({x:d[v],y:0,width:d[v+1]-d[v],height:u[1]})}this._updateDataInfo(n)},r.prototype._updateDataInfo=function(n){var o=this.dataZoomModel,s=this._displayables,l=s.handleLabels,u=this._orient,c=["",""];if(o.get("showDetail")){var f=o.findRepresentativeAxisProxy();if(f){var d=f.getAxisModel().axis,v=this._range,g=n?f.calculateDataWindow({start:v[0],end:v[1]}).valueWindow:f.getDataValueWindow();c=[this._formatLabel(g[0],d),this._formatLabel(g[1],d)]}}var y=asc$2(this._handleEnds.slice());_.call(this,0),_.call(this,1);function _(S){var b=getTransform$1(s.handles[S].parent,this.group),x=transformDirection(S===0?"right":"left",b),T=this._handleWidth/2+LABEL_GAP,A=applyTransform([y[S]+(S===0?-T:T),this._size[1]/2],b);l[S].setStyle({x:A[0],y:A[1],verticalAlign:u===HORIZONTAL?"middle":x,align:u===HORIZONTAL?x:"center",text:c[S]})}},r.prototype._formatLabel=function(n,o){var s=this.dataZoomModel,l=s.get("labelFormatter"),u=s.get("labelPrecision");(u==null||u==="auto")&&(u=o.getPixelPrecision());var c=n==null||isNaN(n)?"":o.type==="category"||o.type==="time"?o.scale.getLabel({value:Math.round(n)}):n.toFixed(Math.min(u,20));return isFunction(l)?l(n,c):isString(l)?l.replace("{value}",c):c},r.prototype._showDataInfo=function(n){var o=this.dataZoomModel.get("handleLabel")||{},s=o.show||!1,l=this.dataZoomModel.getModel(["emphasis","handleLabel"]),u=l.get("show")||!1,c=n||this._dragging?u:s,f=this._displayables,d=f.handleLabels;d[0].attr("invisible",!c),d[1].attr("invisible",!c),f.moveHandle&&this.api[c?"enterEmphasis":"leaveEmphasis"](f.moveHandle,1)},r.prototype._onDragMove=function(n,o,s,l){this._dragging=!0,stop(l.event);var u=this._displayables.sliderGroup.getLocalTransform(),c=applyTransform([o,s],u,!0),f=this._updateInterval(n,c[0]),d=this.dataZoomModel.get("realtime");this._updateView(!d),f&&d&&this._dispatchZoomAction(!0)},r.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var n=this.dataZoomModel.get("realtime");!n&&this._dispatchZoomAction(!1)},r.prototype._onClickPanel=function(n){var o=this._size,s=this._displayables.sliderGroup.transformCoordToLocal(n.offsetX,n.offsetY);if(!(s[0]<0||s[0]>o[0]||s[1]<0||s[1]>o[1])){var l=this._handleEnds,u=(l[0]+l[1])/2,c=this._updateInterval("all",s[0]-u);this._updateView(),c&&this._dispatchZoomAction(!1)}},r.prototype._onBrushStart=function(n){var o=n.offsetX,s=n.offsetY;this._brushStart=new Point(o,s),this._brushing=!0,this._brushStartTime=+new Date},r.prototype._onBrushEnd=function(n){if(this._brushing){var o=this._displayables.brushRect;if(this._brushing=!1,!!o){o.attr("ignore",!0);var s=o.shape,l=+new Date;if(!(l-this._brushStartTime<200&&Math.abs(s.width)<5)){var u=this._getViewExtent(),c=[0,100],f=this._handleEnds=[s.x,s.x+s.width],d=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();sliderMove(0,f,u,0,d.minSpan!=null?linearMap$2(d.minSpan,c,u,!0):null,d.maxSpan!=null?linearMap$2(d.maxSpan,c,u,!0):null),this._range=asc$2([linearMap$2(f[0],u,c,!0),linearMap$2(f[1],u,c,!0)]),this._updateView(),this._dispatchZoomAction(!1)}}}},r.prototype._onBrush=function(n){this._brushing&&(stop(n.event),this._updateBrushRect(n.offsetX,n.offsetY))},r.prototype._updateBrushRect=function(n,o){var s=this._displayables,l=this.dataZoomModel,u=s.brushRect;u||(u=s.brushRect=new Rect({silent:!0,style:l.getModel("brushStyle").getItemStyle()}),s.sliderGroup.add(u)),u.attr("ignore",!1);var c=this._brushStart,f=this._displayables.sliderGroup,d=f.transformCoordToLocal(n,o),v=f.transformCoordToLocal(c.x,c.y),g=this._size;d[0]=Math.max(Math.min(g[0],d[0]),0),u.setShape({x:v[0],y:0,width:d[0]-v[0],height:g[1]})},r.prototype._dispatchZoomAction=function(n){var o=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:n?REALTIME_ANIMATION_CONFIG:null,start:o[0],end:o[1]})},r.prototype._findCoordRect=function(){var n,o=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!n&&o.length){var s=o[0].model.coordinateSystem;n=s.getRect&&s.getRect()}if(!n){var l=this.api.getWidth(),u=this.api.getHeight();n={x:l*.2,y:u*.2,width:l*.6,height:u*.6}}return n},r.type="dataZoom.slider",r}(DataZoomView);function getOtherDim(a){var r={x:"y",y:"x",radius:"angle",angle:"radius"};return r[a]}function getCursor$1(a){return a==="vertical"?"ns-resize":"ew-resize"}function install$8(a){a.registerComponentModel(SliderZoomModel),a.registerComponentView(SliderZoomView),installCommon$1(a)}function install$7(a){use(install$9),use(install$8)}var visualDefault={get:function(a,r,n){var o=clone$4((defaultOption[a]||{})[r]);return n&&isArray$1(o)?o[o.length-1]:o}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:[tokens.color.transparent]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},mapVisual=VisualMapping.mapVisual,eachVisual=VisualMapping.eachVisual,isArray=isArray$1,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return r.prototype.init=function(n,o,s){this.mergeDefaultAndTheme(n,s)},r.prototype.optionUpdated=function(n,o){var s=this.option;!o&&replaceVisualOption(s,n,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},r.prototype.resetVisual=function(n){var o=this.stateList;n=bind$1(n,this),this.controllerVisuals=createVisualMappings(this.option.controller,o,n),this.targetVisuals=createVisualMappings(this.option.target,o,n)},r.prototype.getItemSymbol=function(){return null},r.prototype.getTargetSeriesIndices=function(){var n=this.option.seriesId,o=this.option.seriesIndex;o==null&&n==null&&(o="all");var s=queryReferringComponents(this.ecModel,"series",{index:o,id:n},{useDefault:!1,enableAll:!0,enableNone:!1}).models;return map$1(s,function(l){return l.componentIndex})},r.prototype.eachTargetSeries=function(n,o){each$f(this.getTargetSeriesIndices(),function(s){var l=this.ecModel.getSeriesByIndex(s);l&&n.call(o,l)},this)},r.prototype.isTargetSeries=function(n){var o=!1;return this.eachTargetSeries(function(s){s===n&&(o=!0)}),o},r.prototype.formatValueText=function(n,o,s){var l=this.option,u=l.precision,c=this.dataBound,f=l.formatter,d;s=s||["<",">"],isArray$1(n)&&(n=n.slice(),d=!0);var v=o?n:d?[g(n[0]),g(n[1])]:g(n);if(isString(f))return f.replace("{value}",d?v[0]:v).replace("{value2}",d?v[1]:v);if(isFunction(f))return d?f(n[0],n[1]):f(n);if(d)return n[0]===c[0]?s[0]+" "+v[1]:n[1]===c[1]?s[1]+" "+v[0]:v[0]+" - "+v[1];return v;function g(y){return y===c[0]?"min":y===c[1]?"max":(+y).toFixed(Math.min(u,20))}},r.prototype.resetExtent=function(){var n=this.option,o=asc([n.min,n.max]);this._dataExtent=o},r.prototype.getDataDimensionIndex=function(n){var o=this.option.dimension;if(o!=null)return n.getDimensionIndex(o);for(var s=n.dimensions,l=s.length-1;l>=0;l--){var u=s[l],c=n.getDimensionInfo(u);if(!c.isCalculationCoord)return c.storeDimIndex}},r.prototype.getExtent=function(){return this._dataExtent.slice()},r.prototype.completeVisualOption=function(){var n=this.ecModel,o=this.option,s={inRange:o.inRange,outOfRange:o.outOfRange},l=o.target||(o.target={}),u=o.controller||(o.controller={});merge(l,s),merge(u,s);var c=this.isCategory();f.call(this,l),f.call(this,u),d.call(this,l,"inRange","outOfRange"),v.call(this,u);function f(g){isArray(o.color)&&!g.inRange&&(g.inRange={color:o.color.slice().reverse()}),g.inRange=g.inRange||{color:n.get("gradientColor")}}function d(g,y,_){var S=g[y],b=g[_];S&&!b&&(b=g[_]={},each$2(S,function(x,T){if(VisualMapping.isValidType(T)){var A=visualDefault.get(T,"inactive",c);A!=null&&(b[T]=A,T==="color"&&!b.hasOwnProperty("opacity")&&!b.hasOwnProperty("colorAlpha")&&(b.opacity=[0,0]))}}))}function v(g){var y=(g.inRange||{}).symbol||(g.outOfRange||{}).symbol,_=(g.inRange||{}).symbolSize||(g.outOfRange||{}).symbolSize,S=this.get("inactiveColor"),b=this.getItemSymbol(),x=b||"roundRect";each$2(this.stateList,function(T){var A=this.itemSize,w=g[T];w||(w=g[T]={color:c?S:[S]}),w.symbol==null&&(w.symbol=y&&clone$4(y)||(c?x:[x])),w.symbolSize==null&&(w.symbolSize=_&&clone$4(_)||(c?A[0]:[A[0],A[0]])),w.symbol=mapVisual(w.symbol,function(P){return P==="none"?x:P});var C=w.symbolSize;if(C!=null){var E=-1/0;eachVisual(C,function(P){P>E&&(E=P)}),w.symbolSize=mapVisual(C,function(P){return linearMap$1(P,[0,E],[0,A[0]],!0)})}},this)}},r.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},r.prototype.isCategory=function(){return!!this.option.categories},r.prototype.setSelected=function(n){},r.prototype.getSelected=function(){return null},r.prototype.getValueState=function(n){return null},r.prototype.getVisualMeta=function(n){return null},r.type="visualMap",r.dependencies=["series"],r.defaultOption={show:!0,z:4,min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:tokens.color.transparent,borderColor:tokens.color.borderTint,contentColor:tokens.color.theme[0],inactiveColor:tokens.color.disabled,borderWidth:0,padding:tokens.size.m,textGap:10,precision:0,textStyle:{color:tokens.color.secondary}},r}(ComponentModel),DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.optionUpdated=function(n,o){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(s){s.mappingMethod="linear",s.dataExtent=this.getExtent()}),this._resetRange()},r.prototype.resetItemSize=function(){a.prototype.resetItemSize.apply(this,arguments);var n=this.itemSize;(n[0]==null||isNaN(n[0]))&&(n[0]=DEFAULT_BAR_BOUND[0]),(n[1]==null||isNaN(n[1]))&&(n[1]=DEFAULT_BAR_BOUND[1])},r.prototype._resetRange=function(){var n=this.getExtent(),o=this.option.range;!o||o.auto?(n.auto=1,this.option.range=n):isArray$1(o)&&(o[0]>o[1]&&o.reverse(),o[0]=Math.max(o[0],n[0]),o[1]=Math.min(o[1],n[1]))},r.prototype.completeVisualOption=function(){a.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(n){var o=this.option.controller[n].symbolSize;o&&o[0]!==o[1]&&(o[0]=o[1]/3)},this)},r.prototype.setSelected=function(n){this.option.range=n.slice(),this._resetRange()},r.prototype.getSelected=function(){var n=this.getExtent(),o=asc$2((this.get("range")||[]).slice());return o[0]>n[1]&&(o[0]=n[1]),o[1]>n[1]&&(o[1]=n[1]),o[0]<n[0]&&(o[0]=n[0]),o[1]<n[0]&&(o[1]=n[0]),o},r.prototype.getValueState=function(n){var o=this.option.range,s=this.getExtent(),l=retrieve2(this.option.unboundedRange,!0);return(l&&o[0]<=s[0]||o[0]<=n)&&(l&&o[1]>=s[1]||n<=o[1])?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(n){var o=[];return this.eachTargetSeries(function(s){var l=[],u=s.getData();u.each(this.getDataDimensionIndex(u),function(c,f){n[0]<=c&&c<=n[1]&&l.push(f)},this),o.push({seriesId:s.id,dataIndex:l})},this),o},r.prototype.getVisualMeta=function(n){var o=getColorStopValues(this,"outOfRange",this.getExtent()),s=getColorStopValues(this,"inRange",this.option.range.slice()),l=[];function u(_,S){l.push({value:_,color:n(_,S)})}for(var c=0,f=0,d=s.length,v=o.length;f<v&&(!s.length||o[f]<=s[0]);f++)o[f]<s[c]&&u(o[f],"outOfRange");for(var g=1;c<d;c++,g=0)g&&l.length&&u(s[c],"outOfRange"),u(s[c],"inRange");for(var g=1;f<v;f++)(!s.length||s[s.length-1]<o[f])&&(g&&(l.length&&u(l[l.length-1].value,"outOfRange"),g=0),u(o[f],"outOfRange"));var y=l.length;return{stops:l,outerColors:[y?l[0].color:"transparent",y?l[y-1].color:"transparent"]}},r.type="visualMap.continuous",r.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:tokens.color.neutral00,borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:tokens.color.neutral00,borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:tokens.color.shadow}}),r}(VisualMapModel);function getColorStopValues(a,r,n){if(n[0]===n[1])return n.slice();for(var o=200,s=(n[1]-n[0])/o,l=n[0],u=[],c=0;c<=o&&l<n[1];c++)u.push(l),l+=s;return u.push(n[1]),u}var VisualMapView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return r.prototype.init=function(n,o){this.ecModel=n,this.api=o},r.prototype.render=function(n,o,s,l){if(this.visualMapModel=n,n.get("show")===!1){this.group.removeAll();return}this.doRender(n,o,s,l)},r.prototype.renderBackground=function(n){var o=this.visualMapModel,s=normalizeCssArray(o.get("padding")||0),l=n.getBoundingRect();n.add(new Rect$2({z2:-1,silent:!0,shape:{x:l.x-s[3],y:l.y-s[0],width:l.width+s[3]+s[1],height:l.height+s[0]+s[2]},style:{fill:o.get("backgroundColor"),stroke:o.get("borderColor"),lineWidth:o.get("borderWidth")}}))},r.prototype.getControllerVisual=function(n,o,s){s=s||{};var l=s.forceState,u=this.visualMapModel,c={};if(o==="color"){var f=u.get("contentColor");c.color=f}function d(_){return c[_]}function v(_,S){c[_]=S}var g=u.controllerVisuals[l||u.getValueState(n)],y=VisualMapping.prepareVisualTypes(g);return each$f(y,function(_){var S=g[_];s.convertOpacityToAlpha&&_==="opacity"&&(_="colorAlpha",S=g.__alphaForOpacity),VisualMapping.dependsOn(_,o)&&S&&S.applyVisual(n,d,v)}),c[o]},r.prototype.positionGroup=function(n){var o=this.visualMapModel,s=this.api,l=createBoxLayoutReference(o,s).refContainer;positionElement(n,o.getBoxLayoutParams(),l)},r.prototype.doRender=function(n,o,s,l){},r.type="visualMap",r}(ComponentView),paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(a,r,n){var o=a.option,s=o.align;if(s!=null&&s!=="auto")return s;for(var l={width:r.getWidth(),height:r.getHeight()},u=o.orient==="horizontal"?1:0,c=paramsSet[u],f=[0,null,10],d={},v=0;v<3;v++)d[paramsSet[1-u][v]]=f[v],d[c[v]]=v===2?n[0]:o[c[v]];var g=[["x","width",3],["y","height",0]][u],y=getLayoutRect(d,l,o.padding);return c[(y.margin[g[2]]||0)+y[g[0]]+y[g[1]]*.5<l[g[1]]*.5?0:1]}function makeHighDownBatch(a,r){return each$f(a||[],function(n){n.dataIndex!=null&&(n.dataIndexInside=n.dataIndex,n.dataIndex=null),n.highlightKey="visualMap"+(r?r.componentIndex:"")}),a}var linearMap=linearMap$2,each$1=each$f,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return r.prototype.init=function(n,o){a.prototype.init.call(this,n,o),this._hoverLinkFromSeriesMouseOver=bind$1(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=bind$1(this._hideIndicator,this)},r.prototype.doRender=function(n,o,s,l){(!l||l.type!=="selectDataRange"||l.from!==this.uid)&&this._buildView()},r.prototype._buildView=function(){this.group.removeAll();var n=this.visualMapModel,o=this.group;this._orient=n.get("orient"),this._useHandle=n.get("calculable"),this._resetInterval(),this._renderBar(o);var s=n.get("text");this._renderEndsText(o,s,0),this._renderEndsText(o,s,1),this._updateView(!0),this.renderBackground(o),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(o)},r.prototype._renderEndsText=function(n,o,s){if(o){var l=o[1-s];l=l!=null?l+"":"";var u=this.visualMapModel,c=u.get("textGap"),f=u.itemSize,d=this._shapes.mainGroup,v=this._applyTransform([f[0]/2,s===0?-c:f[1]+c],d),g=this._applyTransform(s===0?"bottom":"top",d),y=this._orient,_=this.visualMapModel.textStyleModel;this.group.add(new ZRText({style:createTextStyle(_,{x:v[0],y:v[1],verticalAlign:_.get("verticalAlign")||(y==="horizontal"?"middle":g),align:_.get("align")||(y==="horizontal"?g:"center"),text:l})}))}},r.prototype._renderBar=function(n){var o=this.visualMapModel,s=this._shapes,l=o.itemSize,u=this._orient,c=this._useHandle,f=getItemAlign(o,this.api,l),d=s.mainGroup=this._createBarGroup(f),v=new Group$3;d.add(v),v.add(s.outOfRange=createPolygon()),v.add(s.inRange=createPolygon(null,c?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),v.setClipPath(new Rect$2({shape:{x:0,y:0,width:l[0],height:l[1],r:3}}));var g=o.textStyleModel.getTextRect(""),y=mathMax(g.width,g.height);c&&(s.handleThumbs=[],s.handleLabels=[],s.handleLabelPoints=[],this._createHandle(o,d,0,l,y,u),this._createHandle(o,d,1,l,y,u)),this._createIndicator(o,d,l,y,u),n.add(d)},r.prototype._createHandle=function(n,o,s,l,u,c){var f=bind$1(this._dragHandle,this,s,!1),d=bind$1(this._dragHandle,this,s,!0),v=parsePercent$1(n.get("handleSize"),l[0]),g=createSymbol$1(n.get("handleIcon"),-v/2,-v/2,v,v,null,!0),y=getCursor(this._orient);g.attr({cursor:y,draggable:!0,drift:f,ondragend:d,onmousemove:function(T){stop(T.event)}}),g.x=l[0]/2,g.useStyle(n.getModel("handleStyle").getItemStyle()),g.setStyle({strokeNoScale:!0,strokeFirst:!0}),g.style.lineWidth*=2,g.ensureState("emphasis").style=n.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(g,!0),o.add(g);var _=this.visualMapModel.textStyleModel,S=new ZRText({cursor:y,draggable:!0,drift:f,onmousemove:function(T){stop(T.event)},ondragend:d,style:createTextStyle(_,{x:0,y:0,text:""})});S.ensureState("blur").style={opacity:.1},S.stateTransition={duration:200},this.group.add(S);var b=[v,0],x=this._shapes;x.handleThumbs[s]=g,x.handleLabelPoints[s]=b,x.handleLabels[s]=S},r.prototype._createIndicator=function(n,o,s,l,u){var c=parsePercent$1(n.get("indicatorSize"),s[0]),f=createSymbol$1(n.get("indicatorIcon"),-c/2,-c/2,c,c,null,!0);f.attr({cursor:"move",invisible:!0,silent:!0,x:s[0]/2});var d=n.getModel("indicatorStyle").getItemStyle();if(f instanceof ZRImage){var v=f.style;f.useStyle(extend({image:v.image,x:v.x,y:v.y,width:v.width,height:v.height},d))}else f.useStyle(d);o.add(f);var g=this.visualMapModel.textStyleModel,y=new ZRText({silent:!0,invisible:!0,style:createTextStyle(g,{x:0,y:0,text:""})});this.group.add(y);var _=[(u==="horizontal"?l/2:HOVER_LINK_OUT)+s[0]/2,0],S=this._shapes;S.indicator=f,S.indicatorLabel=y,S.indicatorLabelPoint=_,this._firstShowIndicator=!0},r.prototype._dragHandle=function(n,o,s,l){if(this._useHandle){if(this._dragging=!o,!o){var u=this._applyTransform([s,l],this._shapes.mainGroup,!0);this._updateInterval(n,u[1]),this._hideIndicator(),this._updateView()}o===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),o?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[n],!1)}},r.prototype._resetInterval=function(){var n=this.visualMapModel,o=this._dataInterval=n.getSelected(),s=n.getExtent(),l=[0,n.itemSize[1]];this._handleEnds=[linearMap(o[0],s,l,!0),linearMap(o[1],s,l,!0)]},r.prototype._updateInterval=function(n,o){o=o||0;var s=this.visualMapModel,l=this._handleEnds,u=[0,s.itemSize[1]];sliderMove(o,l,u,n,0);var c=s.getExtent();this._dataInterval=[linearMap(l[0],u,c,!0),linearMap(l[1],u,c,!0)]},r.prototype._updateView=function(n){var o=this.visualMapModel,s=o.getExtent(),l=this._shapes,u=[0,o.itemSize[1]],c=n?u:this._handleEnds,f=this._createBarVisual(this._dataInterval,s,c,"inRange"),d=this._createBarVisual(s,s,u,"outOfRange");l.inRange.setStyle({fill:f.barColor}).setShape("points",f.barPoints),l.outOfRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),this._updateHandle(c,f)},r.prototype._createBarVisual=function(n,o,s,l){var u={forceState:l,convertOpacityToAlpha:!0},c=this._makeColorGradient(n,u),f=[this.getControllerVisual(n[0],"symbolSize",u),this.getControllerVisual(n[1],"symbolSize",u)],d=this._createBarPoints(s,f);return{barColor:new LinearGradient(0,0,0,1,c),barPoints:d,handlesColor:[c[0].color,c[c.length-1].color]}},r.prototype._makeColorGradient=function(n,o){var s=100,l=[],u=(n[1]-n[0])/s;l.push({color:this.getControllerVisual(n[0],"color",o),offset:0});for(var c=1;c<s;c++){var f=n[0]+u*c;if(f>n[1])break;l.push({color:this.getControllerVisual(f,"color",o),offset:c/s})}return l.push({color:this.getControllerVisual(n[1],"color",o),offset:1}),l},r.prototype._createBarPoints=function(n,o){var s=this.visualMapModel.itemSize;return[[s[0]-o[0],n[0]],[s[0],n[0]],[s[0],n[1]],[s[0]-o[1],n[1]]]},r.prototype._createBarGroup=function(n){var o=this._orient,s=this.visualMapModel.get("inverse");return new Group$3(o==="horizontal"&&!s?{scaleX:n==="bottom"?1:-1,rotation:Math.PI/2}:o==="horizontal"&&s?{scaleX:n==="bottom"?-1:1,rotation:-Math.PI/2}:o==="vertical"&&!s?{scaleX:n==="left"?1:-1,scaleY:-1}:{scaleX:n==="left"?1:-1})},r.prototype._updateHandle=function(n,o){if(this._useHandle){var s=this._shapes,l=this.visualMapModel,u=s.handleThumbs,c=s.handleLabels,f=l.itemSize,d=l.getExtent(),v=this._applyTransform("left",s.mainGroup);each$1([0,1],function(g){var y=u[g];y.setStyle("fill",o.handlesColor[g]),y.y=n[g];var _=linearMap(n[g],[0,f[1]],d,!0),S=this.getControllerVisual(_,"symbolSize");y.scaleX=y.scaleY=S/f[0],y.x=f[0]-S/2;var b=applyTransform(s.handleLabelPoints[g],getTransform$1(y,this.group));if(this._orient==="horizontal"){var x=v==="left"||v==="top"?(f[0]-S)/2:(f[0]-S)/-2;b[1]+=x}c[g].setStyle({x:b[0],y:b[1],text:l.formatValueText(this._dataInterval[g]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",s.mainGroup):"center"})},this)}},r.prototype._showIndicator=function(n,o,s,l){var u=this.visualMapModel,c=u.getExtent(),f=u.itemSize,d=[0,f[1]],v=this._shapes,g=v.indicator;if(g){g.attr("invisible",!1);var y={convertOpacityToAlpha:!0},_=this.getControllerVisual(n,"color",y),S=this.getControllerVisual(n,"symbolSize"),b=linearMap(n,c,d,!0),x=f[0]-S/2,T={x:g.x,y:g.y};g.y=b,g.x=x;var A=applyTransform(v.indicatorLabelPoint,getTransform$1(g,this.group)),w=v.indicatorLabel;w.attr("invisible",!1);var C=this._applyTransform("left",v.mainGroup),E=this._orient,P=E==="horizontal";w.setStyle({text:(s||"")+u.formatValueText(o),verticalAlign:P?C:"middle",align:P?"center":C});var I={x,y:b,style:{fill:_}},M={style:{x:A[0],y:A[1]}};if(u.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var R={duration:100,easing:"cubicInOut",additive:!0};g.x=T.x,g.y=T.y,g.animateTo(I,R),w.animateTo(M,R)}else g.attr(I),w.attr(M);this._firstShowIndicator=!1;var O=this._shapes.handleLabels;if(O)for(var $=0;$<O.length;$++)this.api.enterBlur(O[$])}},r.prototype._enableHoverLinkToSeries=function(){var n=this;this._shapes.mainGroup.on("mousemove",function(o){if(n._hovering=!0,!n._dragging){var s=n.visualMapModel.itemSize,l=n._applyTransform([o.offsetX,o.offsetY],n._shapes.mainGroup,!0,!0);l[1]=mathMin(mathMax(0,l[1]),s[1]),n._doHoverLinkToSeries(l[1],0<=l[0]&&l[0]<=s[0])}}).on("mouseout",function(){n._hovering=!1,!n._dragging&&n._clearHoverLinkToSeries()})},r.prototype._enableHoverLinkFromSeries=function(){var n=this.api.getZr();this.visualMapModel.option.hoverLink?(n.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),n.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},r.prototype._doHoverLinkToSeries=function(n,o){var s=this.visualMapModel,l=s.itemSize;if(s.option.hoverLink){var u=[0,l[1]],c=s.getExtent();n=mathMin(mathMax(u[0],n),u[1]);var f=getHalfHoverLinkSize(s,c,u),d=[n-f,n+f],v=linearMap(n,u,c,!0),g=[linearMap(d[0],u,c,!0),linearMap(d[1],u,c,!0)];d[0]<u[0]&&(g[0]=-1/0),d[1]>u[1]&&(g[1]=1/0),o&&(g[0]===-1/0?this._showIndicator(v,g[1],"< ",f):g[1]===1/0?this._showIndicator(v,g[0],"> ",f):this._showIndicator(v,v," ",f));var y=this._hoverLinkDataIndices,_=[];(o||useHoverLinkOnHandle(s))&&(_=this._hoverLinkDataIndices=s.findTargetDataIndices(g));var S=compressBatches(y,_);this._dispatchHighDown("downplay",makeHighDownBatch(S[0],s)),this._dispatchHighDown("highlight",makeHighDownBatch(S[1],s))}},r.prototype._hoverLinkFromSeriesMouseOver=function(n){var o;if(findEventDispatcher(n.target,function(f){var d=getECData(f);if(d.dataIndex!=null)return o=d,!0},!0),!!o){var s=this.ecModel.getSeriesByIndex(o.seriesIndex),l=this.visualMapModel;if(l.isTargetSeries(s)){var u=s.getData(o.dataType),c=u.getStore().get(l.getDataDimensionIndex(u),o.dataIndex);isNaN(c)||this._showIndicator(c,c)}}},r.prototype._hideIndicator=function(){var n=this._shapes;n.indicator&&n.indicator.attr("invisible",!0),n.indicatorLabel&&n.indicatorLabel.attr("invisible",!0);var o=this._shapes.handleLabels;if(o)for(var s=0;s<o.length;s++)this.api.leaveBlur(o[s])},r.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var n=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(n,this.visualMapModel)),n.length=0},r.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var n=this.api.getZr();n.off("mouseover",this._hoverLinkFromSeriesMouseOver),n.off("mouseout",this._hideIndicator)},r.prototype._applyTransform=function(n,o,s,l){var u=getTransform$1(o,l?null:this.group);return isArray$1(n)?applyTransform(n,u,s):transformDirection(n,u,s)},r.prototype._dispatchHighDown=function(n,o){o&&o.length&&this.api.dispatchAction({type:n,batch:o})},r.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.type="visualMap.continuous",r}(VisualMapView);function createPolygon(a,r,n,o){return new Polygon({shape:{points:a},draggable:!!n,cursor:r,drift:n,onmousemove:function(s){stop(s.event)},ondragend:o})}function getHalfHoverLinkSize(a,r,n){var o=HOVER_LINK_SIZE/2,s=a.get("hoverLinkDataSize");return s&&(o=linearMap(s,r,n,!0)/2),o}function useHoverLinkOnHandle(a){var r=a.get("hoverLinkOnHandle");return!!(r??a.get("realtime"))}function getCursor(a){return a==="vertical"?"ns-resize":"ew-resize"}var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(a,r){r.eachComponent({mainType:"visualMap",query:a},function(n){n.setSelected(a.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(a,r){var n=[];return r.eachComponent("visualMap",function(o){var s=a.pipelineContext;!o.isTargetSeries(a)||s&&s.large||n.push(incrementalApplyVisual(o.stateList,o.targetVisuals,bind$1(o.getValueState,o),o.getDataDimensionIndex(a.getData())))}),n}},{createOnAllSeries:!0,reset:function(a,r){var n=a.getData(),o=[];r.eachComponent("visualMap",function(s){if(s.isTargetSeries(a)){var l=s.getVisualMeta(bind$1(getColorVisual,null,a,s))||{stops:[],outerColors:[]},u=s.getDataDimensionIndex(n);u>=0&&(l.dimension=u,o.push(l))}}),a.getData().setVisual("visualMeta",o)}}];function getColorVisual(a,r,n,o){for(var s=r.targetVisuals[o],l=VisualMapping.prepareVisualTypes(s),u={color:getVisualFromData(a.getData(),"color")},c=0,f=l.length;c<f;c++){var d=l[c],v=s[d==="opacity"?"__alphaForOpacity":d];v&&v.applyVisual(n,g,y)}return u.color;function g(_){return u[_]}function y(_,S){u[_]=S}}var each=each$f;function visualMapPreprocessor(a){var r=a&&a.visualMap;isArray$1(r)||(r=r?[r]:[]),each(r,function(n){if(n){has(n,"splitList")&&!has(n,"pieces")&&(n.pieces=n.splitList,delete n.splitList);var o=n.pieces;o&&isArray$1(o)&&each(o,function(s){isObject$3(s)&&(has(s,"start")&&!has(s,"min")&&(s.min=s.start),has(s,"end")&&!has(s,"max")&&(s.max=s.end))})}})}function has(a,r){return a&&a.hasOwnProperty&&a.hasOwnProperty(r)}var installed=!1;function installCommon(a){installed||(installed=!0,a.registerSubTypeDefaulter("visualMap",function(r){return!r.categories&&(!(r.pieces?r.pieces.length>0:r.splitNumber>0)||r.calculable)?"continuous":"piecewise"}),a.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(r){a.registerVisual(a.PRIORITY.VISUAL.COMPONENT,r)}),a.registerPreprocessor(visualMapPreprocessor))}function install$6(a){a.registerComponentModel(ContinuousModel),a.registerComponentView(ContinuousView),installCommon(a)}var PiecewiseModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n._pieceList=[],n}return r.prototype.optionUpdated=function(n,o){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var s=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(n,o);var l=this.option.categories;this.resetVisual(function(u,c){s==="categories"?(u.mappingMethod="category",u.categories=clone$4(l)):(u.dataExtent=this.getExtent(),u.mappingMethod="piecewise",u.pieceList=map$1(this._pieceList,function(f){return f=clone$4(f),c!=="inRange"&&(f.visual=null),f}))})},r.prototype.completeVisualOption=function(){var n=this.option,o={},s=VisualMapping.listVisualTypes(),l=this.isCategory();each$f(n.pieces,function(c){each$f(s,function(f){c.hasOwnProperty(f)&&(o[f]=1)})}),each$f(o,function(c,f){var d=!1;each$f(this.stateList,function(v){d=d||u(n,v,f)||u(n.target,v,f)},this),!d&&each$f(this.stateList,function(v){(n[v]||(n[v]={}))[f]=visualDefault.get(f,v==="inRange"?"active":"inactive",l)})},this);function u(c,f,d){return c&&c[f]&&c[f].hasOwnProperty(d)}a.prototype.completeVisualOption.apply(this,arguments)},r.prototype._resetSelected=function(n,o){var s=this.option,l=this._pieceList,u=(o?s:n).selected||{};if(s.selected=u,each$f(l,function(f,d){var v=this.getSelectedMapKey(f);u.hasOwnProperty(v)||(u[v]=!0)},this),s.selectedMode==="single"){var c=!1;each$f(l,function(f,d){var v=this.getSelectedMapKey(f);u[v]&&(c?u[v]=!1:c=!0)},this)}},r.prototype.getItemSymbol=function(){return this.get("itemSymbol")},r.prototype.getSelectedMapKey=function(n){return this._mode==="categories"?n.value+"":n.index+""},r.prototype.getPieceList=function(){return this._pieceList},r.prototype._determineMode=function(){var n=this.option;return n.pieces&&n.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},r.prototype.setSelected=function(n){this.option.selected=clone$4(n)},r.prototype.getValueState=function(n){var o=VisualMapping.findPieceIndex(n,this._pieceList);return o!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[o])]?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(n){var o=[],s=this._pieceList;return this.eachTargetSeries(function(l){var u=[],c=l.getData();c.each(this.getDataDimensionIndex(c),function(f,d){var v=VisualMapping.findPieceIndex(f,s);v===n&&u.push(d)},this),o.push({seriesId:l.id,dataIndex:u})},this),o},r.prototype.getRepresentValue=function(n){var o;if(this.isCategory())o=n.value;else if(n.value!=null)o=n.value;else{var s=n.interval||[];o=s[0]===-1/0&&s[1]===1/0?0:(s[0]+s[1])/2}return o},r.prototype.getVisualMeta=function(n){if(this.isCategory())return;var o=[],s=["",""],l=this;function u(v,g){var y=l.getRepresentValue({interval:v});g||(g=l.getValueState(y));var _=n(y,g);v[0]===-1/0?s[0]=_:v[1]===1/0?s[1]=_:o.push({value:v[0],color:_},{value:v[1],color:_})}var c=this._pieceList.slice();if(!c.length)c.push({interval:[-1/0,1/0]});else{var f=c[0].interval[0];f!==-1/0&&c.unshift({interval:[-1/0,f]}),f=c[c.length-1].interval[1],f!==1/0&&c.push({interval:[f,1/0]})}var d=-1/0;return each$f(c,function(v){var g=v.interval;g&&(g[0]>d&&u([d,g[0]],"outOfRange"),u(g.slice()),d=g[1])},this),{stops:o,outerColors:s}},r.type="visualMap.piecewise",r.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),r}(VisualMapModel),resetMethods={splitNumber:function(a){var r=this.option,n=Math.min(r.precision,20),o=this.getExtent(),s=r.splitNumber;s=Math.max(parseInt(s,10),1),r.splitNumber=s;for(var l=(o[1]-o[0])/s;+l.toFixed(n)!==l&&n<5;)n++;r.precision=n,l=+l.toFixed(n),r.minOpen&&a.push({interval:[-1/0,o[0]],close:[0,0]});for(var u=0,c=o[0];u<s;c+=l,u++){var f=u===s-1?o[1]:c+l;a.push({interval:[c,f],close:[1,1]})}r.maxOpen&&a.push({interval:[o[1],1/0],close:[0,0]}),reformIntervals(a),each$f(a,function(d,v){d.index=v,d.text=this.formatValueText(d.interval)},this)},categories:function(a){var r=this.option;each$f(r.categories,function(n){a.push({text:this.formatValueText(n,!0),value:n})},this),normalizeReverse(r,a)},pieces:function(a){var r=this.option;each$f(r.pieces,function(n,o){isObject$3(n)||(n={value:n});var s={text:"",index:o};if(n.label!=null&&(s.text=n.label),n.hasOwnProperty("value")){var l=s.value=n.value;s.interval=[l,l],s.close=[1,1]}else{for(var u=s.interval=[],c=s.close=[0,0],f=[1,0,1],d=[-1/0,1/0],v=[],g=0;g<2;g++){for(var y=[["gte","gt","min"],["lte","lt","max"]][g],_=0;_<3&&u[g]==null;_++)u[g]=n[y[_]],c[g]=f[_],v[g]=_===2;u[g]==null&&(u[g]=d[g])}v[0]&&u[1]===1/0&&(c[0]=0),v[1]&&u[0]===-1/0&&(c[1]=0),u[0]===u[1]&&c[0]&&c[1]&&(s.value=u[0])}s.visual=VisualMapping.retrieveVisuals(n),a.push(s)},this),normalizeReverse(r,a),reformIntervals(a),each$f(a,function(n){var o=n.close,s=[["<",""][o[1]],[">",""][o[0]]];n.text=n.text||this.formatValueText(n.value!=null?n.value:n.interval,!1,s)},this)}};function normalizeReverse(a,r){var n=a.inverse;(a.orient==="vertical"?!n:n)&&r.reverse()}var PiecewiseVisualMapView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.doRender=function(){var n=this.group;n.removeAll();var o=this.visualMapModel,s=o.get("textGap"),l=o.textStyleModel,u=this._getItemAlign(),c=o.itemSize,f=this._getViewData(),d=f.endsText,v=retrieve(o.get("showLabel",!0),!d),g=!o.get("selectedMode");d&&this._renderEndsText(n,d[0],c,v,u),each$f(f.viewPieceList,function(y){var _=y.piece,S=new Group$3;S.onclick=bind$1(this._onItemClick,this,_),this._enableHoverLink(S,y.indexInModelPieceList);var b=o.getRepresentValue(_);if(this._createItemSymbol(S,b,[0,0,c[0],c[1]],g),v){var x=this.visualMapModel.getValueState(b),T=l.get("align")||u;S.add(new ZRText({style:createTextStyle(l,{x:T==="right"?-s:c[0]+s,y:c[1]/2,text:_.text,verticalAlign:l.get("verticalAlign")||"middle",align:T,opacity:retrieve2(l.get("opacity"),x==="outOfRange"?.5:1)}),silent:g}))}n.add(S)},this),d&&this._renderEndsText(n,d[1],c,v,u),box(o.get("orient"),n,o.get("itemGap")),this.renderBackground(n),this.positionGroup(n)},r.prototype._enableHoverLink=function(n,o){var s=this;n.on("mouseover",function(){return l("highlight")}).on("mouseout",function(){return l("downplay")});var l=function(u){var c=s.visualMapModel;c.option.hoverLink&&s.api.dispatchAction({type:u,batch:makeHighDownBatch(c.findTargetDataIndices(o),c)})}},r.prototype._getItemAlign=function(){var n=this.visualMapModel,o=n.option;if(o.orient==="vertical")return getItemAlign(n,this.api,n.itemSize);var s=o.align;return(!s||s==="auto")&&(s="left"),s},r.prototype._renderEndsText=function(n,o,s,l,u){if(o){var c=new Group$3,f=this.visualMapModel.textStyleModel;c.add(new ZRText({style:createTextStyle(f,{x:l?u==="right"?s[0]:0:s[0]/2,y:s[1]/2,verticalAlign:"middle",align:l?u:"center",text:o})})),n.add(c)}},r.prototype._getViewData=function(){var n=this.visualMapModel,o=map$1(n.getPieceList(),function(c,f){return{piece:c,indexInModelPieceList:f}}),s=n.get("text"),l=n.get("orient"),u=n.get("inverse");return(l==="horizontal"?u:!u)?o.reverse():s&&(s=s.slice().reverse()),{viewPieceList:o,endsText:s}},r.prototype._createItemSymbol=function(n,o,s,l){var u=createSymbol$1(this.getControllerVisual(o,"symbol"),s[0],s[1],s[2],s[3],this.getControllerVisual(o,"color"));u.silent=l,n.add(u)},r.prototype._onItemClick=function(n){var o=this.visualMapModel,s=o.option,l=s.selectedMode;if(l){var u=clone$4(s.selected),c=o.getSelectedMapKey(n);l==="single"||l===!0?(u[c]=!0,each$f(u,function(f,d){u[d]=d===c})):u[c]=!u[c],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:u})}},r.type="visualMap.piecewise",r}(VisualMapView);function install$5(a){a.registerComponentModel(PiecewiseModel),a.registerComponentView(PiecewiseVisualMapView),installCommon(a)}function install$4(a){use(install$6),use(install$5)}var ThumbnailBridgeImpl=function(){function a(r){this._thumbnailModel=r}return a.prototype.reset=function(r){this._renderVersion=r.getMainProcessVersion()},a.prototype.renderContent=function(r){var n=r.api.getViewOfComponentModel(this._thumbnailModel);n&&(r.group.silent=!0,n.renderContent({group:r.group,targetTrans:r.targetTrans,z2Range:calcZ2Range(r.group),roamType:r.roamType,viewportRect:r.viewportRect,renderVersion:this._renderVersion}))},a.prototype.updateWindow=function(r,n){var o=n.getViewOfComponentModel(this._thumbnailModel);o&&o.updateWindow({targetTrans:r,renderVersion:this._renderVersion})},a}(),ThumbnailModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n.preventAutoZ=!0,n}return r.prototype.optionUpdated=function(n,o){this._updateBridge()},r.prototype._updateBridge=function(){var n=this._birdge=this._birdge||new ThumbnailBridgeImpl(this);if(this._target=null,this.ecModel.eachSeries(function(s){injectThumbnailBridge(s,null)}),this.shouldShow()){var o=this.getTarget();injectThumbnailBridge(o.baseMapProvider,n)}},r.prototype.shouldShow=function(){return this.getShallow("show",!0)},r.prototype.getBridge=function(){return this._birdge},r.prototype.getTarget=function(){if(this._target)return this._target;var n=this.getReferringComponents("series",{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];return n?n.subType!=="graph"&&(n=null):n=this.ecModel.queryComponents({mainType:"series",subType:"graph"})[0],this._target={baseMapProvider:n},this._target},r.type="thumbnail",r.layoutMode="box",r.dependencies=["series","geo"],r.defaultOption={show:!0,right:1,bottom:1,height:"25%",width:"25%",itemStyle:{borderColor:tokens.color.border,borderWidth:2},windowStyle:{borderWidth:1,color:tokens.color.neutral30,borderColor:tokens.color.neutral40,opacity:.3},z:10},r}(ComponentModel),ThumbnailView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,o,s){if(this._api=s,this._model=n,this._coordSys||(this._coordSys=new View),!this._isEnabled()){this._clear();return}this._renderVersion=s.getMainProcessVersion();var l=this.group;l.removeAll();var u=n.getModel("itemStyle"),c=u.getItemStyle();c.fill==null&&(c.fill=o.get("backgroundColor")||tokens.color.neutral00);var f=createBoxLayoutReference(n,s).refContainer,d=getLayoutRect(getBoxLayoutParams(n,!0),f),v=c.lineWidth||0,g=this._contentRect=expandOrShrinkRect(d.clone(),v/2,!0,!0),y=new Group$3;l.add(y),y.setClipPath(new Rect$2({shape:g.plain()}));var _=this._targetGroup=new Group$3;y.add(_);var S=d.plain();S.r=u.getShallow("borderRadius",!0),l.add(this._bgRect=new Rect$2({style:c,shape:S,silent:!1,cursor:"grab"}));var b=n.getModel("windowStyle"),x=b.getShallow("borderRadius",!0);y.add(this._windowRect=new Rect$2({shape:{x:0,y:0,width:0,height:0,r:x},style:b.getItemStyle(),silent:!1,cursor:"grab"})),this._dealRenderContent(),this._dealUpdateWindow(),updateZ(n,this)},r.prototype.renderContent=function(n){this._bridgeRendered=n,this._isEnabled()&&(this._dealRenderContent(),this._dealUpdateWindow(),updateZ(this._model,this))},r.prototype._dealRenderContent=function(){var n=this._bridgeRendered;if(!(!n||n.renderVersion!==this._renderVersion)){var o=this._targetGroup,s=this._coordSys,l=this._contentRect;if(o.removeAll(),!!n){var u=n.group,c=u.getBoundingRect();o.add(u),this._bgRect.z2=n.z2Range.min-10,s.setBoundingRect(c.x,c.y,c.width,c.height);var f=getLayoutRect({left:"center",top:"center",aspect:c.width/c.height},l);s.setViewRect(f.x,f.y,f.width,f.height),u.attr(s.getTransformInfo().raw),this._windowRect.z2=n.z2Range.max+10,this._resetRoamController(n.roamType)}}},r.prototype.updateWindow=function(n){var o=this._bridgeRendered;o&&o.renderVersion===n.renderVersion&&(o.targetTrans=n.targetTrans),this._isEnabled()&&this._dealUpdateWindow()},r.prototype._dealUpdateWindow=function(){var n=this._bridgeRendered;if(!(!n||n.renderVersion!==this._renderVersion)){var o=invert([],n.targetTrans),s=mul([],this._coordSys.transform,o);this._transThisToTarget=invert([],s);var l=n.viewportRect;l?l=l.clone():l=new BoundingRect(0,0,this._api.getWidth(),this._api.getHeight()),l.applyTransform(s);var u=this._windowRect,c=u.shape.r;u.setShape(defaults({r:c},l))}},r.prototype._resetRoamController=function(n){var o=this,s=this._api,l=this._roamController;if(l||(l=this._roamController=new RoamController(s.getZr())),!n||!this._isEnabled()){l.disable();return}l.enable(n,{api:s,zInfo:{component:this._model},triggerInfo:{roamTrigger:null,isInSelf:function(u,c,f){return o._contentRect.contain(c,f)}}}),l.off("pan").off("zoom").on("pan",bind$1(this._onPan,this)).on("zoom",bind$1(this._onZoom,this))},r.prototype._onPan=function(n){var o=this._transThisToTarget;if(!(!this._isEnabled()||!o)){var s=applyTransform$1([],[n.oldX,n.oldY],o),l=applyTransform$1([],[n.oldX-n.dx,n.oldY-n.dy],o);this._api.dispatchAction(makeRoamPayload(this._model.getTarget().baseMapProvider,{dx:l[0]-s[0],dy:l[1]-s[1]}))}},r.prototype._onZoom=function(n){var o=this._transThisToTarget;if(!(!this._isEnabled()||!o)){var s=applyTransform$1([],[n.originX,n.originY],o);this._api.dispatchAction(makeRoamPayload(this._model.getTarget().baseMapProvider,{zoom:1/n.scale,originX:s[0],originY:s[1]}))}},r.prototype._isEnabled=function(){var n=this._model;if(!n||!n.shouldShow())return!1;var o=n.getTarget().baseMapProvider;return!!o},r.prototype._clear=function(){this.group.removeAll(),this._bridgeRendered=null,this._roamController&&this._roamController.disable()},r.prototype.remove=function(){this._clear()},r.prototype.dispose=function(){this._clear()},r.type="thumbnail",r}(ComponentView);function makeRoamPayload(a,r){var n=a.mainType==="series"?a.subType+"Roam":a.mainType+"Roam",o={type:n};return o[a.mainType+"Id"]=a.id,extend(o,r),o}function updateZ(a,r){var n=retrieveZInfo(a);traverseUpdateZ(r.group,n.z,n.zlevel)}function install$3(a){a.registerComponentModel(ThumbnailModel),a.registerComponentView(ThumbnailView)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(a,r){var n=a.getModel("aria");if(!n.get("enabled"))return;var o=clone$4(DEFAULT_OPTION);merge(o.label,a.getLocaleModel().get("aria"),!1),merge(n.option,o,!1),s(),l();function s(){var d=n.getModel("decal"),v=d.get("show");if(v){var g=createHashMap();a.eachSeries(function(y){if(!y.isColorBySeries()){var _=g.get(y.type);_||(_={},g.set(y.type,_)),inner(y).scope=_}}),a.eachRawSeries(function(y){if(a.isSeriesFiltered(y))return;if(isFunction(y.enableAriaDecal)){y.enableAriaDecal();return}var _=y.getData();if(y.isColorBySeries()){var A=getDecalFromPalette(y.ecModel,y.name,decalPaletteScope,a.getSeriesCount()),w=_.getVisual("decal");_.setVisual("decal",C(w,A))}else{var S=y.getRawData(),b={},x=inner(y).scope;_.each(function(E){var P=_.getRawIndex(E);b[P]=E});var T=S.count();S.each(function(E){var P=b[E],I=S.getName(E)||E+"",M=getDecalFromPalette(y.ecModel,I,x,T),R=_.getItemVisual(P,"decal");_.setItemVisual(P,"decal",C(R,M))})}function C(E,P){var I=E?extend(extend({},P),E):P;return I.dirty=!0,I}})}}function l(){var d=r.getZr().dom;if(d){var v=a.getLocaleModel().get("aria"),g=n.getModel("label");if(g.option=defaults(g.option,v),!!g.get("enabled")){if(d.setAttribute("role","img"),g.get("description")){d.setAttribute("aria-label",g.get("description"));return}var y=a.getSeriesCount(),_=g.get(["data","maxCount"])||10,S=g.get(["series","maxCount"])||10,b=Math.min(y,S),x;if(!(y<1)){var T=c();if(T){var A=g.get(["general","withTitle"]);x=u(A,{title:T})}else x=g.get(["general","withoutTitle"]);var w=[],C=y>1?g.get(["series","multiple","prefix"]):g.get(["series","single","prefix"]);x+=u(C,{seriesCount:y}),a.eachSeries(function(M,R){if(R<b){var O=void 0,$=M.get("name"),B=$?"withName":"withoutName";O=y>1?g.get(["series","multiple",B]):g.get(["series","single",B]),O=u(O,{seriesId:M.seriesIndex,seriesName:M.get("name"),seriesType:f(M.subType)});var F=M.getData();if(F.count()>_){var z=g.get(["data","partialData"]);O+=u(z,{displayCnt:_})}else O+=g.get(["data","allData"]);for(var G=g.get(["data","separator","middle"]),D=g.get(["data","separator","end"]),V=g.get(["data","excludeDimensionId"]),L=[],N=0;N<F.count();N++)if(N<_){var U=F.getName(N),H=V?filter(F.getValues(N),function(Z,ee){return indexOf(V,ee)===-1}):F.getValues(N),q=g.get(["data",U?"withName":"withoutName"]);L.push(u(q,{name:U,value:H.join(G)}))}O+=L.join(G)+D,w.push(O)}});var E=g.getModel(["series","multiple","separator"]),P=E.get("middle"),I=E.get("end");x+=w.join(P)+I,d.setAttribute("aria-label",x)}}}}function u(d,v){if(!isString(d))return d;var g=d;return each$f(v,function(y,_){g=g.replace(new RegExp("\\{\\s*"+_+"\\s*\\}","g"),y)}),g}function c(){var d=a.get("title");return d&&d.length&&(d=d[0]),d&&d.text}function f(d){var v=a.getLocaleModel().get(["series","typeNames"]);return v[d]||v.chart}}function ariaPreprocessor(a){if(!(!a||!a.aria)){var r=a.aria;r.show!=null&&(r.enabled=r.show),r.label=r.label||{},each$f(["description","general","series","data"],function(n){r[n]!=null&&(r.label[n]=r[n])})}}function install$2(a){a.registerPreprocessor(ariaPreprocessor),a.registerVisual(a.PRIORITY.VISUAL.ARIA,ariaVisual)}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=function(){function a(r){var n=this._condVal=isString(r)?new RegExp(r):isRegExp(r)?r:null;if(n==null){var o="";throwError(o)}}return a.prototype.evaluate=function(r){var n=typeof r;return isString(n)?this._condVal.test(r):isNumber(n)?this._condVal.test(r+""):!1},a}(),ConstConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){return this.value},a}(),AndConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){for(var r=this.children,n=0;n<r.length;n++)if(!r[n].evaluate())return!1;return!0},a}(),OrConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){for(var r=this.children,n=0;n<r.length;n++)if(r[n].evaluate())return!0;return!1},a}(),NotConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){return!this.child.evaluate()},a}(),RelationalConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){for(var r=!!this.valueParser,n=this.getValue,o=n(this.valueGetterParam),s=r?this.valueParser(o):null,l=0;l<this.subCondList.length;l++)if(!this.subCondList[l].evaluate(r?s:o))return!1;return!0},a}();function parseOption(a,r){if(a===!0||a===!1){var n=new ConstConditionInternal;return n.value=a,n}var o="";return isObjectNotArray(a)||throwError(o),a.and?parseAndOrOption("and",a,r):a.or?parseAndOrOption("or",a,r):a.not?parseNotOption(a,r):parseRelationalOption(a,r)}function parseAndOrOption(a,r,n){var o=r[a],s="";isArray$1(o)||throwError(s),o.length||throwError(s);var l=a==="and"?new AndConditionInternal:new OrConditionInternal;return l.children=map$1(o,function(u){return parseOption(u,n)}),l.children.length||throwError(s),l}function parseNotOption(a,r){var n=a.not,o="";isObjectNotArray(n)||throwError(o);var s=new NotConditionInternal;return s.child=parseOption(n,r),s.child||throwError(o),s}function parseRelationalOption(a,r){for(var n="",o=r.prepareGetValue(a),s=[],l=keys(a),u=a.parser,c=u?getRawValueParser(u):null,f=0;f<l.length;f++){var d=l[f];if(!(d==="parser"||r.valueGetterAttrMap.get(d))){var v=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,d)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[d]:d,g=a[d],y=c?c(g):g,_=createFilterComparator(v,y)||v==="reg"&&new RegExpEvaluator(y);_||throwError(n),s.push(_)}}s.length||throwError(n);var S=new RelationalConditionInternal;return S.valueGetterParam=o,S.valueParser=c,S.getValue=r.getValue,S.subCondList=s,S}function isObjectNotArray(a){return isObject$3(a)&&!isArrayLike(a)}var ConditionalExpressionParsed=function(){function a(r,n){this._cond=parseOption(r,n)}return a.prototype.evaluate=function(){return this._cond.evaluate()},a}();function parseConditionalExpression(a,r){return new ConditionalExpressionParsed(a,r)}var filterTransform={type:"echarts:filter",transform:function(a){for(var r=a.upstream,n,o=parseConditionalExpression(a.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(c){var f="",d=c.dimension;hasOwn(c,"dimension")||throwError(f);var v=r.getDimensionInfo(d);return v||throwError(f),{dimIdx:v.index}},getValue:function(c){return r.retrieveValueFromItem(n,c.dimIdx)}}),s=[],l=0,u=r.count();l<u;l++)n=r.getRawDataItem(l),o.evaluate()&&s.push(n);return{data:s}}},sortTransform={type:"echarts:sort",transform:function(a){var r=a.upstream,n=a.config,o="",s=normalizeToArray(n);s.length||throwError(o);var l=[];each$f(s,function(v){var g=v.dimension,y=v.order,_=v.parser,S=v.incomparable;if(g==null&&throwError(o),y!=="asc"&&y!=="desc"&&throwError(o),S&&S!=="min"&&S!=="max"){var b="";throwError(b)}if(y!=="asc"&&y!=="desc"){var x="";throwError(x)}var T=r.getDimensionInfo(g);T||throwError(o);var A=_?getRawValueParser(_):null;_&&!A&&throwError(o),l.push({dimIdx:T.index,parser:A,comparator:new SortOrderComparator(y,S)})});var u=r.sourceFormat;u!==SOURCE_FORMAT_ARRAY_ROWS&&u!==SOURCE_FORMAT_OBJECT_ROWS&&throwError(o);for(var c=[],f=0,d=r.count();f<d;f++)c.push(r.getRawDataItem(f));return c.sort(function(v,g){for(var y=0;y<l.length;y++){var _=l[y],S=r.retrieveValueFromItem(v,_.dimIdx),b=r.retrieveValueFromItem(g,_.dimIdx);_.parser&&(S=_.parser(S),b=_.parser(b));var x=_.comparator.evaluate(S,b);if(x!==0)return x}return 0}),{data:c}}};function install$1(a){a.registerTransform(filterTransform),a.registerTransform(sortTransform)}var DatasetModel=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type="dataset",n}return r.prototype.init=function(n,o,s){a.prototype.init.call(this,n,o,s),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},r.prototype.mergeOption=function(n,o){a.prototype.mergeOption.call(this,n,o),disableTransformOptionMerge(this)},r.prototype.optionUpdated=function(){this._sourceManager.dirty()},r.prototype.getSourceManager=function(){return this._sourceManager},r.type="dataset",r.defaultOption={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN},r}(ComponentModel),DatasetView=function(a){__extends(r,a);function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.type="dataset",n}return r.type="dataset",r}(ComponentView);function install(a){a.registerComponentModel(DatasetModel),a.registerComponentView(DatasetView)}var CMD=PathProxy.CMD;function aroundEqual(a,r){return Math.abs(a-r)<1e-5}function pathToBezierCurves(a){var r=a.data,n=a.len(),o=[],s,l=0,u=0,c=0,f=0;function d(F,z){s&&s.length>2&&o.push(s),s=[F,z]}function v(F,z,G,D){aroundEqual(F,G)&&aroundEqual(z,D)||s.push(F,z,G,D,G,D)}function g(F,z,G,D,V,L){var N=Math.abs(z-F),U=Math.tan(N/4)*4/3,H=z<F?-1:1,q=Math.cos(F),Z=Math.sin(F),ee=Math.cos(z),ne=Math.sin(z),ue=q*V+G,K=Z*L+D,J=ee*V+G,X=ne*L+D,ie=V*U*H,te=L*U*H;s.push(ue-ie*Z,K+te*q,J+ie*ne,X-te*ee,J,X)}for(var y,_,S,b,x=0;x<n;){var T=r[x++],A=x===1;switch(A&&(l=r[x],u=r[x+1],c=l,f=u,(T===CMD.L||T===CMD.C||T===CMD.Q)&&(s=[c,f])),T){case CMD.M:l=c=r[x++],u=f=r[x++],d(c,f);break;case CMD.L:y=r[x++],_=r[x++],v(l,u,y,_),l=y,u=_;break;case CMD.C:s.push(r[x++],r[x++],r[x++],r[x++],l=r[x++],u=r[x++]);break;case CMD.Q:y=r[x++],_=r[x++],S=r[x++],b=r[x++],s.push(l+2/3*(y-l),u+2/3*(_-u),S+2/3*(y-S),b+2/3*(_-b),S,b),l=S,u=b;break;case CMD.A:var w=r[x++],C=r[x++],E=r[x++],P=r[x++],I=r[x++],M=r[x++]+I;x+=1;var R=!r[x++];y=Math.cos(I)*E+w,_=Math.sin(I)*P+C,A?(c=y,f=_,d(c,f)):v(l,u,y,_),l=Math.cos(M)*E+w,u=Math.sin(M)*P+C;for(var O=(R?-1:1)*Math.PI/2,$=I;R?$>M:$<M;$+=O){var B=R?Math.max($+O,M):Math.min($+O,M);g($,B,w,C,E,P)}break;case CMD.R:c=l=r[x++],f=u=r[x++],y=c+r[x++],_=f+r[x++],d(y,f),v(y,f,y,_),v(y,_,c,_),v(c,_,c,f),v(c,f,y,f);break;case CMD.Z:s&&v(l,u,c,f),l=c,u=f;break}}return s&&s.length>2&&o.push(s),o}function adpativeBezier(a,r,n,o,s,l,u,c,f,d){if(aroundEqual(a,n)&&aroundEqual(r,o)&&aroundEqual(s,u)&&aroundEqual(l,c)){f.push(u,c);return}var v=2/d,g=v*v,y=u-a,_=c-r,S=Math.sqrt(y*y+_*_);y/=S,_/=S;var b=n-a,x=o-r,T=s-u,A=l-c,w=b*b+x*x,C=T*T+A*A;if(w<g&&C<g){f.push(u,c);return}var E=y*b+_*x,P=-y*T-_*A,I=w-E*E,M=C-P*P;if(I<g&&E>=0&&M<g&&P>=0){f.push(u,c);return}var R=[],O=[];cubicSubdivide(a,n,s,u,.5,R),cubicSubdivide(r,o,l,c,.5,O),adpativeBezier(R[0],O[0],R[1],O[1],R[2],O[2],R[3],O[3],f,d),adpativeBezier(R[4],O[4],R[5],O[5],R[6],O[6],R[7],O[7],f,d)}function pathToPolygons(a,r){var n=pathToBezierCurves(a),o=[];r=r||1;for(var s=0;s<n.length;s++){var l=n[s],u=[],c=l[0],f=l[1];u.push(c,f);for(var d=2;d<l.length;){var v=l[d++],g=l[d++],y=l[d++],_=l[d++],S=l[d++],b=l[d++];adpativeBezier(c,f,v,g,y,_,S,b,u,r),c=S,f=b}o.push(u)}return o}function getDividingGrids(a,r,n){var o=a[r],s=a[1-r],l=Math.abs(o/s),u=Math.ceil(Math.sqrt(l*n)),c=Math.floor(n/u);c===0&&(c=1,u=n);for(var f=[],d=0;d<u;d++)f.push(c);var v=u*c,g=n-v;if(g>0)for(var d=0;d<g;d++)f[d%u]+=1;return f}function divideSector(a,r,n){for(var o=a.r0,s=a.r,l=a.startAngle,u=a.endAngle,c=Math.abs(u-l),f=c*s,d=s-o,v=f>Math.abs(d),g=getDividingGrids([f,d],v?0:1,r),y=(v?c:d)/g.length,_=0;_<g.length;_++)for(var S=(v?d:c)/g[_],b=0;b<g[_];b++){var x={};v?(x.startAngle=l+y*_,x.endAngle=l+y*(_+1),x.r0=o+S*b,x.r=o+S*(b+1)):(x.startAngle=l+S*b,x.endAngle=l+S*(b+1),x.r0=o+y*_,x.r=o+y*(_+1)),x.clockwise=a.clockwise,x.cx=a.cx,x.cy=a.cy,n.push(x)}}function divideRect(a,r,n){for(var o=a.width,s=a.height,l=o>s,u=getDividingGrids([o,s],l?0:1,r),c=l?"width":"height",f=l?"height":"width",d=l?"x":"y",v=l?"y":"x",g=a[c]/u.length,y=0;y<u.length;y++)for(var _=a[f]/u[y],S=0;S<u[y];S++){var b={};b[d]=y*g,b[v]=S*_,b[c]=g,b[f]=_,b.x+=a.x,b.y+=a.y,n.push(b)}}function crossProduct2d(a,r,n,o){return a*o-n*r}function lineLineIntersect(a,r,n,o,s,l,u,c){var f=n-a,d=o-r,v=u-s,g=c-l,y=crossProduct2d(v,g,f,d);if(Math.abs(y)<1e-6)return null;var _=a-s,S=r-l,b=crossProduct2d(_,S,v,g)/y;return b<0||b>1?null:new Point(b*f+a,b*d+r)}function projPtOnLine(a,r,n){var o=new Point;Point.sub(o,n,r),o.normalize();var s=new Point;Point.sub(s,a,r);var l=s.dot(o);return l}function addToPoly(a,r){var n=a[a.length-1];n&&n[0]===r[0]&&n[1]===r[1]||a.push(r)}function splitPolygonByLine(a,r,n){for(var o=a.length,s=[],l=0;l<o;l++){var u=a[l],c=a[(l+1)%o],f=lineLineIntersect(u[0],u[1],c[0],c[1],r.x,r.y,n.x,n.y);f&&s.push({projPt:projPtOnLine(f,r,n),pt:f,idx:l})}if(s.length<2)return[{points:a},{points:a}];s.sort(function(x,T){return x.projPt-T.projPt});var d=s[0],v=s[s.length-1];if(v.idx<d.idx){var g=d;d=v,v=g}for(var y=[d.pt.x,d.pt.y],_=[v.pt.x,v.pt.y],S=[y],b=[_],l=d.idx+1;l<=v.idx;l++)addToPoly(S,a[l].slice());addToPoly(S,_),addToPoly(S,y);for(var l=v.idx+1;l<=d.idx+o;l++)addToPoly(b,a[l%o].slice());return addToPoly(b,y),addToPoly(b,_),[{points:S},{points:b}]}function binaryDividePolygon(a){var r=a.points,n=[],o=[];fromPoints(r,n,o);var s=new BoundingRect(n[0],n[1],o[0]-n[0],o[1]-n[1]),l=s.width,u=s.height,c=s.x,f=s.y,d=new Point,v=new Point;return l>u?(d.x=v.x=c+l/2,d.y=f,v.y=f+u):(d.y=v.y=f+u/2,d.x=c,v.x=c+l),splitPolygonByLine(r,d,v)}function binaryDivideRecursive(a,r,n,o){if(n===1)o.push(r);else{var s=Math.floor(n/2),l=a(r);binaryDivideRecursive(a,l[0],s,o),binaryDivideRecursive(a,l[1],n-s,o)}return o}function clone(a,r){for(var n=[],o=0;o<r;o++)n.push(clonePath(a));return n}function copyPathProps(a,r){r.setStyle(a.style),r.z=a.z,r.z2=a.z2,r.zlevel=a.zlevel}function polygonConvert(a){for(var r=[],n=0;n<a.length;)r.push([a[n++],a[n++]]);return r}function split(a,r){var n=[],o=a.shape,s;switch(a.type){case"rect":divideRect(o,r,n),s=Rect$2;break;case"sector":divideSector(o,r,n),s=Sector;break;case"circle":divideSector({r0:0,r:o.r,startAngle:0,endAngle:Math.PI*2,cx:o.cx,cy:o.cy},r,n),s=Sector;break;default:var l=a.getComputedTransform(),u=l?Math.sqrt(Math.max(l[0]*l[0]+l[1]*l[1],l[2]*l[2]+l[3]*l[3])):1,c=map$1(pathToPolygons(a.getUpdatedPathProxy(),u),function(T){return polygonConvert(T)}),f=c.length;if(f===0)binaryDivideRecursive(binaryDividePolygon,{points:c[0]},r,n);else if(f===r)for(var d=0;d<f;d++)n.push({points:c[d]});else{var v=0,g=map$1(c,function(T){var A=[],w=[];fromPoints(T,A,w);var C=(w[1]-A[1])*(w[0]-A[0]);return v+=C,{poly:T,area:C}});g.sort(function(T,A){return A.area-T.area});for(var y=r,d=0;d<f;d++){var _=g[d];if(y<=0)break;var S=d===f-1?y:Math.ceil(_.area/v*r);S<0||(binaryDivideRecursive(binaryDividePolygon,{points:_.poly},S,n),y-=S)}}s=Polygon;break}if(!s)return clone(a,r);for(var b=[],d=0;d<n.length;d++){var x=new s;x.setShape(n[d]),copyPathProps(a,x),b.push(x)}return b}function alignSubpath(a,r){var n=a.length,o=r.length;if(n===o)return[a,r];for(var s=[],l=[],u=n<o?a:r,c=Math.min(n,o),f=Math.abs(o-n)/6,d=(c-2)/6,v=Math.ceil(f/d)+1,g=[u[0],u[1]],y=f,_=2;_<c;){var S=u[_-2],b=u[_-1],x=u[_++],T=u[_++],A=u[_++],w=u[_++],C=u[_++],E=u[_++];if(y<=0){g.push(x,T,A,w,C,E);continue}for(var P=Math.min(y,v-1)+1,I=1;I<=P;I++){var M=I/P;cubicSubdivide(S,x,A,C,M,s),cubicSubdivide(b,T,w,E,M,l),S=s[3],b=l[3],g.push(s[1],l[1],s[2],l[2],S,b),x=s[5],T=l[5],A=s[6],w=l[6]}y-=P-1}return u===a?[g,r]:[a,g]}function createSubpath(a,r){for(var n=a.length,o=a[n-2],s=a[n-1],l=[],u=0;u<r.length;)l[u++]=o,l[u++]=s;return l}function alignBezierCurves(a,r){for(var n,o,s,l=[],u=[],c=0;c<Math.max(a.length,r.length);c++){var f=a[c],d=r[c],v=void 0,g=void 0;f?d?(n=alignSubpath(f,d),v=n[0],g=n[1],o=v,s=g):(g=createSubpath(s||f,f),v=f):(v=createSubpath(o||d,d),g=d),l.push(v),u.push(g)}return[l,u]}function centroid(a){for(var r=0,n=0,o=0,s=a.length,l=0,u=s-2;l<s;u=l,l+=2){var c=a[u],f=a[u+1],d=a[l],v=a[l+1],g=c*v-d*f;r+=g,n+=(c+d)*g,o+=(f+v)*g}return r===0?[a[0]||0,a[1]||0]:[n/r/3,o/r/3,r]}function findBestRingOffset(a,r,n,o){for(var s=(a.length-2)/6,l=1/0,u=0,c=a.length,f=c-2,d=0;d<s;d++){for(var v=d*6,g=0,y=0;y<c;y+=2){var _=y===0?v:(v+y-2)%f+2,S=a[_]-n[0],b=a[_+1]-n[1],x=r[y]-o[0],T=r[y+1]-o[1],A=x-S,w=T-b;g+=A*A+w*w}g<l&&(l=g,u=d)}return u}function reverse(a){for(var r=[],n=a.length,o=0;o<n;o+=2)r[o]=a[n-o-2],r[o+1]=a[n-o-1];return r}function findBestMorphingRotation(a,r,n,o){for(var s=[],l,u=0;u<a.length;u++){var c=a[u],f=r[u],d=centroid(c),v=centroid(f);l==null&&(l=d[2]<0!=v[2]<0);var g=[],y=[],_=0,S=1/0,b=[],x=c.length;l&&(c=reverse(c));for(var T=findBestRingOffset(c,f,d,v)*6,A=x-2,w=0;w<A;w+=2){var C=(T+w)%A+2;g[w+2]=c[C]-d[0],g[w+3]=c[C+1]-d[1]}g[0]=c[T]-d[0],g[1]=c[T+1]-d[1];for(var E=o/n,P=-o/2;P<=o/2;P+=E){for(var I=Math.sin(P),M=Math.cos(P),R=0,w=0;w<c.length;w+=2){var O=g[w],$=g[w+1],B=f[w]-v[0],F=f[w+1]-v[1],z=B*M-F*I,G=B*I+F*M;b[w]=z,b[w+1]=G;var D=z-O,V=G-$;R+=D*D+V*V}if(R<S){S=R,_=P;for(var L=0;L<b.length;L++)y[L]=b[L]}}s.push({from:g,to:y,fromCp:d,toCp:v,rotation:-_})}return s}function isCombineMorphing(a){return a.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(a,r,n){var o=SAVED_METHOD_PREFIX+r,s=a[o]||a[r];a[o]||(a[o]=a[r]);var l=n.replace,u=n.after,c=n.before;a[r]=function(){var f=arguments,d;return c&&c.apply(this,f),l?d=l.apply(this,f):d=s.apply(this,f),u&&u.apply(this,f),d}}function restoreMethod(a,r){var n=SAVED_METHOD_PREFIX+r;a[n]&&(a[r]=a[n],a[n]=null)}function applyTransformOnBeziers(a,r){for(var n=0;n<a.length;n++)for(var o=a[n],s=0;s<o.length;){var l=o[s],u=o[s+1];o[s++]=r[0]*l+r[2]*u+r[4],o[s++]=r[1]*l+r[3]*u+r[5]}}function prepareMorphPath(a,r){var n=a.getUpdatedPathProxy(),o=r.getUpdatedPathProxy(),s=alignBezierCurves(pathToBezierCurves(n),pathToBezierCurves(o)),l=s[0],u=s[1],c=a.getComputedTransform(),f=r.getComputedTransform();function d(){this.transform=null}c&&applyTransformOnBeziers(l,c),f&&applyTransformOnBeziers(u,f),saveAndModifyMethod(r,"updateTransform",{replace:d}),r.transform=null;var v=findBestMorphingRotation(l,u,10,Math.PI),g=[];saveAndModifyMethod(r,"buildPath",{replace:function(y){for(var _=r.__morphT,S=1-_,b=[],x=0;x<v.length;x++){var T=v[x],A=T.from,w=T.to,C=T.rotation*_,E=T.fromCp,P=T.toCp,I=Math.sin(C),M=Math.cos(C);lerp$1(b,E,P,_);for(var R=0;R<A.length;R+=2){var O=A[R],$=A[R+1],B=w[R],F=w[R+1],z=O*S+B*_,G=$*S+F*_;g[R]=z*M-G*I+b[0],g[R+1]=z*I+G*M+b[1]}var D=g[0],V=g[1];y.moveTo(D,V);for(var R=2;R<A.length;){var B=g[R++],F=g[R++],L=g[R++],N=g[R++],U=g[R++],H=g[R++];D===B&&V===F&&L===U&&N===H?y.lineTo(U,H):y.bezierCurveTo(B,F,L,N,U,H),D=U,V=H}}}})}function morphPath(a,r,n){if(!a||!r)return r;var o=n.done,s=n.during;prepareMorphPath(a,r),r.__morphT=0;function l(){restoreMethod(r,"buildPath"),restoreMethod(r,"updateTransform"),r.__morphT=-1,r.createPathProxy(),r.dirtyShape()}return r.animateTo({__morphT:1},defaults({during:function(u){r.dirtyShape(),s&&s(u)},done:function(){l(),o&&o()}},n)),r}function hilbert(a,r,n,o,s,l){var u=16;a=s===n?0:Math.round(32767*(a-n)/(s-n)),r=l===o?0:Math.round(32767*(r-o)/(l-o));for(var c=0,f,d=(1<<u)/2;d>0;d/=2){var v=0,g=0;(a&d)>0&&(v=1),(r&d)>0&&(g=1),c+=d*d*(3*v^g),g===0&&(v===1&&(a=d-1-a,r=d-1-r),f=a,a=r,r=f)}return c}function sortPaths(a){var r=1/0,n=1/0,o=-1/0,s=-1/0,l=map$1(a,function(c){var f=c.getBoundingRect(),d=c.getComputedTransform(),v=f.x+f.width/2+(d?d[4]:0),g=f.y+f.height/2+(d?d[5]:0);return r=Math.min(v,r),n=Math.min(g,n),o=Math.max(v,o),s=Math.max(g,s),[v,g]}),u=map$1(l,function(c,f){return{cp:c,z:hilbert(c[0],c[1],r,n,o,s),path:a[f]}});return u.sort(function(c,f){return c.z-f.z}).map(function(c){return c.path})}function defaultDividePath(a){return split(a.path,a.count)}function createEmptyReturn(){return{fromIndividuals:[],toIndividuals:[],count:0}}function combineMorph(a,r,n){var o=[];function s(E){for(var P=0;P<E.length;P++){var I=E[P];isCombineMorphing(I)?s(I.childrenRef()):I instanceof Path&&o.push(I)}}s(a);var l=o.length;if(!l)return createEmptyReturn();var u=n.dividePath||defaultDividePath,c=u({path:r,count:l});if(c.length!==l)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn();o=sortPaths(o),c=sortPaths(c);for(var f=n.done,d=n.during,v=n.individualDelay,g=new Transformable,y=0;y<l;y++){var _=o[y],S=c[y];S.parent=r,S.copyTransform(g),v||prepareMorphPath(_,S)}r.__isCombineMorphing=!0,r.childrenRef=function(){return c};function b(E){for(var P=0;P<c.length;P++)c[P].addSelfToZr(E)}saveAndModifyMethod(r,"addSelfToZr",{after:function(E){b(E)}}),saveAndModifyMethod(r,"removeSelfFromZr",{after:function(E){for(var P=0;P<c.length;P++)c[P].removeSelfFromZr(E)}});function x(){r.__isCombineMorphing=!1,r.__morphT=-1,r.childrenRef=null,restoreMethod(r,"addSelfToZr"),restoreMethod(r,"removeSelfFromZr")}var T=c.length;if(v)for(var A=T,w=function(){A--,A===0&&(x(),f&&f())},y=0;y<T;y++){var C=v?defaults({delay:(n.delay||0)+v(y,T,o[y],c[y]),done:w},n):n;morphPath(o[y],c[y],C)}else r.__morphT=0,r.animateTo({__morphT:1},defaults({during:function(E){for(var P=0;P<T;P++){var I=c[P];I.__morphT=r.__morphT,I.dirtyShape()}d&&d(E)},done:function(){x();for(var E=0;E<a.length;E++)restoreMethod(a[E],"updateTransform");f&&f()}},n));return r.__zr&&b(r.__zr),{fromIndividuals:o,toIndividuals:c,count:T}}function separateMorph(a,r,n){var o=r.length,s=[],l=n.dividePath||defaultDividePath;function u(_){for(var S=0;S<_.length;S++){var b=_[S];isCombineMorphing(b)?u(b.childrenRef()):b instanceof Path&&s.push(b)}}if(isCombineMorphing(a)){u(a.childrenRef());var c=s.length;if(c<o)for(var f=0,d=c;d<o;d++)s.push(clonePath(s[f++%c]));s.length=o}else{s=l({path:a,count:o});for(var v=a.getComputedTransform(),d=0;d<s.length;d++)s[d].setLocalTransform(v);if(s.length!==o)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn()}s=sortPaths(s),r=sortPaths(r);for(var g=n.individualDelay,d=0;d<o;d++){var y=g?defaults({delay:(n.delay||0)+g(d,o,s[d],r[d])},n):n;morphPath(s[d],r[d],y)}return{fromIndividuals:s,toIndividuals:r,count:r.length}}function isMultiple(a){return isArray$1(a[0])}function prepareMorphBatches(a,r){for(var n=[],o=a.length,s=0;s<o;s++)n.push({one:a[s],many:[]});for(var s=0;s<r.length;s++){var l=r[s].length,u=void 0;for(u=0;u<l;u++)n[u%o].many.push(r[s][u])}for(var c=0,s=o-1;s>=0;s--)if(!n[s].many.length){var f=n[c].many;if(f.length<=1)if(c)c=0;else return n;var l=f.length,d=Math.ceil(l/2);n[s].many=f.slice(d,l),n[c].many=f.slice(0,d),c++}return n}var pathDividers={clone:function(a){for(var r=[],n=1-Math.pow(1-a.path.style.opacity,1/a.count),o=0;o<a.count;o++){var s=clonePath(a.path);s.setStyle("opacity",n),r.push(s)}return r},split:null};function applyMorphAnimation(a,r,n,o,s,l){if(!a.length||!r.length)return;var u=getAnimationConfig("update",o,s);if(!(u&&u.duration>0))return;var c=o.getModel("universalTransition").get("delay"),f=Object.assign({setToFinal:!0},u),d,v;isMultiple(a)&&(d=a,v=r),isMultiple(r)&&(d=r,v=a);function g(T,A,w,C,E){var P=T.many,I=T.one;if(P.length===1&&!E){var M=A?P[0]:I,R=A?I:P[0];if(isCombineMorphing(M))g({many:[M],one:R},!0,w,C,!0);else{var O=c?defaults({delay:c(w,C)},f):f;morphPath(M,R,O),l(M,R,M,R,O)}}else for(var $=defaults({dividePath:pathDividers[n],individualDelay:c&&function(V,L,N,U){return c(V+w,C)}},f),B=A?combineMorph(P,I,$):separateMorph(I,P,$),F=B.fromIndividuals,z=B.toIndividuals,G=F.length,D=0;D<G;D++){var O=c?defaults({delay:c(D,G)},f):f;l(F[D],z[D],A?P[D]:T.one,A?T.one:P[D],O)}}for(var y=d?d===a:a.length>r.length,_=d?prepareMorphBatches(v,d):prepareMorphBatches(y?r:a,[y?a:r]),S=0,b=0;b<_.length;b++)S+=_[b].many.length;for(var x=0,b=0;b<_.length;b++)g(_[b],y,x,S),x+=_[b].many.length}function getPathList(a){if(!a)return[];if(isArray$1(a)){for(var r=[],n=0;n<a.length;n++)r.push(getPathList(a[n]));return r}var o=[];return a.traverse(function(s){s instanceof Path&&!s.disableMorphing&&!s.invisible&&!s.ignore&&o.push(s)}),o}var DATA_COUNT_THRESHOLD=1e4,TRANSITION_NONE=0,TRANSITION_P2C=1,TRANSITION_C2P=2,getUniversalTransitionGlobalStore=makeInner();function getDimension(a,r){for(var n=a.dimensions,o=0;o<n.length;o++){var s=a.getDimensionInfo(n[o]);if(s&&s.otherDims[r]===0)return n[o]}}function getValueByDimension(a,r,n){var o=a.getDimensionInfo(n),s=o&&o.ordinalMeta;if(o){var l=a.get(o.name,r);return s&&s.categories[l]||l+""}}function getGroupId(a,r,n,o){var s=o?"itemChildGroupId":"itemGroupId",l=getDimension(a,s);if(l){var u=getValueByDimension(a,r,l);return u}var c=a.getRawDataItem(r),f=o?"childGroupId":"groupId";if(c&&c[f])return c[f]+"";if(!o)return n||a.getId(r)}function flattenDataDiffItems(a){var r=[];return each$f(a,function(n){var o=n.data,s=n.dataGroupId;if(!(o.count()>DATA_COUNT_THRESHOLD))for(var l=o.getIndices(),u=0;u<l.length;u++)r.push({data:o,groupId:getGroupId(o,u,s,!1),childGroupId:getGroupId(o,u,s,!0),divide:n.divide,dataIndex:u})}),r}function fadeInElement(a,r,n){a.traverse(function(o){o instanceof Path&&initProps(o,{style:{opacity:0}},r,{dataIndex:n,isFrom:!0})})}function removeEl(a){if(a.parent){var r=a.getComputedTransform();a.setLocalTransform(r),a.parent.remove(a)}}function stopAnimation(a){a.stopAnimation(),a.isGroup&&a.traverse(function(r){r.stopAnimation()})}function animateElementStyles(a,r,n){var o=getAnimationConfig("update",n,r);o&&a.traverse(function(s){if(s instanceof Displayable){var l=getOldStyle(s);l&&s.animateFrom({style:l},o)}})}function isAllIdSame(a,r){var n=a.length;if(n!==r.length)return!1;for(var o=0;o<n;o++){var s=a[o],l=r[o];if(s.data.getId(s.dataIndex)!==l.data.getId(l.dataIndex))return!1}return!0}function transitionBetween(a,r,n){var o=flattenDataDiffItems(a),s=flattenDataDiffItems(r);function l(w,C,E,P,I){(E||w)&&C.animateFrom({style:E&&E!==w?extend(extend({},E.style),w.style):w.style},I)}var u=!1,c=TRANSITION_NONE,f=createHashMap(),d=createHashMap();o.forEach(function(w){w.groupId&&f.set(w.groupId,!0),w.childGroupId&&d.set(w.childGroupId,!0)});for(var v=0;v<s.length;v++){var g=s[v].groupId;if(d.get(g)){c=TRANSITION_P2C;break}var y=s[v].childGroupId;if(y&&f.get(y)){c=TRANSITION_C2P;break}}function _(w,C){return function(E){var P=E.data,I=E.dataIndex;return C?P.getId(I):w?c===TRANSITION_P2C?E.childGroupId:E.groupId:c===TRANSITION_C2P?E.childGroupId:E.groupId}}var S=isAllIdSame(o,s),b={};if(!S)for(var v=0;v<s.length;v++){var x=s[v],T=x.data.getItemGraphicEl(x.dataIndex);T&&(b[T.id]=!0)}function A(w,C){var E=o[C],P=s[w],I=P.data.hostModel,M=E.data.getItemGraphicEl(E.dataIndex),R=P.data.getItemGraphicEl(P.dataIndex);if(M===R){R&&animateElementStyles(R,P.dataIndex,I);return}M&&b[M.id]||R&&(stopAnimation(R),M?(stopAnimation(M),removeEl(M),u=!0,applyMorphAnimation(getPathList(M),getPathList(R),P.divide,I,w,l)):fadeInElement(R,I,w))}new DataDiffer(o,s,_(!0,S),_(!1,S),null,"multiple").update(A).updateManyToOne(function(w,C){var E=s[w],P=E.data,I=P.hostModel,M=P.getItemGraphicEl(E.dataIndex),R=filter(map$1(C,function(O){return o[O].data.getItemGraphicEl(o[O].dataIndex)}),function(O){return O&&O!==M&&!b[O.id]});M&&(stopAnimation(M),R.length?(each$f(R,function(O){stopAnimation(O),removeEl(O)}),u=!0,applyMorphAnimation(getPathList(R),getPathList(M),E.divide,I,w,l)):fadeInElement(M,I,E.dataIndex))}).updateOneToMany(function(w,C){var E=o[C],P=E.data.getItemGraphicEl(E.dataIndex);if(!(P&&b[P.id])){var I=filter(map$1(w,function(R){return s[R].data.getItemGraphicEl(s[R].dataIndex)}),function(R){return R&&R!==P}),M=s[w[0]].data.hostModel;I.length&&(each$f(I,function(R){return stopAnimation(R)}),P?(stopAnimation(P),removeEl(P),u=!0,applyMorphAnimation(getPathList(P),getPathList(I),E.divide,M,w[0],l)):each$f(I,function(R){return fadeInElement(R,M,w[0])}))}}).updateManyToMany(function(w,C){new DataDiffer(C,w,function(E){return o[E].data.getId(o[E].dataIndex)},function(E){return s[E].data.getId(s[E].dataIndex)}).update(function(E,P){A(w[E],C[P])}).execute()}).execute(),u&&each$f(r,function(w){var C=w.data,E=C.hostModel,P=E&&n.getViewOfSeriesModel(E),I=getAnimationConfig("update",E,0);P&&E.isAnimationEnabled()&&I&&I.duration>0&&P.group.traverse(function(M){M instanceof Path&&!M.animators.length&&M.animateFrom({style:{opacity:0}},I)})})}function getSeriesTransitionKey(a){var r=a.getModel("universalTransition").get("seriesKey");return r||a.id}function convertArraySeriesKeyToString(a){return isArray$1(a)?a.sort().join(","):a}function getDivideShapeFromData(a){if(a.hostModel)return a.hostModel.getModel("universalTransition").get("divideShape")}function findTransitionSeriesBatches(a,r){var n=createHashMap(),o=createHashMap(),s=createHashMap();return each$f(a.oldSeries,function(l,u){var c=a.oldDataGroupIds[u],f=a.oldData[u],d=getSeriesTransitionKey(l),v=convertArraySeriesKeyToString(d);o.set(v,{dataGroupId:c,data:f}),isArray$1(d)&&each$f(d,function(g){s.set(g,{key:v,dataGroupId:c,data:f})})}),each$f(r.updatedSeries,function(l){if(l.isUniversalTransitionEnabled()&&l.isAnimationEnabled()){var u=l.get("dataGroupId"),c=l.getData(),f=getSeriesTransitionKey(l),d=convertArraySeriesKeyToString(f),v=o.get(d);if(v)n.set(d,{oldSeries:[{dataGroupId:v.dataGroupId,divide:getDivideShapeFromData(v.data),data:v.data}],newSeries:[{dataGroupId:u,divide:getDivideShapeFromData(c),data:c}]});else if(isArray$1(f)){var g=[];each$f(f,function(S){var b=o.get(S);b.data&&g.push({dataGroupId:b.dataGroupId,divide:getDivideShapeFromData(b.data),data:b.data})}),g.length&&n.set(d,{oldSeries:g,newSeries:[{dataGroupId:u,data:c,divide:getDivideShapeFromData(c)}]})}else{var y=s.get(f);if(y){var _=n.get(y.key);_||(_={oldSeries:[{dataGroupId:y.dataGroupId,data:y.data,divide:getDivideShapeFromData(y.data)}],newSeries:[]},n.set(y.key,_)),_.newSeries.push({dataGroupId:u,data:c,divide:getDivideShapeFromData(c)})}}}}),n}function querySeries(a,r){for(var n=0;n<a.length;n++){var o=r.seriesIndex!=null&&r.seriesIndex===a[n].seriesIndex||r.seriesId!=null&&r.seriesId===a[n].id;if(o)return n}}function transitionSeriesFromOpt(a,r,n,o){var s=[],l=[];each$f(normalizeToArray(a.from),function(u){var c=querySeries(r.oldSeries,u);c>=0&&s.push({dataGroupId:r.oldDataGroupIds[c],data:r.oldData[c],divide:getDivideShapeFromData(r.oldData[c]),groupIdDim:u.dimension})}),each$f(normalizeToArray(a.to),function(u){var c=querySeries(n.updatedSeries,u);if(c>=0){var f=n.updatedSeries[c].getData();l.push({dataGroupId:r.oldDataGroupIds[c],data:f,divide:getDivideShapeFromData(f),groupIdDim:u.dimension})}}),s.length>0&&l.length>0&&transitionBetween(s,l,o)}function installUniversalTransition(a){a.registerUpdateLifecycle("series:beforeupdate",function(r,n,o){each$f(normalizeToArray(o.seriesTransition),function(s){each$f(normalizeToArray(s.to),function(l){for(var u=o.updatedSeries,c=0;c<u.length;c++)(l.seriesIndex!=null&&l.seriesIndex===u[c].seriesIndex||l.seriesId!=null&&l.seriesId===u[c].id)&&(u[c][SERIES_UNIVERSAL_TRANSITION_PROP]=!0)})})}),a.registerUpdateLifecycle("series:transition",function(r,n,o){var s=getUniversalTransitionGlobalStore(n);if(s.oldSeries&&o.updatedSeries&&o.optionChanged){var l=o.seriesTransition;if(l)each$f(normalizeToArray(l),function(_){transitionSeriesFromOpt(_,s,o,n)});else{var u=findTransitionSeriesBatches(s,o);each$f(u.keys(),function(_){var S=u.get(_);transitionBetween(S.oldSeries,S.newSeries,n)})}each$f(o.updatedSeries,function(_){_[SERIES_UNIVERSAL_TRANSITION_PROP]&&(_[SERIES_UNIVERSAL_TRANSITION_PROP]=!1)})}for(var c=r.getSeries(),f=s.oldSeries=[],d=s.oldDataGroupIds=[],v=s.oldData=[],g=0;g<c.length;g++){var y=c[g].getData();y.count()<DATA_COUNT_THRESHOLD&&(f.push(c[g]),d.push(c[g].get("dataGroupId")),v.push(y))}})}var ScaleBreakContextImpl=function(){function a(){this.breaks=[],this._elapsedExtent=[1/0,-1/0]}return a.prototype.setBreaks=function(r){this.breaks=r.breaks},a.prototype.update=function(r){updateAxisBreakGapReal(this,r);var n=this._elapsedExtent;n[0]=this.elapse(r[0]),n[1]=this.elapse(r[1])},a.prototype.hasBreaks=function(){return!!this.breaks.length},a.prototype.calcNiceTickMultiple=function(r,n){for(var o=0;o<this.breaks.length;o++){var s=this.breaks[o];if(s.vmin<r&&r<s.vmax){var l=n(r,s.vmax);return l}}return 0},a.prototype.getExtentSpan=function(){return this._elapsedExtent[1]-this._elapsedExtent[0]},a.prototype.normalize=function(r){var n=this._elapsedExtent[1]-this._elapsedExtent[0];return n===0?.5:(this.elapse(r)-this._elapsedExtent[0])/n},a.prototype.scale=function(r){return this.unelapse(r*(this._elapsedExtent[1]-this._elapsedExtent[0])+this._elapsedExtent[0])},a.prototype.elapse=function(r){for(var n=AXIS_BREAK_ELAPSED_BASE,o=AXIS_BREAK_LAST_BREAK_END_BASE,s=!0,l=0;l<this.breaks.length;l++){var u=this.breaks[l];if(r<=u.vmax){r>u.vmin?n+=u.vmin-o+(r-u.vmin)/(u.vmax-u.vmin)*u.gapReal:n+=r-o,o=u.vmax,s=!1;break}n+=u.vmin-o+u.gapReal,o=u.vmax}return s&&(n+=r-o),n},a.prototype.unelapse=function(r){for(var n=AXIS_BREAK_ELAPSED_BASE,o=AXIS_BREAK_LAST_BREAK_END_BASE,s=!0,l=0,u=0;u<this.breaks.length;u++){var c=this.breaks[u],f=n+c.vmin-o,d=f+c.gapReal;if(r<=d){r>f?l=c.vmin+(r-f)/(d-f)*(c.vmax-c.vmin):l=o+r-n,o=c.vmax,s=!1;break}n=d,o=c.vmax}return s&&(l=o+r-n),l},a}();function createScaleBreakContext(){return new ScaleBreakContextImpl}var AXIS_BREAK_ELAPSED_BASE=0,AXIS_BREAK_LAST_BREAK_END_BASE=0;function updateAxisBreakGapReal(a,r){var n=0,o={tpAbs:{span:0,val:0},tpPrct:{span:0,val:0}},s=function(){return{has:!1,span:NaN,inExtFrac:NaN,val:NaN}},l={S:{tpAbs:s(),tpPrct:s()},E:{tpAbs:s(),tpPrct:s()}};each$f(a.breaks,function(c){var f=c.gapParsed;f.type==="tpPrct"&&(n+=f.val);var d=clampBreakByExtent(c,r);if(d){var v=d.vmin!==c.vmin,g=d.vmax!==c.vmax,y=d.vmax-d.vmin;if(!(v&&g))if(v||g){var _=v?"S":"E";l[_][f.type].has=!0,l[_][f.type].span=y,l[_][f.type].inExtFrac=y/(c.vmax-c.vmin),l[_][f.type].val=f.val}else o[f.type].span+=y,o[f.type].val+=f.val}});var u=n*(0+(r[1]-r[0])+(o.tpAbs.val-o.tpAbs.span)+(l.S.tpAbs.has?(l.S.tpAbs.val-l.S.tpAbs.span)*l.S.tpAbs.inExtFrac:0)+(l.E.tpAbs.has?(l.E.tpAbs.val-l.E.tpAbs.span)*l.E.tpAbs.inExtFrac:0)-o.tpPrct.span-(l.S.tpPrct.has?l.S.tpPrct.span*l.S.tpPrct.inExtFrac:0)-(l.E.tpPrct.has?l.E.tpPrct.span*l.E.tpPrct.inExtFrac:0))/(1-o.tpPrct.val-(l.S.tpPrct.has?l.S.tpPrct.val*l.S.tpPrct.inExtFrac:0)-(l.E.tpPrct.has?l.E.tpPrct.val*l.E.tpPrct.inExtFrac:0));each$f(a.breaks,function(c){var f=c.gapParsed;f.type==="tpPrct"&&(c.gapReal=n!==0?Math.max(u,0)*f.val/n:0),f.type==="tpAbs"&&(c.gapReal=f.val),c.gapReal==null&&(c.gapReal=0)})}function pruneTicksByBreak(a,r,n,o,s,l){a!=="no"&&each$f(n,function(u){var c=clampBreakByExtent(u,l);if(c)for(var f=r.length-1;f>=0;f--){var d=r[f],v=o(d),g=s*3/4;v>c.vmin-g&&v<c.vmax+g&&(a!=="preserve_extent_bound"||v!==l[0]&&v!==l[1])&&r.splice(f,1)}})}function addBreaksToTicks(a,r,n,o){each$f(r,function(s){var l=clampBreakByExtent(s,n);l&&(a.push({value:l.vmin,break:{type:"vmin",parsedBreak:l},time:o?o(l):void 0}),a.push({value:l.vmax,break:{type:"vmax",parsedBreak:l},time:o?o(l):void 0}))}),r.length&&a.sort(function(s,l){return s.value-l.value})}function clampBreakByExtent(a,r){var n=Math.max(a.vmin,r[0]),o=Math.min(a.vmax,r[1]);return n<o||n===o&&n>r[0]&&n<r[1]?{vmin:n,vmax:o,breakOption:a.breakOption,gapParsed:a.gapParsed,gapReal:a.gapReal}:null}function parseAxisBreakOption(a,r,n){var o=[];if(!a)return{breaks:o};function s(u,c){return u>=0&&u<1-1e-5}each$f(a,function(u){if(!(!u||u.start==null||u.end==null)&&!u.isExpanded){var c={breakOption:clone$4(u),vmin:r(u.start),vmax:r(u.end),gapParsed:{type:"tpAbs",val:0},gapReal:null};if(u.gap!=null){var f=!1;if(isString(u.gap)){var d=trim$1(u.gap);if(d.match(/%$/)){var v=parseFloat(d)/100;s(v)||(v=0),c.gapParsed.type="tpPrct",c.gapParsed.val=v,f=!0}}if(!f){var g=r(u.gap);(!isFinite(g)||g<0)&&(g=0),c.gapParsed.type="tpAbs",c.gapParsed.val=g}}if(c.vmin===c.vmax&&(c.gapParsed.type="tpAbs",c.gapParsed.val=0),n&&n.noNegative&&each$f(["vmin","vmax"],function(_){c[_]<0&&(c[_]=0)}),c.vmin>c.vmax){var y=c.vmax;c.vmax=c.vmin,c.vmin=y}o.push(c)}}),o.sort(function(u,c){return u.vmin-c.vmin});var l=-1/0;return each$f(o,function(u,c){l>u.vmin&&(o[c]=null),l=u.vmax}),{breaks:o.filter(function(u){return!!u})}}function identifyAxisBreak(a,r){return serializeAxisBreakIdentifier(r)===serializeAxisBreakIdentifier(a)}function serializeAxisBreakIdentifier(a){return a.start+"_\0_"+a.end}function retrieveAxisBreakPairs(a,r,n){var o=[];each$f(a,function(l,u){var c=r(l);c&&c.type==="vmin"&&o.push([u])}),each$f(a,function(l,u){var c=r(l);if(c&&c.type==="vmax"){var f=find(o,function(d){return identifyAxisBreak(r(a[d[0]]).parsedBreak.breakOption,c.parsedBreak.breakOption)});f&&f.push(u)}});var s=[];return each$f(o,function(l){l.length===2&&s.push(n?l:[a[l[0]],a[l[1]]])}),s}function getTicksLogTransformBreak(a,r,n,o){var s,l;if(a.break){var u=a.break.parsedBreak,c=find(n,function(g){return identifyAxisBreak(g.breakOption,a.break.parsedBreak.breakOption)}),f=o(Math.pow(r,u.vmin),c.vmin),d=o(Math.pow(r,u.vmax),c.vmax),v={type:u.gapParsed.type,val:u.gapParsed.type==="tpAbs"?round$4(Math.pow(r,u.vmin+u.gapParsed.val))-f:u.gapParsed.val};s={type:a.break.type,parsedBreak:{breakOption:u.breakOption,vmin:f,vmax:d,gapParsed:v,gapReal:u.gapReal}},l=c[a.break.type]}return{brkRoundingCriterion:l,vBreak:s}}function logarithmicParseBreaksFromOption(a,r,n){var o={noNegative:!0},s=parseAxisBreakOption(a,n,o),l=parseAxisBreakOption(a,n,o),u=Math.log(r);return l.breaks=map$1(l.breaks,function(c){var f=Math.log(c.vmin)/u,d=Math.log(c.vmax)/u,v={type:c.gapParsed.type,val:c.gapParsed.type==="tpAbs"?Math.log(c.vmin+c.gapParsed.val)/u-f:c.gapParsed.val};return{vmin:f,vmax:d,gapParsed:v,gapReal:c.gapReal,breakOption:c.breakOption}}),{parsedOriginal:s,parsedLogged:l}}var BREAK_MIN_MAX_TO_PARAM={vmin:"start",vmax:"end"};function makeAxisLabelFormatterParamBreak(a,r){return r&&(a=a||{},a.break={type:BREAK_MIN_MAX_TO_PARAM[r.type],start:r.parsedBreak.vmin,end:r.parsedBreak.vmax}),a}function installScaleBreakHelper(){registerScaleBreakHelperImpl({createScaleBreakContext,pruneTicksByBreak,addBreaksToTicks,parseAxisBreakOption,identifyAxisBreak,serializeAxisBreakIdentifier,retrieveAxisBreakPairs,getTicksLogTransformBreak,logarithmicParseBreaksFromOption,makeAxisLabelFormatterParamBreak})}var viewCache=makeInner();function ensureVisualInCache(a,r){var n=find(a,function(o){return getScaleBreakHelper().identifyAxisBreak(o.parsedBreak.breakOption,r.breakOption)});return n||a.push(n={zigzagRandomList:[],parsedBreak:r,shouldRemove:!1}),n}function resetCacheVisualRemoveFlag(a){each$f(a,function(r){return r.shouldRemove=!0})}function removeUnusedCacheVisual(a){for(var r=a.length-1;r>=0;r--)a[r].shouldRemove&&a.splice(r,1)}function rectCoordBuildBreakAxis(a,r,n,o,s){var l=n.axis;if(l.scale.isBlank()||!getScaleBreakHelper())return;var u=getScaleBreakHelper().retrieveAxisBreakPairs(l.scale.getTicks({breakTicks:"only_break"}),function(R){return R.break},!1);if(!u.length)return;var c=n.getModel("breakArea"),f=c.get("zigzagAmplitude"),d=c.get("zigzagMinSpan"),v=c.get("zigzagMaxSpan");d=Math.max(2,d||0),v=Math.max(d,v||0);var g=c.get("expandOnClick"),y=c.get("zigzagZ"),_=c.getModel("itemStyle"),S=_.getItemStyle(),b=S.stroke,x=S.lineWidth,T=S.lineDash,A=S.fill,w=new Group$3({ignoreModelZ:!0}),C=l.isHorizontal(),E=viewCache(r).visualList||(viewCache(r).visualList=[]);resetCacheVisualRemoveFlag(E);for(var P=function(R){var O=u[R][0].break.parsedBreak,$=[];$[0]=l.toGlobalCoord(l.dataToCoord(O.vmin,!0)),$[1]=l.toGlobalCoord(l.dataToCoord(O.vmax,!0)),$[1]<$[0]&&$.reverse();var B=ensureVisualInCache(E,O);B.shouldRemove=!1;var F=new Group$3;M(B.zigzagRandomList,F,$[0],$[1],C,O),g&&F.on("click",function(){var z={type:AXIS_BREAK_EXPAND_ACTION_TYPE,breaks:[{start:O.breakOption.start,end:O.breakOption.end}]};z[l.dim+"AxisIndex"]=n.componentIndex,s.dispatchAction(z)}),F.silent=!g,w.add(F)},I=0;I<u.length;I++)P(I);a.add(w),removeUnusedCacheVisual(E);function M(R,O,$,B,F,z){var G={stroke:b,lineWidth:x,lineDash:T,fill:"none"},D=F?0:1,V=1-D,L=o[XY$2[V]]+o[WH$2[V]];function N(Y){var j=[],Q=[];j[D]=Q[D]=Y,j[V]=o[XY$2[V]],Q[V]=L;var re={x1:j[0],y1:j[1],x2:Q[0],y2:Q[1]};return subPixelOptimizeLine$1(re,re,{lineWidth:1}),j[0]=re.x1,j[1]=re.y1,j[D]}$=N($),B=N(B);for(var U=[],H=[],q=!0,Z=o[XY$2[V]],ee=0;;ee++){var ne=Z===o[XY$2[V]],ue=Z>=L;ue&&(Z=L);var K=[],J=[];K[D]=$,J[D]=B,!ne&&!ue&&(K[D]+=q?-f:f,J[D]-=q?f:-f),K[V]=Z,J[V]=Z,U.push(K),H.push(J);var X=void 0;if(ee<R.length?X=R[ee]:(X=Math.random(),R.push(X)),Z+=X*(v-d)+d,q=!q,ue)break}var ie=getScaleBreakHelper().serializeAxisBreakIdentifier(z.breakOption);if(O.add(new Polyline$1({anid:"break_a_"+ie,shape:{points:U},style:G,z:y})),z.gapReal!==0){O.add(new Polyline$1({anid:"break_b_"+ie,shape:{points:H},style:G,z:y}));var te=H.slice();te.reverse();var W=U.concat(te);O.add(new Polygon({anid:"break_c_"+ie,shape:{points:W},style:{fill:A,opacity:S.opacity},z:y}))}}}function buildAxisBreakLine(a,r,n,o){var s=a.axis,l=n.transform;assert(o.style);var u=s.getExtent();s.inverse&&(u=u.slice(),u.reverse());var c=getScaleBreakHelper().retrieveAxisBreakPairs(s.scale.getTicks({breakTicks:"only_break"}),function(x){return x.break},!1),f=map$1(c,function(x){var T=x[0].break.parsedBreak,A=[s.dataToCoord(T.vmin,!0),s.dataToCoord(T.vmax,!0)];return A[0]>A[1]&&A.reverse(),{coordPair:A,brkId:getScaleBreakHelper().serializeAxisBreakIdentifier(T.breakOption)}});f.sort(function(x,T){return x.coordPair[0]-T.coordPair[0]});for(var d=u[0],v=null,g=0;g<f.length;g++){var y=f[g],_=Math.max(y.coordPair[0],u[0]),S=Math.min(y.coordPair[1],u[1]);d<=_&&b(d,_,v,y),d=S,v=y}d<=u[1]&&b(d,u[1],v,null);function b(x,T,A,w){function C($,B){l&&(applyTransform$1($,$,l),applyTransform$1(B,B,l))}function E($,B){var F={x1:$[0],y1:$[1],x2:B[0],y2:B[1]};subPixelOptimizeLine$1(F,F,o.style),$[0]=F.x1,$[1]=F.y1,B[0]=F.x2,B[1]=F.y2}var P=[x,0],I=[T,0],M=[x,5],R=[T,5];C(P,M),E(P,M),C(I,R),E(I,R),E(P,I);var O=new Line$1(extend({shape:{x1:P[0],y1:P[1],x2:I[0],y2:I[1]}},o));r.add(O),O.anid="breakLine_"+(A?A.brkId:"\0")+"_\0_"+(w?w.brkId:"\0")}}function adjustBreakLabelPair(a,r,n){if(find(n,function(A){return!A}))return;var o=new Point;if(!labelIntersect(n[0],n[1],o,{direction:-(a?r+Math.PI:r),touchThreshold:0,bidirectional:!1}))return;var s=create$1();rotate(s,s,-r);var l=map$1(n,function(A){return A.transform?mul(create$1(),s,A.transform):s});function u(A){var w=n[0].localRect,C=new Point(w[WH$2[A]]*l[0][0],w[WH$2[A]]*l[0][1]);return Math.abs(C.y)<1e-5}var c=.5;if(u(0)||u(1)){var f=map$1(n,function(A,w){var C=A.localRect.clone();return C.applyTransform(l[w]),C}),d=new Point;d.copy(n[0].label).add(n[1].label).scale(.5),d.transform(s);var v=o.clone().transform(s),g=f[0].x+f[1].x+(v.x>=0?f[0].width:f[1].width),y=(g+v.x)/2-d.x,_=Math.min(y,y-v.x),S=Math.max(y,y-v.x),b=S<0?S:_>0?_:0;c=(y-b)/v.x}var x=new Point,T=new Point;Point.scale(x,o,-c),Point.scale(T,o,1-c),labelLayoutApplyTranslation(n[0],x),labelLayoutApplyTranslation(n[1],T)}function updateModelAxisBreak(a,r){var n={breaks:[]};return each$f(r.breaks,function(o){if(o){var s=find(a.get("breaks",!0),function(c){return getScaleBreakHelper().identifyAxisBreak(c,o)});if(s){var l=r.type,u={isExpanded:!!s.isExpanded};s.isExpanded=l===AXIS_BREAK_EXPAND_ACTION_TYPE?!0:l===AXIS_BREAK_COLLAPSE_ACTION_TYPE?!1:l===AXIS_BREAK_TOGGLE_ACTION_TYPE?!s.isExpanded:s.isExpanded,n.breaks.push({start:s.start,end:s.end,isExpanded:!!s.isExpanded,old:u})}}}),n}function installAxisBreakHelper(){registerAxisBreakHelperImpl({adjustBreakLabelPair,buildAxisBreakLine,rectCoordBuildBreakAxis,updateModelAxisBreak})}function installAxisBreak(a){registerAction(a),installScaleBreakHelper(),installAxisBreakHelper()}function installLegacyGridContainLabel(){registerLegacyGridContainLabelImpl(legacyLayOutGridByContained)}function legacyLayOutGridByContained(a,r){each$f(a,function(n){if(!n.model.get(["axisLabel","inside"])){var o=estimateLabelUnionRect(n);if(o){var s=n.isHorizontal()?"height":"width",l=n.model.get(["axisLabel","margin"]);r[s]-=o[s]+l,n.position==="top"?r.y+=o.height+l:n.position==="left"&&(r.x+=o.width+l)}}})}function estimateLabelUnionRect(a){var r=a.model,n=a.scale;if(!r.get(["axisLabel","show"])||n.isBlank())return;var o,s,l=n.getExtent();n instanceof OrdinalScale?s=n.count():(o=n.getTicks(),s=o.length);var u=a.getLabelModel(),c=makeLabelFormatter(a),f,d=1;s>40&&(d=Math.ceil(s/40));for(var v=0;v<s;v+=d){var g=o?o[v]:{value:l[0]+v},y=c(g,v),_=u.getTextRect(y),S=b(_,u.get("rotate")||0);f?f.union(S):f=S}return f;function b(x,T){var A=T*Math.PI/180,w=x.width,C=x.height,E=w*Math.abs(Math.cos(A))+Math.abs(C*Math.sin(A)),P=w*Math.abs(Math.sin(A))+Math.abs(C*Math.cos(A)),I=new BoundingRect(x.x,x.y,E,P);return I}}use([install$U]);use([install$V]);use([install$T,install$S,install$R,install$P,install$N,install$L,install$K,install$J,install$I,install$H,install$G,install$F,install$D,install$C,install$B,install$A,install$z,install$y,install$x,install$w,install$v,install$u,install$t]);use(install$r);use(install$q);use(install$M);use(install$p);use(install$E);use(install$o);use(install$n);use(install$m);use(install$k);use(install$j);use(install$s);use(install$i);use(install$h);use(install$g);use(install$f);use(install$e);use(install$d);use(install$a);use(install$7);use(install$9);use(install$8);use(install$4);use(install$6);use(install$5);use(install$3);use(install$2);use(install$1);use(install);use(installUniversalTransition);use(installLabelLayout);use(installAxisBreak);use(installLegacyGridContainLabel);use(installScatterJitter);var lottie={exports:{}};(function(module,exports$1){typeof navigator<"u"&&function(a,r){module.exports=r()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(r){_useWebWorker=!!r},getWebWorker=function(){return _useWebWorker},setLocationHref=function(r){locationHref=r},getLocationHref=function(){return locationHref};function createTag(a){return document.createElement(a)}function extendPrototype(a,r){var n,o=a.length,s;for(n=0;n<o;n+=1){s=a[n].prototype;for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(r.prototype[l]=s[l])}}function getDescriptor(a,r){return Object.getOwnPropertyDescriptor(a,r)}function createProxyFunction(a){function r(){}return r.prototype=a,r}var audioControllerFactory=function(){function a(r){this.audios=[],this.audioFactory=r,this._volume=1,this._isMuted=!1}return a.prototype={addAudio:function(n){this.audios.push(n)},pause:function(){var n,o=this.audios.length;for(n=0;n<o;n+=1)this.audios[n].pause()},resume:function(){var n,o=this.audios.length;for(n=0;n<o;n+=1)this.audios[n].resume()},setRate:function(n){var o,s=this.audios.length;for(o=0;o<s;o+=1)this.audios[o].setRate(n)},createAudio:function(n){return this.audioFactory?this.audioFactory(n):window.Howl?new window.Howl({src:[n]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(n){this.audioFactory=n},setVolume:function(n){this._volume=n,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var n,o=this.audios.length;for(n=0;n<o;n+=1)this.audios[n].volume(this._volume*(this._isMuted?0:1))}},function(){return new a}}(),createTypedArray=function(){function a(n,o){var s=0,l=[],u;switch(n){case"int16":case"uint8c":u=1;break;default:u=1.1;break}for(s=0;s<o;s+=1)l.push(u);return l}function r(n,o){return n==="float32"?new Float32Array(o):n==="int16"?new Int16Array(o):n==="uint8c"?new Uint8ClampedArray(o):a(n,o)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?r:a}();function createSizedArray(a){return Array.apply(null,{length:a})}function _typeof$6(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(n){return typeof n}:_typeof$6=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$6(a)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var a=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],r,n=a.length;for(r=0;r<n;r+=1)BMMath[a[r]]=Math[a[r]]})(),BMMath.random=Math.random,BMMath.abs=function(a){var r=_typeof$6(a);if(r==="object"&&a.length){var n=createSizedArray(a.length),o,s=a.length;for(o=0;o<s;o+=1)n[o]=Math.abs(a[o]);return n}return Math.abs(a)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(a){a.style.position="absolute",a.style.top=0,a.style.left=0,a.style.display="block",a.style.transformOrigin="0 0",a.style.webkitTransformOrigin="0 0",a.style.backfaceVisibility="visible",a.style.webkitBackfaceVisibility="visible",a.style.transformStyle="preserve-3d",a.style.webkitTransformStyle="preserve-3d",a.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(a,r,n,o){this.type=a,this.currentTime=r,this.totalTime=n,this.direction=o<0?-1:1}function BMCompleteEvent(a,r){this.type=a,this.direction=r<0?-1:1}function BMCompleteLoopEvent(a,r,n,o){this.type=a,this.currentLoop=n,this.totalLoops=r,this.direction=o<0?-1:1}function BMSegmentStartEvent(a,r,n){this.type=a,this.firstFrame=r,this.totalFrames=n}function BMDestroyEvent(a,r){this.type=a,this.target=r}function BMRenderFrameErrorEvent(a,r){this.type="renderFrameError",this.nativeError=a,this.currentTime=r}function BMConfigErrorEvent(a){this.type="configError",this.nativeError=a}var createElementID=function(){var a=0;return function(){return a+=1,idPrefix$1+"__lottie_element_"+a}}();function HSVtoRGB(a,r,n){var o,s,l,u,c,f,d,v;switch(u=Math.floor(a*6),c=a*6-u,f=n*(1-r),d=n*(1-c*r),v=n*(1-(1-c)*r),u%6){case 0:o=n,s=v,l=f;break;case 1:o=d,s=n,l=f;break;case 2:o=f,s=n,l=v;break;case 3:o=f,s=d,l=n;break;case 4:o=v,s=f,l=n;break;case 5:o=n,s=f,l=d;break}return[o,s,l]}function RGBtoHSV(a,r,n){var o=Math.max(a,r,n),s=Math.min(a,r,n),l=o-s,u,c=o===0?0:l/o,f=o/255;switch(o){case s:u=0;break;case a:u=r-n+l*(r<n?6:0),u/=6*l;break;case r:u=n-a+l*2,u/=6*l;break;case n:u=a-r+l*4,u/=6*l;break}return[u,c,f]}function addSaturationToRGB(a,r){var n=RGBtoHSV(a[0]*255,a[1]*255,a[2]*255);return n[1]+=r,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(a,r){var n=RGBtoHSV(a[0]*255,a[1]*255,a[2]*255);return n[2]+=r,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(a,r){var n=RGBtoHSV(a[0]*255,a[1]*255,a[2]*255);return n[0]+=r/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}var rgbToHex=function(){var a=[],r,n;for(r=0;r<256;r+=1)n=r.toString(16),a[r]=n.length===1?"0"+n:n;return function(o,s,l){return o<0&&(o=0),s<0&&(s=0),l<0&&(l=0),"#"+a[o]+a[s]+a[l]}}(),setSubframeEnabled=function(r){subframeEnabled=!!r},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(r){expressionsPlugin=r},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(r){expressionsInterfaces=r},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(r){defaultCurveSegments=r},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(r){idPrefix$1=r};function createNS(a){return document.createElementNS(svgNS,a)}function _typeof$5(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(n){return typeof n}:_typeof$5=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$5(a)}var dataManager=function(){var a=1,r=[],n,o,s={onmessage:function(){},postMessage:function(_){n({data:_})}},l={postMessage:function(_){s.onmessage({data:_})}};function u(y){if(window.Worker&&window.Blob&&getWebWorker()){var _=new Blob(["var _workerSelf = self; self.onmessage = ",y.toString()],{type:"text/javascript"}),S=URL.createObjectURL(_);return new Worker(S)}return n=y,s}function c(){o||(o=u(function(_){function S(){function x(G,D){var V,L,N=G.length,U,H,q,Z;for(L=0;L<N;L+=1)if(V=G[L],"ks"in V&&!V.completed){if(V.completed=!0,V.hasMask){var ee=V.masksProperties;for(H=ee.length,U=0;U<H;U+=1)if(ee[U].pt.k.i)E(ee[U].pt.k);else for(Z=ee[U].pt.k.length,q=0;q<Z;q+=1)ee[U].pt.k[q].s&&E(ee[U].pt.k[q].s[0]),ee[U].pt.k[q].e&&E(ee[U].pt.k[q].e[0])}V.ty===0?(V.layers=w(V.refId,D),x(V.layers,D)):V.ty===4?C(V.shapes):V.ty===5&&F(V)}}function T(G,D){if(G){var V=0,L=G.length;for(V=0;V<L;V+=1)G[V].t===1&&(G[V].data.layers=w(G[V].data.refId,D),x(G[V].data.layers,D))}}function A(G,D){for(var V=0,L=D.length;V<L;){if(D[V].id===G)return D[V];V+=1}return null}function w(G,D){var V=A(G,D);return V?V.layers.__used?JSON.parse(JSON.stringify(V.layers)):(V.layers.__used=!0,V.layers):null}function C(G){var D,V=G.length,L,N;for(D=V-1;D>=0;D-=1)if(G[D].ty==="sh")if(G[D].ks.k.i)E(G[D].ks.k);else for(N=G[D].ks.k.length,L=0;L<N;L+=1)G[D].ks.k[L].s&&E(G[D].ks.k[L].s[0]),G[D].ks.k[L].e&&E(G[D].ks.k[L].e[0]);else G[D].ty==="gr"&&C(G[D].it)}function E(G){var D,V=G.i.length;for(D=0;D<V;D+=1)G.i[D][0]+=G.v[D][0],G.i[D][1]+=G.v[D][1],G.o[D][0]+=G.v[D][0],G.o[D][1]+=G.v[D][1]}function P(G,D){var V=D?D.split("."):[100,100,100];return G[0]>V[0]?!0:V[0]>G[0]?!1:G[1]>V[1]?!0:V[1]>G[1]?!1:G[2]>V[2]?!0:V[2]>G[2]?!1:null}var I=function(){var G=[4,4,14];function D(L){var N=L.t.d;L.t.d={k:[{s:N,t:0}]}}function V(L){var N,U=L.length;for(N=0;N<U;N+=1)L[N].ty===5&&D(L[N])}return function(L){if(P(G,L.v)&&(V(L.layers),L.assets)){var N,U=L.assets.length;for(N=0;N<U;N+=1)L.assets[N].layers&&V(L.assets[N].layers)}}}(),M=function(){var G=[4,7,99];return function(D){if(D.chars&&!P(G,D.v)){var V,L=D.chars.length;for(V=0;V<L;V+=1){var N=D.chars[V];N.data&&N.data.shapes&&(C(N.data.shapes),N.data.ip=0,N.data.op=99999,N.data.st=0,N.data.sr=1,N.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},D.chars[V].t||(N.data.shapes.push({ty:"no"}),N.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),R=function(){var G=[5,7,15];function D(L){var N=L.t.p;typeof N.a=="number"&&(N.a={a:0,k:N.a}),typeof N.p=="number"&&(N.p={a:0,k:N.p}),typeof N.r=="number"&&(N.r={a:0,k:N.r})}function V(L){var N,U=L.length;for(N=0;N<U;N+=1)L[N].ty===5&&D(L[N])}return function(L){if(P(G,L.v)&&(V(L.layers),L.assets)){var N,U=L.assets.length;for(N=0;N<U;N+=1)L.assets[N].layers&&V(L.assets[N].layers)}}}(),O=function(){var G=[4,1,9];function D(L){var N,U=L.length,H,q;for(N=0;N<U;N+=1)if(L[N].ty==="gr")D(L[N].it);else if(L[N].ty==="fl"||L[N].ty==="st")if(L[N].c.k&&L[N].c.k[0].i)for(q=L[N].c.k.length,H=0;H<q;H+=1)L[N].c.k[H].s&&(L[N].c.k[H].s[0]/=255,L[N].c.k[H].s[1]/=255,L[N].c.k[H].s[2]/=255,L[N].c.k[H].s[3]/=255),L[N].c.k[H].e&&(L[N].c.k[H].e[0]/=255,L[N].c.k[H].e[1]/=255,L[N].c.k[H].e[2]/=255,L[N].c.k[H].e[3]/=255);else L[N].c.k[0]/=255,L[N].c.k[1]/=255,L[N].c.k[2]/=255,L[N].c.k[3]/=255}function V(L){var N,U=L.length;for(N=0;N<U;N+=1)L[N].ty===4&&D(L[N].shapes)}return function(L){if(P(G,L.v)&&(V(L.layers),L.assets)){var N,U=L.assets.length;for(N=0;N<U;N+=1)L.assets[N].layers&&V(L.assets[N].layers)}}}(),$=function(){var G=[4,4,18];function D(L){var N,U=L.length,H,q;for(N=U-1;N>=0;N-=1)if(L[N].ty==="sh")if(L[N].ks.k.i)L[N].ks.k.c=L[N].closed;else for(q=L[N].ks.k.length,H=0;H<q;H+=1)L[N].ks.k[H].s&&(L[N].ks.k[H].s[0].c=L[N].closed),L[N].ks.k[H].e&&(L[N].ks.k[H].e[0].c=L[N].closed);else L[N].ty==="gr"&&D(L[N].it)}function V(L){var N,U,H=L.length,q,Z,ee,ne;for(U=0;U<H;U+=1){if(N=L[U],N.hasMask){var ue=N.masksProperties;for(Z=ue.length,q=0;q<Z;q+=1)if(ue[q].pt.k.i)ue[q].pt.k.c=ue[q].cl;else for(ne=ue[q].pt.k.length,ee=0;ee<ne;ee+=1)ue[q].pt.k[ee].s&&(ue[q].pt.k[ee].s[0].c=ue[q].cl),ue[q].pt.k[ee].e&&(ue[q].pt.k[ee].e[0].c=ue[q].cl)}N.ty===4&&D(N.shapes)}}return function(L){if(P(G,L.v)&&(V(L.layers),L.assets)){var N,U=L.assets.length;for(N=0;N<U;N+=1)L.assets[N].layers&&V(L.assets[N].layers)}}}();function B(G){G.__complete||(O(G),I(G),M(G),R(G),$(G),x(G.layers,G.assets),T(G.chars,G.assets),G.__complete=!0)}function F(G){G.t.a.length===0&&"m"in G.t.p}var z={};return z.completeData=B,z.checkColors=O,z.checkChars=M,z.checkPathProperties=R,z.checkShapes=$,z.completeLayers=x,z}if(l.dataManager||(l.dataManager=S()),l.assetLoader||(l.assetLoader=function(){function x(A){var w=A.getResponseHeader("content-type");return w&&A.responseType==="json"&&w.indexOf("json")!==-1||A.response&&_typeof$5(A.response)==="object"?A.response:A.response&&typeof A.response=="string"?JSON.parse(A.response):A.responseText?JSON.parse(A.responseText):null}function T(A,w,C,E){var P,I=new XMLHttpRequest;try{I.responseType="json"}catch{}I.onreadystatechange=function(){if(I.readyState===4)if(I.status===200)P=x(I),C(P);else try{P=x(I),C(P)}catch(M){E&&E(M)}};try{I.open(["G","E","T"].join(""),A,!0)}catch{I.open(["G","E","T"].join(""),w+"/"+A,!0)}I.send()}return{load:T}}()),_.data.type==="loadAnimation")l.assetLoader.load(_.data.path,_.data.fullPath,function(x){l.dataManager.completeData(x),l.postMessage({id:_.data.id,payload:x,status:"success"})},function(){l.postMessage({id:_.data.id,status:"error"})});else if(_.data.type==="complete"){var b=_.data.animation;l.dataManager.completeData(b),l.postMessage({id:_.data.id,payload:b,status:"success"})}else _.data.type==="loadData"&&l.assetLoader.load(_.data.path,_.data.fullPath,function(x){l.postMessage({id:_.data.id,payload:x,status:"success"})},function(){l.postMessage({id:_.data.id,status:"error"})})}),o.onmessage=function(y){var _=y.data,S=_.id,b=r[S];r[S]=null,_.status==="success"?b.onComplete(_.payload):b.onError&&b.onError()})}function f(y,_){a+=1;var S="processId_"+a;return r[S]={onComplete:y,onError:_},S}function d(y,_,S){c();var b=f(_,S);o.postMessage({type:"loadAnimation",path:y,fullPath:window.location.origin+window.location.pathname,id:b})}function v(y,_,S){c();var b=f(_,S);o.postMessage({type:"loadData",path:y,fullPath:window.location.origin+window.location.pathname,id:b})}function g(y,_,S){c();var b=f(_,S);o.postMessage({type:"complete",animation:y,id:b})}return{loadAnimation:d,loadData:v,completeAnimation:g}}(),ImagePreloader=function(){var a=function(){var T=createTag("canvas");T.width=1,T.height=1;var A=T.getContext("2d");return A.fillStyle="rgba(0,0,0,0)",A.fillRect(0,0,1,1),T}();function r(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function o(T,A,w){var C="";if(T.e)C=T.p;else if(A){var E=T.p;E.indexOf("images/")!==-1&&(E=E.split("/")[1]),C=A+E}else C=w,C+=T.u?T.u:"",C+=T.p;return C}function s(T){var A=0,w=setInterval((function(){var C=T.getBBox();(C.width||A>500)&&(this._imageLoaded(),clearInterval(w)),A+=1}).bind(this),50)}function l(T){var A=o(T,this.assetsPath,this.path),w=createNS("image");isSafari?this.testImageLoaded(w):w.addEventListener("load",this._imageLoaded,!1),w.addEventListener("error",(function(){C.img=a,this._imageLoaded()}).bind(this),!1),w.setAttributeNS("http://www.w3.org/1999/xlink","href",A),this._elementHelper.append?this._elementHelper.append(w):this._elementHelper.appendChild(w);var C={img:w,assetData:T};return C}function u(T){var A=o(T,this.assetsPath,this.path),w=createTag("img");w.crossOrigin="anonymous",w.addEventListener("load",this._imageLoaded,!1),w.addEventListener("error",(function(){C.img=a,this._imageLoaded()}).bind(this),!1),w.src=A;var C={img:w,assetData:T};return C}function c(T){var A={assetData:T},w=o(T,this.assetsPath,this.path);return dataManager.loadData(w,(function(C){A.img=C,this._footageLoaded()}).bind(this),(function(){A.img={},this._footageLoaded()}).bind(this)),A}function f(T,A){this.imagesLoadedCb=A;var w,C=T.length;for(w=0;w<C;w+=1)T[w].layers||(!T[w].t||T[w].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(T[w]))):T[w].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(T[w]))))}function d(T){this.path=T||""}function v(T){this.assetsPath=T||""}function g(T){for(var A=0,w=this.images.length;A<w;){if(this.images[A].assetData===T)return this.images[A].img;A+=1}return null}function y(){this.imagesLoadedCb=null,this.images.length=0}function _(){return this.totalImages===this.loadedAssets}function S(){return this.totalFootages===this.loadedFootagesCount}function b(T,A){T==="svg"?(this._elementHelper=A,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function x(){this._imageLoaded=r.bind(this),this._footageLoaded=n.bind(this),this.testImageLoaded=s.bind(this),this.createFootageData=c.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return x.prototype={loadAssets:f,setAssetsPath:v,setPath:d,loadedImages:_,loadedFootages:S,destroy:y,getAsset:g,createImgData:u,createImageData:l,imageLoaded:r,footageLoaded:n,setCacheType:b},x}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(r,n){if(this._cbs[r])for(var o=this._cbs[r],s=0;s<o.length;s+=1)o[s](n)},addEventListener:function(r,n){return this._cbs[r]||(this._cbs[r]=[]),this._cbs[r].push(n),(function(){this.removeEventListener(r,n)}).bind(this)},removeEventListener:function(r,n){if(!n)this._cbs[r]=null;else if(this._cbs[r]){for(var o=0,s=this._cbs[r].length;o<s;)this._cbs[r][o]===n&&(this._cbs[r].splice(o,1),o-=1,s-=1),o+=1;this._cbs[r].length||(this._cbs[r]=null)}}};var markerParser=function(){function a(r){for(var n=r.split(`\r
`),o={},s,l=0,u=0;u<n.length;u+=1)s=n[u].split(":"),s.length===2&&(o[s[0]]=s[1].trim(),l+=1);if(l===0)throw new Error;return o}return function(r){for(var n=[],o=0;o<r.length;o+=1){var s=r[o],l={time:s.tm,duration:s.dr};try{l.payload=JSON.parse(r[o].cm)}catch{try{l.payload=a(r[o].cm)}catch{l.payload={name:r[o].cm}}}n.push(l)}return n}}(),ProjectInterface=function(){function a(r){this.compositions.push(r)}return function(){function r(n){for(var o=0,s=this.compositions.length;o<s;){if(this.compositions[o].data&&this.compositions[o].data.nm===n)return this.compositions[o].prepareFrame&&this.compositions[o].data.xt&&this.compositions[o].prepareFrame(this.currentFrame),this.compositions[o].compInterface;o+=1}return null}return r.compositions=[],r.currentFrame=0,r.registerComposition=a,r}}(),renderers={},registerRenderer=function(r,n){renderers[r]=n};function getRenderer(a){return renderers[a]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var a in renderers)if(renderers[a])return a;return""}function _typeof$4(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(n){return typeof n}:_typeof$4=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$4(a)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(a){(a.wrapper||a.container)&&(this.wrapper=a.wrapper||a.container);var r="svg";a.animType?r=a.animType:a.renderer&&(r=a.renderer);var n=getRenderer(r);this.renderer=new n(this,a.rendererSettings),this.imagePreloader.setCacheType(r,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=r,a.loop===""||a.loop===null||a.loop===void 0||a.loop===!0?this.loop=!0:a.loop===!1?this.loop=!1:this.loop=parseInt(a.loop,10),this.autoplay="autoplay"in a?a.autoplay:!0,this.name=a.name?a.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(a,"autoloadSegments")?a.autoloadSegments:!0,this.assetsPath=a.assetsPath,this.initialSegment=a.initialSegment,a.audioFactory&&this.audioController.setAudioFactory(a.audioFactory),a.animationData?this.setupAnimation(a.animationData):a.path&&(a.path.lastIndexOf("\\")!==-1?this.path=a.path.substr(0,a.path.lastIndexOf("\\")+1):this.path=a.path.substr(0,a.path.lastIndexOf("/")+1),this.fileName=a.path.substr(a.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(a.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(a){dataManager.completeAnimation(a,this.configAnimation)},AnimationItem.prototype.setData=function(a,r){r&&_typeof$4(r)!=="object"&&(r=JSON.parse(r));var n={wrapper:a,animationData:r},o=a.attributes;n.path=o.getNamedItem("data-animation-path")?o.getNamedItem("data-animation-path").value:o.getNamedItem("data-bm-path")?o.getNamedItem("data-bm-path").value:o.getNamedItem("bm-path")?o.getNamedItem("bm-path").value:"",n.animType=o.getNamedItem("data-anim-type")?o.getNamedItem("data-anim-type").value:o.getNamedItem("data-bm-type")?o.getNamedItem("data-bm-type").value:o.getNamedItem("bm-type")?o.getNamedItem("bm-type").value:o.getNamedItem("data-bm-renderer")?o.getNamedItem("data-bm-renderer").value:o.getNamedItem("bm-renderer")?o.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var s=o.getNamedItem("data-anim-loop")?o.getNamedItem("data-anim-loop").value:o.getNamedItem("data-bm-loop")?o.getNamedItem("data-bm-loop").value:o.getNamedItem("bm-loop")?o.getNamedItem("bm-loop").value:"";s==="false"?n.loop=!1:s==="true"?n.loop=!0:s!==""&&(n.loop=parseInt(s,10));var l=o.getNamedItem("data-anim-autoplay")?o.getNamedItem("data-anim-autoplay").value:o.getNamedItem("data-bm-autoplay")?o.getNamedItem("data-bm-autoplay").value:o.getNamedItem("bm-autoplay")?o.getNamedItem("bm-autoplay").value:!0;n.autoplay=l!=="false",n.name=o.getNamedItem("data-name")?o.getNamedItem("data-name").value:o.getNamedItem("data-bm-name")?o.getNamedItem("data-bm-name").value:o.getNamedItem("bm-name")?o.getNamedItem("bm-name").value:"";var u=o.getNamedItem("data-anim-prerender")?o.getNamedItem("data-anim-prerender").value:o.getNamedItem("data-bm-prerender")?o.getNamedItem("data-bm-prerender").value:o.getNamedItem("bm-prerender")?o.getNamedItem("bm-prerender").value:"";u==="false"&&(n.prerender=!1),n.path?this.setParams(n):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(a){a.op>this.animationData.op&&(this.animationData.op=a.op,this.totalFrames=Math.floor(a.op-this.animationData.ip));var r=this.animationData.layers,n,o=r.length,s=a.layers,l,u=s.length;for(l=0;l<u;l+=1)for(n=0;n<o;){if(r[n].id===s[l].id){r[n]=s[l];break}n+=1}if((a.chars||a.fonts)&&(this.renderer.globalData.fontManager.addChars(a.chars),this.renderer.globalData.fontManager.addFonts(a.fonts,this.renderer.globalData.defs)),a.assets)for(o=a.assets.length,n=0;n<o;n+=1)this.animationData.assets.push(a.assets[n]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(a){this.animationData=a;var r=getExpressionsPlugin();r&&r.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var a=this.animationData.segments;if(!a||a.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var r=a.shift();this.timeCompleted=r.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(n,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var a=this.animationData.segments;a||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(a){if(this.renderer)try{this.animationData=a,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(a),a.assets||(a.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(a.assets),this.markers=markerParser(a.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(r){this.triggerConfigError(r)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var a=getExpressionsPlugin();a&&a.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(a,r){var n=typeof a=="number"?a:void 0,o=typeof r=="number"?r:void 0;this.renderer.updateContainerSize(n,o)},AnimationItem.prototype.setSubframe=function(a){this.isSubframeEnabled=!!a},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(a){this.triggerRenderFrameError(a)}},AnimationItem.prototype.play=function(a){a&&this.name!==a||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(a){a&&this.name!==a||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(a){a&&this.name!==a||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(a){a&&this.name!==a||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(a){for(var r,n=0;n<this.markers.length;n+=1)if(r=this.markers[n],r.payload&&r.payload.name===a)return r;return null},AnimationItem.prototype.goToAndStop=function(a,r,n){if(!(n&&this.name!==n)){var o=Number(a);if(isNaN(o)){var s=this.getMarkerData(a);s&&this.goToAndStop(s.time,!0)}else r?this.setCurrentRawFrameValue(a):this.setCurrentRawFrameValue(a*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(a,r,n){if(!(n&&this.name!==n)){var o=Number(a);if(isNaN(o)){var s=this.getMarkerData(a);s&&(s.duration?this.playSegments([s.time,s.time+s.duration],!0):this.goToAndStop(s.time,!0))}else this.goToAndStop(o,r,n);this.play()}},AnimationItem.prototype.advanceTime=function(a){if(!(this.isPaused===!0||this.isLoaded===!1)){var r=this.currentRawFrame+a*this.frameModifier,n=!1;r>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(r>this.totalFrames?r%this.totalFrames:0)||(n=!0,r=this.totalFrames-1):r>=this.totalFrames?(this.playCount+=1,this.checkSegments(r%this.totalFrames)||(this.setCurrentRawFrameValue(r%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(r):r<0?this.checkSegments(r%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+r%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(n=!0,r=0)):this.setCurrentRawFrameValue(r),n&&(this.setCurrentRawFrameValue(r),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(a,r){this.playCount=0,a[1]<a[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=a[0]-a[1],this.timeCompleted=this.totalFrames,this.firstFrame=a[1],this.setCurrentRawFrameValue(this.totalFrames-.001-r)):a[1]>a[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=a[1]-a[0],this.timeCompleted=this.totalFrames,this.firstFrame=a[0],this.setCurrentRawFrameValue(.001+r)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(a,r){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<a?n=a:this.currentRawFrame+this.firstFrame>r&&(n=r-a)),this.firstFrame=a,this.totalFrames=r-a,this.timeCompleted=this.totalFrames,n!==-1&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(a,r){if(r&&(this.segments.length=0),_typeof$4(a[0])==="object"){var n,o=a.length;for(n=0;n<o;n+=1)this.segments.push(a[n])}else this.segments.push(a);this.segments.length&&r&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(a){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),a&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(a){return this.segments.length?(this.adjustSegment(this.segments.shift(),a),!0):!1},AnimationItem.prototype.destroy=function(a){a&&this.name!==a||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(a){this.currentRawFrame=a,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(a){this.playSpeed=a,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(a){this.playDirection=a<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(a){this.loop=a},AnimationItem.prototype.setVolume=function(a,r){r&&this.name!==r||this.audioController.setVolume(a)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(a){a&&this.name!==a||this.audioController.mute()},AnimationItem.prototype.unmute=function(a){a&&this.name!==a||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(a){var r="";if(a.e)r=a.p;else if(this.assetsPath){var n=a.p;n.indexOf("images/")!==-1&&(n=n.split("/")[1]),r=this.assetsPath+n}else r=this.path,r+=a.u?a.u:"",r+=a.p;return r},AnimationItem.prototype.getAssetData=function(a){for(var r=0,n=this.assets.length;r<n;){if(a===this.assets[r].id)return this.assets[r];r+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(a){return a?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(a,r,n){try{var o=this.renderer.getElementByPath(a);o.updateDocumentData(r,n)}catch{}},AnimationItem.prototype.trigger=function(a){if(this._cbs&&this._cbs[a])switch(a){case"enterFrame":this.triggerEvent(a,new BMEnterFrameEvent(a,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(a,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(a,new BMCompleteLoopEvent(a,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(a,new BMCompleteEvent(a,this.frameMult));break;case"segmentStart":this.triggerEvent(a,new BMSegmentStartEvent(a,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(a,new BMDestroyEvent(a,this));break;default:this.triggerEvent(a)}a==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(a,this.currentFrame,this.totalFrames,this.frameMult)),a==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(a,this.loop,this.playCount,this.frameMult)),a==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(a,this.frameMult)),a==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(a,this.firstFrame,this.totalFrames)),a==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(a,this))},AnimationItem.prototype.triggerRenderFrameError=function(a){var r=new BMRenderFrameErrorEvent(a,this.currentFrame);this.triggerEvent("error",r),this.onError&&this.onError.call(this,r)},AnimationItem.prototype.triggerConfigError=function(a){var r=new BMConfigErrorEvent(a,this.currentFrame);this.triggerEvent("error",r),this.onError&&this.onError.call(this,r)};var animationManager=function(){var a={},r=[],n=0,o=0,s=0,l=!0,u=!1;function c(D){for(var V=0,L=D.target;V<o;)r[V].animation===L&&(r.splice(V,1),V-=1,o-=1,L.isPaused||g()),V+=1}function f(D,V){if(!D)return null;for(var L=0;L<o;){if(r[L].elem===D&&r[L].elem!==null)return r[L].animation;L+=1}var N=new AnimationItem;return y(N,D),N.setData(D,V),N}function d(){var D,V=r.length,L=[];for(D=0;D<V;D+=1)L.push(r[D].animation);return L}function v(){s+=1,O()}function g(){s-=1}function y(D,V){D.addEventListener("destroy",c),D.addEventListener("_active",v),D.addEventListener("_idle",g),r.push({elem:V,animation:D}),o+=1}function _(D){var V=new AnimationItem;return y(V,null),V.setParams(D),V}function S(D,V){var L;for(L=0;L<o;L+=1)r[L].animation.setSpeed(D,V)}function b(D,V){var L;for(L=0;L<o;L+=1)r[L].animation.setDirection(D,V)}function x(D){var V;for(V=0;V<o;V+=1)r[V].animation.play(D)}function T(D){var V=D-n,L;for(L=0;L<o;L+=1)r[L].animation.advanceTime(V);n=D,s&&!u?window.requestAnimationFrame(T):l=!0}function A(D){n=D,window.requestAnimationFrame(T)}function w(D){var V;for(V=0;V<o;V+=1)r[V].animation.pause(D)}function C(D,V,L){var N;for(N=0;N<o;N+=1)r[N].animation.goToAndStop(D,V,L)}function E(D){var V;for(V=0;V<o;V+=1)r[V].animation.stop(D)}function P(D){var V;for(V=0;V<o;V+=1)r[V].animation.togglePause(D)}function I(D){var V;for(V=o-1;V>=0;V-=1)r[V].animation.destroy(D)}function M(D,V,L){var N=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),U,H=N.length;for(U=0;U<H;U+=1)L&&N[U].setAttribute("data-bm-type",L),f(N[U],D);if(V&&H===0){L||(L="svg");var q=document.getElementsByTagName("body")[0];q.innerText="";var Z=createTag("div");Z.style.width="100%",Z.style.height="100%",Z.setAttribute("data-bm-type",L),q.appendChild(Z),f(Z,D)}}function R(){var D;for(D=0;D<o;D+=1)r[D].animation.resize()}function O(){!u&&s&&l&&(window.requestAnimationFrame(A),l=!1)}function $(){u=!0}function B(){u=!1,O()}function F(D,V){var L;for(L=0;L<o;L+=1)r[L].animation.setVolume(D,V)}function z(D){var V;for(V=0;V<o;V+=1)r[V].animation.mute(D)}function G(D){var V;for(V=0;V<o;V+=1)r[V].animation.unmute(D)}return a.registerAnimation=f,a.loadAnimation=_,a.setSpeed=S,a.setDirection=b,a.play=x,a.pause=w,a.stop=E,a.togglePause=P,a.searchAnimations=M,a.resize=R,a.goToAndStop=C,a.destroy=I,a.freeze=$,a.unfreeze=B,a.setVolume=F,a.mute=z,a.unmute=G,a.getRegisteredAnimations=d,a}(),BezierFactory=function(){var a={};a.getBezierEasing=n;var r={};function n(A,w,C,E,P){var I=P||("bez_"+A+"_"+w+"_"+C+"_"+E).replace(/\./g,"p");if(r[I])return r[I];var M=new T([A,w,C,E]);return r[I]=M,M}var o=4,s=.001,l=1e-7,u=10,c=11,f=1/(c-1),d=typeof Float32Array=="function";function v(A,w){return 1-3*w+3*A}function g(A,w){return 3*w-6*A}function y(A){return 3*A}function _(A,w,C){return((v(w,C)*A+g(w,C))*A+y(w))*A}function S(A,w,C){return 3*v(w,C)*A*A+2*g(w,C)*A+y(w)}function b(A,w,C,E,P){var I,M,R=0;do M=w+(C-w)/2,I=_(M,E,P)-A,I>0?C=M:w=M;while(Math.abs(I)>l&&++R<u);return M}function x(A,w,C,E){for(var P=0;P<o;++P){var I=S(w,C,E);if(I===0)return w;var M=_(w,C,E)-A;w-=M/I}return w}function T(A){this._p=A,this._mSampleValues=d?new Float32Array(c):new Array(c),this._precomputed=!1,this.get=this.get.bind(this)}return T.prototype={get:function(w){var C=this._p[0],E=this._p[1],P=this._p[2],I=this._p[3];return this._precomputed||this._precompute(),C===E&&P===I?w:w===0?0:w===1?1:_(this._getTForX(w),E,I)},_precompute:function(){var w=this._p[0],C=this._p[1],E=this._p[2],P=this._p[3];this._precomputed=!0,(w!==C||E!==P)&&this._calcSampleValues()},_calcSampleValues:function(){for(var w=this._p[0],C=this._p[2],E=0;E<c;++E)this._mSampleValues[E]=_(E*f,w,C)},_getTForX:function(w){for(var C=this._p[0],E=this._p[2],P=this._mSampleValues,I=0,M=1,R=c-1;M!==R&&P[M]<=w;++M)I+=f;--M;var O=(w-P[M])/(P[M+1]-P[M]),$=I+O*f,B=S($,C,E);return B>=s?x(w,$,C,E):B===0?$:b(w,I,I+f,C,E)}},a}(),pooling=function(){function a(r){return r.concat(createSizedArray(r.length))}return{double:a}}(),poolFactory=function(){return function(a,r,n){var o=0,s=a,l=createSizedArray(s),u={newElement:c,release:f};function c(){var d;return o?(o-=1,d=l[o]):d=r(),d}function f(d){o===s&&(l=pooling.double(l),s*=2),n&&n(d),l[o]=d,o+=1}return u}}(),bezierLengthPool=function(){function a(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,a)}(),segmentsLengthPool=function(){function a(){return{lengths:[],totalLength:0}}function r(n){var o,s=n.lengths.length;for(o=0;o<s;o+=1)bezierLengthPool.release(n.lengths[o]);n.lengths.length=0}return poolFactory(8,a,r)}();function bezFunction(){var a=Math;function r(y,_,S,b,x,T){var A=y*b+_*x+S*T-x*b-T*y-S*_;return A>-.001&&A<.001}function n(y,_,S,b,x,T,A,w,C){if(S===0&&T===0&&C===0)return r(y,_,b,x,A,w);var E=a.sqrt(a.pow(b-y,2)+a.pow(x-_,2)+a.pow(T-S,2)),P=a.sqrt(a.pow(A-y,2)+a.pow(w-_,2)+a.pow(C-S,2)),I=a.sqrt(a.pow(A-b,2)+a.pow(w-x,2)+a.pow(C-T,2)),M;return E>P?E>I?M=E-P-I:M=I-P-E:I>P?M=I-P-E:M=P-E-I,M>-1e-4&&M<1e-4}var o=function(){return function(y,_,S,b){var x=getDefaultCurveSegments(),T,A,w,C,E,P=0,I,M=[],R=[],O=bezierLengthPool.newElement();for(w=S.length,T=0;T<x;T+=1){for(E=T/(x-1),I=0,A=0;A<w;A+=1)C=bmPow(1-E,3)*y[A]+3*bmPow(1-E,2)*E*S[A]+3*(1-E)*bmPow(E,2)*b[A]+bmPow(E,3)*_[A],M[A]=C,R[A]!==null&&(I+=bmPow(M[A]-R[A],2)),R[A]=M[A];I&&(I=bmSqrt(I),P+=I),O.percents[T]=E,O.lengths[T]=P}return O.addedLength=P,O}}();function s(y){var _=segmentsLengthPool.newElement(),S=y.c,b=y.v,x=y.o,T=y.i,A,w=y._length,C=_.lengths,E=0;for(A=0;A<w-1;A+=1)C[A]=o(b[A],b[A+1],x[A],T[A+1]),E+=C[A].addedLength;return S&&w&&(C[A]=o(b[A],b[0],x[A],T[0]),E+=C[A].addedLength),_.totalLength=E,_}function l(y){this.segmentLength=0,this.points=new Array(y)}function u(y,_){this.partialLength=y,this.point=_}var c=function(){var y={};return function(_,S,b,x){var T=(_[0]+"_"+_[1]+"_"+S[0]+"_"+S[1]+"_"+b[0]+"_"+b[1]+"_"+x[0]+"_"+x[1]).replace(/\./g,"p");if(!y[T]){var A=getDefaultCurveSegments(),w,C,E,P,I,M=0,R,O,$=null;_.length===2&&(_[0]!==S[0]||_[1]!==S[1])&&r(_[0],_[1],S[0],S[1],_[0]+b[0],_[1]+b[1])&&r(_[0],_[1],S[0],S[1],S[0]+x[0],S[1]+x[1])&&(A=2);var B=new l(A);for(E=b.length,w=0;w<A;w+=1){for(O=createSizedArray(E),I=w/(A-1),R=0,C=0;C<E;C+=1)P=bmPow(1-I,3)*_[C]+3*bmPow(1-I,2)*I*(_[C]+b[C])+3*(1-I)*bmPow(I,2)*(S[C]+x[C])+bmPow(I,3)*S[C],O[C]=P,$!==null&&(R+=bmPow(O[C]-$[C],2));R=bmSqrt(R),M+=R,B.points[w]=new u(R,O),$=O}B.segmentLength=M,y[T]=B}return y[T]}}();function f(y,_){var S=_.percents,b=_.lengths,x=S.length,T=bmFloor((x-1)*y),A=y*_.addedLength,w=0;if(T===x-1||T===0||A===b[T])return S[T];for(var C=b[T]>A?-1:1,E=!0;E;)if(b[T]<=A&&b[T+1]>A?(w=(A-b[T])/(b[T+1]-b[T]),E=!1):T+=C,T<0||T>=x-1){if(T===x-1)return S[T];E=!1}return S[T]+(S[T+1]-S[T])*w}function d(y,_,S,b,x,T){var A=f(x,T),w=1-A,C=a.round((w*w*w*y[0]+(A*w*w+w*A*w+w*w*A)*S[0]+(A*A*w+w*A*A+A*w*A)*b[0]+A*A*A*_[0])*1e3)/1e3,E=a.round((w*w*w*y[1]+(A*w*w+w*A*w+w*w*A)*S[1]+(A*A*w+w*A*A+A*w*A)*b[1]+A*A*A*_[1])*1e3)/1e3;return[C,E]}var v=createTypedArray("float32",8);function g(y,_,S,b,x,T,A){x<0?x=0:x>1&&(x=1);var w=f(x,A);T=T>1?1:T;var C=f(T,A),E,P=y.length,I=1-w,M=1-C,R=I*I*I,O=w*I*I*3,$=w*w*I*3,B=w*w*w,F=I*I*M,z=w*I*M+I*w*M+I*I*C,G=w*w*M+I*w*C+w*I*C,D=w*w*C,V=I*M*M,L=w*M*M+I*C*M+I*M*C,N=w*C*M+I*C*C+w*M*C,U=w*C*C,H=M*M*M,q=C*M*M+M*C*M+M*M*C,Z=C*C*M+M*C*C+C*M*C,ee=C*C*C;for(E=0;E<P;E+=1)v[E*4]=a.round((R*y[E]+O*S[E]+$*b[E]+B*_[E])*1e3)/1e3,v[E*4+1]=a.round((F*y[E]+z*S[E]+G*b[E]+D*_[E])*1e3)/1e3,v[E*4+2]=a.round((V*y[E]+L*S[E]+N*b[E]+U*_[E])*1e3)/1e3,v[E*4+3]=a.round((H*y[E]+q*S[E]+Z*b[E]+ee*_[E])*1e3)/1e3;return v}return{getSegmentsLength:s,getNewSegment:g,getPointInSegment:d,buildBezierData:c,pointOnLine2D:r,pointOnLine3D:n}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(a,r){var n=this.offsetTime,o;this.propType==="multidimensional"&&(o=createTypedArray("float32",this.pv.length));for(var s=r.lastIndex,l=s,u=this.keyframes.length-1,c=!0,f,d,v;c;){if(f=this.keyframes[l],d=this.keyframes[l+1],l===u-1&&a>=d.t-n){f.h&&(f=d),s=0;break}if(d.t-n>a){s=l;break}l<u-1?l+=1:(s=0,c=!1)}v=this.keyframesMetadata[l]||{};var g,y,_,S,b,x,T=d.t-n,A=f.t-n,w;if(f.to){v.bezierData||(v.bezierData=bez.buildBezierData(f.s,d.s||f.e,f.to,f.ti));var C=v.bezierData;if(a>=T||a<A){var E=a>=T?C.points.length-1:0;for(y=C.points[E].point.length,g=0;g<y;g+=1)o[g]=C.points[E].point[g]}else{v.__fnct?x=v.__fnct:(x=BezierFactory.getBezierEasing(f.o.x,f.o.y,f.i.x,f.i.y,f.n).get,v.__fnct=x),_=x((a-A)/(T-A));var P=C.segmentLength*_,I,M=r.lastFrame<a&&r._lastKeyframeIndex===l?r._lastAddedLength:0;for(b=r.lastFrame<a&&r._lastKeyframeIndex===l?r._lastPoint:0,c=!0,S=C.points.length;c;){if(M+=C.points[b].partialLength,P===0||_===0||b===C.points.length-1){for(y=C.points[b].point.length,g=0;g<y;g+=1)o[g]=C.points[b].point[g];break}else if(P>=M&&P<M+C.points[b+1].partialLength){for(I=(P-M)/C.points[b+1].partialLength,y=C.points[b].point.length,g=0;g<y;g+=1)o[g]=C.points[b].point[g]+(C.points[b+1].point[g]-C.points[b].point[g])*I;break}b<S-1?b+=1:c=!1}r._lastPoint=b,r._lastAddedLength=M-C.points[b].partialLength,r._lastKeyframeIndex=l}}else{var R,O,$,B,F;if(u=f.s.length,w=d.s||f.e,this.sh&&f.h!==1)if(a>=T)o[0]=w[0],o[1]=w[1],o[2]=w[2];else if(a<=A)o[0]=f.s[0],o[1]=f.s[1],o[2]=f.s[2];else{var z=createQuaternion(f.s),G=createQuaternion(w),D=(a-A)/(T-A);quaternionToEuler(o,slerp(z,G,D))}else for(l=0;l<u;l+=1)f.h!==1&&(a>=T?_=1:a<A?_=0:(f.o.x.constructor===Array?(v.__fnct||(v.__fnct=[]),v.__fnct[l]?x=v.__fnct[l]:(R=f.o.x[l]===void 0?f.o.x[0]:f.o.x[l],O=f.o.y[l]===void 0?f.o.y[0]:f.o.y[l],$=f.i.x[l]===void 0?f.i.x[0]:f.i.x[l],B=f.i.y[l]===void 0?f.i.y[0]:f.i.y[l],x=BezierFactory.getBezierEasing(R,O,$,B).get,v.__fnct[l]=x)):v.__fnct?x=v.__fnct:(R=f.o.x,O=f.o.y,$=f.i.x,B=f.i.y,x=BezierFactory.getBezierEasing(R,O,$,B).get,f.keyframeMetadata=x),_=x((a-A)/(T-A)))),w=d.s||f.e,F=f.h===1?f.s[l]:f.s[l]+(w[l]-f.s[l])*_,this.propType==="multidimensional"?o[l]=F:o=F}return r.lastIndex=s,o}function slerp(a,r,n){var o=[],s=a[0],l=a[1],u=a[2],c=a[3],f=r[0],d=r[1],v=r[2],g=r[3],y,_,S,b,x;return _=s*f+l*d+u*v+c*g,_<0&&(_=-_,f=-f,d=-d,v=-v,g=-g),1-_>1e-6?(y=Math.acos(_),S=Math.sin(y),b=Math.sin((1-n)*y)/S,x=Math.sin(n*y)/S):(b=1-n,x=n),o[0]=b*s+x*f,o[1]=b*l+x*d,o[2]=b*u+x*v,o[3]=b*c+x*g,o}function quaternionToEuler(a,r){var n=r[0],o=r[1],s=r[2],l=r[3],u=Math.atan2(2*o*l-2*n*s,1-2*o*o-2*s*s),c=Math.asin(2*n*o+2*s*l),f=Math.atan2(2*n*l-2*o*s,1-2*n*n-2*s*s);a[0]=u/degToRads,a[1]=c/degToRads,a[2]=f/degToRads}function createQuaternion(a){var r=a[0]*degToRads,n=a[1]*degToRads,o=a[2]*degToRads,s=Math.cos(r/2),l=Math.cos(n/2),u=Math.cos(o/2),c=Math.sin(r/2),f=Math.sin(n/2),d=Math.sin(o/2),v=s*l*u-c*f*d,g=c*f*u+s*l*d,y=c*l*u+s*f*d,_=s*f*u-c*l*d;return[g,y,_,v]}function getValueAtCurrentTime(){var a=this.comp.renderedFrame-this.offsetTime,r=this.keyframes[0].t-this.offsetTime,n=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(a===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=n&&a>=n||this._caching.lastFrame<r&&a<r))){this._caching.lastFrame>=a&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var o=this.interpolateValue(a,this._caching);this.pv=o}return this._caching.lastFrame=a,this.pv}function setVValue(a){var r;if(this.propType==="unidimensional")r=a*this.mult,mathAbs(this.v-r)>1e-5&&(this.v=r,this._mdf=!0);else for(var n=0,o=this.v.length;n<o;)r=a[n]*this.mult,mathAbs(this.v[n]-r)>1e-5&&(this.v[n]=r,this._mdf=!0),n+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var a,r=this.effectsSequence.length,n=this.kf?this.pv:this.data.k;for(a=0;a<r;a+=1)n=this.effectsSequence[a](n);this.setVValue(n),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(a){this.effectsSequence.push(a),this.container.addDynamicProperty(this)}function ValueProperty(a,r,n,o){this.propType="unidimensional",this.mult=n||1,this.data=r,this.v=n?r.k*n:r.k,this.pv=r.k,this._mdf=!1,this.elem=a,this.container=o,this.comp=a.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(a,r,n,o){this.propType="multidimensional",this.mult=n||1,this.data=r,this._mdf=!1,this.elem=a,this.container=o,this.comp=a.comp,this.k=!1,this.kf=!1,this.frameId=-1;var s,l=r.k.length;for(this.v=createTypedArray("float32",l),this.pv=createTypedArray("float32",l),this.vel=createTypedArray("float32",l),s=0;s<l;s+=1)this.v[s]=r.k[s]*this.mult,this.pv[s]=r.k[s];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(a,r,n,o){this.propType="unidimensional",this.keyframes=r.k,this.keyframesMetadata=[],this.offsetTime=a.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=r,this.mult=n||1,this.elem=a,this.container=o,this.comp=a.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(a,r,n,o){this.propType="multidimensional";var s,l=r.k.length,u,c,f,d;for(s=0;s<l-1;s+=1)r.k[s].to&&r.k[s].s&&r.k[s+1]&&r.k[s+1].s&&(u=r.k[s].s,c=r.k[s+1].s,f=r.k[s].to,d=r.k[s].ti,(u.length===2&&!(u[0]===c[0]&&u[1]===c[1])&&bez.pointOnLine2D(u[0],u[1],c[0],c[1],u[0]+f[0],u[1]+f[1])&&bez.pointOnLine2D(u[0],u[1],c[0],c[1],c[0]+d[0],c[1]+d[1])||u.length===3&&!(u[0]===c[0]&&u[1]===c[1]&&u[2]===c[2])&&bez.pointOnLine3D(u[0],u[1],u[2],c[0],c[1],c[2],u[0]+f[0],u[1]+f[1],u[2]+f[2])&&bez.pointOnLine3D(u[0],u[1],u[2],c[0],c[1],c[2],c[0]+d[0],c[1]+d[1],c[2]+d[2]))&&(r.k[s].to=null,r.k[s].ti=null),u[0]===c[0]&&u[1]===c[1]&&f[0]===0&&f[1]===0&&d[0]===0&&d[1]===0&&(u.length===2||u[2]===c[2]&&f[2]===0&&d[2]===0)&&(r.k[s].to=null,r.k[s].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=r,this.keyframes=r.k,this.keyframesMetadata=[],this.offsetTime=a.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=n||1,this.elem=a,this.container=o,this.comp=a.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var v=r.k[0].s.length;for(this.v=createTypedArray("float32",v),this.pv=createTypedArray("float32",v),s=0;s<v;s+=1)this.v[s]=initFrame,this.pv[s]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",v)},this.addEffect=addEffect}var PropertyFactory=function(){function a(n,o,s,l,u){o.sid&&(o=n.globalData.slotManager.getProp(o));var c;if(!o.k.length)c=new ValueProperty(n,o,l,u);else if(typeof o.k[0]=="number")c=new MultiDimensionalProperty(n,o,l,u);else switch(s){case 0:c=new KeyframedValueProperty(n,o,l,u);break;case 1:c=new KeyframedMultidimensionalProperty(n,o,l,u);break}return c.effectsSequence.length&&u.addDynamicProperty(c),c}var r={getProp:a};return r}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(r){this.dynamicProperties.indexOf(r)===-1&&(this.dynamicProperties.push(r),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var r,n=this.dynamicProperties.length;for(r=0;r<n;r+=1)this.dynamicProperties[r].getValue(),this.dynamicProperties[r]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(r){this.container=r,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function a(){return createTypedArray("float32",2)}return poolFactory(8,a)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(a,r){this.c=a,this.setLength(r);for(var n=0;n<r;)this.v[n]=pointPool.newElement(),this.o[n]=pointPool.newElement(),this.i[n]=pointPool.newElement(),n+=1},ShapePath.prototype.setLength=function(a){for(;this._maxLength<a;)this.doubleArrayLength();this._length=a},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(a,r,n,o,s){var l;switch(this._length=Math.max(this._length,o+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":l=this.v;break;case"i":l=this.i;break;case"o":l=this.o;break;default:l=[];break}(!l[o]||l[o]&&!s)&&(l[o]=pointPool.newElement()),l[o][0]=a,l[o][1]=r},ShapePath.prototype.setTripleAt=function(a,r,n,o,s,l,u,c){this.setXYAt(a,r,"v",u,c),this.setXYAt(n,o,"o",u,c),this.setXYAt(s,l,"i",u,c)},ShapePath.prototype.reverse=function(){var a=new ShapePath;a.setPathData(this.c,this._length);var r=this.v,n=this.o,o=this.i,s=0;this.c&&(a.setTripleAt(r[0][0],r[0][1],o[0][0],o[0][1],n[0][0],n[0][1],0,!1),s=1);var l=this._length-1,u=this._length,c;for(c=s;c<u;c+=1)a.setTripleAt(r[l][0],r[l][1],o[l][0],o[l][1],n[l][0],n[l][1],c,!1),l-=1;return a},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function a(){return new ShapePath}function r(s){var l=s._length,u;for(u=0;u<l;u+=1)pointPool.release(s.v[u]),pointPool.release(s.i[u]),pointPool.release(s.o[u]),s.v[u]=null,s.i[u]=null,s.o[u]=null;s._length=0,s.c=!1}function n(s){var l=o.newElement(),u,c=s._length===void 0?s.v.length:s._length;for(l.setLength(c),l.c=s.c,u=0;u<c;u+=1)l.setTripleAt(s.v[u][0],s.v[u][1],s.o[u][0],s.o[u][1],s.i[u][0],s.i[u][1],u);return l}var o=poolFactory(4,a,r);return o.clone=n,o}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(a){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=a,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var a;for(a=0;a<this._length;a+=1)shapePool.release(this.shapes[a]);this._length=0};var shapeCollectionPool=function(){var a={newShapeCollection:s,release:l},r=0,n=4,o=createSizedArray(n);function s(){var u;return r?(r-=1,u=o[r]):u=new ShapeCollection,u}function l(u){var c,f=u._length;for(c=0;c<f;c+=1)shapePool.release(u.shapes[c]);u._length=0,r===n&&(o=pooling.double(o),n*=2),o[r]=u,r+=1}return a}(),ShapePropertyFactory=function(){var a=-999999;function r(T,A,w){var C=w.lastIndex,E,P,I,M,R,O,$,B,F,z=this.keyframes;if(T<z[0].t-this.offsetTime)E=z[0].s[0],I=!0,C=0;else if(T>=z[z.length-1].t-this.offsetTime)E=z[z.length-1].s?z[z.length-1].s[0]:z[z.length-2].e[0],I=!0;else{for(var G=C,D=z.length-1,V=!0,L,N,U;V&&(L=z[G],N=z[G+1],!(N.t-this.offsetTime>T));)G<D-1?G+=1:V=!1;if(U=this.keyframesMetadata[G]||{},I=L.h===1,C=G,!I){if(T>=N.t-this.offsetTime)B=1;else if(T<L.t-this.offsetTime)B=0;else{var H;U.__fnct?H=U.__fnct:(H=BezierFactory.getBezierEasing(L.o.x,L.o.y,L.i.x,L.i.y).get,U.__fnct=H),B=H((T-(L.t-this.offsetTime))/(N.t-this.offsetTime-(L.t-this.offsetTime)))}P=N.s?N.s[0]:L.e[0]}E=L.s[0]}for(O=A._length,$=E.i[0].length,w.lastIndex=C,M=0;M<O;M+=1)for(R=0;R<$;R+=1)F=I?E.i[M][R]:E.i[M][R]+(P.i[M][R]-E.i[M][R])*B,A.i[M][R]=F,F=I?E.o[M][R]:E.o[M][R]+(P.o[M][R]-E.o[M][R])*B,A.o[M][R]=F,F=I?E.v[M][R]:E.v[M][R]+(P.v[M][R]-E.v[M][R])*B,A.v[M][R]=F}function n(){var T=this.comp.renderedFrame-this.offsetTime,A=this.keyframes[0].t-this.offsetTime,w=this.keyframes[this.keyframes.length-1].t-this.offsetTime,C=this._caching.lastFrame;return C!==a&&(C<A&&T<A||C>w&&T>w)||(this._caching.lastIndex=C<T?this._caching.lastIndex:0,this.interpolateShape(T,this.pv,this._caching)),this._caching.lastFrame=T,this.pv}function o(){this.paths=this.localShapeCollection}function s(T,A){if(T._length!==A._length||T.c!==A.c)return!1;var w,C=T._length;for(w=0;w<C;w+=1)if(T.v[w][0]!==A.v[w][0]||T.v[w][1]!==A.v[w][1]||T.o[w][0]!==A.o[w][0]||T.o[w][1]!==A.o[w][1]||T.i[w][0]!==A.i[w][0]||T.i[w][1]!==A.i[w][1])return!1;return!0}function l(T){s(this.v,T)||(this.v=shapePool.clone(T),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function u(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var T;this.kf?T=this.pv:this.data.ks?T=this.data.ks.k:T=this.data.pt.k;var A,w=this.effectsSequence.length;for(A=0;A<w;A+=1)T=this.effectsSequence[A](T);this.setVValue(T),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function c(T,A,w){this.propType="shape",this.comp=T.comp,this.container=T,this.elem=T,this.data=A,this.k=!1,this.kf=!1,this._mdf=!1;var C=w===3?A.pt.k:A.ks.k;this.v=shapePool.clone(C),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=o,this.effectsSequence=[]}function f(T){this.effectsSequence.push(T),this.container.addDynamicProperty(this)}c.prototype.interpolateShape=r,c.prototype.getValue=u,c.prototype.setVValue=l,c.prototype.addEffect=f;function d(T,A,w){this.propType="shape",this.comp=T.comp,this.elem=T,this.container=T,this.offsetTime=T.data.st,this.keyframes=w===3?A.pt.k:A.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var C=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,C),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=a,this.reset=o,this._caching={lastFrame:a,lastIndex:0},this.effectsSequence=[n.bind(this)]}d.prototype.getValue=u,d.prototype.interpolateShape=r,d.prototype.setVValue=l,d.prototype.addEffect=f;var v=function(){var T=roundCorner;function A(w,C){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=C.d,this.elem=w,this.comp=w.comp,this.frameId=-1,this.initDynamicPropertyContainer(w),this.p=PropertyFactory.getProp(w,C.p,1,0,this),this.s=PropertyFactory.getProp(w,C.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return A.prototype={reset:o,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var C=this.p.v[0],E=this.p.v[1],P=this.s.v[0]/2,I=this.s.v[1]/2,M=this.d!==3,R=this.v;R.v[0][0]=C,R.v[0][1]=E-I,R.v[1][0]=M?C+P:C-P,R.v[1][1]=E,R.v[2][0]=C,R.v[2][1]=E+I,R.v[3][0]=M?C-P:C+P,R.v[3][1]=E,R.i[0][0]=M?C-P*T:C+P*T,R.i[0][1]=E-I,R.i[1][0]=M?C+P:C-P,R.i[1][1]=E-I*T,R.i[2][0]=M?C+P*T:C-P*T,R.i[2][1]=E+I,R.i[3][0]=M?C-P:C+P,R.i[3][1]=E+I*T,R.o[0][0]=M?C+P*T:C-P*T,R.o[0][1]=E-I,R.o[1][0]=M?C+P:C-P,R.o[1][1]=E+I*T,R.o[2][0]=M?C-P*T:C+P*T,R.o[2][1]=E+I,R.o[3][0]=M?C-P:C+P,R.o[3][1]=E-I*T}},extendPrototype([DynamicPropertyContainer],A),A}(),g=function(){function T(A,w){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=A,this.comp=A.comp,this.data=w,this.frameId=-1,this.d=w.d,this.initDynamicPropertyContainer(A),w.sy===1?(this.ir=PropertyFactory.getProp(A,w.ir,0,0,this),this.is=PropertyFactory.getProp(A,w.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(A,w.pt,0,0,this),this.p=PropertyFactory.getProp(A,w.p,1,0,this),this.r=PropertyFactory.getProp(A,w.r,0,degToRads,this),this.or=PropertyFactory.getProp(A,w.or,0,0,this),this.os=PropertyFactory.getProp(A,w.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return T.prototype={reset:o,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var w=Math.floor(this.pt.v)*2,C=Math.PI*2/w,E=!0,P=this.or.v,I=this.ir.v,M=this.os.v,R=this.is.v,O=2*Math.PI*P/(w*2),$=2*Math.PI*I/(w*2),B,F,z,G,D=-Math.PI/2;D+=this.r.v;var V=this.data.d===3?-1:1;for(this.v._length=0,B=0;B<w;B+=1){F=E?P:I,z=E?M:R,G=E?O:$;var L=F*Math.cos(D),N=F*Math.sin(D),U=L===0&&N===0?0:N/Math.sqrt(L*L+N*N),H=L===0&&N===0?0:-L/Math.sqrt(L*L+N*N);L+=+this.p.v[0],N+=+this.p.v[1],this.v.setTripleAt(L,N,L-U*G*z*V,N-H*G*z*V,L+U*G*z*V,N+H*G*z*V,B,!0),E=!E,D+=C*V}},convertPolygonToPath:function(){var w=Math.floor(this.pt.v),C=Math.PI*2/w,E=this.or.v,P=this.os.v,I=2*Math.PI*E/(w*4),M,R=-Math.PI*.5,O=this.data.d===3?-1:1;for(R+=this.r.v,this.v._length=0,M=0;M<w;M+=1){var $=E*Math.cos(R),B=E*Math.sin(R),F=$===0&&B===0?0:B/Math.sqrt($*$+B*B),z=$===0&&B===0?0:-$/Math.sqrt($*$+B*B);$+=+this.p.v[0],B+=+this.p.v[1],this.v.setTripleAt($,B,$-F*I*P*O,B-z*I*P*O,$+F*I*P*O,B+z*I*P*O,M,!0),R+=C*O}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],T),T}(),y=function(){function T(A,w){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=A,this.comp=A.comp,this.frameId=-1,this.d=w.d,this.initDynamicPropertyContainer(A),this.p=PropertyFactory.getProp(A,w.p,1,0,this),this.s=PropertyFactory.getProp(A,w.s,1,0,this),this.r=PropertyFactory.getProp(A,w.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return T.prototype={convertRectToPath:function(){var w=this.p.v[0],C=this.p.v[1],E=this.s.v[0]/2,P=this.s.v[1]/2,I=bmMin(E,P,this.r.v),M=I*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(w+E,C-P+I,w+E,C-P+I,w+E,C-P+M,0,!0),this.v.setTripleAt(w+E,C+P-I,w+E,C+P-M,w+E,C+P-I,1,!0),I!==0?(this.v.setTripleAt(w+E-I,C+P,w+E-I,C+P,w+E-M,C+P,2,!0),this.v.setTripleAt(w-E+I,C+P,w-E+M,C+P,w-E+I,C+P,3,!0),this.v.setTripleAt(w-E,C+P-I,w-E,C+P-I,w-E,C+P-M,4,!0),this.v.setTripleAt(w-E,C-P+I,w-E,C-P+M,w-E,C-P+I,5,!0),this.v.setTripleAt(w-E+I,C-P,w-E+I,C-P,w-E+M,C-P,6,!0),this.v.setTripleAt(w+E-I,C-P,w+E-M,C-P,w+E-I,C-P,7,!0)):(this.v.setTripleAt(w-E,C+P,w-E+M,C+P,w-E,C+P,2),this.v.setTripleAt(w-E,C-P,w-E,C-P+M,w-E,C-P,3))):(this.v.setTripleAt(w+E,C-P+I,w+E,C-P+M,w+E,C-P+I,0,!0),I!==0?(this.v.setTripleAt(w+E-I,C-P,w+E-I,C-P,w+E-M,C-P,1,!0),this.v.setTripleAt(w-E+I,C-P,w-E+M,C-P,w-E+I,C-P,2,!0),this.v.setTripleAt(w-E,C-P+I,w-E,C-P+I,w-E,C-P+M,3,!0),this.v.setTripleAt(w-E,C+P-I,w-E,C+P-M,w-E,C+P-I,4,!0),this.v.setTripleAt(w-E+I,C+P,w-E+I,C+P,w-E+M,C+P,5,!0),this.v.setTripleAt(w+E-I,C+P,w+E-M,C+P,w+E-I,C+P,6,!0),this.v.setTripleAt(w+E,C+P-I,w+E,C+P-I,w+E,C+P-M,7,!0)):(this.v.setTripleAt(w-E,C-P,w-E+M,C-P,w-E,C-P,1,!0),this.v.setTripleAt(w-E,C+P,w-E,C+P-M,w-E,C+P,2,!0),this.v.setTripleAt(w+E,C+P,w+E-M,C+P,w+E,C+P,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:o},extendPrototype([DynamicPropertyContainer],T),T}();function _(T,A,w){var C;if(w===3||w===4){var E=w===3?A.pt:A.ks,P=E.k;P.length?C=new d(T,A,w):C=new c(T,A,w)}else w===5?C=new y(T,A):w===6?C=new v(T,A):w===7&&(C=new g(T,A));return C.k&&T.addDynamicProperty(C),C}function S(){return c}function b(){return d}var x={};return x.getShapeProp=_,x.getConstructorFunction=S,x.getKeyframedConstructorFunction=b,x}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var a=Math.cos,r=Math.sin,n=Math.tan,o=Math.round;function s(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function l(L){if(L===0)return this;var N=a(L),U=r(L);return this._t(N,-U,0,0,U,N,0,0,0,0,1,0,0,0,0,1)}function u(L){if(L===0)return this;var N=a(L),U=r(L);return this._t(1,0,0,0,0,N,-U,0,0,U,N,0,0,0,0,1)}function c(L){if(L===0)return this;var N=a(L),U=r(L);return this._t(N,0,U,0,0,1,0,0,-U,0,N,0,0,0,0,1)}function f(L){if(L===0)return this;var N=a(L),U=r(L);return this._t(N,-U,0,0,U,N,0,0,0,0,1,0,0,0,0,1)}function d(L,N){return this._t(1,N,L,1,0,0)}function v(L,N){return this.shear(n(L),n(N))}function g(L,N){var U=a(N),H=r(N);return this._t(U,H,0,0,-H,U,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(L),1,0,0,0,0,1,0,0,0,0,1)._t(U,-H,0,0,H,U,0,0,0,0,1,0,0,0,0,1)}function y(L,N,U){return!U&&U!==0&&(U=1),L===1&&N===1&&U===1?this:this._t(L,0,0,0,0,N,0,0,0,0,U,0,0,0,0,1)}function _(L,N,U,H,q,Z,ee,ne,ue,K,J,X,ie,te,W,Y){return this.props[0]=L,this.props[1]=N,this.props[2]=U,this.props[3]=H,this.props[4]=q,this.props[5]=Z,this.props[6]=ee,this.props[7]=ne,this.props[8]=ue,this.props[9]=K,this.props[10]=J,this.props[11]=X,this.props[12]=ie,this.props[13]=te,this.props[14]=W,this.props[15]=Y,this}function S(L,N,U){return U=U||0,L!==0||N!==0||U!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,L,N,U,1):this}function b(L,N,U,H,q,Z,ee,ne,ue,K,J,X,ie,te,W,Y){var j=this.props;if(L===1&&N===0&&U===0&&H===0&&q===0&&Z===1&&ee===0&&ne===0&&ue===0&&K===0&&J===1&&X===0)return j[12]=j[12]*L+j[15]*ie,j[13]=j[13]*Z+j[15]*te,j[14]=j[14]*J+j[15]*W,j[15]*=Y,this._identityCalculated=!1,this;var Q=j[0],re=j[1],ae=j[2],le=j[3],se=j[4],ce=j[5],oe=j[6],de=j[7],he=j[8],fe=j[9],pe=j[10],ve=j[11],ge=j[12],me=j[13],ye=j[14],_e=j[15];return j[0]=Q*L+re*q+ae*ue+le*ie,j[1]=Q*N+re*Z+ae*K+le*te,j[2]=Q*U+re*ee+ae*J+le*W,j[3]=Q*H+re*ne+ae*X+le*Y,j[4]=se*L+ce*q+oe*ue+de*ie,j[5]=se*N+ce*Z+oe*K+de*te,j[6]=se*U+ce*ee+oe*J+de*W,j[7]=se*H+ce*ne+oe*X+de*Y,j[8]=he*L+fe*q+pe*ue+ve*ie,j[9]=he*N+fe*Z+pe*K+ve*te,j[10]=he*U+fe*ee+pe*J+ve*W,j[11]=he*H+fe*ne+pe*X+ve*Y,j[12]=ge*L+me*q+ye*ue+_e*ie,j[13]=ge*N+me*Z+ye*K+_e*te,j[14]=ge*U+me*ee+ye*J+_e*W,j[15]=ge*H+me*ne+ye*X+_e*Y,this._identityCalculated=!1,this}function x(L){var N=L.props;return this.transform(N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7],N[8],N[9],N[10],N[11],N[12],N[13],N[14],N[15])}function T(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function A(L){for(var N=0;N<16;){if(L.props[N]!==this.props[N])return!1;N+=1}return!0}function w(L){var N;for(N=0;N<16;N+=1)L.props[N]=this.props[N];return L}function C(L){var N;for(N=0;N<16;N+=1)this.props[N]=L[N]}function E(L,N,U){return{x:L*this.props[0]+N*this.props[4]+U*this.props[8]+this.props[12],y:L*this.props[1]+N*this.props[5]+U*this.props[9]+this.props[13],z:L*this.props[2]+N*this.props[6]+U*this.props[10]+this.props[14]}}function P(L,N,U){return L*this.props[0]+N*this.props[4]+U*this.props[8]+this.props[12]}function I(L,N,U){return L*this.props[1]+N*this.props[5]+U*this.props[9]+this.props[13]}function M(L,N,U){return L*this.props[2]+N*this.props[6]+U*this.props[10]+this.props[14]}function R(){var L=this.props[0]*this.props[5]-this.props[1]*this.props[4],N=this.props[5]/L,U=-this.props[1]/L,H=-this.props[4]/L,q=this.props[0]/L,Z=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/L,ee=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/L,ne=new Matrix;return ne.props[0]=N,ne.props[1]=U,ne.props[4]=H,ne.props[5]=q,ne.props[12]=Z,ne.props[13]=ee,ne}function O(L){var N=this.getInverseMatrix();return N.applyToPointArray(L[0],L[1],L[2]||0)}function $(L){var N,U=L.length,H=[];for(N=0;N<U;N+=1)H[N]=O(L[N]);return H}function B(L,N,U){var H=createTypedArray("float32",6);if(this.isIdentity())H[0]=L[0],H[1]=L[1],H[2]=N[0],H[3]=N[1],H[4]=U[0],H[5]=U[1];else{var q=this.props[0],Z=this.props[1],ee=this.props[4],ne=this.props[5],ue=this.props[12],K=this.props[13];H[0]=L[0]*q+L[1]*ee+ue,H[1]=L[0]*Z+L[1]*ne+K,H[2]=N[0]*q+N[1]*ee+ue,H[3]=N[0]*Z+N[1]*ne+K,H[4]=U[0]*q+U[1]*ee+ue,H[5]=U[0]*Z+U[1]*ne+K}return H}function F(L,N,U){var H;return this.isIdentity()?H=[L,N,U]:H=[L*this.props[0]+N*this.props[4]+U*this.props[8]+this.props[12],L*this.props[1]+N*this.props[5]+U*this.props[9]+this.props[13],L*this.props[2]+N*this.props[6]+U*this.props[10]+this.props[14]],H}function z(L,N){if(this.isIdentity())return L+","+N;var U=this.props;return Math.round((L*U[0]+N*U[4]+U[12])*100)/100+","+Math.round((L*U[1]+N*U[5]+U[13])*100)/100}function G(){for(var L=0,N=this.props,U="matrix3d(",H=1e4;L<16;)U+=o(N[L]*H)/H,U+=L===15?")":",",L+=1;return U}function D(L){var N=1e4;return L<1e-6&&L>0||L>-1e-6&&L<0?o(L*N)/N:L}function V(){var L=this.props,N=D(L[0]),U=D(L[1]),H=D(L[4]),q=D(L[5]),Z=D(L[12]),ee=D(L[13]);return"matrix("+N+","+U+","+H+","+q+","+Z+","+ee+")"}return function(){this.reset=s,this.rotate=l,this.rotateX=u,this.rotateY=c,this.rotateZ=f,this.skew=v,this.skewFromAxis=g,this.shear=d,this.scale=y,this.setTransform=_,this.translate=S,this.transform=b,this.multiply=x,this.applyToPoint=E,this.applyToX=P,this.applyToY=I,this.applyToZ=M,this.applyToPointArray=F,this.applyToTriplePoints=B,this.applyToPointStringified=z,this.toCSS=G,this.to2dCSS=V,this.clone=w,this.cloneFromProps=C,this.equals=A,this.inversePoints=$,this.inversePoint=O,this.getInverseMatrix=R,this._t=this.transform,this.isIdentity=T,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(n){return typeof n}:_typeof$3=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$3(a)}var lottie={};function setLocation(a){setLocationHref(a)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(a){setSubframeEnabled(a)}function setPrefix(a){setIdPrefix(a)}function loadAnimation(a){return animationManager.loadAnimation(a)}function setQuality(a){if(typeof a=="string")switch(a){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(a)&&a>1&&setDefaultCurveSegments(a)}function inBrowser(){return typeof navigator<"u"}function installPlugin(a,r){a==="expressions"&&setExpressionsPlugin(r)}function getFactory(a){switch(a){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(a){for(var r=queryString.split("&"),n=0;n<r.length;n+=1){var o=r[n].split("=");if(decodeURIComponent(o[0])==a)return decodeURIComponent(o[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports$1)!=="object"&&(window.bodymovin=lottie)}catch(a){}var ShapeModifiers=function(){var a={},r={};a.registerModifier=n,a.getModifier=o;function n(s,l){r[s]||(r[s]=l)}function o(s,l,u){return new r[s](l,u)}return a}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(a){if(!this.closed){a.sh.container.addDynamicProperty(a.sh);var r={shape:a.sh,data:a,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(r),this.addShapeToModifier(r),this._isAnimated&&a.setAsAnimated()}},ShapeModifier.prototype.init=function(a,r){this.shapes=[],this.elem=a,this.initDynamicPropertyContainer(a),this.initModifierProperties(a,r),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(a,r){this.s=PropertyFactory.getProp(a,r.s,0,.01,this),this.e=PropertyFactory.getProp(a,r.e,0,.01,this),this.o=PropertyFactory.getProp(a,r.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=r.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(a){a.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(a,r,n,o,s){var l=[];r<=1?l.push({s:a,e:r}):a>=1?l.push({s:a-1,e:r-1}):(l.push({s:a,e:1}),l.push({s:0,e:r-1}));var u=[],c,f=l.length,d;for(c=0;c<f;c+=1)if(d=l[c],!(d.e*s<o||d.s*s>o+n)){var v,g;d.s*s<=o?v=0:v=(d.s*s-o)/n,d.e*s>=o+n?g=1:g=(d.e*s-o)/n,u.push([v,g])}return u.length||u.push([0,0]),u},TrimModifier.prototype.releasePathsData=function(a){var r,n=a.length;for(r=0;r<n;r+=1)segmentsLengthPool.release(a[r]);return a.length=0,a},TrimModifier.prototype.processShapes=function(a){var r,n;if(this._mdf||a){var o=this.o.v%360/360;if(o<0&&(o+=1),this.s.v>1?r=1+o:this.s.v<0?r=0+o:r=this.s.v+o,this.e.v>1?n=1+o:this.e.v<0?n=0+o:n=this.e.v+o,r>n){var s=r;r=n,n=s}r=Math.round(r*1e4)*1e-4,n=Math.round(n*1e4)*1e-4,this.sValue=r,this.eValue=n}else r=this.sValue,n=this.eValue;var l,u,c=this.shapes.length,f,d,v,g,y,_=0;if(n===r)for(u=0;u<c;u+=1)this.shapes[u].localShapeCollection.releaseShapes(),this.shapes[u].shape._mdf=!0,this.shapes[u].shape.paths=this.shapes[u].localShapeCollection,this._mdf&&(this.shapes[u].pathsData.length=0);else if(n===1&&r===0||n===0&&r===1){if(this._mdf)for(u=0;u<c;u+=1)this.shapes[u].pathsData.length=0,this.shapes[u].shape._mdf=!0}else{var S=[],b,x;for(u=0;u<c;u+=1)if(b=this.shapes[u],!b.shape._mdf&&!this._mdf&&!a&&this.m!==2)b.shape.paths=b.localShapeCollection;else{if(l=b.shape.paths,d=l._length,y=0,!b.shape._mdf&&b.pathsData.length)y=b.totalShapeLength;else{for(v=this.releasePathsData(b.pathsData),f=0;f<d;f+=1)g=bez.getSegmentsLength(l.shapes[f]),v.push(g),y+=g.totalLength;b.totalShapeLength=y,b.pathsData=v}_+=y,b.shape._mdf=!0}var T=r,A=n,w=0,C;for(u=c-1;u>=0;u-=1)if(b=this.shapes[u],b.shape._mdf){for(x=b.localShapeCollection,x.releaseShapes(),this.m===2&&c>1?(C=this.calculateShapeEdges(r,n,b.totalShapeLength,w,_),w+=b.totalShapeLength):C=[[T,A]],d=C.length,f=0;f<d;f+=1){T=C[f][0],A=C[f][1],S.length=0,A<=1?S.push({s:b.totalShapeLength*T,e:b.totalShapeLength*A}):T>=1?S.push({s:b.totalShapeLength*(T-1),e:b.totalShapeLength*(A-1)}):(S.push({s:b.totalShapeLength*T,e:b.totalShapeLength}),S.push({s:0,e:b.totalShapeLength*(A-1)}));var E=this.addShapes(b,S[0]);if(S[0].s!==S[0].e){if(S.length>1){var P=b.shape.paths.shapes[b.shape.paths._length-1];if(P.c){var I=E.pop();this.addPaths(E,x),E=this.addShapes(b,S[1],I)}else this.addPaths(E,x),E=this.addShapes(b,S[1])}this.addPaths(E,x)}}b.shape.paths=x}}},TrimModifier.prototype.addPaths=function(a,r){var n,o=a.length;for(n=0;n<o;n+=1)r.addShape(a[n])},TrimModifier.prototype.addSegment=function(a,r,n,o,s,l,u){s.setXYAt(r[0],r[1],"o",l),s.setXYAt(n[0],n[1],"i",l+1),u&&s.setXYAt(a[0],a[1],"v",l),s.setXYAt(o[0],o[1],"v",l+1)},TrimModifier.prototype.addSegmentFromArray=function(a,r,n,o){r.setXYAt(a[1],a[5],"o",n),r.setXYAt(a[2],a[6],"i",n+1),o&&r.setXYAt(a[0],a[4],"v",n),r.setXYAt(a[3],a[7],"v",n+1)},TrimModifier.prototype.addShapes=function(a,r,n){var o=a.pathsData,s=a.shape.paths.shapes,l,u=a.shape.paths._length,c,f,d=0,v,g,y,_,S=[],b,x=!0;for(n?(g=n._length,b=n._length):(n=shapePool.newElement(),g=0,b=0),S.push(n),l=0;l<u;l+=1){for(y=o[l].lengths,n.c=s[l].c,f=s[l].c?y.length:y.length+1,c=1;c<f;c+=1)if(v=y[c-1],d+v.addedLength<r.s)d+=v.addedLength,n.c=!1;else if(d>r.e){n.c=!1;break}else r.s<=d&&r.e>=d+v.addedLength?(this.addSegment(s[l].v[c-1],s[l].o[c-1],s[l].i[c],s[l].v[c],n,g,x),x=!1):(_=bez.getNewSegment(s[l].v[c-1],s[l].v[c],s[l].o[c-1],s[l].i[c],(r.s-d)/v.addedLength,(r.e-d)/v.addedLength,y[c-1]),this.addSegmentFromArray(_,n,g,x),x=!1,n.c=!1),d+=v.addedLength,g+=1;if(s[l].c&&y.length){if(v=y[c-1],d<=r.e){var T=y[c-1].addedLength;r.s<=d&&r.e>=d+T?(this.addSegment(s[l].v[c-1],s[l].o[c-1],s[l].i[0],s[l].v[0],n,g,x),x=!1):(_=bez.getNewSegment(s[l].v[c-1],s[l].v[0],s[l].o[c-1],s[l].i[0],(r.s-d)/T,(r.e-d)/T,y[c-1]),this.addSegmentFromArray(_,n,g,x),x=!1,n.c=!1)}else n.c=!1;d+=v.addedLength,g+=1}if(n._length&&(n.setXYAt(n.v[b][0],n.v[b][1],"i",b),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),d>r.e)break;l<u-1&&(n=shapePool.newElement(),x=!0,S.push(n),g=0)}return S};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(a,r){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(a,r.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(a,r){var n=r/100,o=[0,0],s=a._length,l=0;for(l=0;l<s;l+=1)o[0]+=a.v[l][0],o[1]+=a.v[l][1];o[0]/=s,o[1]/=s;var u=shapePool.newElement();u.c=a.c;var c,f,d,v,g,y;for(l=0;l<s;l+=1)c=a.v[l][0]+(o[0]-a.v[l][0])*n,f=a.v[l][1]+(o[1]-a.v[l][1])*n,d=a.o[l][0]+(o[0]-a.o[l][0])*-n,v=a.o[l][1]+(o[1]-a.o[l][1])*-n,g=a.i[l][0]+(o[0]-a.i[l][0])*-n,y=a.i[l][1]+(o[1]-a.i[l][1])*-n,u.setTripleAt(c,f,d,v,g,y,l);return u},PuckerAndBloatModifier.prototype.processShapes=function(a){var r,n,o=this.shapes.length,s,l,u=this.amount.v;if(u!==0){var c,f;for(n=0;n<o;n+=1){if(c=this.shapes[n],f=c.localShapeCollection,!(!c.shape._mdf&&!this._mdf&&!a))for(f.releaseShapes(),c.shape._mdf=!0,r=c.shape.paths.shapes,l=c.shape.paths._length,s=0;s<l;s+=1)f.addShape(this.processPath(r[s],u));c.shape.paths=c.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var a=[0,0];function r(f){var d=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||d,this.a&&f.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&f.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&f.skewFromAxis(-this.sk.v,this.sa.v),this.r?f.rotate(-this.r.v):f.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?f.translate(this.px.v,this.py.v,-this.pz.v):f.translate(this.px.v,this.py.v,0):f.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function n(f){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||f){var d;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var v,g;if(d=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(v=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/d,0),g=this.p.getValueAtTime(this.p.keyframes[0].t/d,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(v=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/d,0),g=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/d,0)):(v=this.p.pv,g=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/d,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){v=[],g=[];var y=this.px,_=this.py;y._caching.lastFrame+y.offsetTime<=y.keyframes[0].t?(v[0]=y.getValueAtTime((y.keyframes[0].t+.01)/d,0),v[1]=_.getValueAtTime((_.keyframes[0].t+.01)/d,0),g[0]=y.getValueAtTime(y.keyframes[0].t/d,0),g[1]=_.getValueAtTime(_.keyframes[0].t/d,0)):y._caching.lastFrame+y.offsetTime>=y.keyframes[y.keyframes.length-1].t?(v[0]=y.getValueAtTime(y.keyframes[y.keyframes.length-1].t/d,0),v[1]=_.getValueAtTime(_.keyframes[_.keyframes.length-1].t/d,0),g[0]=y.getValueAtTime((y.keyframes[y.keyframes.length-1].t-.01)/d,0),g[1]=_.getValueAtTime((_.keyframes[_.keyframes.length-1].t-.01)/d,0)):(v=[y.pv,_.pv],g[0]=y.getValueAtTime((y._caching.lastFrame+y.offsetTime-.01)/d,y.offsetTime),g[1]=_.getValueAtTime((_._caching.lastFrame+_.offsetTime-.01)/d,_.offsetTime))}else g=a,v=g;this.v.rotate(-Math.atan2(v[1]-g[1],v[0]-g[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function o(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function s(){}function l(f){this._addDynamicProperty(f),this.elem.addDynamicProperty(f),this._isDirty=!0}function u(f,d,v){if(this.elem=f,this.frameId=-1,this.propType="transform",this.data=d,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(v||f),d.p&&d.p.s?(this.px=PropertyFactory.getProp(f,d.p.x,0,0,this),this.py=PropertyFactory.getProp(f,d.p.y,0,0,this),d.p.z&&(this.pz=PropertyFactory.getProp(f,d.p.z,0,0,this))):this.p=PropertyFactory.getProp(f,d.p||{k:[0,0,0]},1,0,this),d.rx){if(this.rx=PropertyFactory.getProp(f,d.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(f,d.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(f,d.rz,0,degToRads,this),d.or.k[0].ti){var g,y=d.or.k.length;for(g=0;g<y;g+=1)d.or.k[g].to=null,d.or.k[g].ti=null}this.or=PropertyFactory.getProp(f,d.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(f,d.r||{k:0},0,degToRads,this);d.sk&&(this.sk=PropertyFactory.getProp(f,d.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(f,d.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(f,d.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(f,d.s||{k:[100,100,100]},1,.01,this),d.o?this.o=PropertyFactory.getProp(f,d.o,0,.01,f):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}u.prototype={applyToMatrix:r,getValue:n,precalculateMatrix:o,autoOrient:s},extendPrototype([DynamicPropertyContainer],u),u.prototype.addDynamicProperty=l,u.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function c(f,d,v){return new u(f,d,v)}return{getTransformProperty:c}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(a,r){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(a,r.c,0,null,this),this.o=PropertyFactory.getProp(a,r.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(a,r.tr,this),this.so=PropertyFactory.getProp(a,r.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(a,r.tr.eo,0,.01,this),this.data=r,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(a,r,n,o,s,l){var u=l?-1:1,c=o.s.v[0]+(1-o.s.v[0])*(1-s),f=o.s.v[1]+(1-o.s.v[1])*(1-s);a.translate(o.p.v[0]*u*s,o.p.v[1]*u*s,o.p.v[2]),r.translate(-o.a.v[0],-o.a.v[1],o.a.v[2]),r.rotate(-o.r.v*u*s),r.translate(o.a.v[0],o.a.v[1],o.a.v[2]),n.translate(-o.a.v[0],-o.a.v[1],o.a.v[2]),n.scale(l?1/c:c,l?1/f:f),n.translate(o.a.v[0],o.a.v[1],o.a.v[2])},RepeaterModifier.prototype.init=function(a,r,n,o){for(this.elem=a,this.arr=r,this.pos=n,this.elemsData=o,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(a),this.initModifierProperties(a,r[n]);n>0;)n-=1,this._elements.unshift(r[n]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(a){var r,n=a.length;for(r=0;r<n;r+=1)a[r]._processed=!1,a[r].ty==="gr"&&this.resetElements(a[r].it)},RepeaterModifier.prototype.cloneElements=function(a){var r=JSON.parse(JSON.stringify(a));return this.resetElements(r),r},RepeaterModifier.prototype.changeGroupRender=function(a,r){var n,o=a.length;for(n=0;n<o;n+=1)a[n]._render=r,a[n].ty==="gr"&&this.changeGroupRender(a[n].it,r)},RepeaterModifier.prototype.processShapes=function(a){var r,n,o,s,l,u=!1;if(this._mdf||a){var c=Math.ceil(this.c.v);if(this._groups.length<c){for(;this._groups.length<c;){var f={it:this.cloneElements(this._elements),ty:"gr"};f.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,f),this._groups.splice(0,0,f),this._currentCopies+=1}this.elem.reloadShapes(),u=!0}l=0;var d;for(o=0;o<=this._groups.length-1;o+=1){if(d=l<c,this._groups[o]._render=d,this.changeGroupRender(this._groups[o].it,d),!d){var v=this.elemsData[o].it,g=v[v.length-1];g.transform.op.v!==0?(g.transform.op._mdf=!0,g.transform.op.v=0):g.transform.op._mdf=!1}l+=1}this._currentCopies=c;var y=this.o.v,_=y%1,S=y>0?Math.floor(y):Math.ceil(y),b=this.pMatrix.props,x=this.rMatrix.props,T=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var A=0;if(y>0){for(;A<S;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),A+=1;_&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,_,!1),A+=_)}else if(y<0){for(;A>S;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),A-=1;_&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-_,!0),A-=_)}o=this.data.m===1?0:this._currentCopies-1,s=this.data.m===1?1:-1,l=this._currentCopies;for(var w,C;l;){if(r=this.elemsData[o].it,n=r[r.length-1].transform.mProps.v.props,C=n.length,r[r.length-1].transform.mProps._mdf=!0,r[r.length-1].transform.op._mdf=!0,r[r.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(o/(this._currentCopies-1)),A!==0){for((o!==0&&s===1||o!==this._currentCopies-1&&s===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8],x[9],x[10],x[11],x[12],x[13],x[14],x[15]),this.matrix.transform(T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7],T[8],T[9],T[10],T[11],T[12],T[13],T[14],T[15]),this.matrix.transform(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15]),w=0;w<C;w+=1)n[w]=this.matrix.props[w];this.matrix.reset()}else for(this.matrix.reset(),w=0;w<C;w+=1)n[w]=this.matrix.props[w];A+=1,l-=1,o+=s}}else for(l=this._currentCopies,o=0,s=1;l;)r=this.elemsData[o].it,n=r[r.length-1].transform.mProps.v.props,r[r.length-1].transform.mProps._mdf=!1,r[r.length-1].transform.op._mdf=!1,l-=1,o+=s;return u},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(a,r){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(a,r.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(a,r){var n=shapePool.newElement();n.c=a.c;var o,s=a._length,l,u,c,f,d,v,g=0,y,_,S,b,x,T;for(o=0;o<s;o+=1)l=a.v[o],c=a.o[o],u=a.i[o],l[0]===c[0]&&l[1]===c[1]&&l[0]===u[0]&&l[1]===u[1]?(o===0||o===s-1)&&!a.c?(n.setTripleAt(l[0],l[1],c[0],c[1],u[0],u[1],g),g+=1):(o===0?f=a.v[s-1]:f=a.v[o-1],d=Math.sqrt(Math.pow(l[0]-f[0],2)+Math.pow(l[1]-f[1],2)),v=d?Math.min(d/2,r)/d:0,x=l[0]+(f[0]-l[0])*v,y=x,T=l[1]-(l[1]-f[1])*v,_=T,S=y-(y-l[0])*roundCorner,b=_-(_-l[1])*roundCorner,n.setTripleAt(y,_,S,b,x,T,g),g+=1,o===s-1?f=a.v[0]:f=a.v[o+1],d=Math.sqrt(Math.pow(l[0]-f[0],2)+Math.pow(l[1]-f[1],2)),v=d?Math.min(d/2,r)/d:0,S=l[0]+(f[0]-l[0])*v,y=S,b=l[1]+(f[1]-l[1])*v,_=b,x=y-(y-l[0])*roundCorner,T=_-(_-l[1])*roundCorner,n.setTripleAt(y,_,S,b,x,T,g),g+=1):(n.setTripleAt(a.v[o][0],a.v[o][1],a.o[o][0],a.o[o][1],a.i[o][0],a.i[o][1],g),g+=1);return n},RoundCornersModifier.prototype.processShapes=function(a){var r,n,o=this.shapes.length,s,l,u=this.rd.v;if(u!==0){var c,f;for(n=0;n<o;n+=1){if(c=this.shapes[n],f=c.localShapeCollection,!(!c.shape._mdf&&!this._mdf&&!a))for(f.releaseShapes(),c.shape._mdf=!0,r=c.shape.paths.shapes,l=c.shape.paths._length,s=0;s<l;s+=1)f.addShape(this.processPath(r[s],u));c.shape.paths=c.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(a,r){return Math.abs(a-r)*1e5<=Math.min(Math.abs(a),Math.abs(r))}function floatZero(a){return Math.abs(a)<=1e-5}function lerp(a,r,n){return a*(1-n)+r*n}function lerpPoint(a,r,n){return[lerp(a[0],r[0],n),lerp(a[1],r[1],n)]}function quadRoots(a,r,n){if(a===0)return[];var o=r*r-4*a*n;if(o<0)return[];var s=-r/(2*a);if(o===0)return[s];var l=Math.sqrt(o)/(2*a);return[s-l,s+l]}function polynomialCoefficients(a,r,n,o){return[-a+3*r-3*n+o,3*a-6*r+3*n,-3*a+3*r,a]}function singlePoint(a){return new PolynomialBezier(a,a,a,a,!1)}function PolynomialBezier(a,r,n,o,s){s&&pointEqual(a,r)&&(r=lerpPoint(a,o,1/3)),s&&pointEqual(n,o)&&(n=lerpPoint(a,o,2/3));var l=polynomialCoefficients(a[0],r[0],n[0],o[0]),u=polynomialCoefficients(a[1],r[1],n[1],o[1]);this.a=[l[0],u[0]],this.b=[l[1],u[1]],this.c=[l[2],u[2]],this.d=[l[3],u[3]],this.points=[a,r,n,o]}PolynomialBezier.prototype.point=function(a){return[((this.a[0]*a+this.b[0])*a+this.c[0])*a+this.d[0],((this.a[1]*a+this.b[1])*a+this.c[1])*a+this.d[1]]},PolynomialBezier.prototype.derivative=function(a){return[(3*a*this.a[0]+2*this.b[0])*a+this.c[0],(3*a*this.a[1]+2*this.b[1])*a+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(a){var r=this.derivative(a);return Math.atan2(r[1],r[0])},PolynomialBezier.prototype.normalAngle=function(a){var r=this.derivative(a);return Math.atan2(r[0],r[1])},PolynomialBezier.prototype.inflectionPoints=function(){var a=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(a))return[];var r=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/a,n=r*r-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/a;if(n<0)return[];var o=Math.sqrt(n);return floatZero(o)?o>0&&o<1?[r]:[]:[r-o,r+o].filter(function(s){return s>0&&s<1})},PolynomialBezier.prototype.split=function(a){if(a<=0)return[singlePoint(this.points[0]),this];if(a>=1)return[this,singlePoint(this.points[this.points.length-1])];var r=lerpPoint(this.points[0],this.points[1],a),n=lerpPoint(this.points[1],this.points[2],a),o=lerpPoint(this.points[2],this.points[3],a),s=lerpPoint(r,n,a),l=lerpPoint(n,o,a),u=lerpPoint(s,l,a);return[new PolynomialBezier(this.points[0],r,s,u,!0),new PolynomialBezier(u,l,o,this.points[3],!0)]};function extrema(a,r){var n=a.points[0][r],o=a.points[a.points.length-1][r];if(n>o){var s=o;o=n,n=s}for(var l=quadRoots(3*a.a[r],2*a.b[r],a.c[r]),u=0;u<l.length;u+=1)if(l[u]>0&&l[u]<1){var c=a.point(l[u])[r];c<n?n=c:c>o&&(o=c)}return{min:n,max:o}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var a=this.bounds();return{left:a.x.min,right:a.x.max,top:a.y.min,bottom:a.y.max,width:a.x.max-a.x.min,height:a.y.max-a.y.min,cx:(a.x.max+a.x.min)/2,cy:(a.y.max+a.y.min)/2}};function intersectData(a,r,n){var o=a.boundingBox();return{cx:o.cx,cy:o.cy,width:o.width,height:o.height,bez:a,t:(r+n)/2,t1:r,t2:n}}function splitData(a){var r=a.bez.split(.5);return[intersectData(r[0],a.t1,a.t),intersectData(r[1],a.t,a.t2)]}function boxIntersect(a,r){return Math.abs(a.cx-r.cx)*2<a.width+r.width&&Math.abs(a.cy-r.cy)*2<a.height+r.height}function intersectsImpl(a,r,n,o,s,l){if(boxIntersect(a,r)){if(n>=l||a.width<=o&&a.height<=o&&r.width<=o&&r.height<=o){s.push([a.t,r.t]);return}var u=splitData(a),c=splitData(r);intersectsImpl(u[0],c[0],n+1,o,s,l),intersectsImpl(u[0],c[1],n+1,o,s,l),intersectsImpl(u[1],c[0],n+1,o,s,l),intersectsImpl(u[1],c[1],n+1,o,s,l)}}PolynomialBezier.prototype.intersections=function(a,r,n){r===void 0&&(r=2),n===void 0&&(n=7);var o=[];return intersectsImpl(intersectData(this,0,1),intersectData(a,0,1),0,r,o,n),o},PolynomialBezier.shapeSegment=function(a,r){var n=(r+1)%a.length();return new PolynomialBezier(a.v[r],a.o[r],a.i[n],a.v[n],!0)},PolynomialBezier.shapeSegmentInverted=function(a,r){var n=(r+1)%a.length();return new PolynomialBezier(a.v[n],a.i[n],a.o[r],a.v[r],!0)};function crossProduct(a,r){return[a[1]*r[2]-a[2]*r[1],a[2]*r[0]-a[0]*r[2],a[0]*r[1]-a[1]*r[0]]}function lineIntersection(a,r,n,o){var s=[a[0],a[1],1],l=[r[0],r[1],1],u=[n[0],n[1],1],c=[o[0],o[1],1],f=crossProduct(crossProduct(s,l),crossProduct(u,c));return floatZero(f[2])?null:[f[0]/f[2],f[1]/f[2]]}function polarOffset(a,r,n){return[a[0]+Math.cos(r)*n,a[1]-Math.sin(r)*n]}function pointDistance(a,r){return Math.hypot(a[0]-r[0],a[1]-r[1])}function pointEqual(a,r){return floatEqual(a[0],r[0])&&floatEqual(a[1],r[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(a,r){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(a,r.s,0,null,this),this.frequency=PropertyFactory.getProp(a,r.r,0,null,this),this.pointsType=PropertyFactory.getProp(a,r.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(a,r,n,o,s,l,u){var c=n-Math.PI/2,f=n+Math.PI/2,d=r[0]+Math.cos(n)*o*s,v=r[1]-Math.sin(n)*o*s;a.setTripleAt(d,v,d+Math.cos(c)*l,v-Math.sin(c)*l,d+Math.cos(f)*u,v-Math.sin(f)*u,a.length())}function getPerpendicularVector(a,r){var n=[r[0]-a[0],r[1]-a[1]],o=-Math.PI*.5,s=[Math.cos(o)*n[0]-Math.sin(o)*n[1],Math.sin(o)*n[0]+Math.cos(o)*n[1]];return s}function getProjectingAngle(a,r){var n=r===0?a.length()-1:r-1,o=(r+1)%a.length(),s=a.v[n],l=a.v[o],u=getPerpendicularVector(s,l);return Math.atan2(0,1)-Math.atan2(u[1],u[0])}function zigZagCorner(a,r,n,o,s,l,u){var c=getProjectingAngle(r,n),f=r.v[n%r._length],d=r.v[n===0?r._length-1:n-1],v=r.v[(n+1)%r._length],g=l===2?Math.sqrt(Math.pow(f[0]-d[0],2)+Math.pow(f[1]-d[1],2)):0,y=l===2?Math.sqrt(Math.pow(f[0]-v[0],2)+Math.pow(f[1]-v[1],2)):0;setPoint(a,r.v[n%r._length],c,u,o,y/((s+1)*2),g/((s+1)*2))}function zigZagSegment(a,r,n,o,s,l){for(var u=0;u<o;u+=1){var c=(u+1)/(o+1),f=s===2?Math.sqrt(Math.pow(r.points[3][0]-r.points[0][0],2)+Math.pow(r.points[3][1]-r.points[0][1],2)):0,d=r.normalAngle(c),v=r.point(c);setPoint(a,v,d,l,n,f/((o+1)*2),f/((o+1)*2)),l=-l}return l}ZigZagModifier.prototype.processPath=function(a,r,n,o){var s=a._length,l=shapePool.newElement();if(l.c=a.c,a.c||(s-=1),s===0)return l;var u=-1,c=PolynomialBezier.shapeSegment(a,0);zigZagCorner(l,a,0,r,n,o,u);for(var f=0;f<s;f+=1)u=zigZagSegment(l,c,r,n,o,-u),f===s-1&&!a.c?c=null:c=PolynomialBezier.shapeSegment(a,(f+1)%s),zigZagCorner(l,a,f+1,r,n,o,u);return l},ZigZagModifier.prototype.processShapes=function(a){var r,n,o=this.shapes.length,s,l,u=this.amplitude.v,c=Math.max(0,Math.round(this.frequency.v)),f=this.pointsType.v;if(u!==0){var d,v;for(n=0;n<o;n+=1){if(d=this.shapes[n],v=d.localShapeCollection,!(!d.shape._mdf&&!this._mdf&&!a))for(v.releaseShapes(),d.shape._mdf=!0,r=d.shape.paths.shapes,l=d.shape.paths._length,s=0;s<l;s+=1)v.addShape(this.processPath(r[s],u,c,f));d.shape.paths=d.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(a,r,n){var o=Math.atan2(r[0]-a[0],r[1]-a[1]);return[polarOffset(a,o,n),polarOffset(r,o,n)]}function offsetSegment(a,r){var n,o,s,l,u,c,f;f=linearOffset(a.points[0],a.points[1],r),n=f[0],o=f[1],f=linearOffset(a.points[1],a.points[2],r),s=f[0],l=f[1],f=linearOffset(a.points[2],a.points[3],r),u=f[0],c=f[1];var d=lineIntersection(n,o,s,l);d===null&&(d=o);var v=lineIntersection(u,c,s,l);return v===null&&(v=u),new PolynomialBezier(n,d,v,c)}function joinLines(a,r,n,o,s){var l=r.points[3],u=n.points[0];if(o===3||pointEqual(l,u))return l;if(o===2){var c=-r.tangentAngle(1),f=-n.tangentAngle(0)+Math.PI,d=lineIntersection(l,polarOffset(l,c+Math.PI/2,100),u,polarOffset(u,c+Math.PI/2,100)),v=d?pointDistance(d,l):pointDistance(l,u)/2,g=polarOffset(l,c,2*v*roundCorner);return a.setXYAt(g[0],g[1],"o",a.length()-1),g=polarOffset(u,f,2*v*roundCorner),a.setTripleAt(u[0],u[1],u[0],u[1],g[0],g[1],a.length()),u}var y=pointEqual(l,r.points[2])?r.points[0]:r.points[2],_=pointEqual(u,n.points[1])?n.points[3]:n.points[1],S=lineIntersection(y,l,u,_);return S&&pointDistance(S,l)<s?(a.setTripleAt(S[0],S[1],S[0],S[1],S[0],S[1],a.length()),S):l}function getIntersection(a,r){var n=a.intersections(r);return n.length&&floatEqual(n[0][0],1)&&n.shift(),n.length?n[0]:null}function pruneSegmentIntersection(a,r){var n=a.slice(),o=r.slice(),s=getIntersection(a[a.length-1],r[0]);return s&&(n[a.length-1]=a[a.length-1].split(s[0])[0],o[0]=r[0].split(s[1])[1]),a.length>1&&r.length>1&&(s=getIntersection(a[0],r[r.length-1]),s)?[[a[0].split(s[0])[0]],[r[r.length-1].split(s[1])[1]]]:[n,o]}function pruneIntersections(a){for(var r,n=1;n<a.length;n+=1)r=pruneSegmentIntersection(a[n-1],a[n]),a[n-1]=r[0],a[n]=r[1];return a.length>1&&(r=pruneSegmentIntersection(a[a.length-1],a[0]),a[a.length-1]=r[0],a[0]=r[1]),a}function offsetSegmentSplit(a,r){var n=a.inflectionPoints(),o,s,l,u;if(n.length===0)return[offsetSegment(a,r)];if(n.length===1||floatEqual(n[1],1))return l=a.split(n[0]),o=l[0],s=l[1],[offsetSegment(o,r),offsetSegment(s,r)];l=a.split(n[0]),o=l[0];var c=(n[1]-n[0])/(1-n[0]);return l=l[1].split(c),u=l[0],s=l[1],[offsetSegment(o,r),offsetSegment(u,r),offsetSegment(s,r)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(a,r){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(a,r.a,0,null,this),this.miterLimit=PropertyFactory.getProp(a,r.ml,0,null,this),this.lineJoin=r.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(a,r,n,o){var s=shapePool.newElement();s.c=a.c;var l=a.length();a.c||(l-=1);var u,c,f,d=[];for(u=0;u<l;u+=1)f=PolynomialBezier.shapeSegment(a,u),d.push(offsetSegmentSplit(f,r));if(!a.c)for(u=l-1;u>=0;u-=1)f=PolynomialBezier.shapeSegmentInverted(a,u),d.push(offsetSegmentSplit(f,r));d=pruneIntersections(d);var v=null,g=null;for(u=0;u<d.length;u+=1){var y=d[u];for(g&&(v=joinLines(s,g,y[0],n,o)),g=y[y.length-1],c=0;c<y.length;c+=1)f=y[c],v&&pointEqual(f.points[0],v)?s.setXYAt(f.points[1][0],f.points[1][1],"o",s.length()-1):s.setTripleAt(f.points[0][0],f.points[0][1],f.points[1][0],f.points[1][1],f.points[0][0],f.points[0][1],s.length()),s.setTripleAt(f.points[3][0],f.points[3][1],f.points[3][0],f.points[3][1],f.points[2][0],f.points[2][1],s.length()),v=f.points[3]}return d.length&&joinLines(s,g,d[0][0],n,o),s},OffsetPathModifier.prototype.processShapes=function(a){var r,n,o=this.shapes.length,s,l,u=this.amount.v,c=this.miterLimit.v,f=this.lineJoin;if(u!==0){var d,v;for(n=0;n<o;n+=1){if(d=this.shapes[n],v=d.localShapeCollection,!(!d.shape._mdf&&!this._mdf&&!a))for(v.releaseShapes(),d.shape._mdf=!0,r=d.shape.paths.shapes,l=d.shape.paths._length,s=0;s<l;s+=1)v.addShape(this.processPath(r[s],u,f,c));d.shape.paths=d.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(a){for(var r=a.fStyle?a.fStyle.split(" "):[],n="normal",o="normal",s=r.length,l,u=0;u<s;u+=1)switch(l=r[u].toLowerCase(),l){case"italic":o="italic";break;case"bold":n="700";break;case"black":n="900";break;case"medium":n="500";break;case"regular":case"normal":n="400";break;case"light":case"thin":n="200";break}return{style:o,weight:a.fWeight||n}}var FontManager=function(){var a=5e3,r={w:0,size:0,shapes:[],data:{shapes:[]}},n=[];n=n.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var o=127988,s=917631,l=917601,u=917626,c=65039,f=8205,d=127462,v=127487,g=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function y(D){var V=D.split(","),L,N=V.length,U=[];for(L=0;L<N;L+=1)V[L]!=="sans-serif"&&V[L]!=="monospace"&&U.push(V[L]);return U.join(",")}function _(D,V){var L=createTag("span");L.setAttribute("aria-hidden",!0),L.style.fontFamily=V;var N=createTag("span");N.innerText="giItT1WQy@!-/#",L.style.position="absolute",L.style.left="-10000px",L.style.top="-10000px",L.style.fontSize="300px",L.style.fontVariant="normal",L.style.fontStyle="normal",L.style.fontWeight="normal",L.style.letterSpacing="0",L.appendChild(N),document.body.appendChild(L);var U=N.offsetWidth;return N.style.fontFamily=y(D)+", "+V,{node:N,w:U,parent:L}}function S(){var D,V=this.fonts.length,L,N,U=V;for(D=0;D<V;D+=1)this.fonts[D].loaded?U-=1:this.fonts[D].fOrigin==="n"||this.fonts[D].origin===0?this.fonts[D].loaded=!0:(L=this.fonts[D].monoCase.node,N=this.fonts[D].monoCase.w,L.offsetWidth!==N?(U-=1,this.fonts[D].loaded=!0):(L=this.fonts[D].sansCase.node,N=this.fonts[D].sansCase.w,L.offsetWidth!==N&&(U-=1,this.fonts[D].loaded=!0)),this.fonts[D].loaded&&(this.fonts[D].sansCase.parent.parentNode.removeChild(this.fonts[D].sansCase.parent),this.fonts[D].monoCase.parent.parentNode.removeChild(this.fonts[D].monoCase.parent)));U!==0&&Date.now()-this.initTime<a?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function b(D,V){var L=document.body&&V?"svg":"canvas",N,U=getFontProperties(D);if(L==="svg"){var H=createNS("text");H.style.fontSize="100px",H.setAttribute("font-family",D.fFamily),H.setAttribute("font-style",U.style),H.setAttribute("font-weight",U.weight),H.textContent="1",D.fClass?(H.style.fontFamily="inherit",H.setAttribute("class",D.fClass)):H.style.fontFamily=D.fFamily,V.appendChild(H),N=H}else{var q=new OffscreenCanvas(500,500).getContext("2d");q.font=U.style+" "+U.weight+" 100px "+D.fFamily,N=q}function Z(ee){return L==="svg"?(N.textContent=ee,N.getComputedTextLength()):N.measureText(ee).width}return{measureText:Z}}function x(D,V){if(!D){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=D.list;return}if(!document.body){this.isLoaded=!0,D.list.forEach(function(J){J.helper=b(J),J.cache={}}),this.fonts=D.list;return}var L=D.list,N,U=L.length,H=U;for(N=0;N<U;N+=1){var q=!0,Z,ee;if(L[N].loaded=!1,L[N].monoCase=_(L[N].fFamily,"monospace"),L[N].sansCase=_(L[N].fFamily,"sans-serif"),!L[N].fPath)L[N].loaded=!0,H-=1;else if(L[N].fOrigin==="p"||L[N].origin===3){if(Z=document.querySelectorAll('style[f-forigin="p"][f-family="'+L[N].fFamily+'"], style[f-origin="3"][f-family="'+L[N].fFamily+'"]'),Z.length>0&&(q=!1),q){var ne=createTag("style");ne.setAttribute("f-forigin",L[N].fOrigin),ne.setAttribute("f-origin",L[N].origin),ne.setAttribute("f-family",L[N].fFamily),ne.type="text/css",ne.innerText="@font-face {font-family: "+L[N].fFamily+"; font-style: normal; src: url('"+L[N].fPath+"');}",V.appendChild(ne)}}else if(L[N].fOrigin==="g"||L[N].origin===1){for(Z=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),ee=0;ee<Z.length;ee+=1)Z[ee].href.indexOf(L[N].fPath)!==-1&&(q=!1);if(q){var ue=createTag("link");ue.setAttribute("f-forigin",L[N].fOrigin),ue.setAttribute("f-origin",L[N].origin),ue.type="text/css",ue.rel="stylesheet",ue.href=L[N].fPath,document.body.appendChild(ue)}}else if(L[N].fOrigin==="t"||L[N].origin===2){for(Z=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),ee=0;ee<Z.length;ee+=1)L[N].fPath===Z[ee].src&&(q=!1);if(q){var K=createTag("link");K.setAttribute("f-forigin",L[N].fOrigin),K.setAttribute("f-origin",L[N].origin),K.setAttribute("rel","stylesheet"),K.setAttribute("href",L[N].fPath),V.appendChild(K)}}L[N].helper=b(L[N],V),L[N].cache={},this.fonts.push(L[N])}H===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function T(D){if(D){this.chars||(this.chars=[]);var V,L=D.length,N,U=this.chars.length,H;for(V=0;V<L;V+=1){for(N=0,H=!1;N<U;)this.chars[N].style===D[V].style&&this.chars[N].fFamily===D[V].fFamily&&this.chars[N].ch===D[V].ch&&(H=!0),N+=1;H||(this.chars.push(D[V]),U+=1)}}}function A(D,V,L){for(var N=0,U=this.chars.length;N<U;){if(this.chars[N].ch===D&&this.chars[N].style===V&&this.chars[N].fFamily===L)return this.chars[N];N+=1}return(typeof D=="string"&&D.charCodeAt(0)!==13||!D)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",D,V,L)),r}function w(D,V,L){var N=this.getFontByName(V),U=D;if(!N.cache[U]){var H=N.helper;if(D===" "){var q=H.measureText("|"+D+"|"),Z=H.measureText("||");N.cache[U]=(q-Z)/100}else N.cache[U]=H.measureText(D)/100}return N.cache[U]*L}function C(D){for(var V=0,L=this.fonts.length;V<L;){if(this.fonts[V].fName===D)return this.fonts[V];V+=1}return this.fonts[0]}function E(D){var V=0,L=D.charCodeAt(0);if(L>=55296&&L<=56319){var N=D.charCodeAt(1);N>=56320&&N<=57343&&(V=(L-55296)*1024+N-56320+65536)}return V}function P(D,V){var L=D.toString(16)+V.toString(16);return g.indexOf(L)!==-1}function I(D){return D===f}function M(D){return D===c}function R(D){var V=E(D);return V>=d&&V<=v}function O(D){return R(D.substr(0,2))&&R(D.substr(2,2))}function $(D){return n.indexOf(D)!==-1}function B(D,V){var L=E(D.substr(V,2));if(L!==o)return!1;var N=0;for(V+=2;N<5;){if(L=E(D.substr(V,2)),L<l||L>u)return!1;N+=1,V+=2}return E(D.substr(V,2))===s}function F(){this.isLoaded=!0}var z=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};z.isModifier=P,z.isZeroWidthJoiner=I,z.isFlagEmoji=O,z.isRegionalCode=R,z.isCombinedCharacter=$,z.isRegionalFlag=B,z.isVariationSelector=M,z.BLACK_FLAG_CODE_POINT=o;var G={addChars:T,addFonts:x,getCharData:A,getFontByName:C,measureText:w,checkLoadedFonts:S,setIsLoaded:F};return z.prototype=G,z}();function SlotManager(a){this.animationData=a}SlotManager.prototype.getProp=function(a){return this.animationData.slots&&this.animationData.slots[a.sid]?Object.assign(a,this.animationData.slots[a.sid].p):a};function slotFactory(a){return new SlotManager(a)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(r){this.renderableComponents.indexOf(r)===-1&&this.renderableComponents.push(r)},removeRenderableComponent:function(r){this.renderableComponents.indexOf(r)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(r),1)},prepareRenderableFrame:function(r){this.checkLayerLimits(r)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(r){this.data.ip-this.data.st<=r&&this.data.op-this.data.st>r?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var r,n=this.renderableComponents.length;for(r=0;r<n;r+=1)this.renderableComponents[r].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var a={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(r){return a[r]||""}}();function SliderEffect(a,r,n){this.p=PropertyFactory.getProp(r,a.v,0,0,n)}function AngleEffect(a,r,n){this.p=PropertyFactory.getProp(r,a.v,0,0,n)}function ColorEffect(a,r,n){this.p=PropertyFactory.getProp(r,a.v,1,0,n)}function PointEffect(a,r,n){this.p=PropertyFactory.getProp(r,a.v,1,0,n)}function LayerIndexEffect(a,r,n){this.p=PropertyFactory.getProp(r,a.v,0,0,n)}function MaskIndexEffect(a,r,n){this.p=PropertyFactory.getProp(r,a.v,0,0,n)}function CheckboxEffect(a,r,n){this.p=PropertyFactory.getProp(r,a.v,0,0,n)}function NoValueEffect(){this.p={}}function EffectsManager(a,r){var n=a.ef||[];this.effectElements=[];var o,s=n.length,l;for(o=0;o<s;o+=1)l=new GroupEffect(n[o],r),this.effectElements.push(l)}function GroupEffect(a,r){this.init(a,r)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(a,r){this.data=a,this.effectElements=[],this.initDynamicPropertyContainer(r);var n,o=this.data.ef.length,s,l=this.data.ef;for(n=0;n<o;n+=1){switch(s=null,l[n].ty){case 0:s=new SliderEffect(l[n],r,this);break;case 1:s=new AngleEffect(l[n],r,this);break;case 2:s=new ColorEffect(l[n],r,this);break;case 3:s=new PointEffect(l[n],r,this);break;case 4:case 7:s=new CheckboxEffect(l[n],r,this);break;case 10:s=new LayerIndexEffect(l[n],r,this);break;case 11:s=new MaskIndexEffect(l[n],r,this);break;case 5:s=new EffectsManager(l[n],r);break;default:s=new NoValueEffect(l[n]);break}s&&this.effectElements.push(s)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var r=0,n=this.data.masksProperties.length;r<n;){if(this.data.masksProperties[r].mode!=="n"&&this.data.masksProperties[r].cl!==!1)return!0;r+=1}return!1},initExpressions:function(){var r=getExpressionInterfaces();if(r){var n=r("layer"),o=r("effects"),s=r("shape"),l=r("text"),u=r("comp");this.layerInterface=n(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var c=o.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(c),this.data.ty===0||this.data.xt?this.compInterface=u(this):this.data.ty===4?(this.layerInterface.shapeInterface=s(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=l(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var r=getBlendMode(this.data.bm),n=this.baseElement||this.layerElement;n.style["mix-blend-mode"]=r},initBaseData:function(r,n,o){this.globalData=n,this.comp=o,this.data=r,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(r,n){var o,s=this.dynamicProperties.length;for(o=0;o<s;o+=1)(n||this._isParent&&this.dynamicProperties[o].propType==="transform")&&(this.dynamicProperties[o].getValue(),this.dynamicProperties[o]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(r){this.dynamicProperties.indexOf(r)===-1&&this.dynamicProperties.push(r)}};function FootageElement(a,r,n){this.initFrame(),this.initRenderable(),this.assetData=r.getAssetData(a.refId),this.footageData=r.imageLoader.getAsset(this.assetData),this.initBaseData(a,r,n)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var a=getExpressionInterfaces();if(a){var r=a("footage");this.layerInterface=r(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(a,r,n){this.initFrame(),this.initRenderable(),this.assetData=r.getAssetData(a.refId),this.initBaseData(a,r,n),this._isPlaying=!1,this._canPlay=!1;var o=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(o),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=a.tm?PropertyFactory.getProp(this,a.tm,0,r.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,a.au&&a.au.lv?a.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(a){if(this.prepareRenderableFrame(a,!0),this.prepareProperties(a,!0),this.tm._placeholder)this._currentTime=a/this.data.sr;else{var r=this.tm.v;this._currentTime=r}this._volume=this.lv.v[0];var n=this._volume*this._volumeMultiplier;this._previousVolume!==n&&(this._previousVolume=n,this.audio.volume(n))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(a){this.audio.rate(a)},AudioElement.prototype.volume=function(a){this._volumeMultiplier=a,this._previousVolume=a*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(a){var r,n=this.layers.length,o;for(this.completeLayers=!0,r=n-1;r>=0;r-=1)this.elements[r]||(o=this.layers[r],o.ip-o.st<=a-this.layers[r].st&&o.op-o.st>a-this.layers[r].st&&this.buildItem(r)),this.completeLayers=this.elements[r]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(a){switch(a.ty){case 2:return this.createImage(a);case 0:return this.createComp(a);case 1:return this.createSolid(a);case 3:return this.createNull(a);case 4:return this.createShape(a);case 5:return this.createText(a);case 6:return this.createAudio(a);case 13:return this.createCamera(a);case 15:return this.createFootage(a);default:return this.createNull(a)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(a){return new AudioElement(a,this.globalData,this)},BaseRenderer.prototype.createFootage=function(a){return new FootageElement(a,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var a,r=this.layers.length;for(a=0;a<r;a+=1)this.buildItem(a);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(a){this.completeLayers=!1;var r,n=a.length,o,s=this.layers.length;for(r=0;r<n;r+=1)for(o=0;o<s;){if(this.layers[o].id===a[r].id){this.layers[o]=a[r];break}o+=1}},BaseRenderer.prototype.setProjectInterface=function(a){this.globalData.projectInterface=a},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(a,r,n){for(var o=this.elements,s=this.layers,l=0,u=s.length;l<u;)s[l].ind==r&&(!o[l]||o[l]===!0?(this.buildItem(l),this.addPendingElement(a)):(n.push(o[l]),o[l].setAsParent(),s[l].parent!==void 0?this.buildElementParenting(a,s[l].parent,n):a.setHierarchy(n))),l+=1},BaseRenderer.prototype.addPendingElement=function(a){this.pendingElements.push(a)},BaseRenderer.prototype.searchExtraCompositions=function(a){var r,n=a.length;for(r=0;r<n;r+=1)if(a[r].xt){var o=this.createComp(a[r]);o.initExpressions(),this.globalData.projectInterface.registerComposition(o)}},BaseRenderer.prototype.getElementById=function(a){var r,n=this.elements.length;for(r=0;r<n;r+=1)if(this.elements[r].data.ind===a)return this.elements[r];return null},BaseRenderer.prototype.getElementByPath=function(a){var r=a.shift(),n;if(typeof r=="number")n=this.elements[r];else{var o,s=this.elements.length;for(o=0;o<s;o+=1)if(this.elements[o].data.nm===r){n=this.elements[o];break}}return a.length===0?n:n.getElementByPath(a)},BaseRenderer.prototype.setupGlobalData=function(a,r){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(a),this.globalData.fontManager.addChars(a.chars),this.globalData.fontManager.addFonts(a.fonts,r),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=a.fr,this.globalData.nm=a.nm,this.globalData.compSize={w:a.w,h:a.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var r=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:r,localMat:r,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var r,n=this.finalTransform.mat,o=0,s=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;o<s;){if(this.hierarchy[o].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}o+=1}if(this.finalTransform._matMdf)for(r=this.finalTransform.mProp.v.props,n.cloneFromProps(r),o=0;o<s;o+=1)n.multiply(this.hierarchy[o].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var r=0,n=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;r<n;)this.localTransforms[r]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[r]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),r+=1;if(this.finalTransform._localMatMdf){var o=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(o),r=1;r<n;r+=1){var s=this.localTransforms[r].matrix;o.multiply(s)}o.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var l=this.finalTransform.localOpacity;for(r=0;r<n;r+=1)l*=this.localTransforms[r].opacity*.01;this.finalTransform.localOpacity=l}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var r=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(r.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var n=0,o=r.length;for(n=0;n<o;n+=1)this.localTransforms.push(r[n])}}},globalToLocal:function(r){var n=[];n.push(this.finalTransform);for(var o=!0,s=this.comp;o;)s.finalTransform?(s.data.hasMask&&n.splice(0,0,s.finalTransform),s=s.comp):o=!1;var l,u=n.length,c;for(l=0;l<u;l+=1)c=n[l].mat.applyToPointArray(0,0,0),r=[r[0]-c[0],r[1]-c[1],0];return r},mHelper:new Matrix};function MaskElement(a,r,n){this.data=a,this.element=r,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var o=this.globalData.defs,s,l=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(l),this.solidPath="";var u,c=this.masksProperties,f=0,d=[],v,g,y=createElementID(),_,S,b,x,T="clipPath",A="clip-path";for(s=0;s<l;s+=1)if((c[s].mode!=="a"&&c[s].mode!=="n"||c[s].inv||c[s].o.k!==100||c[s].o.x)&&(T="mask",A="mask"),(c[s].mode==="s"||c[s].mode==="i")&&f===0?(_=createNS("rect"),_.setAttribute("fill","#ffffff"),_.setAttribute("width",this.element.comp.data.w||0),_.setAttribute("height",this.element.comp.data.h||0),d.push(_)):_=null,u=createNS("path"),c[s].mode==="n")this.viewData[s]={op:PropertyFactory.getProp(this.element,c[s].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,c[s],3),elem:u,lastPath:""},o.appendChild(u);else{f+=1,u.setAttribute("fill",c[s].mode==="s"?"#000000":"#ffffff"),u.setAttribute("clip-rule","nonzero");var w;if(c[s].x.k!==0?(T="mask",A="mask",x=PropertyFactory.getProp(this.element,c[s].x,0,null,this.element),w=createElementID(),S=createNS("filter"),S.setAttribute("id",w),b=createNS("feMorphology"),b.setAttribute("operator","erode"),b.setAttribute("in","SourceGraphic"),b.setAttribute("radius","0"),S.appendChild(b),o.appendChild(S),u.setAttribute("stroke",c[s].mode==="s"?"#000000":"#ffffff")):(b=null,x=null),this.storedData[s]={elem:u,x,expan:b,lastPath:"",lastOperator:"",filterId:w,lastRadius:0},c[s].mode==="i"){g=d.length;var C=createNS("g");for(v=0;v<g;v+=1)C.appendChild(d[v]);var E=createNS("mask");E.setAttribute("mask-type","alpha"),E.setAttribute("id",y+"_"+f),E.appendChild(u),o.appendChild(E),C.setAttribute("mask","url("+getLocationHref()+"#"+y+"_"+f+")"),d.length=0,d.push(C)}else d.push(u);c[s].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[s]={elem:u,lastPath:"",op:PropertyFactory.getProp(this.element,c[s].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,c[s],3),invRect:_},this.viewData[s].prop.k||this.drawPath(c[s],this.viewData[s].prop.v,this.viewData[s])}for(this.maskElement=createNS(T),l=d.length,s=0;s<l;s+=1)this.maskElement.appendChild(d[s]);f>0&&(this.maskElement.setAttribute("id",y),this.element.maskedElement.setAttribute(A,"url("+getLocationHref()+"#"+y+")"),o.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(a){return this.viewData[a].prop},MaskElement.prototype.renderFrame=function(a){var r=this.element.finalTransform.mat,n,o=this.masksProperties.length;for(n=0;n<o;n+=1)if((this.viewData[n].prop._mdf||a)&&this.drawPath(this.masksProperties[n],this.viewData[n].prop.v,this.viewData[n]),(this.viewData[n].op._mdf||a)&&this.viewData[n].elem.setAttribute("fill-opacity",this.viewData[n].op.v),this.masksProperties[n].mode!=="n"&&(this.viewData[n].invRect&&(this.element.finalTransform.mProp._mdf||a)&&this.viewData[n].invRect.setAttribute("transform",r.getInverseMatrix().to2dCSS()),this.storedData[n].x&&(this.storedData[n].x._mdf||a))){var s=this.storedData[n].expan;this.storedData[n].x.v<0?(this.storedData[n].lastOperator!=="erode"&&(this.storedData[n].lastOperator="erode",this.storedData[n].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[n].filterId+")")),s.setAttribute("radius",-this.storedData[n].x.v)):(this.storedData[n].lastOperator!=="dilate"&&(this.storedData[n].lastOperator="dilate",this.storedData[n].elem.setAttribute("filter",null)),this.storedData[n].elem.setAttribute("stroke-width",this.storedData[n].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var a="M0,0 ";return a+=" h"+this.globalData.compSize.w,a+=" v"+this.globalData.compSize.h,a+=" h-"+this.globalData.compSize.w,a+=" v-"+this.globalData.compSize.h+" ",a},MaskElement.prototype.drawPath=function(a,r,n){var o=" M"+r.v[0][0]+","+r.v[0][1],s,l;for(l=r._length,s=1;s<l;s+=1)o+=" C"+r.o[s-1][0]+","+r.o[s-1][1]+" "+r.i[s][0]+","+r.i[s][1]+" "+r.v[s][0]+","+r.v[s][1];if(r.c&&l>1&&(o+=" C"+r.o[s-1][0]+","+r.o[s-1][1]+" "+r.i[0][0]+","+r.i[0][1]+" "+r.v[0][0]+","+r.v[0][1]),n.lastPath!==o){var u="";n.elem&&(r.c&&(u=a.inv?this.solidPath+o:o),n.elem.setAttribute("d",u)),n.lastPath=o}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var a={};a.createFilter=r,a.createAlphaToLuminanceFilter=n;function r(o,s){var l=createNS("filter");return l.setAttribute("id",o),s!==!0&&(l.setAttribute("filterUnits","objectBoundingBox"),l.setAttribute("x","0%"),l.setAttribute("y","0%"),l.setAttribute("width","100%"),l.setAttribute("height","100%")),l}function n(){var o=createNS("feColorMatrix");return o.setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),o}return a}(),featureSupport=function(){var a={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(a.maskType=!1),/firefox/i.test(navigator.userAgent)&&(a.svgLumaHidden=!1),a}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(a){var r,n="SourceGraphic",o=a.data.ef?a.data.ef.length:0,s=createElementID(),l=filtersFactory.createFilter(s,!0),u=0;this.filters=[];var c;for(r=0;r<o;r+=1){c=null;var f=a.data.ef[r].ty;if(registeredEffects$1[f]){var d=registeredEffects$1[f].effect;c=new d(l,a.effectsManager.effectElements[r],a,idPrefix+u,n),n=idPrefix+u,registeredEffects$1[f].countsAsEffect&&(u+=1)}c&&this.filters.push(c)}u&&(a.globalData.defs.appendChild(l),a.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+s+")")),this.filters.length&&a.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(a){var r,n=this.filters.length;for(r=0;r<n;r+=1)this.filters[r].renderFrame(a)},SVGEffects.prototype.getEffects=function(a){var r,n=this.filters.length,o=[];for(r=0;r<n;r+=1)this.filters[r].type===a&&o.push(this.filters[r]);return o};function registerEffect$1(a,r,n){registeredEffects$1[a]={effect:r,countsAsEffect:n}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var r=null;if(this.data.td){this.matteMasks={};var n=createNS("g");n.setAttribute("id",this.layerId),n.appendChild(this.layerElement),r=n,this.globalData.defs.appendChild(n)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),r=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var o=createNS("clipPath"),s=createNS("path");s.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var l=createElementID();if(o.setAttribute("id",l),o.appendChild(s),this.globalData.defs.appendChild(o),this.checkMasks()){var u=createNS("g");u.setAttribute("clip-path","url("+getLocationHref()+"#"+l+")"),u.appendChild(this.layerElement),this.transformedElement=u,r?r.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+l+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(r){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[r]){var n=this.layerId+"_"+r,o,s,l,u;if(r===1||r===3){var c=createNS("mask");c.setAttribute("id",n),c.setAttribute("mask-type",r===3?"luminance":"alpha"),l=createNS("use"),l.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),c.appendChild(l),this.globalData.defs.appendChild(c),!featureSupport.maskType&&r===1&&(c.setAttribute("mask-type","luminance"),o=createElementID(),s=filtersFactory.createFilter(o),this.globalData.defs.appendChild(s),s.appendChild(filtersFactory.createAlphaToLuminanceFilter()),u=createNS("g"),u.appendChild(l),c.appendChild(u),u.setAttribute("filter","url("+getLocationHref()+"#"+o+")"))}else if(r===2){var f=createNS("mask");f.setAttribute("id",n),f.setAttribute("mask-type","alpha");var d=createNS("g");f.appendChild(d),o=createElementID(),s=filtersFactory.createFilter(o);var v=createNS("feComponentTransfer");v.setAttribute("in","SourceGraphic"),s.appendChild(v);var g=createNS("feFuncA");g.setAttribute("type","table"),g.setAttribute("tableValues","1.0 0.0"),v.appendChild(g),this.globalData.defs.appendChild(s);var y=createNS("rect");y.setAttribute("width",this.comp.data.w),y.setAttribute("height",this.comp.data.h),y.setAttribute("x","0"),y.setAttribute("y","0"),y.setAttribute("fill","#ffffff"),y.setAttribute("opacity","0"),d.setAttribute("filter","url("+getLocationHref()+"#"+o+")"),d.appendChild(y),l=createNS("use"),l.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),d.appendChild(l),featureSupport.maskType||(f.setAttribute("mask-type","luminance"),s.appendChild(filtersFactory.createAlphaToLuminanceFilter()),u=createNS("g"),d.appendChild(y),u.appendChild(this.layerElement),d.appendChild(u)),this.globalData.defs.appendChild(f)}this.matteMasks[r]=n}return this.matteMasks[r]},setMatte:function(r){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+r+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(r){this.hierarchy=r},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var a={initElement:function(n,o,s){this.initFrame(),this.initBaseData(n,o,s),this.initTransform(n,o,s),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var n=this.baseElement||this.layerElement;n.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var n=this.baseElement||this.layerElement;n.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(n){this._mdf=!1,this.prepareRenderableFrame(n),this.prepareProperties(n,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(a)],RenderableDOMElement)})();function IImageElement(a,r,n){this.assetData=r.getAssetData(a.refId),this.assetData&&this.assetData.sid&&(this.assetData=r.slotManager.getProp(this.assetData)),this.initElement(a,r,n),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var a=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",a),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(a,r){this.elem=a,this.pos=r}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(r){var n,o=this.shapeModifiers.length;for(n=0;n<o;n+=1)this.shapeModifiers[n].addShape(r)},isShapeInAnimatedModifiers:function(r){for(var n=0,o=this.shapeModifiers.length;n<o;)if(this.shapeModifiers[n].isAnimatedWithShape(r))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var r,n=this.shapes.length;for(r=0;r<n;r+=1)this.shapes[r].sh.reset();n=this.shapeModifiers.length;var o;for(r=n-1;r>=0&&(o=this.shapeModifiers[r].processShapes(this._isFirstFrame),!o);r-=1);}},searchProcessedElement:function(r){for(var n=this.processedElements,o=0,s=n.length;o<s;){if(n[o].elem===r)return n[o].pos;o+=1}return 0},addProcessedElement:function(r,n){for(var o=this.processedElements,s=o.length;s;)if(s-=1,o[s].elem===r){o[s].pos=n;return}o.push(new ProcessedElement(r,n))},prepareFrame:function(r){this.prepareRenderableFrame(r),this.prepareProperties(r,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(a,r,n){this.caches=[],this.styles=[],this.transformers=a,this.lStr="",this.sh=n,this.lvl=r,this._isAnimated=!!n.k;for(var o=0,s=a.length;o<s;){if(a[o].mProps.dynamicProperties.length){this._isAnimated=!0;break}o+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(a,r){this.data=a,this.type=a.ty,this.d="",this.lvl=r,this._mdf=!1,this.closed=a.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(a,r,n,o){this.elem=a,this.frameId=-1,this.dataProps=createSizedArray(r.length),this.renderer=n,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",r.length?r.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(o);var s,l=r.length||0,u;for(s=0;s<l;s+=1)u=PropertyFactory.getProp(a,r[s].v,0,0,this),this.k=u.k||this.k,this.dataProps[s]={n:r[s].n,p:u};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(a){if(!(this.elem.globalData.frameId===this.frameId&&!a)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||a,this._mdf)){var r=0,n=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),r=0;r<n;r+=1)this.dataProps[r].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[r].p.v:this.dashArray[r]=this.dataProps[r].p.v:this.dashoffset[0]=this.dataProps[r].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(a,r,n){this.initDynamicPropertyContainer(a),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(a,r.o,0,.01,this),this.w=PropertyFactory.getProp(a,r.w,0,null,this),this.d=new DashProperty(a,r.d||{},"svg",this),this.c=PropertyFactory.getProp(a,r.c,1,255,this),this.style=n,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(a,r,n){this.initDynamicPropertyContainer(a),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(a,r.o,0,.01,this),this.c=PropertyFactory.getProp(a,r.c,1,255,this),this.style=n}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(a,r,n){this.initDynamicPropertyContainer(a),this.getValue=this.iterateDynamicProperties,this.style=n}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(a,r,n){this.data=r,this.c=createTypedArray("uint8c",r.p*4);var o=r.k.k[0].s?r.k.k[0].s.length-r.p*4:r.k.k.length-r.p*4;this.o=createTypedArray("float32",o),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=o,this.initDynamicPropertyContainer(n),this.prop=PropertyFactory.getProp(a,r.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(a,r){for(var n=0,o=this.o.length/2,s;n<o;){if(s=Math.abs(a[n*4]-a[r*4+n*2]),s>.01)return!1;n+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var a=0,r=this.data.k.k.length;a<r;){if(!this.comparePoints(this.data.k.k[a].s,this.data.p))return!1;a+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(a){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||a){var r,n=this.data.p*4,o,s;for(r=0;r<n;r+=1)o=r%4===0?100:255,s=Math.round(this.prop.v[r]*o),this.c[r]!==s&&(this.c[r]=s,this._cmdf=!a);if(this.o.length)for(n=this.prop.v.length,r=this.data.p*4;r<n;r+=1)o=r%2===0?100:1,s=r%2===0?Math.round(this.prop.v[r]*100):this.prop.v[r],this.o[r-this.data.p*4]!==s&&(this.o[r-this.data.p*4]=s,this._omdf=!a);this._mdf=!a}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(a,r,n){this.initDynamicPropertyContainer(a),this.getValue=this.iterateDynamicProperties,this.initGradientData(a,r,n)}SVGGradientFillStyleData.prototype.initGradientData=function(a,r,n){this.o=PropertyFactory.getProp(a,r.o,0,.01,this),this.s=PropertyFactory.getProp(a,r.s,1,null,this),this.e=PropertyFactory.getProp(a,r.e,1,null,this),this.h=PropertyFactory.getProp(a,r.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(a,r.a||{k:0},0,degToRads,this),this.g=new GradientProperty(a,r.g,this),this.style=n,this.stops=[],this.setGradientData(n.pElem,r),this.setGradientOpacity(r,n),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(a,r){var n=createElementID(),o=createNS(r.t===1?"linearGradient":"radialGradient");o.setAttribute("id",n),o.setAttribute("spreadMethod","pad"),o.setAttribute("gradientUnits","userSpaceOnUse");var s=[],l,u,c;for(c=r.g.p*4,u=0;u<c;u+=4)l=createNS("stop"),o.appendChild(l),s.push(l);a.setAttribute(r.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+n+")"),this.gf=o,this.cst=s},SVGGradientFillStyleData.prototype.setGradientOpacity=function(a,r){if(this.g._hasOpacity&&!this.g._collapsable){var n,o,s,l=createNS("mask"),u=createNS("path");l.appendChild(u);var c=createElementID(),f=createElementID();l.setAttribute("id",f);var d=createNS(a.t===1?"linearGradient":"radialGradient");d.setAttribute("id",c),d.setAttribute("spreadMethod","pad"),d.setAttribute("gradientUnits","userSpaceOnUse"),s=a.g.k.k[0].s?a.g.k.k[0].s.length:a.g.k.k.length;var v=this.stops;for(o=a.g.p*4;o<s;o+=2)n=createNS("stop"),n.setAttribute("stop-color","rgb(255,255,255)"),d.appendChild(n),v.push(n);u.setAttribute(a.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+c+")"),a.ty==="gs"&&(u.setAttribute("stroke-linecap",lineCapEnum[a.lc||2]),u.setAttribute("stroke-linejoin",lineJoinEnum[a.lj||2]),a.lj===1&&u.setAttribute("stroke-miterlimit",a.ml)),this.of=d,this.ms=l,this.ost=v,this.maskId=f,r.msElem=u}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(a,r,n){this.initDynamicPropertyContainer(a),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(a,r.w,0,null,this),this.d=new DashProperty(a,r.d||{},"svg",this),this.initGradientData(a,r,n),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(a,r,n){this.transform={mProps:a,op:r,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(r,n,o,s){if(n===0)return"";var l=r.o,u=r.i,c=r.v,f,d=" M"+s.applyToPointStringified(c[0][0],c[0][1]);for(f=1;f<n;f+=1)d+=" C"+s.applyToPointStringified(l[f-1][0],l[f-1][1])+" "+s.applyToPointStringified(u[f][0],u[f][1])+" "+s.applyToPointStringified(c[f][0],c[f][1]);return o&&n&&(d+=" C"+s.applyToPointStringified(l[f-1][0],l[f-1][1])+" "+s.applyToPointStringified(u[0][0],u[0][1])+" "+s.applyToPointStringified(c[0][0],c[0][1]),d+="z"),d},SVGElementsRenderer=function(){var a=new Matrix,r=new Matrix,n={createRenderFunction:o};function o(g){switch(g.ty){case"fl":return c;case"gf":return d;case"gs":return f;case"st":return v;case"sh":case"el":case"rc":case"sr":return u;case"tr":return s;case"no":return l;default:return null}}function s(g,y,_){(_||y.transform.op._mdf)&&y.transform.container.setAttribute("opacity",y.transform.op.v),(_||y.transform.mProps._mdf)&&y.transform.container.setAttribute("transform",y.transform.mProps.v.to2dCSS())}function l(){}function u(g,y,_){var S,b,x,T,A,w,C=y.styles.length,E=y.lvl,P,I,M,R;for(w=0;w<C;w+=1){if(T=y.sh._mdf||_,y.styles[w].lvl<E){for(I=r.reset(),M=E-y.styles[w].lvl,R=y.transformers.length-1;!T&&M>0;)T=y.transformers[R].mProps._mdf||T,M-=1,R-=1;if(T)for(M=E-y.styles[w].lvl,R=y.transformers.length-1;M>0;)I.multiply(y.transformers[R].mProps.v),M-=1,R-=1}else I=a;if(P=y.sh.paths,b=P._length,T){for(x="",S=0;S<b;S+=1)A=P.shapes[S],A&&A._length&&(x+=buildShapeString(A,A._length,A.c,I));y.caches[w]=x}else x=y.caches[w];y.styles[w].d+=g.hd===!0?"":x,y.styles[w]._mdf=T||y.styles[w]._mdf}}function c(g,y,_){var S=y.style;(y.c._mdf||_)&&S.pElem.setAttribute("fill","rgb("+bmFloor(y.c.v[0])+","+bmFloor(y.c.v[1])+","+bmFloor(y.c.v[2])+")"),(y.o._mdf||_)&&S.pElem.setAttribute("fill-opacity",y.o.v)}function f(g,y,_){d(g,y,_),v(g,y,_)}function d(g,y,_){var S=y.gf,b=y.g._hasOpacity,x=y.s.v,T=y.e.v;if(y.o._mdf||_){var A=g.ty==="gf"?"fill-opacity":"stroke-opacity";y.style.pElem.setAttribute(A,y.o.v)}if(y.s._mdf||_){var w=g.t===1?"x1":"cx",C=w==="x1"?"y1":"cy";S.setAttribute(w,x[0]),S.setAttribute(C,x[1]),b&&!y.g._collapsable&&(y.of.setAttribute(w,x[0]),y.of.setAttribute(C,x[1]))}var E,P,I,M;if(y.g._cmdf||_){E=y.cst;var R=y.g.c;for(I=E.length,P=0;P<I;P+=1)M=E[P],M.setAttribute("offset",R[P*4]+"%"),M.setAttribute("stop-color","rgb("+R[P*4+1]+","+R[P*4+2]+","+R[P*4+3]+")")}if(b&&(y.g._omdf||_)){var O=y.g.o;for(y.g._collapsable?E=y.cst:E=y.ost,I=E.length,P=0;P<I;P+=1)M=E[P],y.g._collapsable||M.setAttribute("offset",O[P*2]+"%"),M.setAttribute("stop-opacity",O[P*2+1])}if(g.t===1)(y.e._mdf||_)&&(S.setAttribute("x2",T[0]),S.setAttribute("y2",T[1]),b&&!y.g._collapsable&&(y.of.setAttribute("x2",T[0]),y.of.setAttribute("y2",T[1])));else{var $;if((y.s._mdf||y.e._mdf||_)&&($=Math.sqrt(Math.pow(x[0]-T[0],2)+Math.pow(x[1]-T[1],2)),S.setAttribute("r",$),b&&!y.g._collapsable&&y.of.setAttribute("r",$)),y.e._mdf||y.h._mdf||y.a._mdf||_){$||($=Math.sqrt(Math.pow(x[0]-T[0],2)+Math.pow(x[1]-T[1],2)));var B=Math.atan2(T[1]-x[1],T[0]-x[0]),F=y.h.v;F>=1?F=.99:F<=-1&&(F=-.99);var z=$*F,G=Math.cos(B+y.a.v)*z+x[0],D=Math.sin(B+y.a.v)*z+x[1];S.setAttribute("fx",G),S.setAttribute("fy",D),b&&!y.g._collapsable&&(y.of.setAttribute("fx",G),y.of.setAttribute("fy",D))}}}function v(g,y,_){var S=y.style,b=y.d;b&&(b._mdf||_)&&b.dashStr&&(S.pElem.setAttribute("stroke-dasharray",b.dashStr),S.pElem.setAttribute("stroke-dashoffset",b.dashoffset[0])),y.c&&(y.c._mdf||_)&&S.pElem.setAttribute("stroke","rgb("+bmFloor(y.c.v[0])+","+bmFloor(y.c.v[1])+","+bmFloor(y.c.v[2])+")"),(y.o._mdf||_)&&S.pElem.setAttribute("stroke-opacity",y.o.v),(y.w._mdf||_)&&(S.pElem.setAttribute("stroke-width",y.w.v),S.msElem&&S.msElem.setAttribute("stroke-width",y.w.v))}return n}();function SVGShapeElement(a,r,n){this.shapes=[],this.shapesData=a.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(a,r,n),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var a,r=this.shapes.length,n,o,s=this.stylesList.length,l,u=[],c=!1;for(o=0;o<s;o+=1){for(l=this.stylesList[o],c=!1,u.length=0,a=0;a<r;a+=1)n=this.shapes[a],n.styles.indexOf(l)!==-1&&(u.push(n),c=n._isAnimated||c);u.length>1&&c&&this.setShapesAsAnimated(u)}},SVGShapeElement.prototype.setShapesAsAnimated=function(a){var r,n=a.length;for(r=0;r<n;r+=1)a[r].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(a,r){var n,o=new SVGStyleData(a,r),s=o.pElem;if(a.ty==="st")n=new SVGStrokeStyleData(this,a,o);else if(a.ty==="fl")n=new SVGFillStyleData(this,a,o);else if(a.ty==="gf"||a.ty==="gs"){var l=a.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;n=new l(this,a,o),this.globalData.defs.appendChild(n.gf),n.maskId&&(this.globalData.defs.appendChild(n.ms),this.globalData.defs.appendChild(n.of),s.setAttribute("mask","url("+getLocationHref()+"#"+n.maskId+")"))}else a.ty==="no"&&(n=new SVGNoStyleData(this,a,o));return(a.ty==="st"||a.ty==="gs")&&(s.setAttribute("stroke-linecap",lineCapEnum[a.lc||2]),s.setAttribute("stroke-linejoin",lineJoinEnum[a.lj||2]),s.setAttribute("fill-opacity","0"),a.lj===1&&s.setAttribute("stroke-miterlimit",a.ml)),a.r===2&&s.setAttribute("fill-rule","evenodd"),a.ln&&s.setAttribute("id",a.ln),a.cl&&s.setAttribute("class",a.cl),a.bm&&(s.style["mix-blend-mode"]=getBlendMode(a.bm)),this.stylesList.push(o),this.addToAnimatedContents(a,n),n},SVGShapeElement.prototype.createGroupElement=function(a){var r=new ShapeGroupData;return a.ln&&r.gr.setAttribute("id",a.ln),a.cl&&r.gr.setAttribute("class",a.cl),a.bm&&(r.gr.style["mix-blend-mode"]=getBlendMode(a.bm)),r},SVGShapeElement.prototype.createTransformElement=function(a,r){var n=TransformPropertyFactory.getTransformProperty(this,a,this),o=new SVGTransformData(n,n.o,r);return this.addToAnimatedContents(a,o),o},SVGShapeElement.prototype.createShapeElement=function(a,r,n){var o=4;a.ty==="rc"?o=5:a.ty==="el"?o=6:a.ty==="sr"&&(o=7);var s=ShapePropertyFactory.getShapeProp(this,a,o,this),l=new SVGShapeData(r,n,s);return this.shapes.push(l),this.addShapeToModifiers(l),this.addToAnimatedContents(a,l),l},SVGShapeElement.prototype.addToAnimatedContents=function(a,r){for(var n=0,o=this.animatedContents.length;n<o;){if(this.animatedContents[n].element===r)return;n+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(a),element:r,data:a})},SVGShapeElement.prototype.setElementStyles=function(a){var r=a.styles,n,o=this.stylesList.length;for(n=0;n<o;n+=1)this.stylesList[n].closed||r.push(this.stylesList[n])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var a,r=this.itemsData.length;for(a=0;a<r;a+=1)this.prevViewData[a]=this.itemsData[a];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),r=this.dynamicProperties.length,a=0;a<r;a+=1)this.dynamicProperties[a].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(a,r,n,o,s,l,u){var c=[].concat(l),f,d=a.length-1,v,g,y=[],_=[],S,b,x;for(f=d;f>=0;f-=1){if(x=this.searchProcessedElement(a[f]),x?r[f]=n[x-1]:a[f]._render=u,a[f].ty==="fl"||a[f].ty==="st"||a[f].ty==="gf"||a[f].ty==="gs"||a[f].ty==="no")x?r[f].style.closed=!1:r[f]=this.createStyleElement(a[f],s),a[f]._render&&r[f].style.pElem.parentNode!==o&&o.appendChild(r[f].style.pElem),y.push(r[f].style);else if(a[f].ty==="gr"){if(!x)r[f]=this.createGroupElement(a[f]);else for(g=r[f].it.length,v=0;v<g;v+=1)r[f].prevViewData[v]=r[f].it[v];this.searchShapes(a[f].it,r[f].it,r[f].prevViewData,r[f].gr,s+1,c,u),a[f]._render&&r[f].gr.parentNode!==o&&o.appendChild(r[f].gr)}else a[f].ty==="tr"?(x||(r[f]=this.createTransformElement(a[f],o)),S=r[f].transform,c.push(S)):a[f].ty==="sh"||a[f].ty==="rc"||a[f].ty==="el"||a[f].ty==="sr"?(x||(r[f]=this.createShapeElement(a[f],c,s)),this.setElementStyles(r[f])):a[f].ty==="tm"||a[f].ty==="rd"||a[f].ty==="ms"||a[f].ty==="pb"||a[f].ty==="zz"||a[f].ty==="op"?(x?(b=r[f],b.closed=!1):(b=ShapeModifiers.getModifier(a[f].ty),b.init(this,a[f]),r[f]=b,this.shapeModifiers.push(b)),_.push(b)):a[f].ty==="rp"&&(x?(b=r[f],b.closed=!0):(b=ShapeModifiers.getModifier(a[f].ty),r[f]=b,b.init(this,a,f,r),this.shapeModifiers.push(b),u=!1),_.push(b));this.addProcessedElement(a[f],f+1)}for(d=y.length,f=0;f<d;f+=1)y[f].closed=!0;for(d=_.length,f=0;f<d;f+=1)_[f].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var a,r=this.stylesList.length;for(a=0;a<r;a+=1)this.stylesList[a].reset();for(this.renderShape(),a=0;a<r;a+=1)(this.stylesList[a]._mdf||this._isFirstFrame)&&(this.stylesList[a].msElem&&(this.stylesList[a].msElem.setAttribute("d",this.stylesList[a].d),this.stylesList[a].d="M0 0"+this.stylesList[a].d),this.stylesList[a].pElem.setAttribute("d",this.stylesList[a].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var a,r=this.animatedContents.length,n;for(a=0;a<r;a+=1)n=this.animatedContents[a],(this._isFirstFrame||n.element._isAnimated)&&n.data!==!0&&n.fn(n.data,n.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(a,r,n,o,s,l){this.o=a,this.sw=r,this.sc=n,this.fc=o,this.m=s,this.p=l,this._mdf={o:!0,sw:!!r,sc:!!n,fc:!!o,m:!0,p:!0}}LetterProps.prototype.update=function(a,r,n,o,s,l){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var u=!1;return this.o!==a&&(this.o=a,this._mdf.o=!0,u=!0),this.sw!==r&&(this.sw=r,this._mdf.sw=!0,u=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,u=!0),this.fc!==o&&(this.fc=o,this._mdf.fc=!0,u=!0),this.m!==s&&(this.m=s,this._mdf.m=!0,u=!0),l.length&&(this.p[0]!==l[0]||this.p[1]!==l[1]||this.p[4]!==l[4]||this.p[5]!==l[5]||this.p[12]!==l[12]||this.p[13]!==l[13])&&(this.p=l,this._mdf.p=!0,u=!0),u};function TextProperty(a,r){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,r.d&&r.d.sid&&(r.d=a.globalData.slotManager.getProp(r.d)),this.data=r,this.elem=a,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(a,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},TextProperty.prototype.setCurrentData=function(a){a.__complete||this.completeTextData(a),this.currentData=a,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(a){this.effectsSequence.push(a),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(a){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!a)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var r=this.currentData,n=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var o,s=this.effectsSequence.length,l=a||this.data.d.k[this.keysIndex].s;for(o=0;o<s;o+=1)n!==this.keysIndex?l=this.effectsSequence[o](l,l.t):l=this.effectsSequence[o](this.currentData,l.t);r!==l&&this.setCurrentData(l),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var a=this.data.d.k,r=this.elem.comp.renderedFrame,n=0,o=a.length;n<=o-1&&!(n===o-1||a[n+1].t>r);)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(a){for(var r=[],n=0,o=a.length,s,l,u=!1,c=!1,f="";n<o;)u=c,c=!1,s=a.charCodeAt(n),f=a.charAt(n),FontManager.isCombinedCharacter(s)?u=!0:s>=55296&&s<=56319?FontManager.isRegionalFlag(a,n)?f=a.substr(n,14):(l=a.charCodeAt(n+1),l>=56320&&l<=57343&&(FontManager.isModifier(s,l)?(f=a.substr(n,2),u=!0):FontManager.isFlagEmoji(a.substr(n,4))?f=a.substr(n,4):f=a.substr(n,2))):s>56319?(l=a.charCodeAt(n+1),FontManager.isVariationSelector(s)&&(u=!0)):FontManager.isZeroWidthJoiner(s)&&(u=!0,c=!0),u?(r[r.length-1]+=f,u=!1):r.push(f),n+=f.length;return r},TextProperty.prototype.completeTextData=function(a){a.__complete=!0;var r=this.elem.globalData.fontManager,n=this.data,o=[],s,l,u,c=0,f,d=n.m.g,v=0,g=0,y=0,_=[],S=0,b=0,x,T,A=r.getFontByName(a.f),w,C=0,E=getFontProperties(A);a.fWeight=E.weight,a.fStyle=E.style,a.finalSize=a.s,a.finalText=this.buildFinalText(a.t),l=a.finalText.length,a.finalLineHeight=a.lh;var P=a.tr/1e3*a.finalSize,I;if(a.sz)for(var M=!0,R=a.sz[0],O=a.sz[1],$,B;M;){B=this.buildFinalText(a.t),$=0,S=0,l=B.length,P=a.tr/1e3*a.finalSize;var F=-1;for(s=0;s<l;s+=1)I=B[s].charCodeAt(0),u=!1,B[s]===" "?F=s:(I===13||I===3)&&(S=0,u=!0,$+=a.finalLineHeight||a.finalSize*1.2),r.chars?(w=r.getCharData(B[s],A.fStyle,A.fFamily),C=u?0:w.w*a.finalSize/100):C=r.measureText(B[s],a.f,a.finalSize),S+C>R&&B[s]!==" "?(F===-1?l+=1:s=F,$+=a.finalLineHeight||a.finalSize*1.2,B.splice(s,F===s?1:0,"\r"),F=-1,S=0):(S+=C,S+=P);$+=A.ascent*a.finalSize/100,this.canResize&&a.finalSize>this.minimumFontSize&&O<$?(a.finalSize-=1,a.finalLineHeight=a.finalSize*a.lh/a.s):(a.finalText=B,l=a.finalText.length,M=!1)}S=-P,C=0;var z=0,G;for(s=0;s<l;s+=1)if(u=!1,G=a.finalText[s],I=G.charCodeAt(0),I===13||I===3?(z=0,_.push(S),b=S>b?S:b,S=-2*P,f="",u=!0,y+=1):f=G,r.chars?(w=r.getCharData(G,A.fStyle,r.getFontByName(a.f).fFamily),C=u?0:w.w*a.finalSize/100):C=r.measureText(f,a.f,a.finalSize),G===" "?z+=C+P:(S+=C+P+z,z=0),o.push({l:C,an:C,add:v,n:u,anIndexes:[],val:f,line:y,animatorJustifyOffset:0}),d==2){if(v+=C,f===""||f===" "||s===l-1){for((f===""||f===" ")&&(v-=C);g<=s;)o[g].an=v,o[g].ind=c,o[g].extra=C,g+=1;c+=1,v=0}}else if(d==3){if(v+=C,f===""||s===l-1){for(f===""&&(v-=C);g<=s;)o[g].an=v,o[g].ind=c,o[g].extra=C,g+=1;v=0,c+=1}}else o[c].ind=c,o[c].extra=0,c+=1;if(a.l=o,b=S>b?S:b,_.push(S),a.sz)a.boxWidth=a.sz[0],a.justifyOffset=0;else switch(a.boxWidth=b,a.j){case 1:a.justifyOffset=-a.boxWidth;break;case 2:a.justifyOffset=-a.boxWidth/2;break;default:a.justifyOffset=0}a.lineWidths=_;var D=n.a,V,L;T=D.length;var N,U,H=[];for(x=0;x<T;x+=1){for(V=D[x],V.a.sc&&(a.strokeColorAnim=!0),V.a.sw&&(a.strokeWidthAnim=!0),(V.a.fc||V.a.fh||V.a.fs||V.a.fb)&&(a.fillColorAnim=!0),U=0,N=V.s.b,s=0;s<l;s+=1)L=o[s],L.anIndexes[x]=U,(N==1&&L.val!==""||N==2&&L.val!==""&&L.val!==" "||N==3&&(L.n||L.val==" "||s==l-1)||N==4&&(L.n||s==l-1))&&(V.s.rn===1&&H.push(U),U+=1);n.a[x].s.totalChars=U;var q=-1,Z;if(V.s.rn===1)for(s=0;s<l;s+=1)L=o[s],q!=L.anIndexes[x]&&(q=L.anIndexes[x],Z=H.splice(Math.floor(Math.random()*H.length),1)[0]),L.anIndexes[x]=Z}a.yOffset=a.finalLineHeight||a.finalSize*1.2,a.ls=a.ls||0,a.ascent=A.ascent*a.finalSize/100},TextProperty.prototype.updateDocumentData=function(a,r){r=r===void 0?this.keysIndex:r;var n=this.copyData({},this.data.d.k[r].s);n=this.copyData(n,a),this.data.d.k[r].s=n,this.recalculate(r),this.setCurrentData(n),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(a){var r=this.data.d.k[a].s;r.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(r)},TextProperty.prototype.canResizeFont=function(a){this.canResize=a,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(a){this.minimumFontSize=Math.floor(a)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var a=Math.max,r=Math.min,n=Math.floor;function o(l,u){this._currentTextLength=-1,this.k=!1,this.data=u,this.elem=l,this.comp=l.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(l),this.s=PropertyFactory.getProp(l,u.s||{k:0},0,0,this),"e"in u?this.e=PropertyFactory.getProp(l,u.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(l,u.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(l,u.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(l,u.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(l,u.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(l,u.a,0,.01,this),this.dynamicProperties.length||this.getValue()}o.prototype={getMult:function(u){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var c=0,f=0,d=1,v=1;this.ne.v>0?c=this.ne.v/100:f=-this.ne.v/100,this.xe.v>0?d=1-this.xe.v/100:v=1+this.xe.v/100;var g=BezierFactory.getBezierEasing(c,f,d,v).get,y=0,_=this.finalS,S=this.finalE,b=this.data.sh;if(b===2)S===_?y=u>=S?1:0:y=a(0,r(.5/(S-_)+(u-_)/(S-_),1)),y=g(y);else if(b===3)S===_?y=u>=S?0:1:y=1-a(0,r(.5/(S-_)+(u-_)/(S-_),1)),y=g(y);else if(b===4)S===_?y=0:(y=a(0,r(.5/(S-_)+(u-_)/(S-_),1)),y<.5?y*=2:y=1-2*(y-.5)),y=g(y);else if(b===5){if(S===_)y=0;else{var x=S-_;u=r(a(0,u+.5-_),S-_);var T=-x/2+u,A=x/2;y=Math.sqrt(1-T*T/(A*A))}y=g(y)}else b===6?(S===_?y=0:(u=r(a(0,u+.5-_),S-_),y=(1+Math.cos(Math.PI+Math.PI*2*u/(S-_)))/2),y=g(y)):(u>=n(_)&&(u-_<0?y=a(0,r(r(S,1)-(_-u),1)):y=a(0,r(S-u,1))),y=g(y));if(this.sm.v!==100){var w=this.sm.v*.01;w===0&&(w=1e-8);var C=.5-w*.5;y<C?y=0:(y=(y-C)/w,y>1&&(y=1))}return y*this.a.v},getValue:function(u){this.iterateDynamicProperties(),this._mdf=u||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,u&&this.data.r===2&&(this.e.v=this._currentTextLength);var c=this.data.r===2?1:100/this.data.totalChars,f=this.o.v/c,d=this.s.v/c+f,v=this.e.v/c+f;if(d>v){var g=d;d=v,v=g}this.finalS=d,this.finalE=v}},extendPrototype([DynamicPropertyContainer],o);function s(l,u,c){return new o(l,u)}return{getTextSelectorProp:s}}();function TextAnimatorDataProperty(a,r,n){var o={propType:!1},s=PropertyFactory.getProp,l=r.a;this.a={r:l.r?s(a,l.r,0,degToRads,n):o,rx:l.rx?s(a,l.rx,0,degToRads,n):o,ry:l.ry?s(a,l.ry,0,degToRads,n):o,sk:l.sk?s(a,l.sk,0,degToRads,n):o,sa:l.sa?s(a,l.sa,0,degToRads,n):o,s:l.s?s(a,l.s,1,.01,n):o,a:l.a?s(a,l.a,1,0,n):o,o:l.o?s(a,l.o,0,.01,n):o,p:l.p?s(a,l.p,1,0,n):o,sw:l.sw?s(a,l.sw,0,0,n):o,sc:l.sc?s(a,l.sc,1,0,n):o,fc:l.fc?s(a,l.fc,1,0,n):o,fh:l.fh?s(a,l.fh,0,0,n):o,fs:l.fs?s(a,l.fs,0,.01,n):o,fb:l.fb?s(a,l.fb,0,.01,n):o,t:l.t?s(a,l.t,0,0,n):o},this.s=TextSelectorProp.getTextSelectorProp(a,r.s,n),this.s.t=r.s.t}function TextAnimatorProperty(a,r,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=a,this._renderType=r,this._elem=n,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}TextAnimatorProperty.prototype.searchProperties=function(){var a,r=this._textData.a.length,n,o=PropertyFactory.getProp;for(a=0;a<r;a+=1)n=this._textData.a[a],this._animatorsData[a]=new TextAnimatorDataProperty(this._elem,n,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:o(this._elem,this._textData.p.a,0,0,this),f:o(this._elem,this._textData.p.f,0,0,this),l:o(this._elem,this._textData.p.l,0,0,this),r:o(this._elem,this._textData.p.r,0,0,this),p:o(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=o(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(a,r){if(this.lettersChangedFlag=r,!(!this._mdf&&!this._isFirstFrame&&!r&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var n=this._moreOptions.alignment.v,o=this._animatorsData,s=this._textData,l=this.mHelper,u=this._renderType,c=this.renderedLetters.length,f,d,v,g,y=a.l,_,S,b,x,T,A,w,C,E,P,I,M,R,O,$;if(this._hasMaskedPath){if($=this._pathData.m,!this._pathData.n||this._pathData._mdf){var B=$.v;this._pathData.r.v&&(B=B.reverse()),_={tLength:0,segments:[]},g=B._length-1;var F;for(M=0,v=0;v<g;v+=1)F=bez.buildBezierData(B.v[v],B.v[v+1],[B.o[v][0]-B.v[v][0],B.o[v][1]-B.v[v][1]],[B.i[v+1][0]-B.v[v+1][0],B.i[v+1][1]-B.v[v+1][1]]),_.tLength+=F.segmentLength,_.segments.push(F),M+=F.segmentLength;v=g,$.v.c&&(F=bez.buildBezierData(B.v[v],B.v[0],[B.o[v][0]-B.v[v][0],B.o[v][1]-B.v[v][1]],[B.i[0][0]-B.v[0][0],B.i[0][1]-B.v[0][1]]),_.tLength+=F.segmentLength,_.segments.push(F),M+=F.segmentLength),this._pathData.pi=_}if(_=this._pathData.pi,S=this._pathData.f.v,w=0,A=1,x=0,T=!0,P=_.segments,S<0&&$.v.c)for(_.tLength<Math.abs(S)&&(S=-Math.abs(S)%_.tLength),w=P.length-1,E=P[w].points,A=E.length-1;S<0;)S+=E[A].partialLength,A-=1,A<0&&(w-=1,E=P[w].points,A=E.length-1);E=P[w].points,C=E[A-1],b=E[A],I=b.partialLength}g=y.length,f=0,d=0;var z=a.finalSize*1.2*.714,G=!0,D,V,L,N,U;N=o.length;var H,q=-1,Z,ee,ne,ue=S,K=w,J=A,X=-1,ie,te,W,Y,j,Q,re,ae,le="",se=this.defaultPropsArray,ce;if(a.j===2||a.j===1){var oe=0,de=0,he=a.j===2?-.5:-1,fe=0,pe=!0;for(v=0;v<g;v+=1)if(y[v].n){for(oe&&(oe+=de);fe<v;)y[fe].animatorJustifyOffset=oe,fe+=1;oe=0,pe=!0}else{for(L=0;L<N;L+=1)D=o[L].a,D.t.propType&&(pe&&a.j===2&&(de+=D.t.v*he),V=o[L].s,H=V.getMult(y[v].anIndexes[L],s.a[L].s.totalChars),H.length?oe+=D.t.v*H[0]*he:oe+=D.t.v*H*he);pe=!1}for(oe&&(oe+=de);fe<v;)y[fe].animatorJustifyOffset=oe,fe+=1}for(v=0;v<g;v+=1){if(l.reset(),ie=1,y[v].n)f=0,d+=a.yOffset,d+=G?1:0,S=ue,G=!1,this._hasMaskedPath&&(w=K,A=J,E=P[w].points,C=E[A-1],b=E[A],I=b.partialLength,x=0),le="",ae="",Q="",ce="",se=this.defaultPropsArray;else{if(this._hasMaskedPath){if(X!==y[v].line){switch(a.j){case 1:S+=M-a.lineWidths[y[v].line];break;case 2:S+=(M-a.lineWidths[y[v].line])/2;break}X=y[v].line}q!==y[v].ind&&(y[q]&&(S+=y[q].extra),S+=y[v].an/2,q=y[v].ind),S+=n[0]*y[v].an*.005;var ve=0;for(L=0;L<N;L+=1)D=o[L].a,D.p.propType&&(V=o[L].s,H=V.getMult(y[v].anIndexes[L],s.a[L].s.totalChars),H.length?ve+=D.p.v[0]*H[0]:ve+=D.p.v[0]*H),D.a.propType&&(V=o[L].s,H=V.getMult(y[v].anIndexes[L],s.a[L].s.totalChars),H.length?ve+=D.a.v[0]*H[0]:ve+=D.a.v[0]*H);for(T=!0,this._pathData.a.v&&(S=y[0].an*.5+(M-this._pathData.f.v-y[0].an*.5-y[y.length-1].an*.5)*q/(g-1),S+=this._pathData.f.v);T;)x+I>=S+ve||!E?(R=(S+ve-x)/b.partialLength,ee=C.point[0]+(b.point[0]-C.point[0])*R,ne=C.point[1]+(b.point[1]-C.point[1])*R,l.translate(-n[0]*y[v].an*.005,-(n[1]*z)*.01),T=!1):E&&(x+=b.partialLength,A+=1,A>=E.length&&(A=0,w+=1,P[w]?E=P[w].points:$.v.c?(A=0,w=0,E=P[w].points):(x-=b.partialLength,E=null)),E&&(C=b,b=E[A],I=b.partialLength));Z=y[v].an/2-y[v].add,l.translate(-Z,0,0)}else Z=y[v].an/2-y[v].add,l.translate(-Z,0,0),l.translate(-n[0]*y[v].an*.005,-n[1]*z*.01,0);for(L=0;L<N;L+=1)D=o[L].a,D.t.propType&&(V=o[L].s,H=V.getMult(y[v].anIndexes[L],s.a[L].s.totalChars),(f!==0||a.j!==0)&&(this._hasMaskedPath?H.length?S+=D.t.v*H[0]:S+=D.t.v*H:H.length?f+=D.t.v*H[0]:f+=D.t.v*H));for(a.strokeWidthAnim&&(W=a.sw||0),a.strokeColorAnim&&(a.sc?te=[a.sc[0],a.sc[1],a.sc[2]]:te=[0,0,0]),a.fillColorAnim&&a.fc&&(Y=[a.fc[0],a.fc[1],a.fc[2]]),L=0;L<N;L+=1)D=o[L].a,D.a.propType&&(V=o[L].s,H=V.getMult(y[v].anIndexes[L],s.a[L].s.totalChars),H.length?l.translate(-D.a.v[0]*H[0],-D.a.v[1]*H[1],D.a.v[2]*H[2]):l.translate(-D.a.v[0]*H,-D.a.v[1]*H,D.a.v[2]*H));for(L=0;L<N;L+=1)D=o[L].a,D.s.propType&&(V=o[L].s,H=V.getMult(y[v].anIndexes[L],s.a[L].s.totalChars),H.length?l.scale(1+(D.s.v[0]-1)*H[0],1+(D.s.v[1]-1)*H[1],1):l.scale(1+(D.s.v[0]-1)*H,1+(D.s.v[1]-1)*H,1));for(L=0;L<N;L+=1){if(D=o[L].a,V=o[L].s,H=V.getMult(y[v].anIndexes[L],s.a[L].s.totalChars),D.sk.propType&&(H.length?l.skewFromAxis(-D.sk.v*H[0],D.sa.v*H[1]):l.skewFromAxis(-D.sk.v*H,D.sa.v*H)),D.r.propType&&(H.length?l.rotateZ(-D.r.v*H[2]):l.rotateZ(-D.r.v*H)),D.ry.propType&&(H.length?l.rotateY(D.ry.v*H[1]):l.rotateY(D.ry.v*H)),D.rx.propType&&(H.length?l.rotateX(D.rx.v*H[0]):l.rotateX(D.rx.v*H)),D.o.propType&&(H.length?ie+=(D.o.v*H[0]-ie)*H[0]:ie+=(D.o.v*H-ie)*H),a.strokeWidthAnim&&D.sw.propType&&(H.length?W+=D.sw.v*H[0]:W+=D.sw.v*H),a.strokeColorAnim&&D.sc.propType)for(j=0;j<3;j+=1)H.length?te[j]+=(D.sc.v[j]-te[j])*H[0]:te[j]+=(D.sc.v[j]-te[j])*H;if(a.fillColorAnim&&a.fc){if(D.fc.propType)for(j=0;j<3;j+=1)H.length?Y[j]+=(D.fc.v[j]-Y[j])*H[0]:Y[j]+=(D.fc.v[j]-Y[j])*H;D.fh.propType&&(H.length?Y=addHueToRGB(Y,D.fh.v*H[0]):Y=addHueToRGB(Y,D.fh.v*H)),D.fs.propType&&(H.length?Y=addSaturationToRGB(Y,D.fs.v*H[0]):Y=addSaturationToRGB(Y,D.fs.v*H)),D.fb.propType&&(H.length?Y=addBrightnessToRGB(Y,D.fb.v*H[0]):Y=addBrightnessToRGB(Y,D.fb.v*H))}}for(L=0;L<N;L+=1)D=o[L].a,D.p.propType&&(V=o[L].s,H=V.getMult(y[v].anIndexes[L],s.a[L].s.totalChars),this._hasMaskedPath?H.length?l.translate(0,D.p.v[1]*H[0],-D.p.v[2]*H[1]):l.translate(0,D.p.v[1]*H,-D.p.v[2]*H):H.length?l.translate(D.p.v[0]*H[0],D.p.v[1]*H[1],-D.p.v[2]*H[2]):l.translate(D.p.v[0]*H,D.p.v[1]*H,-D.p.v[2]*H));if(a.strokeWidthAnim&&(Q=W<0?0:W),a.strokeColorAnim&&(re="rgb("+Math.round(te[0]*255)+","+Math.round(te[1]*255)+","+Math.round(te[2]*255)+")"),a.fillColorAnim&&a.fc&&(ae="rgb("+Math.round(Y[0]*255)+","+Math.round(Y[1]*255)+","+Math.round(Y[2]*255)+")"),this._hasMaskedPath){if(l.translate(0,-a.ls),l.translate(0,n[1]*z*.01+d,0),this._pathData.p.v){O=(b.point[1]-C.point[1])/(b.point[0]-C.point[0]);var ge=Math.atan(O)*180/Math.PI;b.point[0]<C.point[0]&&(ge+=180),l.rotate(-ge*Math.PI/180)}l.translate(ee,ne,0),S-=n[0]*y[v].an*.005,y[v+1]&&q!==y[v+1].ind&&(S+=y[v].an/2,S+=a.tr*.001*a.finalSize)}else{switch(l.translate(f,d,0),a.ps&&l.translate(a.ps[0],a.ps[1]+a.ascent,0),a.j){case 1:l.translate(y[v].animatorJustifyOffset+a.justifyOffset+(a.boxWidth-a.lineWidths[y[v].line]),0,0);break;case 2:l.translate(y[v].animatorJustifyOffset+a.justifyOffset+(a.boxWidth-a.lineWidths[y[v].line])/2,0,0);break}l.translate(0,-a.ls),l.translate(Z,0,0),l.translate(n[0]*y[v].an*.005,n[1]*z*.01,0),f+=y[v].l+a.tr*.001*a.finalSize}u==="html"?le=l.toCSS():u==="svg"?le=l.to2dCSS():se=[l.props[0],l.props[1],l.props[2],l.props[3],l.props[4],l.props[5],l.props[6],l.props[7],l.props[8],l.props[9],l.props[10],l.props[11],l.props[12],l.props[13],l.props[14],l.props[15]],ce=ie}c<=v?(U=new LetterProps(ce,Q,re,ae,le,se),this.renderedLetters.push(U),c+=1,this.lettersChangedFlag=!0):(U=this.renderedLetters[v],this.lettersChangedFlag=U.update(ce,Q,re,ae,le,se)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(a,r,n){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(a,r,n),this.textProperty=new TextProperty(this,a.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(a.t,this.renderType,this),this.initTransform(a,r,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(a){this._mdf=!1,this.prepareRenderableFrame(a),this.prepareProperties(a,this.isInRange)},ITextElement.prototype.createPathShape=function(a,r){var n,o=r.length,s,l="";for(n=0;n<o;n+=1)r[n].ty==="sh"&&(s=r[n].ks.k,l+=buildShapeString(s,s.i.length,!0,a));return l},ITextElement.prototype.updateDocumentData=function(a,r){this.textProperty.updateDocumentData(a,r)},ITextElement.prototype.canResizeFont=function(a){this.textProperty.canResizeFont(a)},ITextElement.prototype.setMinimumFontSize=function(a){this.textProperty.setMinimumFontSize(a)},ITextElement.prototype.applyTextPropertiesToMatrix=function(a,r,n,o,s){switch(a.ps&&r.translate(a.ps[0],a.ps[1]+a.ascent,0),r.translate(0,-a.ls,0),a.j){case 1:r.translate(a.justifyOffset+(a.boxWidth-a.lineWidths[n]),0,0);break;case 2:r.translate(a.justifyOffset+(a.boxWidth-a.lineWidths[n])/2,0,0);break}r.translate(o,s,0)},ITextElement.prototype.buildColor=function(a){return"rgb("+Math.round(a[0]*255)+","+Math.round(a[1]*255)+","+Math.round(a[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(a,r,n){this.textSpans=[],this.renderType="svg",this.initElement(a,r,n)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(a){for(var r=0,n=a.length,o=[],s="";r<n;)a[r]==="\r"||a[r]===""?(o.push(s),s=""):s+=a[r],r+=1;return o.push(s),o},SVGTextLottieElement.prototype.buildShapeData=function(a,r){if(a.shapes&&a.shapes.length){var n=a.shapes[0];if(n.it){var o=n.it[n.it.length-1];o.s&&(o.s.k[0]=r,o.s.k[1]=r)}}return a},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var a,r,n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n?n.l.length:0),n.fc?this.layerElement.setAttribute("fill",this.buildColor(n.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.finalSize);var o=this.globalData.fontManager.getFontByName(n.f);if(o.fClass)this.layerElement.setAttribute("class",o.fClass);else{this.layerElement.setAttribute("font-family",o.fFamily);var s=n.fWeight,l=n.fStyle;this.layerElement.setAttribute("font-style",l),this.layerElement.setAttribute("font-weight",s)}this.layerElement.setAttribute("aria-label",n.t);var u=n.l||[],c=!!this.globalData.fontManager.chars;r=u.length;var f,d=this.mHelper,v="",g=this.data.singleShape,y=0,_=0,S=!0,b=n.tr*.001*n.finalSize;if(g&&!c&&!n.sz){var x=this.textContainer,T="start";switch(n.j){case 1:T="end";break;case 2:T="middle";break;default:T="start";break}x.setAttribute("text-anchor",T),x.setAttribute("letter-spacing",b);var A=this.buildTextContents(n.finalText);for(r=A.length,_=n.ps?n.ps[1]+n.ascent:0,a=0;a<r;a+=1)f=this.textSpans[a].span||createNS("tspan"),f.textContent=A[a],f.setAttribute("x",0),f.setAttribute("y",_),f.style.display="inherit",x.appendChild(f),this.textSpans[a]||(this.textSpans[a]={span:null,glyph:null}),this.textSpans[a].span=f,_+=n.finalLineHeight;this.layerElement.appendChild(x)}else{var w=this.textSpans.length,C;for(a=0;a<r;a+=1){if(this.textSpans[a]||(this.textSpans[a]={span:null,childSpan:null,glyph:null}),!c||!g||a===0){if(f=w>a?this.textSpans[a].span:createNS(c?"g":"text"),w<=a){if(f.setAttribute("stroke-linecap","butt"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit","4"),this.textSpans[a].span=f,c){var E=createNS("g");f.appendChild(E),this.textSpans[a].childSpan=E}this.textSpans[a].span=f,this.layerElement.appendChild(f)}f.style.display="inherit"}if(d.reset(),g&&(u[a].n&&(y=-b,_+=n.yOffset,_+=S?1:0,S=!1),this.applyTextPropertiesToMatrix(n,d,u[a].line,y,_),y+=u[a].l||0,y+=b),c){C=this.globalData.fontManager.getCharData(n.finalText[a],o.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily);var P;if(C.t===1)P=new SVGCompElement(C.data,this.globalData,this);else{var I=emptyShapeData;C.data&&C.data.shapes&&(I=this.buildShapeData(C.data,n.finalSize)),P=new SVGShapeElement(I,this.globalData,this)}if(this.textSpans[a].glyph){var M=this.textSpans[a].glyph;this.textSpans[a].childSpan.removeChild(M.layerElement),M.destroy()}this.textSpans[a].glyph=P,P._debug=!0,P.prepareFrame(0),P.renderFrame(),this.textSpans[a].childSpan.appendChild(P.layerElement),C.t===1&&this.textSpans[a].childSpan.setAttribute("transform","scale("+n.finalSize/100+","+n.finalSize/100+")")}else g&&f.setAttribute("transform","translate("+d.props[12]+","+d.props[13]+")"),f.textContent=u[a].val,f.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}g&&f&&f.setAttribute("d",v)}for(;a<this.textSpans.length;)this.textSpans[a].span.style.display="none",a+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var a=this.layerElement.getBBox();this.bbox={top:a.y,left:a.x,width:a.width,height:a.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var a,r=this.textSpans.length,n;for(this.renderedFrame=this.comp.renderedFrame,a=0;a<r;a+=1)n=this.textSpans[a].glyph,n&&(n.prepareFrame(this.comp.renderedFrame-this.data.st),n._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var a,r,n=this.textAnimator.renderedLetters,o=this.textProperty.currentData.l;r=o.length;var s,l,u;for(a=0;a<r;a+=1)o[a].n||(s=n[a],l=this.textSpans[a].span,u=this.textSpans[a].glyph,u&&u.renderFrame(),s._mdf.m&&l.setAttribute("transform",s.m),s._mdf.o&&l.setAttribute("opacity",s.o),s._mdf.sw&&l.setAttribute("stroke-width",s.sw),s._mdf.sc&&l.setAttribute("stroke",s.sc),s._mdf.fc&&l.setAttribute("fill",s.fc))}};function ISolidElement(a,r,n){this.initElement(a,r,n)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var a=createNS("rect");a.setAttribute("width",this.data.sw),a.setAttribute("height",this.data.sh),a.setAttribute("fill",this.data.sc),this.layerElement.appendChild(a)};function NullElement(a,r,n){this.initFrame(),this.initBaseData(a,r,n),this.initFrame(),this.initTransform(a,r,n),this.initHierarchy()}NullElement.prototype.prepareFrame=function(a){this.prepareProperties(a,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(a){return new NullElement(a,this.globalData,this)},SVGRendererBase.prototype.createShape=function(a){return new SVGShapeElement(a,this.globalData,this)},SVGRendererBase.prototype.createText=function(a){return new SVGTextLottieElement(a,this.globalData,this)},SVGRendererBase.prototype.createImage=function(a){return new IImageElement(a,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(a){return new ISolidElement(a,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(a){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+a.w+" "+a.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",a.w),this.svgElement.setAttribute("height",a.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var r=this.globalData.defs;this.setupGlobalData(a,r),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=a;var n=createNS("clipPath"),o=createNS("rect");o.setAttribute("width",a.w),o.setAttribute("height",a.h),o.setAttribute("x",0),o.setAttribute("y",0);var s=createElementID();n.setAttribute("id",s),n.appendChild(o),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+s+")"),r.appendChild(n),this.layers=a.layers,this.elements=createSizedArray(a.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var a,r=this.layers?this.layers.length:0;for(a=0;a<r;a+=1)this.elements[a]&&this.elements[a].destroy&&this.elements[a].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(a){var r=0,n=this.layers.length;for(r=0;r<n;r+=1)if(this.layers[r].ind===a)return r;return-1},SVGRendererBase.prototype.buildItem=function(a){var r=this.elements;if(!(r[a]||this.layers[a].ty===99)){r[a]=!0;var n=this.createItem(this.layers[a]);if(r[a]=n,getExpressionsPlugin()&&(this.layers[a].ty===0&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,a),this.layers[a].tt){var o="tp"in this.layers[a]?this.findIndexByInd(this.layers[a].tp):a-1;if(o===-1)return;if(!this.elements[o]||this.elements[o]===!0)this.buildItem(o),this.addPendingElement(n);else{var s=r[o],l=s.getMatte(this.layers[a].tt);n.setMatte(l)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var a=this.pendingElements.pop();if(a.checkParenting(),a.data.tt)for(var r=0,n=this.elements.length;r<n;){if(this.elements[r]===a){var o="tp"in a.data?this.findIndexByInd(a.data.tp):r-1,s=this.elements[o],l=s.getMatte(this.layers[r].tt);a.setMatte(l);break}r+=1}}},SVGRendererBase.prototype.renderFrame=function(a){if(!(this.renderedFrame===a||this.destroyed)){a===null?a=this.renderedFrame:this.renderedFrame=a,this.globalData.frameNum=a,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=a,this.globalData._mdf=!1;var r,n=this.layers.length;for(this.completeLayers||this.checkLayers(a),r=n-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].prepareFrame(a-this.layers[r].st);if(this.globalData._mdf)for(r=0;r<n;r+=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(a,r){var n=a.getBaseElement();if(n){for(var o=0,s;o<r;)this.elements[o]&&this.elements[o]!==!0&&this.elements[o].getBaseElement()&&(s=this.elements[o].getBaseElement()),o+=1;s?this.layerElement.insertBefore(n,s):this.layerElement.appendChild(n)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(a,r,n){this.initFrame(),this.initBaseData(a,r,n),this.initTransform(a,r,n),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!r.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(a){if(this._mdf=!1,this.prepareRenderableFrame(a),this.prepareProperties(a,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=a/this.data.sr;else{var r=this.tm.v;r===this.data.op&&(r=this.data.op-1),this.renderedFrame=r}var n,o=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=o-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st),this.elements[n]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var a,r=this.layers.length;for(a=0;a<r;a+=1)(this.completeLayers||this.elements[a])&&this.elements[a].renderFrame()},ICompElement.prototype.setElements=function(a){this.elements=a},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var a,r=this.layers.length;for(a=0;a<r;a+=1)this.elements[a]&&this.elements[a].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(a,r,n){this.layers=a.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(a,r,n),this.tm=a.tm?PropertyFactory.getProp(this,a.tm,0,r.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(a){return new SVGCompElement(a,this.globalData,this)};function SVGRenderer(a,r){this.animationItem=a,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var n="";if(r&&r.title){var o=createNS("title"),s=createElementID();o.setAttribute("id",s),o.textContent=r.title,this.svgElement.appendChild(o),n+=s}if(r&&r.description){var l=createNS("desc"),u=createElementID();l.setAttribute("id",u),l.textContent=r.description,this.svgElement.appendChild(l),n+=" "+u}n&&this.svgElement.setAttribute("aria-labelledby",n);var c=createNS("defs");this.svgElement.appendChild(c);var f=createNS("g");this.svgElement.appendChild(f),this.layerElement=f,this.renderConfig={preserveAspectRatio:r&&r.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:r&&r.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:r&&r.contentVisibility||"visible",progressiveLoad:r&&r.progressiveLoad||!1,hideOnTransparent:!(r&&r.hideOnTransparent===!1),viewBoxOnly:r&&r.viewBoxOnly||!1,viewBoxSize:r&&r.viewBoxSize||!1,className:r&&r.className||"",id:r&&r.id||"",focusable:r&&r.focusable,filterSize:{width:r&&r.filterSize&&r.filterSize.width||"100%",height:r&&r.filterSize&&r.filterSize.height||"100%",x:r&&r.filterSize&&r.filterSize.x||"0%",y:r&&r.filterSize&&r.filterSize.y||"0%"},width:r&&r.width,height:r&&r.height,runExpressions:!r||r.runExpressions===void 0||r.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:c,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(a){return new SVGCompElement(a,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(r){var n,o=r.length,s="_";for(n=0;n<o;n+=1)s+=r[n].transform.key+"_";var l=this.sequences[s];return l||(l={transforms:[].concat(r),finalTransform:new Matrix,_mdf:!1},this.sequences[s]=l,this.sequenceList.push(l)),l},processSequence:function(r,n){for(var o=0,s=r.transforms.length,l=n;o<s&&!n;){if(r.transforms[o].transform.mProps._mdf){l=!0;break}o+=1}if(l)for(r.finalTransform.reset(),o=s-1;o>=0;o-=1)r.finalTransform.multiply(r.transforms[o].transform.mProps.v);r._mdf=l},processSequences:function(r){var n,o=this.sequenceList.length;for(n=0;n<o;n+=1)this.processSequence(this.sequenceList[n],r)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var r="__lottie_element_luma_buffer",n=null,o=null,s=null;function l(){var f=createNS("svg"),d=createNS("filter"),v=createNS("feColorMatrix");return d.setAttribute("id",r),v.setAttribute("type","matrix"),v.setAttribute("color-interpolation-filters","sRGB"),v.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),d.appendChild(v),f.appendChild(d),f.setAttribute("id",r+"_svg"),featureSupport.svgLumaHidden&&(f.style.display="none"),f}function u(){n||(s=l(),document.body.appendChild(s),n=createTag("canvas"),o=n.getContext("2d"),o.filter="url(#"+r+")",o.fillStyle="rgba(0,0,0,0)",o.fillRect(0,0,1,1))}function c(f){return n||u(),n.width=f.width,n.height=f.height,o.filter="url(#"+r+")",n}return{load:u,get:c}};function createCanvas(a,r){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(a,r);var n=createTag("canvas");return n.width=a,n.height=r,n}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(a){var r,n=a.data.ef?a.data.ef.length:0;this.filters=[];var o;for(r=0;r<n;r+=1){o=null;var s=a.data.ef[r].ty;if(registeredEffects[s]){var l=registeredEffects[s].effect;o=new l(a.effectsManager.effectElements[r],a)}o&&this.filters.push(o)}this.filters.length&&a.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(a){var r,n=this.filters.length;for(r=0;r<n;r+=1)this.filters[r].renderFrame(a)},CVEffects.prototype.getEffects=function(a){var r,n=this.filters.length,o=[];for(r=0;r<n;r+=1)this.filters[r].type===a&&o.push(this.filters[r]);return o};function registerEffect(a,r){registeredEffects[a]={effect:r}}function CVMaskElement(a,r){this.data=a,this.element=r,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var n,o=this.masksProperties.length,s=!1;for(n=0;n<o;n+=1)this.masksProperties[n].mode!=="n"&&(s=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);this.hasMasks=s,s&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var a=this.element.finalTransform.mat,r=this.element.canvasContext,n,o=this.masksProperties.length,s,l,u;for(r.beginPath(),n=0;n<o;n+=1)if(this.masksProperties[n].mode!=="n"){this.masksProperties[n].inv&&(r.moveTo(0,0),r.lineTo(this.element.globalData.compSize.w,0),r.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),r.lineTo(0,this.element.globalData.compSize.h),r.lineTo(0,0)),u=this.viewData[n].v,s=a.applyToPointArray(u.v[0][0],u.v[0][1],0),r.moveTo(s[0],s[1]);var c,f=u._length;for(c=1;c<f;c+=1)l=a.applyToTriplePoints(u.o[c-1],u.i[c],u.v[c]),r.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5]);l=a.applyToTriplePoints(u.o[c-1],u.i[0],u.v[0]),r.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5])}this.element.globalData.renderer.save(!0),r.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var r=this.globalData.canvasContext,n=assetLoader.createCanvas(r.canvas.width,r.canvas.height);this.buffers.push(n);var o=assetLoader.createCanvas(r.canvas.width,r.canvas.height);this.buffers.push(o),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var r=this.globalData;if(r.blendMode!==this.data.bm){r.blendMode=this.data.bm;var n=getBlendMode(this.data.bm);r.canvasContext.globalCompositeOperation=n}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(r){r.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var r=this.buffers[0],n=r.getContext("2d");this.clearCanvas(n),n.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var r=this.buffers[1],n=r.getContext("2d");this.clearCanvas(n),n.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var o=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(o.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var s=assetLoader.getLumaCanvas(this.canvasContext.canvas),l=s.getContext("2d");l.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(s,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(r,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(r){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!r)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var n=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(n),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(n),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(a,r,n,o){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var s=4;r.ty==="rc"?s=5:r.ty==="el"?s=6:r.ty==="sr"&&(s=7),this.sh=ShapePropertyFactory.getShapeProp(a,r,s,a);var l,u=n.length,c;for(l=0;l<u;l+=1)n[l].closed||(c={transforms:o.addTransformSequence(n[l].transforms),trNodes:[]},this.styledShapes.push(c),n[l].elements.push(c))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(a,r,n){this.shapes=[],this.shapesData=a.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(a,r,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(a,r){var n={data:a,type:a.ty,preTransforms:this.transformsManager.addTransformSequence(r),transforms:[],elements:[],closed:a.hd===!0},o={};if(a.ty==="fl"||a.ty==="st"?(o.c=PropertyFactory.getProp(this,a.c,1,255,this),o.c.k||(n.co="rgb("+bmFloor(o.c.v[0])+","+bmFloor(o.c.v[1])+","+bmFloor(o.c.v[2])+")")):(a.ty==="gf"||a.ty==="gs")&&(o.s=PropertyFactory.getProp(this,a.s,1,null,this),o.e=PropertyFactory.getProp(this,a.e,1,null,this),o.h=PropertyFactory.getProp(this,a.h||{k:0},0,.01,this),o.a=PropertyFactory.getProp(this,a.a||{k:0},0,degToRads,this),o.g=new GradientProperty(this,a.g,this)),o.o=PropertyFactory.getProp(this,a.o,0,.01,this),a.ty==="st"||a.ty==="gs"){if(n.lc=lineCapEnum[a.lc||2],n.lj=lineJoinEnum[a.lj||2],a.lj==1&&(n.ml=a.ml),o.w=PropertyFactory.getProp(this,a.w,0,null,this),o.w.k||(n.wi=o.w.v),a.d){var s=new DashProperty(this,a.d,"canvas",this);o.d=s,o.d.k||(n.da=o.d.dashArray,n.do=o.d.dashoffset[0])}}else n.r=a.r===2?"evenodd":"nonzero";return this.stylesList.push(n),o.style=n,o},CVShapeElement.prototype.createGroupElement=function(){var a={it:[],prevViewData:[]};return a},CVShapeElement.prototype.createTransformElement=function(a){var r={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,a.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,a,this)}};return r},CVShapeElement.prototype.createShapeElement=function(a){var r=new CVShapeData(this,a,this.stylesList,this.transformsManager);return this.shapes.push(r),this.addShapeToModifiers(r),r},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var a,r=this.itemsData.length;for(a=0;a<r;a+=1)this.prevViewData[a]=this.itemsData[a];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),r=this.dynamicProperties.length,a=0;a<r;a+=1)this.dynamicProperties[a].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(a){var r,n=this.stylesList.length;for(r=0;r<n;r+=1)this.stylesList[r].closed||this.stylesList[r].transforms.push(a)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var a,r=this.stylesList.length;for(a=0;a<r;a+=1)this.stylesList[a].closed||this.stylesList[a].transforms.pop()},CVShapeElement.prototype.closeStyles=function(a){var r,n=a.length;for(r=0;r<n;r+=1)a[r].closed=!0},CVShapeElement.prototype.searchShapes=function(a,r,n,o,s){var l,u=a.length-1,c,f,d=[],v=[],g,y,_,S=[].concat(s);for(l=u;l>=0;l-=1){if(g=this.searchProcessedElement(a[l]),g?r[l]=n[g-1]:a[l]._shouldRender=o,a[l].ty==="fl"||a[l].ty==="st"||a[l].ty==="gf"||a[l].ty==="gs")g?r[l].style.closed=!1:r[l]=this.createStyleElement(a[l],S),d.push(r[l].style);else if(a[l].ty==="gr"){if(!g)r[l]=this.createGroupElement(a[l]);else for(f=r[l].it.length,c=0;c<f;c+=1)r[l].prevViewData[c]=r[l].it[c];this.searchShapes(a[l].it,r[l].it,r[l].prevViewData,o,S)}else a[l].ty==="tr"?(g||(_=this.createTransformElement(a[l]),r[l]=_),S.push(r[l]),this.addTransformToStyleList(r[l])):a[l].ty==="sh"||a[l].ty==="rc"||a[l].ty==="el"||a[l].ty==="sr"?g||(r[l]=this.createShapeElement(a[l])):a[l].ty==="tm"||a[l].ty==="rd"||a[l].ty==="pb"||a[l].ty==="zz"||a[l].ty==="op"?(g?(y=r[l],y.closed=!1):(y=ShapeModifiers.getModifier(a[l].ty),y.init(this,a[l]),r[l]=y,this.shapeModifiers.push(y)),v.push(y)):a[l].ty==="rp"&&(g?(y=r[l],y.closed=!0):(y=ShapeModifiers.getModifier(a[l].ty),r[l]=y,y.init(this,a,l,r),this.shapeModifiers.push(y),o=!1),v.push(y));this.addProcessedElement(a[l],l+1)}for(this.removeTransformFromStyleList(),this.closeStyles(d),u=v.length,l=0;l<u;l+=1)v[l].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(a,r){(a._opMdf||r.op._mdf||this._isFirstFrame)&&(r.opacity=a.opacity,r.opacity*=r.op.v,r._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var a,r=this.stylesList.length,n,o,s,l,u,c,f=this.globalData.renderer,d=this.globalData.canvasContext,v,g;for(a=0;a<r;a+=1)if(g=this.stylesList[a],v=g.type,!((v==="st"||v==="gs")&&g.wi===0||!g.data._shouldRender||g.coOp===0||this.globalData.currentGlobalAlpha===0)){for(f.save(),u=g.elements,v==="st"||v==="gs"?(f.ctxStrokeStyle(v==="st"?g.co:g.grd),f.ctxLineWidth(g.wi),f.ctxLineCap(g.lc),f.ctxLineJoin(g.lj),f.ctxMiterLimit(g.ml||0)):f.ctxFillStyle(v==="fl"?g.co:g.grd),f.ctxOpacity(g.coOp),v!=="st"&&v!=="gs"&&d.beginPath(),f.ctxTransform(g.preTransforms.finalTransform.props),o=u.length,n=0;n<o;n+=1){for((v==="st"||v==="gs")&&(d.beginPath(),g.da&&(d.setLineDash(g.da),d.lineDashOffset=g.do)),c=u[n].trNodes,l=c.length,s=0;s<l;s+=1)c[s].t==="m"?d.moveTo(c[s].p[0],c[s].p[1]):c[s].t==="c"?d.bezierCurveTo(c[s].pts[0],c[s].pts[1],c[s].pts[2],c[s].pts[3],c[s].pts[4],c[s].pts[5]):d.closePath();(v==="st"||v==="gs")&&(f.ctxStroke(),g.da&&d.setLineDash(this.dashResetter))}v!=="st"&&v!=="gs"&&this.globalData.renderer.ctxFill(g.r),f.restore()}},CVShapeElement.prototype.renderShape=function(a,r,n,o){var s,l=r.length-1,u;for(u=a,s=l;s>=0;s-=1)r[s].ty==="tr"?(u=n[s].transform,this.renderShapeTransform(a,u)):r[s].ty==="sh"||r[s].ty==="el"||r[s].ty==="rc"||r[s].ty==="sr"?this.renderPath(r[s],n[s]):r[s].ty==="fl"?this.renderFill(r[s],n[s],u):r[s].ty==="st"?this.renderStroke(r[s],n[s],u):r[s].ty==="gf"||r[s].ty==="gs"?this.renderGradientFill(r[s],n[s],u):r[s].ty==="gr"?this.renderShape(u,r[s].it,n[s].it):r[s].ty;o&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(a,r){if(this._isFirstFrame||r._mdf||a.transforms._mdf){var n=a.trNodes,o=r.paths,s,l,u,c=o._length;n.length=0;var f=a.transforms.finalTransform;for(u=0;u<c;u+=1){var d=o.shapes[u];if(d&&d.v){for(l=d._length,s=1;s<l;s+=1)s===1&&n.push({t:"m",p:f.applyToPointArray(d.v[0][0],d.v[0][1],0)}),n.push({t:"c",pts:f.applyToTriplePoints(d.o[s-1],d.i[s],d.v[s])});l===1&&n.push({t:"m",p:f.applyToPointArray(d.v[0][0],d.v[0][1],0)}),d.c&&l&&(n.push({t:"c",pts:f.applyToTriplePoints(d.o[s-1],d.i[0],d.v[0])}),n.push({t:"z"}))}}a.trNodes=n}},CVShapeElement.prototype.renderPath=function(a,r){if(a.hd!==!0&&a._shouldRender){var n,o=r.styledShapes.length;for(n=0;n<o;n+=1)this.renderStyledShape(r.styledShapes[n],r.sh)}},CVShapeElement.prototype.renderFill=function(a,r,n){var o=r.style;(r.c._mdf||this._isFirstFrame)&&(o.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")"),(r.o._mdf||n._opMdf||this._isFirstFrame)&&(o.coOp=r.o.v*n.opacity)},CVShapeElement.prototype.renderGradientFill=function(a,r,n){var o=r.style,s;if(!o.grd||r.g._mdf||r.s._mdf||r.e._mdf||a.t!==1&&(r.h._mdf||r.a._mdf)){var l=this.globalData.canvasContext,u=r.s.v,c=r.e.v;if(a.t===1)s=l.createLinearGradient(u[0],u[1],c[0],c[1]);else{var f=Math.sqrt(Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2)),d=Math.atan2(c[1]-u[1],c[0]-u[0]),v=r.h.v;v>=1?v=.99:v<=-1&&(v=-.99);var g=f*v,y=Math.cos(d+r.a.v)*g+u[0],_=Math.sin(d+r.a.v)*g+u[1];s=l.createRadialGradient(y,_,0,u[0],u[1],f)}var S,b=a.g.p,x=r.g.c,T=1;for(S=0;S<b;S+=1)r.g._hasOpacity&&r.g._collapsable&&(T=r.g.o[S*2+1]),s.addColorStop(x[S*4]/100,"rgba("+x[S*4+1]+","+x[S*4+2]+","+x[S*4+3]+","+T+")");o.grd=s}o.coOp=r.o.v*n.opacity},CVShapeElement.prototype.renderStroke=function(a,r,n){var o=r.style,s=r.d;s&&(s._mdf||this._isFirstFrame)&&(o.da=s.dashArray,o.do=s.dashoffset[0]),(r.c._mdf||this._isFirstFrame)&&(o.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")"),(r.o._mdf||n._opMdf||this._isFirstFrame)&&(o.coOp=r.o.v*n.opacity),(r.w._mdf||this._isFirstFrame)&&(o.wi=r.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(a,r,n){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(a,r,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var a=this.textProperty.currentData;this.renderedLetters=createSizedArray(a.l?a.l.length:0);var r=!1;a.fc?(r=!0,this.values.fill=this.buildColor(a.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=r;var n=!1;a.sc&&(n=!0,this.values.stroke=this.buildColor(a.sc),this.values.sWidth=a.sw);var o=this.globalData.fontManager.getFontByName(a.f),s,l,u=a.l,c=this.mHelper;this.stroke=n,this.values.fValue=a.finalSize+"px "+this.globalData.fontManager.getFontByName(a.f).fFamily,l=a.finalText.length;var f,d,v,g,y,_,S,b,x,T,A=this.data.singleShape,w=a.tr*.001*a.finalSize,C=0,E=0,P=!0,I=0;for(s=0;s<l;s+=1){f=this.globalData.fontManager.getCharData(a.finalText[s],o.fStyle,this.globalData.fontManager.getFontByName(a.f).fFamily),d=f&&f.data||{},c.reset(),A&&u[s].n&&(C=-w,E+=a.yOffset,E+=P?1:0,P=!1),y=d.shapes?d.shapes[0].it:[],S=y.length,c.scale(a.finalSize/100,a.finalSize/100),A&&this.applyTextPropertiesToMatrix(a,c,u[s].line,C,E),x=createSizedArray(S-1);var M=0;for(_=0;_<S;_+=1)if(y[_].ty==="sh"){for(g=y[_].ks.k.i.length,b=y[_].ks.k,T=[],v=1;v<g;v+=1)v===1&&T.push(c.applyToX(b.v[0][0],b.v[0][1],0),c.applyToY(b.v[0][0],b.v[0][1],0)),T.push(c.applyToX(b.o[v-1][0],b.o[v-1][1],0),c.applyToY(b.o[v-1][0],b.o[v-1][1],0),c.applyToX(b.i[v][0],b.i[v][1],0),c.applyToY(b.i[v][0],b.i[v][1],0),c.applyToX(b.v[v][0],b.v[v][1],0),c.applyToY(b.v[v][0],b.v[v][1],0));T.push(c.applyToX(b.o[v-1][0],b.o[v-1][1],0),c.applyToY(b.o[v-1][0],b.o[v-1][1],0),c.applyToX(b.i[0][0],b.i[0][1],0),c.applyToY(b.i[0][0],b.i[0][1],0),c.applyToX(b.v[0][0],b.v[0][1],0),c.applyToY(b.v[0][0],b.v[0][1],0)),x[M]=T,M+=1}A&&(C+=u[s].l,C+=w),this.textSpans[I]?this.textSpans[I].elem=x:this.textSpans[I]={elem:x},I+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var a=this.canvasContext;a.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var r,n,o,s,l,u,c=this.textAnimator.renderedLetters,f=this.textProperty.currentData.l;n=f.length;var d,v=null,g=null,y=null,_,S,b=this.globalData.renderer;for(r=0;r<n;r+=1)if(!f[r].n){if(d=c[r],d&&(b.save(),b.ctxTransform(d.p),b.ctxOpacity(d.o)),this.fill){for(d&&d.fc?v!==d.fc&&(b.ctxFillStyle(d.fc),v=d.fc):v!==this.values.fill&&(v=this.values.fill,b.ctxFillStyle(this.values.fill)),_=this.textSpans[r].elem,s=_.length,this.globalData.canvasContext.beginPath(),o=0;o<s;o+=1)for(S=_[o],u=S.length,this.globalData.canvasContext.moveTo(S[0],S[1]),l=2;l<u;l+=6)this.globalData.canvasContext.bezierCurveTo(S[l],S[l+1],S[l+2],S[l+3],S[l+4],S[l+5]);this.globalData.canvasContext.closePath(),b.ctxFill()}if(this.stroke){for(d&&d.sw?y!==d.sw&&(y=d.sw,b.ctxLineWidth(d.sw)):y!==this.values.sWidth&&(y=this.values.sWidth,b.ctxLineWidth(this.values.sWidth)),d&&d.sc?g!==d.sc&&(g=d.sc,b.ctxStrokeStyle(d.sc)):g!==this.values.stroke&&(g=this.values.stroke,b.ctxStrokeStyle(this.values.stroke)),_=this.textSpans[r].elem,s=_.length,this.globalData.canvasContext.beginPath(),o=0;o<s;o+=1)for(S=_[o],u=S.length,this.globalData.canvasContext.moveTo(S[0],S[1]),l=2;l<u;l+=6)this.globalData.canvasContext.bezierCurveTo(S[l],S[l+1],S[l+2],S[l+3],S[l+4],S[l+5]);this.globalData.canvasContext.closePath(),b.ctxStroke()}d&&this.globalData.renderer.restore()}};function CVImageElement(a,r,n){this.assetData=r.getAssetData(a.refId),this.img=r.imageLoader.getAsset(this.assetData),this.initElement(a,r,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var a=createTag("canvas");a.width=this.assetData.w,a.height=this.assetData.h;var r=a.getContext("2d"),n=this.img.width,o=this.img.height,s=n/o,l=this.assetData.w/this.assetData.h,u,c,f=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;s>l&&f==="xMidYMid slice"||s<l&&f!=="xMidYMid slice"?(c=o,u=c*l):(u=n,c=u/l),r.drawImage(this.img,(n-u)/2,(o-c)/2,u,c,0,0,this.assetData.w,this.assetData.h),this.img=a}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(a,r,n){this.initElement(a,r,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(a){return new CVShapeElement(a,this.globalData,this)},CanvasRendererBase.prototype.createText=function(a){return new CVTextElement(a,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(a){return new CVImageElement(a,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(a){return new CVSolidElement(a,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(a){a[0]===1&&a[1]===0&&a[4]===0&&a[5]===1&&a[12]===0&&a[13]===0||this.canvasContext.transform(a[0],a[1],a[4],a[5],a[12],a[13])},CanvasRendererBase.prototype.ctxOpacity=function(a){this.canvasContext.globalAlpha*=a<0?0:a},CanvasRendererBase.prototype.ctxFillStyle=function(a){this.canvasContext.fillStyle=a},CanvasRendererBase.prototype.ctxStrokeStyle=function(a){this.canvasContext.strokeStyle=a},CanvasRendererBase.prototype.ctxLineWidth=function(a){this.canvasContext.lineWidth=a},CanvasRendererBase.prototype.ctxLineCap=function(a){this.canvasContext.lineCap=a},CanvasRendererBase.prototype.ctxLineJoin=function(a){this.canvasContext.lineJoin=a},CanvasRendererBase.prototype.ctxMiterLimit=function(a){this.canvasContext.miterLimit=a},CanvasRendererBase.prototype.ctxFill=function(a){this.canvasContext.fill(a)},CanvasRendererBase.prototype.ctxFillRect=function(a,r,n,o){this.canvasContext.fillRect(a,r,n,o)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(a){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}a&&(this.globalData.blendMode="source-over"),this.contextData.restore(a)},CanvasRendererBase.prototype.configAnimation=function(a){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var r=this.animationItem.container.style;r.width="100%",r.height="100%";var n="0px 0px 0px";r.transformOrigin=n,r.mozTransformOrigin=n,r.webkitTransformOrigin=n,r["-webkit-transform"]=n,r.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=a,this.layers=a.layers,this.transformCanvas={w:a.w,h:a.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(a,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(a.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(a,r){this.reset();var n,o;a?(n=a,o=r,this.canvasContext.canvas.width=n,this.canvasContext.canvas.height=o):(this.animationItem.wrapper&&this.animationItem.container?(n=this.animationItem.wrapper.offsetWidth,o=this.animationItem.wrapper.offsetHeight):(n=this.canvasContext.canvas.width,o=this.canvasContext.canvas.height),this.canvasContext.canvas.width=n*this.renderConfig.dpr,this.canvasContext.canvas.height=o*this.renderConfig.dpr);var s,l;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var u=this.renderConfig.preserveAspectRatio.split(" "),c=u[1]||"meet",f=u[0]||"xMidYMid",d=f.substr(0,4),v=f.substr(4);s=n/o,l=this.transformCanvas.w/this.transformCanvas.h,l>s&&c==="meet"||l<s&&c==="slice"?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=o/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=o/(this.transformCanvas.h/this.renderConfig.dpr)),d==="xMid"&&(l<s&&c==="meet"||l>s&&c==="slice")?this.transformCanvas.tx=(n-this.transformCanvas.w*(o/this.transformCanvas.h))/2*this.renderConfig.dpr:d==="xMax"&&(l<s&&c==="meet"||l>s&&c==="slice")?this.transformCanvas.tx=(n-this.transformCanvas.w*(o/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,v==="YMid"&&(l>s&&c==="meet"||l<s&&c==="slice")?this.transformCanvas.ty=(o-this.transformCanvas.h*(n/this.transformCanvas.w))/2*this.renderConfig.dpr:v==="YMax"&&(l>s&&c==="meet"||l<s&&c==="slice")?this.transformCanvas.ty=(o-this.transformCanvas.h*(n/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=o/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var a,r=this.layers?this.layers.length:0;for(a=r-1;a>=0;a-=1)this.elements[a]&&this.elements[a].destroy&&this.elements[a].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(a,r){if(!(this.renderedFrame===a&&this.renderConfig.clearCanvas===!0&&!r||this.destroyed||a===-1)){this.renderedFrame=a,this.globalData.frameNum=a-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||r,this.globalData.projectInterface.currentFrame=a;var n,o=this.layers.length;for(this.completeLayers||this.checkLayers(a),n=o-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(a-this.layers[n].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),n=o-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(a){var r=this.elements;if(!(r[a]||this.layers[a].ty===99)){var n=this.createItem(this.layers[a],this,this.globalData);r[a]=n,n.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var a=this.pendingElements.pop();a.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var a,r=15;for(a=0;a<r;a+=1){var n=new CanvasContext;this.stack[a]=n}this._length=r,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var a=this._length*2,r=0;for(r=this._length;r<a;r+=1)this.stack[r]=new CanvasContext;this._length=a},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(a){this.cArrPos-=1;var r=this.stack[this.cArrPos],n=r.transform,o,s=this.cTr.props;for(o=0;o<16;o+=1)s[o]=n[o];if(a){this.nativeContext.restore();var l=this.stack[this.cArrPos+1];this.appliedFillStyle=l.fillStyle,this.appliedStrokeStyle=l.strokeStyle,this.appliedLineWidth=l.lineWidth,this.appliedLineCap=l.lineCap,this.appliedLineJoin=l.lineJoin,this.appliedMiterLimit=l.miterLimit}this.nativeContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13]),(a||r.opacity!==-1&&this.currentOpacity!==r.opacity)&&(this.nativeContext.globalAlpha=r.opacity,this.currentOpacity=r.opacity),this.currentFillStyle=r.fillStyle,this.currentStrokeStyle=r.strokeStyle,this.currentLineWidth=r.lineWidth,this.currentLineCap=r.lineCap,this.currentLineJoin=r.lineJoin,this.currentMiterLimit=r.miterLimit},CVContextData.prototype.save=function(a){a&&this.nativeContext.save();var r=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var n=this.stack[this.cArrPos],o;for(o=0;o<16;o+=1)n.transform[o]=r[o];this.cArrPos+=1;var s=this.stack[this.cArrPos];s.opacity=n.opacity,s.fillStyle=n.fillStyle,s.strokeStyle=n.strokeStyle,s.lineWidth=n.lineWidth,s.lineCap=n.lineCap,s.lineJoin=n.lineJoin,s.miterLimit=n.miterLimit},CVContextData.prototype.setOpacity=function(a){this.stack[this.cArrPos].opacity=a},CVContextData.prototype.setContext=function(a){this.nativeContext=a},CVContextData.prototype.fillStyle=function(a){this.stack[this.cArrPos].fillStyle!==a&&(this.currentFillStyle=a,this.stack[this.cArrPos].fillStyle=a)},CVContextData.prototype.strokeStyle=function(a){this.stack[this.cArrPos].strokeStyle!==a&&(this.currentStrokeStyle=a,this.stack[this.cArrPos].strokeStyle=a)},CVContextData.prototype.lineWidth=function(a){this.stack[this.cArrPos].lineWidth!==a&&(this.currentLineWidth=a,this.stack[this.cArrPos].lineWidth=a)},CVContextData.prototype.lineCap=function(a){this.stack[this.cArrPos].lineCap!==a&&(this.currentLineCap=a,this.stack[this.cArrPos].lineCap=a)},CVContextData.prototype.lineJoin=function(a){this.stack[this.cArrPos].lineJoin!==a&&(this.currentLineJoin=a,this.stack[this.cArrPos].lineJoin=a)},CVContextData.prototype.miterLimit=function(a){this.stack[this.cArrPos].miterLimit!==a&&(this.currentMiterLimit=a,this.stack[this.cArrPos].miterLimit=a)},CVContextData.prototype.transform=function(a){this.transformMat.cloneFromProps(a);var r=this.cTr;this.transformMat.multiply(r),r.cloneFromProps(this.transformMat.props);var n=r.props;this.nativeContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13])},CVContextData.prototype.opacity=function(a){var r=this.stack[this.cArrPos].opacity;r*=a<0?0:a,this.stack[this.cArrPos].opacity!==r&&(this.currentOpacity!==a&&(this.nativeContext.globalAlpha=a,this.currentOpacity=a),this.stack[this.cArrPos].opacity=r)},CVContextData.prototype.fill=function(a){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(a)},CVContextData.prototype.fillRect=function(a,r,n,o){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(a,r,n,o)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(a,r,n){this.completeLayers=!1,this.layers=a.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(a,r,n),this.tm=a.tm?PropertyFactory.getProp(this,a.tm,0,r.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var a=this.canvasContext;a.beginPath(),a.moveTo(0,0),a.lineTo(this.data.w,0),a.lineTo(this.data.w,this.data.h),a.lineTo(0,this.data.h),a.lineTo(0,0),a.clip();var r,n=this.layers.length;for(r=n-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame()},CVCompElement.prototype.destroy=function(){var a,r=this.layers.length;for(a=r-1;a>=0;a-=1)this.elements[a]&&this.elements[a].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(a){return new CVCompElement(a,this.globalData,this)};function CanvasRenderer(a,r){this.animationItem=a,this.renderConfig={clearCanvas:r&&r.clearCanvas!==void 0?r.clearCanvas:!0,context:r&&r.context||null,progressiveLoad:r&&r.progressiveLoad||!1,preserveAspectRatio:r&&r.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:r&&r.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:r&&r.contentVisibility||"visible",className:r&&r.className||"",id:r&&r.id||"",runExpressions:!r||r.runExpressions===void 0||r.runExpressions},this.renderConfig.dpr=r&&r.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=r&&r.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(a){return new CVCompElement(a,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var r=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var n=this.finalTransform.mat.toCSS();r.transform=n,r.webkitTransform=n}this.finalTransform._opMdf&&(r.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(a,r,n){this.initElement(a,r,n)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var a;this.data.hasMask?(a=createNS("rect"),a.setAttribute("width",this.data.sw),a.setAttribute("height",this.data.sh),a.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(a=createTag("div"),a.style.width=this.data.sw+"px",a.style.height=this.data.sh+"px",a.style.backgroundColor=this.data.sc),this.layerElement.appendChild(a)};function HShapeElement(a,r,n){this.shapes=[],this.shapesData=a.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(a,r,n),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var a;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),a=this.svgElement;else{a=createNS("svg");var r=this.comp.data?this.comp.data:this.globalData.compSize;a.setAttribute("width",r.w),a.setAttribute("height",r.h),a.appendChild(this.shapesContainer),this.layerElement.appendChild(a)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=a},HShapeElement.prototype.getTransformedPoint=function(a,r){var n,o=a.length;for(n=0;n<o;n+=1)r=a[n].mProps.v.applyToPointArray(r[0],r[1],0);return r},HShapeElement.prototype.calculateShapeBoundingBox=function(a,r){var n=a.sh.v,o=a.transformers,s,l=n._length,u,c,f,d;if(!(l<=1)){for(s=0;s<l-1;s+=1)u=this.getTransformedPoint(o,n.v[s]),c=this.getTransformedPoint(o,n.o[s]),f=this.getTransformedPoint(o,n.i[s+1]),d=this.getTransformedPoint(o,n.v[s+1]),this.checkBounds(u,c,f,d,r);n.c&&(u=this.getTransformedPoint(o,n.v[s]),c=this.getTransformedPoint(o,n.o[s]),f=this.getTransformedPoint(o,n.i[0]),d=this.getTransformedPoint(o,n.v[0]),this.checkBounds(u,c,f,d,r))}},HShapeElement.prototype.checkBounds=function(a,r,n,o,s){this.getBoundsOfCurve(a,r,n,o);var l=this.shapeBoundingBox;s.x=bmMin(l.left,s.x),s.xMax=bmMax(l.right,s.xMax),s.y=bmMin(l.top,s.y),s.yMax=bmMax(l.bottom,s.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(a,r,n,o){for(var s=[[a[0],o[0]],[a[1],o[1]]],l,u,c,f,d,v,g,y=0;y<2;++y)u=6*a[y]-12*r[y]+6*n[y],l=-3*a[y]+9*r[y]-9*n[y]+3*o[y],c=3*r[y]-3*a[y],u|=0,l|=0,c|=0,l===0&&u===0||(l===0?(f=-c/u,f>0&&f<1&&s[y].push(this.calculateF(f,a,r,n,o,y))):(d=u*u-4*c*l,d>=0&&(v=(-u+bmSqrt(d))/(2*l),v>0&&v<1&&s[y].push(this.calculateF(v,a,r,n,o,y)),g=(-u-bmSqrt(d))/(2*l),g>0&&g<1&&s[y].push(this.calculateF(g,a,r,n,o,y)))));this.shapeBoundingBox.left=bmMin.apply(null,s[0]),this.shapeBoundingBox.top=bmMin.apply(null,s[1]),this.shapeBoundingBox.right=bmMax.apply(null,s[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,s[1])},HShapeElement.prototype.calculateF=function(a,r,n,o,s,l){return bmPow(1-a,3)*r[l]+3*bmPow(1-a,2)*a*n[l]+3*(1-a)*bmPow(a,2)*o[l]+bmPow(a,3)*s[l]},HShapeElement.prototype.calculateBoundingBox=function(a,r){var n,o=a.length;for(n=0;n<o;n+=1)a[n]&&a[n].sh?this.calculateShapeBoundingBox(a[n],r):a[n]&&a[n].it?this.calculateBoundingBox(a[n].it,r):a[n]&&a[n].style&&a[n].w&&this.expandStrokeBoundingBox(a[n].w,r)},HShapeElement.prototype.expandStrokeBoundingBox=function(a,r){var n=0;if(a.keyframes){for(var o=0;o<a.keyframes.length;o+=1){var s=a.keyframes[o].s;s>n&&(n=s)}n*=a.mult}else n=a.v*a.mult;r.x-=n,r.xMax+=n,r.y-=n,r.yMax+=n},HShapeElement.prototype.currentBoxContains=function(a){return this.currentBBox.x<=a.x&&this.currentBBox.y<=a.y&&this.currentBBox.width+this.currentBBox.x>=a.x+a.width&&this.currentBBox.height+this.currentBBox.y>=a.y+a.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var a=this.tempBoundingBox,r=999999;if(a.x=r,a.xMax=-r,a.y=r,a.yMax=-r,this.calculateBoundingBox(this.itemsData,a),a.width=a.xMax<a.x?0:a.xMax-a.x,a.height=a.yMax<a.y?0:a.yMax-a.y,this.currentBoxContains(a))return;var n=!1;if(this.currentBBox.w!==a.width&&(this.currentBBox.w=a.width,this.shapeCont.setAttribute("width",a.width),n=!0),this.currentBBox.h!==a.height&&(this.currentBBox.h=a.height,this.shapeCont.setAttribute("height",a.height),n=!0),n||this.currentBBox.x!==a.x||this.currentBBox.y!==a.y){this.currentBBox.w=a.width,this.currentBBox.h=a.height,this.currentBBox.x=a.x,this.currentBBox.y=a.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var o=this.shapeCont.style,s="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";o.transform=s,o.webkitTransform=s}}};function HTextElement(a,r,n){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(a,r,n)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var a=createNS("g");this.maskedElement.appendChild(a),this.innerElem=a}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var a=this.textProperty.currentData;this.renderedLetters=createSizedArray(a.l?a.l.length:0);var r=this.innerElem.style,n=a.fc?this.buildColor(a.fc):"rgba(0,0,0,0)";r.fill=n,r.color=n,a.sc&&(r.stroke=this.buildColor(a.sc),r.strokeWidth=a.sw+"px");var o=this.globalData.fontManager.getFontByName(a.f);if(!this.globalData.fontManager.chars)if(r.fontSize=a.finalSize+"px",r.lineHeight=a.finalSize+"px",o.fClass)this.innerElem.className=o.fClass;else{r.fontFamily=o.fFamily;var s=a.fWeight,l=a.fStyle;r.fontStyle=l,r.fontWeight=s}var u,c,f=a.l;c=f.length;var d,v,g,y=this.mHelper,_,S="",b=0;for(u=0;u<c;u+=1){if(this.globalData.fontManager.chars?(this.textPaths[b]?d=this.textPaths[b]:(d=createNS("path"),d.setAttribute("stroke-linecap",lineCapEnum[1]),d.setAttribute("stroke-linejoin",lineJoinEnum[2]),d.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[b]?(v=this.textSpans[b],g=v.children[0]):(v=createTag("div"),v.style.lineHeight=0,g=createNS("svg"),g.appendChild(d),styleDiv(v)))):this.isMasked?d=this.textPaths[b]?this.textPaths[b]:createNS("text"):this.textSpans[b]?(v=this.textSpans[b],d=this.textPaths[b]):(v=createTag("span"),styleDiv(v),d=createTag("span"),styleDiv(d),v.appendChild(d)),this.globalData.fontManager.chars){var x=this.globalData.fontManager.getCharData(a.finalText[u],o.fStyle,this.globalData.fontManager.getFontByName(a.f).fFamily),T;if(x?T=x.data:T=null,y.reset(),T&&T.shapes&&T.shapes.length&&(_=T.shapes[0].it,y.scale(a.finalSize/100,a.finalSize/100),S=this.createPathShape(y,_),d.setAttribute("d",S)),this.isMasked)this.innerElem.appendChild(d);else{if(this.innerElem.appendChild(v),T&&T.shapes){document.body.appendChild(g);var A=g.getBBox();g.setAttribute("width",A.width+2),g.setAttribute("height",A.height+2),g.setAttribute("viewBox",A.x-1+" "+(A.y-1)+" "+(A.width+2)+" "+(A.height+2));var w=g.style,C="translate("+(A.x-1)+"px,"+(A.y-1)+"px)";w.transform=C,w.webkitTransform=C,f[u].yOffset=A.y-1}else g.setAttribute("width",1),g.setAttribute("height",1);v.appendChild(g)}}else if(d.textContent=f[u].val,d.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(d);else{this.innerElem.appendChild(v);var E=d.style,P="translate3d(0,"+-a.finalSize/1.2+"px,0)";E.transform=P,E.webkitTransform=P}this.isMasked?this.textSpans[b]=d:this.textSpans[b]=v,this.textSpans[b].style.display="block",this.textPaths[b]=d,b+=1}for(;b<this.textSpans.length;)this.textSpans[b].style.display="none",b+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var a;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),a=this.svgElement.style;var r="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";a.transform=r,a.webkitTransform=r}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var n,o,s=0,l=this.textAnimator.renderedLetters,u=this.textProperty.currentData.l;o=u.length;var c,f,d;for(n=0;n<o;n+=1)u[n].n?s+=1:(f=this.textSpans[n],d=this.textPaths[n],c=l[s],s+=1,c._mdf.m&&(this.isMasked?f.setAttribute("transform",c.m):(f.style.webkitTransform=c.m,f.style.transform=c.m)),f.style.opacity=c.o,c.sw&&c._mdf.sw&&d.setAttribute("stroke-width",c.sw),c.sc&&c._mdf.sc&&d.setAttribute("stroke",c.sc),c.fc&&c._mdf.fc&&(d.setAttribute("fill",c.fc),d.style.color=c.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var v=this.innerElem.getBBox();this.currentBBox.w!==v.width&&(this.currentBBox.w=v.width,this.svgElement.setAttribute("width",v.width)),this.currentBBox.h!==v.height&&(this.currentBBox.h=v.height,this.svgElement.setAttribute("height",v.height));var g=1;if(this.currentBBox.w!==v.width+g*2||this.currentBBox.h!==v.height+g*2||this.currentBBox.x!==v.x-g||this.currentBBox.y!==v.y-g){this.currentBBox.w=v.width+g*2,this.currentBBox.h=v.height+g*2,this.currentBBox.x=v.x-g,this.currentBBox.y=v.y-g,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),a=this.svgElement.style;var y="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";a.transform=y,a.webkitTransform=y}}}};function HCameraElement(a,r,n){this.initFrame(),this.initBaseData(a,r,n),this.initHierarchy();var o=PropertyFactory.getProp;if(this.pe=o(this,a.pe,0,0,this),a.ks.p.s?(this.px=o(this,a.ks.p.x,1,0,this),this.py=o(this,a.ks.p.y,1,0,this),this.pz=o(this,a.ks.p.z,1,0,this)):this.p=o(this,a.ks.p,1,0,this),a.ks.a&&(this.a=o(this,a.ks.a,1,0,this)),a.ks.or.k.length&&a.ks.or.k[0].to){var s,l=a.ks.or.k.length;for(s=0;s<l;s+=1)a.ks.or.k[s].to=null,a.ks.or.k[s].ti=null}this.or=o(this,a.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=o(this,a.ks.rx,0,degToRads,this),this.ry=o(this,a.ks.ry,0,degToRads,this),this.rz=o(this,a.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var a,r=this.comp.threeDElements.length,n,o,s;for(a=0;a<r;a+=1)if(n=this.comp.threeDElements[a],n.type==="3d"){o=n.perspectiveElem.style,s=n.container.style;var l=this.pe.v+"px",u="0px 0px 0px",c="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";o.perspective=l,o.webkitPerspective=l,s.transformOrigin=u,s.mozTransformOrigin=u,s.webkitTransformOrigin=u,o.transform=c,o.webkitTransform=c}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var a=this._isFirstFrame,r,n;if(this.hierarchy)for(n=this.hierarchy.length,r=0;r<n;r+=1)a=this.hierarchy[r].finalTransform.mProp._mdf||a;if(a||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(n=this.hierarchy.length-1,r=n;r>=0;r-=1){var o=this.hierarchy[r].finalTransform.mProp;this.mat.translate(-o.p.v[0],-o.p.v[1],o.p.v[2]),this.mat.rotateX(-o.or.v[0]).rotateY(-o.or.v[1]).rotateZ(o.or.v[2]),this.mat.rotateX(-o.rx.v).rotateY(-o.ry.v).rotateZ(o.rz.v),this.mat.scale(1/o.s.v[0],1/o.s.v[1],1/o.s.v[2]),this.mat.translate(o.a.v[0],o.a.v[1],o.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var s;this.p?s=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:s=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var l=Math.sqrt(Math.pow(s[0],2)+Math.pow(s[1],2)+Math.pow(s[2],2)),u=[s[0]/l,s[1]/l,s[2]/l],c=Math.sqrt(u[2]*u[2]+u[0]*u[0]),f=Math.atan2(u[1],c),d=Math.atan2(u[0],-u[2]);this.mat.rotateY(d).rotateX(-f)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var v=!this._prevMat.equals(this.mat);if((v||this.pe._mdf)&&this.comp.threeDElements){n=this.comp.threeDElements.length;var g,y,_;for(r=0;r<n;r+=1)if(g=this.comp.threeDElements[r],g.type==="3d"){if(v){var S=this.mat.toCSS();_=g.container.style,_.transform=S,_.webkitTransform=S}this.pe._mdf&&(y=g.perspectiveElem.style,y.perspective=this.pe.v+"px",y.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(a){this.prepareProperties(a,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(a,r,n){this.assetData=r.getAssetData(a.refId),this.initElement(a,r,n)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var a=this.globalData.getAssetsPath(this.assetData),r=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",a),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(r),r.crossOrigin="anonymous",r.src=a,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(a,r){this.animationItem=a,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:r&&r.className||"",imagePreserveAspectRatio:r&&r.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(r&&r.hideOnTransparent===!1),filterSize:{width:r&&r.filterSize&&r.filterSize.width||"400%",height:r&&r.filterSize&&r.filterSize.height||"400%",x:r&&r.filterSize&&r.filterSize.x||"-100%",y:r&&r.filterSize&&r.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var a=this.pendingElements.pop();a.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(a,r){var n=a.getBaseElement();if(n){var o=this.layers[r];if(!o.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(n,r);else{for(var s=0,l,u,c;s<r;)this.elements[s]&&this.elements[s]!==!0&&this.elements[s].getBaseElement&&(u=this.elements[s],c=this.layers[s].ddd?this.getThreeDContainerByPos(s):u.getBaseElement(),l=c||l),s+=1;l?(!o.ddd||!this.supports3d)&&this.layerElement.insertBefore(n,l):(!o.ddd||!this.supports3d)&&this.layerElement.appendChild(n)}else this.addTo3dContainer(n,r)}},HybridRendererBase.prototype.createShape=function(a){return this.supports3d?new HShapeElement(a,this.globalData,this):new SVGShapeElement(a,this.globalData,this)},HybridRendererBase.prototype.createText=function(a){return this.supports3d?new HTextElement(a,this.globalData,this):new SVGTextLottieElement(a,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(a){return this.camera=new HCameraElement(a,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(a){return this.supports3d?new HImageElement(a,this.globalData,this):new IImageElement(a,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(a){return this.supports3d?new HSolidElement(a,this.globalData,this):new ISolidElement(a,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(a){for(var r=0,n=this.threeDElements.length;r<n;){if(this.threeDElements[r].startPos<=a&&this.threeDElements[r].endPos>=a)return this.threeDElements[r].perspectiveElem;r+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(a,r){var n=createTag("div"),o,s;styleDiv(n);var l=createTag("div");if(styleDiv(l),r==="3d"){o=n.style,o.width=this.globalData.compSize.w+"px",o.height=this.globalData.compSize.h+"px";var u="50% 50%";o.webkitTransformOrigin=u,o.mozTransformOrigin=u,o.transformOrigin=u,s=l.style;var c="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";s.transform=c,s.webkitTransform=c}n.appendChild(l);var f={container:l,perspectiveElem:n,startPos:a,endPos:a,type:r};return this.threeDElements.push(f),f},HybridRendererBase.prototype.build3dContainers=function(){var a,r=this.layers.length,n,o="";for(a=0;a<r;a+=1)this.layers[a].ddd&&this.layers[a].ty!==3?(o!=="3d"&&(o="3d",n=this.createThreeDContainer(a,"3d")),n.endPos=Math.max(n.endPos,a)):(o!=="2d"&&(o="2d",n=this.createThreeDContainer(a,"2d")),n.endPos=Math.max(n.endPos,a));for(r=this.threeDElements.length,a=r-1;a>=0;a-=1)this.resizerElem.appendChild(this.threeDElements[a].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(a,r){for(var n=0,o=this.threeDElements.length;n<o;){if(r<=this.threeDElements[n].endPos){for(var s=this.threeDElements[n].startPos,l;s<r;)this.elements[s]&&this.elements[s].getBaseElement&&(l=this.elements[s].getBaseElement()),s+=1;l?this.threeDElements[n].container.insertBefore(a,l):this.threeDElements[n].container.appendChild(a);break}n+=1}},HybridRendererBase.prototype.configAnimation=function(a){var r=createTag("div"),n=this.animationItem.wrapper,o=r.style;o.width=a.w+"px",o.height=a.h+"px",this.resizerElem=r,styleDiv(r),o.transformStyle="flat",o.mozTransformStyle="flat",o.webkitTransformStyle="flat",this.renderConfig.className&&r.setAttribute("class",this.renderConfig.className),n.appendChild(r),o.overflow="hidden";var s=createNS("svg");s.setAttribute("width","1"),s.setAttribute("height","1"),styleDiv(s),this.resizerElem.appendChild(s);var l=createNS("defs");s.appendChild(l),this.data=a,this.setupGlobalData(a,s),this.globalData.defs=l,this.layers=a.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var a,r=this.layers?this.layers.length:0;for(a=0;a<r;a+=1)this.elements[a]&&this.elements[a].destroy&&this.elements[a].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var a=this.animationItem.wrapper.offsetWidth,r=this.animationItem.wrapper.offsetHeight,n=a/r,o=this.globalData.compSize.w/this.globalData.compSize.h,s,l,u,c;o>n?(s=a/this.globalData.compSize.w,l=a/this.globalData.compSize.w,u=0,c=(r-this.globalData.compSize.h*(a/this.globalData.compSize.w))/2):(s=r/this.globalData.compSize.h,l=r/this.globalData.compSize.h,u=(a-this.globalData.compSize.w*(r/this.globalData.compSize.h))/2,c=0);var f=this.resizerElem.style;f.webkitTransform="matrix3d("+s+",0,0,0,0,"+l+",0,0,0,0,1,0,"+u+","+c+",0,1)",f.transform=f.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var a=this.globalData.compSize.w,r=this.globalData.compSize.h,n,o=this.threeDElements.length;for(n=0;n<o;n+=1){var s=this.threeDElements[n].perspectiveElem.style;s.webkitPerspective=Math.sqrt(Math.pow(a,2)+Math.pow(r,2))+"px",s.perspective=s.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(a){var r,n=a.length,o=createTag("div");for(r=0;r<n;r+=1)if(a[r].xt){var s=this.createComp(a[r],o,this.globalData.comp,null);s.initExpressions(),this.globalData.projectInterface.registerComposition(s)}};function HCompElement(a,r,n){this.layers=a.layers,this.supports3d=!a.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(a,r,n),this.tm=a.tm?PropertyFactory.getProp(this,a.tm,0,r.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(a,r){for(var n=0,o;n<r;)this.elements[n]&&this.elements[n].getBaseElement&&(o=this.elements[n].getBaseElement()),n+=1;o?this.layerElement.insertBefore(a,o):this.layerElement.appendChild(a)},HCompElement.prototype.createComp=function(a){return this.supports3d?new HCompElement(a,this.globalData,this):new SVGCompElement(a,this.globalData,this)};function HybridRenderer(a,r){this.animationItem=a,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:r&&r.className||"",imagePreserveAspectRatio:r&&r.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(r&&r.hideOnTransparent===!1),filterSize:{width:r&&r.filterSize&&r.filterSize.width||"400%",height:r&&r.filterSize&&r.filterSize.height||"400%",x:r&&r.filterSize&&r.filterSize.x||"-100%",y:r&&r.filterSize&&r.filterSize.y||"-100%"},runExpressions:!r||r.runExpressions===void 0||r.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(a){return this.supports3d?new HCompElement(a,this.globalData,this):new SVGCompElement(a,this.globalData,this)};var CompExpressionInterface=function(){return function(a){function r(n){for(var o=0,s=a.layers.length;o<s;){if(a.layers[o].nm===n||a.layers[o].ind===n)return a.elements[o].layerInterface;o+=1}return null}return Object.defineProperty(r,"_name",{value:a.data.nm}),r.layer=r,r.pixelAspect=1,r.height=a.data.h||a.globalData.compSize.h,r.width=a.data.w||a.globalData.compSize.w,r.pixelAspect=1,r.frameDuration=1/a.globalData.frameRate,r.displayStartTime=0,r.numLayers=a.layers.length,r}}();function _typeof$2(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(n){return typeof n}:_typeof$2=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$2(a)}function seedRandom(a,r){var n=this,o=256,s=6,l=52,u="random",c=r.pow(o,s),f=r.pow(2,l),d=f*2,v=o-1,g;function y(w,C,E){var P=[];C=C===!0?{entropy:!0}:C||{};var I=x(b(C.entropy?[w,A(a)]:w===null?T():w,3),P),M=new _(P),R=function(){for(var $=M.g(s),B=c,F=0;$<f;)$=($+F)*o,B*=o,F=M.g(1);for(;$>=d;)$/=2,B/=2,F>>>=1;return($+F)/B};return R.int32=function(){return M.g(4)|0},R.quick=function(){return M.g(4)/4294967296},R.double=R,x(A(M.S),a),(C.pass||E||function(O,$,B,F){return F&&(F.S&&S(F,M),O.state=function(){return S(M,{})}),B?(r[u]=O,$):O})(R,I,"global"in C?C.global:this==r,C.state)}r["seed"+u]=y;function _(w){var C,E=w.length,P=this,I=0,M=P.i=P.j=0,R=P.S=[];for(E||(w=[E++]);I<o;)R[I]=I++;for(I=0;I<o;I++)R[I]=R[M=v&M+w[I%E]+(C=R[I])],R[M]=C;P.g=function(O){for(var $,B=0,F=P.i,z=P.j,G=P.S;O--;)$=G[F=v&F+1],B=B*o+G[v&(G[F]=G[z=v&z+$])+(G[z]=$)];return P.i=F,P.j=z,B}}function S(w,C){return C.i=w.i,C.j=w.j,C.S=w.S.slice(),C}function b(w,C){var E=[],P=_typeof$2(w),I;if(C&&P=="object")for(I in w)try{E.push(b(w[I],C-1))}catch{}return E.length?E:P=="string"?w:w+"\0"}function x(w,C){for(var E=w+"",P,I=0;I<E.length;)C[v&I]=v&(P^=C[v&I]*19)+E.charCodeAt(I++);return A(C)}function T(){try{var w=new Uint8Array(o);return(n.crypto||n.msCrypto).getRandomValues(w),A(w)}catch{var C=n.navigator,E=C&&C.plugins;return[+new Date,n,E,n.screen,A(a)]}}function A(w){return String.fromCharCode.apply(0,w)}x(r.random(),a)}function initialize$2(a){seedRandom([],a)}var propTypes={SHAPE:"shape"};function _typeof$1(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(n){return typeof n}:_typeof$1=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$1(a)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(a){return a.constructor===Array||a.constructor===Float32Array}function isNumerable(a,r){return a==="number"||r instanceof Number||a==="boolean"||a==="string"}function $bm_neg(a){var r=_typeof$1(a);if(r==="number"||a instanceof Number||r==="boolean")return-a;if($bm_isInstanceOfArray(a)){var n,o=a.length,s=[];for(n=0;n<o;n+=1)s[n]=-a[n];return s}return a.propType?a.v:-a}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(a,r){var n=_typeof$1(a),o=_typeof$1(r);if(isNumerable(n,a)&&isNumerable(o,r)||n==="string"||o==="string")return a+r;if($bm_isInstanceOfArray(a)&&isNumerable(o,r))return a=a.slice(0),a[0]+=r,a;if(isNumerable(n,a)&&$bm_isInstanceOfArray(r))return r=r.slice(0),r[0]=a+r[0],r;if($bm_isInstanceOfArray(a)&&$bm_isInstanceOfArray(r)){for(var s=0,l=a.length,u=r.length,c=[];s<l||s<u;)(typeof a[s]=="number"||a[s]instanceof Number)&&(typeof r[s]=="number"||r[s]instanceof Number)?c[s]=a[s]+r[s]:c[s]=r[s]===void 0?a[s]:a[s]||r[s],s+=1;return c}return 0}var add=sum;function sub(a,r){var n=_typeof$1(a),o=_typeof$1(r);if(isNumerable(n,a)&&isNumerable(o,r))return n==="string"&&(a=parseInt(a,10)),o==="string"&&(r=parseInt(r,10)),a-r;if($bm_isInstanceOfArray(a)&&isNumerable(o,r))return a=a.slice(0),a[0]-=r,a;if(isNumerable(n,a)&&$bm_isInstanceOfArray(r))return r=r.slice(0),r[0]=a-r[0],r;if($bm_isInstanceOfArray(a)&&$bm_isInstanceOfArray(r)){for(var s=0,l=a.length,u=r.length,c=[];s<l||s<u;)(typeof a[s]=="number"||a[s]instanceof Number)&&(typeof r[s]=="number"||r[s]instanceof Number)?c[s]=a[s]-r[s]:c[s]=r[s]===void 0?a[s]:a[s]||r[s],s+=1;return c}return 0}function mul(a,r){var n=_typeof$1(a),o=_typeof$1(r),s;if(isNumerable(n,a)&&isNumerable(o,r))return a*r;var l,u;if($bm_isInstanceOfArray(a)&&isNumerable(o,r)){for(u=a.length,s=createTypedArray("float32",u),l=0;l<u;l+=1)s[l]=a[l]*r;return s}if(isNumerable(n,a)&&$bm_isInstanceOfArray(r)){for(u=r.length,s=createTypedArray("float32",u),l=0;l<u;l+=1)s[l]=a*r[l];return s}return 0}function div(a,r){var n=_typeof$1(a),o=_typeof$1(r),s;if(isNumerable(n,a)&&isNumerable(o,r))return a/r;var l,u;if($bm_isInstanceOfArray(a)&&isNumerable(o,r)){for(u=a.length,s=createTypedArray("float32",u),l=0;l<u;l+=1)s[l]=a[l]/r;return s}if(isNumerable(n,a)&&$bm_isInstanceOfArray(r)){for(u=r.length,s=createTypedArray("float32",u),l=0;l<u;l+=1)s[l]=a/r[l];return s}return 0}function mod(a,r){return typeof a=="string"&&(a=parseInt(a,10)),typeof r=="string"&&(r=parseInt(r,10)),a%r}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(a,r,n){if(r>n){var o=n;n=r,r=o}return Math.min(Math.max(a,r),n)}function radiansToDegrees(a){return a/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(a){return a*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(a,r){if(typeof a=="number"||a instanceof Number)return r=r||0,Math.abs(a-r);r||(r=helperLengthArray);var n,o=Math.min(a.length,r.length),s=0;for(n=0;n<o;n+=1)s+=Math.pow(r[n]-a[n],2);return Math.sqrt(s)}function normalize(a){return div(a,length(a))}function rgbToHsl(a){var r=a[0],n=a[1],o=a[2],s=Math.max(r,n,o),l=Math.min(r,n,o),u,c,f=(s+l)/2;if(s===l)u=0,c=0;else{var d=s-l;switch(c=f>.5?d/(2-s-l):d/(s+l),s){case r:u=(n-o)/d+(n<o?6:0);break;case n:u=(o-r)/d+2;break;case o:u=(r-n)/d+4;break}u/=6}return[u,c,f,a[3]]}function hue2rgb(a,r,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?a+(r-a)*6*n:n<1/2?r:n<2/3?a+(r-a)*(2/3-n)*6:a}function hslToRgb(a){var r=a[0],n=a[1],o=a[2],s,l,u;if(n===0)s=o,u=o,l=o;else{var c=o<.5?o*(1+n):o+n-o*n,f=2*o-c;s=hue2rgb(f,c,r+1/3),l=hue2rgb(f,c,r),u=hue2rgb(f,c,r-1/3)}return[s,l,u,a[3]]}function linear(a,r,n,o,s){if((o===void 0||s===void 0)&&(o=r,s=n,r=0,n=1),n<r){var l=n;n=r,r=l}if(a<=r)return o;if(a>=n)return s;var u=n===r?0:(a-r)/(n-r);if(!o.length)return o+(s-o)*u;var c,f=o.length,d=createTypedArray("float32",f);for(c=0;c<f;c+=1)d[c]=o[c]+(s[c]-o[c])*u;return d}function random(a,r){if(r===void 0&&(a===void 0?(a=0,r=1):(r=a,a=void 0)),r.length){var n,o=r.length;a||(a=createTypedArray("float32",o));var s=createTypedArray("float32",o),l=BMMath.random();for(n=0;n<o;n+=1)s[n]=a[n]+l*(r[n]-a[n]);return s}a===void 0&&(a=0);var u=BMMath.random();return a+u*(r-a)}function createPath(a,r,n,o){var s,l=a.length,u=shapePool.newElement();u.setPathData(!!o,l);var c=[0,0],f,d;for(s=0;s<l;s+=1)f=r&&r[s]?r[s]:c,d=n&&n[s]?n[s]:c,u.setTripleAt(a[s][0],a[s][1],d[0]+a[s][0],d[1]+a[s][1],f[0]+a[s][0],f[1]+a[s][1],s,!0);return u}function initiateExpression(elem,data,property){function noOp(a){return a}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function a(r,n){var o,s,l=this.pv.length?this.pv.length:1,u=createTypedArray("float32",l);r=5;var c=Math.floor(time*r);for(o=0,s=0;o<c;){for(s=0;s<l;s+=1)u[s]+=-n+n*2*BMMath.random();o+=1}var f=time*r,d=f-Math.floor(f),v=createTypedArray("float32",l);if(l>1){for(s=0;s<l;s+=1)v[s]=this.pv[s]+u[s]+(-n+n*2*BMMath.random())*d;return v}return this.pv+u[0]+(-n+n*2*BMMath.random())*d}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(a,r){return loopIn(a,r,!0)}function loopOutDuration(a,r){return loopOut(a,r,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(a,r){var n=[r[0]-a[0],r[1]-a[1],r[2]-a[2]],o=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads,s=-Math.atan2(n[1],n[2])/degToRads;return[s,o,0]}function easeOut(a,r,n,o,s){return applyEase(easeOutBez,a,r,n,o,s)}function easeIn(a,r,n,o,s){return applyEase(easeInBez,a,r,n,o,s)}function ease(a,r,n,o,s){return applyEase(easeInOutBez,a,r,n,o,s)}function applyEase(a,r,n,o,s,l){s===void 0?(s=n,l=o):r=(r-n)/(o-n),r>1?r=1:r<0&&(r=0);var u=a(r);if($bm_isInstanceOfArray(s)){var c,f=s.length,d=createTypedArray("float32",f);for(c=0;c<f;c+=1)d[c]=(l[c]-s[c])*u+s[c];return d}return(l-s)*u+s}function nearestKey(a){var r,n=data.k.length,o,s;if(!data.k.length||typeof data.k[0]=="number")o=0,s=0;else if(o=-1,a*=elem.comp.globalData.frameRate,a<data.k[0].t)o=1,s=data.k[0].t;else{for(r=0;r<n-1;r+=1)if(a===data.k[r].t){o=r+1,s=data.k[r].t;break}else if(a>data.k[r].t&&a<data.k[r+1].t){a-data.k[r].t>data.k[r+1].t-a?(o=r+2,s=data.k[r+1].t):(o=r+1,s=data.k[r].t);break}o===-1&&(o=r+1,s=data.k[r].t)}var l={};return l.index=o,l.time=s/elem.comp.globalData.frameRate,l}function key(a){var r,n,o;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+a);a-=1,r={time:data.k[a].t/elem.comp.globalData.frameRate,value:[]};var s=Object.prototype.hasOwnProperty.call(data.k[a],"s")?data.k[a].s:data.k[a-1].e;for(o=s.length,n=0;n<o;n+=1)r[n]=s[n],r.value[n]=s[n];return r}function framesToTime(a,r){return r||(r=elem.comp.globalData.frameRate),a/r}function timeToFrames(a,r){return!a&&a!==0&&(a=time),r||(r=elem.comp.globalData.frameRate),a*r}function seedRandom(a){BMMath.seedrandom(randSeed+a)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(a,r){return typeof value=="string"?r===void 0?value.substring(a):value.substring(a,r):""}function substr(a,r){return typeof value=="string"?r===void 0?value.substr(a):value.substr(a,r):""}function posterizeTime(a){time=a===0?0:Math.floor(time*a)/a,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(a){return value=a,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var a={};a.initExpressions=r,a.resetFrame=ExpressionManager.resetFrame;function r(n){var o=0,s=[];function l(){o+=1}function u(){o-=1,o===0&&f()}function c(d){s.indexOf(d)===-1&&s.push(d)}function f(){var d,v=s.length;for(d=0;d<v;d+=1)s[d].release();s.length=0}n.renderer.compInterface=CompExpressionInterface(n.renderer),n.renderer.globalData.projectInterface.registerComposition(n.renderer),n.renderer.globalData.pushExpression=l,n.renderer.globalData.popExpression=u,n.renderer.globalData.registerExpressionProperty=c}return a}(),MaskManagerInterface=function(){function a(n,o){this._mask=n,this._data=o}Object.defineProperty(a.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(a.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var r=function(o){var s=createSizedArray(o.viewData.length),l,u=o.viewData.length;for(l=0;l<u;l+=1)s[l]=new a(o.viewData[l],o.masksProperties[l]);var c=function(d){for(l=0;l<u;){if(o.masksProperties[l].nm===d)return s[l];l+=1}return null};return c};return r}(),ExpressionPropertyInterface=function(){var a={pv:0,v:0,mult:1},r={pv:[0,0,0],v:[0,0,0],mult:1};function n(u,c,f){Object.defineProperty(u,"velocity",{get:function(){return c.getVelocityAtTime(c.comp.currentFrame)}}),u.numKeys=c.keyframes?c.keyframes.length:0,u.key=function(d){if(!u.numKeys)return 0;var v="";"s"in c.keyframes[d-1]?v=c.keyframes[d-1].s:"e"in c.keyframes[d-2]?v=c.keyframes[d-2].e:v=c.keyframes[d-2].s;var g=f==="unidimensional"?new Number(v):Object.assign({},v);return g.time=c.keyframes[d-1].t/c.elem.comp.globalData.frameRate,g.value=f==="unidimensional"?v[0]:v,g},u.valueAtTime=c.getValueAtTime,u.speedAtTime=c.getSpeedAtTime,u.velocityAtTime=c.getVelocityAtTime,u.propertyGroup=c.propertyGroup}function o(u){(!u||!("pv"in u))&&(u=a);var c=1/u.mult,f=u.pv*c,d=new Number(f);return d.value=f,n(d,u,"unidimensional"),function(){return u.k&&u.getValue(),f=u.v*c,d.value!==f&&(d=new Number(f),d.value=f,n(d,u,"unidimensional")),d}}function s(u){(!u||!("pv"in u))&&(u=r);var c=1/u.mult,f=u.data&&u.data.l||u.pv.length,d=createTypedArray("float32",f),v=createTypedArray("float32",f);return d.value=v,n(d,u,"multidimensional"),function(){u.k&&u.getValue();for(var g=0;g<f;g+=1)v[g]=u.v[g]*c,d[g]=v[g];return d}}function l(){return a}return function(u){return u?u.propType==="unidimensional"?o(u):s(u):l}}(),TransformExpressionInterface=function(){return function(a){function r(u){switch(u){case"scale":case"Scale":case"ADBE Scale":case 6:return r.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return r.rotation;case"ADBE Rotate X":return r.xRotation;case"ADBE Rotate Y":return r.yRotation;case"position":case"Position":case"ADBE Position":case 2:return r.position;case"ADBE Position_0":return r.xPosition;case"ADBE Position_1":return r.yPosition;case"ADBE Position_2":return r.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return r.anchorPoint;case"opacity":case"Opacity":case 11:return r.opacity;default:return null}}Object.defineProperty(r,"rotation",{get:ExpressionPropertyInterface(a.r||a.rz)}),Object.defineProperty(r,"zRotation",{get:ExpressionPropertyInterface(a.rz||a.r)}),Object.defineProperty(r,"xRotation",{get:ExpressionPropertyInterface(a.rx)}),Object.defineProperty(r,"yRotation",{get:ExpressionPropertyInterface(a.ry)}),Object.defineProperty(r,"scale",{get:ExpressionPropertyInterface(a.s)});var n,o,s,l;return a.p?l=ExpressionPropertyInterface(a.p):(n=ExpressionPropertyInterface(a.px),o=ExpressionPropertyInterface(a.py),a.pz&&(s=ExpressionPropertyInterface(a.pz))),Object.defineProperty(r,"position",{get:function(){return a.p?l():[n(),o(),s?s():0]}}),Object.defineProperty(r,"xPosition",{get:ExpressionPropertyInterface(a.px)}),Object.defineProperty(r,"yPosition",{get:ExpressionPropertyInterface(a.py)}),Object.defineProperty(r,"zPosition",{get:ExpressionPropertyInterface(a.pz)}),Object.defineProperty(r,"anchorPoint",{get:ExpressionPropertyInterface(a.a)}),Object.defineProperty(r,"opacity",{get:ExpressionPropertyInterface(a.o)}),Object.defineProperty(r,"skew",{get:ExpressionPropertyInterface(a.sk)}),Object.defineProperty(r,"skewAxis",{get:ExpressionPropertyInterface(a.sa)}),Object.defineProperty(r,"orientation",{get:ExpressionPropertyInterface(a.or)}),r}}(),LayerExpressionInterface=function(){function a(d){var v=new Matrix;if(d!==void 0){var g=this._elem.finalTransform.mProp.getValueAtTime(d);g.clone(v)}else{var y=this._elem.finalTransform.mProp;y.applyToMatrix(v)}return v}function r(d,v){var g=this.getMatrix(v);return g.props[12]=0,g.props[13]=0,g.props[14]=0,this.applyPoint(g,d)}function n(d,v){var g=this.getMatrix(v);return this.applyPoint(g,d)}function o(d,v){var g=this.getMatrix(v);return g.props[12]=0,g.props[13]=0,g.props[14]=0,this.invertPoint(g,d)}function s(d,v){var g=this.getMatrix(v);return this.invertPoint(g,d)}function l(d,v){if(this._elem.hierarchy&&this._elem.hierarchy.length){var g,y=this._elem.hierarchy.length;for(g=0;g<y;g+=1)this._elem.hierarchy[g].finalTransform.mProp.applyToMatrix(d)}return d.applyToPointArray(v[0],v[1],v[2]||0)}function u(d,v){if(this._elem.hierarchy&&this._elem.hierarchy.length){var g,y=this._elem.hierarchy.length;for(g=0;g<y;g+=1)this._elem.hierarchy[g].finalTransform.mProp.applyToMatrix(d)}return d.inversePoint(v)}function c(d){var v=new Matrix;if(v.reset(),this._elem.finalTransform.mProp.applyToMatrix(v),this._elem.hierarchy&&this._elem.hierarchy.length){var g,y=this._elem.hierarchy.length;for(g=0;g<y;g+=1)this._elem.hierarchy[g].finalTransform.mProp.applyToMatrix(v);return v.inversePoint(d)}return v.inversePoint(d)}function f(){return[1,1,1,1]}return function(d){var v;function g(b){_.mask=new MaskManagerInterface(b,d)}function y(b){_.effect=b}function _(b){switch(b){case"ADBE Root Vectors Group":case"Contents":case 2:return _.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return v;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return _.effect;case"ADBE Text Properties":return _.textInterface;default:return null}}_.getMatrix=a,_.invertPoint=u,_.applyPoint=l,_.toWorld=n,_.toWorldVec=r,_.fromWorld=s,_.fromWorldVec=o,_.toComp=n,_.fromComp=c,_.sampleImage=f,_.sourceRectAtTime=d.sourceRectAtTime.bind(d),_._elem=d,v=TransformExpressionInterface(d.finalTransform.mProp);var S=getDescriptor(v,"anchorPoint");return Object.defineProperties(_,{hasParent:{get:function(){return d.hierarchy.length}},parent:{get:function(){return d.hierarchy[0].layerInterface}},rotation:getDescriptor(v,"rotation"),scale:getDescriptor(v,"scale"),position:getDescriptor(v,"position"),opacity:getDescriptor(v,"opacity"),anchorPoint:S,anchor_point:S,transform:{get:function(){return v}},active:{get:function(){return d.isInRange}}}),_.startTime=d.data.st,_.index=d.data.ind,_.source=d.data.refId,_.height=d.data.ty===0?d.data.h:100,_.width=d.data.ty===0?d.data.w:100,_.inPoint=d.data.ip/d.comp.globalData.frameRate,_.outPoint=d.data.op/d.comp.globalData.frameRate,_._name=d.data.nm,_.registerMaskInterface=g,_.registerEffectsInterface=y,_}}(),propertyGroupFactory=function(){return function(a,r){return function(n){return n=n===void 0?1:n,n<=0?a:r(n-1)}}}(),PropertyInterface=function(){return function(a,r){var n={_name:a};function o(s){return s=s===void 0?1:s,s<=0?n:r(s-1)}return o}}(),EffectsExpressionInterface=function(){var a={createEffectsInterface:r};function r(s,l){if(s.effectsManager){var u=[],c=s.data.ef,f,d=s.effectsManager.effectElements.length;for(f=0;f<d;f+=1)u.push(n(c[f],s.effectsManager.effectElements[f],l,s));var v=s.data.ef||[],g=function(_){for(f=0,d=v.length;f<d;){if(_===v[f].nm||_===v[f].mn||_===v[f].ix)return u[f];f+=1}return null};return Object.defineProperty(g,"numProperties",{get:function(){return v.length}}),g}return null}function n(s,l,u,c){function f(_){for(var S=s.ef,b=0,x=S.length;b<x;){if(_===S[b].nm||_===S[b].mn||_===S[b].ix)return S[b].ty===5?v[b]:v[b]();b+=1}throw new Error}var d=propertyGroupFactory(f,u),v=[],g,y=s.ef.length;for(g=0;g<y;g+=1)s.ef[g].ty===5?v.push(n(s.ef[g],l.effectElements[g],l.effectElements[g].propertyGroup,c)):v.push(o(l.effectElements[g],s.ef[g].ty,c,d));return s.mn==="ADBE Color Control"&&Object.defineProperty(f,"color",{get:function(){return v[0]()}}),Object.defineProperties(f,{numProperties:{get:function(){return s.np}},_name:{value:s.nm},propertyGroup:{value:d}}),f.enabled=s.en!==0,f.active=f.enabled,f}function o(s,l,u,c){var f=ExpressionPropertyInterface(s.p);function d(){return l===10?u.comp.compInterface(s.p.v):f()}return s.p.setGroupProperty&&s.p.setGroupProperty(PropertyInterface("",c)),d}return a}(),ShapePathInterface=function(){return function(r,n,o){var s=n.sh;function l(c){return c==="Shape"||c==="shape"||c==="Path"||c==="path"||c==="ADBE Vector Shape"||c===2?l.path:null}var u=propertyGroupFactory(l,o);return s.setGroupProperty(PropertyInterface("Path",u)),Object.defineProperties(l,{path:{get:function(){return s.k&&s.getValue(),s}},shape:{get:function(){return s.k&&s.getValue(),s}},_name:{value:r.nm},ix:{value:r.ix},propertyIndex:{value:r.ix},mn:{value:r.mn},propertyGroup:{value:o}}),l}}(),ShapeExpressionInterface=function(){function a(S,b,x){var T=[],A,w=S?S.length:0;for(A=0;A<w;A+=1)S[A].ty==="gr"?T.push(n(S[A],b[A],x)):S[A].ty==="fl"?T.push(o(S[A],b[A],x)):S[A].ty==="st"?T.push(u(S[A],b[A],x)):S[A].ty==="tm"?T.push(c(S[A],b[A],x)):S[A].ty==="tr"||(S[A].ty==="el"?T.push(d(S[A],b[A],x)):S[A].ty==="sr"?T.push(v(S[A],b[A],x)):S[A].ty==="sh"?T.push(ShapePathInterface(S[A],b[A],x)):S[A].ty==="rc"?T.push(g(S[A],b[A],x)):S[A].ty==="rd"?T.push(y(S[A],b[A],x)):S[A].ty==="rp"?T.push(_(S[A],b[A],x)):S[A].ty==="gf"?T.push(s(S[A],b[A],x)):T.push(l(S[A],b[A])));return T}function r(S,b,x){var T,A=function(E){for(var P=0,I=T.length;P<I;){if(T[P]._name===E||T[P].mn===E||T[P].propertyIndex===E||T[P].ix===E||T[P].ind===E)return T[P];P+=1}return typeof E=="number"?T[E-1]:null};A.propertyGroup=propertyGroupFactory(A,x),T=a(S.it,b.it,A.propertyGroup),A.numProperties=T.length;var w=f(S.it[S.it.length-1],b.it[b.it.length-1],A.propertyGroup);return A.transform=w,A.propertyIndex=S.cix,A._name=S.nm,A}function n(S,b,x){var T=function(E){switch(E){case"ADBE Vectors Group":case"Contents":case 2:return T.content;default:return T.transform}};T.propertyGroup=propertyGroupFactory(T,x);var A=r(S,b,T.propertyGroup),w=f(S.it[S.it.length-1],b.it[b.it.length-1],T.propertyGroup);return T.content=A,T.transform=w,Object.defineProperty(T,"_name",{get:function(){return S.nm}}),T.numProperties=S.np,T.propertyIndex=S.ix,T.nm=S.nm,T.mn=S.mn,T}function o(S,b,x){function T(A){return A==="Color"||A==="color"?T.color:A==="Opacity"||A==="opacity"?T.opacity:null}return Object.defineProperties(T,{color:{get:ExpressionPropertyInterface(b.c)},opacity:{get:ExpressionPropertyInterface(b.o)},_name:{value:S.nm},mn:{value:S.mn}}),b.c.setGroupProperty(PropertyInterface("Color",x)),b.o.setGroupProperty(PropertyInterface("Opacity",x)),T}function s(S,b,x){function T(A){return A==="Start Point"||A==="start point"?T.startPoint:A==="End Point"||A==="end point"?T.endPoint:A==="Opacity"||A==="opacity"?T.opacity:null}return Object.defineProperties(T,{startPoint:{get:ExpressionPropertyInterface(b.s)},endPoint:{get:ExpressionPropertyInterface(b.e)},opacity:{get:ExpressionPropertyInterface(b.o)},type:{get:function(){return"a"}},_name:{value:S.nm},mn:{value:S.mn}}),b.s.setGroupProperty(PropertyInterface("Start Point",x)),b.e.setGroupProperty(PropertyInterface("End Point",x)),b.o.setGroupProperty(PropertyInterface("Opacity",x)),T}function l(){function S(){return null}return S}function u(S,b,x){var T=propertyGroupFactory(I,x),A=propertyGroupFactory(P,T);function w(M){Object.defineProperty(P,S.d[M].nm,{get:ExpressionPropertyInterface(b.d.dataProps[M].p)})}var C,E=S.d?S.d.length:0,P={};for(C=0;C<E;C+=1)w(C),b.d.dataProps[C].p.setGroupProperty(A);function I(M){return M==="Color"||M==="color"?I.color:M==="Opacity"||M==="opacity"?I.opacity:M==="Stroke Width"||M==="stroke width"?I.strokeWidth:null}return Object.defineProperties(I,{color:{get:ExpressionPropertyInterface(b.c)},opacity:{get:ExpressionPropertyInterface(b.o)},strokeWidth:{get:ExpressionPropertyInterface(b.w)},dash:{get:function(){return P}},_name:{value:S.nm},mn:{value:S.mn}}),b.c.setGroupProperty(PropertyInterface("Color",T)),b.o.setGroupProperty(PropertyInterface("Opacity",T)),b.w.setGroupProperty(PropertyInterface("Stroke Width",T)),I}function c(S,b,x){function T(w){return w===S.e.ix||w==="End"||w==="end"?T.end:w===S.s.ix?T.start:w===S.o.ix?T.offset:null}var A=propertyGroupFactory(T,x);return T.propertyIndex=S.ix,b.s.setGroupProperty(PropertyInterface("Start",A)),b.e.setGroupProperty(PropertyInterface("End",A)),b.o.setGroupProperty(PropertyInterface("Offset",A)),T.propertyIndex=S.ix,T.propertyGroup=x,Object.defineProperties(T,{start:{get:ExpressionPropertyInterface(b.s)},end:{get:ExpressionPropertyInterface(b.e)},offset:{get:ExpressionPropertyInterface(b.o)},_name:{value:S.nm}}),T.mn=S.mn,T}function f(S,b,x){function T(w){return S.a.ix===w||w==="Anchor Point"?T.anchorPoint:S.o.ix===w||w==="Opacity"?T.opacity:S.p.ix===w||w==="Position"?T.position:S.r.ix===w||w==="Rotation"||w==="ADBE Vector Rotation"?T.rotation:S.s.ix===w||w==="Scale"?T.scale:S.sk&&S.sk.ix===w||w==="Skew"?T.skew:S.sa&&S.sa.ix===w||w==="Skew Axis"?T.skewAxis:null}var A=propertyGroupFactory(T,x);return b.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",A)),b.transform.mProps.p.setGroupProperty(PropertyInterface("Position",A)),b.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",A)),b.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",A)),b.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",A)),b.transform.mProps.sk&&(b.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",A)),b.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",A))),b.transform.op.setGroupProperty(PropertyInterface("Opacity",A)),Object.defineProperties(T,{opacity:{get:ExpressionPropertyInterface(b.transform.mProps.o)},position:{get:ExpressionPropertyInterface(b.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(b.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(b.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(b.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(b.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(b.transform.mProps.sa)},_name:{value:S.nm}}),T.ty="tr",T.mn=S.mn,T.propertyGroup=x,T}function d(S,b,x){function T(C){return S.p.ix===C?T.position:S.s.ix===C?T.size:null}var A=propertyGroupFactory(T,x);T.propertyIndex=S.ix;var w=b.sh.ty==="tm"?b.sh.prop:b.sh;return w.s.setGroupProperty(PropertyInterface("Size",A)),w.p.setGroupProperty(PropertyInterface("Position",A)),Object.defineProperties(T,{size:{get:ExpressionPropertyInterface(w.s)},position:{get:ExpressionPropertyInterface(w.p)},_name:{value:S.nm}}),T.mn=S.mn,T}function v(S,b,x){function T(C){return S.p.ix===C?T.position:S.r.ix===C?T.rotation:S.pt.ix===C?T.points:S.or.ix===C||C==="ADBE Vector Star Outer Radius"?T.outerRadius:S.os.ix===C?T.outerRoundness:S.ir&&(S.ir.ix===C||C==="ADBE Vector Star Inner Radius")?T.innerRadius:S.is&&S.is.ix===C?T.innerRoundness:null}var A=propertyGroupFactory(T,x),w=b.sh.ty==="tm"?b.sh.prop:b.sh;return T.propertyIndex=S.ix,w.or.setGroupProperty(PropertyInterface("Outer Radius",A)),w.os.setGroupProperty(PropertyInterface("Outer Roundness",A)),w.pt.setGroupProperty(PropertyInterface("Points",A)),w.p.setGroupProperty(PropertyInterface("Position",A)),w.r.setGroupProperty(PropertyInterface("Rotation",A)),S.ir&&(w.ir.setGroupProperty(PropertyInterface("Inner Radius",A)),w.is.setGroupProperty(PropertyInterface("Inner Roundness",A))),Object.defineProperties(T,{position:{get:ExpressionPropertyInterface(w.p)},rotation:{get:ExpressionPropertyInterface(w.r)},points:{get:ExpressionPropertyInterface(w.pt)},outerRadius:{get:ExpressionPropertyInterface(w.or)},outerRoundness:{get:ExpressionPropertyInterface(w.os)},innerRadius:{get:ExpressionPropertyInterface(w.ir)},innerRoundness:{get:ExpressionPropertyInterface(w.is)},_name:{value:S.nm}}),T.mn=S.mn,T}function g(S,b,x){function T(C){return S.p.ix===C?T.position:S.r.ix===C?T.roundness:S.s.ix===C||C==="Size"||C==="ADBE Vector Rect Size"?T.size:null}var A=propertyGroupFactory(T,x),w=b.sh.ty==="tm"?b.sh.prop:b.sh;return T.propertyIndex=S.ix,w.p.setGroupProperty(PropertyInterface("Position",A)),w.s.setGroupProperty(PropertyInterface("Size",A)),w.r.setGroupProperty(PropertyInterface("Rotation",A)),Object.defineProperties(T,{position:{get:ExpressionPropertyInterface(w.p)},roundness:{get:ExpressionPropertyInterface(w.r)},size:{get:ExpressionPropertyInterface(w.s)},_name:{value:S.nm}}),T.mn=S.mn,T}function y(S,b,x){function T(C){return S.r.ix===C||C==="Round Corners 1"?T.radius:null}var A=propertyGroupFactory(T,x),w=b;return T.propertyIndex=S.ix,w.rd.setGroupProperty(PropertyInterface("Radius",A)),Object.defineProperties(T,{radius:{get:ExpressionPropertyInterface(w.rd)},_name:{value:S.nm}}),T.mn=S.mn,T}function _(S,b,x){function T(C){return S.c.ix===C||C==="Copies"?T.copies:S.o.ix===C||C==="Offset"?T.offset:null}var A=propertyGroupFactory(T,x),w=b;return T.propertyIndex=S.ix,w.c.setGroupProperty(PropertyInterface("Copies",A)),w.o.setGroupProperty(PropertyInterface("Offset",A)),Object.defineProperties(T,{copies:{get:ExpressionPropertyInterface(w.c)},offset:{get:ExpressionPropertyInterface(w.o)},_name:{value:S.nm}}),T.mn=S.mn,T}return function(S,b,x){var T;function A(C){if(typeof C=="number")return C=C===void 0?1:C,C===0?x:T[C-1];for(var E=0,P=T.length;E<P;){if(T[E]._name===C)return T[E];E+=1}return null}function w(){return x}return A.propertyGroup=propertyGroupFactory(A,w),T=a(S,b,A.propertyGroup),A.numProperties=T.length,A._name="Contents",A}}(),TextExpressionInterface=function(){return function(a){var r;function n(o){switch(o){case"ADBE Text Document":return n.sourceText;default:return null}}return Object.defineProperty(n,"sourceText",{get:function(){a.textProperty.getValue();var s=a.textProperty.currentData.t;return(!r||s!==r.value)&&(r=new String(s),r.value=s||new String(s),Object.defineProperty(r,"style",{get:function(){return{fillColor:a.textProperty.currentData.fc}}})),r}}),n}}();function _typeof(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(n){return typeof n}:_typeof=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(a)}var FootageInterface=function(){var a=function(o){var s="",l=o.getFootageData();function u(){return s="",l=o.getFootageData(),c}function c(f){if(l[f])return s=f,l=l[f],_typeof(l)==="object"?c:l;var d=f.indexOf(s);if(d!==-1){var v=parseInt(f.substr(d+s.length),10);return l=l[v],_typeof(l)==="object"?c:l}return""}return u},r=function(o){function s(l){return l==="Outline"?s.outlineInterface():null}return s._name="Outline",s.outlineInterface=a(o),s};return function(n){function o(s){return s==="Data"?o.dataInterface:null}return o._name="Data",o.dataInterface=r(n),o}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(a){return interfaces[a]||null}var expressionHelpers=function(){function a(u,c,f){c.x&&(f.k=!0,f.x=!0,f.initiateExpression=ExpressionManager.initiateExpression,f.effectsSequence.push(f.initiateExpression(u,c,f).bind(f)))}function r(u){return u*=this.elem.globalData.frameRate,u-=this.offsetTime,u!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<u?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(u,this._cachingAtTime),this._cachingAtTime.lastFrame=u),this._cachingAtTime.value}function n(u){var c=-.01,f=this.getValueAtTime(u),d=this.getValueAtTime(u+c),v=0;if(f.length){var g;for(g=0;g<f.length;g+=1)v+=Math.pow(d[g]-f[g],2);v=Math.sqrt(v)*100}else v=0;return v}function o(u){if(this.vel!==void 0)return this.vel;var c=-.001,f=this.getValueAtTime(u),d=this.getValueAtTime(u+c),v;if(f.length){v=createTypedArray("float32",f.length);var g;for(g=0;g<f.length;g+=1)v[g]=(d[g]-f[g])/c}else v=(d-f)/c;return v}function s(){return this.pv}function l(u){this.propertyGroup=u}return{searchExpressions:a,getSpeedAtTime:n,getVelocityAtTime:o,getValueAtTime:r,getStaticValueAtTime:s,setGroupProperty:l}}();function addPropertyDecorator(){function a(y,_,S){if(!this.k||!this.keyframes)return this.pv;y=y?y.toLowerCase():"";var b=this.comp.renderedFrame,x=this.keyframes,T=x[x.length-1].t;if(b<=T)return this.pv;var A,w;S?(_?A=Math.abs(T-this.elem.comp.globalData.frameRate*_):A=Math.max(0,T-this.elem.data.ip),w=T-A):((!_||_>x.length-1)&&(_=x.length-1),w=x[x.length-1-_].t,A=T-w);var C,E,P;if(y==="pingpong"){var I=Math.floor((b-w)/A);if(I%2!==0)return this.getValueAtTime((A-(b-w)%A+w)/this.comp.globalData.frameRate,0)}else if(y==="offset"){var M=this.getValueAtTime(w/this.comp.globalData.frameRate,0),R=this.getValueAtTime(T/this.comp.globalData.frameRate,0),O=this.getValueAtTime(((b-w)%A+w)/this.comp.globalData.frameRate,0),$=Math.floor((b-w)/A);if(this.pv.length){for(P=new Array(M.length),E=P.length,C=0;C<E;C+=1)P[C]=(R[C]-M[C])*$+O[C];return P}return(R-M)*$+O}else if(y==="continue"){var B=this.getValueAtTime(T/this.comp.globalData.frameRate,0),F=this.getValueAtTime((T-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(P=new Array(B.length),E=P.length,C=0;C<E;C+=1)P[C]=B[C]+(B[C]-F[C])*((b-T)/this.comp.globalData.frameRate)/5e-4;return P}return B+(B-F)*((b-T)/.001)}return this.getValueAtTime(((b-w)%A+w)/this.comp.globalData.frameRate,0)}function r(y,_,S){if(!this.k)return this.pv;y=y?y.toLowerCase():"";var b=this.comp.renderedFrame,x=this.keyframes,T=x[0].t;if(b>=T)return this.pv;var A,w;S?(_?A=Math.abs(this.elem.comp.globalData.frameRate*_):A=Math.max(0,this.elem.data.op-T),w=T+A):((!_||_>x.length-1)&&(_=x.length-1),w=x[_].t,A=w-T);var C,E,P;if(y==="pingpong"){var I=Math.floor((T-b)/A);if(I%2===0)return this.getValueAtTime(((T-b)%A+T)/this.comp.globalData.frameRate,0)}else if(y==="offset"){var M=this.getValueAtTime(T/this.comp.globalData.frameRate,0),R=this.getValueAtTime(w/this.comp.globalData.frameRate,0),O=this.getValueAtTime((A-(T-b)%A+T)/this.comp.globalData.frameRate,0),$=Math.floor((T-b)/A)+1;if(this.pv.length){for(P=new Array(M.length),E=P.length,C=0;C<E;C+=1)P[C]=O[C]-(R[C]-M[C])*$;return P}return O-(R-M)*$}else if(y==="continue"){var B=this.getValueAtTime(T/this.comp.globalData.frameRate,0),F=this.getValueAtTime((T+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(P=new Array(B.length),E=P.length,C=0;C<E;C+=1)P[C]=B[C]+(B[C]-F[C])*(T-b)/.001;return P}return B+(B-F)*(T-b)/.001}return this.getValueAtTime((A-((T-b)%A+T))/this.comp.globalData.frameRate,0)}function n(y,_){if(!this.k)return this.pv;if(y=(y||.4)*.5,_=Math.floor(_||5),_<=1)return this.pv;var S=this.comp.renderedFrame/this.comp.globalData.frameRate,b=S-y,x=S+y,T=_>1?(x-b)/(_-1):1,A=0,w=0,C;this.pv.length?C=createTypedArray("float32",this.pv.length):C=0;for(var E;A<_;){if(E=this.getValueAtTime(b+A*T),this.pv.length)for(w=0;w<this.pv.length;w+=1)C[w]+=E[w];else C+=E;A+=1}if(this.pv.length)for(w=0;w<this.pv.length;w+=1)C[w]/=_;else C/=_;return C}function o(y){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var _=this._transformCachingAtTime.v;if(_.cloneFromProps(this.pre.props),this.appliedTransformations<1){var S=this.a.getValueAtTime(y);_.translate(-S[0]*this.a.mult,-S[1]*this.a.mult,S[2]*this.a.mult)}if(this.appliedTransformations<2){var b=this.s.getValueAtTime(y);_.scale(b[0]*this.s.mult,b[1]*this.s.mult,b[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var x=this.sk.getValueAtTime(y),T=this.sa.getValueAtTime(y);_.skewFromAxis(-x*this.sk.mult,T*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var A=this.r.getValueAtTime(y);_.rotate(-A*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var w=this.rz.getValueAtTime(y),C=this.ry.getValueAtTime(y),E=this.rx.getValueAtTime(y),P=this.or.getValueAtTime(y);_.rotateZ(-w*this.rz.mult).rotateY(C*this.ry.mult).rotateX(E*this.rx.mult).rotateZ(-P[2]*this.or.mult).rotateY(P[1]*this.or.mult).rotateX(P[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var I=this.px.getValueAtTime(y),M=this.py.getValueAtTime(y);if(this.data.p.z){var R=this.pz.getValueAtTime(y);_.translate(I*this.px.mult,M*this.py.mult,-R*this.pz.mult)}else _.translate(I*this.px.mult,M*this.py.mult,0)}else{var O=this.p.getValueAtTime(y);_.translate(O[0]*this.p.mult,O[1]*this.p.mult,-O[2]*this.p.mult)}return _}function s(){return this.v.clone(new Matrix)}var l=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(y,_,S){var b=l(y,_,S);return b.dynamicProperties.length?b.getValueAtTime=o.bind(b):b.getValueAtTime=s.bind(b),b.setGroupProperty=expressionHelpers.setGroupProperty,b};var u=PropertyFactory.getProp;PropertyFactory.getProp=function(y,_,S,b,x){var T=u(y,_,S,b,x);T.kf?T.getValueAtTime=expressionHelpers.getValueAtTime.bind(T):T.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(T),T.setGroupProperty=expressionHelpers.setGroupProperty,T.loopOut=a,T.loopIn=r,T.smooth=n,T.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(T),T.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(T),T.numKeys=_.a===1?_.k.length:0,T.propertyIndex=_.ix;var A=0;return S!==0&&(A=createTypedArray("float32",_.a===1?_.k[0].s.length:_.k.length)),T._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:A},expressionHelpers.searchExpressions(y,_,T),T.k&&x.addDynamicProperty(T),T};function c(y){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),y*=this.elem.globalData.frameRate,y-=this.offsetTime,y!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<y?this._caching.lastIndex:0,this._cachingAtTime.lastTime=y,this.interpolateShape(y,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var f=ShapePropertyFactory.getConstructorFunction(),d=ShapePropertyFactory.getKeyframedConstructorFunction();function v(){}v.prototype={vertices:function(_,S){this.k&&this.getValue();var b=this.v;S!==void 0&&(b=this.getValueAtTime(S,0));var x,T=b._length,A=b[_],w=b.v,C=createSizedArray(T);for(x=0;x<T;x+=1)_==="i"||_==="o"?C[x]=[A[x][0]-w[x][0],A[x][1]-w[x][1]]:C[x]=[A[x][0],A[x][1]];return C},points:function(_){return this.vertices("v",_)},inTangents:function(_){return this.vertices("i",_)},outTangents:function(_){return this.vertices("o",_)},isClosed:function(){return this.v.c},pointOnPath:function(_,S){var b=this.v;S!==void 0&&(b=this.getValueAtTime(S,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(b));for(var x=this._segmentsLength,T=x.lengths,A=x.totalLength*_,w=0,C=T.length,E=0,P;w<C;){if(E+T[w].addedLength>A){var I=w,M=b.c&&w===C-1?0:w+1,R=(A-E)/T[w].addedLength;P=bez.getPointInSegment(b.v[I],b.v[M],b.o[I],b.i[M],R,T[w]);break}else E+=T[w].addedLength;w+=1}return P||(P=b.c?[b.v[0][0],b.v[0][1]]:[b.v[b._length-1][0],b.v[b._length-1][1]]),P},vectorOnPath:function(_,S,b){_==1?_=this.v.c:_==0&&(_=.999);var x=this.pointOnPath(_,S),T=this.pointOnPath(_+.001,S),A=T[0]-x[0],w=T[1]-x[1],C=Math.sqrt(Math.pow(A,2)+Math.pow(w,2));if(C===0)return[0,0];var E=b==="tangent"?[A/C,w/C]:[-w/C,A/C];return E},tangentOnPath:function(_,S){return this.vectorOnPath(_,S,"tangent")},normalOnPath:function(_,S){return this.vectorOnPath(_,S,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([v],f),extendPrototype([v],d),d.prototype.getValueAtTime=c,d.prototype.initiateExpression=ExpressionManager.initiateExpression;var g=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(y,_,S,b,x){var T=g(y,_,S,b,x);return T.propertyIndex=_.ix,T.lock=!1,S===3?expressionHelpers.searchExpressions(y,_.pt,T):S===4&&expressionHelpers.searchExpressions(y,_.ks,T),T.k&&y.addDynamicProperty(T),T}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function a(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(r,n){var o=this.calculateExpression(n);if(r.t!==o){var s={};return this.copyData(s,r),s.t=o.toString(),s.__complete=!1,s}return r},TextProperty.prototype.searchProperty=function(){var r=this.searchKeyframes(),n=this.searchExpressions();return this.kf=r||n,this.kf},TextProperty.prototype.searchExpressions=a}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function a(r,n){var o=createNS("feMerge");o.setAttribute("result",r);var s,l;for(l=0;l<n.length;l+=1)s=createNS("feMergeNode"),s.setAttribute("in",n[l]),o.appendChild(s),o.appendChild(s);return o}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(a,r,n,o,s){this.filterManager=r;var l=createNS("feColorMatrix");l.setAttribute("type","matrix"),l.setAttribute("color-interpolation-filters","linearRGB"),l.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=l,l.setAttribute("result",o+"_tint_1"),a.appendChild(l),l=createNS("feColorMatrix"),l.setAttribute("type","matrix"),l.setAttribute("color-interpolation-filters","sRGB"),l.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),l.setAttribute("result",o+"_tint_2"),a.appendChild(l),this.matrixFilter=l;var u=this.createMergeNode(o,[s,o+"_tint_1",o+"_tint_2"]);a.appendChild(u)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(a){if(a||this.filterManager._mdf){var r=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,o=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+o+" 0"),this.matrixFilter.setAttribute("values",n[0]-r[0]+" 0 0 0 "+r[0]+" "+(n[1]-r[1])+" 0 0 0 "+r[1]+" "+(n[2]-r[2])+" 0 0 0 "+r[2]+" 0 0 0 1 0")}};function SVGFillFilter(a,r,n,o){this.filterManager=r;var s=createNS("feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),s.setAttribute("result",o),a.appendChild(s),this.matrixFilter=s}SVGFillFilter.prototype.renderFrame=function(a){if(a||this.filterManager._mdf){var r=this.filterManager.effectElements[2].p.v,n=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+r[0]+" 0 0 0 0 "+r[1]+" 0 0 0 0 "+r[2]+" 0 0 0 "+n+" 0")}};function SVGStrokeEffect(a,r,n){this.initialized=!1,this.filterManager=r,this.elem=n,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var a=this.elem.layerElement.children||this.elem.layerElement.childNodes,r,n,o,s;for(this.filterManager.effectElements[1].p.v===1?(s=this.elem.maskManager.masksProperties.length,o=0):(o=this.filterManager.effectElements[0].p.v-1,s=o+1),n=createNS("g"),n.setAttribute("fill","none"),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-dashoffset",1),o;o<s;o+=1)r=createNS("path"),n.appendChild(r),this.paths.push({p:r,m:o});if(this.filterManager.effectElements[10].p.v===3){var l=createNS("mask"),u=createElementID();l.setAttribute("id",u),l.setAttribute("mask-type","alpha"),l.appendChild(n),this.elem.globalData.defs.appendChild(l);var c=createNS("g");for(c.setAttribute("mask","url("+getLocationHref()+"#"+u+")");a[0];)c.appendChild(a[0]);this.elem.layerElement.appendChild(c),this.masker=l,n.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(a=this.elem.layerElement.children||this.elem.layerElement.childNodes;a.length;)this.elem.layerElement.removeChild(a[0]);this.elem.layerElement.appendChild(n),this.elem.layerElement.removeAttribute("mask"),n.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=n},SVGStrokeEffect.prototype.renderFrame=function(a){this.initialized||this.initialize();var r,n=this.paths.length,o,s;for(r=0;r<n;r+=1)if(this.paths[r].m!==-1&&(o=this.elem.maskManager.viewData[this.paths[r].m],s=this.paths[r].p,(a||this.filterManager._mdf||o.prop._mdf)&&s.setAttribute("d",o.lastPath),a||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||o.prop._mdf)){var l;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var u=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,c=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,f=s.getTotalLength();l="0 0 0 "+f*u+" ";var d=f*(c-u),v=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,g=Math.floor(d/v),y;for(y=0;y<g;y+=1)l+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";l+="0 "+f*10+" 0 0"}else l="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;s.setAttribute("stroke-dasharray",l)}if((a||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(a||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(a||this.filterManager.effectElements[3].p._mdf)){var _=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(_[0]*255)+","+bmFloor(_[1]*255)+","+bmFloor(_[2]*255)+")")}};function SVGTritoneFilter(a,r,n,o){this.filterManager=r;var s=createNS("feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","linearRGB"),s.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),a.appendChild(s);var l=createNS("feComponentTransfer");l.setAttribute("color-interpolation-filters","sRGB"),l.setAttribute("result",o),this.matrixFilter=l;var u=createNS("feFuncR");u.setAttribute("type","table"),l.appendChild(u),this.feFuncR=u;var c=createNS("feFuncG");c.setAttribute("type","table"),l.appendChild(c),this.feFuncG=c;var f=createNS("feFuncB");f.setAttribute("type","table"),l.appendChild(f),this.feFuncB=f,a.appendChild(l)}SVGTritoneFilter.prototype.renderFrame=function(a){if(a||this.filterManager._mdf){var r=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,o=this.filterManager.effectElements[2].p.v,s=o[0]+" "+n[0]+" "+r[0],l=o[1]+" "+n[1]+" "+r[1],u=o[2]+" "+n[2]+" "+r[2];this.feFuncR.setAttribute("tableValues",s),this.feFuncG.setAttribute("tableValues",l),this.feFuncB.setAttribute("tableValues",u)}};function SVGProLevelsFilter(a,r,n,o){this.filterManager=r;var s=this.filterManager.effectElements,l=createNS("feComponentTransfer");(s[10].p.k||s[10].p.v!==0||s[11].p.k||s[11].p.v!==1||s[12].p.k||s[12].p.v!==1||s[13].p.k||s[13].p.v!==0||s[14].p.k||s[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",l)),(s[17].p.k||s[17].p.v!==0||s[18].p.k||s[18].p.v!==1||s[19].p.k||s[19].p.v!==1||s[20].p.k||s[20].p.v!==0||s[21].p.k||s[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",l)),(s[24].p.k||s[24].p.v!==0||s[25].p.k||s[25].p.v!==1||s[26].p.k||s[26].p.v!==1||s[27].p.k||s[27].p.v!==0||s[28].p.k||s[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",l)),(s[31].p.k||s[31].p.v!==0||s[32].p.k||s[32].p.v!==1||s[33].p.k||s[33].p.v!==1||s[34].p.k||s[34].p.v!==0||s[35].p.k||s[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",l)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(l.setAttribute("color-interpolation-filters","sRGB"),a.appendChild(l)),(s[3].p.k||s[3].p.v!==0||s[4].p.k||s[4].p.v!==1||s[5].p.k||s[5].p.v!==1||s[6].p.k||s[6].p.v!==0||s[7].p.k||s[7].p.v!==1)&&(l=createNS("feComponentTransfer"),l.setAttribute("color-interpolation-filters","sRGB"),l.setAttribute("result",o),a.appendChild(l),this.feFuncRComposed=this.createFeFunc("feFuncR",l),this.feFuncGComposed=this.createFeFunc("feFuncG",l),this.feFuncBComposed=this.createFeFunc("feFuncB",l))}SVGProLevelsFilter.prototype.createFeFunc=function(a,r){var n=createNS(a);return n.setAttribute("type","table"),r.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(a,r,n,o,s){for(var l=0,u=256,c,f=Math.min(a,r),d=Math.max(a,r),v=Array.call(null,{length:u}),g,y=0,_=s-o,S=r-a;l<=256;)c=l/256,c<=f?g=S<0?s:o:c>=d?g=S<0?o:s:g=o+_*Math.pow((c-a)/S,1/n),v[y]=g,y+=1,l+=256/(u-1);return v.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(a){if(a||this.filterManager._mdf){var r,n=this.filterManager.effectElements;this.feFuncRComposed&&(a||n[3].p._mdf||n[4].p._mdf||n[5].p._mdf||n[6].p._mdf||n[7].p._mdf)&&(r=this.getTableValue(n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v,n[7].p.v),this.feFuncRComposed.setAttribute("tableValues",r),this.feFuncGComposed.setAttribute("tableValues",r),this.feFuncBComposed.setAttribute("tableValues",r)),this.feFuncR&&(a||n[10].p._mdf||n[11].p._mdf||n[12].p._mdf||n[13].p._mdf||n[14].p._mdf)&&(r=this.getTableValue(n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v,n[14].p.v),this.feFuncR.setAttribute("tableValues",r)),this.feFuncG&&(a||n[17].p._mdf||n[18].p._mdf||n[19].p._mdf||n[20].p._mdf||n[21].p._mdf)&&(r=this.getTableValue(n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v,n[21].p.v),this.feFuncG.setAttribute("tableValues",r)),this.feFuncB&&(a||n[24].p._mdf||n[25].p._mdf||n[26].p._mdf||n[27].p._mdf||n[28].p._mdf)&&(r=this.getTableValue(n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v,n[28].p.v),this.feFuncB.setAttribute("tableValues",r)),this.feFuncA&&(a||n[31].p._mdf||n[32].p._mdf||n[33].p._mdf||n[34].p._mdf||n[35].p._mdf)&&(r=this.getTableValue(n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v,n[35].p.v),this.feFuncA.setAttribute("tableValues",r))}};function SVGDropShadowEffect(a,r,n,o,s){var l=r.container.globalData.renderConfig.filterSize,u=r.data.fs||l;a.setAttribute("x",u.x||l.x),a.setAttribute("y",u.y||l.y),a.setAttribute("width",u.width||l.width),a.setAttribute("height",u.height||l.height),this.filterManager=r;var c=createNS("feGaussianBlur");c.setAttribute("in","SourceAlpha"),c.setAttribute("result",o+"_drop_shadow_1"),c.setAttribute("stdDeviation","0"),this.feGaussianBlur=c,a.appendChild(c);var f=createNS("feOffset");f.setAttribute("dx","25"),f.setAttribute("dy","0"),f.setAttribute("in",o+"_drop_shadow_1"),f.setAttribute("result",o+"_drop_shadow_2"),this.feOffset=f,a.appendChild(f);var d=createNS("feFlood");d.setAttribute("flood-color","#00ff00"),d.setAttribute("flood-opacity","1"),d.setAttribute("result",o+"_drop_shadow_3"),this.feFlood=d,a.appendChild(d);var v=createNS("feComposite");v.setAttribute("in",o+"_drop_shadow_3"),v.setAttribute("in2",o+"_drop_shadow_2"),v.setAttribute("operator","in"),v.setAttribute("result",o+"_drop_shadow_4"),a.appendChild(v);var g=this.createMergeNode(o,[o+"_drop_shadow_4",s]);a.appendChild(g)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(a){if(a||this.filterManager._mdf){if((a||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),a||this.filterManager.effectElements[0].p._mdf){var r=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)))}if((a||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),a||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var n=this.filterManager.effectElements[3].p.v,o=(this.filterManager.effectElements[2].p.v-90)*degToRads,s=n*Math.cos(o),l=n*Math.sin(o);this.feOffset.setAttribute("dx",s),this.feOffset.setAttribute("dy",l)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(a,r,n){this.initialized=!1,this.filterManager=r,this.filterElem=a,this.elem=n,n.matteElement=createNS("g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}SVGMatte3Effect.prototype.findSymbol=function(a){for(var r=0,n=_svgMatteSymbols.length;r<n;){if(_svgMatteSymbols[r]===a)return _svgMatteSymbols[r];r+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(a,r){var n=a.layerElement.parentNode;if(n){for(var o=n.children,s=0,l=o.length;s<l&&o[s]!==a.layerElement;)s+=1;var u;s<=l-2&&(u=o[s+1]);var c=createNS("use");c.setAttribute("href","#"+r),u?n.insertBefore(c,u):n.appendChild(c)}},SVGMatte3Effect.prototype.setElementAsMask=function(a,r){if(!this.findSymbol(r)){var n=createElementID(),o=createNS("mask");o.setAttribute("id",r.layerId),o.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(r);var s=a.globalData.defs;s.appendChild(o);var l=createNS("symbol");l.setAttribute("id",n),this.replaceInParent(r,n),l.appendChild(r.layerElement),s.appendChild(l);var u=createNS("use");u.setAttribute("href","#"+n),o.appendChild(u),r.data.hd=!1,r.show()}a.setMatte(r.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var a=this.filterManager.effectElements[0].p.v,r=this.elem.comp.elements,n=0,o=r.length;n<o;)r[n]&&r[n].data.ind===a&&this.setElementAsMask(this.elem,r[n]),n+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(a,r,n,o){a.setAttribute("x","-100%"),a.setAttribute("y","-100%"),a.setAttribute("width","300%"),a.setAttribute("height","300%"),this.filterManager=r;var s=createNS("feGaussianBlur");s.setAttribute("result",o),a.appendChild(s),this.feGaussianBlur=s}SVGGaussianBlurEffect.prototype.renderFrame=function(a){if(a||this.filterManager._mdf){var r=.3,n=this.filterManager.effectElements[0].p.v*r,o=this.filterManager.effectElements[1].p.v,s=o==3?0:n,l=o==2?0:n;this.feGaussianBlur.setAttribute("stdDeviation",s+" "+l);var u=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",u)}};function TransformEffect(){}TransformEffect.prototype.init=function(a){this.effectsManager=a,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(a){if(this._opMdf=!1,this._mdf=!1,a||this.effectsManager._mdf){var r=this.effectsManager.effectElements,n=r[0].p.v,o=r[1].p.v,s=r[2].p.v===1,l=r[3].p.v,u=s?l:r[4].p.v,c=r[5].p.v,f=r[6].p.v,d=r[7].p.v;this.matrix.reset(),this.matrix.translate(-n[0],-n[1],n[2]),this.matrix.scale(u*.01,l*.01,1),this.matrix.rotate(-d*degToRads),this.matrix.skewFromAxis(-c*degToRads,(f+90)*degToRads),this.matrix.translate(o[0],o[1],0),this._mdf=!0,this.opacity!==r[8].p.v&&(this.opacity=r[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(a,r){this.init(r)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(a){this.init(a)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie,lottie.exports);var lottieExports=lottie.exports;const Lottie=getDefaultExportFromCjs(lottieExports);(function(){try{if(typeof document<"u"){var a=document.createElement("style");a.appendChild(document.createTextNode(".lottie-animation-container{width:var(--lottie-animation-container-width);height:var(--lottie-animation-container-height);background-color:var(--lottie-animation-container-background-color);overflow:hidden;margin:var(--lottie-animation-margin)}.lottie-animation-container svg{transform:scale(var(--lottie-animation-scale))}")),document.head.appendChild(a)}}catch(r){console.error("vite-plugin-css-injected-by-js",r)}})();var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(a,r,n)=>r in a?__defProp(a,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[r]=n,__spreadValues=(a,r)=>{for(var n in r||(r={}))__hasOwnProp.call(r,n)&&__defNormalProp(a,n,r[n]);if(__getOwnPropSymbols)for(var n of __getOwnPropSymbols(r))__propIsEnum.call(r,n)&&__defNormalProp(a,n,r[n]);return a},__spreadProps=(a,r)=>__defProps(a,__getOwnPropDescs(r)),es6=function a(r,n){if(r===n)return!0;if(r&&n&&typeof r=="object"&&typeof n=="object"){if(r.constructor!==n.constructor)return!1;var o,s,l;if(Array.isArray(r)){if(o=r.length,o!=n.length)return!1;for(s=o;s--!==0;)if(!a(r[s],n[s]))return!1;return!0}if(r instanceof Map&&n instanceof Map){if(r.size!==n.size)return!1;for(s of r.entries())if(!n.has(s[0]))return!1;for(s of r.entries())if(!a(s[1],n.get(s[0])))return!1;return!0}if(r instanceof Set&&n instanceof Set){if(r.size!==n.size)return!1;for(s of r.entries())if(!n.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(r)&&ArrayBuffer.isView(n)){if(o=r.length,o!=n.length)return!1;for(s=o;s--!==0;)if(r[s]!==n[s])return!1;return!0}if(r.constructor===RegExp)return r.source===n.source&&r.flags===n.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===n.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===n.toString();if(l=Object.keys(r),o=l.length,o!==Object.keys(n).length)return!1;for(s=o;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,l[s]))return!1;for(s=o;s--!==0;){var u=l[s];if(!a(r[u],n[u]))return!1}return!0}return r!==r&&n!==n};function klona(a){var r,n,o;if(Array.isArray(a)){for(n=Array(r=a.length);r--;)n[r]=(o=a[r])&&typeof o=="object"?klona(o):o;return n}if(Object.prototype.toString.call(a)==="[object Object]"){n={};for(r in a)r==="__proto__"?Object.defineProperty(n,r,{value:klona(a[r]),configurable:!0,enumerable:!0,writable:!0}):n[r]=(o=a[r])&&typeof o=="object"?klona(o):o;return n}return a}var _export_sfc=(a,r)=>{const n=a.__vccOpts||a;for(const[o,s]of r)n[o]=s;return n};const _sfc_main=defineComponent({props:{animationData:{type:Object,default:()=>({})},animationLink:{type:String,default:""},loop:{type:[Boolean,Number],default:!0},autoPlay:{type:Boolean,default:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},speed:{type:Number,default:1},delay:{type:Number,default:0},direction:{type:String,default:"forward"},pauseOnHover:{type:Boolean,default:!1},playOnHover:{type:Boolean,default:!1},backgroundColor:{type:String,default:"transparent"},pauseAnimation:{type:Boolean,default:!1},noMargin:{type:Boolean,default:!1},scale:{type:Number,default:1},renderer:{type:String,default:"svg"},rendererSettings:{type:Object,default:()=>({})},assetsPath:{type:String,default:""}},emits:{onComplete:null,onLoopComplete:null,onEnterFrame:null,onSegmentStart:null,onAnimationLoaded:null},setup(a,{emit:r}){const n=ref();let o,s=null,l=1;watchEffect(async()=>{if(n.value){if(a.animationLink!="")try{o=await(await fetch(a.animationLink)).json()}catch(P){console.error(P);return}else if(es6(a.animationData,{})===!1)o=klona(a.animationData);else throw new Error("You must provide either animationLink or animationData");u()}});const u=()=>{if(!n.value||!o)return;s==null||s.destroy(),s=null;let P=a.autoPlay,I=a.loop;a.playOnHover&&(P=!1),typeof I=="number"&&I>0&&(I=I-1),a.delay>0&&(P=!1);const M={container:n.value,renderer:a.renderer,loop:I,autoplay:P,animationData:o,assetsPath:a.assetsPath};es6(a.rendererSettings,{})===!1&&(M.rendererSettings=a.rendererSettings),a.scale!==1&&(M.rendererSettings=__spreadProps(__spreadValues({},M.rendererSettings),{viewBoxOnly:!0})),s=Lottie.loadAnimation(M),setTimeout(()=>{P=a.autoPlay,a.playOnHover?s==null||s.pause():P?s==null||s.play():s==null||s.pause(),r("onAnimationLoaded")},a.delay),s.setSpeed(a.speed),a.direction==="reverse"&&s.setDirection(-1),a.direction==="normal"&&s.setDirection(1),(a.pauseAnimation||a.playOnHover)&&s.pause(),s.addEventListener("loopComplete",()=>{a.direction==="alternate"&&(s==null||s.stop(),l=l===-1?1:-1,s==null||s.setDirection(l),s==null||s.play()),r("onLoopComplete")}),s.addEventListener("complete",()=>{r("onComplete")}),s.addEventListener("enterFrame",()=>{r("onEnterFrame")}),s.addEventListener("segmentStart",()=>{r("onSegmentStart")})},c=computed(()=>{let P=a.width,I=a.height;return typeof a.width=="number"&&(P=`${a.width}px`),typeof a.height=="number"&&(I=`${a.height}px`),{"--lottie-animation-container-width":P,"--lottie-animation-container-height":I,"--lottie-animation-container-background-color":a.backgroundColor,"--lottie-animation-margin":a.noMargin?"0":"0 auto","--lottie-animation-scale":a.scale!=1?a.scale:""}}),f=()=>{s&&a.pauseOnHover&&s.pause(),s&&a.playOnHover&&s.play()},d=()=>{s&&a.pauseOnHover&&s.play(),s&&a.playOnHover&&s.pause()};return watch(()=>a.pauseAnimation,()=>{if((a.pauseOnHover||a.playOnHover)&&a.pauseAnimation){console.error("If you are using pauseAnimation prop for Vue3-Lottie, please remove the props pauseOnHover and playOnHover");return}s&&(a.pauseAnimation?s.pause():s.play())}),{lottieAnimationContainer:n,hoverEnded:d,hoverStarted:f,getCurrentStyle:c,play:()=>{s&&s.play()},pause:()=>{s&&s.pause()},stop:()=>{s&&s.stop()},destroy:()=>{s&&s.destroy()},setSpeed:(P=1)=>{if(P<=0)throw new Error("Speed must be greater than 0");s&&s.setSpeed(P)},setDirection:P=>{s&&(P==="forward"?s.setDirection(1):P==="reverse"&&s.setDirection(-1))},goToAndStop:(P,I=!0)=>{s&&s.goToAndStop(P,I)},goToAndPlay:(P,I=!0)=>{s&&s.goToAndPlay(P,I)},playSegments:(P,I=!1)=>{s&&s.playSegments(P,I)},setSubFrame:(P=!0)=>{s&&s.setSubframe(P)},getDuration:(P=!0)=>{if(s)return s.getDuration(P)},updateDocumentData:(P,I=0)=>{s&&s.renderer.elements[I].updateDocumentData(P)}}}});function _sfc_render(a,r,n,o,s,l){return openBlock(),createElementBlock("div",{ref:"lottieAnimationContainer",class:"lottie-animation-container",style:normalizeStyle$1(a.getCurrentStyle),onMouseenter:r[0]||(r[0]=(...u)=>a.hoverStarted&&a.hoverStarted(...u)),onMouseleave:r[1]||(r[1]=(...u)=>a.hoverEnded&&a.hoverEnded(...u))},null,36)}var Vue3Lottie=_export_sfc(_sfc_main,[["render",_sfc_render]]);export{h as A,Button as B,showLoadingToast as C,showSuccessToast as D,showFailToast as E,Fragment as F,Compressor as G,showConfirmDialog as H,createTextVNode as I,onMounted as J,resolveComponent as K,createPinia as L,createStaticVNode as M,Checkbox as N,vModelDynamic as O,onUnmounted as P,init$1 as Q,normalizeStyle$1 as R,Overlay as S,Transition as T,Uploader as U,Vue3Lottie as V,Field as W,Switch as X,createWebHashHistory as a,createClient as b,createRouter as c,defineStore as d,useRoute$1 as e,createElementBlock as f,createBaseVNode as g,unref as h,ref as i,computed as j,createBlock as k,createVNode$1 as l,withCtx as m,normalizeClass as n,openBlock as o,createCommentVNode as p,withModifiers as q,renderList as r,Teleport as s,toDisplayString as t,useRouter as u,withDirectives as v,watch as w,vModelText as x,reactive as y,createApp as z};
