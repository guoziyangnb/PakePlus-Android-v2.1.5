const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Welcome-OoDVjBTA.js","./vendor-CLLCb1yY.js","../css/vendor-DweQxG6p.css","../css/Welcome-CodzITDE.css","./Auth-ge8oaUUP.js","../css/Auth-UhbO-IEn.css","./Home-BtwsvJti.js","./Header-DPsxo2p6.js","./TransactionItem-DWm_lgWV.js","../css/TransactionItem-DCwIdHFx.css","./Overlay-C3FDQmZs.js","../css/Overlay-DHeRTWvF.css","../css/Home-CgsOo5LI.css","./Calendar-CeRld21z.js","../css/Calendar-BZxahGYO.css","./Stats-CQSNg5-z.js","../css/Stats-BOaho8rR.css","./Settings-CKsZRspr.js","./version-GmJQqd8X.js","../css/Settings-Du4_IoJ9.css","./Profile-BECL_Czl.js","./FormSection-DLh0ZiHI.js","../css/FormSection-DCLoU9gX.css","./BackNavBar-eYKXhRhQ.js","../css/BackNavBar-CxT89gi2.css","../css/Profile-B4cUGDV0.css","./FieldEditPage-B7aizHXq.js","../css/FieldEditPage-DmtWIo2D.css","./Backup-BcXq2evG.js","../css/Backup-DZLVosV6.css","./AppUpdate-B9WzXcLN.js","../css/AppUpdate-DuraFSjD.css","./UserAgreement-BxeM-ej6.js","../css/UserAgreement-CuaIzKCG.css","./PrivacyPolicy-DgmkAp4N.js","../css/PrivacyPolicy-Uq6usea-.css"])))=>i.map(i=>d[i]);
import{d as Q,c as fe,a as ge,b as ye,u as ve,e as ce,w as N,f as v,o as f,g as i,F as A,r as B,n as R,h as V,i as T,j as I,k as U,l as z,m as j,p as L,t as x,q as Z,T as ue,s as ee,v as Y,x as G,y as de,z as me,A as we,U as be,B as K,C as _e,D as Se,E as De,G as Me,H as ke,I as se,J as Ee,K as Ve,L as Ie}from"./vendor-CLLCb1yY.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();const W="bookkeeping_";function X(t,e=null){try{const r=localStorage.getItem(W+t);return r?JSON.parse(r):e}catch(r){return console.error("Error reading from localStorage:",r),e}}function $(t,e){try{return localStorage.setItem(W+t,JSON.stringify(e)),!0}catch(r){return console.error("Error writing to localStorage:",r),!1}}function ze(t){try{return localStorage.removeItem(W+t),!0}catch(e){return console.error("Error removing from localStorage:",e),!1}}function rr(){try{return Object.keys(localStorage).forEach(e=>{e.startsWith(W)&&localStorage.removeItem(e)}),!0}catch(t){return console.error("Error clearing localStorage:",t),!1}}const te=Q("ui",{state:()=>{const t=X("userProfile",{});return{theme:X("theme","light"),currentTab:"home",isModalOpen:!1,modalType:"expense",editingRecord:null,defaultCategory:null,userAvatar:(t==null?void 0:t.avatar)||""}},getters:{isDark:t=>t.theme==="dark"},actions:{toggleTheme(){this.theme=this.theme==="light"?"dark":"light",this.applyTheme(),$("theme",this.theme)},setTheme(t){this.theme=t,this.applyTheme(),$("theme",this.theme)},applyTheme(){document.documentElement.setAttribute("data-theme",this.theme)},initTheme(){this.applyTheme()},setCurrentTab(t){this.currentTab=t},openModal(t="expense",e=null){this.modalType=t,this.defaultCategory=e,this.editingRecord=null,this.isModalOpen=!0},openEditModal(t){this.modalType=t.type,this.editingRecord=t,this.isModalOpen=!0},closeModal(){this.isModalOpen=!1,this.editingRecord=null,this.defaultCategory=null},updateUserAvatar(t){this.userAvatar=t}}}),Pe="modulepreload",Te=function(t,e){return new URL(t,e).href},oe={},M=function(e,r,a){let s=Promise.resolve();if(r&&r.length>0){const l=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),g=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=Promise.allSettled(r.map(y=>{if(y=Te(y,a),y in oe)return;oe[y]=!0;const o=y.endsWith(".css"),_=o?'[rel="stylesheet"]':"";if(!!a)for(let b=l.length-1;b>=0;b--){const m=l[b];if(m.href===y&&(!o||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${y}"]${_}`))return;const h=document.createElement("link");if(h.rel=o?"stylesheet":Pe,o||(h.as="script"),h.crossOrigin="",h.href=y,g&&h.setAttribute("nonce",g),document.head.appendChild(h),o)return new Promise((b,m)=>{h.addEventListener("load",b),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${y}`)))})}))}function n(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&n(u.reason);return e().catch(n)})},Ce=[{path:"/welcome",name:"welcome",component:()=>M(()=>import("./Welcome-OoDVjBTA.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),meta:{title:"欢迎使用 阳阳记账",isSubPage:!0}},{path:"/login",name:"login",component:()=>M(()=>import("./Auth-ge8oaUUP.js"),__vite__mapDeps([4,1,2,5]),import.meta.url),meta:{title:"登录",isSubPage:!0}},{path:"/register",name:"register",component:()=>M(()=>import("./Auth-ge8oaUUP.js"),__vite__mapDeps([4,1,2,5]),import.meta.url),meta:{title:"注册",isSubPage:!0}},{path:"/",name:"home",component:()=>M(()=>import("./Home-BtwsvJti.js"),__vite__mapDeps([6,7,1,2,8,9,10,11,12]),import.meta.url),meta:{title:"我的钱包"}},{path:"/calendar",name:"calendar",component:()=>M(()=>import("./Calendar-CeRld21z.js"),__vite__mapDeps([13,7,1,2,8,9,10,11,14]),import.meta.url),meta:{title:"记账日历"}},{path:"/stats",name:"stats",component:()=>M(()=>import("./Stats-CQSNg5-z.js"),__vite__mapDeps([15,7,1,2,10,11,16]),import.meta.url),meta:{title:"财务统计"}},{path:"/settings",name:"settings",component:()=>M(()=>import("./Settings-CKsZRspr.js"),__vite__mapDeps([17,1,2,7,18,19]),import.meta.url),meta:{title:"设置"}},{path:"/settings/profile",name:"profile",component:()=>M(()=>import("./Profile-BECL_Czl.js"),__vite__mapDeps([20,1,2,21,22,23,24,25]),import.meta.url),meta:{title:"个人资料",isSubPage:!0}},{path:"/settings/edit-field",name:"editField",component:()=>M(()=>import("./FieldEditPage-B7aizHXq.js"),__vite__mapDeps([26,1,2,27]),import.meta.url),meta:{title:"编辑资料",isSubPage:!0}},{path:"/settings/backup",name:"backup",component:()=>M(()=>import("./Backup-BcXq2evG.js"),__vite__mapDeps([28,21,1,2,22,23,24,29]),import.meta.url),meta:{title:"数据备份",isSubPage:!0}},{path:"/settings/update",name:"update",component:()=>M(()=>import("./AppUpdate-B9WzXcLN.js"),__vite__mapDeps([30,23,1,2,24,18,31]),import.meta.url),meta:{title:"检查更新",isSubPage:!0}},{path:"/welcome/user-agreement",name:"userAgreement",component:()=>M(()=>import("./UserAgreement-BxeM-ej6.js"),__vite__mapDeps([32,23,1,2,24,33]),import.meta.url),meta:{title:"用户协议",isSubPage:!0}},{path:"/welcome/privacy-policy",name:"privacyPolicy",component:()=>M(()=>import("./PrivacyPolicy-DgmkAp4N.js"),__vite__mapDeps([34,23,1,2,24,35]),import.meta.url),meta:{title:"隐私政策",isSubPage:!0}}],Re=fe({history:ge(),routes:Ce,scrollBehavior(t,e,r){return{top:0,behavior:"smooth"}}}),re="https://spb-nl553gvni0icpw4d.supabase.opentrust.net",xe="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiYW5vbiIsInJlZiI6InNwYi1ubDU1M2d2bmkwaWNwdzRkIiwiaXNzIjoic3VwYWJhc2UiLCJpYXQiOjE3NjgxMzYzMzUsImV4cCI6MjA4MzcxMjMzNX0.Iks0Kzf-L2r-jWzMG05lKcpkpjijhGbqOKkJt_cbyOU",w=ye(re,xe),Le=async({email:t,phone:e,password:r,username:a})=>{if(!t&&!e)throw console.error("❌ email 和 phone 都为空！"),new Error("请提供有效的手机号或邮箱");const s={password:r,options:{data:{username:a||"",avatar:""}}};t&&(s.email=t),e&&(s.phone="+"+e);const{data:n,error:l}=await w.auth.signUp(s);if(l)throw console.error("❌ Supabase 注册错误:",l),new Error(l.message);return n},Oe=async t=>{const{email:e,phone:r,password:a}=t,s={};if(r)s.phone="+"+r;else if(e)s.email=e;else throw new Error("请提供手机号或邮箱");s.password=a;const{data:n,error:l}=await w.auth.signInWithPassword(s);if(l)throw new Error(l.message);return n},$e=async()=>{const{error:t}=await w.auth.signOut();if(t)throw new Error(t.message)},Ae=async()=>{const{data:t}=await w.auth.getSession();if(!t.session)return null;const{data:e,error:r}=await w.auth.getUser();if(r)throw new Error(r.message);return e==null?void 0:e.user},ne=async t=>{const e={};t.email&&(e.email=t.email),t.phone&&(e.phone="+"+t.phone),t.password&&(e.password=t.password);const r={};if(t.username&&(r.username=t.username),t.avatar&&(r.avatar=t.avatar),Object.keys(r).length>0&&(e.data=r),Object.keys(e).length===0)throw new Error("没有可更新的用户信息字段");const{data:a,error:s}=await w.auth.updateUser(e);if(s)throw new Error(s.message);return a},ie=t=>{const e=/^1[3-9]\d{9}$/,r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(t)?"phone":r.test(t)?"email":null},F=Q("user",{state:()=>{const t=X("userProfile",null);return{userProfile:t,isAuthenticated:!!t}},getters:{userInfo:t=>t.userProfile,isLoggedIn:t=>t.isAuthenticated,userAvatar:t=>{var e,r,a,s;return((s=(a=(r=(e=t.userProfile)==null?void 0:e.user)==null?void 0:r.user_metadata)==null?void 0:a.avatar)==null?void 0:s.avatar)||""},userName:t=>{var e,r,a,s,n,l;return((a=(r=(e=t.userProfile)==null?void 0:e.user)==null?void 0:r.user_metadata)==null?void 0:a.username)||((l=(n=(s=t.userProfile)==null?void 0:s.user)==null?void 0:n.email)==null?void 0:l.split("@")[0])||""},userId:t=>{var e,r;return((r=(e=t.userProfile)==null?void 0:e.user)==null?void 0:r.id)||""},userEmail:t=>{var e,r,a;return((a=(r=(e=t.userProfile)==null?void 0:e.user)==null?void 0:r.user_metadata)==null?void 0:a.email)||""},userPhone:t=>{var e,r;return((r=(e=t.userProfile)==null?void 0:e.user)==null?void 0:r.phone)||""}},actions:{async initializeAuth(){try{if(this.userProfile)return this.isAuthenticated=!0,this.userProfile;const t=await Ae();return t&&(this.userProfile=t,this.isAuthenticated=!0,$("userProfile",t)),t}catch(t){return console.error("初始化认证状态失败:",t),null}},async register({username:t,account:e,password:r}){try{const a=ie(e);if(!a)throw new Error("请输入有效的手机号或邮箱");const s=await Le({username:t,password:r,[a]:e});return s&&(this.userProfile=s),s}catch(a){throw console.error("注册失败:",a),a}},async login({account:t,password:e}){try{const r=ie(t);if(!r)throw new Error("请输入有效的手机号或邮箱");const a=await Oe({[r]:t,password:e});return this.userProfile=a,this.isAuthenticated=!0,$("userProfile",a),a}catch(r){throw console.error("登录失败:",r),r}},async logout(){try{await $e()}catch(t){console.error("退出登录失败:",t)}finally{const{useRecordsStore:t}=await M(async()=>{const{useRecordsStore:r}=await Promise.resolve().then(()=>lt);return{useRecordsStore:r}},void 0,import.meta.url);t().clearCache(),this.userProfile=null,this.isAuthenticated=!1,ze("userProfile")}},async updateProfile(t){if(!this.userProfile)throw new Error("未登录");try{const e=await ne({...t});return e&&(this.userProfile=e,this.isAuthenticated=!0),$("userProfile",e),e}catch(e){throw console.error("更新用户信息失败:",e),e}},async updateAvatar(t){await this.updateProfile({avatar:t})},async changePassword(t){if(this.userProfile)try{const e=await ne({password:t});return e&&(this.userProfile=e,this.isAuthenticated=!0),$("userProfile",e),e}catch(e){throw console.error("修改密码失败:",e),e}},async deleteAccount(){if(this.userProfile)throw await this.logout(),new Error("此功能需要集成Supabase的admin API")}}}),He={class:"floating-tabbar"},Be={class:"tabbar-container"},Ue=["onClick"],je={class:"tabbar-icon"},qe=["innerHTML"],Ne=["onClick"],We={class:"tabbar-icon"},Fe=["innerHTML"],Je={__name:"TabBar",setup(t){const e=te(),r=ve(),a=ce();N(()=>a.name,g=>{g&&["home","calendar","stats","settings"].includes(g)&&e.setCurrentTab(g)},{immediate:!0});const s=[{name:"home",label:"首页",icon:'<path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>'},{name:"calendar",label:"日历",icon:'<path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11z"/>'}],n=[{name:"stats",label:"统计",icon:'<path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>'},{name:"settings",label:"设置",icon:'<path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>'}];function l(g){e.setCurrentTab(g),r.push({name:g})}function u(){e.openModal("expense")}return(g,y)=>(f(),v("div",He,[i("div",Be,[(f(),v(A,null,B(s,o=>i("button",{key:o.name,class:R(["tabbar-item",{active:V(e).currentTab===o.name}]),onClick:_=>l(o.name)},[i("div",je,[(f(),v("svg",{innerHTML:o.icon},null,8,qe))])],10,Ue)),64)),i("button",{class:"tabbar-add-btn",onClick:u},[...y[0]||(y[0]=[i("svg",{viewBox:"0 0 24 24"},[i("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)])]),(f(),v(A,null,B(n,o=>i("button",{key:o.name,class:R(["tabbar-item",{active:V(e).currentTab===o.name}]),onClick:_=>l(o.name)},[i("div",We,[(f(),v("svg",{innerHTML:o.icon},null,8,Fe))])],10,Ne)),64))])]))}};function Ye(t,e){return new Date(t,e+1,0).getDate()}function Ge(t,e){return new Date(t,e,1).getDay()}function Ke(t){const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function Xe(t,e){const r=Ge(t,e),a=Ye(t,e),s=[];for(let n=0;n<r;n++)s.push({type:"empty",day:null});for(let n=1;n<=a;n++){const l=new Date(t,e,n);s.push({type:"day",day:n,date:l,isToday:Ke(l)})}return s}function P(t){const e=t instanceof Date?t:new Date(t),r=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${r}-${a}-${s}`}const Qe=async t=>{const e=t.type==="expense"?-Math.abs(t.amount):Math.abs(t.amount),{data:r,error:a}=await w.from("records").insert({user_id:t.user_id,type:t.type,amount:e,category:t.category,note:t.note||"",date:t.date,image_url:t.image_url||null}).select().single();if(a)throw new Error(a.message);return r},Ze=async t=>{const{error:e}=await w.from("records").delete().eq("id",t);if(e)throw new Error(e.message);return!0},et=async(t,e)=>{let r={...e};e.type&&e.amount!==void 0&&(r.amount=e.type==="expense"?-Math.abs(e.amount):Math.abs(e.amount));const{data:a,error:s}=await w.from("records").update(r).eq("id",t).select().single();if(s)throw new Error(s.message);return a},tt=async(t,e={})=>{let r=w.from("records").select("*").eq("user_id",t).order("date",{ascending:!1}).order("created_at",{ascending:!1});e.type&&(r=r.eq("type",e.type)),e.limit&&(r=r.limit(e.limit)),e.offset&&(r=r.range(e.offset,e.offset+(e.limit||20)-1));const{data:a,error:s}=await r;if(s)throw new Error(s.message);return a},rt=async(t,e)=>{const r=new Date(e);r.setHours(0,0,0,0);const a=new Date(e);a.setHours(23,59,59,999);const{data:s,error:n}=await w.from("records").select("*").eq("user_id",t).gte("date",r.toISOString()).lte("date",a.toISOString()).order("created_at",{ascending:!1});if(n)throw new Error(n.message);return s},at=async(t,e,r)=>{const a=new Date(e);a.setHours(0,0,0,0);const s=new Date(r);s.setHours(23,59,59,999);const{data:n,error:l}=await w.from("records").select("*").eq("user_id",t).gte("date",a.toISOString()).lte("date",s.toISOString()).order("date",{ascending:!1});if(l)throw new Error(l.message);return n},st=async(t,e,r)=>{const a=new Date(e,r,1),s=new Date(e,r+1,0,23,59,59),{data:n,error:l}=await w.from("records").select("*").eq("user_id",t).gte("date",a.toISOString()).lte("date",s.toISOString()).order("date",{ascending:!1});if(l)throw new Error(l.message);return n},ot=async t=>{const e=new Date,r=e.getDay(),a=new Date(e);a.setDate(e.getDate()-r),a.setHours(0,0,0,0);const{data:s,error:n}=await w.from("records").select("*").eq("user_id",t).gte("date",a.toISOString()).order("date",{ascending:!1});if(n)throw new Error(n.message);return s},nt=async(t,e=20)=>{const{data:r,error:a}=await w.from("records").select("*").eq("user_id",t).order("created_at",{ascending:!1}).limit(e);if(a)throw new Error(a.message);return r},it=async t=>{const{data:e,error:r}=await w.from("records").select("type, amount").eq("user_id",t);if(r)throw new Error(r.message);const a=e.filter(l=>l.type==="income").reduce((l,u)=>l+u.amount,0),s=e.filter(l=>l.type==="expense").reduce((l,u)=>l+Math.abs(u.amount),0),n=a-s;return{totalIncome:a,totalExpense:s,totalBalance:n,recordCount:e.length}},he=Q("records",{state:()=>({records:[],categories:{expense:["餐饮","交通","购物","娱乐","医疗","其他"],income:["工资","投资","礼金","其他"]},loading:!1,error:null}),getters:{totalBalance:t=>t.records.reduce((e,r)=>e+r.amount,0),totalIncome:t=>t.records.filter(e=>e.type==="income").reduce((e,r)=>e+r.amount,0),totalExpense:t=>t.records.filter(e=>e.type==="expense").reduce((e,r)=>e+Math.abs(r.amount),0),recordsByDate:t=>{const e={};return t.records.forEach(r=>{const a=P(r.date);e[a]||(e[a]=[]),e[a].push(r)}),Object.keys(e).forEach(r=>{e[r].sort((a,s)=>new Date(s.createdAt)-new Date(a.createdAt))}),e},recordsByCategory:t=>{const e={expense:{},income:{}};return t.records.forEach(r=>{e[r.type][r.category]||(e[r.type][r.category]=[]),e[r.type][r.category].push(r)}),e},expenseByCategory:t=>{const e={};return t.records.filter(r=>r.type==="expense").forEach(r=>{e[r.category]||(e[r.category]=0),e[r.category]+=Math.abs(r.amount)}),e},recentRecords:t=>[...t.records].sort((e,r)=>new Date(r.createdAt)-new Date(e.createdAt)).slice(0,20),thisWeekRecords:t=>{const e=new Date,r=e.getDay(),a=new Date(e);return a.setDate(e.getDate()-r),a.setHours(0,0,0,0),t.records.filter(s=>new Date(s.date)>=a)}},actions:{async fetchRecords(t,e={}){try{this.loading=!0,this.error=null,this.records=await tt(t,e)}catch(r){throw this.error=r.message,r}finally{this.loading=!1}},async fetchRecordsByDate(t,e){try{this.loading=!0,this.error=null,this.records=await rt(t,e)}catch(r){throw this.error=r.message,r}finally{this.loading=!1}},async fetchRecordsByDateRange(t,e,r){try{this.loading=!0,this.error=null,this.records=await at(t,e,r)}catch(a){throw this.error=a.message,a}finally{this.loading=!1}},async fetchMonthlyRecords(t,e,r){try{this.loading=!0,this.error=null,this.records=await st(t,e,r)}catch(a){throw this.error=a.message,a}finally{this.loading=!1}},async fetchThisWeekRecords(t){try{this.loading=!0,this.error=null,this.records=await ot(t)}catch(e){throw this.error=e.message,e}finally{this.loading=!1}},async fetchRecentRecords(t,e=20){try{this.loading=!0,this.error=null,this.records=await nt(t,e)}catch(r){throw this.error=r.message,r}finally{this.loading=!1}},async addRecord(t,e){try{this.loading=!0,this.error=null;const r=await Qe({...e,user_id:t});return this.records.unshift(r),r}catch(r){throw this.error=r.message,r}finally{this.loading=!1}},async deleteRecord(t){try{this.loading=!0,this.error=null,await Ze(t);const e=this.records.findIndex(r=>r.id===t);return e!==-1&&this.records.splice(e,1),!0}catch(e){throw this.error=e.message,e}finally{this.loading=!1}},async updateRecord(t,e){try{this.loading=!0,this.error=null;const r=await et(t,e),a=this.records.findIndex(s=>s.id===t);return a!==-1&&(this.records[a]=r),r}catch(r){throw this.error=r.message,r}finally{this.loading=!1}},clearCache(){this.records=[],this.error=null},async fetchStats(t){try{return this.loading=!0,await it(t)}catch(e){throw this.error=e.message,e}finally{this.loading=!1}}}}),lt=Object.freeze(Object.defineProperty({__proto__:null,useRecordsStore:he},Symbol.toStringTag,{value:"Module"})),H=(t,e)=>{const r=t.__vccOpts||t;for(const[a,s]of e)r[a]=s;return r},ct={class:"month-selector"},ut={class:"current-month"},dt={class:"calendar-grid"},mt={class:"weekdays"},ht={class:"days"},pt=["onClick"],ft={__name:"DateSelectModal",props:{show:{type:Boolean,default:!1},modelValue:{type:[String,Date],default:null},maxDate:{type:[String,Date],default:()=>new Date}},emits:["update:show","update:modelValue","confirm","cancel"],setup(t,{emit:e}){const r=t,a=e,s=T(r.modelValue?new Date(r.modelValue):new Date),n=T(r.modelValue?P(r.modelValue):null),l=["日","一","二","三","四","五","六"],u=I(()=>s.value.getFullYear()),g=I(()=>s.value.getMonth()),y=I(()=>`${u.value}年 ${g.value+1}月`),o=I(()=>r.maxDate?P(r.maxDate):null),_=I(()=>Xe(u.value,g.value)),p=D=>D.type!=="day"||!n.value?!1:P(D.date)===n.value,h=D=>D.type!=="day"||!o.value?!1:P(D.date)>o.value;function b(){g.value===0?s.value=new Date(u.value-1,11,1):s.value=new Date(u.value,g.value-1,1)}function m(){g.value===11?s.value=new Date(u.value+1,0,1):s.value=new Date(u.value,g.value+1,1)}function c(D){D.type==="day"&&!h(D)&&(n.value=P(D.date),a("update:modelValue",n.value))}function d(){n.value&&(a("update:modelValue",n.value),a("confirm",n.value)),a("update:show",!1)}function C(){a("cancel"),a("update:show",!1)}return N(()=>r.show,D=>{if(D)if(r.modelValue){const S=new Date(r.modelValue);s.value=S,n.value=P(S)}else s.value=new Date,n.value=null}),(D,S)=>(f(),U(ee,{to:"body"},[z(ue,{name:"fade"},{default:j(()=>[t.show?(f(),v("div",{key:0,class:"date-select-modal-overlay",onClick:C},[i("div",{class:"date-select-modal",onClick:S[0]||(S[0]=Z(()=>{},["stop"]))},[i("div",{class:"modal-header"},[i("button",{class:"header-btn cancel-btn",onClick:C},"取消"),S[1]||(S[1]=i("div",{class:"header-title"},"选择日期",-1)),i("button",{class:"header-btn confirm-btn",onClick:d},"确认")]),i("div",ct,[i("button",{class:"month-nav-btn",onClick:b},[...S[2]||(S[2]=[i("svg",{viewBox:"0 0 24 24"},[i("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})],-1)])]),i("div",ut,x(y.value),1),i("button",{class:"month-nav-btn",onClick:m},[...S[3]||(S[3]=[i("svg",{viewBox:"0 0 24 24"},[i("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})],-1)])])]),i("div",dt,[i("div",mt,[(f(),v(A,null,B(l,E=>i("div",{key:E,class:"weekday"},x(E),1)),64))]),i("div",ht,[(f(!0),v(A,null,B(_.value,(E,pe)=>(f(),v("div",{key:pe,class:R(["day-cell",{empty:E.type==="empty",today:E.isToday,selected:p(E),disabled:h(E)}]),onClick:er=>c(E)},x(E.day),11,pt))),128))])])])])):L("",!0)]),_:1})]))}},gt=H(ft,[["__scopeId","data-v-90be798d"]]),yt={class:"date-picker-wrapper"},vt={__name:"DatePicker",props:{modelValue:{type:String,default:""},maxDate:{type:[String,Date],default:()=>new Date}},emits:["update:modelValue","confirm"],setup(t,{emit:e}){const r=t,a=e,s=T(null),n=T(!1),l=I({get(){return r.modelValue?r.modelValue:""},set(){}});function u(){n.value=!0}function g(o){a("update:modelValue",o)}function y(o){a("update:modelValue",o),a("confirm",o)}return(o,_)=>(f(),v("div",yt,[Y(i("input",{ref_key:"inputRef",ref:s,"onUpdate:modelValue":_[0]||(_[0]=p=>l.value=p),readonly:"",class:"date-picker-input",onClick:u},null,512),[[G,l.value]]),(f(),v("svg",{class:"calendar-icon",viewBox:"0 0 24 24",onClick:u},[..._[2]||(_[2]=[i("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"},null,-1)])])),z(gt,{show:n.value,"onUpdate:show":_[1]||(_[1]=p=>n.value=p),"model-value":t.modelValue,"max-date":t.maxDate,"onUpdate:modelValue":g,onConfirm:y},null,8,["show","model-value","max-date"])]))}},wt=H(vt,[["__scopeId","data-v-74b59010"]]),bt={key:0,class:"toast-icon",viewBox:"0 0 24 24"},_t={key:1,class:"toast-icon",viewBox:"0 0 24 24"},St={key:2,class:"toast-icon",viewBox:"0 0 24 24"},Dt={class:"toast-message"},Mt={__name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"success",validator:t=>["success","warning","error"].includes(t)},visible:{type:Boolean,default:!1}},setup(t){return(e,r)=>(f(),U(ee,{to:"body"},[z(ue,{name:"toast"},{default:j(()=>[t.visible?(f(),v("div",{key:0,class:R(["toast-container",[`toast-${t.type}`]])},[t.type==="success"?(f(),v("svg",bt,[...r[0]||(r[0]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},null,-1)])])):t.type==="error"?(f(),v("svg",_t,[...r[1]||(r[1]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},null,-1)])])):t.type==="warning"?(f(),v("svg",St,[...r[2]||(r[2]=[i("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},null,-1)])])):L("",!0),i("span",Dt,x(t.message),1)],2)):L("",!0)]),_:1})]))}},kt=H(Mt,[["__scopeId","data-v-41b08afd"]]);let le=null,q=null,O=null;function Et(){return le||(q=document.createElement("div"),q.id="toast-container",document.body.appendChild(q),O=de({message:"",type:"success",visible:!1,timer:null}),le=me({render(){return we(kt,{message:O.message,type:O.type,visible:O.visible})}}).mount(q)),O}function J(t,e="success",r=2e3){const a=Et();return a.timer&&clearTimeout(a.timer),a.message=t,a.type=e,a.visible=!0,r>0&&(a.timer=setTimeout(()=>{a.visible=!1},r)),{close:()=>{a.timer&&clearTimeout(a.timer),a.visible=!1}}}const k={success(t,e){return J(t,"success",e)},warning(t,e){return J(t,"warning",e)},error(t,e){return J(t,"error",e)}},Vt=async t=>{const e=F();if(!e.userId)throw new Error("用户未登录，无法上传文件");if(!t||!(t instanceof File))return"";const r=e.userId,a=t.name,s=a.split(/[/\\]/).pop()??a,n=`${r}/${Date.now()}_${s}`,{data:l,error:u}=await w.storage.from("gzynb").upload(n,t,{cacheControl:"3600",upsert:!1});if(u)throw console.error("文件上传失败：",u),new Error(u.message);if(!l)throw new Error("文件上传成功，但未返回文件路径");return`${re}/storage/v1/object/public/${l.fullPath}`},It=async t=>{t=t.replace(`${re}/storage/v1/object/public/gzynb/`,"");const{error:e}=await w.storage.from("gzynb").remove([t]);if(e)throw new Error(e.message)},zt={class:"image-upload-container"},Pt={key:0,class:"image-preview-wrapper"},Tt={class:"upload-hint"},Ct={__name:"ImageUpload",props:{modelValue:{type:String,default:""},maxSize:{type:Number,default:5}},emits:["update:modelValue"],setup(t,{emit:e}){const r=t,a=e,s=T(r.modelValue?[{url:r.modelValue,isImage:!0}]:[]),n=T(null),l=F(),u=p=>["image/jpeg","image/png","image/jpg"].includes(p.type)?!0:(k.warning("只支持 JPG、PNG 格式的图片"),!1),g=async p=>{if(!l.userId){k.warning("请先到设置页 -> 个人资料 -> 登录");return}p instanceof Array&&(p=p[0]),p.status="uploading";try{const h=await y(p.file,800,.6);if(!h)throw k.error("图片压缩失败"),p.status="failed",new Error("图片压缩失败，未生成有效文件");const b=await Vt(h);a("update:modelValue",b),p.status="success",p.data=b,s.value=[{url:b,isImage:!0}],k.success("图片添加成功")}catch(h){p.status="failed",s.value=[],console.error("图片上传失败:",h),k.error(`图片上传失败：${h.message}`)}},y=(p,h,b)=>{if(p)return new Promise((m,c)=>{new Me(p,{quality:b,maxWidth:h,maxHeight:800,convertSize:1e6,checkOrientation:!0,success(d){const C=new File([d],d.name,{type:d.type});m(C)},error(d){c(new Error(`图片压缩失败: ${d.message}`))}})})},o=()=>{k.error(`图片大小不能超过 ${r.maxSize}MB`)},_=async()=>{const p=_e({message:"删除中...",forbidClick:!0});try{await It(s.value[0].url),a("update:modelValue",""),s.value=[],p.close(),Se("图片已删除")}catch(h){p.close(),console.error("删除图片失败:",h),De("删除图片失败")}};return(p,h)=>(f(),v(A,null,[i("div",zt,[z(V(be),{ref_key:"uploaderRef",ref:n,modelValue:s.value,"onUpdate:modelValue":h[0]||(h[0]=b=>s.value=b),"after-read":g,"before-read":u,"max-size":t.maxSize*1024*1024,onOversize:o,"max-count":1,accept:"image/*",class:"hidden-uploader"},{default:j(()=>[...h[1]||(h[1]=[i("div",{class:"upload-button"},[i("svg",{viewBox:"0 0 24 24"},[i("path",{d:"M19 3H5c-1.1 0-1.99.9-1.99 2L3 19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5.04-6.71l-2.75 3.54-1.96-2.36L6.5 17h11l-3.54-4.71z"})]),i("span",null,"添加图片")],-1)])]),_:1},8,["modelValue","max-size"]),t.modelValue?(f(),v("div",Pt,[z(V(K),{type:"warning",size:"small",icon:"delete",class:"delete-image-btn",onClick:Z(_,["stop"])})])):L("",!0)]),i("p",Tt,"支持 JPG、PNG 格式，最大 "+x(t.maxSize)+"MB",1)],64))}},Rt=H(Ct,[["__scopeId","data-v-887ecc52"]]),xt={class:"modal-content"},Lt={class:"modal-header"},Ot={class:"modal-title"},$t={class:"type-toggle"},At={class:"form-group"},Ht={class:"amount-input-wrapper"},Bt={class:"form-group"},Ut={class:"category-grid"},jt=["onClick"],qt=["innerHTML"],Nt={class:"category-name"},Wt={class:"form-group"},Ft={class:"form-group"},Jt={class:"form-group"},Yt={class:"modal-actions"},Gt={__name:"AddRecordModal",setup(t){const e=te(),r=F(),a=he(),s=T(null),n=T(!1),l=T(!1),u=I(()=>e.editingRecord!==null),g=I(()=>u.value?"编辑记录":"添加记录"),y=[{name:"餐饮",icon:'<path d="M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z"/>',type:"expense"},{name:"交通",icon:'<path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"/>',type:"expense"},{name:"购物",icon:'<path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>',type:"expense"},{name:"娱乐",icon:'<path d="M21 5.71v12.58c0 1.45-1.38 2.58-2.91 2.58H2.91C1.38 20.87 0 19.74 0 18.29V5.71C0 4.26 1.38 3.13 2.91 3.13h15.18C19.62 3.13 21 4.26 21 5.71zM12 17c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5z"/>',type:"expense"},{name:"医疗",icon:'<path d="M19 3H5c-1.1 0-1.99.9-1.99 2L3 19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 11h-4v4h-4v-4H6v-4h4V6h4v4h4v4z"/>',type:"expense"},{name:"工资",icon:'<path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/>',type:"income"},{name:"投资",icon:'<path d="M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"/>',type:"income"},{name:"礼金",icon:'<path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"/>',type:"income"},{name:"其他",icon:'<path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>',type:"both"}],o=de({type:"expense",amount:"",category:"餐饮",note:"",date:P(new Date),image:""});I(()=>y.filter(m=>m.type===o.type||m.type==="both")),N(()=>e.isModalOpen,m=>{if(m)if(u.value){const c=e.editingRecord;o.type=c.type,o.category=c.category,o.amount=Math.abs(c.amount),o.note=c.note||"",o.date=c.date.split("T")[0],o.image=c.image_url||""}else{if(o.type=e.modalType,e.defaultCategory)o.category=e.defaultCategory;else{const c=y.find(d=>d.type===o.type||d.type==="both");o.category=(c==null?void 0:c.name)||"餐饮"}o.amount="",o.note="",o.date=P(new Date),o.image=""}}),N(()=>o.type,m=>{const c=y.find(d=>d.type===m||d.type==="both");o.category=(c==null?void 0:c.name)||"餐饮"});function _(m){o.category=m}function p(m){const c=m.target.value;if(c===""||c===null||c===void 0){o.amount="";return}let d=String(c);if(d.includes(".")){const C=d.split("."),D=C[0]||"0",S=C[1]||"";if(S.length>2){const E=`${D}.${S.substring(0,2)}`;m.target.value=E,o.amount=E}else o.amount=d}else o.amount=d}async function h(){if(!r.userId){k.warning("请先到设置页 -> 个人资料 -> 登录");return}if(!o.amount||o.amount<=0){k.warning("请输入有效金额");return}if(o.amount<.01){k.warning("金额不能低于 0.01 元");return}n.value=!0;try{if(u.value){const m=e.editingRecord.date.split("T")[1];await a.updateRecord(e.editingRecord.id,{type:o.type,amount:o.amount,category:o.category,note:o.note,date:`${o.date}T${m}`,image_url:o.image}),k.success("记录更新成功")}else{const m=new Date,c=new Date(o.date);c.setHours(m.getHours(),m.getMinutes(),m.getSeconds(),m.getMilliseconds()),await a.addRecord(r.userId,{type:o.type,amount:o.amount,category:o.category,note:o.note,date:c.toISOString(),image_url:o.image}),k.success("记录添加成功")}e.closeModal()}catch(m){k.error("操作失败: "+m.message),console.error("提交记录失败:",m)}finally{n.value=!1}}async function b(){u.value&&(l.value=!0,ke({title:"删除记录",message:"确定要清除记录吗？",confirmButtonColor:"#ff8a5b",cancelButtonColor:"#8a8a8a"}).then(async()=>{await a.deleteRecord(e.editingRecord.id),k.success("记录删除成功"),l.value=!1,e.closeModal()}).catch(m=>{l.value=!1,m!=="cancel"&&(console.error("删除记录失败:",m),k.error("删除失败: "+m.message))}))}return(m,c)=>(f(),U(ee,{to:"body"},[V(e).isModalOpen?(f(),v("div",{key:0,class:"modal-overlay",onClick:c[7]||(c[7]=Z((...d)=>V(e).closeModal&&V(e).closeModal(...d),["self"]))},[i("div",xt,[i("div",Lt,[i("div",Ot,x(g.value),1),i("button",{class:"modal-close-btn",onClick:c[0]||(c[0]=(...d)=>V(e).closeModal&&V(e).closeModal(...d))},[...c[8]||(c[8]=[i("svg",{viewBox:"0 0 24 24"},[i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])])]),i("div",$t,[i("button",{class:R(["type-btn expense",{active:o.type==="expense"}]),onClick:c[1]||(c[1]=d=>o.type="expense")},"支出",2),i("button",{class:R(["type-btn income",{active:o.type==="income"}]),onClick:c[2]||(c[2]=d=>o.type="income")},"收入",2)]),i("div",At,[c[10]||(c[10]=i("label",{class:"form-label"},"金额",-1)),i("div",Ht,[c[9]||(c[9]=i("span",{class:"currency-symbol"},"¥",-1)),Y(i("input",{ref_key:"amountInput",ref:s,"onUpdate:modelValue":c[3]||(c[3]=d=>o.amount=d),type:"number",class:"form-input amount-input",placeholder:"0.00",step:"0.01",min:"0.00",onInput:p},null,544),[[G,o.amount]])])]),i("div",Bt,[c[11]||(c[11]=i("label",{class:"form-label"},"分类",-1)),i("div",Ut,[(f(),v(A,null,B(y,d=>i("button",{key:d.name,class:R(["category-option",{selected:o.category===d.name}]),onClick:C=>_(d.name)},[(f(),v("svg",{viewBox:"0 0 24 24",innerHTML:d.icon},null,8,qt)),i("div",Nt,x(d.name),1)],10,jt)),64))])]),i("div",Wt,[c[12]||(c[12]=i("label",{class:"form-label"},"备注",-1)),Y(i("input",{"onUpdate:modelValue":c[4]||(c[4]=d=>o.note=d),type:"text",class:"form-input",placeholder:"添加备注..."},null,512),[[G,o.note]])]),i("div",Ft,[c[13]||(c[13]=i("label",{class:"form-label"},"日期",-1)),z(wt,{modelValue:o.date,"onUpdate:modelValue":c[5]||(c[5]=d=>o.date=d)},null,8,["modelValue"])]),i("div",Jt,[c[14]||(c[14]=i("label",{class:"form-label"},"记录图片（可选）",-1)),z(Rt,{modelValue:o.image,"onUpdate:modelValue":c[6]||(c[6]=d=>o.image=d),"max-size":5},null,8,["modelValue"])]),i("div",Yt,[u.value?(f(),U(V(K),{key:0,loading:l.value,disabled:n.value,class:"delete-btn",onClick:b},{default:j(()=>[...c[15]||(c[15]=[se("删除记录",-1)])]),_:1},8,["loading","disabled"])):L("",!0),z(V(K),{loading:n.value,disabled:l.value,class:"submit-btn",onClick:h},{default:j(()=>[se(x(u.value?"保存修改":"保存记录"),1)]),_:1},8,["loading","disabled"])])])])):L("",!0)]))}},Kt=H(Gt,[["__scopeId","data-v-beb545c1"]]),Xt={__name:"App",setup(t){const e=ce(),r=te(),a=F(),s=I(()=>{var n;return(n=e.meta)==null?void 0:n.isSubPage});return Ee(async()=>{r.initTheme(),await a.initializeAuth()}),(n,l)=>{const u=Ve("router-view");return f(),v("div",{id:"app",class:R({"dark-theme":V(r).isDark,"hide-tabbar":s.value})},[l[0]||(l[0]=i("div",{class:"bg-decoration bg-decoration-1"},null,-1)),l[1]||(l[1]=i("div",{class:"bg-decoration bg-decoration-2"},null,-1)),l[2]||(l[2]=i("div",{class:"bg-decoration bg-decoration-3"},null,-1)),z(u),s.value?L("",!0):(f(),U(Je,{key:0})),z(Kt)],2)}}},Qt=H(Xt,[["__scopeId","data-v-72179003"]]);document.addEventListener("plusready",function(){var t=null,e=window.plus.webview.currentWebview();window.plus.key.addEventListener("backbutton",function(){e.canBack(function(r){r.canBack?e.back():t?new Date().getTime()-t<1e3&&window.plus.runtime.quit():(t=new Date().getTime(),window.plus.nativeUI.toast("再按一次退出应用",{duration:"short"}),setTimeout(function(){t=null},1e3))})})});const ae=me(Qt),Zt=Ie();ae.use(Zt);ae.use(Re);ae.mount("#app");export{H as _,he as a,te as b,Xe as c,rr as d,Vt as e,P as f,X as g,k as m,$ as s,F as u};
