import{i as p,e as b,J as B,f,g as s,l as h,t as m,h as a,m as V,B as w,p as C,W as P,u as R,o as v}from"./vendor-CLLCb1yY.js";import{_ as T,u as S,m as i}from"./index-Bwo_eupb.js";const z={class:"field-edit-page"},E={class:"edit-nav"},M={class:"edit-title"},N={class:"edit-container"},F={class:"input-section"},H={class:"input-wrapper"},L={key:0,class:"input-hint"},U={__name:"FieldEditPage",setup($){const d=R(),g=b(),n=S(),c={username:{title:"修改用户名",placeholder:"请输入用户名",inputType:"text",hint:"用户名将用于显示和识别",validate:t=>t.trim()?t.length<2?"用户名至少需要2个字符":t.length>20?"用户名不能超过20个字符":null:"请输入用户名"},email:{title:"修改邮箱",placeholder:"请输入邮箱地址",inputType:"email",hint:"用于接收重要通知和账单信息",validate:t=>t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?null:"请输入有效的邮箱地址":null},phone:{title:"修改手机号码",placeholder:"请输入手机号码",inputType:"tel",maxlength:11,hint:"用于账户安全验证",validate:t=>t?/^1[3-9]\d{9}$/.test(t)?null:"请输入有效的手机号码":null}},o=p(!1),u=g.query.field,l=c[u]||c.username,r=p(""),_={username:n.userName,email:n.userEmail,phone:n.userPhone},x=()=>{d.back()},y=async()=>{const t=l.validate(r.value);if(t){i.warning(t);return}o.value=!0;try{const e=await n.updateProfile({[u]:r.value.trim()});e&&!e.error?(i.success("个人信息更新成功"),setTimeout(()=>{d.back()},500)):i.error("个人信息更新失败"+e.error)}catch(e){i.error("个人信息更新失败"+e)}finally{o.value=!1}};return B(()=>{n.userProfile&&(r.value=_[u])}),(t,e)=>(v(),f("div",z,[s("div",E,[s("button",{class:"nav-back-btn",onClick:x},[...e[1]||(e[1]=[s("svg",{viewBox:"0 0 24 24"},[s("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})],-1)])]),s("h1",M,m(a(l).title),1),h(a(w),{loading:o.value,class:"nav-save-btn",onClick:y},{default:V(()=>[...e[2]||(e[2]=[s("span",null,"保存",-1)])]),_:1},8,["loading"])]),s("div",N,[s("div",F,[s("div",H,[h(a(P),{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=k=>r.value=k),type:a(l).inputType||"text",placeholder:a(l).placeholder,maxlength:a(l).maxlength,class:"edit-input",border:!1,clearable:"","clear-trigger":"always"},null,8,["modelValue","type","placeholder","maxlength"])]),a(l).hint?(v(),f("div",L,[e[3]||(e[3]=s("svg",{viewBox:"0 0 24 24"},[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})],-1)),s("span",null,m(a(l).hint),1)])):C("",!0)])])]))}},I=T(U,[["__scopeId","data-v-5ca9efdc"]]);export{I as default};
