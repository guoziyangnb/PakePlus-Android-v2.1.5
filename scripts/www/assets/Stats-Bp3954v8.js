import{_ as B,r as I,h as _,c as n,o as s,a as e,v as x,F as b,g as C,q,t as $,s as P,u as z,i as T,m as Z}from"./index-D7m2HG1J.js";import{_ as D}from"./Header-C-_K82-i.js";const O={class:"pie-chart-container"},R={class:"pie-chart-svg",viewBox:"0 0 200 200"},X={key:0},Y=["d","fill","onClick","onMouseenter"],G={key:1,cx:"100",cy:"100",r:"55",fill:"var(--bg-primary)",class:"pie-chart-center-circle"},H={key:2,x:"100",y:"95","text-anchor":"middle",class:"pie-chart-label"},J={key:3,x:"100",y:"120","text-anchor":"middle",class:"pie-chart-value"},K={class:"pie-chart-legend"},Q={class:"legend-label"},U={class:"legend-value"},W={__name:"PieChart",props:{data:{type:Array,required:!0,default:()=>[]}},setup(M){const v=M,l=I(-1),i=I(-1),p=["var(--accent-orange)","var(--accent-blue)","var(--accent-purple)","var(--accent-green)","var(--text-secondary)"],h=_(()=>v.data.reduce((o,t)=>o+t.amount,0)),y=_(()=>{if(h.value===0)return[];let o=-90;const t=80,c=100,r=100;return v.data.map((m,f)=>{const A=m.amount/h.value,k=A*360;if(A===1)return{path:[`M ${c} ${r}`,`L ${c} ${r-t}`,`A ${t} ${t} 0 0 1 ${c} ${r+t}`,`A ${t} ${t} 0 0 1 ${c} ${r-t}`,"Z"].join(" "),color:p[f%p.length],data:m,index:f};const F=o*Math.PI/180,S=(o+k)*Math.PI/180,V=c+t*Math.cos(F),j=r+t*Math.sin(F),w=c+t*Math.cos(S),E=r+t*Math.sin(S),L=k>180?1:0,N=[`M ${c} ${r}`,`L ${V} ${j}`,`A ${t} ${t} 0 ${L} 1 ${w} ${E}`,"Z"].join(" ");return o+=k,{path:N,color:p[f%p.length],data:m,index:f}})}),u=_(()=>l.value!==-1?v.data[l.value].category:i.value!==-1?v.data[i.value].category:"总支出"),a=_(()=>{const o=l.value!==-1?l.value:i.value;return o!==-1?`${(v.data[o].amount/h.value*100).toFixed(1)}%`:`¥${h.value.toFixed(2)}`}),d=_(()=>v.data.map((o,t)=>({category:o.category,percentage:(o.amount/h.value*100).toFixed(1),color:p[t%p.length]})));function g(o){l.value===o?l.value=-1:l.value=o}return(o,t)=>(s(),n("div",O,[(s(),n("svg",R,[y.value.length>0?(s(),n("g",X,[(s(!0),n(b,null,C(y.value,(c,r)=>(s(),n("path",{key:r,d:c.path,fill:c.color,stroke:"var(--bg-primary)","stroke-width":"2",class:q(["pie-slice",{active:l.value===r,hovered:i.value===r}]),onClick:m=>g(r),onMouseenter:m=>i.value=r,onMouseleave:t[0]||(t[0]=m=>i.value=-1)},null,42,Y))),128))])):x("",!0),y.value.length>0?(s(),n("circle",G)):x("",!0),y.value.length>0?(s(),n("text",H,$(u.value),1)):x("",!0),y.value.length>0?(s(),n("text",J,$(a.value),1)):x("",!0)])),e("div",K,[(s(!0),n(b,null,C(d.value,(c,r)=>(s(),n("div",{key:r,class:"legend-item"},[e("div",{class:"legend-color",style:P({background:c.color})},null,4),e("span",Q,$(c.category),1),e("span",U,$(c.percentage)+"%",1)]))),128))])]))}},ee=B(W,[["__scopeId","data-v-9b77f8c9"]]),te={class:"page fade-in-up"},ae={class:"container"},se={class:"glass-card"},ne={key:1,class:"empty-state"},oe={class:"glass-card",style:{"margin-top":"24px"}},re={key:0},ce={class:"stat-bar-header"},le={class:"stat-bar-label"},ie={class:"stat-bar-value"},ue={class:"stat-bar-track"},de={key:1,class:"empty-state"},ve={class:"glass-card",style:{"margin-top":"24px"}},pe={class:"tips-text"},ge={__name:"Stats",setup(M){const v=z(),l=_(()=>v.totalExpense),i=_(()=>{const u=v.expenseByCategory,a=l.value;return Object.entries(u).map(([d,g])=>({category:d,amount:g,percentage:a>0?g/a*100:0})).sort((d,g)=>g.amount-d.amount)}),p=["var(--accent-orange)","var(--accent-blue)","var(--accent-purple)","var(--accent-green)","var(--text-secondary)"];function h(u){return p[u%p.length]}const y=_(()=>{if(i.value.length===0)return"开始记录你的每一笔支出，养成良好的理财习惯！";const u=i.value[0],a=u.percentage;return a>50?`本月${u.category}支出占比最高（${a.toFixed(0)}%），建议适当控制，合理分配支出。`:a>30?`本月${u.category}支出较多（${a.toFixed(0)}%），可以尝试寻找更经济实惠的替代方案。`:"支出分布比较均衡，继续保持良好的消费习惯！"});return(u,a)=>(s(),n("div",te,[T(D,{title:"财务统计"}),e("div",ae,[e("div",se,[a[1]||(a[1]=e("div",{class:"section-header"},[e("div",{class:"section-title"},"本月支出占比")],-1)),l.value>0?(s(),Z(ee,{key:0,data:i.value},null,8,["data"])):(s(),n("div",ne,[...a[0]||(a[0]=[e("p",null,"本月暂无支出记录",-1)])]))]),e("div",oe,[a[3]||(a[3]=e("div",{class:"section-header"},[e("div",{class:"section-title"},"本月支出详情")],-1)),l.value>0?(s(),n("div",re,[(s(!0),n(b,null,C(i.value,(d,g)=>(s(),n("div",{key:d.category,class:"stat-bar-item"},[e("div",ce,[e("span",le,$(d.category),1),e("span",ie,"¥"+$(d.amount.toFixed(2)),1)]),e("div",ue,[e("div",{class:"stat-bar-fill",style:P({width:d.percentage+"%",background:h(g)})},null,4)])]))),128))])):(s(),n("div",de,[...a[2]||(a[2]=[e("p",null,"本月暂无支出记录",-1)])]))]),e("div",ve,[a[4]||(a[4]=e("div",{class:"section-header"},[e("div",{class:"section-title"},"理财小贴士")],-1)),e("p",pe,$(y.value),1)])])]))}},$e=B(ge,[["__scopeId","data-v-9e453705"]]);export{$e as default};
